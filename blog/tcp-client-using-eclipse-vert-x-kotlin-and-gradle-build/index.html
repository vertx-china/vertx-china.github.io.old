<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="description" content="Vert.x | Reactive applications on the JVM"/><meta name="robots" content="index,follow"/><link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet"/><link href="https://fonts.googleapis.com/css?family=Roboto+Condensed:300,400" rel="stylesheet"/><link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400&amp;display=swap" rel="stylesheet"/><link rel="shortcut icon" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="48x48" href="/favicons/favicon-48x48.png"/><link rel="alternate" type="application/rss+xml" href="/feed/rss.xml"/><link rel="alternate" type="application/atom+xml" href="/feed/atom.xml"/><link rel="alternate" type="application/json" href="/feed/feed.json"/><title>TCP Client using Eclipse Vert.x, Kotlin and Gradle build | 博客 | Eclipse Vert.x</title><meta name="next-head-count" content="16"/><link rel="preload" href="/_next/static/css/styles.f20dca63.chunk.css" as="style"/><link rel="stylesheet" href="/_next/static/css/styles.f20dca63.chunk.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-b6e20584df76f29b6f35.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-d7b2fb72fb7257504a38.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.fcef98db13e2318579fb.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.5b8771ac6e8a338f82f1.js" as="script"/><link rel="preload" href="/_next/static/chunks/styles.7064a0f84b2a7c13404a.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-3dbbc9c041333077c167.js" as="script"/><link rel="preload" href="/_next/static/chunks/5df0631eea625b022d3730b3f1bf573e1b8deb37.3b9874ba65db13e7d868.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/blog/%5B%5B...slug%5D%5D-c36bc482402d8ffe42a5.js" as="script"/></head><body><div id="__next"><main class="page"><header><div class="navbar"><div class="navbar-content container"><div class="navbar-logo"><a href="/"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAxMTI1LjYgMzE1LjIiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxzdHlsZT4uc3Qwe2ZpbGw6Izc4MmE5MX08L3N0eWxlPjxwYXRoIGQ9Ik0xMjAuOSAyMTQuMkwxOTAuNSAwaDUyLjNsLTk4LjUgMjczLjhIOTguMkwwIDBoNTIuMWw2OC44IDIxNC4yem0yOTEuMi02Mi42SDI5OS42djg0LjJINDMxdjM4SDI1MlYwaDE3Ny43djM4LjRIMjk5LjZWMTE0aDExMi41djM3LjZ6bTgzLjctMTEzLjJINTQ2YzE2LjUuMyAyOSA0LjQgMzcuMyAxMi40IDguMyA4IDEyLjUgMTkuNCAxMi41IDM0IDAgMTQtNC41IDI1LjEtMTMuNSAzMy4yLTkgOC4xLTIxLjYgMTIuMS0zNy42IDEyLjFoLTI3LjF2MjQuMmw4Ni4xIDExOS41aDUxdi0yLjRsLTc3LjItMTA2LjdjMjQuOS01LjUgNDMuMy0yMS43IDUyLjYtMzUuOSA4LjItMTIuNiAxMy4zLTI3LjcgMTMuMy00NiAwLTI2LjgtOC42LTQ3LjQtMjUuOC02MS41QzYwMC41IDcuMSA1NzYuMSAwIDU0NC41IDBoLTk2LjN2MjczLjhoNDcuNiIvPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDUyLjMgMTU3LjdsLTQxLjUgNjIuNyAyOS43IDUzLjRoODUuMXoiLz48Y2lyY2xlIGNsYXNzPSJzdDAiIGN4PSI4MjcuOSIgY3k9IjI3NC43IiByPSI0MC41Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTEwMzcgMGwtNDcuNiA3NC4yTDk0OSAwaC04NGw4NS4zIDEzNS44LTY3LjEgMTA1LjdjNS43IDkuNSA5LjEgMjAuNSA5LjIgMzIuNGg1MC4xTDExMjEuMyAwSDEwMzd6Ii8+PHBhdGggZD0iTTc2My41IDI3My44Yy4xLTkuOSAyLjUtMTkuMiA2LjYtMjcuNVYzOC40aDg1LjRWMEg2MzguMnYzOC40aDg0LjZ2MjM1LjRoNDAuN3oiLz48L3N2Zz4=" alt="Vert.x Logo"/></a></div><div class="navbar-collapse-button"><span></span><span></span><span></span></div><div class="navbar-right"><div class="navbar-menu"><span class="navbar-menu-item with-drop-down"><div class="dropdown"><a class="dropdown-title">开始<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="dropdown-menu"><a href="/introduction-to-vertx-and-reactive/"><li class="dropdown-item">简介</li></a><a href="/get-started/"><li class="dropdown-item">开始</li></a><a href="https://start.vertx.io/" target="_blank" rel="noreferrer"><li class="dropdown-item">App generator <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a></ul></div></span><a class="navbar-menu-item" href="/docs/">文档</a><span class="navbar-menu-item with-drop-down"><div class="dropdown"><a class="dropdown-title">资源<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="dropdown-menu"><a href="/faq/"><li class="dropdown-item">答疑</li></a><a href="/channels/"><li class="dropdown-item">Channels</li></a><a href="https://how-to.vertx.io/" target="_blank" rel="noreferrer"><li class="dropdown-item">How-To’s <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a><a href="https://github.com/vert-x3/vertx-eventbus-bridge-clients" target="_blank" rel="noreferrer"><li class="dropdown-item">EventBus Bridge Clients <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a></ul></div></span><a class="navbar-menu-item" href="/blog/">博客</a><a class="navbar-menu-item" href="/community/">社区</a><a class="navbar-menu-item" href="/translation/">翻译团队</a></div><div class="navbar-social"><a href="https://github.com/vert-x3/vertx-awesome" class="navbar-social-link" title="Awesome Vert.x" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="List of awesome Vert.x projects"><title>Awesome Vert.x</title><path d="M24 11.438l-6.154-5.645-.865.944 5.128 4.7H1.895l5.128-4.705-.865-.943-6.154 5.649H0v3.72c0 1.683 1.62 3.053 3.61 3.053h3.795c1.99 0 3.61-1.37 3.61-3.051v-2.446h1.97v2.446c0 1.68 1.62 3.051 3.61 3.051h3.794c1.99 0 3.61-1.37 3.61-3.051v-3.721z"></path></svg></a><a href="https://stackoverflow.com/questions/tagged/vert.x" class="navbar-social-link" title="Stack Overflow" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Stack Overflow questions related to Vert.x"><title>Stack Overflow</title><path d="M18.986 21.865v-6.404h2.134V24H1.844v-8.539h2.13v6.404h15.012zM6.111 19.731H16.85v-2.137H6.111v2.137zm.259-4.852l10.48 2.189.451-2.07-10.478-2.187-.453 2.068zm1.359-5.056l9.705 4.53.903-1.95-9.706-4.53-.902 1.936v.014zm2.715-4.785l8.217 6.855 1.359-1.62-8.216-6.853-1.35 1.617-.01.001zM15.751 0l-1.746 1.294 6.405 8.604 1.746-1.294L15.749 0h.002z"></path></svg></a><a href="https://www.youtube.com/channel/UCGN6L3tRhs92Uer3c6VxOSA" class="navbar-social-link" title="YouTube" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="YouTube channel of Vert.x"><title>YouTube</title><path d="M23.499 6.203a3.008 3.008 0 00-2.089-2.089c-1.87-.501-9.4-.501-9.4-.501s-7.509-.01-9.399.501a3.008 3.008 0 00-2.088 2.09A31.258 31.26 0 000 12.01a31.258 31.26 0 00.523 5.785 3.008 3.008 0 002.088 2.089c1.869.502 9.4.502 9.4.502s7.508 0 9.399-.502a3.008 3.008 0 002.089-2.09 31.258 31.26 0 00.5-5.784 31.258 31.26 0 00-.5-5.808zm-13.891 9.4V8.407l6.266 3.604z"></path></svg></a><a href="https://discord.gg/KzEMwP2" class="navbar-social-link" title="Discord" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Eclipse Vert.x channel on Discord"><title>Discord</title><path d="M20.222 0c1.406 0 2.54 1.137 2.607 2.475V24l-2.677-2.273-1.47-1.338-1.604-1.398.67 2.205H3.71c-1.402 0-2.54-1.065-2.54-2.476V2.48C1.17 1.142 2.31.003 3.715.003h16.5L20.222 0zm-6.118 5.683h-.03l-.202.2c2.073.6 3.076 1.537 3.076 1.537-1.336-.668-2.54-1.002-3.744-1.137-.87-.135-1.74-.064-2.475 0h-.2c-.47 0-1.47.2-2.81.735-.467.203-.735.336-.735.336s1.002-1.002 3.21-1.537l-.135-.135s-1.672-.064-3.477 1.27c0 0-1.805 3.144-1.805 7.02 0 0 1 1.74 3.743 1.806 0 0 .4-.533.805-1.002-1.54-.468-2.14-1.404-2.14-1.404s.134.066.335.2h.06c.03 0 .044.015.06.03v.006c.016.016.03.03.06.03.33.136.66.27.93.4.466.202 1.065.403 1.8.536.93.135 1.996.2 3.21 0 .6-.135 1.2-.267 1.8-.535.39-.2.87-.4 1.397-.737 0 0-.6.936-2.205 1.404.33.466.795 1 .795 1 2.744-.06 3.81-1.8 3.87-1.726 0-3.87-1.815-7.02-1.815-7.02-1.635-1.214-3.165-1.26-3.435-1.26l.056-.02zm.168 4.413c.703 0 1.27.6 1.27 1.335 0 .74-.57 1.34-1.27 1.34-.7 0-1.27-.6-1.27-1.334.002-.74.573-1.338 1.27-1.338zm-4.543 0c.7 0 1.266.6 1.266 1.335 0 .74-.57 1.34-1.27 1.34-.7 0-1.27-.6-1.27-1.334 0-.74.57-1.338 1.27-1.338z"></path></svg></a><a href="https://groups.google.com/forum/?fromgroups#!forum/vertx" class="navbar-social-link" title="Vert.x User Group" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="A Google group for Vert.x users"><title>Vert.x User Group</title><path d="M.92 3.332c-.776 0-1.216.67-.692 1.383l2.537 4.403v7.86c0 2.013 1.467 3.69 3.459 3.69H20.31a3.75 3.75 0 003.69-3.69V7.043a3.723 3.723 0 00-3.668-3.71zm5.786 3.71H20.1c.587 0 1.153.357 1.153.923 0 .566-.566.922-1.153.922H6.706c-.587 0-1.153-.356-1.153-.922 0-.566.566-.923 1.153-.923zm0 3.69H20.1c.587 0 1.153.356 1.153.922 0 .566-.566.922-1.153.922H6.706c-.587 0-1.153-.356-1.153-.922 0-.566.566-.922 1.153-.922zm-.021 3.71h9.705c.587 0 1.153.356 1.153.922 0 .566-.566.923-1.153.923H6.685c-.587 0-1.153-.357-1.153-.923 0-.566.566-.922 1.153-.922Z"></path></svg></a><a href="https://shang.qq.com/wpa/qunwpa?idkey=587f58cacb9557e3291b46098e0fe09427b98a1c0f866da23c04c2762bc7e2ad" class="navbar-social-link" title="Vert.x中国用户组QQ群" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Vert.x中国用户组QQ群"><title>Vert.x中国用户组QQ群</title><path d="M21.395 15.035a39.548 39.548 0 0 0-.803-2.264l-1.079-2.695c.001-.032.014-.562.014-.836C19.526 4.632 17.351 0 12 0S4.474 4.632 4.474 9.241c0 .274.013.804.014.836l-1.08 2.695a38.97 38.97 0 0 0-.802 2.264c-1.021 3.283-.69 4.643-.438 4.673.54.065 2.103-2.472 2.103-2.472 0 1.469.756 3.387 2.394 4.771-.612.188-1.363.479-1.845.835-.434.32-.379.646-.301.778.343.578 5.883.369 7.482.189 1.6.18 7.14.389 7.483-.189.078-.132.132-.458-.301-.778-.483-.356-1.233-.646-1.846-.836 1.637-1.384 2.393-3.302 2.393-4.771 0 0 1.563 2.537 2.103 2.472.251-.03.581-1.39-.438-4.673zM12.662 4.846c.039-1.052.659-1.878 1.385-1.846s1.281.912 1.242 1.964c-.039 1.051-.659 1.878-1.385 1.846s-1.282-.912-1.242-1.964zM9.954 3c.725-.033 1.345.794 1.384 1.846.04 1.052-.517 1.931-1.242 1.963-.726.033-1.346-.794-1.385-1.845C8.672 3.912 9.228 3.033 9.954 3zM7.421 8.294c.194-.43 2.147-.908 4.566-.908h.026c2.418 0 4.372.479 4.566.908a.14.14 0 0 1 .014.061c0 .031-.01.059-.026.083-.163.238-2.333 1.416-4.553 1.416h-.026c-2.221 0-4.39-1.178-4.553-1.416a.136.136 0 0 1-.014-.144zm10.422 8.622c-.22 3.676-2.403 5.987-5.774 6.021h-.137c-3.37-.033-5.554-2.345-5.773-6.021-.081-1.35.001-2.496.147-3.43.318.063.638.122.958.176v3.506s1.658.334 3.318.103v-3.225c.488.027.96.04 1.406.034h.025c1.678.021 3.714-.204 5.683-.594.146.934.227 2.08.147 3.43zM10.48 5.804c.313-.041.542-.409.508-.825-.033-.415-.314-.72-.629-.679-.313.04-.541.409-.508.824.034.417.315.72.629.68zM14.479 5.156c.078.037.221.042.289-.146.035-.095.025-.165-.009-.214-.023-.033-.133-.118-.371-.176-.904-.22-1.341.384-1.405.499-.04.072-.012.176.056.227.067.051.139.037.179-.006.58-.628 1.21-.208 1.261-.184z"></path></svg></a></div></div></div></div></header><div class="page-content"><div class="container"><div class="blog-post"><div class="blog-navbar"><h2>Blog</h2><ul><li><a href="/blog/">All posts</a></li><li><a href="/blog/category/releases/">releases</a></li><li><a href="/blog/category/guides/">guides</a></li><li><a href="/blog/category/news/">news</a></li></ul><div class="feed-icons"><a href="/feed/atom.xml"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></div></div><div class="blog-post-main"><div class="blog-post-content"><h1>TCP Client using Eclipse Vert.x, Kotlin and Gradle build</h1><span><p>As part of my hobby project to con­trol Rasp­ber­ryPi using Google Home Mini and/or Alexa, I wanted to write a very sim­ple TCP client that keeps a con­nec­tion open to one of my cus­tom writ­ten server in cloud (I will write an­other blog post to cover the server side on a later date). The re­quire­ment of the client is to send a shared se­cret upon con­nect­ing and then keep wait­ing for mes­sage from server. Vert.x, Kotlin and Gra­dle allow rapid de­vel­op­ment of such project. The gen­er­ated jar can be ex­e­cuted on Rasp­berry Pi. These steps out­line the project setup and re­lated source code to show­case a Vert.x and Kotlin project with Gra­dle.</p><h2 id="project-directory-structure"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#project-directory-structure"></a>Project Directory Structure</h2><p>From com­mand line (or via Win­dows Ex­plorer, what­ever you pre­fer to use) cre­ate a di­rec­tory for project,for in­stance <code>vertx-net-client</code>. Since we are using Kotlin, we will place all Kotlin files in <code>src/main/kotlin</code> folder. The <code>src/main/resources</code> folder will con­tain our log­ging con­fig­u­ra­tion re­lated files.</p><pre><code class="hljs language-awk">cd vertx-net-client
mkdir -p src<span class="hljs-regexp">/main/</span>kotlin
mkdir -p src<span class="hljs-regexp">/main/</span>resources
</code></pre><h3 id="project-files"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#project-files"></a>Project Files</h3><p>We need to add fol­low­ing files in the project</p><ul><li><code>.gitignore</code>
If you want to check your project into git, you may con­sider adding fol­low­ing <code>.gitignore</code> file at root of your project</li></ul><div>...waiting for Gist...</div><ul><li><code>logback.xml</code>
This ex­am­ple is using slf4j and log­back for log­ging. If you de­cide to use it in your project, you may also add fol­low­ing log­back.xml file in <code>src/main/resources</code>. Mod­ify it as per your re­quire­ments. This ex­am­ple will
log on con­sole.</li></ul><div>...waiting for Gist...</div><h2 id="gradle-setup"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#gradle-setup"></a>Gradle Setup</h2><p>We will use Gra­dle build sys­tem for this project. If you don’t al­ready have Gra­dle avail­able on your sys­tem, down­load and unzip gra­dle in a di­rec­tory of your choice (<code>$GRADLE_HOME</code> is used here to rep­re­sent this di­rec­tory). This gra­dle dis­tri­b­u­tion will be used as a start­ing point to cre­ate Gra­dle wrap­per scripts for our project. These scripts will allow our project to down­load and use cor­rect ver­sion of gra­dle dis­tri­b­u­tion au­to­mat­i­cally with­out mess­ing up sys­tem. Re­ally use­ful when build­ing your project on CI tool or on any other de­vel­oper’s ma­chine.</p><p>Run fol­low­ing com­mand in project’s di­rec­tory</p><pre><code class="hljs language-bash"><span class="hljs-variable">$GRADLE_HOME</span>/bin/gradle wrapper
</code></pre><p>The above com­mands will gen­er­ate fol­low­ing files and di­rec­to­ries.</p><pre><code class="hljs language-bash">gradle/  gradlew  gradlew.bat
</code></pre><h3 id="gradle-build-file-buildgradle"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#gradle-build-file-buildgradle"></a>Gradle build file <code>build.gradle</code></h3><p>Cre­ate (and/or copy and mod­ify) fol­low­ing <code>build.gradle</code> in your project’s root di­rec­tory. Our ex­am­ple gra­dle build file is using <a href="https://github.com/jponge/vertx-gradle-plugin/">vertx-​gradle-plugin</a>.</p><div>...waiting for Gist...</div><p>In the project di­rec­tory, run fol­low­ing com­mand to down­load local gra­dle dis­tri­b­u­tion:</p><pre><code class="hljs language-bash">./gradlew
</code></pre><p>(or <code>.\gradlew.bat</code> if in Win­dows)</p><p>At this stage we should have fol­low­ing file struc­ture. This is also a good time to com­mit changes if you are work­ing with git.</p><ul><li><code>.gitignore</code>                              </li><li><code>build.gradle</code>                            </li><li><code>gradle/wrapper/gradle-wrapper.jar</code>       </li><li><code>gradle/wrapper/gradle-wrapper.properties</code></li><li><code>gradlew</code>                                 </li><li><code>gradlew.bat</code></li><li><code>src/main/resources/logback.xml</code></li></ul><p>Now that our project struc­ture is ready, time to add the meat of the project. You may use any IDE of your choice. My pref­er­ence is In­tel­liJ IDEA.</p><p>Cre­ate a new pack­age under <code>src/main/kotlin</code>. The pack­age name should be adapted from the fol­low­ing sec­tion of <code>build.gradle</code></p><pre><code class="hljs language-ebnf"><span class="hljs-attribute">vertx</span> {
<span class="hljs-attribute">    mainVerticle</span> = <span class="hljs-string">&quot;info.usmans.blog.vertx.NetClientVerticle&quot;</span>
}
</code></pre><p>From the above ex­am­ple, the pack­age name is <code>info.usmans.blog.vertx</code></p><p>Add a new Kotlin Class/file in <code>src/main/kotlin/info/usmans/blog/vertx</code> as <code>NetClientVerticle.kt</code></p><p>The con­tents of this class is as fol­lows</p><div>...waiting for Gist...</div><h2 id="explaining-the-code"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#explaining-the-code"></a>Explaining the Code</h2><p>The <code>fun main(args: Array&lt;String&gt;)</code> is not strictly re­quired, it quickly al­lows run­ning the Vert.x ver­ti­cle from within IDE. You will also no­tice a small hack in the method for set­ting sys­tem prop­erty <code>vertx.disableDnsResolver</code> which is to avoid a Netty bug that I ob­served when run­ning on Win­dows ma­chine and re­mote server is down. Of course, since we are using vertx-​gradle-plugin, we can also use <code>gradle vertxRun</code> to run our ver­ti­cle. In this case the <code>main</code> method will not get called.</p><p>The <code>override fun start()</code> method calls <code>fireReconnectTimer</code> which in turn calls <code>reconnect</code> method. <code>reconnect</code> method con­tains the con­nec­tion logic to server as well as it calls <code>fireReconnectTimer</code> if it is un­able to con­nect to server or dis­con­nects from server. In <code>reconnect</code> method the <code>socket.handler</code> gets called when server send mes­sage to client.</p><pre><code class="hljs language-xl"><span class="hljs-function"><span class="hljs-title">socket</span>.handler({ <span class="hljs-keyword">data</span> -&gt;</span>
                        logger.info(<span class="hljs-string">&quot;Data received: ${data}&quot;</span>)
                        <span class="hljs-comment">//<span class="hljs-doctag">TODO:</span> Do the work here ...</span>
               })
</code></pre><h2 id="distributing-the-project"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#distributing-the-project"></a>Distributing the project</h2><p>To cre­ate re­dis­trib­utable jar, use <code>./gradlew shadowJar</code> com­mand. Or if using In­tel­liJ: from Gra­dle projects, Tasks, shadow, shad­ow­Jar (right click run). This com­mand will gen­er­ate <code>./build/libs/vertx-net-client-fat.jar</code>.</p><h3 id="executing-the-client"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#executing-the-client"></a>Executing the client</h3><p>The client jar can be ex­e­cuted using fol­low­ing com­mand:</p><pre><code class="hljs language-bash"> java -DserverHost=127.0.0.1 -DserverPort=8888 -DconnectMessage=<span class="hljs-string">&quot;hello&quot;</span> -jar vertx-net-client-full.jar
</code></pre><p>If you wish to use SLF4J for Vert.x in­ter­nal log­ging, you need to pass sys­tem prop­erty <code>vertx.logger-delegate-factory-class-name</code> with value of <code>io.vertx.core.logging.SLF4JLogDelegateFactory</code>. The final com­mand would look like:</p><pre><code class="hljs language-bash">java -DserverHost=127.0.0.1 -DserverPort=8888 -DconnectMessage=<span class="hljs-string">&quot;hello&quot;</span> -Dvertx.logger-delegate-factory-class-name=<span class="hljs-string">&quot;io.vertx.core.logging.SLF4JLogDelegateFactory&quot;</span> -jar vertx-net-client-full.jar
</code></pre><p>You can con­fig­ure Vert.x log­ging lev­els in log­back.xml file if re­quired.</p><h2 id="conclusion"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#conclusion"></a>Conclusion</h2><p>This post de­scribes how easy it is to cre­ate a sim­ple TCP client using Vert.x, Kotlin and Gra­dle build sys­tem. Hope­fully the tech­niques shown here will serve as a start­ing point for your next DIY project.</p><div class="alert info"><p>This post is adapted and re­pro­duced from <a href="https://usmans.info/view/blog/tcp_client_using_vertx_kotlin_gradle">au­thor’s blog post</a></p></div></span></div><div class="blog-post-sidebar"><div class="blog-post-author"><img class="blog-post-author-avatar" src="https://github.com/usmansaleem.png?size=160"/><div class="blog-post-author-name">by <a href="https://github.com/usmansaleem" target="_blank" rel="noopener noreferrer">Usman Saleem</a></div></div><div class="blog-post-sidebar-date">Posted on <!-- -->20 December 2017</div>in <a class="blog-post-sidebar-category" href="/blog/category/guides/">guides</a><div class="blog-post-sidebar-reading-time"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg> <!-- -->5 min read</div><div class="blog-post-sidebar-share-icons"><a href="https://twitter.com/intent/tweet?text=TCP%20Client%20using%20Eclipse%20Vert.x%2C%20Kotlin%20and%20Gradle%20build&amp;url=https%3A%2F%2Fvertx-china.github.io%2Fblog%2Ftcp-client-using-eclipse-vert-x-kotlin-and-gradle-build&amp;via=vertx_project" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><title>Twitter</title><path d="M23.954 4.569c-.885.389-1.83.654-2.825.775 1.014-.611 1.794-1.574 2.163-2.723-.951.555-2.005.959-3.127 1.184-.896-.959-2.173-1.559-3.591-1.559-2.717 0-4.92 2.203-4.92 4.917 0 .39.045.765.127 1.124C7.691 8.094 4.066 6.13 1.64 3.161c-.427.722-.666 1.561-.666 2.475 0 1.71.87 3.213 2.188 4.096-.807-.026-1.566-.248-2.228-.616v.061c0 2.385 1.693 4.374 3.946 4.827-.413.111-.849.171-1.296.171-.314 0-.615-.03-.916-.086.631 1.953 2.445 3.377 4.604 3.417-1.68 1.319-3.809 2.105-6.102 2.105-.39 0-.779-.023-1.17-.067 2.189 1.394 4.768 2.209 7.557 2.209 9.054 0 13.999-7.496 13.999-13.986 0-.209 0-.42-.015-.63.961-.689 1.8-1.56 2.46-2.548l-.047-.02z"></path></svg></a><a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fvertx-china.github.io%2Fblog%2Ftcp-client-using-eclipse-vert-x-kotlin-and-gradle-build" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><title>LinkedIn</title><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"></path></svg></a><a href="https://www.facebook.com/sharer.php?u=https%3A%2F%2Fvertx-china.github.io%2Fblog%2Ftcp-client-using-eclipse-vert-x-kotlin-and-gradle-build" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><title>Facebook</title><path d="M23.9981 11.9991C23.9981 5.37216 18.626 0 11.9991 0C5.37216 0 0 5.37216 0 11.9991C0 17.9882 4.38789 22.9522 10.1242 23.8524V15.4676H7.07758V11.9991H10.1242V9.35553C10.1242 6.34826 11.9156 4.68714 14.6564 4.68714C15.9692 4.68714 17.3424 4.92149 17.3424 4.92149V7.87439H15.8294C14.3388 7.87439 13.8739 8.79933 13.8739 9.74824V11.9991H17.2018L16.6698 15.4676H13.8739V23.8524C19.6103 22.9522 23.9981 17.9882 23.9981 11.9991Z"></path></svg></a></div></div></div><div class="blog-post-next-prev"><div class="blog-post-next-prev-entry"><h5>Next post</h5><div class="blog-entry"><div class="blog-entry-meta"><div class="blog-entry-meta-left"><span class="blog-entry-date">21 December 2017</span>​<a class="blog-entry-category" href="/blog/category/guides/">guides</a></div><div class="blog-entry-meta-right"></div></div><h3><a href="/blog/eclipse-vert-x-based-framework-url-shortener-backend/">Eclipse Vert.x based Framework URL Shortener Backend</a></h3><span class="blog-entry-authors"><ul><li class=""><img src="https://github.com/pendula95.png?size=50"/><a href="https://github.com/pendula95" target="_blank" rel="noopener noreferrer">Lazar Bulić</a></li></ul></span><p class="blog-entry-summary">We combine Vert.x with the serverless framework to write a microservice that runs on AWS Lambda.</p><span class="read-more-link"><a href="/blog/eclipse-vert-x-based-framework-url-shortener-backend/"> 阅读更多</a></span></div></div><div class="blog-post-next-prev-entry"><h5>Previous post</h5><div class="blog-entry"><div class="blog-entry-meta"><div class="blog-entry-meta-left"><span class="blog-entry-date">14 November 2017</span>​<a class="blog-entry-category" href="/blog/category/guides/">guides</a></div><div class="blog-entry-meta-right"></div></div><h3><a href="/blog/eclipse-vert-x-meets-graphql/">Eclipse Vert.x meets GraphQL</a></h3><span class="blog-entry-authors"><ul><li class=""><img src="https://github.com/jotschi.png?size=50"/><a href="https://github.com/jotschi" target="_blank" rel="noopener noreferrer">Johannes Schüth</a></li></ul></span><p class="blog-entry-summary">In this blog post, we will look at an example application written in Vert.x that uses the new GraphQL API of Gentics Mesh.</p><span class="read-more-link"><a href="/blog/eclipse-vert-x-meets-graphql/"> 阅读更多</a></span></div></div></div><div class="blog-post-related"><h5>Related posts</h5><div class="blog-post-related-posts"><div class="blog-entry"><div class="blog-entry-meta"><div class="blog-entry-meta-left"><span class="blog-entry-date">8 September 2016</span>​<a class="blog-entry-category" href="/blog/category/guides/">guides</a></div><div class="blog-entry-meta-right"></div></div><h3><a href="/blog/centralized-logging-for-vert-x-applications-using-the-elk-stack/">Centralized logging for Vert.x applications using the ELK stack</a></h3><span class="blog-entry-authors"><ul><li class=""><img src="https://github.com/ricardohmon.png?size=50"/><a href="https://github.com/ricardohmon" target="_blank" rel="noopener noreferrer">Ricardo Hernandez</a></li></ul></span><p class="blog-entry-summary">This post entry describes a solution to achieve centralized logging of Vert.x applications using the ELK stack (Logstash, Elasticsearch, and Kibana).</p><span class="read-more-link"><a href="/blog/centralized-logging-for-vert-x-applications-using-the-elk-stack/"> 阅读更多</a></span></div><div class="blog-entry"><div class="blog-entry-meta"><div class="blog-entry-meta-left"><span class="blog-entry-date">19 October 2015</span>​<a class="blog-entry-category" href="/blog/category/guides/">guides</a></div><div class="blog-entry-meta-right"></div></div><h3><a href="/blog/using-the-asynchronous-sql-client/">Using the asynchronous SQL client</a></h3><span class="blog-entry-authors"><ul><li class=""><img src="https://github.com/cescoffier.png?size=50"/><a href="https://github.com/cescoffier" target="_blank" rel="noopener noreferrer">Clement Escoffier</a></li></ul></span><p class="blog-entry-summary">Finally, back... This post is the fifth post of the introduction to vert.x blog series, after a not-that-small break. In this post we are going to see how we can use JDBC in a vert.x application.</p><span class="read-more-link"><a href="/blog/using-the-asynchronous-sql-client/"> 阅读更多</a></span></div><div class="blog-entry"><div class="blog-entry-meta"><div class="blog-entry-meta-left"><span class="blog-entry-date">27 July 2015</span>​<a class="blog-entry-category" href="/blog/category/guides/">guides</a></div><div class="blog-entry-meta-right"></div></div><h3><a href="/blog/some-rest-with-vert-x/">Some Rest with Vert.x</a></h3><span class="blog-entry-authors"><ul><li class=""><img src="https://github.com/cescoffier.png?size=50"/><a href="https://github.com/cescoffier" target="_blank" rel="noopener noreferrer">Clement Escoffier</a></li></ul></span><p class="blog-entry-summary">This post is part of the Introduction to Vert.x series. Let’s go a bit further this time and develop a CRUD-ish application</p><span class="read-more-link"><a href="/blog/some-rest-with-vert-x/"> 阅读更多</a></span></div></div></div></div></div></div><footer><div class="container"><div class="footer-nav-section"><div class="footer-nav-list footer-logo"><a href="/"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAxMTI1LjYgMzE1LjIiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxzdHlsZT4uc3Qwe2ZpbGw6Izc4MmE5MX08L3N0eWxlPjxwYXRoIGQ9Ik0xMjAuOSAyMTQuMkwxOTAuNSAwaDUyLjNsLTk4LjUgMjczLjhIOTguMkwwIDBoNTIuMWw2OC44IDIxNC4yem0yOTEuMi02Mi42SDI5OS42djg0LjJINDMxdjM4SDI1MlYwaDE3Ny43djM4LjRIMjk5LjZWMTE0aDExMi41djM3LjZ6bTgzLjctMTEzLjJINTQ2YzE2LjUuMyAyOSA0LjQgMzcuMyAxMi40IDguMyA4IDEyLjUgMTkuNCAxMi41IDM0IDAgMTQtNC41IDI1LjEtMTMuNSAzMy4yLTkgOC4xLTIxLjYgMTIuMS0zNy42IDEyLjFoLTI3LjF2MjQuMmw4Ni4xIDExOS41aDUxdi0yLjRsLTc3LjItMTA2LjdjMjQuOS01LjUgNDMuMy0yMS43IDUyLjYtMzUuOSA4LjItMTIuNiAxMy4zLTI3LjcgMTMuMy00NiAwLTI2LjgtOC42LTQ3LjQtMjUuOC02MS41QzYwMC41IDcuMSA1NzYuMSAwIDU0NC41IDBoLTk2LjN2MjczLjhoNDcuNiIvPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDUyLjMgMTU3LjdsLTQxLjUgNjIuNyAyOS43IDUzLjRoODUuMXoiLz48Y2lyY2xlIGNsYXNzPSJzdDAiIGN4PSI4MjcuOSIgY3k9IjI3NC43IiByPSI0MC41Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTEwMzcgMGwtNDcuNiA3NC4yTDk0OSAwaC04NGw4NS4zIDEzNS44LTY3LjEgMTA1LjdjNS43IDkuNSA5LjEgMjAuNSA5LjIgMzIuNGg1MC4xTDExMjEuMyAwSDEwMzd6Ii8+PHBhdGggZD0iTTc2My41IDI3My44Yy4xLTkuOSAyLjUtMTkuMiA2LjYtMjcuNVYzOC40aDg1LjRWMEg2MzguMnYzOC40aDg0LjZ2MjM1LjRoNDAuN3oiLz48L3N2Zz4=" alt="Vert.x Logo"/></a></div><div class="footer-nav-list"><h5>Eclipse Vert.x</h5><ul class=""><li><a class="navbar-menu-item" href="/docs/">文档</a></li><li><a href="/download/">下载</a></li><li><a href="/blog/">博客</a></li><li><a href="/community/">社区</a></li><li><a href="/translation/">翻译团队</a></li><li><a href="https://github.com/eclipse-vertx/vert.x">GitHub</a></li><li><a href="https://github.com/vertx-china/vertx-web-site">翻译GitHub</a></li></ul></div><div class="footer-nav-list"><h5>资源</h5><ul class=""><li><a href="/faq/">答疑</a></li><li><a href="/channels/">Channels</a></li><li><a href="https://how-to.vertx.io/">How-To’s</a></li><li><a href="https://start.vertx.io/">App Generator</a></li></ul></div><div class="footer-nav-list"><h5>Eclipse</h5><ul class=""><li><a href="https://www.eclipse.org/">Eclipse Foundation</a></li><li><a href="https://www.eclipse.org/legal/privacy.php">Privacy Policy</a></li><li><a href="https://www.eclipse.org/legal/termsofuse.php">Terms of Use</a></li><li><a href="https://www.eclipse.org/legal/copyright.php">Copyright Agent</a></li><li><a href="https://www.eclipse.org/legal/">Legal Resources</a></li></ul></div></div><div class="footer-copyright"><div class="footer-copyright-remarks">© <!-- -->2021<!-- --> Eclipse Vert.x<br/>Eclipse Vert.x is open source and dual-licensed under the <a href="https://creativecommons.org/licenses/by-sa/3.0/" target="_blank" rel="noopener noreferrer">Eclipse Public License 2.0</a> and the <a href="https://www.apache.org/licenses/LICENSE-2.0.html" target="_blank" rel="noopener noreferrer">Apache License 2.0</a>. <br class="footer-copyright-break"/>Website design by <a href="https://michelkraemer.com" target="_blank" rel="noopener noreferrer">Michel Krämer</a>.</div><div class="footer-copyright-eclipse-logo"><a href="https://www.eclipse.org/" target="_blank" rel="noopener noreferrer"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAyODEuMyA5MS4xIiB4bWw6c3BhY2U9InByZXNlcnZlIj48c3R5bGU+LnN0MHtmaWxsOiNmNzk0MjJ9LnN0MXtmaWxsOiMzZDNjM2J9PC9zdHlsZT48ZyBpZD0iTGF5ZXJfMV8xXyI+PHBhdGggY2xhc3M9InN0MCIgZD0iTTI2NS43IDg0TDI1NyA3M2gtMi43djE3LjdoMy4zdi0xMmw5LjMgMTJoMi4xVjczaC0zLjN2MTF6bS0zMi40LTguM2M0LjIgMCA1LjggMy4zIDUuOCA2LjNzLTEuNiA2LTUuOCA2LTUuNy0zLjEtNS44LTYgMS43LTYuMyA1LjgtNi4zem0wLTNjLTYuMSAwLTkuMSA0LjctOS4xIDkuMyAwIDQuNyAyLjkgOS4xIDkuMSA5LjFzOS00LjYgOS4xLTkuMi0zLTkuMi05LjEtOS4yem0tMjEuMiAxOFY3M2gtMy4zdjE3LjdoMy4zem0tMjMuNiAwaDMuM1Y3Nmg1LjZ2LTNoLTE0LjZ2M2g1LjZsLjEgMTQuN3ptLTE4LjktNi41SDE2M2wzLjMtNy42IDMuMyA3LjZ6bTIuOCA2LjVoMy42TDE2OC4yIDczaC0zLjZsLTggMTcuN2gzLjZsMS41LTMuM2g5LjNsMS40IDMuM3ptLTM4LTE0LjZoMy42YzMuOSAwIDUuNSAyLjggNS41IDUuNS4xIDIuOC0xLjUgNS44LTUuNSA1LjhoLTMuNlY3Ni4xem0zLjctMy4xaC02Ljl2MTcuN2g2LjljNi4yIDAgOC45LTQuNSA4LjktOXMtMi44LTguNy04LjktOC43em0tMjIuNCAxMUwxMDcgNzNoLTIuN3YxNy43aDMuM3YtMTJsOS4zIDEyaDIuMVY3M2gtMy4zdjExek04OC4yIDczdjEwLjJjMCAzLTEuNiA0LjktNC4zIDQuOXMtNC42LTEuNy00LjYtNC45VjczSDc2djEwLjFjMCA1LjMgMy42IDcuOSA3LjkgNy45IDQuNCAwIDcuNy0yLjcgNy43LTcuOVY3M2gtMy40em0tMzMgMi43YzQuMiAwIDUuOCAzLjMgNS44IDYuM3MtMS42IDYtNS44IDYtNS43LTMuMS01LjgtNiAxLjctNi4zIDUuOC02LjN6bTAtM2MtNi4xIDAtOS4xIDQuNy05LjEgOS4zczIuOSA5LjEgOS4xIDkuMSA5LTQuNiA5LjEtOS4yLTMtOS4yLTkuMS05LjJ6bS0yOS43IDE4di02LjVoOC45di0zLjFoLTguOXYtNC44aDkuNFY3M0gyMi4ydjE3LjZoMy4zeiIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yNjkuNCA1NC40aC0yMi4ydi04LjloMjEuNHYtNi45aC0yMS40di05LjFoMjIuMnYtNy4yaC0yOS42djM5LjVoMjkuNnYtNy40em0tNDAtMjUuNmMtMy02LjEtOS40LTcuOC0xNS41LTcuOC03LjMgMC0xNS4zIDMuNC0xNS4zIDExLjUgMCA4LjkgNy40IDExIDE1LjUgMTIgNS4yLjYgOS4xIDIuMSA5LjEgNS44IDAgNC4zLTQuNCA1LjktOS4xIDUuOXMtOS40LTEuOS0xMS4xLTYuM2wtNi4yIDMuMmMyLjkgNy4yIDkuMSA5LjcgMTcuMiA5LjcgOC44IDAgMTYuNi0zLjggMTYuNi0xMi42IDAtOS40LTcuNy0xMS42LTE1LjktMTIuNi00LjctLjYtOC44LTEuNS04LjgtNSAwLTIuOSAyLjYtNS4yIDguMi01LjIgNC4zIDAgOCAyLjIgOS40IDQuNGw1LjktM3pNMTc2IDIyLjJjLTYuMi0uMS0xMi40IDAtMTguNiAwdjM5LjVoNy40VjUwLjFIMTc2YzE5LjQgMCAxOS40LTI3LjkgMC0yNy45em0tMTEuMSA3LjFIMTc2YzkuNSAwIDkuNSAxNCAwIDE0aC0xMS4ybC4xLTE0em0tMTggMzIuNVYyMi4yaC03LjR2MzkuNWw3LjQuMXptLTQ0LTM5LjZ2MzkuNWgyNy43di02LjloLTIwLjNWMjIuMmgtNy40ek05MC43IDUxLjdjLTIuNyAyLjUtNi4yIDQtOS45IDQtOS44IDAtMTMuNS02LjgtMTMuNi0xMy40czQuMS0xMy43IDEzLjYtMTMuN2MzLjUtLjEgNyAxLjMgOS41IDMuN2w1LTQuOGMtMy44LTMuOS05LjEtNi0xNC41LTYtMTQuMyAwLTIxIDEwLjUtMjAuOSAyMC44czYuMyAyMC4zIDIwLjkgMjAuM2M1LjYuMSAxMS0yIDE1LTUuOWwtNS4xLTV6bS0zOSAyLjdIMjkuNXYtOC45aDIxLjR2LTYuOUgyOS41di05LjFoMjIuMnYtNy4ySDIyLjJ2MzkuNWgyOS42bC0uMS03LjR6Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTkuOCAxOC4yQzE4LjggNC4xIDM2LjktLjggNTIuMSA2bC0xLS43QzM1LjctNC42IDE1LjItLjEgNS4zIDE1LjNzLTUuNCAzNS45IDEwIDQ1LjhsMS4xLjZDMy44IDUwLjguOCAzMi4zIDkuOCAxOC4yeiIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yNzIuMiAyNi4xYzAtMi41IDIuMS00LjYgNC42LTQuNiAyLjUgMCA0LjYgMi4xIDQuNiA0LjYgMCAyLjUtMi4xIDQuNi00LjYgNC42LTIuNiAwLTQuNi0yLjEtNC42LTQuNnptOC42IDBjMC0yLjItMS44LTQuMS00LTQuMXMtNC4xIDEuOC00LjEgNC4xYzAgMi4yIDEuNyA0IDMuOSA0LjFoLjFjMi4zIDAgNC4xLTEuOCA0LjEtNC4xem0tNi0yLjVoMi4zYzEuMSAwIDEuOS41IDEuOSAxLjYgMCAuNy0uNCAxLjMtMS4xIDEuNWwxLjIgMS43aC0xLjRsLTEtMS41aC0uN3YxLjVoLTEuMWwtLjEtNC44em0yLjIgMi4zYy41IDAgLjgtLjMuOC0uN3MtLjMtLjctLjgtLjdoLTF2MS4zbDEgLjF6Ii8+PC9nPjwvc3ZnPg==" alt="Eclipse foundation Logo"/></a></div></div></div></footer></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"categories":["releases","guides","news"],"post":{"meta":{"title":"TCP Client using Eclipse Vert.x, Kotlin and Gradle build","category":"guides","authors":[{"name":"Usman Saleem","github_id":"usmansaleem"}],"summary":"In this blog post, I demonstrate how to write a very simple TCP client that keeps a connection open to a custom-written server in cloud."},"date":"2017-12-20","slug":"tcp-client-using-eclipse-vert-x-kotlin-and-gradle-build","readingTime":{"text":"5 min read","minutes":4.185,"time":251099.99999999997,"words":837},"content":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"As part of my hobby project to con\\xADtrol Rasp\\xADber\\xADryPi using Google Home Mini and/or Alexa, I wanted to write a very sim\\xADple TCP client that keeps a con\\xADnec\\xADtion open to one of my cus\\xADtom writ\\xADten server in cloud (I will write an\\xADother blog post to cover the server side on a later date). The re\\xADquire\\xADment of the client is to send a shared se\\xADcret upon con\\xADnect\\xADing and then keep wait\\xADing for mes\\xADsage from server. Vert.x, Kotlin and Gra\\xADdle allow rapid de\\xADvel\\xADop\\xADment of such project. The gen\\xADer\\xADated jar can be ex\\xADe\\xADcuted on Rasp\\xADberry Pi. These steps out\\xADline the project setup and re\\xADlated source code to show\\xADcase a Vert.x and Kotlin project with Gra\\xADdle.\"), mdx(\"h2\", {\n    \"id\": \"project-directory-structure\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#project-directory-structure\"\n  })), \"Project Directory Structure\"), mdx(\"p\", null, \"From com\\xADmand line (or via Win\\xADdows Ex\\xADplorer, what\\xADever you pre\\xADfer to use) cre\\xADate a di\\xADrec\\xADtory for project,for in\\xADstance \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"vertx-net-client\"), \". Since we are using Kotlin, we will place all Kotlin files in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"src/main/kotlin\"), \" folder. The \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"src/main/resources\"), \" folder will con\\xADtain our log\\xADging con\\xADfig\\xADu\\xADra\\xADtion re\\xADlated files.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-awk\"\n  }), \"cd vertx-net-client\\nmkdir -p src\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-regexp\"\n  }), \"/main/\"), \"kotlin\\nmkdir -p src\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-regexp\"\n  }), \"/main/\"), \"resources\\n\")), mdx(\"h3\", {\n    \"id\": \"project-files\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#project-files\"\n  })), \"Project Files\"), mdx(\"p\", null, \"We need to add fol\\xADlow\\xADing files in the project\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \".gitignore\"), \"\\nIf you want to check your project into git, you may con\\xADsider adding fol\\xADlow\\xADing \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \".gitignore\"), \" file at root of your project\")), mdx(Gist, {\n    url: \"https://gist.github.com/usmansaleem/b5838484a20cb8b08f236f2265ad7a8e\",\n    mdxType: \"Gist\"\n  }), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"logback.xml\"), \"\\nThis ex\\xADam\\xADple is using slf4j and log\\xADback for log\\xADging. If you de\\xADcide to use it in your project, you may also add fol\\xADlow\\xADing log\\xADback.xml file in \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"src/main/resources\"), \". Mod\\xADify it as per your re\\xADquire\\xADments. This ex\\xADam\\xADple will\\nlog on con\\xADsole.\")), mdx(Gist, {\n    url: \"https://gist.github.com/usmansaleem/750c6d1cad0721b52be2ff00f758fb9f\",\n    mdxType: \"Gist\"\n  }), mdx(\"h2\", {\n    \"id\": \"gradle-setup\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#gradle-setup\"\n  })), \"Gradle Setup\"), mdx(\"p\", null, \"We will use Gra\\xADdle build sys\\xADtem for this project. If you don\\u2019t al\\xADready have Gra\\xADdle avail\\xADable on your sys\\xADtem, down\\xADload and unzip gra\\xADdle in a di\\xADrec\\xADtory of your choice (\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"$GRADLE_HOME\"), \" is used here to rep\\xADre\\xADsent this di\\xADrec\\xADtory). This gra\\xADdle dis\\xADtri\\xADb\\xADu\\xADtion will be used as a start\\xADing point to cre\\xADate Gra\\xADdle wrap\\xADper scripts for our project. These scripts will allow our project to down\\xADload and use cor\\xADrect ver\\xADsion of gra\\xADdle dis\\xADtri\\xADb\\xADu\\xADtion au\\xADto\\xADmat\\xADi\\xADcally with\\xADout mess\\xADing up sys\\xADtem. Re\\xADally use\\xADful when build\\xADing your project on CI tool or on any other de\\xADvel\\xADoper\\u2019s ma\\xADchine.\"), mdx(\"p\", null, \"Run fol\\xADlow\\xADing com\\xADmand in project\\u2019s di\\xADrec\\xADtory\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-bash\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-variable\"\n  }), \"$GRADLE_HOME\"), \"/bin/gradle wrapper\\n\")), mdx(\"p\", null, \"The above com\\xADmands will gen\\xADer\\xADate fol\\xADlow\\xADing files and di\\xADrec\\xADto\\xADries.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-bash\"\n  }), \"gradle/  gradlew  gradlew.bat\\n\")), mdx(\"h3\", {\n    \"id\": \"gradle-build-file-buildgradle\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#gradle-build-file-buildgradle\"\n  })), \"Gradle build file \", mdx(\"inlineCode\", {\n    parentName: \"h3\"\n  }, \"build.gradle\")), mdx(\"p\", null, \"Cre\\xADate (and/or copy and mod\\xADify) fol\\xADlow\\xADing \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"build.gradle\"), \" in your project\\u2019s root di\\xADrec\\xADtory. Our ex\\xADam\\xADple gra\\xADdle build file is using \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/jponge/vertx-gradle-plugin/\"\n  }), \"vertx-\\u200Bgradle-plugin\"), \".\"), mdx(Gist, {\n    url: \"https://gist.github.com/usmansaleem/e723f25b827e0a925eaef2957a80132d\",\n    mdxType: \"Gist\"\n  }), mdx(\"p\", null, \"In the project di\\xADrec\\xADtory, run fol\\xADlow\\xADing com\\xADmand to down\\xADload local gra\\xADdle dis\\xADtri\\xADb\\xADu\\xADtion:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-bash\"\n  }), \"./gradlew\\n\")), mdx(\"p\", null, \"(or \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \".\\\\gradlew.bat\"), \" if in Win\\xADdows)\"), mdx(\"p\", null, \"At this stage we should have fol\\xADlow\\xADing file struc\\xADture. This is also a good time to com\\xADmit changes if you are work\\xADing with git.\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \".gitignore\"), \"                              \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"build.gradle\"), \"                            \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"gradle/wrapper/gradle-wrapper.jar\"), \"       \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"gradle/wrapper/gradle-wrapper.properties\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"gradlew\"), \"                                 \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"gradlew.bat\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"src/main/resources/logback.xml\"))), mdx(\"p\", null, \"Now that our project struc\\xADture is ready, time to add the meat of the project. You may use any IDE of your choice. My pref\\xADer\\xADence is In\\xADtel\\xADliJ IDEA.\"), mdx(\"p\", null, \"Cre\\xADate a new pack\\xADage under \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"src/main/kotlin\"), \". The pack\\xADage name should be adapted from the fol\\xADlow\\xADing sec\\xADtion of \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"build.gradle\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-ebnf\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attribute\"\n  }), \"vertx\"), \" {\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attribute\"\n  }), \"    mainVerticle\"), \" = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"info.usmans.blog.vertx.NetClientVerticle\\\"\"), \"\\n}\\n\")), mdx(\"p\", null, \"From the above ex\\xADam\\xADple, the pack\\xADage name is \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"info.usmans.blog.vertx\")), mdx(\"p\", null, \"Add a new Kotlin Class/file in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"src/main/kotlin/info/usmans/blog/vertx\"), \" as \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"NetClientVerticle.kt\")), mdx(\"p\", null, \"The con\\xADtents of this class is as fol\\xADlows\"), mdx(Gist, {\n    url: \"https://gist.github.com/usmansaleem/2a176a7b752fcb72f7f31964809696fe\",\n    mdxType: \"Gist\"\n  }), mdx(\"h2\", {\n    \"id\": \"explaining-the-code\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#explaining-the-code\"\n  })), \"Explaining the Code\"), mdx(\"p\", null, \"The \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"fun main(args: Array\u003cString\u003e)\"), \" is not strictly re\\xADquired, it quickly al\\xADlows run\\xADning the Vert.x ver\\xADti\\xADcle from within IDE. You will also no\\xADtice a small hack in the method for set\\xADting sys\\xADtem prop\\xADerty \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"vertx.disableDnsResolver\"), \" which is to avoid a Netty bug that I ob\\xADserved when run\\xADning on Win\\xADdows ma\\xADchine and re\\xADmote server is down. Of course, since we are using vertx-\\u200Bgradle-plugin, we can also use \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gradle vertxRun\"), \" to run our ver\\xADti\\xADcle. In this case the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"main\"), \" method will not get called.\"), mdx(\"p\", null, \"The \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"override fun start()\"), \" method calls \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"fireReconnectTimer\"), \" which in turn calls \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"reconnect\"), \" method. \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"reconnect\"), \" method con\\xADtains the con\\xADnec\\xADtion logic to server as well as it calls \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"fireReconnectTimer\"), \" if it is un\\xADable to con\\xADnect to server or dis\\xADcon\\xADnects from server. In \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"reconnect\"), \" method the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"socket.handler\"), \" gets called when server send mes\\xADsage to client.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-xl\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"socket\"), \".handler({ \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"data\"), \" -\u003e\"), \"\\n                        logger.info(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Data received: ${data}\\\"\"), \")\\n                        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"//\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-doctag\"\n  }), \"TODO:\"), \" Do the work here ...\"), \"\\n               })\\n\")), mdx(\"h2\", {\n    \"id\": \"distributing-the-project\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#distributing-the-project\"\n  })), \"Distributing the project\"), mdx(\"p\", null, \"To cre\\xADate re\\xADdis\\xADtrib\\xADutable jar, use \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"./gradlew shadowJar\"), \" com\\xADmand. Or if using In\\xADtel\\xADliJ: from Gra\\xADdle projects, Tasks, shadow, shad\\xADow\\xADJar (right click run). This com\\xADmand will gen\\xADer\\xADate \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"./build/libs/vertx-net-client-fat.jar\"), \".\"), mdx(\"h3\", {\n    \"id\": \"executing-the-client\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#executing-the-client\"\n  })), \"Executing the client\"), mdx(\"p\", null, \"The client jar can be ex\\xADe\\xADcuted using fol\\xADlow\\xADing com\\xADmand:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-bash\"\n  }), \" java -DserverHost=127.0.0.1 -DserverPort=8888 -DconnectMessage=\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"hello\\\"\"), \" -jar vertx-net-client-full.jar\\n\")), mdx(\"p\", null, \"If you wish to use SLF4J for Vert.x in\\xADter\\xADnal log\\xADging, you need to pass sys\\xADtem prop\\xADerty \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"vertx.logger-delegate-factory-class-name\"), \" with value of \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"io.vertx.core.logging.SLF4JLogDelegateFactory\"), \". The final com\\xADmand would look like:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-bash\"\n  }), \"java -DserverHost=127.0.0.1 -DserverPort=8888 -DconnectMessage=\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"hello\\\"\"), \" -Dvertx.logger-delegate-factory-class-name=\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"io.vertx.core.logging.SLF4JLogDelegateFactory\\\"\"), \" -jar vertx-net-client-full.jar\\n\")), mdx(\"p\", null, \"You can con\\xADfig\\xADure Vert.x log\\xADging lev\\xADels in log\\xADback.xml file if re\\xADquired.\"), mdx(\"h2\", {\n    \"id\": \"conclusion\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#conclusion\"\n  })), \"Conclusion\"), mdx(\"p\", null, \"This post de\\xADscribes how easy it is to cre\\xADate a sim\\xADple TCP client using Vert.x, Kotlin and Gra\\xADdle build sys\\xADtem. Hope\\xADfully the tech\\xADniques shown here will serve as a start\\xADing point for your next DIY project.\"), mdx(Alert, {\n    info: true,\n    mdxType: \"Alert\"\n  }, mdx(\"p\", null, \"This post is adapted and re\\xADpro\\xADduced from \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://usmans.info/view/blog/tcp_client_using_vertx_kotlin_gradle\"\n  }), \"au\\xADthor\\u2019s blog post\"))));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"\u003cp\u003eAs part of my hobby project to con­trol Rasp­ber­ryPi using Google Home Mini and/or Alexa, I wanted to write a very sim­ple TCP client that keeps a con­nec­tion open to one of my cus­tom writ­ten server in cloud (I will write an­other blog post to cover the server side on a later date). The re­quire­ment of the client is to send a shared se­cret upon con­nect­ing and then keep wait­ing for mes­sage from server. Vert.x, Kotlin and Gra­dle allow rapid de­vel­op­ment of such project. The gen­er­ated jar can be ex­e­cuted on Rasp­berry Pi. These steps out­line the project setup and re­lated source code to show­case a Vert.x and Kotlin project with Gra­dle.\u003c/p\u003e\u003ch2 id=\"project-directory-structure\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#project-directory-structure\"\u003e\u003c/a\u003eProject Directory Structure\u003c/h2\u003e\u003cp\u003eFrom com­mand line (or via Win­dows Ex­plorer, what­ever you pre­fer to use) cre­ate a di­rec­tory for project,for in­stance \u003ccode\u003evertx-net-client\u003c/code\u003e. Since we are using Kotlin, we will place all Kotlin files in \u003ccode\u003esrc/main/kotlin\u003c/code\u003e folder. The \u003ccode\u003esrc/main/resources\u003c/code\u003e folder will con­tain our log­ging con­fig­u­ra­tion re­lated files.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-awk\"\u003ecd vertx-net-client\nmkdir -p src\u003cspan class=\"hljs-regexp\"\u003e/main/\u003c/span\u003ekotlin\nmkdir -p src\u003cspan class=\"hljs-regexp\"\u003e/main/\u003c/span\u003eresources\n\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"project-files\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#project-files\"\u003e\u003c/a\u003eProject Files\u003c/h3\u003e\u003cp\u003eWe need to add fol­low­ing files in the project\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003ccode\u003e.gitignore\u003c/code\u003e\nIf you want to check your project into git, you may con­sider adding fol­low­ing \u003ccode\u003e.gitignore\u003c/code\u003e file at root of your project\u003c/li\u003e\u003c/ul\u003e\u003cdiv\u003e...waiting for Gist...\u003c/div\u003e\u003cul\u003e\u003cli\u003e\u003ccode\u003elogback.xml\u003c/code\u003e\nThis ex­am­ple is using slf4j and log­back for log­ging. If you de­cide to use it in your project, you may also add fol­low­ing log­back.xml file in \u003ccode\u003esrc/main/resources\u003c/code\u003e. Mod­ify it as per your re­quire­ments. This ex­am­ple will\nlog on con­sole.\u003c/li\u003e\u003c/ul\u003e\u003cdiv\u003e...waiting for Gist...\u003c/div\u003e\u003ch2 id=\"gradle-setup\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#gradle-setup\"\u003e\u003c/a\u003eGradle Setup\u003c/h2\u003e\u003cp\u003eWe will use Gra­dle build sys­tem for this project. If you don’t al­ready have Gra­dle avail­able on your sys­tem, down­load and unzip gra­dle in a di­rec­tory of your choice (\u003ccode\u003e$GRADLE_HOME\u003c/code\u003e is used here to rep­re­sent this di­rec­tory). This gra­dle dis­tri­b­u­tion will be used as a start­ing point to cre­ate Gra­dle wrap­per scripts for our project. These scripts will allow our project to down­load and use cor­rect ver­sion of gra­dle dis­tri­b­u­tion au­to­mat­i­cally with­out mess­ing up sys­tem. Re­ally use­ful when build­ing your project on CI tool or on any other de­vel­oper’s ma­chine.\u003c/p\u003e\u003cp\u003eRun fol­low­ing com­mand in project’s di­rec­tory\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e\u003cspan class=\"hljs-variable\"\u003e$GRADLE_HOME\u003c/span\u003e/bin/gradle wrapper\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThe above com­mands will gen­er­ate fol­low­ing files and di­rec­to­ries.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003egradle/  gradlew  gradlew.bat\n\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"gradle-build-file-buildgradle\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#gradle-build-file-buildgradle\"\u003e\u003c/a\u003eGradle build file \u003ccode\u003ebuild.gradle\u003c/code\u003e\u003c/h3\u003e\u003cp\u003eCre­ate (and/or copy and mod­ify) fol­low­ing \u003ccode\u003ebuild.gradle\u003c/code\u003e in your project’s root di­rec­tory. Our ex­am­ple gra­dle build file is using \u003ca href=\"https://github.com/jponge/vertx-gradle-plugin/\"\u003evertx-​gradle-plugin\u003c/a\u003e.\u003c/p\u003e\u003cdiv\u003e...waiting for Gist...\u003c/div\u003e\u003cp\u003eIn the project di­rec­tory, run fol­low­ing com­mand to down­load local gra­dle dis­tri­b­u­tion:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e./gradlew\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e(or \u003ccode\u003e.\\gradlew.bat\u003c/code\u003e if in Win­dows)\u003c/p\u003e\u003cp\u003eAt this stage we should have fol­low­ing file struc­ture. This is also a good time to com­mit changes if you are work­ing with git.\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003ccode\u003e.gitignore\u003c/code\u003e                              \u003c/li\u003e\u003cli\u003e\u003ccode\u003ebuild.gradle\u003c/code\u003e                            \u003c/li\u003e\u003cli\u003e\u003ccode\u003egradle/wrapper/gradle-wrapper.jar\u003c/code\u003e       \u003c/li\u003e\u003cli\u003e\u003ccode\u003egradle/wrapper/gradle-wrapper.properties\u003c/code\u003e\u003c/li\u003e\u003cli\u003e\u003ccode\u003egradlew\u003c/code\u003e                                 \u003c/li\u003e\u003cli\u003e\u003ccode\u003egradlew.bat\u003c/code\u003e\u003c/li\u003e\u003cli\u003e\u003ccode\u003esrc/main/resources/logback.xml\u003c/code\u003e\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eNow that our project struc­ture is ready, time to add the meat of the project. You may use any IDE of your choice. My pref­er­ence is In­tel­liJ IDEA.\u003c/p\u003e\u003cp\u003eCre­ate a new pack­age under \u003ccode\u003esrc/main/kotlin\u003c/code\u003e. The pack­age name should be adapted from the fol­low­ing sec­tion of \u003ccode\u003ebuild.gradle\u003c/code\u003e\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-ebnf\"\u003e\u003cspan class=\"hljs-attribute\"\u003evertx\u003c/span\u003e {\n\u003cspan class=\"hljs-attribute\"\u003e    mainVerticle\u003c/span\u003e = \u003cspan class=\"hljs-string\"\u003e\u0026quot;info.usmans.blog.vertx.NetClientVerticle\u0026quot;\u003c/span\u003e\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eFrom the above ex­am­ple, the pack­age name is \u003ccode\u003einfo.usmans.blog.vertx\u003c/code\u003e\u003c/p\u003e\u003cp\u003eAdd a new Kotlin Class/file in \u003ccode\u003esrc/main/kotlin/info/usmans/blog/vertx\u003c/code\u003e as \u003ccode\u003eNetClientVerticle.kt\u003c/code\u003e\u003c/p\u003e\u003cp\u003eThe con­tents of this class is as fol­lows\u003c/p\u003e\u003cdiv\u003e...waiting for Gist...\u003c/div\u003e\u003ch2 id=\"explaining-the-code\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#explaining-the-code\"\u003e\u003c/a\u003eExplaining the Code\u003c/h2\u003e\u003cp\u003eThe \u003ccode\u003efun main(args: Array\u0026lt;String\u0026gt;)\u003c/code\u003e is not strictly re­quired, it quickly al­lows run­ning the Vert.x ver­ti­cle from within IDE. You will also no­tice a small hack in the method for set­ting sys­tem prop­erty \u003ccode\u003evertx.disableDnsResolver\u003c/code\u003e which is to avoid a Netty bug that I ob­served when run­ning on Win­dows ma­chine and re­mote server is down. Of course, since we are using vertx-​gradle-plugin, we can also use \u003ccode\u003egradle vertxRun\u003c/code\u003e to run our ver­ti­cle. In this case the \u003ccode\u003emain\u003c/code\u003e method will not get called.\u003c/p\u003e\u003cp\u003eThe \u003ccode\u003eoverride fun start()\u003c/code\u003e method calls \u003ccode\u003efireReconnectTimer\u003c/code\u003e which in turn calls \u003ccode\u003ereconnect\u003c/code\u003e method. \u003ccode\u003ereconnect\u003c/code\u003e method con­tains the con­nec­tion logic to server as well as it calls \u003ccode\u003efireReconnectTimer\u003c/code\u003e if it is un­able to con­nect to server or dis­con­nects from server. In \u003ccode\u003ereconnect\u003c/code\u003e method the \u003ccode\u003esocket.handler\u003c/code\u003e gets called when server send mes­sage to client.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-xl\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-title\"\u003esocket\u003c/span\u003e.handler({ \u003cspan class=\"hljs-keyword\"\u003edata\u003c/span\u003e -\u0026gt;\u003c/span\u003e\n                        logger.info(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Data received: ${data}\u0026quot;\u003c/span\u003e)\n                        \u003cspan class=\"hljs-comment\"\u003e//\u003cspan class=\"hljs-doctag\"\u003eTODO:\u003c/span\u003e Do the work here ...\u003c/span\u003e\n               })\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"distributing-the-project\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#distributing-the-project\"\u003e\u003c/a\u003eDistributing the project\u003c/h2\u003e\u003cp\u003eTo cre­ate re­dis­trib­utable jar, use \u003ccode\u003e./gradlew shadowJar\u003c/code\u003e com­mand. Or if using In­tel­liJ: from Gra­dle projects, Tasks, shadow, shad­ow­Jar (right click run). This com­mand will gen­er­ate \u003ccode\u003e./build/libs/vertx-net-client-fat.jar\u003c/code\u003e.\u003c/p\u003e\u003ch3 id=\"executing-the-client\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#executing-the-client\"\u003e\u003c/a\u003eExecuting the client\u003c/h3\u003e\u003cp\u003eThe client jar can be ex­e­cuted using fol­low­ing com­mand:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e java -DserverHost=127.0.0.1 -DserverPort=8888 -DconnectMessage=\u003cspan class=\"hljs-string\"\u003e\u0026quot;hello\u0026quot;\u003c/span\u003e -jar vertx-net-client-full.jar\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eIf you wish to use SLF4J for Vert.x in­ter­nal log­ging, you need to pass sys­tem prop­erty \u003ccode\u003evertx.logger-delegate-factory-class-name\u003c/code\u003e with value of \u003ccode\u003eio.vertx.core.logging.SLF4JLogDelegateFactory\u003c/code\u003e. The final com­mand would look like:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003ejava -DserverHost=127.0.0.1 -DserverPort=8888 -DconnectMessage=\u003cspan class=\"hljs-string\"\u003e\u0026quot;hello\u0026quot;\u003c/span\u003e -Dvertx.logger-delegate-factory-class-name=\u003cspan class=\"hljs-string\"\u003e\u0026quot;io.vertx.core.logging.SLF4JLogDelegateFactory\u0026quot;\u003c/span\u003e -jar vertx-net-client-full.jar\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eYou can con­fig­ure Vert.x log­ging lev­els in log­back.xml file if re­quired.\u003c/p\u003e\u003ch2 id=\"conclusion\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#conclusion\"\u003e\u003c/a\u003eConclusion\u003c/h2\u003e\u003cp\u003eThis post de­scribes how easy it is to cre­ate a sim­ple TCP client using Vert.x, Kotlin and Gra­dle build sys­tem. Hope­fully the tech­niques shown here will serve as a start­ing point for your next DIY project.\u003c/p\u003e\u003cdiv class=\"alert info\"\u003e\u003cp\u003eThis post is adapted and re­pro­duced from \u003ca href=\"https://usmans.info/view/blog/tcp_client_using_vertx_kotlin_gradle\"\u003eau­thor’s blog post\u003c/a\u003e\u003c/p\u003e\u003c/div\u003e","scope":{}}},"prevPost":{"meta":{"title":"Eclipse Vert.x based Framework URL Shortener Backend","category":"guides","authors":[{"name":"Lazar Bulić","github_id":"pendula95"}],"summary":"We combine Vert.x with the serverless framework to write a microservice that runs on AWS Lambda."},"date":"2017-12-21","slug":"eclipse-vert-x-based-framework-url-shortener-backend"},"nextPost":{"meta":{"title":"Eclipse Vert.x meets GraphQL","category":"guides","authors":[{"name":"Johannes Schüth","github_id":"jotschi"}],"summary":"In this blog post, we will look at an example application written in Vert.x that uses the new GraphQL API of Gentics Mesh."},"date":"2017-11-14","slug":"eclipse-vert-x-meets-graphql"},"relatedPosts":[{"meta":{"title":"Centralized logging for Vert.x applications using the ELK stack","category":"guides","authors":[{"name":"Ricardo Hernandez","github_id":"ricardohmon"}],"summary":"This post entry describes a solution to achieve centralized logging of Vert.x applications using the ELK stack (Logstash, Elasticsearch, and Kibana)."},"date":"2016-09-08","slug":"centralized-logging-for-vert-x-applications-using-the-elk-stack"},{"meta":{"title":"Using the asynchronous SQL client","category":"guides","authors":[{"name":"Clement Escoffier","github_id":"cescoffier"}],"summary":"Finally, back... This post is the fifth post of the introduction to vert.x blog series, after a not-that-small break. In this post we are going to see how we can use JDBC in a vert.x application."},"date":"2015-10-19","slug":"using-the-asynchronous-sql-client"},{"meta":{"title":"Some Rest with Vert.x","category":"guides","authors":[{"name":"Clement Escoffier","github_id":"cescoffier"}],"summary":"This post is part of the Introduction to Vert.x series. Let’s go a bit further this time and develop a CRUD-ish application"},"date":"2015-07-27","slug":"some-rest-with-vert-x"}]},"__N_SSG":true},"page":"/blog/[[...slug]]","query":{"slug":["tcp-client-using-eclipse-vert-x-kotlin-and-gradle-build"]},"buildId":"dDVH8nD8CIlrAYVmKegA1","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-9a5c89434732593ca2fd.js"></script><script src="/_next/static/chunks/main-b6e20584df76f29b6f35.js" async=""></script><script src="/_next/static/chunks/webpack-d7b2fb72fb7257504a38.js" async=""></script><script src="/_next/static/chunks/framework.fcef98db13e2318579fb.js" async=""></script><script src="/_next/static/chunks/commons.5b8771ac6e8a338f82f1.js" async=""></script><script src="/_next/static/chunks/styles.7064a0f84b2a7c13404a.js" async=""></script><script src="/_next/static/chunks/pages/_app-3dbbc9c041333077c167.js" async=""></script><script src="/_next/static/chunks/5df0631eea625b022d3730b3f1bf573e1b8deb37.3b9874ba65db13e7d868.js" async=""></script><script src="/_next/static/chunks/pages/blog/%5B%5B...slug%5D%5D-c36bc482402d8ffe42a5.js" async=""></script><script src="/_next/static/dDVH8nD8CIlrAYVmKegA1/_buildManifest.js" async=""></script><script src="/_next/static/dDVH8nD8CIlrAYVmKegA1/_ssgManifest.js" async=""></script></body></html>