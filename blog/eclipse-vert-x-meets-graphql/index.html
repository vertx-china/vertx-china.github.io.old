<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="description" content="Vert.x | Reactive applications on the JVM"/><meta name="robots" content="index,follow"/><link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet"/><link href="https://fonts.googleapis.com/css?family=Roboto+Condensed:300,400" rel="stylesheet"/><link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400&amp;display=swap" rel="stylesheet"/><link rel="shortcut icon" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="48x48" href="/favicons/favicon-48x48.png"/><link rel="alternate" type="application/rss+xml" href="/feed/rss.xml"/><link rel="alternate" type="application/atom+xml" href="/feed/atom.xml"/><link rel="alternate" type="application/json" href="/feed/feed.json"/><title>Eclipse Vert.x meets GraphQL | 博客 | Eclipse Vert.x</title><meta name="next-head-count" content="16"/><link rel="preload" href="/_next/static/css/styles.f20dca63.chunk.css" as="style"/><link rel="stylesheet" href="/_next/static/css/styles.f20dca63.chunk.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-b6e20584df76f29b6f35.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-d7b2fb72fb7257504a38.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.fcef98db13e2318579fb.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.5b8771ac6e8a338f82f1.js" as="script"/><link rel="preload" href="/_next/static/chunks/styles.7064a0f84b2a7c13404a.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-3dbbc9c041333077c167.js" as="script"/><link rel="preload" href="/_next/static/chunks/5df0631eea625b022d3730b3f1bf573e1b8deb37.3b9874ba65db13e7d868.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/blog/%5B%5B...slug%5D%5D-c36bc482402d8ffe42a5.js" as="script"/></head><body><div id="__next"><main class="page"><header><div class="navbar"><div class="navbar-content container"><div class="navbar-logo"><a href="/"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAxMTI1LjYgMzE1LjIiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxzdHlsZT4uc3Qwe2ZpbGw6Izc4MmE5MX08L3N0eWxlPjxwYXRoIGQ9Ik0xMjAuOSAyMTQuMkwxOTAuNSAwaDUyLjNsLTk4LjUgMjczLjhIOTguMkwwIDBoNTIuMWw2OC44IDIxNC4yem0yOTEuMi02Mi42SDI5OS42djg0LjJINDMxdjM4SDI1MlYwaDE3Ny43djM4LjRIMjk5LjZWMTE0aDExMi41djM3LjZ6bTgzLjctMTEzLjJINTQ2YzE2LjUuMyAyOSA0LjQgMzcuMyAxMi40IDguMyA4IDEyLjUgMTkuNCAxMi41IDM0IDAgMTQtNC41IDI1LjEtMTMuNSAzMy4yLTkgOC4xLTIxLjYgMTIuMS0zNy42IDEyLjFoLTI3LjF2MjQuMmw4Ni4xIDExOS41aDUxdi0yLjRsLTc3LjItMTA2LjdjMjQuOS01LjUgNDMuMy0yMS43IDUyLjYtMzUuOSA4LjItMTIuNiAxMy4zLTI3LjcgMTMuMy00NiAwLTI2LjgtOC42LTQ3LjQtMjUuOC02MS41QzYwMC41IDcuMSA1NzYuMSAwIDU0NC41IDBoLTk2LjN2MjczLjhoNDcuNiIvPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDUyLjMgMTU3LjdsLTQxLjUgNjIuNyAyOS43IDUzLjRoODUuMXoiLz48Y2lyY2xlIGNsYXNzPSJzdDAiIGN4PSI4MjcuOSIgY3k9IjI3NC43IiByPSI0MC41Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTEwMzcgMGwtNDcuNiA3NC4yTDk0OSAwaC04NGw4NS4zIDEzNS44LTY3LjEgMTA1LjdjNS43IDkuNSA5LjEgMjAuNSA5LjIgMzIuNGg1MC4xTDExMjEuMyAwSDEwMzd6Ii8+PHBhdGggZD0iTTc2My41IDI3My44Yy4xLTkuOSAyLjUtMTkuMiA2LjYtMjcuNVYzOC40aDg1LjRWMEg2MzguMnYzOC40aDg0LjZ2MjM1LjRoNDAuN3oiLz48L3N2Zz4=" alt="Vert.x Logo"/></a></div><div class="navbar-collapse-button"><span></span><span></span><span></span></div><div class="navbar-right"><div class="navbar-menu"><span class="navbar-menu-item with-drop-down"><div class="dropdown"><a class="dropdown-title">开始<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="dropdown-menu"><a href="/introduction-to-vertx-and-reactive/"><li class="dropdown-item">简介</li></a><a href="/get-started/"><li class="dropdown-item">开始</li></a><a href="https://start.vertx.io/" target="_blank" rel="noreferrer"><li class="dropdown-item">App generator <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a></ul></div></span><a class="navbar-menu-item" href="/docs/">文档</a><span class="navbar-menu-item with-drop-down"><div class="dropdown"><a class="dropdown-title">资源<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="dropdown-menu"><a href="/faq/"><li class="dropdown-item">答疑</li></a><a href="/channels/"><li class="dropdown-item">Channels</li></a><a href="https://how-to.vertx.io/" target="_blank" rel="noreferrer"><li class="dropdown-item">How-To’s <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a><a href="https://github.com/vert-x3/vertx-eventbus-bridge-clients" target="_blank" rel="noreferrer"><li class="dropdown-item">EventBus Bridge Clients <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a></ul></div></span><a class="navbar-menu-item" href="/blog/">博客</a><a class="navbar-menu-item" href="/community/">社区</a><a class="navbar-menu-item" href="/translation/">翻译团队</a></div><div class="navbar-social"><a href="https://github.com/vert-x3/vertx-awesome" class="navbar-social-link" title="Awesome Vert.x" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="List of awesome Vert.x projects"><title>Awesome Vert.x</title><path d="M24 11.438l-6.154-5.645-.865.944 5.128 4.7H1.895l5.128-4.705-.865-.943-6.154 5.649H0v3.72c0 1.683 1.62 3.053 3.61 3.053h3.795c1.99 0 3.61-1.37 3.61-3.051v-2.446h1.97v2.446c0 1.68 1.62 3.051 3.61 3.051h3.794c1.99 0 3.61-1.37 3.61-3.051v-3.721z"></path></svg></a><a href="https://stackoverflow.com/questions/tagged/vert.x" class="navbar-social-link" title="Stack Overflow" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Stack Overflow questions related to Vert.x"><title>Stack Overflow</title><path d="M18.986 21.865v-6.404h2.134V24H1.844v-8.539h2.13v6.404h15.012zM6.111 19.731H16.85v-2.137H6.111v2.137zm.259-4.852l10.48 2.189.451-2.07-10.478-2.187-.453 2.068zm1.359-5.056l9.705 4.53.903-1.95-9.706-4.53-.902 1.936v.014zm2.715-4.785l8.217 6.855 1.359-1.62-8.216-6.853-1.35 1.617-.01.001zM15.751 0l-1.746 1.294 6.405 8.604 1.746-1.294L15.749 0h.002z"></path></svg></a><a href="https://www.youtube.com/channel/UCGN6L3tRhs92Uer3c6VxOSA" class="navbar-social-link" title="YouTube" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="YouTube channel of Vert.x"><title>YouTube</title><path d="M23.499 6.203a3.008 3.008 0 00-2.089-2.089c-1.87-.501-9.4-.501-9.4-.501s-7.509-.01-9.399.501a3.008 3.008 0 00-2.088 2.09A31.258 31.26 0 000 12.01a31.258 31.26 0 00.523 5.785 3.008 3.008 0 002.088 2.089c1.869.502 9.4.502 9.4.502s7.508 0 9.399-.502a3.008 3.008 0 002.089-2.09 31.258 31.26 0 00.5-5.784 31.258 31.26 0 00-.5-5.808zm-13.891 9.4V8.407l6.266 3.604z"></path></svg></a><a href="https://discord.gg/KzEMwP2" class="navbar-social-link" title="Discord" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Eclipse Vert.x channel on Discord"><title>Discord</title><path d="M20.222 0c1.406 0 2.54 1.137 2.607 2.475V24l-2.677-2.273-1.47-1.338-1.604-1.398.67 2.205H3.71c-1.402 0-2.54-1.065-2.54-2.476V2.48C1.17 1.142 2.31.003 3.715.003h16.5L20.222 0zm-6.118 5.683h-.03l-.202.2c2.073.6 3.076 1.537 3.076 1.537-1.336-.668-2.54-1.002-3.744-1.137-.87-.135-1.74-.064-2.475 0h-.2c-.47 0-1.47.2-2.81.735-.467.203-.735.336-.735.336s1.002-1.002 3.21-1.537l-.135-.135s-1.672-.064-3.477 1.27c0 0-1.805 3.144-1.805 7.02 0 0 1 1.74 3.743 1.806 0 0 .4-.533.805-1.002-1.54-.468-2.14-1.404-2.14-1.404s.134.066.335.2h.06c.03 0 .044.015.06.03v.006c.016.016.03.03.06.03.33.136.66.27.93.4.466.202 1.065.403 1.8.536.93.135 1.996.2 3.21 0 .6-.135 1.2-.267 1.8-.535.39-.2.87-.4 1.397-.737 0 0-.6.936-2.205 1.404.33.466.795 1 .795 1 2.744-.06 3.81-1.8 3.87-1.726 0-3.87-1.815-7.02-1.815-7.02-1.635-1.214-3.165-1.26-3.435-1.26l.056-.02zm.168 4.413c.703 0 1.27.6 1.27 1.335 0 .74-.57 1.34-1.27 1.34-.7 0-1.27-.6-1.27-1.334.002-.74.573-1.338 1.27-1.338zm-4.543 0c.7 0 1.266.6 1.266 1.335 0 .74-.57 1.34-1.27 1.34-.7 0-1.27-.6-1.27-1.334 0-.74.57-1.338 1.27-1.338z"></path></svg></a><a href="https://groups.google.com/forum/?fromgroups#!forum/vertx" class="navbar-social-link" title="Vert.x User Group" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="A Google group for Vert.x users"><title>Vert.x User Group</title><path d="M.92 3.332c-.776 0-1.216.67-.692 1.383l2.537 4.403v7.86c0 2.013 1.467 3.69 3.459 3.69H20.31a3.75 3.75 0 003.69-3.69V7.043a3.723 3.723 0 00-3.668-3.71zm5.786 3.71H20.1c.587 0 1.153.357 1.153.923 0 .566-.566.922-1.153.922H6.706c-.587 0-1.153-.356-1.153-.922 0-.566.566-.923 1.153-.923zm0 3.69H20.1c.587 0 1.153.356 1.153.922 0 .566-.566.922-1.153.922H6.706c-.587 0-1.153-.356-1.153-.922 0-.566.566-.922 1.153-.922zm-.021 3.71h9.705c.587 0 1.153.356 1.153.922 0 .566-.566.923-1.153.923H6.685c-.587 0-1.153-.357-1.153-.923 0-.566.566-.922 1.153-.922Z"></path></svg></a><a href="https://shang.qq.com/wpa/qunwpa?idkey=587f58cacb9557e3291b46098e0fe09427b98a1c0f866da23c04c2762bc7e2ad" class="navbar-social-link" title="Vert.x中国用户组QQ群" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Vert.x中国用户组QQ群"><title>Vert.x中国用户组QQ群</title><path d="M21.395 15.035a39.548 39.548 0 0 0-.803-2.264l-1.079-2.695c.001-.032.014-.562.014-.836C19.526 4.632 17.351 0 12 0S4.474 4.632 4.474 9.241c0 .274.013.804.014.836l-1.08 2.695a38.97 38.97 0 0 0-.802 2.264c-1.021 3.283-.69 4.643-.438 4.673.54.065 2.103-2.472 2.103-2.472 0 1.469.756 3.387 2.394 4.771-.612.188-1.363.479-1.845.835-.434.32-.379.646-.301.778.343.578 5.883.369 7.482.189 1.6.18 7.14.389 7.483-.189.078-.132.132-.458-.301-.778-.483-.356-1.233-.646-1.846-.836 1.637-1.384 2.393-3.302 2.393-4.771 0 0 1.563 2.537 2.103 2.472.251-.03.581-1.39-.438-4.673zM12.662 4.846c.039-1.052.659-1.878 1.385-1.846s1.281.912 1.242 1.964c-.039 1.051-.659 1.878-1.385 1.846s-1.282-.912-1.242-1.964zM9.954 3c.725-.033 1.345.794 1.384 1.846.04 1.052-.517 1.931-1.242 1.963-.726.033-1.346-.794-1.385-1.845C8.672 3.912 9.228 3.033 9.954 3zM7.421 8.294c.194-.43 2.147-.908 4.566-.908h.026c2.418 0 4.372.479 4.566.908a.14.14 0 0 1 .014.061c0 .031-.01.059-.026.083-.163.238-2.333 1.416-4.553 1.416h-.026c-2.221 0-4.39-1.178-4.553-1.416a.136.136 0 0 1-.014-.144zm10.422 8.622c-.22 3.676-2.403 5.987-5.774 6.021h-.137c-3.37-.033-5.554-2.345-5.773-6.021-.081-1.35.001-2.496.147-3.43.318.063.638.122.958.176v3.506s1.658.334 3.318.103v-3.225c.488.027.96.04 1.406.034h.025c1.678.021 3.714-.204 5.683-.594.146.934.227 2.08.147 3.43zM10.48 5.804c.313-.041.542-.409.508-.825-.033-.415-.314-.72-.629-.679-.313.04-.541.409-.508.824.034.417.315.72.629.68zM14.479 5.156c.078.037.221.042.289-.146.035-.095.025-.165-.009-.214-.023-.033-.133-.118-.371-.176-.904-.22-1.341.384-1.405.499-.04.072-.012.176.056.227.067.051.139.037.179-.006.58-.628 1.21-.208 1.261-.184z"></path></svg></a></div></div></div></div></header><div class="page-content"><div class="container"><div class="blog-post"><div class="blog-navbar"><h2>Blog</h2><ul><li><a href="/blog/">All posts</a></li><li><a href="/blog/category/releases/">releases</a></li><li><a href="/blog/category/guides/">guides</a></li><li><a href="/blog/category/news/">news</a></li></ul><div class="feed-icons"><a href="/feed/atom.xml"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></div></div><div class="blog-post-main"><div class="blog-post-content"><h1>Eclipse Vert.x meets GraphQL</h1><span><p>I re­cently added GraphQL sup­port to <a href="https://github.com/gentics/mesh">Gen­tics Mesh</a> and I thought it would be a good idea to boil down the essence of my im­ple­men­ta­tion in ex­am­ple so that I could share it in a sim­pler form.
The ex­am­ple I’m about to show will not cover all as­pects that I have added to the <a href="https://getmesh.io/docs/beta/graphql.html">Gen­tics Mesh API</a> (e.g. pag­ing, search and error han­dling) but it will give you a basic overview of the parts that I put to­gether.
GraphQL does not re­quire a GraphDB even if the name might sug­gest it.</p><p>Using a graphdb in com­bi­na­tion with GraphQL does nev­er­the­less pro­vide you with some ad­van­tages which I will high­light later on.</p><h2 id="what-is-graphql-what-is-it-good-for"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#what-is-graphql-what-is-it-good-for"></a>What is GraphQL? What is it good for?</h2><p>GraphQL as the name sug­gests is a new query lan­guage which can be used to load ex­actly the amount of data which you ask for. </p><p>The query is de­fined in way that the query fields cor­re­late to the JSON data that is being re­trieved.
In our Star­Wars Demo do­main model this query will load the name of human 1001 which is Darth Vader.</p><pre><code class="hljs language-css">{
  <span class="hljs-attribute">vader</span>: <span class="hljs-built_in">human</span>(id: <span class="hljs-number">1001</span>) {
    name
  }
}
</code></pre><p>Would re­sult in:</p><pre><code class="hljs language-json">{
  <span class="hljs-attr">&quot;data&quot;</span>: {
    <span class="hljs-attr">&quot;vader&quot;</span>: {
      <span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;Darth Vader&quot;</span>
    }
  }
}
</code></pre><h2 id="the-demo-app"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#the-demo-app"></a>The Demo App</h2><p>The demo ap­pli­ca­tion I build makes use of the <a href="https://github.com/graphql-java/graphql-java">graphql-​java</a> li­brary. The data is being stored in a graph data­base.
I use <a href="http://orientdb.com/orientdb/">Ori­entDB</a> in com­bi­na­tion with the <a href="https://github.com/Syncleus/Ferma">OGM Ferma</a> to pro­vide a data ac­cess layer.
GraphQL does not nec­es­sar­ily re­quire a graph data­base but in this ex­am­ple I will make use of one and high­light the ben­e­fits of using a GraphDB for my use­case.</p><p>You can find the sources here: <a href="https://github.com/Jotschi/vertx-graphql-example">https://github.com/Jotschi/vertx-​graphql-example</a></p><h3 id="data"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#data"></a>Data</h3><p>The <a href="https://github.com/Jotschi/vertx-graphql-example/blob/master/src/main/java/de/jotschi/vertx/data/StarWarsData.java">Star­Wars­Data</a> class cre­ates a Graph which con­tains the Star Wars Movies and Char­ac­ters, Plan­ets and their re­la­tions.
The model is fairly sim­ple. There is a sin­gle Star­Wars­Root ver­tex which acts as a start el­e­ment for var­i­ous ag­gre­ga­tion ver­tices: Movies are stored in Movie­Root, Plan­ets in Plan­et­s­Root, Char­ac­ters are stored in Hu­man­s­Root and Droid­s­Root.</p><p>The model classes are used for wrap­pers of the spe­cific graph ver­tices. The <a href="http://syncleus.com/Ferma/">Ferma OGM</a> is used to pro­vide these wrap­pers. Each class con­tains meth­ods which can be used to tra­verse the graph to lo­cate the needed ver­tices.
The found ver­tices are in turn again wrapped and can be used to lo­cate other graph el­e­ments.</p><h3 id="schema"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#schema"></a>Schema</h3><p>The next thing we need is the GraphQL schema. The schema de­scribes each el­e­ment which can be re­trieved. It also de­scribes the prop­er­ties and re­la­tion­ships for these el­e­ments.</p><p>The graphql-​java li­brary pro­vides an API to cre­ate the ob­ject types and schema in­for­ma­tion.</p><pre><code class="hljs language-clojure">private GraphQLObjectType createMovieType() {
  return newObject().name(<span class="hljs-string">&quot;Movie&quot;</span>)
    .description(<span class="hljs-string">&quot;One of the films in the Star Wars universe.&quot;</span>)

    // .title
    .field(<span class="hljs-name">newFieldDefinition</span>().name(<span class="hljs-string">&quot;title&quot;</span>)
        .description(<span class="hljs-string">&quot;Title of the episode.&quot;</span>)
        .type(<span class="hljs-name">GraphQLString</span>)
        .dataFetcher((<span class="hljs-name">env</span>) -&gt; {
          Movie movie = env.getSource()<span class="hljs-comment">;</span>
          return movie.getName()<span class="hljs-comment">;</span>
        }))

    // .description
    .field(<span class="hljs-name">newFieldDefinition</span>().name(<span class="hljs-string">&quot;description&quot;</span>)
        .description(<span class="hljs-string">&quot;Description of the episode.&quot;</span>)
        .type(<span class="hljs-name">GraphQLString</span>))

    .build()<span class="hljs-comment">;</span>
}
</code></pre><p>A type can be ref­er­enced via a <code>GraphQLTypeReference</code> once it has been cre­ated and added to the schema. This is es­pe­cially im­por­tant if you need to add fields which ref­er­ence other types.
Data fetch­ers are used to ac­cess the con­text, tra­verse the graph and re­trieve prop­er­ties from graph el­e­ments.</p><p>An­other great source to learn more about the schema op­tions is the <a href="https://github.com/graphql-java/graphql-java/blob/master/src/test/groovy/graphql/GarfieldSchema.java">Garfield­Schema</a> ex­am­ple.</p><p>Fi­nally all the cre­ated types must be ref­er­enced by a cen­tral ob­ject type <a href="https://github.com/Jotschi/vertx-graphql-example/blob/master/src/main/java/de/jotschi/vertx/data/StarWarsSchema.java#L204">Query­Type</a>.
The query type ob­ject is ba­si­cally the root ob­ject for the query.
It de­fines what query op­tions are ini­tially pos­si­ble. In our case it is pos­si­ble to load the hero of the sage, spe­cific movies, hu­mans or droids.</p><h3 id="verticle"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#verticle"></a>Verticle</h3><p>The <a href="https://github.com/Jotschi/vertx-graphql-example/blob/master/src/main/java/de/jotschi/vertx/GraphQLVerticle.java">GraphQLVer­ti­cle</a> is used to ac­cept the GraphQL re­quest and process it.</p><p>The ver­ti­cle also con­tains a Sta­ticHan­dler to pro­vide the Graphiql Browser web in­ter­face. This in­ter­face will allow you to quickly dis­cover and ex­per­i­ment with GraphQL.</p><p>The <a href="https://github.com/Jotschi/vertx-graphql-example/blob/master/src/main/java/de/jotschi/vertx/GraphQLVerticle.java#L77">query han­dler</a> ac­cepts the query JSON data. </p><p>An Ori­entDB trans­ac­tion is being opened and the query is ex­e­cuted:</p><pre><code class="hljs language-java">demoData.getGraph().asyncTx((tx) -&gt; {
  <span class="hljs-comment">// Invoke the query and handle the resulting JSON</span>
  GraphQL graphQL = newGraphQL(schema).build();
  ExecutionInput input = <span class="hljs-keyword">new</span> ExecutionInput(query, <span class="hljs-keyword">null</span>, queryJson, demoData.getRoot(), extractVariables(queryJson));
  tx.complete(graphQL.execute(input));
}, (AsyncResult&lt;ExecutionResult&gt; rh) -&gt; {
  ...
});
</code></pre><p>The ex­e­cute method ini­tially needs a con­text vari­able. This con­text passed along with the query.
In our case the con­text is the root el­e­ment of the graph <code>demoData.getRoot()</code>.
This con­text el­e­ment also serves as the ini­tial source for our data fetch­ers.</p><pre><code class="hljs language-java">.dataFetcher((env) -&gt; {
  StarWarsRoot root = env.getSource();
  <span class="hljs-keyword">return</span> root.getHero();
}))
</code></pre><p>The data fetch­ers for the hero type on the other hand will be able to ac­cess the hero el­e­ment since the fetcher above re­turned the el­e­ment.
Using this mech­a­nism it is pos­si­ble to tra­verse the graph. It is im­por­tant to note that each in­vo­ca­tion on the do­main model meth­ods will di­rectly ac­cess the graph data­base.
This way it is pos­si­ble to in­flu­ence the graph data­base query down to the low­est level. When omit­ting a prop­erty from the graphql query it will not be loaded from the graph.
Thus there is no need to write an ad­di­tional data ac­cess layer. All op­er­a­tions are di­rectly mapped to graph data­base.</p><p>The <code>StarWarsRoot</code> Ferma class <code>getHero()</code> method in turn de­fines a <a href="http://tinkerpop.apache.org/docs/3.3.0/tutorials/getting-started/#_graph_traversal_staying_simple">Tin­ker­Pop Grem­lin tra­ver­sal</a> which is used to load the Ver­tex which rep­re­sents the hero of the Star Wars saga.</p><div class="alert info"><p><a href="http://tinkerpop.apache.org/">Apache Tin­ker­Pop</a> is an open source, vendor-​agnostic, graph frame­work / API which is sup­ported by many graph data­base ven­dors.
One part of Tin­ker­Pop is the Grem­lin tra­ver­sal lan­guage which is great to query graph data­bases.</p></div><pre><code class="hljs language-java">...
<span class="hljs-function"><span class="hljs-keyword">public</span> Droid <span class="hljs-title">getHero</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-comment">// Follow the HAS_ROOT edge and return the first found Vertex which could be found. </span>
  <span class="hljs-comment">// Wrap the Vertex explicitly in the Droid Ferma class.  </span>
  <span class="hljs-keyword">return</span> traverse((g) -&gt; g.out(HAS_HERO)).nextOrDefaultExplicit(Droid.class, <span class="hljs-keyword">null</span>);
}
...
</code></pre><p>Once the query has been ex­e­cuted the re­sult han­dler is being in­voked. It con­tains some code to process the re­sult data and po­ten­tial er­rors.
It is im­por­tant to note that a GraphQL query will al­ways be an­swered with a 2xx HTTP sta­tus code.
If an el­e­ment which is being ref­er­enced in the query can’t be loaded an error will be added to the re­sponse JSON ob­ject.</p><h3 id="testing"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#testing"></a>Testing</h3><p>Test­ing is fairly straight for­ward. Al­though there are mul­ti­ple ap­proaches. One ap­proach is to use unit test­ing di­rectly on the GraphQL types.
An­other op­tion is to run queries against the end­point.  </p><p>The <a href="https://github.com/Jotschi/vertx-graphql-example/blob/master/src/test/java/de/jotschi/vertx/GraphQLTest.java">GraphQL­Test class</a> I wrote will run mul­ti­ple queries against the end­point.
A Pa­ra­me­ter­ized JUnit test is used it­er­ate over the queries.</p><p>A <a href="https://github.com/Jotschi/vertx-graphql-example/blob/master/src/test/resources/graphql/full-query">typ­i­cal query</a> does not only con­tain the query data.
The as­ser­tions on the re­sponse JSON are di­rectly in­cluded in query using plain com­ments.</p><p>I build an <a href="http://joel-costigliola.github.io/assertj/">As­sertJ</a> as­ser­tion to check the com­ments of a query and ver­ify that the as­ser­tion matches the re­sponse.</p><pre><code class="hljs language-java">  assertThat(response).compliesToAssertions(queryName);
</code></pre><h2 id="run-the-example"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#run-the-example"></a>Run the example</h2><p>You can run the ex­am­ple by ex­e­cut­ing the <code>GraphQLServer</code> class and ac­cess the <a href="http://localhost:3000/browser/?query=%7B%0A%20%20movies%20%7B%0A%20%20%20%20title%0A%20%20%7D%0A%20%20hero%20%7B%0A%20%20%20%20name%0A%20%20%7D%0A%7D%0A">Graphiql browser on http://lo­cal­host:3000/browser/</a></p><h2 id="where-to-go-from-here"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#where-to-go-from-here"></a>Where to go from here?</h2><p>The ex­am­ple is read-​only. GraphQL also sup­ports data mu­ta­tion which can be used to ac­tu­ally mod­ify and store data.
I have not yet ex­plored that part of GraphQL but I as­sume it might not be that hard to add mu­ta­tion sup­port to the ex­am­ple.</p><p>Ad­di­tion­ally it does not cover how to ac­tu­ally make use of such API. I re­cently <a href="https://github.com/gentics/mesh-vertx-example/">up­dated my Vert.x ex­am­ple</a> which shows how to use Vert.x tem­plate han­dlers to build a small server which ren­ders some pages using data which was loaded via GraphQL.</p><p>Thanks for read­ing. If you have any fur­ther ques­tions or feed­back don’t hes­i­tate to send me a tweet to <a href="https://twitter.com/Jotschi/">@Jotschi</a> or <a href="https://twitter.com/genticsmesh/">@gen­tic­smesh</a>.</p></span></div><div class="blog-post-sidebar"><div class="blog-post-author"><img class="blog-post-author-avatar" src="https://github.com/jotschi.png?size=160"/><div class="blog-post-author-name">by <a href="https://github.com/jotschi" target="_blank" rel="noopener noreferrer">Johannes Schüth</a></div></div><div class="blog-post-sidebar-date">Posted on <!-- -->14 November 2017</div>in <a class="blog-post-sidebar-category" href="/blog/category/guides/">guides</a><div class="blog-post-sidebar-reading-time"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg> <!-- -->7 min read</div><div class="blog-post-sidebar-share-icons"><a href="https://twitter.com/intent/tweet?text=Eclipse%20Vert.x%20meets%20GraphQL&amp;url=https%3A%2F%2Fvertx-china.github.io%2Fblog%2Feclipse-vert-x-meets-graphql&amp;via=vertx_project" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><title>Twitter</title><path d="M23.954 4.569c-.885.389-1.83.654-2.825.775 1.014-.611 1.794-1.574 2.163-2.723-.951.555-2.005.959-3.127 1.184-.896-.959-2.173-1.559-3.591-1.559-2.717 0-4.92 2.203-4.92 4.917 0 .39.045.765.127 1.124C7.691 8.094 4.066 6.13 1.64 3.161c-.427.722-.666 1.561-.666 2.475 0 1.71.87 3.213 2.188 4.096-.807-.026-1.566-.248-2.228-.616v.061c0 2.385 1.693 4.374 3.946 4.827-.413.111-.849.171-1.296.171-.314 0-.615-.03-.916-.086.631 1.953 2.445 3.377 4.604 3.417-1.68 1.319-3.809 2.105-6.102 2.105-.39 0-.779-.023-1.17-.067 2.189 1.394 4.768 2.209 7.557 2.209 9.054 0 13.999-7.496 13.999-13.986 0-.209 0-.42-.015-.63.961-.689 1.8-1.56 2.46-2.548l-.047-.02z"></path></svg></a><a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fvertx-china.github.io%2Fblog%2Feclipse-vert-x-meets-graphql" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><title>LinkedIn</title><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"></path></svg></a><a href="https://www.facebook.com/sharer.php?u=https%3A%2F%2Fvertx-china.github.io%2Fblog%2Feclipse-vert-x-meets-graphql" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><title>Facebook</title><path d="M23.9981 11.9991C23.9981 5.37216 18.626 0 11.9991 0C5.37216 0 0 5.37216 0 11.9991C0 17.9882 4.38789 22.9522 10.1242 23.8524V15.4676H7.07758V11.9991H10.1242V9.35553C10.1242 6.34826 11.9156 4.68714 14.6564 4.68714C15.9692 4.68714 17.3424 4.92149 17.3424 4.92149V7.87439H15.8294C14.3388 7.87439 13.8739 8.79933 13.8739 9.74824V11.9991H17.2018L16.6698 15.4676H13.8739V23.8524C19.6103 22.9522 23.9981 17.9882 23.9981 11.9991Z"></path></svg></a></div></div></div><div class="blog-post-next-prev"><div class="blog-post-next-prev-entry"><h5>Next post</h5><div class="blog-entry"><div class="blog-entry-meta"><div class="blog-entry-meta-left"><span class="blog-entry-date">20 December 2017</span>​<a class="blog-entry-category" href="/blog/category/guides/">guides</a></div><div class="blog-entry-meta-right"></div></div><h3><a href="/blog/tcp-client-using-eclipse-vert-x-kotlin-and-gradle-build/">TCP Client using Eclipse Vert.x, Kotlin and Gradle build</a></h3><span class="blog-entry-authors"><ul><li class=""><img src="https://github.com/usmansaleem.png?size=50"/><a href="https://github.com/usmansaleem" target="_blank" rel="noopener noreferrer">Usman Saleem</a></li></ul></span><p class="blog-entry-summary">In this blog post, I demonstrate how to write a very simple TCP client that keeps a connection open to a custom-written server in cloud.</p><span class="read-more-link"><a href="/blog/tcp-client-using-eclipse-vert-x-kotlin-and-gradle-build/"> 阅读更多</a></span></div></div><div class="blog-post-next-prev-entry"><h5>Previous post</h5><div class="blog-entry"><div class="blog-entry-meta"><div class="blog-entry-meta-left"><span class="blog-entry-date">20 October 2017</span>​<a class="blog-entry-category" href="/blog/category/releases/">releases</a></div><div class="blog-entry-meta-right"></div></div><h3><a href="/blog/eclipse-vert-x-3-5-0-released/">Eclipse Vert.x 3.5.0 released!</a></h3><span class="blog-entry-authors"><ul><li class=""><img src="https://github.com/vietj.png?size=50"/><a href="https://github.com/vietj" target="_blank" rel="noopener noreferrer">Julien Viet</a></li></ul></span><p class="blog-entry-summary">The Vert.x team is pleased to announce the release of Eclipse Vert.x 3.5.0.</p><span class="read-more-link"><a href="/blog/eclipse-vert-x-3-5-0-released/"> 阅读更多</a></span></div></div></div><div class="blog-post-related"><h5>Related posts</h5><div class="blog-post-related-posts"><div class="blog-entry"><div class="blog-entry-meta"><div class="blog-entry-meta-left"><span class="blog-entry-date">31 January 2017</span>​<a class="blog-entry-category" href="/blog/category/guides/">guides</a></div><div class="blog-entry-meta-right"></div></div><h3><a href="/blog/an-introduction-to-the-vert-x-context-object/">An Introduction to the Vert.x Context Object</a></h3><span class="blog-entry-authors"><ul><li class=""><img src="https://github.com/millross.png?size=50"/><a href="https://github.com/millross" target="_blank" rel="noopener noreferrer">Jez Prime</a></li></ul></span><p class="blog-entry-summary">Under the hood, the vert.x Context class plays a critical part in maintaining the thread-safety guarantees of verticles. Most of the time, vert.x coders don&#x27;t need to make use of Context objects directly.</p><span class="read-more-link"><a href="/blog/an-introduction-to-the-vert-x-context-object/"> 阅读更多</a></span></div><div class="blog-entry"><div class="blog-entry-meta"><div class="blog-entry-meta-left"><span class="blog-entry-date">1 October 2020</span>​<a class="blog-entry-category" href="/blog/category/guides/">guides</a></div><div class="blog-entry-meta-right"></div></div><h3><a href="/blog/jwt-authorization-for-vert-x-with-keycloak/">JWT Authorization for Vert.x with Keycloak</a></h3><span class="blog-entry-authors"><ul><li class=""><img src="https://github.com/thomasdarimont.png?size=50"/><a href="https://github.com/thomasdarimont" target="_blank" rel="noopener noreferrer">Thomas Darimont</a></li></ul></span><p class="blog-entry-summary">In this blog post, you&#x27;ll learn about JWT foundations, protect routes with JWT Authorization, JWT encoded tokens, and RBAC with Keycloak</p><span class="read-more-link"><a href="/blog/jwt-authorization-for-vert-x-with-keycloak/"> 阅读更多</a></span></div><div class="blog-entry"><div class="blog-entry-meta"><div class="blog-entry-meta-left"><span class="blog-entry-date">30 November 2015</span>​<a class="blog-entry-category" href="/blog/category/guides/">guides</a></div><div class="blog-entry-meta-right"></div></div><h3><a href="/blog/combine-vert-x-and-mongo-to-build-a-giant/">Combine vert.x and mongo to build a giant</a></h3><span class="blog-entry-authors"><ul><li class=""><img src="https://github.com/cescoffier.png?size=50"/><a href="https://github.com/cescoffier" target="_blank" rel="noopener noreferrer">Clement Escoffier</a></li></ul></span><p class="blog-entry-summary">This blog post is part of the introduction to Vert.x series. We are now going to replace this JDBC client by the vertx-mongo-client, and thus connect to a Mongo database.</p><span class="read-more-link"><a href="/blog/combine-vert-x-and-mongo-to-build-a-giant/"> 阅读更多</a></span></div></div></div></div></div></div><footer><div class="container"><div class="footer-nav-section"><div class="footer-nav-list footer-logo"><a href="/"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAxMTI1LjYgMzE1LjIiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxzdHlsZT4uc3Qwe2ZpbGw6Izc4MmE5MX08L3N0eWxlPjxwYXRoIGQ9Ik0xMjAuOSAyMTQuMkwxOTAuNSAwaDUyLjNsLTk4LjUgMjczLjhIOTguMkwwIDBoNTIuMWw2OC44IDIxNC4yem0yOTEuMi02Mi42SDI5OS42djg0LjJINDMxdjM4SDI1MlYwaDE3Ny43djM4LjRIMjk5LjZWMTE0aDExMi41djM3LjZ6bTgzLjctMTEzLjJINTQ2YzE2LjUuMyAyOSA0LjQgMzcuMyAxMi40IDguMyA4IDEyLjUgMTkuNCAxMi41IDM0IDAgMTQtNC41IDI1LjEtMTMuNSAzMy4yLTkgOC4xLTIxLjYgMTIuMS0zNy42IDEyLjFoLTI3LjF2MjQuMmw4Ni4xIDExOS41aDUxdi0yLjRsLTc3LjItMTA2LjdjMjQuOS01LjUgNDMuMy0yMS43IDUyLjYtMzUuOSA4LjItMTIuNiAxMy4zLTI3LjcgMTMuMy00NiAwLTI2LjgtOC42LTQ3LjQtMjUuOC02MS41QzYwMC41IDcuMSA1NzYuMSAwIDU0NC41IDBoLTk2LjN2MjczLjhoNDcuNiIvPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDUyLjMgMTU3LjdsLTQxLjUgNjIuNyAyOS43IDUzLjRoODUuMXoiLz48Y2lyY2xlIGNsYXNzPSJzdDAiIGN4PSI4MjcuOSIgY3k9IjI3NC43IiByPSI0MC41Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTEwMzcgMGwtNDcuNiA3NC4yTDk0OSAwaC04NGw4NS4zIDEzNS44LTY3LjEgMTA1LjdjNS43IDkuNSA5LjEgMjAuNSA5LjIgMzIuNGg1MC4xTDExMjEuMyAwSDEwMzd6Ii8+PHBhdGggZD0iTTc2My41IDI3My44Yy4xLTkuOSAyLjUtMTkuMiA2LjYtMjcuNVYzOC40aDg1LjRWMEg2MzguMnYzOC40aDg0LjZ2MjM1LjRoNDAuN3oiLz48L3N2Zz4=" alt="Vert.x Logo"/></a></div><div class="footer-nav-list"><h5>Eclipse Vert.x</h5><ul class=""><li><a class="navbar-menu-item" href="/docs/">文档</a></li><li><a href="/download/">下载</a></li><li><a href="/blog/">博客</a></li><li><a href="/community/">社区</a></li><li><a href="/translation/">翻译团队</a></li><li><a href="https://github.com/eclipse-vertx/vert.x">GitHub</a></li><li><a href="https://github.com/vertx-china/vertx-web-site">翻译GitHub</a></li></ul></div><div class="footer-nav-list"><h5>资源</h5><ul class=""><li><a href="/faq/">答疑</a></li><li><a href="/channels/">Channels</a></li><li><a href="https://how-to.vertx.io/">How-To’s</a></li><li><a href="https://start.vertx.io/">App Generator</a></li></ul></div><div class="footer-nav-list"><h5>Eclipse</h5><ul class=""><li><a href="https://www.eclipse.org/">Eclipse Foundation</a></li><li><a href="https://www.eclipse.org/legal/privacy.php">Privacy Policy</a></li><li><a href="https://www.eclipse.org/legal/termsofuse.php">Terms of Use</a></li><li><a href="https://www.eclipse.org/legal/copyright.php">Copyright Agent</a></li><li><a href="https://www.eclipse.org/legal/">Legal Resources</a></li></ul></div></div><div class="footer-copyright"><div class="footer-copyright-remarks">© <!-- -->2021<!-- --> Eclipse Vert.x<br/>Eclipse Vert.x is open source and dual-licensed under the <a href="https://creativecommons.org/licenses/by-sa/3.0/" target="_blank" rel="noopener noreferrer">Eclipse Public License 2.0</a> and the <a href="https://www.apache.org/licenses/LICENSE-2.0.html" target="_blank" rel="noopener noreferrer">Apache License 2.0</a>. <br class="footer-copyright-break"/>Website design by <a href="https://michelkraemer.com" target="_blank" rel="noopener noreferrer">Michel Krämer</a>.</div><div class="footer-copyright-eclipse-logo"><a href="https://www.eclipse.org/" target="_blank" rel="noopener noreferrer"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAyODEuMyA5MS4xIiB4bWw6c3BhY2U9InByZXNlcnZlIj48c3R5bGU+LnN0MHtmaWxsOiNmNzk0MjJ9LnN0MXtmaWxsOiMzZDNjM2J9PC9zdHlsZT48ZyBpZD0iTGF5ZXJfMV8xXyI+PHBhdGggY2xhc3M9InN0MCIgZD0iTTI2NS43IDg0TDI1NyA3M2gtMi43djE3LjdoMy4zdi0xMmw5LjMgMTJoMi4xVjczaC0zLjN2MTF6bS0zMi40LTguM2M0LjIgMCA1LjggMy4zIDUuOCA2LjNzLTEuNiA2LTUuOCA2LTUuNy0zLjEtNS44LTYgMS43LTYuMyA1LjgtNi4zem0wLTNjLTYuMSAwLTkuMSA0LjctOS4xIDkuMyAwIDQuNyAyLjkgOS4xIDkuMSA5LjFzOS00LjYgOS4xLTkuMi0zLTkuMi05LjEtOS4yem0tMjEuMiAxOFY3M2gtMy4zdjE3LjdoMy4zem0tMjMuNiAwaDMuM1Y3Nmg1LjZ2LTNoLTE0LjZ2M2g1LjZsLjEgMTQuN3ptLTE4LjktNi41SDE2M2wzLjMtNy42IDMuMyA3LjZ6bTIuOCA2LjVoMy42TDE2OC4yIDczaC0zLjZsLTggMTcuN2gzLjZsMS41LTMuM2g5LjNsMS40IDMuM3ptLTM4LTE0LjZoMy42YzMuOSAwIDUuNSAyLjggNS41IDUuNS4xIDIuOC0xLjUgNS44LTUuNSA1LjhoLTMuNlY3Ni4xem0zLjctMy4xaC02Ljl2MTcuN2g2LjljNi4yIDAgOC45LTQuNSA4LjktOXMtMi44LTguNy04LjktOC43em0tMjIuNCAxMUwxMDcgNzNoLTIuN3YxNy43aDMuM3YtMTJsOS4zIDEyaDIuMVY3M2gtMy4zdjExek04OC4yIDczdjEwLjJjMCAzLTEuNiA0LjktNC4zIDQuOXMtNC42LTEuNy00LjYtNC45VjczSDc2djEwLjFjMCA1LjMgMy42IDcuOSA3LjkgNy45IDQuNCAwIDcuNy0yLjcgNy43LTcuOVY3M2gtMy40em0tMzMgMi43YzQuMiAwIDUuOCAzLjMgNS44IDYuM3MtMS42IDYtNS44IDYtNS43LTMuMS01LjgtNiAxLjctNi4zIDUuOC02LjN6bTAtM2MtNi4xIDAtOS4xIDQuNy05LjEgOS4zczIuOSA5LjEgOS4xIDkuMSA5LTQuNiA5LjEtOS4yLTMtOS4yLTkuMS05LjJ6bS0yOS43IDE4di02LjVoOC45di0zLjFoLTguOXYtNC44aDkuNFY3M0gyMi4ydjE3LjZoMy4zeiIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yNjkuNCA1NC40aC0yMi4ydi04LjloMjEuNHYtNi45aC0yMS40di05LjFoMjIuMnYtNy4yaC0yOS42djM5LjVoMjkuNnYtNy40em0tNDAtMjUuNmMtMy02LjEtOS40LTcuOC0xNS41LTcuOC03LjMgMC0xNS4zIDMuNC0xNS4zIDExLjUgMCA4LjkgNy40IDExIDE1LjUgMTIgNS4yLjYgOS4xIDIuMSA5LjEgNS44IDAgNC4zLTQuNCA1LjktOS4xIDUuOXMtOS40LTEuOS0xMS4xLTYuM2wtNi4yIDMuMmMyLjkgNy4yIDkuMSA5LjcgMTcuMiA5LjcgOC44IDAgMTYuNi0zLjggMTYuNi0xMi42IDAtOS40LTcuNy0xMS42LTE1LjktMTIuNi00LjctLjYtOC44LTEuNS04LjgtNSAwLTIuOSAyLjYtNS4yIDguMi01LjIgNC4zIDAgOCAyLjIgOS40IDQuNGw1LjktM3pNMTc2IDIyLjJjLTYuMi0uMS0xMi40IDAtMTguNiAwdjM5LjVoNy40VjUwLjFIMTc2YzE5LjQgMCAxOS40LTI3LjkgMC0yNy45em0tMTEuMSA3LjFIMTc2YzkuNSAwIDkuNSAxNCAwIDE0aC0xMS4ybC4xLTE0em0tMTggMzIuNVYyMi4yaC03LjR2MzkuNWw3LjQuMXptLTQ0LTM5LjZ2MzkuNWgyNy43di02LjloLTIwLjNWMjIuMmgtNy40ek05MC43IDUxLjdjLTIuNyAyLjUtNi4yIDQtOS45IDQtOS44IDAtMTMuNS02LjgtMTMuNi0xMy40czQuMS0xMy43IDEzLjYtMTMuN2MzLjUtLjEgNyAxLjMgOS41IDMuN2w1LTQuOGMtMy44LTMuOS05LjEtNi0xNC41LTYtMTQuMyAwLTIxIDEwLjUtMjAuOSAyMC44czYuMyAyMC4zIDIwLjkgMjAuM2M1LjYuMSAxMS0yIDE1LTUuOWwtNS4xLTV6bS0zOSAyLjdIMjkuNXYtOC45aDIxLjR2LTYuOUgyOS41di05LjFoMjIuMnYtNy4ySDIyLjJ2MzkuNWgyOS42bC0uMS03LjR6Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTkuOCAxOC4yQzE4LjggNC4xIDM2LjktLjggNTIuMSA2bC0xLS43QzM1LjctNC42IDE1LjItLjEgNS4zIDE1LjNzLTUuNCAzNS45IDEwIDQ1LjhsMS4xLjZDMy44IDUwLjguOCAzMi4zIDkuOCAxOC4yeiIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yNzIuMiAyNi4xYzAtMi41IDIuMS00LjYgNC42LTQuNiAyLjUgMCA0LjYgMi4xIDQuNiA0LjYgMCAyLjUtMi4xIDQuNi00LjYgNC42LTIuNiAwLTQuNi0yLjEtNC42LTQuNnptOC42IDBjMC0yLjItMS44LTQuMS00LTQuMXMtNC4xIDEuOC00LjEgNC4xYzAgMi4yIDEuNyA0IDMuOSA0LjFoLjFjMi4zIDAgNC4xLTEuOCA0LjEtNC4xem0tNi0yLjVoMi4zYzEuMSAwIDEuOS41IDEuOSAxLjYgMCAuNy0uNCAxLjMtMS4xIDEuNWwxLjIgMS43aC0xLjRsLTEtMS41aC0uN3YxLjVoLTEuMWwtLjEtNC44em0yLjIgMi4zYy41IDAgLjgtLjMuOC0uN3MtLjMtLjctLjgtLjdoLTF2MS4zbDEgLjF6Ii8+PC9nPjwvc3ZnPg==" alt="Eclipse foundation Logo"/></a></div></div></div></footer></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"categories":["releases","guides","news"],"post":{"meta":{"title":"Eclipse Vert.x meets GraphQL","category":"guides","authors":[{"name":"Johannes Schüth","github_id":"jotschi"}],"summary":"In this blog post, we will look at an example application written in Vert.x that uses the new GraphQL API of Gentics Mesh."},"date":"2017-11-14","slug":"eclipse-vert-x-meets-graphql","readingTime":{"text":"7 min read","minutes":6.31,"time":378599.99999999994,"words":1262},"content":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"I re\\xADcently added GraphQL sup\\xADport to \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/gentics/mesh\"\n  }), \"Gen\\xADtics Mesh\"), \" and I thought it would be a good idea to boil down the essence of my im\\xADple\\xADmen\\xADta\\xADtion in ex\\xADam\\xADple so that I could share it in a sim\\xADpler form.\\nThe ex\\xADam\\xADple I\\u2019m about to show will not cover all as\\xADpects that I have added to the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://getmesh.io/docs/beta/graphql.html\"\n  }), \"Gen\\xADtics Mesh API\"), \" (e.g. pag\\xADing, search and error han\\xADdling) but it will give you a basic overview of the parts that I put to\\xADgether.\\nGraphQL does not re\\xADquire a GraphDB even if the name might sug\\xADgest it.\"), mdx(\"p\", null, \"Using a graphdb in com\\xADbi\\xADna\\xADtion with GraphQL does nev\\xADer\\xADthe\\xADless pro\\xADvide you with some ad\\xADvan\\xADtages which I will high\\xADlight later on.\"), mdx(\"h2\", {\n    \"id\": \"what-is-graphql-what-is-it-good-for\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#what-is-graphql-what-is-it-good-for\"\n  })), \"What is GraphQL? What is it good for?\"), mdx(\"p\", null, \"GraphQL as the name sug\\xADgests is a new query lan\\xADguage which can be used to load ex\\xADactly the amount of data which you ask for. \"), mdx(\"p\", null, \"The query is de\\xADfined in way that the query fields cor\\xADre\\xADlate to the JSON data that is being re\\xADtrieved.\\nIn our Star\\xADWars Demo do\\xADmain model this query will load the name of human 1001 which is Darth Vader.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-css\"\n  }), \"{\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attribute\"\n  }), \"vader\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"human\"), \"(id: \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"1001\"), \") {\\n    name\\n  }\\n}\\n\")), mdx(\"p\", null, \"Would re\\xADsult in:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-json\"\n  }), \"{\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"data\\\"\"), \": {\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"vader\\\"\"), \": {\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"name\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Darth Vader\\\"\"), \"\\n    }\\n  }\\n}\\n\")), mdx(\"h2\", {\n    \"id\": \"the-demo-app\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#the-demo-app\"\n  })), \"The Demo App\"), mdx(\"p\", null, \"The demo ap\\xADpli\\xADca\\xADtion I build makes use of the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/graphql-java/graphql-java\"\n  }), \"graphql-\\u200Bjava\"), \" li\\xADbrary. The data is being stored in a graph data\\xADbase.\\nI use \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://orientdb.com/orientdb/\"\n  }), \"Ori\\xADentDB\"), \" in com\\xADbi\\xADna\\xADtion with the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/Syncleus/Ferma\"\n  }), \"OGM Ferma\"), \" to pro\\xADvide a data ac\\xADcess layer.\\nGraphQL does not nec\\xADes\\xADsar\\xADily re\\xADquire a graph data\\xADbase but in this ex\\xADam\\xADple I will make use of one and high\\xADlight the ben\\xADe\\xADfits of using a GraphDB for my use\\xADcase.\"), mdx(\"p\", null, \"You can find the sources here: \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/Jotschi/vertx-graphql-example\"\n  }), \"https://github.com/Jotschi/vertx-\\u200Bgraphql-example\")), mdx(\"h3\", {\n    \"id\": \"data\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#data\"\n  })), \"Data\"), mdx(\"p\", null, \"The \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/Jotschi/vertx-graphql-example/blob/master/src/main/java/de/jotschi/vertx/data/StarWarsData.java\"\n  }), \"Star\\xADWars\\xADData\"), \" class cre\\xADates a Graph which con\\xADtains the Star Wars Movies and Char\\xADac\\xADters, Plan\\xADets and their re\\xADla\\xADtions.\\nThe model is fairly sim\\xADple. There is a sin\\xADgle Star\\xADWars\\xADRoot ver\\xADtex which acts as a start el\\xADe\\xADment for var\\xADi\\xADous ag\\xADgre\\xADga\\xADtion ver\\xADtices: Movies are stored in Movie\\xADRoot, Plan\\xADets in Plan\\xADet\\xADs\\xADRoot, Char\\xADac\\xADters are stored in Hu\\xADman\\xADs\\xADRoot and Droid\\xADs\\xADRoot.\"), mdx(\"p\", null, \"The model classes are used for wrap\\xADpers of the spe\\xADcific graph ver\\xADtices. The \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://syncleus.com/Ferma/\"\n  }), \"Ferma OGM\"), \" is used to pro\\xADvide these wrap\\xADpers. Each class con\\xADtains meth\\xADods which can be used to tra\\xADverse the graph to lo\\xADcate the needed ver\\xADtices.\\nThe found ver\\xADtices are in turn again wrapped and can be used to lo\\xADcate other graph el\\xADe\\xADments.\"), mdx(\"h3\", {\n    \"id\": \"schema\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#schema\"\n  })), \"Schema\"), mdx(\"p\", null, \"The next thing we need is the GraphQL schema. The schema de\\xADscribes each el\\xADe\\xADment which can be re\\xADtrieved. It also de\\xADscribes the prop\\xADer\\xADties and re\\xADla\\xADtion\\xADships for these el\\xADe\\xADments.\"), mdx(\"p\", null, \"The graphql-\\u200Bjava li\\xADbrary pro\\xADvides an API to cre\\xADate the ob\\xADject types and schema in\\xADfor\\xADma\\xADtion.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-clojure\"\n  }), \"private GraphQLObjectType createMovieType() {\\n  return newObject().name(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Movie\\\"\"), \")\\n    .description(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"One of the films in the Star Wars universe.\\\"\"), \")\\n\\n    // .title\\n    .field(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"newFieldDefinition\"), \"().name(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"title\\\"\"), \")\\n        .description(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Title of the episode.\\\"\"), \")\\n        .type(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"GraphQLString\"), \")\\n        .dataFetcher((\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"env\"), \") -\u003e {\\n          Movie movie = env.getSource()\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \";\"), \"\\n          return movie.getName()\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \";\"), \"\\n        }))\\n\\n    // .description\\n    .field(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"newFieldDefinition\"), \"().name(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"description\\\"\"), \")\\n        .description(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Description of the episode.\\\"\"), \")\\n        .type(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"GraphQLString\"), \"))\\n\\n    .build()\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \";\"), \"\\n}\\n\")), mdx(\"p\", null, \"A type can be ref\\xADer\\xADenced via a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"GraphQLTypeReference\"), \" once it has been cre\\xADated and added to the schema. This is es\\xADpe\\xADcially im\\xADpor\\xADtant if you need to add fields which ref\\xADer\\xADence other types.\\nData fetch\\xADers are used to ac\\xADcess the con\\xADtext, tra\\xADverse the graph and re\\xADtrieve prop\\xADer\\xADties from graph el\\xADe\\xADments.\"), mdx(\"p\", null, \"An\\xADother great source to learn more about the schema op\\xADtions is the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/graphql-java/graphql-java/blob/master/src/test/groovy/graphql/GarfieldSchema.java\"\n  }), \"Garfield\\xADSchema\"), \" ex\\xADam\\xADple.\"), mdx(\"p\", null, \"Fi\\xADnally all the cre\\xADated types must be ref\\xADer\\xADenced by a cen\\xADtral ob\\xADject type \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/Jotschi/vertx-graphql-example/blob/master/src/main/java/de/jotschi/vertx/data/StarWarsSchema.java#L204\"\n  }), \"Query\\xADType\"), \".\\nThe query type ob\\xADject is ba\\xADsi\\xADcally the root ob\\xADject for the query.\\nIt de\\xADfines what query op\\xADtions are ini\\xADtially pos\\xADsi\\xADble. In our case it is pos\\xADsi\\xADble to load the hero of the sage, spe\\xADcific movies, hu\\xADmans or droids.\"), mdx(\"h3\", {\n    \"id\": \"verticle\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#verticle\"\n  })), \"Verticle\"), mdx(\"p\", null, \"The \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/Jotschi/vertx-graphql-example/blob/master/src/main/java/de/jotschi/vertx/GraphQLVerticle.java\"\n  }), \"GraphQLVer\\xADti\\xADcle\"), \" is used to ac\\xADcept the GraphQL re\\xADquest and process it.\"), mdx(\"p\", null, \"The ver\\xADti\\xADcle also con\\xADtains a Sta\\xADticHan\\xADdler to pro\\xADvide the Graphiql Browser web in\\xADter\\xADface. This in\\xADter\\xADface will allow you to quickly dis\\xADcover and ex\\xADper\\xADi\\xADment with GraphQL.\"), mdx(\"p\", null, \"The \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/Jotschi/vertx-graphql-example/blob/master/src/main/java/de/jotschi/vertx/GraphQLVerticle.java#L77\"\n  }), \"query han\\xADdler\"), \" ac\\xADcepts the query JSON data. \"), mdx(\"p\", null, \"An Ori\\xADentDB trans\\xADac\\xADtion is being opened and the query is ex\\xADe\\xADcuted:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \"demoData.getGraph().asyncTx((tx) -\u003e {\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Invoke the query and handle the resulting JSON\"), \"\\n  GraphQL graphQL = newGraphQL(schema).build();\\n  ExecutionInput input = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" ExecutionInput(query, \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"null\"), \", queryJson, demoData.getRoot(), extractVariables(queryJson));\\n  tx.complete(graphQL.execute(input));\\n}, (AsyncResult\u003cExecutionResult\u003e rh) -\u003e {\\n  ...\\n});\\n\")), mdx(\"p\", null, \"The ex\\xADe\\xADcute method ini\\xADtially needs a con\\xADtext vari\\xADable. This con\\xADtext passed along with the query.\\nIn our case the con\\xADtext is the root el\\xADe\\xADment of the graph \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"demoData.getRoot()\"), \".\\nThis con\\xADtext el\\xADe\\xADment also serves as the ini\\xADtial source for our data fetch\\xADers.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \".dataFetcher((env) -\u003e {\\n  StarWarsRoot root = env.getSource();\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"return\"), \" root.getHero();\\n}))\\n\")), mdx(\"p\", null, \"The data fetch\\xADers for the hero type on the other hand will be able to ac\\xADcess the hero el\\xADe\\xADment since the fetcher above re\\xADturned the el\\xADe\\xADment.\\nUsing this mech\\xADa\\xADnism it is pos\\xADsi\\xADble to tra\\xADverse the graph. It is im\\xADpor\\xADtant to note that each in\\xADvo\\xADca\\xADtion on the do\\xADmain model meth\\xADods will di\\xADrectly ac\\xADcess the graph data\\xADbase.\\nThis way it is pos\\xADsi\\xADble to in\\xADflu\\xADence the graph data\\xADbase query down to the low\\xADest level. When omit\\xADting a prop\\xADerty from the graphql query it will not be loaded from the graph.\\nThus there is no need to write an ad\\xADdi\\xADtional data ac\\xADcess layer. All op\\xADer\\xADa\\xADtions are di\\xADrectly mapped to graph data\\xADbase.\"), mdx(\"p\", null, \"The \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"StarWarsRoot\"), \" Ferma class \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"getHero()\"), \" method in turn de\\xADfines a \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://tinkerpop.apache.org/docs/3.3.0/tutorials/getting-started/#_graph_traversal_staying_simple\"\n  }), \"Tin\\xADker\\xADPop Grem\\xADlin tra\\xADver\\xADsal\"), \" which is used to load the Ver\\xADtex which rep\\xADre\\xADsents the hero of the Star Wars saga.\"), mdx(Alert, {\n    info: true,\n    mdxType: \"Alert\"\n  }, mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://tinkerpop.apache.org/\"\n  }), \"Apache Tin\\xADker\\xADPop\"), \" is an open source, vendor-\\u200Bagnostic, graph frame\\xADwork / API which is sup\\xADported by many graph data\\xADbase ven\\xADdors.\\nOne part of Tin\\xADker\\xADPop is the Grem\\xADlin tra\\xADver\\xADsal lan\\xADguage which is great to query graph data\\xADbases.\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \"...\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" Droid \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"getHero\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"()\"), \" \"), \"{\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Follow the HAS_ROOT edge and return the first found Vertex which could be found. \"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Wrap the Vertex explicitly in the Droid Ferma class.  \"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"return\"), \" traverse((g) -\u003e g.out(HAS_HERO)).nextOrDefaultExplicit(Droid.class, \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"null\"), \");\\n}\\n...\\n\")), mdx(\"p\", null, \"Once the query has been ex\\xADe\\xADcuted the re\\xADsult han\\xADdler is being in\\xADvoked. It con\\xADtains some code to process the re\\xADsult data and po\\xADten\\xADtial er\\xADrors.\\nIt is im\\xADpor\\xADtant to note that a GraphQL query will al\\xADways be an\\xADswered with a 2xx HTTP sta\\xADtus code.\\nIf an el\\xADe\\xADment which is being ref\\xADer\\xADenced in the query can\\u2019t be loaded an error will be added to the re\\xADsponse JSON ob\\xADject.\"), mdx(\"h3\", {\n    \"id\": \"testing\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#testing\"\n  })), \"Testing\"), mdx(\"p\", null, \"Test\\xADing is fairly straight for\\xADward. Al\\xADthough there are mul\\xADti\\xADple ap\\xADproaches. One ap\\xADproach is to use unit test\\xADing di\\xADrectly on the GraphQL types.\\nAn\\xADother op\\xADtion is to run queries against the end\\xADpoint.  \"), mdx(\"p\", null, \"The \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/Jotschi/vertx-graphql-example/blob/master/src/test/java/de/jotschi/vertx/GraphQLTest.java\"\n  }), \"GraphQL\\xADTest class\"), \" I wrote will run mul\\xADti\\xADple queries against the end\\xADpoint.\\nA Pa\\xADra\\xADme\\xADter\\xADized JUnit test is used it\\xADer\\xADate over the queries.\"), mdx(\"p\", null, \"A \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/Jotschi/vertx-graphql-example/blob/master/src/test/resources/graphql/full-query\"\n  }), \"typ\\xADi\\xADcal query\"), \" does not only con\\xADtain the query data.\\nThe as\\xADser\\xADtions on the re\\xADsponse JSON are di\\xADrectly in\\xADcluded in query using plain com\\xADments.\"), mdx(\"p\", null, \"I build an \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://joel-costigliola.github.io/assertj/\"\n  }), \"As\\xADsertJ\"), \" as\\xADser\\xADtion to check the com\\xADments of a query and ver\\xADify that the as\\xADser\\xADtion matches the re\\xADsponse.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \"  assertThat(response).compliesToAssertions(queryName);\\n\")), mdx(\"h2\", {\n    \"id\": \"run-the-example\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#run-the-example\"\n  })), \"Run the example\"), mdx(\"p\", null, \"You can run the ex\\xADam\\xADple by ex\\xADe\\xADcut\\xADing the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"GraphQLServer\"), \" class and ac\\xADcess the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://localhost:3000/browser/?query=%7B%0A%20%20movies%20%7B%0A%20%20%20%20title%0A%20%20%7D%0A%20%20hero%20%7B%0A%20%20%20%20name%0A%20%20%7D%0A%7D%0A\"\n  }), \"Graphiql browser on http://lo\\xADcal\\xADhost:3000/browser/\")), mdx(\"h2\", {\n    \"id\": \"where-to-go-from-here\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#where-to-go-from-here\"\n  })), \"Where to go from here?\"), mdx(\"p\", null, \"The ex\\xADam\\xADple is read-\\u200Bonly. GraphQL also sup\\xADports data mu\\xADta\\xADtion which can be used to ac\\xADtu\\xADally mod\\xADify and store data.\\nI have not yet ex\\xADplored that part of GraphQL but I as\\xADsume it might not be that hard to add mu\\xADta\\xADtion sup\\xADport to the ex\\xADam\\xADple.\"), mdx(\"p\", null, \"Ad\\xADdi\\xADtion\\xADally it does not cover how to ac\\xADtu\\xADally make use of such API. I re\\xADcently \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/gentics/mesh-vertx-example/\"\n  }), \"up\\xADdated my Vert.x ex\\xADam\\xADple\"), \" which shows how to use Vert.x tem\\xADplate han\\xADdlers to build a small server which ren\\xADders some pages using data which was loaded via GraphQL.\"), mdx(\"p\", null, \"Thanks for read\\xADing. If you have any fur\\xADther ques\\xADtions or feed\\xADback don\\u2019t hes\\xADi\\xADtate to send me a tweet to \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://twitter.com/Jotschi/\"\n  }), \"@Jotschi\"), \" or \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://twitter.com/genticsmesh/\"\n  }), \"@gen\\xADtic\\xADsmesh\"), \".\"));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"\u003cp\u003eI re­cently added GraphQL sup­port to \u003ca href=\"https://github.com/gentics/mesh\"\u003eGen­tics Mesh\u003c/a\u003e and I thought it would be a good idea to boil down the essence of my im­ple­men­ta­tion in ex­am­ple so that I could share it in a sim­pler form.\nThe ex­am­ple I’m about to show will not cover all as­pects that I have added to the \u003ca href=\"https://getmesh.io/docs/beta/graphql.html\"\u003eGen­tics Mesh API\u003c/a\u003e (e.g. pag­ing, search and error han­dling) but it will give you a basic overview of the parts that I put to­gether.\nGraphQL does not re­quire a GraphDB even if the name might sug­gest it.\u003c/p\u003e\u003cp\u003eUsing a graphdb in com­bi­na­tion with GraphQL does nev­er­the­less pro­vide you with some ad­van­tages which I will high­light later on.\u003c/p\u003e\u003ch2 id=\"what-is-graphql-what-is-it-good-for\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#what-is-graphql-what-is-it-good-for\"\u003e\u003c/a\u003eWhat is GraphQL? What is it good for?\u003c/h2\u003e\u003cp\u003eGraphQL as the name sug­gests is a new query lan­guage which can be used to load ex­actly the amount of data which you ask for. \u003c/p\u003e\u003cp\u003eThe query is de­fined in way that the query fields cor­re­late to the JSON data that is being re­trieved.\nIn our Star­Wars Demo do­main model this query will load the name of human 1001 which is Darth Vader.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-css\"\u003e{\n  \u003cspan class=\"hljs-attribute\"\u003evader\u003c/span\u003e: \u003cspan class=\"hljs-built_in\"\u003ehuman\u003c/span\u003e(id: \u003cspan class=\"hljs-number\"\u003e1001\u003c/span\u003e) {\n    name\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eWould re­sult in:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-json\"\u003e{\n  \u003cspan class=\"hljs-attr\"\u003e\u0026quot;data\u0026quot;\u003c/span\u003e: {\n    \u003cspan class=\"hljs-attr\"\u003e\u0026quot;vader\u0026quot;\u003c/span\u003e: {\n      \u003cspan class=\"hljs-attr\"\u003e\u0026quot;name\u0026quot;\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;Darth Vader\u0026quot;\u003c/span\u003e\n    }\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"the-demo-app\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#the-demo-app\"\u003e\u003c/a\u003eThe Demo App\u003c/h2\u003e\u003cp\u003eThe demo ap­pli­ca­tion I build makes use of the \u003ca href=\"https://github.com/graphql-java/graphql-java\"\u003egraphql-​java\u003c/a\u003e li­brary. The data is being stored in a graph data­base.\nI use \u003ca href=\"http://orientdb.com/orientdb/\"\u003eOri­entDB\u003c/a\u003e in com­bi­na­tion with the \u003ca href=\"https://github.com/Syncleus/Ferma\"\u003eOGM Ferma\u003c/a\u003e to pro­vide a data ac­cess layer.\nGraphQL does not nec­es­sar­ily re­quire a graph data­base but in this ex­am­ple I will make use of one and high­light the ben­e­fits of using a GraphDB for my use­case.\u003c/p\u003e\u003cp\u003eYou can find the sources here: \u003ca href=\"https://github.com/Jotschi/vertx-graphql-example\"\u003ehttps://github.com/Jotschi/vertx-​graphql-example\u003c/a\u003e\u003c/p\u003e\u003ch3 id=\"data\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#data\"\u003e\u003c/a\u003eData\u003c/h3\u003e\u003cp\u003eThe \u003ca href=\"https://github.com/Jotschi/vertx-graphql-example/blob/master/src/main/java/de/jotschi/vertx/data/StarWarsData.java\"\u003eStar­Wars­Data\u003c/a\u003e class cre­ates a Graph which con­tains the Star Wars Movies and Char­ac­ters, Plan­ets and their re­la­tions.\nThe model is fairly sim­ple. There is a sin­gle Star­Wars­Root ver­tex which acts as a start el­e­ment for var­i­ous ag­gre­ga­tion ver­tices: Movies are stored in Movie­Root, Plan­ets in Plan­et­s­Root, Char­ac­ters are stored in Hu­man­s­Root and Droid­s­Root.\u003c/p\u003e\u003cp\u003eThe model classes are used for wrap­pers of the spe­cific graph ver­tices. The \u003ca href=\"http://syncleus.com/Ferma/\"\u003eFerma OGM\u003c/a\u003e is used to pro­vide these wrap­pers. Each class con­tains meth­ods which can be used to tra­verse the graph to lo­cate the needed ver­tices.\nThe found ver­tices are in turn again wrapped and can be used to lo­cate other graph el­e­ments.\u003c/p\u003e\u003ch3 id=\"schema\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#schema\"\u003e\u003c/a\u003eSchema\u003c/h3\u003e\u003cp\u003eThe next thing we need is the GraphQL schema. The schema de­scribes each el­e­ment which can be re­trieved. It also de­scribes the prop­er­ties and re­la­tion­ships for these el­e­ments.\u003c/p\u003e\u003cp\u003eThe graphql-​java li­brary pro­vides an API to cre­ate the ob­ject types and schema in­for­ma­tion.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-clojure\"\u003eprivate GraphQLObjectType createMovieType() {\n  return newObject().name(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Movie\u0026quot;\u003c/span\u003e)\n    .description(\u003cspan class=\"hljs-string\"\u003e\u0026quot;One of the films in the Star Wars universe.\u0026quot;\u003c/span\u003e)\n\n    // .title\n    .field(\u003cspan class=\"hljs-name\"\u003enewFieldDefinition\u003c/span\u003e().name(\u003cspan class=\"hljs-string\"\u003e\u0026quot;title\u0026quot;\u003c/span\u003e)\n        .description(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Title of the episode.\u0026quot;\u003c/span\u003e)\n        .type(\u003cspan class=\"hljs-name\"\u003eGraphQLString\u003c/span\u003e)\n        .dataFetcher((\u003cspan class=\"hljs-name\"\u003eenv\u003c/span\u003e) -\u0026gt; {\n          Movie movie = env.getSource()\u003cspan class=\"hljs-comment\"\u003e;\u003c/span\u003e\n          return movie.getName()\u003cspan class=\"hljs-comment\"\u003e;\u003c/span\u003e\n        }))\n\n    // .description\n    .field(\u003cspan class=\"hljs-name\"\u003enewFieldDefinition\u003c/span\u003e().name(\u003cspan class=\"hljs-string\"\u003e\u0026quot;description\u0026quot;\u003c/span\u003e)\n        .description(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Description of the episode.\u0026quot;\u003c/span\u003e)\n        .type(\u003cspan class=\"hljs-name\"\u003eGraphQLString\u003c/span\u003e))\n\n    .build()\u003cspan class=\"hljs-comment\"\u003e;\u003c/span\u003e\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eA type can be ref­er­enced via a \u003ccode\u003eGraphQLTypeReference\u003c/code\u003e once it has been cre­ated and added to the schema. This is es­pe­cially im­por­tant if you need to add fields which ref­er­ence other types.\nData fetch­ers are used to ac­cess the con­text, tra­verse the graph and re­trieve prop­er­ties from graph el­e­ments.\u003c/p\u003e\u003cp\u003eAn­other great source to learn more about the schema op­tions is the \u003ca href=\"https://github.com/graphql-java/graphql-java/blob/master/src/test/groovy/graphql/GarfieldSchema.java\"\u003eGarfield­Schema\u003c/a\u003e ex­am­ple.\u003c/p\u003e\u003cp\u003eFi­nally all the cre­ated types must be ref­er­enced by a cen­tral ob­ject type \u003ca href=\"https://github.com/Jotschi/vertx-graphql-example/blob/master/src/main/java/de/jotschi/vertx/data/StarWarsSchema.java#L204\"\u003eQuery­Type\u003c/a\u003e.\nThe query type ob­ject is ba­si­cally the root ob­ject for the query.\nIt de­fines what query op­tions are ini­tially pos­si­ble. In our case it is pos­si­ble to load the hero of the sage, spe­cific movies, hu­mans or droids.\u003c/p\u003e\u003ch3 id=\"verticle\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#verticle\"\u003e\u003c/a\u003eVerticle\u003c/h3\u003e\u003cp\u003eThe \u003ca href=\"https://github.com/Jotschi/vertx-graphql-example/blob/master/src/main/java/de/jotschi/vertx/GraphQLVerticle.java\"\u003eGraphQLVer­ti­cle\u003c/a\u003e is used to ac­cept the GraphQL re­quest and process it.\u003c/p\u003e\u003cp\u003eThe ver­ti­cle also con­tains a Sta­ticHan­dler to pro­vide the Graphiql Browser web in­ter­face. This in­ter­face will allow you to quickly dis­cover and ex­per­i­ment with GraphQL.\u003c/p\u003e\u003cp\u003eThe \u003ca href=\"https://github.com/Jotschi/vertx-graphql-example/blob/master/src/main/java/de/jotschi/vertx/GraphQLVerticle.java#L77\"\u003equery han­dler\u003c/a\u003e ac­cepts the query JSON data. \u003c/p\u003e\u003cp\u003eAn Ori­entDB trans­ac­tion is being opened and the query is ex­e­cuted:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003edemoData.getGraph().asyncTx((tx) -\u0026gt; {\n  \u003cspan class=\"hljs-comment\"\u003e// Invoke the query and handle the resulting JSON\u003c/span\u003e\n  GraphQL graphQL = newGraphQL(schema).build();\n  ExecutionInput input = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e ExecutionInput(query, \u003cspan class=\"hljs-keyword\"\u003enull\u003c/span\u003e, queryJson, demoData.getRoot(), extractVariables(queryJson));\n  tx.complete(graphQL.execute(input));\n}, (AsyncResult\u0026lt;ExecutionResult\u0026gt; rh) -\u0026gt; {\n  ...\n});\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThe ex­e­cute method ini­tially needs a con­text vari­able. This con­text passed along with the query.\nIn our case the con­text is the root el­e­ment of the graph \u003ccode\u003edemoData.getRoot()\u003c/code\u003e.\nThis con­text el­e­ment also serves as the ini­tial source for our data fetch­ers.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e.dataFetcher((env) -\u0026gt; {\n  StarWarsRoot root = env.getSource();\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e root.getHero();\n}))\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThe data fetch­ers for the hero type on the other hand will be able to ac­cess the hero el­e­ment since the fetcher above re­turned the el­e­ment.\nUsing this mech­a­nism it is pos­si­ble to tra­verse the graph. It is im­por­tant to note that each in­vo­ca­tion on the do­main model meth­ods will di­rectly ac­cess the graph data­base.\nThis way it is pos­si­ble to in­flu­ence the graph data­base query down to the low­est level. When omit­ting a prop­erty from the graphql query it will not be loaded from the graph.\nThus there is no need to write an ad­di­tional data ac­cess layer. All op­er­a­tions are di­rectly mapped to graph data­base.\u003c/p\u003e\u003cp\u003eThe \u003ccode\u003eStarWarsRoot\u003c/code\u003e Ferma class \u003ccode\u003egetHero()\u003c/code\u003e method in turn de­fines a \u003ca href=\"http://tinkerpop.apache.org/docs/3.3.0/tutorials/getting-started/#_graph_traversal_staying_simple\"\u003eTin­ker­Pop Grem­lin tra­ver­sal\u003c/a\u003e which is used to load the Ver­tex which rep­re­sents the hero of the Star Wars saga.\u003c/p\u003e\u003cdiv class=\"alert info\"\u003e\u003cp\u003e\u003ca href=\"http://tinkerpop.apache.org/\"\u003eApache Tin­ker­Pop\u003c/a\u003e is an open source, vendor-​agnostic, graph frame­work / API which is sup­ported by many graph data­base ven­dors.\nOne part of Tin­ker­Pop is the Grem­lin tra­ver­sal lan­guage which is great to query graph data­bases.\u003c/p\u003e\u003c/div\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e...\n\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e Droid \u003cspan class=\"hljs-title\"\u003egetHero\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e()\u003c/span\u003e \u003c/span\u003e{\n  \u003cspan class=\"hljs-comment\"\u003e// Follow the HAS_ROOT edge and return the first found Vertex which could be found. \u003c/span\u003e\n  \u003cspan class=\"hljs-comment\"\u003e// Wrap the Vertex explicitly in the Droid Ferma class.  \u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e traverse((g) -\u0026gt; g.out(HAS_HERO)).nextOrDefaultExplicit(Droid.class, \u003cspan class=\"hljs-keyword\"\u003enull\u003c/span\u003e);\n}\n...\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eOnce the query has been ex­e­cuted the re­sult han­dler is being in­voked. It con­tains some code to process the re­sult data and po­ten­tial er­rors.\nIt is im­por­tant to note that a GraphQL query will al­ways be an­swered with a 2xx HTTP sta­tus code.\nIf an el­e­ment which is being ref­er­enced in the query can’t be loaded an error will be added to the re­sponse JSON ob­ject.\u003c/p\u003e\u003ch3 id=\"testing\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#testing\"\u003e\u003c/a\u003eTesting\u003c/h3\u003e\u003cp\u003eTest­ing is fairly straight for­ward. Al­though there are mul­ti­ple ap­proaches. One ap­proach is to use unit test­ing di­rectly on the GraphQL types.\nAn­other op­tion is to run queries against the end­point.  \u003c/p\u003e\u003cp\u003eThe \u003ca href=\"https://github.com/Jotschi/vertx-graphql-example/blob/master/src/test/java/de/jotschi/vertx/GraphQLTest.java\"\u003eGraphQL­Test class\u003c/a\u003e I wrote will run mul­ti­ple queries against the end­point.\nA Pa­ra­me­ter­ized JUnit test is used it­er­ate over the queries.\u003c/p\u003e\u003cp\u003eA \u003ca href=\"https://github.com/Jotschi/vertx-graphql-example/blob/master/src/test/resources/graphql/full-query\"\u003etyp­i­cal query\u003c/a\u003e does not only con­tain the query data.\nThe as­ser­tions on the re­sponse JSON are di­rectly in­cluded in query using plain com­ments.\u003c/p\u003e\u003cp\u003eI build an \u003ca href=\"http://joel-costigliola.github.io/assertj/\"\u003eAs­sertJ\u003c/a\u003e as­ser­tion to check the com­ments of a query and ver­ify that the as­ser­tion matches the re­sponse.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e  assertThat(response).compliesToAssertions(queryName);\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"run-the-example\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#run-the-example\"\u003e\u003c/a\u003eRun the example\u003c/h2\u003e\u003cp\u003eYou can run the ex­am­ple by ex­e­cut­ing the \u003ccode\u003eGraphQLServer\u003c/code\u003e class and ac­cess the \u003ca href=\"http://localhost:3000/browser/?query=%7B%0A%20%20movies%20%7B%0A%20%20%20%20title%0A%20%20%7D%0A%20%20hero%20%7B%0A%20%20%20%20name%0A%20%20%7D%0A%7D%0A\"\u003eGraphiql browser on http://lo­cal­host:3000/browser/\u003c/a\u003e\u003c/p\u003e\u003ch2 id=\"where-to-go-from-here\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#where-to-go-from-here\"\u003e\u003c/a\u003eWhere to go from here?\u003c/h2\u003e\u003cp\u003eThe ex­am­ple is read-​only. GraphQL also sup­ports data mu­ta­tion which can be used to ac­tu­ally mod­ify and store data.\nI have not yet ex­plored that part of GraphQL but I as­sume it might not be that hard to add mu­ta­tion sup­port to the ex­am­ple.\u003c/p\u003e\u003cp\u003eAd­di­tion­ally it does not cover how to ac­tu­ally make use of such API. I re­cently \u003ca href=\"https://github.com/gentics/mesh-vertx-example/\"\u003eup­dated my Vert.x ex­am­ple\u003c/a\u003e which shows how to use Vert.x tem­plate han­dlers to build a small server which ren­ders some pages using data which was loaded via GraphQL.\u003c/p\u003e\u003cp\u003eThanks for read­ing. If you have any fur­ther ques­tions or feed­back don’t hes­i­tate to send me a tweet to \u003ca href=\"https://twitter.com/Jotschi/\"\u003e@Jotschi\u003c/a\u003e or \u003ca href=\"https://twitter.com/genticsmesh/\"\u003e@gen­tic­smesh\u003c/a\u003e.\u003c/p\u003e","scope":{}}},"prevPost":{"meta":{"title":"TCP Client using Eclipse Vert.x, Kotlin and Gradle build","category":"guides","authors":[{"name":"Usman Saleem","github_id":"usmansaleem"}],"summary":"In this blog post, I demonstrate how to write a very simple TCP client that keeps a connection open to a custom-written server in cloud."},"date":"2017-12-20","slug":"tcp-client-using-eclipse-vert-x-kotlin-and-gradle-build"},"nextPost":{"meta":{"title":"Eclipse Vert.x 3.5.0 released!","category":"releases","authors":[{"name":"Julien Viet","github_id":"vietj"}],"summary":"The Vert.x team is pleased to announce the release of Eclipse Vert.x 3.5.0."},"date":"2017-10-20","slug":"eclipse-vert-x-3-5-0-released"},"relatedPosts":[{"meta":{"title":"An Introduction to the Vert.x Context Object","category":"guides","authors":[{"name":"Jez Prime","github_id":"millross"}],"summary":"Under the hood, the vert.x Context class plays a critical part in maintaining the thread-safety guarantees of verticles. Most of the time, vert.x coders don't need to make use of Context objects directly."},"date":"2017-01-31","slug":"an-introduction-to-the-vert-x-context-object"},{"meta":{"title":"JWT Authorization for Vert.x with Keycloak","category":"guides","authors":[{"name":"Thomas Darimont","github_id":"thomasdarimont"}],"summary":"In this blog post, you'll learn about JWT foundations, protect routes with JWT Authorization, JWT encoded tokens, and RBAC with Keycloak"},"date":"2020-10-01","slug":"jwt-authorization-for-vert-x-with-keycloak"},{"meta":{"title":"Combine vert.x and mongo to build a giant","category":"guides","authors":[{"name":"Clement Escoffier","github_id":"cescoffier"}],"summary":"This blog post is part of the introduction to Vert.x series. We are now going to replace this JDBC client by the vertx-mongo-client, and thus connect to a Mongo database."},"date":"2015-11-30","slug":"combine-vert-x-and-mongo-to-build-a-giant"}]},"__N_SSG":true},"page":"/blog/[[...slug]]","query":{"slug":["eclipse-vert-x-meets-graphql"]},"buildId":"mrPalFtN1iPh96nAY17K7","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-9a5c89434732593ca2fd.js"></script><script src="/_next/static/chunks/main-b6e20584df76f29b6f35.js" async=""></script><script src="/_next/static/chunks/webpack-d7b2fb72fb7257504a38.js" async=""></script><script src="/_next/static/chunks/framework.fcef98db13e2318579fb.js" async=""></script><script src="/_next/static/chunks/commons.5b8771ac6e8a338f82f1.js" async=""></script><script src="/_next/static/chunks/styles.7064a0f84b2a7c13404a.js" async=""></script><script src="/_next/static/chunks/pages/_app-3dbbc9c041333077c167.js" async=""></script><script src="/_next/static/chunks/5df0631eea625b022d3730b3f1bf573e1b8deb37.3b9874ba65db13e7d868.js" async=""></script><script src="/_next/static/chunks/pages/blog/%5B%5B...slug%5D%5D-c36bc482402d8ffe42a5.js" async=""></script><script src="/_next/static/mrPalFtN1iPh96nAY17K7/_buildManifest.js" async=""></script><script src="/_next/static/mrPalFtN1iPh96nAY17K7/_ssgManifest.js" async=""></script></body></html>