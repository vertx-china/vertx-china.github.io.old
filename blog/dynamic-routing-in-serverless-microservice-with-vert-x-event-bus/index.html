<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="description" content="Vert.x | Reactive applications on the JVM"/><meta name="robots" content="index,follow"/><link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet"/><link href="https://fonts.googleapis.com/css?family=Roboto+Condensed:300,400" rel="stylesheet"/><link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400&amp;display=swap" rel="stylesheet"/><link rel="shortcut icon" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="48x48" href="/favicons/favicon-48x48.png"/><link rel="alternate" type="application/rss+xml" href="/feed/rss.xml"/><link rel="alternate" type="application/atom+xml" href="/feed/atom.xml"/><link rel="alternate" type="application/json" href="/feed/feed.json"/><title>Dynamic Routing in Serverless Microservice with Vert.x Event Bus | 博客 | Eclipse Vert.x</title><meta name="next-head-count" content="16"/><link rel="preload" href="/_next/static/css/styles.bee17d6f.chunk.css" as="style"/><link rel="stylesheet" href="/_next/static/css/styles.bee17d6f.chunk.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-b6e20584df76f29b6f35.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-d7b2fb72fb7257504a38.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.fcef98db13e2318579fb.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.5b8771ac6e8a338f82f1.js" as="script"/><link rel="preload" href="/_next/static/chunks/styles.7064a0f84b2a7c13404a.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-3dbbc9c041333077c167.js" as="script"/><link rel="preload" href="/_next/static/chunks/5df0631eea625b022d3730b3f1bf573e1b8deb37.2c5d42edba8dda0b0ba3.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/blog/%5B%5B...slug%5D%5D-ff5b3ed8f1ab05c5e7a9.js" as="script"/></head><body data-build-time="2021-06-05T02:49:32.694Z" data-build-commit-id="19c7f98c280e969b800422053097ad7764fea37e" data-build-run-id="908253367"><div id="__next"><main class="page"><header><div class="navbar"><div class="navbar-content container"><div class="navbar-logo"><a href="/"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAxMjMyLjYgMzE1LjIiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxzdHlsZT4uc3Qwe2ZpbGw6Izc4MmE5MX08L3N0eWxlPjxwYXRoIGQ9Ik0xMjAuOSAyMTQuMkwxOTAuNSAwaDUyLjNsLTk4LjUgMjczLjhIOTguMkwwIDBoNTIuMWw2OC44IDIxNC4yem0yOTEuMi02Mi42SDI5OS42djg0LjJINDMxdjM4SDI1MlYwaDE3Ny43djM4LjRIMjk5LjZWMTE0aDExMi41djM3LjZ6bTgzLjctMTEzLjJINTQ2YzE2LjUuMyAyOSA0LjQgMzcuMyAxMi40IDguMyA4IDEyLjUgMTkuNCAxMi41IDM0IDAgMTQtNC41IDI1LjEtMTMuNSAzMy4yLTkgOC4xLTIxLjYgMTIuMS0zNy42IDEyLjFoLTI3LjF2MjQuMmw4Ni4xIDExOS41aDUxdi0yLjRsLTc3LjItMTA2LjdjMjQuOS01LjUgNDMuMy0yMS43IDUyLjYtMzUuOSA4LjItMTIuNiAxMy4zLTI3LjcgMTMuMy00NiAwLTI2LjgtOC42LTQ3LjQtMjUuOC02MS41QzYwMC41IDcuMSA1NzYuMSAwIDU0NC41IDBoLTk2LjN2MjczLjhoNDcuNiIvPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDUyLjMgMTU3LjdsLTQxLjUgNjIuNyAyOS43IDUzLjRoODUuMXoiLz48Y2lyY2xlIGNsYXNzPSJzdDAiIGN4PSI4MjcuOSIgY3k9IjI3NC43IiByPSI0MC41Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTEwMzcgMGwtNDcuNiA3NC4yTDk0OSAwaC04NGw4NS4zIDEzNS44LTY3LjEgMTA1LjdjNS43IDkuNSA5LjEgMjAuNSA5LjIgMzIuNGg1MC4xTDExMjEuMyAwSDEwMzd6Ii8+PHBhdGggZD0iTTc2My41IDI3My44Yy4xLTkuOSAyLjUtMTkuMiA2LjYtMjcuNVYzOC40aDg1LjRWMEg2MzguMnYzOC40aDg0LjZ2MjM1LjRoNDAuN3ptNDE0LTI2Ni45aC0xNS4zdjQyLjJoLTguNVY2LjloLTE1LjJWMGgzOXY2Ljl6TTExOTMgMGwxNC4yIDM3LjdMMTIyMS4zIDBoMTF2NDkuMWgtOC41VjMyLjlsLjgtMjEuNy0xNC41IDM3LjloLTYuMWwtMTQuNS0zNy44LjggMjEuNnYxNi4yaC04LjVWMGgxMS4yeiIvPjwvc3ZnPg==" alt="Vert.x Logo"/></a></div><div class="navbar-collapse-button"><span></span><span></span><span></span></div><div class="navbar-right"><div class="navbar-menu"><span class="navbar-menu-item with-drop-down"><div class="dropdown"><a class="dropdown-title">开始<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="dropdown-menu"><a href="/introduction-to-vertx-and-reactive/"><li class="dropdown-item">简介</li></a><a href="/get-started/"><li class="dropdown-item">开始</li></a><a href="https://start.vertx.io/" target="_blank" rel="noreferrer"><li class="dropdown-item">应用生成器 <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a></ul></div></span><a class="navbar-menu-item" href="/docs/">文档</a><span class="navbar-menu-item with-drop-down"><div class="dropdown"><a class="dropdown-title">资源<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="dropdown-menu"><a href="/faq/"><li class="dropdown-item">答疑</li></a><a href="/channels/"><li class="dropdown-item">联系渠道</li></a><a href="https://how-to.vertx.io/" target="_blank" rel="noreferrer"><li class="dropdown-item">操作指南 <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a><a href="https://github.com/vert-x3/vertx-eventbus-bridge-clients" target="_blank" rel="noreferrer"><li class="dropdown-item">EventBus Bridge Clients <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a></ul></div></span><a class="navbar-menu-item" href="/blog/">博客</a><a class="navbar-menu-item" href="/community/">社区</a><a class="navbar-menu-item" href="/translation/">翻译团队</a></div><div class="navbar-social"><a href="https://github.com/vert-x3/vertx-awesome" class="navbar-social-link" title="Awesome Vert.x" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="List of awesome Vert.x projects"><title>Awesome Vert.x</title><path d="M24 11.438l-6.154-5.645-.865.944 5.128 4.7H1.895l5.128-4.705-.865-.943-6.154 5.649H0v3.72c0 1.683 1.62 3.053 3.61 3.053h3.795c1.99 0 3.61-1.37 3.61-3.051v-2.446h1.97v2.446c0 1.68 1.62 3.051 3.61 3.051h3.794c1.99 0 3.61-1.37 3.61-3.051v-3.721z"></path></svg></a><a href="https://stackoverflow.com/questions/tagged/vert.x" class="navbar-social-link" title="Stack Overflow" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Stack Overflow questions related to Vert.x"><title>Stack Overflow</title><path d="M18.986 21.865v-6.404h2.134V24H1.844v-8.539h2.13v6.404h15.012zM6.111 19.731H16.85v-2.137H6.111v2.137zm.259-4.852l10.48 2.189.451-2.07-10.478-2.187-.453 2.068zm1.359-5.056l9.705 4.53.903-1.95-9.706-4.53-.902 1.936v.014zm2.715-4.785l8.217 6.855 1.359-1.62-8.216-6.853-1.35 1.617-.01.001zM15.751 0l-1.746 1.294 6.405 8.604 1.746-1.294L15.749 0h.002z"></path></svg></a><a href="https://www.youtube.com/channel/UCGN6L3tRhs92Uer3c6VxOSA" class="navbar-social-link" title="YouTube" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="YouTube channel of Vert.x"><title>YouTube</title><path d="M23.499 6.203a3.008 3.008 0 00-2.089-2.089c-1.87-.501-9.4-.501-9.4-.501s-7.509-.01-9.399.501a3.008 3.008 0 00-2.088 2.09A31.258 31.26 0 000 12.01a31.258 31.26 0 00.523 5.785 3.008 3.008 0 002.088 2.089c1.869.502 9.4.502 9.4.502s7.508 0 9.399-.502a3.008 3.008 0 002.089-2.09 31.258 31.26 0 00.5-5.784 31.258 31.26 0 00-.5-5.808zm-13.891 9.4V8.407l6.266 3.604z"></path></svg></a><a href="https://discord.gg/KzEMwP2" class="navbar-social-link" title="Discord" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Eclipse Vert.x channel on Discord"><title>Discord</title><path d="M20.222 0c1.406 0 2.54 1.137 2.607 2.475V24l-2.677-2.273-1.47-1.338-1.604-1.398.67 2.205H3.71c-1.402 0-2.54-1.065-2.54-2.476V2.48C1.17 1.142 2.31.003 3.715.003h16.5L20.222 0zm-6.118 5.683h-.03l-.202.2c2.073.6 3.076 1.537 3.076 1.537-1.336-.668-2.54-1.002-3.744-1.137-.87-.135-1.74-.064-2.475 0h-.2c-.47 0-1.47.2-2.81.735-.467.203-.735.336-.735.336s1.002-1.002 3.21-1.537l-.135-.135s-1.672-.064-3.477 1.27c0 0-1.805 3.144-1.805 7.02 0 0 1 1.74 3.743 1.806 0 0 .4-.533.805-1.002-1.54-.468-2.14-1.404-2.14-1.404s.134.066.335.2h.06c.03 0 .044.015.06.03v.006c.016.016.03.03.06.03.33.136.66.27.93.4.466.202 1.065.403 1.8.536.93.135 1.996.2 3.21 0 .6-.135 1.2-.267 1.8-.535.39-.2.87-.4 1.397-.737 0 0-.6.936-2.205 1.404.33.466.795 1 .795 1 2.744-.06 3.81-1.8 3.87-1.726 0-3.87-1.815-7.02-1.815-7.02-1.635-1.214-3.165-1.26-3.435-1.26l.056-.02zm.168 4.413c.703 0 1.27.6 1.27 1.335 0 .74-.57 1.34-1.27 1.34-.7 0-1.27-.6-1.27-1.334.002-.74.573-1.338 1.27-1.338zm-4.543 0c.7 0 1.266.6 1.266 1.335 0 .74-.57 1.34-1.27 1.34-.7 0-1.27-.6-1.27-1.334 0-.74.57-1.338 1.27-1.338z"></path></svg></a><a href="https://groups.google.com/forum/?fromgroups#!forum/vertx" class="navbar-social-link" title="Vert.x 用户组" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="A Google group for Vert.x users"><title>Vert.x 用户组</title><path d="M.92 3.332c-.776 0-1.216.67-.692 1.383l2.537 4.403v7.86c0 2.013 1.467 3.69 3.459 3.69H20.31a3.75 3.75 0 003.69-3.69V7.043a3.723 3.723 0 00-3.668-3.71zm5.786 3.71H20.1c.587 0 1.153.357 1.153.923 0 .566-.566.922-1.153.922H6.706c-.587 0-1.153-.356-1.153-.922 0-.566.566-.923 1.153-.923zm0 3.69H20.1c.587 0 1.153.356 1.153.922 0 .566-.566.922-1.153.922H6.706c-.587 0-1.153-.356-1.153-.922 0-.566.566-.922 1.153-.922zm-.021 3.71h9.705c.587 0 1.153.356 1.153.922 0 .566-.566.923-1.153.923H6.685c-.587 0-1.153-.357-1.153-.923 0-.566.566-.922 1.153-.922Z"></path></svg></a><a href="https://shang.qq.com/wpa/qunwpa?idkey=587f58cacb9557e3291b46098e0fe09427b98a1c0f866da23c04c2762bc7e2ad" class="navbar-social-link" title="Vert.x中国用户组QQ群" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Vert.x中国用户组QQ群"><title>Vert.x中国用户组QQ群</title><path d="M21.395 15.035a39.548 39.548 0 0 0-.803-2.264l-1.079-2.695c.001-.032.014-.562.014-.836C19.526 4.632 17.351 0 12 0S4.474 4.632 4.474 9.241c0 .274.013.804.014.836l-1.08 2.695a38.97 38.97 0 0 0-.802 2.264c-1.021 3.283-.69 4.643-.438 4.673.54.065 2.103-2.472 2.103-2.472 0 1.469.756 3.387 2.394 4.771-.612.188-1.363.479-1.845.835-.434.32-.379.646-.301.778.343.578 5.883.369 7.482.189 1.6.18 7.14.389 7.483-.189.078-.132.132-.458-.301-.778-.483-.356-1.233-.646-1.846-.836 1.637-1.384 2.393-3.302 2.393-4.771 0 0 1.563 2.537 2.103 2.472.251-.03.581-1.39-.438-4.673zM12.662 4.846c.039-1.052.659-1.878 1.385-1.846s1.281.912 1.242 1.964c-.039 1.051-.659 1.878-1.385 1.846s-1.282-.912-1.242-1.964zM9.954 3c.725-.033 1.345.794 1.384 1.846.04 1.052-.517 1.931-1.242 1.963-.726.033-1.346-.794-1.385-1.845C8.672 3.912 9.228 3.033 9.954 3zM7.421 8.294c.194-.43 2.147-.908 4.566-.908h.026c2.418 0 4.372.479 4.566.908a.14.14 0 0 1 .014.061c0 .031-.01.059-.026.083-.163.238-2.333 1.416-4.553 1.416h-.026c-2.221 0-4.39-1.178-4.553-1.416a.136.136 0 0 1-.014-.144zm10.422 8.622c-.22 3.676-2.403 5.987-5.774 6.021h-.137c-3.37-.033-5.554-2.345-5.773-6.021-.081-1.35.001-2.496.147-3.43.318.063.638.122.958.176v3.506s1.658.334 3.318.103v-3.225c.488.027.96.04 1.406.034h.025c1.678.021 3.714-.204 5.683-.594.146.934.227 2.08.147 3.43zM10.48 5.804c.313-.041.542-.409.508-.825-.033-.415-.314-.72-.629-.679-.313.04-.541.409-.508.824.034.417.315.72.629.68zM14.479 5.156c.078.037.221.042.289-.146.035-.095.025-.165-.009-.214-.023-.033-.133-.118-.371-.176-.904-.22-1.341.384-1.405.499-.04.072-.012.176.056.227.067.051.139.037.179-.006.58-.628 1.21-.208 1.261-.184z"></path></svg></a></div></div></div></div></header><div class="page-content"><div class="container"><div class="blog-post"><div class="blog-navbar"><h2>Blog</h2><ul><li><a href="/blog/">All posts</a></li><li><a href="/blog/category/releases/">releases</a></li><li><a href="/blog/category/guides/">guides</a></li><li><a href="/blog/category/news/">news</a></li></ul><div class="feed-icons"><a href="/feed/atom.xml"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></div></div><div class="blog-post-main"><div class="blog-post-content"><h1>Dynamic Routing in Serverless Microservice with Vert.x Event Bus</h1><span><div class="alert info"><p>This is a re-​publication of the fol­low­ing <a href="https://www.rowellbelen.com/dynamic-routing-in-serverless-microservice-with-vert-x-event-bus/">blog post</a></p></div><h2 id="serverless-framework"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#serverless-framework"></a>Serverless framework</h2><p>The <a href="https://serverless.com">Server­less Frame­work</a> has be­come the <em>De Facto</em> toolkit for build­ing and de­ploy­ing Server­less func­tions or ap­pli­ca­tions. Its com­mu­nity has done a great job ad­vanc­ing the tools around Server­less ar­chi­tec­ture.</p><p>How­ever, in the Server­less com­mu­nity there is de­bate among de­vel­op­ers on whether a sin­gle <strong>AWS Lambda</strong> func­tion should only be re­spon­si­ble for a sin­gle API end­point. My an­swer, based on my real-​world pro­duc­tion ex­pe­ri­ence, is <strong>NO</strong>. </p><p>Imag­ine if you are build­ing a set of APIs with <strong>10</strong> end­points and you need to de­ploy the APIs to <strong>DEV</strong>, <strong>STAGE</strong> and <strong>PROD</strong> en­vi­ron­ments. Now you are look­ing at <strong>30</strong> dif­fer­ent func­tions to ver­sion, de­ploy and man­age - not to men­tion the <em>Copy &amp; Paste</em> code and con­fig­u­ra­tion that will re­sult from this type of set-​up. <strong>NO THANKS!!!</strong> </p><p>I be­lieve a more prag­matic ap­proach is <strong>1 Lambda Func­tion</strong> == <strong>1 Mi­croser­vice</strong>.</p><p>For ex­am­ple, if you were build­ing a <strong>User Mi­croser­vice</strong> with basic <strong>CRUD</strong> func­tion­al­ity, you should im­ple­ment <code>CREATE</code>, <code>READ</code>, <code>UPDATE</code> and <code>DELETE</code> in a <strong>sin­gle</strong> Lambda func­tion. In the code, you should re­solve the de­sired ac­tion by in­spect­ing the re­quest or the con­text.</p><h2 id="vertx-to-the-rescue"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#vertx-to-the-rescue"></a>Vert.x to the rescue</h2><p>There are many ben­e­fits to using <strong>Vert.x</strong> in any ap­pli­ca­tion. With <strong>Vert.x</strong>, you get a rock-​solid and light­weight toolkit for build­ing <strong>re­ac­tive</strong>, <strong>highly per­for­mant</strong>, <strong>event-​driven</strong> and <strong>non-​blocking</strong> ap­pli­ca­tions. The toolkit even pro­vides asyn­chro­nous <em>APIs</em> for ac­cess­ing tra­di­tional block­ing dri­vers such as <strong><a href="/docs/vertx-jdbc-client/groovy/">JDBC</a></strong>.</p><p>How­ever, for this ex­am­ple, we will mainly focus on the <a href="/docs/vertx-core/groovy/#event_bus">Event Bus</a>. The event bus al­lows dif­fer­ent parts of your ap­pli­ca­tion to com­mu­ni­cate with each other via event mes­sages. It sup­ports <em>pub­lish/sub­scribe</em>, <em>point to point</em>, and <em>request-​response mes­sag­ing</em>.</p><p>For the <strong>User Mi­croser­vice</strong> ex­am­ple above, we could treat the com­bi­na­tion of the <code>HTTP METHOD</code> and <code>RESOURCE PATH</code> as a unique event chan­nel, and reg­is­ter the sub­scribers/han­dlers to re­spond ap­pro­pri­ately.</p><p>Let’s dive right in.</p><h2 id="goal"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#goal"></a>Goal</h2><p>Cre­ate a <em>re­ac­tive</em>, <em>message-​driven</em>, <em>asyn­chro­nous</em> <strong>User Mi­croser­vice</strong> with <code>GET</code>, <code>POST</code>, <code>DELETE</code>, <code>PUT</code> CRUD op­er­a­tions in a <em>sin­gle</em> <strong><a href="aws.amazon.com/lambda">AWS Lambda Func­tion</a></strong> using the <a href="https://serverless.com">Server­less Frame­work</a></p><p><code>Serverless stack definition</code>:</p><div>...waiting for Gist...</div><h2 id="solution"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#solution"></a>Solution</h2><p>Use <a href="/">Vert.x</a>’s <a href="/docs/vertx-core/groovy/#event_bus">Event Bus</a> to han­dle <strong>dy­namic rout­ing</strong> to <strong>event han­dlers</strong> based on <em>HTTP method</em> and <em>re­source path</em> from the API input.</p><p><code>Lambda Handler</code>:</p><div>...waiting for Gist...</div><h2 id="code-review"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#code-review"></a>Code review</h2><p>Lines <code>14-19</code> ini­tial­izes the <strong>Vert.x</strong> in­stance. AWS Lambda will hold on to this in­stance for the life of the con­tainer/<strong>JVM</strong>. It is reused in sub­se­quent re­quests.</p><p>Line <code>17</code> reg­is­ters the <strong>User Ser­vice</strong> <em>han­dlers</em></p><p>Line <code>22</code> de­fines the <strong>main han­dler</strong> method that is called when the <strong>Lambda func­tion</strong> is in­voked.</p><p>Line <code>27</code> sends the Lambda func­tion input to the (dy­namic) <strong>ad­dress</strong> where han­dlers are wait­ing to re­spond. </p><p>Lines <code>44-66</code> de­fines the spe­cific <em>han­dlers</em> and binds them to the ap­pro­pri­ate <em>chan­nels</em> (http method + re­source path)</p><h2 id="summary"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#summary"></a>Summary</h2><p>As you can see, <a href="/">Vert.x</a>’s <a href="/docs/vertx-core/groovy/#event_bus">Event Bus</a> makes it very easy to dy­nam­i­cally sup­port mul­ti­ple routes in a sin­gle <strong>Server­less</strong> func­tion. This re­duces the num­ber of func­tions you have to man­age, de­ploy and main­tain in <strong>AWS</strong>. In ad­di­tion, you gain ac­cess to asyn­chro­nous, non-​blocking APIs that come stan­dard with <strong>Vert.x</strong>.</p><blockquote><p>Server­less + Vert.x = BLISS</p></blockquote></span></div><div class="blog-post-sidebar"><div class="blog-post-author"><img class="blog-post-author-avatar" src="https://github.com/bytekast.png?size=160"/><div class="blog-post-author-name">by <a href="https://github.com/bytekast" target="_blank" rel="noopener noreferrer">Rowell Belen</a></div></div><div class="blog-post-sidebar-date">Posted on <!-- -->14 April 2017</div>in <a class="blog-post-sidebar-category" href="/blog/category/guides/">guides</a><div class="blog-post-sidebar-reading-time"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg> <!-- -->3 min read</div><div class="blog-post-sidebar-share-icons"><a href="https://twitter.com/intent/tweet?text=Dynamic%20Routing%20in%20Serverless%20Microservice%20with%20Vert.x%20Event%20Bus&amp;url=https%3A%2F%2Fvertx.io%2Fblog%2Fdynamic-routing-in-serverless-microservice-with-vert-x-event-bus&amp;via=vertx_project" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><title>Twitter</title><path d="M23.954 4.569c-.885.389-1.83.654-2.825.775 1.014-.611 1.794-1.574 2.163-2.723-.951.555-2.005.959-3.127 1.184-.896-.959-2.173-1.559-3.591-1.559-2.717 0-4.92 2.203-4.92 4.917 0 .39.045.765.127 1.124C7.691 8.094 4.066 6.13 1.64 3.161c-.427.722-.666 1.561-.666 2.475 0 1.71.87 3.213 2.188 4.096-.807-.026-1.566-.248-2.228-.616v.061c0 2.385 1.693 4.374 3.946 4.827-.413.111-.849.171-1.296.171-.314 0-.615-.03-.916-.086.631 1.953 2.445 3.377 4.604 3.417-1.68 1.319-3.809 2.105-6.102 2.105-.39 0-.779-.023-1.17-.067 2.189 1.394 4.768 2.209 7.557 2.209 9.054 0 13.999-7.496 13.999-13.986 0-.209 0-.42-.015-.63.961-.689 1.8-1.56 2.46-2.548l-.047-.02z"></path></svg></a><a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fvertx.io%2Fblog%2Fdynamic-routing-in-serverless-microservice-with-vert-x-event-bus" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><title>LinkedIn</title><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"></path></svg></a><a href="https://www.facebook.com/sharer.php?u=https%3A%2F%2Fvertx.io%2Fblog%2Fdynamic-routing-in-serverless-microservice-with-vert-x-event-bus" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><title>Facebook</title><path d="M23.9981 11.9991C23.9981 5.37216 18.626 0 11.9991 0C5.37216 0 0 5.37216 0 11.9991C0 17.9882 4.38789 22.9522 10.1242 23.8524V15.4676H7.07758V11.9991H10.1242V9.35553C10.1242 6.34826 11.9156 4.68714 14.6564 4.68714C15.9692 4.68714 17.3424 4.92149 17.3424 4.92149V7.87439H15.8294C14.3388 7.87439 13.8739 8.79933 13.8739 9.74824V11.9991H17.2018L16.6698 15.4676H13.8739V23.8524C19.6103 22.9522 23.9981 17.9882 23.9981 11.9991Z"></path></svg></a></div></div></div><div class="blog-post-next-prev"><div class="blog-post-next-prev-entry"><h5>Next post</h5><div class="blog-entry"><div class="blog-entry-meta"><div class="blog-entry-meta-left"><span class="blog-entry-date">26 April 2017</span>​<a class="blog-entry-category" href="/blog/category/guides/">guides</a></div><div class="blog-entry-meta-right"></div></div><h3><a href="/blog/building-a-real-time-web-app-with-angular-ngrx-and-vert-x/">Building a real-time web app with Angular/Ngrx and Vert.x</a></h3><span class="blog-entry-authors"><ul><li class=""><img src="https://github.com/benorama.png?size=50"/><a href="https://github.com/benorama" target="_blank" rel="noopener noreferrer">Benoit Hediard</a></li></ul></span><p class="blog-entry-summary">There are multiple tech stacks to build a real-time web app. What are the best choices to build Angular client apps, connected to a JVM-based backend?</p><span class="read-more-link"><a href="/blog/building-a-real-time-web-app-with-angular-ngrx-and-vert-x/"> 阅读更多</a></span></div></div><div class="blog-post-next-prev-entry"><h5>Previous post</h5><div class="blog-entry"><div class="blog-entry-meta"><div class="blog-entry-meta-left"><span class="blog-entry-date">20 March 2017</span>​<a class="blog-entry-category" href="/blog/category/guides/">guides</a></div><div class="blog-entry-meta-right"></div></div><h3><a href="/blog/scala-is-here/">Scala is here</a></h3><span class="blog-entry-authors"><ul><li class=""><img src="https://github.com/codepitbull.png?size=50"/><a href="https://github.com/codepitbull" target="_blank" rel="noopener noreferrer">Jochen Mader</a></li></ul></span><p class="blog-entry-summary">The rise of Scala as one of the most important languages on the JVM caught many (me included) by surprise. This hybrid of functional and imperative paradigms struck a chord with many developers.</p><span class="read-more-link"><a href="/blog/scala-is-here/"> 阅读更多</a></span></div></div></div><div class="blog-post-related"><h5>Related posts</h5><div class="blog-post-related-posts"><div class="blog-entry"><div class="blog-entry-meta"><div class="blog-entry-meta-left"><span class="blog-entry-date">23 January 2021</span>​<a class="blog-entry-category" href="/blog/category/guides/">guides</a></div><div class="blog-entry-meta-right"></div></div><h3><a href="/blog/eclipse-vert-x-CSRF-concerns/">Things to keep in mind concerning CSRF attacks</a></h3><span class="blog-entry-authors"><ul><li class=""><img src="https://github.com/xhlika.png?size=50"/><a href="https://github.com/xhlika" target="_blank" rel="noopener noreferrer">Xhelal Likaj</a></li></ul></span><p class="blog-entry-summary">Eclipse Vert.x like most frameworks provides an anti-CSRF defense. However, no framework can prevent all attack vectors that exist in the web. Therefore, developers need to be aware of some dangers and common attack vectors concerning CSRF defenses.</p><span class="read-more-link"><a href="/blog/eclipse-vert-x-CSRF-concerns/"> 阅读更多</a></span></div><div class="blog-entry"><div class="blog-entry-meta"><div class="blog-entry-meta-left"><span class="blog-entry-date">21 December 2017</span>​<a class="blog-entry-category" href="/blog/category/guides/">guides</a></div><div class="blog-entry-meta-right"></div></div><h3><a href="/blog/eclipse-vert-x-based-framework-url-shortener-backend/">Eclipse Vert.x based Framework URL Shortener Backend</a></h3><span class="blog-entry-authors"><ul><li class=""><img src="https://github.com/pendula95.png?size=50"/><a href="https://github.com/pendula95" target="_blank" rel="noopener noreferrer">Lazar Bulić</a></li></ul></span><p class="blog-entry-summary">We combine Vert.x with the serverless framework to write a microservice that runs on AWS Lambda.</p><span class="read-more-link"><a href="/blog/eclipse-vert-x-based-framework-url-shortener-backend/"> 阅读更多</a></span></div><div class="blog-entry"><div class="blog-entry-meta"><div class="blog-entry-meta-left"><span class="blog-entry-date">15 January 2016</span>​<a class="blog-entry-category" href="/blog/category/guides/">guides</a></div><div class="blog-entry-meta-right"></div></div><h3><a href="/blog/real-time-bidding-with-websockets-and-vert-x/">Real-time bidding with Websockets and Vert.x</a></h3><span class="blog-entry-authors"><ul><li class=""><img src="https://github.com/mwarc.png?size=50"/><a href="https://github.com/mwarc" target="_blank" rel="noopener noreferrer">Marcin Warczyglowa</a></li></ul></span><p class="blog-entry-summary">The expectations of users for interactivity with web applications have changed over the past few years.
    Users during bidding in auction no longer want to press the refresh button.</p><span class="read-more-link"><a href="/blog/real-time-bidding-with-websockets-and-vert-x/"> 阅读更多</a></span></div></div></div></div></div></div><footer><div class="container"><div class="footer-nav-section"><div class="footer-nav-list footer-logo"><a href="/"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAxMjMyLjYgMzE1LjIiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxzdHlsZT4uc3Qwe2ZpbGw6Izc4MmE5MX08L3N0eWxlPjxwYXRoIGQ9Ik0xMjAuOSAyMTQuMkwxOTAuNSAwaDUyLjNsLTk4LjUgMjczLjhIOTguMkwwIDBoNTIuMWw2OC44IDIxNC4yem0yOTEuMi02Mi42SDI5OS42djg0LjJINDMxdjM4SDI1MlYwaDE3Ny43djM4LjRIMjk5LjZWMTE0aDExMi41djM3LjZ6bTgzLjctMTEzLjJINTQ2YzE2LjUuMyAyOSA0LjQgMzcuMyAxMi40IDguMyA4IDEyLjUgMTkuNCAxMi41IDM0IDAgMTQtNC41IDI1LjEtMTMuNSAzMy4yLTkgOC4xLTIxLjYgMTIuMS0zNy42IDEyLjFoLTI3LjF2MjQuMmw4Ni4xIDExOS41aDUxdi0yLjRsLTc3LjItMTA2LjdjMjQuOS01LjUgNDMuMy0yMS43IDUyLjYtMzUuOSA4LjItMTIuNiAxMy4zLTI3LjcgMTMuMy00NiAwLTI2LjgtOC42LTQ3LjQtMjUuOC02MS41QzYwMC41IDcuMSA1NzYuMSAwIDU0NC41IDBoLTk2LjN2MjczLjhoNDcuNiIvPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDUyLjMgMTU3LjdsLTQxLjUgNjIuNyAyOS43IDUzLjRoODUuMXoiLz48Y2lyY2xlIGNsYXNzPSJzdDAiIGN4PSI4MjcuOSIgY3k9IjI3NC43IiByPSI0MC41Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTEwMzcgMGwtNDcuNiA3NC4yTDk0OSAwaC04NGw4NS4zIDEzNS44LTY3LjEgMTA1LjdjNS43IDkuNSA5LjEgMjAuNSA5LjIgMzIuNGg1MC4xTDExMjEuMyAwSDEwMzd6Ii8+PHBhdGggZD0iTTc2My41IDI3My44Yy4xLTkuOSAyLjUtMTkuMiA2LjYtMjcuNVYzOC40aDg1LjRWMEg2MzguMnYzOC40aDg0LjZ2MjM1LjRoNDAuN3ptNDE0LTI2Ni45aC0xNS4zdjQyLjJoLTguNVY2LjloLTE1LjJWMGgzOXY2Ljl6TTExOTMgMGwxNC4yIDM3LjdMMTIyMS4zIDBoMTF2NDkuMWgtOC41VjMyLjlsLjgtMjEuNy0xNC41IDM3LjloLTYuMWwtMTQuNS0zNy44LjggMjEuNnYxNi4yaC04LjVWMGgxMS4yeiIvPjwvc3ZnPg==" alt="Vert.x Logo"/></a></div><div class="footer-nav-list"><h5>Eclipse Vert.x</h5><ul class=""><li><a class="navbar-menu-item" href="/docs/">文档</a></li><li><a href="/download/">下载</a></li><li><a href="/blog/">博客</a></li><li><a href="/community/">社区</a></li><li><a href="/translation/">翻译团队</a></li><li><a href="https://github.com/eclipse-vertx/vert.x">GitHub</a></li><li><a href="https://github.com/vertx-china/vertx-web-site">翻译GitHub</a></li></ul></div><div class="footer-nav-list"><h5>资源</h5><ul class=""><li><a href="/faq/">答疑</a></li><li><a href="/channels/">联系渠道</a></li><li><a href="https://how-to.vertx.io/">操作指南</a></li><li><a href="https://start.vertx.io/">应用生成器</a></li></ul></div><div class="footer-nav-list"><h5>Eclipse</h5><ul class=""><li><a href="https://www.eclipse.org/">Eclipse 基金会</a></li><li><a href="https://www.eclipse.org/legal/privacy.php">隐私政策</a></li><li><a href="https://www.eclipse.org/legal/termsofuse.php">使用条款</a></li><li><a href="https://www.eclipse.org/legal/copyright.php">版权代理</a></li><li><a href="https://www.eclipse.org/legal/">法律资源</a></li></ul></div></div><div class="footer-copyright"><div class="footer-copyright-remarks">© <!-- -->2021<!-- --> Eclipse Vert.x™<br/>Eclipse Vert.x™ 是开源的，并在<a href="https://creativecommons.org/licenses/by-sa/3.0/" target="_blank" rel="noopener noreferrer">Eclipse Public License 2.0</a>和<a href="https://www.apache.org/licenses/LICENSE-2.0.html" target="_blank" rel="noopener noreferrer">Apache License 2.0</a>协议下获得了双重许可。<br class="footer-copyright-break"/>网站由 <a href="https://michelkraemer.com" target="_blank" rel="noopener noreferrer">Michel Krämer</a> 设计。</div><div class="footer-copyright-eclipse-logo"><a href="https://www.eclipse.org/" target="_blank" rel="noopener noreferrer"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAyODEuMyA5MS4xIiB4bWw6c3BhY2U9InByZXNlcnZlIj48c3R5bGU+LnN0MHtmaWxsOiNmNzk0MjJ9LnN0MXtmaWxsOiMzZDNjM2J9PC9zdHlsZT48ZyBpZD0iTGF5ZXJfMV8xXyI+PHBhdGggY2xhc3M9InN0MCIgZD0iTTI2NS43IDg0TDI1NyA3M2gtMi43djE3LjdoMy4zdi0xMmw5LjMgMTJoMi4xVjczaC0zLjN2MTF6bS0zMi40LTguM2M0LjIgMCA1LjggMy4zIDUuOCA2LjNzLTEuNiA2LTUuOCA2LTUuNy0zLjEtNS44LTYgMS43LTYuMyA1LjgtNi4zem0wLTNjLTYuMSAwLTkuMSA0LjctOS4xIDkuMyAwIDQuNyAyLjkgOS4xIDkuMSA5LjFzOS00LjYgOS4xLTkuMi0zLTkuMi05LjEtOS4yem0tMjEuMiAxOFY3M2gtMy4zdjE3LjdoMy4zem0tMjMuNiAwaDMuM1Y3Nmg1LjZ2LTNoLTE0LjZ2M2g1LjZsLjEgMTQuN3ptLTE4LjktNi41SDE2M2wzLjMtNy42IDMuMyA3LjZ6bTIuOCA2LjVoMy42TDE2OC4yIDczaC0zLjZsLTggMTcuN2gzLjZsMS41LTMuM2g5LjNsMS40IDMuM3ptLTM4LTE0LjZoMy42YzMuOSAwIDUuNSAyLjggNS41IDUuNS4xIDIuOC0xLjUgNS44LTUuNSA1LjhoLTMuNlY3Ni4xem0zLjctMy4xaC02Ljl2MTcuN2g2LjljNi4yIDAgOC45LTQuNSA4LjktOXMtMi44LTguNy04LjktOC43em0tMjIuNCAxMUwxMDcgNzNoLTIuN3YxNy43aDMuM3YtMTJsOS4zIDEyaDIuMVY3M2gtMy4zdjExek04OC4yIDczdjEwLjJjMCAzLTEuNiA0LjktNC4zIDQuOXMtNC42LTEuNy00LjYtNC45VjczSDc2djEwLjFjMCA1LjMgMy42IDcuOSA3LjkgNy45IDQuNCAwIDcuNy0yLjcgNy43LTcuOVY3M2gtMy40em0tMzMgMi43YzQuMiAwIDUuOCAzLjMgNS44IDYuM3MtMS42IDYtNS44IDYtNS43LTMuMS01LjgtNiAxLjctNi4zIDUuOC02LjN6bTAtM2MtNi4xIDAtOS4xIDQuNy05LjEgOS4zczIuOSA5LjEgOS4xIDkuMSA5LTQuNiA5LjEtOS4yLTMtOS4yLTkuMS05LjJ6bS0yOS43IDE4di02LjVoOC45di0zLjFoLTguOXYtNC44aDkuNFY3M0gyMi4ydjE3LjZoMy4zeiIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yNjkuNCA1NC40aC0yMi4ydi04LjloMjEuNHYtNi45aC0yMS40di05LjFoMjIuMnYtNy4yaC0yOS42djM5LjVoMjkuNnYtNy40em0tNDAtMjUuNmMtMy02LjEtOS40LTcuOC0xNS41LTcuOC03LjMgMC0xNS4zIDMuNC0xNS4zIDExLjUgMCA4LjkgNy40IDExIDE1LjUgMTIgNS4yLjYgOS4xIDIuMSA5LjEgNS44IDAgNC4zLTQuNCA1LjktOS4xIDUuOXMtOS40LTEuOS0xMS4xLTYuM2wtNi4yIDMuMmMyLjkgNy4yIDkuMSA5LjcgMTcuMiA5LjcgOC44IDAgMTYuNi0zLjggMTYuNi0xMi42IDAtOS40LTcuNy0xMS42LTE1LjktMTIuNi00LjctLjYtOC44LTEuNS04LjgtNSAwLTIuOSAyLjYtNS4yIDguMi01LjIgNC4zIDAgOCAyLjIgOS40IDQuNGw1LjktM3pNMTc2IDIyLjJjLTYuMi0uMS0xMi40IDAtMTguNiAwdjM5LjVoNy40VjUwLjFIMTc2YzE5LjQgMCAxOS40LTI3LjkgMC0yNy45em0tMTEuMSA3LjFIMTc2YzkuNSAwIDkuNSAxNCAwIDE0aC0xMS4ybC4xLTE0em0tMTggMzIuNVYyMi4yaC03LjR2MzkuNWw3LjQuMXptLTQ0LTM5LjZ2MzkuNWgyNy43di02LjloLTIwLjNWMjIuMmgtNy40ek05MC43IDUxLjdjLTIuNyAyLjUtNi4yIDQtOS45IDQtOS44IDAtMTMuNS02LjgtMTMuNi0xMy40czQuMS0xMy43IDEzLjYtMTMuN2MzLjUtLjEgNyAxLjMgOS41IDMuN2w1LTQuOGMtMy44LTMuOS05LjEtNi0xNC41LTYtMTQuMyAwLTIxIDEwLjUtMjAuOSAyMC44czYuMyAyMC4zIDIwLjkgMjAuM2M1LjYuMSAxMS0yIDE1LTUuOWwtNS4xLTV6bS0zOSAyLjdIMjkuNXYtOC45aDIxLjR2LTYuOUgyOS41di05LjFoMjIuMnYtNy4ySDIyLjJ2MzkuNWgyOS42bC0uMS03LjR6Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTkuOCAxOC4yQzE4LjggNC4xIDM2LjktLjggNTIuMSA2bC0xLS43QzM1LjctNC42IDE1LjItLjEgNS4zIDE1LjNzLTUuNCAzNS45IDEwIDQ1LjhsMS4xLjZDMy44IDUwLjguOCAzMi4zIDkuOCAxOC4yeiIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yNzIuMiAyNi4xYzAtMi41IDIuMS00LjYgNC42LTQuNiAyLjUgMCA0LjYgMi4xIDQuNiA0LjYgMCAyLjUtMi4xIDQuNi00LjYgNC42LTIuNiAwLTQuNi0yLjEtNC42LTQuNnptOC42IDBjMC0yLjItMS44LTQuMS00LTQuMXMtNC4xIDEuOC00LjEgNC4xYzAgMi4yIDEuNyA0IDMuOSA0LjFoLjFjMi4zIDAgNC4xLTEuOCA0LjEtNC4xem0tNi0yLjVoMi4zYzEuMSAwIDEuOS41IDEuOSAxLjYgMCAuNy0uNCAxLjMtMS4xIDEuNWwxLjIgMS43aC0xLjRsLTEtMS41aC0uN3YxLjVoLTEuMWwtLjEtNC44em0yLjIgMi4zYy41IDAgLjgtLjMuOC0uN3MtLjMtLjctLjgtLjdoLTF2MS4zbDEgLjF6Ii8+PC9nPjwvc3ZnPg==" alt="Eclipse foundation Logo"/></a></div></div></div></footer></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"categories":["releases","guides","news"],"post":{"meta":{"title":"Dynamic Routing in Serverless Microservice with Vert.x Event Bus","category":"guides","authors":[{"name":"Rowell Belen","github_id":"bytekast"}],"summary":"The Serverless Framework has become the de facto toolkit for building and deploying serverless functions or applications."},"date":"2017-04-14","slug":"dynamic-routing-in-serverless-microservice-with-vert-x-event-bus","readingTime":{"text":"3 min read","minutes":2.6,"time":156000,"words":520},"content":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(Alert, {\n    info: true,\n    mdxType: \"Alert\"\n  }, mdx(\"p\", null, \"This is a re-\\u200Bpublication of the fol\\xADlow\\xADing \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.rowellbelen.com/dynamic-routing-in-serverless-microservice-with-vert-x-event-bus/\"\n  }), \"blog post\"))), mdx(\"h2\", {\n    \"id\": \"serverless-framework\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#serverless-framework\"\n  })), \"Serverless framework\"), mdx(\"p\", null, \"The \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://serverless.com\"\n  }), \"Server\\xADless Frame\\xADwork\"), \" has be\\xADcome the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"De Facto\"), \" toolkit for build\\xADing and de\\xADploy\\xADing Server\\xADless func\\xADtions or ap\\xADpli\\xADca\\xADtions. Its com\\xADmu\\xADnity has done a great job ad\\xADvanc\\xADing the tools around Server\\xADless ar\\xADchi\\xADtec\\xADture.\"), mdx(\"p\", null, \"How\\xADever, in the Server\\xADless com\\xADmu\\xADnity there is de\\xADbate among de\\xADvel\\xADop\\xADers on whether a sin\\xADgle \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"AWS Lambda\"), \" func\\xADtion should only be re\\xADspon\\xADsi\\xADble for a sin\\xADgle API end\\xADpoint. My an\\xADswer, based on my real-\\u200Bworld pro\\xADduc\\xADtion ex\\xADpe\\xADri\\xADence, is \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"NO\"), \". \"), mdx(\"p\", null, \"Imag\\xADine if you are build\\xADing a set of APIs with \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"10\"), \" end\\xADpoints and you need to de\\xADploy the APIs to \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"DEV\"), \", \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"STAGE\"), \" and \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"PROD\"), \" en\\xADvi\\xADron\\xADments. Now you are look\\xADing at \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"30\"), \" dif\\xADfer\\xADent func\\xADtions to ver\\xADsion, de\\xADploy and man\\xADage - not to men\\xADtion the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Copy \u0026 Paste\"), \" code and con\\xADfig\\xADu\\xADra\\xADtion that will re\\xADsult from this type of set-\\u200Bup. \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"NO THANKS!!!\"), \" \"), mdx(\"p\", null, \"I be\\xADlieve a more prag\\xADmatic ap\\xADproach is \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"1 Lambda Func\\xADtion\"), \" == \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"1 Mi\\xADcroser\\xADvice\"), \".\"), mdx(\"p\", null, \"For ex\\xADam\\xADple, if you were build\\xADing a \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"User Mi\\xADcroser\\xADvice\"), \" with basic \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"CRUD\"), \" func\\xADtion\\xADal\\xADity, you should im\\xADple\\xADment \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"CREATE\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"READ\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"UPDATE\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"DELETE\"), \" in a \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"sin\\xADgle\"), \" Lambda func\\xADtion. In the code, you should re\\xADsolve the de\\xADsired ac\\xADtion by in\\xADspect\\xADing the re\\xADquest or the con\\xADtext.\"), mdx(\"h2\", {\n    \"id\": \"vertx-to-the-rescue\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#vertx-to-the-rescue\"\n  })), \"Vert.x to the rescue\"), mdx(\"p\", null, \"There are many ben\\xADe\\xADfits to using \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Vert.x\"), \" in any ap\\xADpli\\xADca\\xADtion. With \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Vert.x\"), \", you get a rock-\\u200Bsolid and light\\xADweight toolkit for build\\xADing \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"re\\xADac\\xADtive\"), \", \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"highly per\\xADfor\\xADmant\"), \", \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"event-\\u200Bdriven\"), \" and \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"non-\\u200Bblocking\"), \" ap\\xADpli\\xADca\\xADtions. The toolkit even pro\\xADvides asyn\\xADchro\\xADnous \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"APIs\"), \" for ac\\xADcess\\xADing tra\\xADdi\\xADtional block\\xADing dri\\xADvers such as \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, mdx(Link, {\n    href: \"/docs/vertx-jdbc-client/groovy/\",\n    passHref: true,\n    mdxType: \"Link\"\n  }, mdx(\"a\", _extends({\n    parentName: \"strong\"\n  }, {\n    \"href\": \"\"\n  }), \"JDBC\"))), \".\"), mdx(\"p\", null, \"How\\xADever, for this ex\\xADam\\xADple, we will mainly focus on the \", mdx(Link, {\n    href: \"/docs/vertx-core/groovy/#event_bus\",\n    passHref: true,\n    mdxType: \"Link\"\n  }, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"\"\n  }), \"Event Bus\")), \". The event bus al\\xADlows dif\\xADfer\\xADent parts of your ap\\xADpli\\xADca\\xADtion to com\\xADmu\\xADni\\xADcate with each other via event mes\\xADsages. It sup\\xADports \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"pub\\xADlish/sub\\xADscribe\"), \", \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"point to point\"), \", and \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"request-\\u200Bresponse mes\\xADsag\\xADing\"), \".\"), mdx(\"p\", null, \"For the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"User Mi\\xADcroser\\xADvice\"), \" ex\\xADam\\xADple above, we could treat the com\\xADbi\\xADna\\xADtion of the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"HTTP METHOD\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"RESOURCE PATH\"), \" as a unique event chan\\xADnel, and reg\\xADis\\xADter the sub\\xADscribers/han\\xADdlers to re\\xADspond ap\\xADpro\\xADpri\\xADately.\"), mdx(\"p\", null, \"Let\\u2019s dive right in.\"), mdx(\"h2\", {\n    \"id\": \"goal\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#goal\"\n  })), \"Goal\"), mdx(\"p\", null, \"Cre\\xADate a \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"re\\xADac\\xADtive\"), \", \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"message-\\u200Bdriven\"), \", \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"asyn\\xADchro\\xADnous\"), \" \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"User Mi\\xADcroser\\xADvice\"), \" with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"GET\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"POST\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"DELETE\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"PUT\"), \" CRUD op\\xADer\\xADa\\xADtions in a \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"sin\\xADgle\"), \" \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, mdx(\"a\", _extends({\n    parentName: \"strong\"\n  }, {\n    \"href\": \"aws.amazon.com/lambda\"\n  }), \"AWS Lambda Func\\xADtion\")), \" using the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://serverless.com\"\n  }), \"Server\\xADless Frame\\xADwork\")), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Serverless stack definition\"), \":\"), mdx(Gist, {\n    url: \"https://gist.github.com/bytekast/48daa2ca479156c98d2735cca181ef30\",\n    mdxType: \"Gist\"\n  }), mdx(\"h2\", {\n    \"id\": \"solution\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#solution\"\n  })), \"Solution\"), mdx(\"p\", null, \"Use \", mdx(Link, {\n    href: \"/\",\n    passHref: true,\n    mdxType: \"Link\"\n  }, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"\"\n  }), \"Vert.x\")), \"\\u2019s \", mdx(Link, {\n    href: \"/docs/vertx-core/groovy/#event_bus\",\n    passHref: true,\n    mdxType: \"Link\"\n  }, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"\"\n  }), \"Event Bus\")), \" to han\\xADdle \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"dy\\xADnamic rout\\xADing\"), \" to \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"event han\\xADdlers\"), \" based on \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"HTTP method\"), \" and \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"re\\xADsource path\"), \" from the API input.\"), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Lambda Handler\"), \":\"), mdx(Gist, {\n    url: \"https://gist.github.com/bytekast/d5a544f8cdcd327a12010100b2ba2d66\",\n    mdxType: \"Gist\"\n  }), mdx(\"h2\", {\n    \"id\": \"code-review\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#code-review\"\n  })), \"Code review\"), mdx(\"p\", null, \"Lines \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"14-19\"), \" ini\\xADtial\\xADizes the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Vert.x\"), \" in\\xADstance. AWS Lambda will hold on to this in\\xADstance for the life of the con\\xADtainer/\", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"JVM\"), \". It is reused in sub\\xADse\\xADquent re\\xADquests.\"), mdx(\"p\", null, \"Line \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"17\"), \" reg\\xADis\\xADters the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"User Ser\\xADvice\"), \" \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"han\\xADdlers\")), mdx(\"p\", null, \"Line \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"22\"), \" de\\xADfines the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"main han\\xADdler\"), \" method that is called when the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Lambda func\\xADtion\"), \" is in\\xADvoked.\"), mdx(\"p\", null, \"Line \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"27\"), \" sends the Lambda func\\xADtion input to the (dy\\xADnamic) \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"ad\\xADdress\"), \" where han\\xADdlers are wait\\xADing to re\\xADspond. \"), mdx(\"p\", null, \"Lines \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"44-66\"), \" de\\xADfines the spe\\xADcific \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"han\\xADdlers\"), \" and binds them to the ap\\xADpro\\xADpri\\xADate \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"chan\\xADnels\"), \" (http method + re\\xADsource path)\"), mdx(\"h2\", {\n    \"id\": \"summary\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#summary\"\n  })), \"Summary\"), mdx(\"p\", null, \"As you can see, \", mdx(Link, {\n    href: \"/\",\n    passHref: true,\n    mdxType: \"Link\"\n  }, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"\"\n  }), \"Vert.x\")), \"\\u2019s \", mdx(Link, {\n    href: \"/docs/vertx-core/groovy/#event_bus\",\n    passHref: true,\n    mdxType: \"Link\"\n  }, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"\"\n  }), \"Event Bus\")), \" makes it very easy to dy\\xADnam\\xADi\\xADcally sup\\xADport mul\\xADti\\xADple routes in a sin\\xADgle \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Server\\xADless\"), \" func\\xADtion. This re\\xADduces the num\\xADber of func\\xADtions you have to man\\xADage, de\\xADploy and main\\xADtain in \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"AWS\"), \". In ad\\xADdi\\xADtion, you gain ac\\xADcess to asyn\\xADchro\\xADnous, non-\\u200Bblocking APIs that come stan\\xADdard with \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Vert.x\"), \".\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Server\\xADless + Vert.x = BLISS\")));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"\u003cdiv class=\"alert info\"\u003e\u003cp\u003eThis is a re-​publication of the fol­low­ing \u003ca href=\"https://www.rowellbelen.com/dynamic-routing-in-serverless-microservice-with-vert-x-event-bus/\"\u003eblog post\u003c/a\u003e\u003c/p\u003e\u003c/div\u003e\u003ch2 id=\"serverless-framework\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#serverless-framework\"\u003e\u003c/a\u003eServerless framework\u003c/h2\u003e\u003cp\u003eThe \u003ca href=\"https://serverless.com\"\u003eServer­less Frame­work\u003c/a\u003e has be­come the \u003cem\u003eDe Facto\u003c/em\u003e toolkit for build­ing and de­ploy­ing Server­less func­tions or ap­pli­ca­tions. Its com­mu­nity has done a great job ad­vanc­ing the tools around Server­less ar­chi­tec­ture.\u003c/p\u003e\u003cp\u003eHow­ever, in the Server­less com­mu­nity there is de­bate among de­vel­op­ers on whether a sin­gle \u003cstrong\u003eAWS Lambda\u003c/strong\u003e func­tion should only be re­spon­si­ble for a sin­gle API end­point. My an­swer, based on my real-​world pro­duc­tion ex­pe­ri­ence, is \u003cstrong\u003eNO\u003c/strong\u003e. \u003c/p\u003e\u003cp\u003eImag­ine if you are build­ing a set of APIs with \u003cstrong\u003e10\u003c/strong\u003e end­points and you need to de­ploy the APIs to \u003cstrong\u003eDEV\u003c/strong\u003e, \u003cstrong\u003eSTAGE\u003c/strong\u003e and \u003cstrong\u003ePROD\u003c/strong\u003e en­vi­ron­ments. Now you are look­ing at \u003cstrong\u003e30\u003c/strong\u003e dif­fer­ent func­tions to ver­sion, de­ploy and man­age - not to men­tion the \u003cem\u003eCopy \u0026amp; Paste\u003c/em\u003e code and con­fig­u­ra­tion that will re­sult from this type of set-​up. \u003cstrong\u003eNO THANKS!!!\u003c/strong\u003e \u003c/p\u003e\u003cp\u003eI be­lieve a more prag­matic ap­proach is \u003cstrong\u003e1 Lambda Func­tion\u003c/strong\u003e == \u003cstrong\u003e1 Mi­croser­vice\u003c/strong\u003e.\u003c/p\u003e\u003cp\u003eFor ex­am­ple, if you were build­ing a \u003cstrong\u003eUser Mi­croser­vice\u003c/strong\u003e with basic \u003cstrong\u003eCRUD\u003c/strong\u003e func­tion­al­ity, you should im­ple­ment \u003ccode\u003eCREATE\u003c/code\u003e, \u003ccode\u003eREAD\u003c/code\u003e, \u003ccode\u003eUPDATE\u003c/code\u003e and \u003ccode\u003eDELETE\u003c/code\u003e in a \u003cstrong\u003esin­gle\u003c/strong\u003e Lambda func­tion. In the code, you should re­solve the de­sired ac­tion by in­spect­ing the re­quest or the con­text.\u003c/p\u003e\u003ch2 id=\"vertx-to-the-rescue\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#vertx-to-the-rescue\"\u003e\u003c/a\u003eVert.x to the rescue\u003c/h2\u003e\u003cp\u003eThere are many ben­e­fits to using \u003cstrong\u003eVert.x\u003c/strong\u003e in any ap­pli­ca­tion. With \u003cstrong\u003eVert.x\u003c/strong\u003e, you get a rock-​solid and light­weight toolkit for build­ing \u003cstrong\u003ere­ac­tive\u003c/strong\u003e, \u003cstrong\u003ehighly per­for­mant\u003c/strong\u003e, \u003cstrong\u003eevent-​driven\u003c/strong\u003e and \u003cstrong\u003enon-​blocking\u003c/strong\u003e ap­pli­ca­tions. The toolkit even pro­vides asyn­chro­nous \u003cem\u003eAPIs\u003c/em\u003e for ac­cess­ing tra­di­tional block­ing dri­vers such as \u003cstrong\u003e\u003ca href=\"/docs/vertx-jdbc-client/groovy/\"\u003eJDBC\u003c/a\u003e\u003c/strong\u003e.\u003c/p\u003e\u003cp\u003eHow­ever, for this ex­am­ple, we will mainly focus on the \u003ca href=\"/docs/vertx-core/groovy/#event_bus\"\u003eEvent Bus\u003c/a\u003e. The event bus al­lows dif­fer­ent parts of your ap­pli­ca­tion to com­mu­ni­cate with each other via event mes­sages. It sup­ports \u003cem\u003epub­lish/sub­scribe\u003c/em\u003e, \u003cem\u003epoint to point\u003c/em\u003e, and \u003cem\u003erequest-​response mes­sag­ing\u003c/em\u003e.\u003c/p\u003e\u003cp\u003eFor the \u003cstrong\u003eUser Mi­croser­vice\u003c/strong\u003e ex­am­ple above, we could treat the com­bi­na­tion of the \u003ccode\u003eHTTP METHOD\u003c/code\u003e and \u003ccode\u003eRESOURCE PATH\u003c/code\u003e as a unique event chan­nel, and reg­is­ter the sub­scribers/han­dlers to re­spond ap­pro­pri­ately.\u003c/p\u003e\u003cp\u003eLet’s dive right in.\u003c/p\u003e\u003ch2 id=\"goal\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#goal\"\u003e\u003c/a\u003eGoal\u003c/h2\u003e\u003cp\u003eCre­ate a \u003cem\u003ere­ac­tive\u003c/em\u003e, \u003cem\u003emessage-​driven\u003c/em\u003e, \u003cem\u003easyn­chro­nous\u003c/em\u003e \u003cstrong\u003eUser Mi­croser­vice\u003c/strong\u003e with \u003ccode\u003eGET\u003c/code\u003e, \u003ccode\u003ePOST\u003c/code\u003e, \u003ccode\u003eDELETE\u003c/code\u003e, \u003ccode\u003ePUT\u003c/code\u003e CRUD op­er­a­tions in a \u003cem\u003esin­gle\u003c/em\u003e \u003cstrong\u003e\u003ca href=\"aws.amazon.com/lambda\"\u003eAWS Lambda Func­tion\u003c/a\u003e\u003c/strong\u003e using the \u003ca href=\"https://serverless.com\"\u003eServer­less Frame­work\u003c/a\u003e\u003c/p\u003e\u003cp\u003e\u003ccode\u003eServerless stack definition\u003c/code\u003e:\u003c/p\u003e\u003cdiv\u003e...waiting for Gist...\u003c/div\u003e\u003ch2 id=\"solution\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#solution\"\u003e\u003c/a\u003eSolution\u003c/h2\u003e\u003cp\u003eUse \u003ca href=\"/\"\u003eVert.x\u003c/a\u003e’s \u003ca href=\"/docs/vertx-core/groovy/#event_bus\"\u003eEvent Bus\u003c/a\u003e to han­dle \u003cstrong\u003edy­namic rout­ing\u003c/strong\u003e to \u003cstrong\u003eevent han­dlers\u003c/strong\u003e based on \u003cem\u003eHTTP method\u003c/em\u003e and \u003cem\u003ere­source path\u003c/em\u003e from the API input.\u003c/p\u003e\u003cp\u003e\u003ccode\u003eLambda Handler\u003c/code\u003e:\u003c/p\u003e\u003cdiv\u003e...waiting for Gist...\u003c/div\u003e\u003ch2 id=\"code-review\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#code-review\"\u003e\u003c/a\u003eCode review\u003c/h2\u003e\u003cp\u003eLines \u003ccode\u003e14-19\u003c/code\u003e ini­tial­izes the \u003cstrong\u003eVert.x\u003c/strong\u003e in­stance. AWS Lambda will hold on to this in­stance for the life of the con­tainer/\u003cstrong\u003eJVM\u003c/strong\u003e. It is reused in sub­se­quent re­quests.\u003c/p\u003e\u003cp\u003eLine \u003ccode\u003e17\u003c/code\u003e reg­is­ters the \u003cstrong\u003eUser Ser­vice\u003c/strong\u003e \u003cem\u003ehan­dlers\u003c/em\u003e\u003c/p\u003e\u003cp\u003eLine \u003ccode\u003e22\u003c/code\u003e de­fines the \u003cstrong\u003emain han­dler\u003c/strong\u003e method that is called when the \u003cstrong\u003eLambda func­tion\u003c/strong\u003e is in­voked.\u003c/p\u003e\u003cp\u003eLine \u003ccode\u003e27\u003c/code\u003e sends the Lambda func­tion input to the (dy­namic) \u003cstrong\u003ead­dress\u003c/strong\u003e where han­dlers are wait­ing to re­spond. \u003c/p\u003e\u003cp\u003eLines \u003ccode\u003e44-66\u003c/code\u003e de­fines the spe­cific \u003cem\u003ehan­dlers\u003c/em\u003e and binds them to the ap­pro­pri­ate \u003cem\u003echan­nels\u003c/em\u003e (http method + re­source path)\u003c/p\u003e\u003ch2 id=\"summary\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#summary\"\u003e\u003c/a\u003eSummary\u003c/h2\u003e\u003cp\u003eAs you can see, \u003ca href=\"/\"\u003eVert.x\u003c/a\u003e’s \u003ca href=\"/docs/vertx-core/groovy/#event_bus\"\u003eEvent Bus\u003c/a\u003e makes it very easy to dy­nam­i­cally sup­port mul­ti­ple routes in a sin­gle \u003cstrong\u003eServer­less\u003c/strong\u003e func­tion. This re­duces the num­ber of func­tions you have to man­age, de­ploy and main­tain in \u003cstrong\u003eAWS\u003c/strong\u003e. In ad­di­tion, you gain ac­cess to asyn­chro­nous, non-​blocking APIs that come stan­dard with \u003cstrong\u003eVert.x\u003c/strong\u003e.\u003c/p\u003e\u003cblockquote\u003e\u003cp\u003eServer­less + Vert.x = BLISS\u003c/p\u003e\u003c/blockquote\u003e","scope":{}}},"prevPost":{"meta":{"title":"Building a real-time web app with Angular/Ngrx and Vert.x","category":"guides","authors":[{"name":"Benoit Hediard","github_id":"benorama"}],"summary":"There are multiple tech stacks to build a real-time web app. What are the best choices to build Angular client apps, connected to a JVM-based backend?"},"date":"2017-04-26","slug":"building-a-real-time-web-app-with-angular-ngrx-and-vert-x"},"nextPost":{"meta":{"title":"Scala is here","category":"guides","authors":[{"name":"Jochen Mader","github_id":"codepitbull"}],"summary":"The rise of Scala as one of the most important languages on the JVM caught many (me included) by surprise. This hybrid of functional and imperative paradigms struck a chord with many developers."},"date":"2017-03-20","slug":"scala-is-here"},"relatedPosts":[{"meta":{"title":"Things to keep in mind concerning CSRF attacks","category":"guides","authors":[{"name":"Xhelal Likaj","github_id":"xhlika"}],"summary":"Eclipse Vert.x like most frameworks provides an anti-CSRF defense. However, no framework can prevent all attack vectors that exist in the web. Therefore, developers need to be aware of some dangers and common attack vectors concerning CSRF defenses."},"date":"2021-01-23","slug":"eclipse-vert-x-CSRF-concerns"},{"meta":{"title":"Eclipse Vert.x based Framework URL Shortener Backend","category":"guides","authors":[{"name":"Lazar Bulić","github_id":"pendula95"}],"summary":"We combine Vert.x with the serverless framework to write a microservice that runs on AWS Lambda."},"date":"2017-12-21","slug":"eclipse-vert-x-based-framework-url-shortener-backend"},{"meta":{"title":"Real-time bidding with Websockets and Vert.x","category":"guides","authors":[{"name":"Marcin Warczyglowa","github_id":"mwarc"}],"summary":"The expectations of users for interactivity with web applications have changed over the past few years.\n    Users during bidding in auction no longer want to press the refresh button."},"date":"2016-01-15","slug":"real-time-bidding-with-websockets-and-vert-x"}]},"__N_SSG":true},"page":"/blog/[[...slug]]","query":{"slug":["dynamic-routing-in-serverless-microservice-with-vert-x-event-bus"]},"buildId":"CMVGPxoywMMUqzejXBSOL","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-9a5c89434732593ca2fd.js"></script><script src="/_next/static/chunks/main-b6e20584df76f29b6f35.js" async=""></script><script src="/_next/static/chunks/webpack-d7b2fb72fb7257504a38.js" async=""></script><script src="/_next/static/chunks/framework.fcef98db13e2318579fb.js" async=""></script><script src="/_next/static/chunks/commons.5b8771ac6e8a338f82f1.js" async=""></script><script src="/_next/static/chunks/styles.7064a0f84b2a7c13404a.js" async=""></script><script src="/_next/static/chunks/pages/_app-3dbbc9c041333077c167.js" async=""></script><script src="/_next/static/chunks/5df0631eea625b022d3730b3f1bf573e1b8deb37.2c5d42edba8dda0b0ba3.js" async=""></script><script src="/_next/static/chunks/pages/blog/%5B%5B...slug%5D%5D-ff5b3ed8f1ab05c5e7a9.js" async=""></script><script src="/_next/static/CMVGPxoywMMUqzejXBSOL/_buildManifest.js" async=""></script><script src="/_next/static/CMVGPxoywMMUqzejXBSOL/_ssgManifest.js" async=""></script></body></html>