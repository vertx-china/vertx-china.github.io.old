<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="description" content="Vert.x | Reactive applications on the JVM"/><meta name="robots" content="index,follow"/><link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet"/><link href="https://fonts.googleapis.com/css?family=Roboto+Condensed:300,400" rel="stylesheet"/><link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400&amp;display=swap" rel="stylesheet"/><link rel="shortcut icon" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="48x48" href="/favicons/favicon-48x48.png"/><link rel="alternate" type="application/rss+xml" href="/feed/rss.xml"/><link rel="alternate" type="application/atom+xml" href="/feed/atom.xml"/><link rel="alternate" type="application/json" href="/feed/feed.json"/><title>What&#x27;s new in Vert.x 4.1 | 博客 | Eclipse Vert.x</title><meta name="next-head-count" content="16"/><link rel="preload" href="/_next/static/css/styles.bee17d6f.chunk.css" as="style"/><link rel="stylesheet" href="/_next/static/css/styles.bee17d6f.chunk.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-b6e20584df76f29b6f35.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-d7b2fb72fb7257504a38.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.fcef98db13e2318579fb.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.5b8771ac6e8a338f82f1.js" as="script"/><link rel="preload" href="/_next/static/chunks/styles.7064a0f84b2a7c13404a.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-3dbbc9c041333077c167.js" as="script"/><link rel="preload" href="/_next/static/chunks/5df0631eea625b022d3730b3f1bf573e1b8deb37.2c5d42edba8dda0b0ba3.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/blog/%5B%5B...slug%5D%5D-ff5b3ed8f1ab05c5e7a9.js" as="script"/></head><body data-build-time="2021-06-05T02:49:32.694Z" data-build-commit-id="19c7f98c280e969b800422053097ad7764fea37e" data-build-run-id="908253367"><div id="__next"><main class="page"><header><div class="navbar"><div class="navbar-content container"><div class="navbar-logo"><a href="/"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAxMjMyLjYgMzE1LjIiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxzdHlsZT4uc3Qwe2ZpbGw6Izc4MmE5MX08L3N0eWxlPjxwYXRoIGQ9Ik0xMjAuOSAyMTQuMkwxOTAuNSAwaDUyLjNsLTk4LjUgMjczLjhIOTguMkwwIDBoNTIuMWw2OC44IDIxNC4yem0yOTEuMi02Mi42SDI5OS42djg0LjJINDMxdjM4SDI1MlYwaDE3Ny43djM4LjRIMjk5LjZWMTE0aDExMi41djM3LjZ6bTgzLjctMTEzLjJINTQ2YzE2LjUuMyAyOSA0LjQgMzcuMyAxMi40IDguMyA4IDEyLjUgMTkuNCAxMi41IDM0IDAgMTQtNC41IDI1LjEtMTMuNSAzMy4yLTkgOC4xLTIxLjYgMTIuMS0zNy42IDEyLjFoLTI3LjF2MjQuMmw4Ni4xIDExOS41aDUxdi0yLjRsLTc3LjItMTA2LjdjMjQuOS01LjUgNDMuMy0yMS43IDUyLjYtMzUuOSA4LjItMTIuNiAxMy4zLTI3LjcgMTMuMy00NiAwLTI2LjgtOC42LTQ3LjQtMjUuOC02MS41QzYwMC41IDcuMSA1NzYuMSAwIDU0NC41IDBoLTk2LjN2MjczLjhoNDcuNiIvPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDUyLjMgMTU3LjdsLTQxLjUgNjIuNyAyOS43IDUzLjRoODUuMXoiLz48Y2lyY2xlIGNsYXNzPSJzdDAiIGN4PSI4MjcuOSIgY3k9IjI3NC43IiByPSI0MC41Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTEwMzcgMGwtNDcuNiA3NC4yTDk0OSAwaC04NGw4NS4zIDEzNS44LTY3LjEgMTA1LjdjNS43IDkuNSA5LjEgMjAuNSA5LjIgMzIuNGg1MC4xTDExMjEuMyAwSDEwMzd6Ii8+PHBhdGggZD0iTTc2My41IDI3My44Yy4xLTkuOSAyLjUtMTkuMiA2LjYtMjcuNVYzOC40aDg1LjRWMEg2MzguMnYzOC40aDg0LjZ2MjM1LjRoNDAuN3ptNDE0LTI2Ni45aC0xNS4zdjQyLjJoLTguNVY2LjloLTE1LjJWMGgzOXY2Ljl6TTExOTMgMGwxNC4yIDM3LjdMMTIyMS4zIDBoMTF2NDkuMWgtOC41VjMyLjlsLjgtMjEuNy0xNC41IDM3LjloLTYuMWwtMTQuNS0zNy44LjggMjEuNnYxNi4yaC04LjVWMGgxMS4yeiIvPjwvc3ZnPg==" alt="Vert.x Logo"/></a></div><div class="navbar-collapse-button"><span></span><span></span><span></span></div><div class="navbar-right"><div class="navbar-menu"><span class="navbar-menu-item with-drop-down"><div class="dropdown"><a class="dropdown-title">开始<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="dropdown-menu"><a href="/introduction-to-vertx-and-reactive/"><li class="dropdown-item">简介</li></a><a href="/get-started/"><li class="dropdown-item">开始</li></a><a href="https://start.vertx.io/" target="_blank" rel="noreferrer"><li class="dropdown-item">应用生成器 <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a></ul></div></span><a class="navbar-menu-item" href="/docs/">文档</a><span class="navbar-menu-item with-drop-down"><div class="dropdown"><a class="dropdown-title">资源<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="dropdown-menu"><a href="/faq/"><li class="dropdown-item">答疑</li></a><a href="/channels/"><li class="dropdown-item">联系渠道</li></a><a href="https://how-to.vertx.io/" target="_blank" rel="noreferrer"><li class="dropdown-item">操作指南 <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a><a href="https://github.com/vert-x3/vertx-eventbus-bridge-clients" target="_blank" rel="noreferrer"><li class="dropdown-item">EventBus Bridge Clients <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a></ul></div></span><a class="navbar-menu-item" href="/blog/">博客</a><a class="navbar-menu-item" href="/community/">社区</a><a class="navbar-menu-item" href="/translation/">翻译团队</a></div><div class="navbar-social"><a href="https://github.com/vert-x3/vertx-awesome" class="navbar-social-link" title="Awesome Vert.x" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="List of awesome Vert.x projects"><title>Awesome Vert.x</title><path d="M24 11.438l-6.154-5.645-.865.944 5.128 4.7H1.895l5.128-4.705-.865-.943-6.154 5.649H0v3.72c0 1.683 1.62 3.053 3.61 3.053h3.795c1.99 0 3.61-1.37 3.61-3.051v-2.446h1.97v2.446c0 1.68 1.62 3.051 3.61 3.051h3.794c1.99 0 3.61-1.37 3.61-3.051v-3.721z"></path></svg></a><a href="https://stackoverflow.com/questions/tagged/vert.x" class="navbar-social-link" title="Stack Overflow" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Stack Overflow questions related to Vert.x"><title>Stack Overflow</title><path d="M18.986 21.865v-6.404h2.134V24H1.844v-8.539h2.13v6.404h15.012zM6.111 19.731H16.85v-2.137H6.111v2.137zm.259-4.852l10.48 2.189.451-2.07-10.478-2.187-.453 2.068zm1.359-5.056l9.705 4.53.903-1.95-9.706-4.53-.902 1.936v.014zm2.715-4.785l8.217 6.855 1.359-1.62-8.216-6.853-1.35 1.617-.01.001zM15.751 0l-1.746 1.294 6.405 8.604 1.746-1.294L15.749 0h.002z"></path></svg></a><a href="https://www.youtube.com/channel/UCGN6L3tRhs92Uer3c6VxOSA" class="navbar-social-link" title="YouTube" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="YouTube channel of Vert.x"><title>YouTube</title><path d="M23.499 6.203a3.008 3.008 0 00-2.089-2.089c-1.87-.501-9.4-.501-9.4-.501s-7.509-.01-9.399.501a3.008 3.008 0 00-2.088 2.09A31.258 31.26 0 000 12.01a31.258 31.26 0 00.523 5.785 3.008 3.008 0 002.088 2.089c1.869.502 9.4.502 9.4.502s7.508 0 9.399-.502a3.008 3.008 0 002.089-2.09 31.258 31.26 0 00.5-5.784 31.258 31.26 0 00-.5-5.808zm-13.891 9.4V8.407l6.266 3.604z"></path></svg></a><a href="https://discord.gg/KzEMwP2" class="navbar-social-link" title="Discord" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Eclipse Vert.x channel on Discord"><title>Discord</title><path d="M20.222 0c1.406 0 2.54 1.137 2.607 2.475V24l-2.677-2.273-1.47-1.338-1.604-1.398.67 2.205H3.71c-1.402 0-2.54-1.065-2.54-2.476V2.48C1.17 1.142 2.31.003 3.715.003h16.5L20.222 0zm-6.118 5.683h-.03l-.202.2c2.073.6 3.076 1.537 3.076 1.537-1.336-.668-2.54-1.002-3.744-1.137-.87-.135-1.74-.064-2.475 0h-.2c-.47 0-1.47.2-2.81.735-.467.203-.735.336-.735.336s1.002-1.002 3.21-1.537l-.135-.135s-1.672-.064-3.477 1.27c0 0-1.805 3.144-1.805 7.02 0 0 1 1.74 3.743 1.806 0 0 .4-.533.805-1.002-1.54-.468-2.14-1.404-2.14-1.404s.134.066.335.2h.06c.03 0 .044.015.06.03v.006c.016.016.03.03.06.03.33.136.66.27.93.4.466.202 1.065.403 1.8.536.93.135 1.996.2 3.21 0 .6-.135 1.2-.267 1.8-.535.39-.2.87-.4 1.397-.737 0 0-.6.936-2.205 1.404.33.466.795 1 .795 1 2.744-.06 3.81-1.8 3.87-1.726 0-3.87-1.815-7.02-1.815-7.02-1.635-1.214-3.165-1.26-3.435-1.26l.056-.02zm.168 4.413c.703 0 1.27.6 1.27 1.335 0 .74-.57 1.34-1.27 1.34-.7 0-1.27-.6-1.27-1.334.002-.74.573-1.338 1.27-1.338zm-4.543 0c.7 0 1.266.6 1.266 1.335 0 .74-.57 1.34-1.27 1.34-.7 0-1.27-.6-1.27-1.334 0-.74.57-1.338 1.27-1.338z"></path></svg></a><a href="https://groups.google.com/forum/?fromgroups#!forum/vertx" class="navbar-social-link" title="Vert.x 用户组" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="A Google group for Vert.x users"><title>Vert.x 用户组</title><path d="M.92 3.332c-.776 0-1.216.67-.692 1.383l2.537 4.403v7.86c0 2.013 1.467 3.69 3.459 3.69H20.31a3.75 3.75 0 003.69-3.69V7.043a3.723 3.723 0 00-3.668-3.71zm5.786 3.71H20.1c.587 0 1.153.357 1.153.923 0 .566-.566.922-1.153.922H6.706c-.587 0-1.153-.356-1.153-.922 0-.566.566-.923 1.153-.923zm0 3.69H20.1c.587 0 1.153.356 1.153.922 0 .566-.566.922-1.153.922H6.706c-.587 0-1.153-.356-1.153-.922 0-.566.566-.922 1.153-.922zm-.021 3.71h9.705c.587 0 1.153.356 1.153.922 0 .566-.566.923-1.153.923H6.685c-.587 0-1.153-.357-1.153-.923 0-.566.566-.922 1.153-.922Z"></path></svg></a><a href="https://shang.qq.com/wpa/qunwpa?idkey=587f58cacb9557e3291b46098e0fe09427b98a1c0f866da23c04c2762bc7e2ad" class="navbar-social-link" title="Vert.x中国用户组QQ群" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Vert.x中国用户组QQ群"><title>Vert.x中国用户组QQ群</title><path d="M21.395 15.035a39.548 39.548 0 0 0-.803-2.264l-1.079-2.695c.001-.032.014-.562.014-.836C19.526 4.632 17.351 0 12 0S4.474 4.632 4.474 9.241c0 .274.013.804.014.836l-1.08 2.695a38.97 38.97 0 0 0-.802 2.264c-1.021 3.283-.69 4.643-.438 4.673.54.065 2.103-2.472 2.103-2.472 0 1.469.756 3.387 2.394 4.771-.612.188-1.363.479-1.845.835-.434.32-.379.646-.301.778.343.578 5.883.369 7.482.189 1.6.18 7.14.389 7.483-.189.078-.132.132-.458-.301-.778-.483-.356-1.233-.646-1.846-.836 1.637-1.384 2.393-3.302 2.393-4.771 0 0 1.563 2.537 2.103 2.472.251-.03.581-1.39-.438-4.673zM12.662 4.846c.039-1.052.659-1.878 1.385-1.846s1.281.912 1.242 1.964c-.039 1.051-.659 1.878-1.385 1.846s-1.282-.912-1.242-1.964zM9.954 3c.725-.033 1.345.794 1.384 1.846.04 1.052-.517 1.931-1.242 1.963-.726.033-1.346-.794-1.385-1.845C8.672 3.912 9.228 3.033 9.954 3zM7.421 8.294c.194-.43 2.147-.908 4.566-.908h.026c2.418 0 4.372.479 4.566.908a.14.14 0 0 1 .014.061c0 .031-.01.059-.026.083-.163.238-2.333 1.416-4.553 1.416h-.026c-2.221 0-4.39-1.178-4.553-1.416a.136.136 0 0 1-.014-.144zm10.422 8.622c-.22 3.676-2.403 5.987-5.774 6.021h-.137c-3.37-.033-5.554-2.345-5.773-6.021-.081-1.35.001-2.496.147-3.43.318.063.638.122.958.176v3.506s1.658.334 3.318.103v-3.225c.488.027.96.04 1.406.034h.025c1.678.021 3.714-.204 5.683-.594.146.934.227 2.08.147 3.43zM10.48 5.804c.313-.041.542-.409.508-.825-.033-.415-.314-.72-.629-.679-.313.04-.541.409-.508.824.034.417.315.72.629.68zM14.479 5.156c.078.037.221.042.289-.146.035-.095.025-.165-.009-.214-.023-.033-.133-.118-.371-.176-.904-.22-1.341.384-1.405.499-.04.072-.012.176.056.227.067.051.139.037.179-.006.58-.628 1.21-.208 1.261-.184z"></path></svg></a></div></div></div></div></header><div class="page-content"><div class="container"><div class="blog-post"><div class="blog-navbar"><h2>Blog</h2><ul><li><a href="/blog/">All posts</a></li><li><a href="/blog/category/releases/">releases</a></li><li><a href="/blog/category/guides/">guides</a></li><li><a href="/blog/category/news/">news</a></li></ul><div class="feed-icons"><a href="/feed/atom.xml"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></div></div><div class="blog-post-main"><div class="blog-post-content"><h1>What&#x27;s new in Vert.x 4.1</h1><span><p>Vert.x 4.1 comes with plenty of new ex­cit­ing fea­tures.</p><p>Here is an overview of the most im­por­tant fea­tures sup­ported in Vert.x 4.1.</p><h2 id="reactive-microsoft-sql-server-client"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#reactive-microsoft-sql-server-client"></a>Reactive Microsoft SQL Server Client</h2><p>The <a href="/docs/4.1.0/vertx-mssql-client/java/">Re­ac­tive Mi­crosoft SQL Server Client</a> joins the <a href="/docs/#databases">data­base clients</a> fam­ily!</p><p>In this first re­lease, sev­eral com­mon data types are sup­ported, as well as pre­pared state­ments and trans­ac­tions.</p><h2 id="vertx-http-proxy"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#vertx-http-proxy"></a>Vert.x HTTP Proxy</h2><p>It is very easy to write an HTTP proxy with Vert.x, yet there are a lot of things that <a href="https://www.mnot.net/blog/2011/07/11/what_proxies_must_do">prox­ies must do</a>.</p><p><a href="/docs/4.1.0/vertx-http-proxy/java/">Vert.x HTTP Proxy</a> is a new com­po­nent of the stack that aims to make it easy to write prox­ies.</p><p>You can cre­ate a proxy as fol­lows:</p><pre><code class="hljs language-java">proxyServer.requestHandler(
       HttpProxy.reverseProxy(vertx.createHttpClient())
       .origin(<span class="hljs-number">7070</span>, <span class="hljs-string">&quot;localhost&quot;</span>))
   .listen(<span class="hljs-number">8080</span>);
</code></pre><p>The proxy can also dy­nam­i­cally re­solve the ori­gin (i.e the prox­ied server):</p><pre><code class="hljs language-java">HttpProxy proxy = HttpProxy.reverseProxy(proxyClient).originSelector(
  address -&gt; resolveOrigin(address)
);
</code></pre><p><a href="/docs/4.1.0/vertx-web-proxy/java/">Vert.x Web Proxy</a> in­te­grates the proxy with Vert.x Web.</p><p>This com­po­nent is in tech pre­view and will re­ceive more fea­tures over time.</p><h2 id="rxjava-3"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#rxjava-3"></a>RxJava 3</h2><p>Vert.x has been sup­port­ing Rx­Java for many years, the <a href="/docs/4.1.0/vertx-rx/java3/">Rx­Java 3 sup­port</a> has landed in 4.1</p><p>The rx­i­fied API works like pre­vi­ous ver­sions, how­ever reg­u­lar meth­ods are ex­posed with Rx­Java types
in­stead of call­backs since Vert.x 4 async model is based on fu­tures.</p><pre><code class="hljs language-java">server.requestHandler(req -&gt; {
  HttpServerResponse resp = req.respone();
  resp.setChunked(<span class="hljs-keyword">true</span>);

  <span class="hljs-comment">// No need to subscribe to the completable</span>
  Completable c1 = resp.write(<span class="hljs-string">&quot;1&quot;</span>);

  <span class="hljs-comment">// Write result is cached, this will send</span>
  <span class="hljs-comment">// 1</span>
  c1.subscribe();
  c1.subscribe();

  <span class="hljs-comment">// The Rxified API however requires subscription to trigger the call</span>
  Completable c2 = resp.rxWrite(<span class="hljs-string">&quot;2&quot;</span>);

  <span class="hljs-comment">// Write is subscription based, this will send</span>
  <span class="hljs-comment">// 2</span>
  <span class="hljs-comment">// 2</span>
  c2.subscribe();
  c2.subscribe();
});
</code></pre><h2 id="open-telemetry-support"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#open-telemetry-support"></a>Open Telemetry support</h2><p><a href="/docs/4.1.0/vertx-opentelemetry/java/">Open Teleme­try</a> trac­ing is a new and no­tice­able trac­ing in­te­gra­tion avail­able in 4.1.</p><h2 id="service-proxy-with-futures"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#service-proxy-with-futures"></a>Service proxy with futures</h2><p>Vert.x 4 pro­vides a future-​first API. How­ever, ser­vice prox­ies can only be de­clared with call­backs.</p><p>We ad­dressed this issue in Vert.x 4.1 and you can now write ser­vice prox­ies with fu­tures. The only change you
need is to de­clare the fu­ture usage in the Code­gen mod­ule de­c­la­ra­tion.</p><h2 id="vertx-web"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#vertx-web"></a>Vertx-Web</h2><p>In this re­lease, we im­proved the log­ging han­dler to en­able cus­tom log­ging for­mats.</p><p>The OAuth2 han­dler now fol­lows the OIDC stan­dard by val­i­dat­ing the re­quested scopes are present in the OAuth2 re­sponse. A new APIKEY han­dler was added to sup­port more se­cu­rity use cases, and it is now pos­si­ble to write cus­tom authn han­dlers with­out re­quir­ing in­ter­nal classes.</p><p>The API <code>ctx.json()</code> now fol­lows the IANA con­tent type stan­dard.</p><h2 id="vertx-web-openapi"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#vertx-web-openapi"></a>Vertx-Web OpenAPI</h2><p>A lot of com­mu­nity dis­cus­sions and work has been done to im­prove the se­cu­rity han­dling of Ope­nAPI in Vert.x. We now sup­port all kinds of se­cu­rity de­scribed in Ope­nAPI 3.0, OpenId, OAuth2, API-​Key, HTTP.</p><p>The new API also al­lows for fetch­ing the se­cu­rity con­fig­u­ra­tion from the doc­u­ment it­self, rather than hav­ing it double-​configured in the doc­u­ment and in the code.</p><h2 id="vertx-auth"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#vertx-auth"></a>Vertx-Auth</h2><p>In the Vert.x auth mod­ule, sup­port for <code>EdDSA</code> was added to the JOSE/COSE code. This means that we can now use those al­go­rithms in JWT/OAuth2/OIDC/FIDO2. The sup­port re­lies only on the pro­vided JDK which means that users will need to use JDK 15 or above to be able to use those al­go­rithms.</p><p>In the JOSE code, im­prove­ments were made to cor­rectly fol­low the <code>use</code> value of a JWK and more tests were added to ver­ify that we in­terop prop­erly with to­kens gen­er­ated by other li­braries.</p><p>Fi­nally, in <code>FIDO2/Webauthn</code> we fol­low the rec­om­men­da­tion of stor­ing the at­tes­ta­tion cer­tifi­cates, which al­lows of­fline val­i­da­tion of de­vices. This is a util­ity that al­lows you to check if to­kens have been com­pro­mised and dis­able their fu­ture use at the RP.</p><h2 id="kotlin-15-support"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#kotlin-15-support"></a>Kotlin 1.5 support</h2><p>Vert.x 4.1 sup­ports Kotlin 1.5</p><h2 id="general-pool-improvements"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#general-pool-improvements"></a>General pool improvements</h2><p>Vert.x in­ter­nal pool has been im­proved to gain more flex­i­bil­ity with new fea­tures such as</p><ul><li>mul­ti­ple event loops per pool</li><li>waiter can­cel­la­tion</li><li>lock free im­ple­men­ta­tion</li><li>con­nec­tion se­lec­tion strat­egy</li></ul><p>In ad­di­tion, the in­ter­nal pool is now used by the Vert.x SQL Client and Vert.x Mail Clients.</p><h2 id="web-session-storage-with-infinispan"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#web-session-storage-with-infinispan"></a>Web Session Storage with Infinispan</h2><p>Vert.x Web <a href="/docs/4.1.0/vertx-web/java/#_session_stores">ses­sion stor­age</a> is plug­gable.
In this ver­sion, a new ses­sion store with <a href="https://infinispan.org/">In­fin­is­pan</a> in-​memory data grid is avail­able.</p><p>It is im­ple­mented on top of the In­fin­is­pan client so it can be used with ei­ther stand­alone or clus­tered Vert.x ap­pli­ca­tions.</p><p>If you want to get started, don’t miss the <a href="https://how-to.vertx.io/web-session-infinispan-howto/"><em>Web Ses­sion Stor­age with In­fin­is­pan Client</em> how-​to</a>.</p></span></div><div class="blog-post-sidebar"><div class="blog-post-author"><img class="blog-post-author-avatar" src="https://github.com/vietj.png?size=160"/><div class="blog-post-author-name">by <a href="https://github.com/vietj" target="_blank" rel="noopener noreferrer">Julien Viet</a></div></div><div class="blog-post-sidebar-pinned"><div class="label dark"><strong>置顶文章</strong></div></div><div class="blog-post-sidebar-reading-time"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg> <!-- -->4 min read</div><div class="blog-post-sidebar-share-icons"><a href="https://twitter.com/intent/tweet?text=What&#x27;s%20new%20in%20Vert.x%204.1&amp;url=https%3A%2F%2Fvertx.io%2Fblog%2Fwhats-new-in-vert-x-4-1&amp;via=vertx_project" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><title>Twitter</title><path d="M23.954 4.569c-.885.389-1.83.654-2.825.775 1.014-.611 1.794-1.574 2.163-2.723-.951.555-2.005.959-3.127 1.184-.896-.959-2.173-1.559-3.591-1.559-2.717 0-4.92 2.203-4.92 4.917 0 .39.045.765.127 1.124C7.691 8.094 4.066 6.13 1.64 3.161c-.427.722-.666 1.561-.666 2.475 0 1.71.87 3.213 2.188 4.096-.807-.026-1.566-.248-2.228-.616v.061c0 2.385 1.693 4.374 3.946 4.827-.413.111-.849.171-1.296.171-.314 0-.615-.03-.916-.086.631 1.953 2.445 3.377 4.604 3.417-1.68 1.319-3.809 2.105-6.102 2.105-.39 0-.779-.023-1.17-.067 2.189 1.394 4.768 2.209 7.557 2.209 9.054 0 13.999-7.496 13.999-13.986 0-.209 0-.42-.015-.63.961-.689 1.8-1.56 2.46-2.548l-.047-.02z"></path></svg></a><a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fvertx.io%2Fblog%2Fwhats-new-in-vert-x-4-1" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><title>LinkedIn</title><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"></path></svg></a><a href="https://www.facebook.com/sharer.php?u=https%3A%2F%2Fvertx.io%2Fblog%2Fwhats-new-in-vert-x-4-1" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><title>Facebook</title><path d="M23.9981 11.9991C23.9981 5.37216 18.626 0 11.9991 0C5.37216 0 0 5.37216 0 11.9991C0 17.9882 4.38789 22.9522 10.1242 23.8524V15.4676H7.07758V11.9991H10.1242V9.35553C10.1242 6.34826 11.9156 4.68714 14.6564 4.68714C15.9692 4.68714 17.3424 4.92149 17.3424 4.92149V7.87439H15.8294C14.3388 7.87439 13.8739 8.79933 13.8739 9.74824V11.9991H17.2018L16.6698 15.4676H13.8739V23.8524C19.6103 22.9522 23.9981 17.9882 23.9981 11.9991Z"></path></svg></a></div></div></div><div class="blog-post-next-prev"><div class="blog-post-next-prev-entry"></div><div class="blog-post-next-prev-entry"><h5>Previous post</h5><div class="blog-entry"><div class="blog-entry-meta"><div class="blog-entry-meta-left">​<a class="blog-entry-category" href="/blog/category/guides/">guides</a></div><div class="blog-entry-meta-right"><div class="label tiny">置顶</div></div></div><h3><a href="/blog/from-vert-x-3-to-vert-x-4/">Migrate from Vert.x 3 to Vert.x 4</a></h3><span class="blog-entry-authors"><ul><li class=""><img src="https://github.com/vietj.png?size=50"/><a href="https://github.com/vietj" target="_blank" rel="noopener noreferrer">Julien Viet</a></li></ul></span><p class="blog-entry-summary">We provide a clear and well-documented migration path from Vert.x 3.9 to Vert.x 4. Existing users will feel at home with the new version.</p><span class="read-more-link"><a href="/blog/from-vert-x-3-to-vert-x-4/"> 阅读更多</a></span></div></div></div><div class="blog-post-related"><h5>Related posts</h5><div class="blog-post-related-posts"><div class="blog-entry"><div class="blog-entry-meta"><div class="blog-entry-meta-left"><span class="blog-entry-date">23 January 2021</span>​<a class="blog-entry-category" href="/blog/category/guides/">guides</a></div><div class="blog-entry-meta-right"></div></div><h3><a href="/blog/eclipse-vert-x-CSRF-concerns/">Things to keep in mind concerning CSRF attacks</a></h3><span class="blog-entry-authors"><ul><li class=""><img src="https://github.com/xhlika.png?size=50"/><a href="https://github.com/xhlika" target="_blank" rel="noopener noreferrer">Xhelal Likaj</a></li></ul></span><p class="blog-entry-summary">Eclipse Vert.x like most frameworks provides an anti-CSRF defense. However, no framework can prevent all attack vectors that exist in the web. Therefore, developers need to be aware of some dangers and common attack vectors concerning CSRF defenses.</p><span class="read-more-link"><a href="/blog/eclipse-vert-x-CSRF-concerns/"> 阅读更多</a></span></div><div class="blog-entry"><div class="blog-entry-meta"><div class="blog-entry-meta-left"><span class="blog-entry-date">12 May 2021</span>​<a class="blog-entry-category" href="/blog/category/releases/">releases</a></div><div class="blog-entry-meta-right"></div></div><h3><a href="/blog/eclipse-vert-x-4-1-Beta1-released/">Eclipse Vert.x 4.1.0.Beta1 released!</a></h3><span class="blog-entry-authors"><ul><li class=""><img src="https://github.com/vietj.png?size=50"/><a href="https://github.com/vietj" target="_blank" rel="noopener noreferrer">Julien Viet</a></li></ul></span><p class="blog-entry-summary">The first beta of the upcoming Vert.x 4.1 has just been released. We consider it feature complete and invite the community to test it.</p><span class="read-more-link"><a href="/blog/eclipse-vert-x-4-1-Beta1-released/"> 阅读更多</a></span></div><div class="blog-entry"><div class="blog-entry-meta"><div class="blog-entry-meta-left"><span class="blog-entry-date">25 January 2017</span>​<a class="blog-entry-category" href="/blog/category/guides/">guides</a></div><div class="blog-entry-meta-right"></div></div><h3><a href="/blog/building-services-and-apis-with-amqp-1-0/">Building services and APIs with AMQP 1.0</a></h3><span class="blog-entry-authors"><ul><li class=""><img src="https://github.com/scholzj.png?size=50"/><a href="https://github.com/scholzj" target="_blank" rel="noopener noreferrer">Jakub Scholz</a></li></ul></span><p class="blog-entry-summary">Microservices and APIs are everywhere. Everyone talks about them, presentation slides are full of them ... some people are actually even building them.</p><span class="read-more-link"><a href="/blog/building-services-and-apis-with-amqp-1-0/"> 阅读更多</a></span></div></div></div></div></div></div><footer><div class="container"><div class="footer-nav-section"><div class="footer-nav-list footer-logo"><a href="/"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAxMjMyLjYgMzE1LjIiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxzdHlsZT4uc3Qwe2ZpbGw6Izc4MmE5MX08L3N0eWxlPjxwYXRoIGQ9Ik0xMjAuOSAyMTQuMkwxOTAuNSAwaDUyLjNsLTk4LjUgMjczLjhIOTguMkwwIDBoNTIuMWw2OC44IDIxNC4yem0yOTEuMi02Mi42SDI5OS42djg0LjJINDMxdjM4SDI1MlYwaDE3Ny43djM4LjRIMjk5LjZWMTE0aDExMi41djM3LjZ6bTgzLjctMTEzLjJINTQ2YzE2LjUuMyAyOSA0LjQgMzcuMyAxMi40IDguMyA4IDEyLjUgMTkuNCAxMi41IDM0IDAgMTQtNC41IDI1LjEtMTMuNSAzMy4yLTkgOC4xLTIxLjYgMTIuMS0zNy42IDEyLjFoLTI3LjF2MjQuMmw4Ni4xIDExOS41aDUxdi0yLjRsLTc3LjItMTA2LjdjMjQuOS01LjUgNDMuMy0yMS43IDUyLjYtMzUuOSA4LjItMTIuNiAxMy4zLTI3LjcgMTMuMy00NiAwLTI2LjgtOC42LTQ3LjQtMjUuOC02MS41QzYwMC41IDcuMSA1NzYuMSAwIDU0NC41IDBoLTk2LjN2MjczLjhoNDcuNiIvPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDUyLjMgMTU3LjdsLTQxLjUgNjIuNyAyOS43IDUzLjRoODUuMXoiLz48Y2lyY2xlIGNsYXNzPSJzdDAiIGN4PSI4MjcuOSIgY3k9IjI3NC43IiByPSI0MC41Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTEwMzcgMGwtNDcuNiA3NC4yTDk0OSAwaC04NGw4NS4zIDEzNS44LTY3LjEgMTA1LjdjNS43IDkuNSA5LjEgMjAuNSA5LjIgMzIuNGg1MC4xTDExMjEuMyAwSDEwMzd6Ii8+PHBhdGggZD0iTTc2My41IDI3My44Yy4xLTkuOSAyLjUtMTkuMiA2LjYtMjcuNVYzOC40aDg1LjRWMEg2MzguMnYzOC40aDg0LjZ2MjM1LjRoNDAuN3ptNDE0LTI2Ni45aC0xNS4zdjQyLjJoLTguNVY2LjloLTE1LjJWMGgzOXY2Ljl6TTExOTMgMGwxNC4yIDM3LjdMMTIyMS4zIDBoMTF2NDkuMWgtOC41VjMyLjlsLjgtMjEuNy0xNC41IDM3LjloLTYuMWwtMTQuNS0zNy44LjggMjEuNnYxNi4yaC04LjVWMGgxMS4yeiIvPjwvc3ZnPg==" alt="Vert.x Logo"/></a></div><div class="footer-nav-list"><h5>Eclipse Vert.x</h5><ul class=""><li><a class="navbar-menu-item" href="/docs/">文档</a></li><li><a href="/download/">下载</a></li><li><a href="/blog/">博客</a></li><li><a href="/community/">社区</a></li><li><a href="/translation/">翻译团队</a></li><li><a href="https://github.com/eclipse-vertx/vert.x">GitHub</a></li><li><a href="https://github.com/vertx-china/vertx-web-site">翻译GitHub</a></li></ul></div><div class="footer-nav-list"><h5>资源</h5><ul class=""><li><a href="/faq/">答疑</a></li><li><a href="/channels/">联系渠道</a></li><li><a href="https://how-to.vertx.io/">操作指南</a></li><li><a href="https://start.vertx.io/">应用生成器</a></li></ul></div><div class="footer-nav-list"><h5>Eclipse</h5><ul class=""><li><a href="https://www.eclipse.org/">Eclipse 基金会</a></li><li><a href="https://www.eclipse.org/legal/privacy.php">隐私政策</a></li><li><a href="https://www.eclipse.org/legal/termsofuse.php">使用条款</a></li><li><a href="https://www.eclipse.org/legal/copyright.php">版权代理</a></li><li><a href="https://www.eclipse.org/legal/">法律资源</a></li></ul></div></div><div class="footer-copyright"><div class="footer-copyright-remarks">© <!-- -->2021<!-- --> Eclipse Vert.x™<br/>Eclipse Vert.x™ 是开源的，并在<a href="https://creativecommons.org/licenses/by-sa/3.0/" target="_blank" rel="noopener noreferrer">Eclipse Public License 2.0</a>和<a href="https://www.apache.org/licenses/LICENSE-2.0.html" target="_blank" rel="noopener noreferrer">Apache License 2.0</a>协议下获得了双重许可。<br class="footer-copyright-break"/>网站由 <a href="https://michelkraemer.com" target="_blank" rel="noopener noreferrer">Michel Krämer</a> 设计。</div><div class="footer-copyright-eclipse-logo"><a href="https://www.eclipse.org/" target="_blank" rel="noopener noreferrer"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAyODEuMyA5MS4xIiB4bWw6c3BhY2U9InByZXNlcnZlIj48c3R5bGU+LnN0MHtmaWxsOiNmNzk0MjJ9LnN0MXtmaWxsOiMzZDNjM2J9PC9zdHlsZT48ZyBpZD0iTGF5ZXJfMV8xXyI+PHBhdGggY2xhc3M9InN0MCIgZD0iTTI2NS43IDg0TDI1NyA3M2gtMi43djE3LjdoMy4zdi0xMmw5LjMgMTJoMi4xVjczaC0zLjN2MTF6bS0zMi40LTguM2M0LjIgMCA1LjggMy4zIDUuOCA2LjNzLTEuNiA2LTUuOCA2LTUuNy0zLjEtNS44LTYgMS43LTYuMyA1LjgtNi4zem0wLTNjLTYuMSAwLTkuMSA0LjctOS4xIDkuMyAwIDQuNyAyLjkgOS4xIDkuMSA5LjFzOS00LjYgOS4xLTkuMi0zLTkuMi05LjEtOS4yem0tMjEuMiAxOFY3M2gtMy4zdjE3LjdoMy4zem0tMjMuNiAwaDMuM1Y3Nmg1LjZ2LTNoLTE0LjZ2M2g1LjZsLjEgMTQuN3ptLTE4LjktNi41SDE2M2wzLjMtNy42IDMuMyA3LjZ6bTIuOCA2LjVoMy42TDE2OC4yIDczaC0zLjZsLTggMTcuN2gzLjZsMS41LTMuM2g5LjNsMS40IDMuM3ptLTM4LTE0LjZoMy42YzMuOSAwIDUuNSAyLjggNS41IDUuNS4xIDIuOC0xLjUgNS44LTUuNSA1LjhoLTMuNlY3Ni4xem0zLjctMy4xaC02Ljl2MTcuN2g2LjljNi4yIDAgOC45LTQuNSA4LjktOXMtMi44LTguNy04LjktOC43em0tMjIuNCAxMUwxMDcgNzNoLTIuN3YxNy43aDMuM3YtMTJsOS4zIDEyaDIuMVY3M2gtMy4zdjExek04OC4yIDczdjEwLjJjMCAzLTEuNiA0LjktNC4zIDQuOXMtNC42LTEuNy00LjYtNC45VjczSDc2djEwLjFjMCA1LjMgMy42IDcuOSA3LjkgNy45IDQuNCAwIDcuNy0yLjcgNy43LTcuOVY3M2gtMy40em0tMzMgMi43YzQuMiAwIDUuOCAzLjMgNS44IDYuM3MtMS42IDYtNS44IDYtNS43LTMuMS01LjgtNiAxLjctNi4zIDUuOC02LjN6bTAtM2MtNi4xIDAtOS4xIDQuNy05LjEgOS4zczIuOSA5LjEgOS4xIDkuMSA5LTQuNiA5LjEtOS4yLTMtOS4yLTkuMS05LjJ6bS0yOS43IDE4di02LjVoOC45di0zLjFoLTguOXYtNC44aDkuNFY3M0gyMi4ydjE3LjZoMy4zeiIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yNjkuNCA1NC40aC0yMi4ydi04LjloMjEuNHYtNi45aC0yMS40di05LjFoMjIuMnYtNy4yaC0yOS42djM5LjVoMjkuNnYtNy40em0tNDAtMjUuNmMtMy02LjEtOS40LTcuOC0xNS41LTcuOC03LjMgMC0xNS4zIDMuNC0xNS4zIDExLjUgMCA4LjkgNy40IDExIDE1LjUgMTIgNS4yLjYgOS4xIDIuMSA5LjEgNS44IDAgNC4zLTQuNCA1LjktOS4xIDUuOXMtOS40LTEuOS0xMS4xLTYuM2wtNi4yIDMuMmMyLjkgNy4yIDkuMSA5LjcgMTcuMiA5LjcgOC44IDAgMTYuNi0zLjggMTYuNi0xMi42IDAtOS40LTcuNy0xMS42LTE1LjktMTIuNi00LjctLjYtOC44LTEuNS04LjgtNSAwLTIuOSAyLjYtNS4yIDguMi01LjIgNC4zIDAgOCAyLjIgOS40IDQuNGw1LjktM3pNMTc2IDIyLjJjLTYuMi0uMS0xMi40IDAtMTguNiAwdjM5LjVoNy40VjUwLjFIMTc2YzE5LjQgMCAxOS40LTI3LjkgMC0yNy45em0tMTEuMSA3LjFIMTc2YzkuNSAwIDkuNSAxNCAwIDE0aC0xMS4ybC4xLTE0em0tMTggMzIuNVYyMi4yaC03LjR2MzkuNWw3LjQuMXptLTQ0LTM5LjZ2MzkuNWgyNy43di02LjloLTIwLjNWMjIuMmgtNy40ek05MC43IDUxLjdjLTIuNyAyLjUtNi4yIDQtOS45IDQtOS44IDAtMTMuNS02LjgtMTMuNi0xMy40czQuMS0xMy43IDEzLjYtMTMuN2MzLjUtLjEgNyAxLjMgOS41IDMuN2w1LTQuOGMtMy44LTMuOS05LjEtNi0xNC41LTYtMTQuMyAwLTIxIDEwLjUtMjAuOSAyMC44czYuMyAyMC4zIDIwLjkgMjAuM2M1LjYuMSAxMS0yIDE1LTUuOWwtNS4xLTV6bS0zOSAyLjdIMjkuNXYtOC45aDIxLjR2LTYuOUgyOS41di05LjFoMjIuMnYtNy4ySDIyLjJ2MzkuNWgyOS42bC0uMS03LjR6Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTkuOCAxOC4yQzE4LjggNC4xIDM2LjktLjggNTIuMSA2bC0xLS43QzM1LjctNC42IDE1LjItLjEgNS4zIDE1LjNzLTUuNCAzNS45IDEwIDQ1LjhsMS4xLjZDMy44IDUwLjguOCAzMi4zIDkuOCAxOC4yeiIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yNzIuMiAyNi4xYzAtMi41IDIuMS00LjYgNC42LTQuNiAyLjUgMCA0LjYgMi4xIDQuNiA0LjYgMCAyLjUtMi4xIDQuNi00LjYgNC42LTIuNiAwLTQuNi0yLjEtNC42LTQuNnptOC42IDBjMC0yLjItMS44LTQuMS00LTQuMXMtNC4xIDEuOC00LjEgNC4xYzAgMi4yIDEuNyA0IDMuOSA0LjFoLjFjMi4zIDAgNC4xLTEuOCA0LjEtNC4xem0tNi0yLjVoMi4zYzEuMSAwIDEuOS41IDEuOSAxLjYgMCAuNy0uNCAxLjMtMS4xIDEuNWwxLjIgMS43aC0xLjRsLTEtMS41aC0uN3YxLjVoLTEuMWwtLjEtNC44em0yLjIgMi4zYy41IDAgLjgtLjMuOC0uN3MtLjMtLjctLjgtLjdoLTF2MS4zbDEgLjF6Ii8+PC9nPjwvc3ZnPg==" alt="Eclipse foundation Logo"/></a></div></div></div></footer></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"categories":["releases","guides","news"],"post":{"meta":{"title":"What's new in Vert.x 4.1","category":"releases","authors":[{"name":"Julien Viet","github_id":"vietj"}],"summary":"See an overview of all new and exciting features in Vert.x 4.1, including Vert.x HTTP proxy, RxJava 3, Open Telemetry, and more.","pinned":true},"date":"2021-05-21","slug":"whats-new-in-vert-x-4-1","readingTime":{"text":"4 min read","minutes":3.615,"time":216900,"words":723},"content":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Vert.x 4.1 comes with plenty of new ex\\xADcit\\xADing fea\\xADtures.\"), mdx(\"p\", null, \"Here is an overview of the most im\\xADpor\\xADtant fea\\xADtures sup\\xADported in Vert.x 4.1.\"), mdx(\"h2\", {\n    \"id\": \"reactive-microsoft-sql-server-client\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#reactive-microsoft-sql-server-client\"\n  })), \"Reactive Microsoft SQL Server Client\"), mdx(\"p\", null, \"The \", mdx(Link, {\n    href: \"/docs/4.1.0/vertx-mssql-client/java/\",\n    passHref: true,\n    mdxType: \"Link\"\n  }, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"\"\n  }), \"Re\\xADac\\xADtive Mi\\xADcrosoft SQL Server Client\")), \" joins the \", mdx(Link, {\n    href: \"/docs/#databases\",\n    passHref: true,\n    mdxType: \"Link\"\n  }, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"\"\n  }), \"data\\xADbase clients\")), \" fam\\xADily!\"), mdx(\"p\", null, \"In this first re\\xADlease, sev\\xADeral com\\xADmon data types are sup\\xADported, as well as pre\\xADpared state\\xADments and trans\\xADac\\xADtions.\"), mdx(\"h2\", {\n    \"id\": \"vertx-http-proxy\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#vertx-http-proxy\"\n  })), \"Vert.x HTTP Proxy\"), mdx(\"p\", null, \"It is very easy to write an HTTP proxy with Vert.x, yet there are a lot of things that \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.mnot.net/blog/2011/07/11/what_proxies_must_do\"\n  }), \"prox\\xADies must do\"), \".\"), mdx(\"p\", null, mdx(Link, {\n    href: \"/docs/4.1.0/vertx-http-proxy/java/\",\n    passHref: true,\n    mdxType: \"Link\"\n  }, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"\"\n  }), \"Vert.x HTTP Proxy\")), \" is a new com\\xADpo\\xADnent of the stack that aims to make it easy to write prox\\xADies.\"), mdx(\"p\", null, \"You can cre\\xADate a proxy as fol\\xADlows:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \"proxyServer.requestHandler(\\n       HttpProxy.reverseProxy(vertx.createHttpClient())\\n       .origin(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"7070\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"localhost\\\"\"), \"))\\n   .listen(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"8080\"), \");\\n\")), mdx(\"p\", null, \"The proxy can also dy\\xADnam\\xADi\\xADcally re\\xADsolve the ori\\xADgin (i.e the prox\\xADied server):\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \"HttpProxy proxy = HttpProxy.reverseProxy(proxyClient).originSelector(\\n  address -\u003e resolveOrigin(address)\\n);\\n\")), mdx(\"p\", null, mdx(Link, {\n    href: \"/docs/4.1.0/vertx-web-proxy/java/\",\n    passHref: true,\n    mdxType: \"Link\"\n  }, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"\"\n  }), \"Vert.x Web Proxy\")), \" in\\xADte\\xADgrates the proxy with Vert.x Web.\"), mdx(\"p\", null, \"This com\\xADpo\\xADnent is in tech pre\\xADview and will re\\xADceive more fea\\xADtures over time.\"), mdx(\"h2\", {\n    \"id\": \"rxjava-3\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#rxjava-3\"\n  })), \"RxJava 3\"), mdx(\"p\", null, \"Vert.x has been sup\\xADport\\xADing Rx\\xADJava for many years, the \", mdx(Link, {\n    href: \"/docs/4.1.0/vertx-rx/java3/\",\n    passHref: true,\n    mdxType: \"Link\"\n  }, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"\"\n  }), \"Rx\\xADJava 3 sup\\xADport\")), \" has landed in 4.1\"), mdx(\"p\", null, \"The rx\\xADi\\xADfied API works like pre\\xADvi\\xADous ver\\xADsions, how\\xADever reg\\xADu\\xADlar meth\\xADods are ex\\xADposed with Rx\\xADJava types\\nin\\xADstead of call\\xADbacks since Vert.x 4 async model is based on fu\\xADtures.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \"server.requestHandler(req -\u003e {\\n  HttpServerResponse resp = req.respone();\\n  resp.setChunked(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"true\"), \");\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// No need to subscribe to the completable\"), \"\\n  Completable c1 = resp.write(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"1\\\"\"), \");\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Write result is cached, this will send\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// 1\"), \"\\n  c1.subscribe();\\n  c1.subscribe();\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// The Rxified API however requires subscription to trigger the call\"), \"\\n  Completable c2 = resp.rxWrite(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"2\\\"\"), \");\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Write is subscription based, this will send\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// 2\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// 2\"), \"\\n  c2.subscribe();\\n  c2.subscribe();\\n});\\n\")), mdx(\"h2\", {\n    \"id\": \"open-telemetry-support\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#open-telemetry-support\"\n  })), \"Open Telemetry support\"), mdx(\"p\", null, mdx(Link, {\n    href: \"/docs/4.1.0/vertx-opentelemetry/java/\",\n    passHref: true,\n    mdxType: \"Link\"\n  }, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"\"\n  }), \"Open Teleme\\xADtry\")), \" trac\\xADing is a new and no\\xADtice\\xADable trac\\xADing in\\xADte\\xADgra\\xADtion avail\\xADable in 4.1.\"), mdx(\"h2\", {\n    \"id\": \"service-proxy-with-futures\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#service-proxy-with-futures\"\n  })), \"Service proxy with futures\"), mdx(\"p\", null, \"Vert.x 4 pro\\xADvides a future-\\u200Bfirst API. How\\xADever, ser\\xADvice prox\\xADies can only be de\\xADclared with call\\xADbacks.\"), mdx(\"p\", null, \"We ad\\xADdressed this issue in Vert.x 4.1 and you can now write ser\\xADvice prox\\xADies with fu\\xADtures. The only change you\\nneed is to de\\xADclare the fu\\xADture usage in the Code\\xADgen mod\\xADule de\\xADc\\xADla\\xADra\\xADtion.\"), mdx(\"h2\", {\n    \"id\": \"vertx-web\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#vertx-web\"\n  })), \"Vertx-Web\"), mdx(\"p\", null, \"In this re\\xADlease, we im\\xADproved the log\\xADging han\\xADdler to en\\xADable cus\\xADtom log\\xADging for\\xADmats.\"), mdx(\"p\", null, \"The OAuth2 han\\xADdler now fol\\xADlows the OIDC stan\\xADdard by val\\xADi\\xADdat\\xADing the re\\xADquested scopes are present in the OAuth2 re\\xADsponse. A new APIKEY han\\xADdler was added to sup\\xADport more se\\xADcu\\xADrity use cases, and it is now pos\\xADsi\\xADble to write cus\\xADtom authn han\\xADdlers with\\xADout re\\xADquir\\xADing in\\xADter\\xADnal classes.\"), mdx(\"p\", null, \"The API \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ctx.json()\"), \" now fol\\xADlows the IANA con\\xADtent type stan\\xADdard.\"), mdx(\"h2\", {\n    \"id\": \"vertx-web-openapi\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#vertx-web-openapi\"\n  })), \"Vertx-Web OpenAPI\"), mdx(\"p\", null, \"A lot of com\\xADmu\\xADnity dis\\xADcus\\xADsions and work has been done to im\\xADprove the se\\xADcu\\xADrity han\\xADdling of Ope\\xADnAPI in Vert.x. We now sup\\xADport all kinds of se\\xADcu\\xADrity de\\xADscribed in Ope\\xADnAPI 3.0, OpenId, OAuth2, API-\\u200BKey, HTTP.\"), mdx(\"p\", null, \"The new API also al\\xADlows for fetch\\xADing the se\\xADcu\\xADrity con\\xADfig\\xADu\\xADra\\xADtion from the doc\\xADu\\xADment it\\xADself, rather than hav\\xADing it double-\\u200Bconfigured in the doc\\xADu\\xADment and in the code.\"), mdx(\"h2\", {\n    \"id\": \"vertx-auth\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#vertx-auth\"\n  })), \"Vertx-Auth\"), mdx(\"p\", null, \"In the Vert.x auth mod\\xADule, sup\\xADport for \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"EdDSA\"), \" was added to the JOSE/COSE code. This means that we can now use those al\\xADgo\\xADrithms in JWT/OAuth2/OIDC/FIDO2. The sup\\xADport re\\xADlies only on the pro\\xADvided JDK which means that users will need to use JDK 15 or above to be able to use those al\\xADgo\\xADrithms.\"), mdx(\"p\", null, \"In the JOSE code, im\\xADprove\\xADments were made to cor\\xADrectly fol\\xADlow the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"use\"), \" value of a JWK and more tests were added to ver\\xADify that we in\\xADterop prop\\xADerly with to\\xADkens gen\\xADer\\xADated by other li\\xADbraries.\"), mdx(\"p\", null, \"Fi\\xADnally, in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"FIDO2/Webauthn\"), \" we fol\\xADlow the rec\\xADom\\xADmen\\xADda\\xADtion of stor\\xADing the at\\xADtes\\xADta\\xADtion cer\\xADtifi\\xADcates, which al\\xADlows of\\xADfline val\\xADi\\xADda\\xADtion of de\\xADvices. This is a util\\xADity that al\\xADlows you to check if to\\xADkens have been com\\xADpro\\xADmised and dis\\xADable their fu\\xADture use at the RP.\"), mdx(\"h2\", {\n    \"id\": \"kotlin-15-support\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#kotlin-15-support\"\n  })), \"Kotlin 1.5 support\"), mdx(\"p\", null, \"Vert.x 4.1 sup\\xADports Kotlin 1.5\"), mdx(\"h2\", {\n    \"id\": \"general-pool-improvements\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#general-pool-improvements\"\n  })), \"General pool improvements\"), mdx(\"p\", null, \"Vert.x in\\xADter\\xADnal pool has been im\\xADproved to gain more flex\\xADi\\xADbil\\xADity with new fea\\xADtures such as\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"mul\\xADti\\xADple event loops per pool\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"waiter can\\xADcel\\xADla\\xADtion\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"lock free im\\xADple\\xADmen\\xADta\\xADtion\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"con\\xADnec\\xADtion se\\xADlec\\xADtion strat\\xADegy\")), mdx(\"p\", null, \"In ad\\xADdi\\xADtion, the in\\xADter\\xADnal pool is now used by the Vert.x SQL Client and Vert.x Mail Clients.\"), mdx(\"h2\", {\n    \"id\": \"web-session-storage-with-infinispan\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#web-session-storage-with-infinispan\"\n  })), \"Web Session Storage with Infinispan\"), mdx(\"p\", null, \"Vert.x Web \", mdx(Link, {\n    href: \"/docs/4.1.0/vertx-web/java/#_session_stores\",\n    passHref: true,\n    mdxType: \"Link\"\n  }, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"\"\n  }), \"ses\\xADsion stor\\xADage\")), \" is plug\\xADgable.\\nIn this ver\\xADsion, a new ses\\xADsion store with \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://infinispan.org/\"\n  }), \"In\\xADfin\\xADis\\xADpan\"), \" in-\\u200Bmemory data grid is avail\\xADable.\"), mdx(\"p\", null, \"It is im\\xADple\\xADmented on top of the In\\xADfin\\xADis\\xADpan client so it can be used with ei\\xADther stand\\xADalone or clus\\xADtered Vert.x ap\\xADpli\\xADca\\xADtions.\"), mdx(\"p\", null, \"If you want to get started, don\\u2019t miss the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://how-to.vertx.io/web-session-infinispan-howto/\"\n  }), mdx(\"em\", {\n    parentName: \"a\"\n  }, \"Web Ses\\xADsion Stor\\xADage with In\\xADfin\\xADis\\xADpan Client\"), \" how-\\u200Bto\"), \".\"));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"\u003cp\u003eVert.x 4.1 comes with plenty of new ex­cit­ing fea­tures.\u003c/p\u003e\u003cp\u003eHere is an overview of the most im­por­tant fea­tures sup­ported in Vert.x 4.1.\u003c/p\u003e\u003ch2 id=\"reactive-microsoft-sql-server-client\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#reactive-microsoft-sql-server-client\"\u003e\u003c/a\u003eReactive Microsoft SQL Server Client\u003c/h2\u003e\u003cp\u003eThe \u003ca href=\"/docs/4.1.0/vertx-mssql-client/java/\"\u003eRe­ac­tive Mi­crosoft SQL Server Client\u003c/a\u003e joins the \u003ca href=\"/docs/#databases\"\u003edata­base clients\u003c/a\u003e fam­ily!\u003c/p\u003e\u003cp\u003eIn this first re­lease, sev­eral com­mon data types are sup­ported, as well as pre­pared state­ments and trans­ac­tions.\u003c/p\u003e\u003ch2 id=\"vertx-http-proxy\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#vertx-http-proxy\"\u003e\u003c/a\u003eVert.x HTTP Proxy\u003c/h2\u003e\u003cp\u003eIt is very easy to write an HTTP proxy with Vert.x, yet there are a lot of things that \u003ca href=\"https://www.mnot.net/blog/2011/07/11/what_proxies_must_do\"\u003eprox­ies must do\u003c/a\u003e.\u003c/p\u003e\u003cp\u003e\u003ca href=\"/docs/4.1.0/vertx-http-proxy/java/\"\u003eVert.x HTTP Proxy\u003c/a\u003e is a new com­po­nent of the stack that aims to make it easy to write prox­ies.\u003c/p\u003e\u003cp\u003eYou can cre­ate a proxy as fol­lows:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003eproxyServer.requestHandler(\n       HttpProxy.reverseProxy(vertx.createHttpClient())\n       .origin(\u003cspan class=\"hljs-number\"\u003e7070\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;localhost\u0026quot;\u003c/span\u003e))\n   .listen(\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e);\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThe proxy can also dy­nam­i­cally re­solve the ori­gin (i.e the prox­ied server):\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003eHttpProxy proxy = HttpProxy.reverseProxy(proxyClient).originSelector(\n  address -\u0026gt; resolveOrigin(address)\n);\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003ca href=\"/docs/4.1.0/vertx-web-proxy/java/\"\u003eVert.x Web Proxy\u003c/a\u003e in­te­grates the proxy with Vert.x Web.\u003c/p\u003e\u003cp\u003eThis com­po­nent is in tech pre­view and will re­ceive more fea­tures over time.\u003c/p\u003e\u003ch2 id=\"rxjava-3\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#rxjava-3\"\u003e\u003c/a\u003eRxJava 3\u003c/h2\u003e\u003cp\u003eVert.x has been sup­port­ing Rx­Java for many years, the \u003ca href=\"/docs/4.1.0/vertx-rx/java3/\"\u003eRx­Java 3 sup­port\u003c/a\u003e has landed in 4.1\u003c/p\u003e\u003cp\u003eThe rx­i­fied API works like pre­vi­ous ver­sions, how­ever reg­u­lar meth­ods are ex­posed with Rx­Java types\nin­stead of call­backs since Vert.x 4 async model is based on fu­tures.\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003eserver.requestHandler(req -\u0026gt; {\n  HttpServerResponse resp = req.respone();\n  resp.setChunked(\u003cspan class=\"hljs-keyword\"\u003etrue\u003c/span\u003e);\n\n  \u003cspan class=\"hljs-comment\"\u003e// No need to subscribe to the completable\u003c/span\u003e\n  Completable c1 = resp.write(\u003cspan class=\"hljs-string\"\u003e\u0026quot;1\u0026quot;\u003c/span\u003e);\n\n  \u003cspan class=\"hljs-comment\"\u003e// Write result is cached, this will send\u003c/span\u003e\n  \u003cspan class=\"hljs-comment\"\u003e// 1\u003c/span\u003e\n  c1.subscribe();\n  c1.subscribe();\n\n  \u003cspan class=\"hljs-comment\"\u003e// The Rxified API however requires subscription to trigger the call\u003c/span\u003e\n  Completable c2 = resp.rxWrite(\u003cspan class=\"hljs-string\"\u003e\u0026quot;2\u0026quot;\u003c/span\u003e);\n\n  \u003cspan class=\"hljs-comment\"\u003e// Write is subscription based, this will send\u003c/span\u003e\n  \u003cspan class=\"hljs-comment\"\u003e// 2\u003c/span\u003e\n  \u003cspan class=\"hljs-comment\"\u003e// 2\u003c/span\u003e\n  c2.subscribe();\n  c2.subscribe();\n});\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"open-telemetry-support\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#open-telemetry-support\"\u003e\u003c/a\u003eOpen Telemetry support\u003c/h2\u003e\u003cp\u003e\u003ca href=\"/docs/4.1.0/vertx-opentelemetry/java/\"\u003eOpen Teleme­try\u003c/a\u003e trac­ing is a new and no­tice­able trac­ing in­te­gra­tion avail­able in 4.1.\u003c/p\u003e\u003ch2 id=\"service-proxy-with-futures\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#service-proxy-with-futures\"\u003e\u003c/a\u003eService proxy with futures\u003c/h2\u003e\u003cp\u003eVert.x 4 pro­vides a future-​first API. How­ever, ser­vice prox­ies can only be de­clared with call­backs.\u003c/p\u003e\u003cp\u003eWe ad­dressed this issue in Vert.x 4.1 and you can now write ser­vice prox­ies with fu­tures. The only change you\nneed is to de­clare the fu­ture usage in the Code­gen mod­ule de­c­la­ra­tion.\u003c/p\u003e\u003ch2 id=\"vertx-web\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#vertx-web\"\u003e\u003c/a\u003eVertx-Web\u003c/h2\u003e\u003cp\u003eIn this re­lease, we im­proved the log­ging han­dler to en­able cus­tom log­ging for­mats.\u003c/p\u003e\u003cp\u003eThe OAuth2 han­dler now fol­lows the OIDC stan­dard by val­i­dat­ing the re­quested scopes are present in the OAuth2 re­sponse. A new APIKEY han­dler was added to sup­port more se­cu­rity use cases, and it is now pos­si­ble to write cus­tom authn han­dlers with­out re­quir­ing in­ter­nal classes.\u003c/p\u003e\u003cp\u003eThe API \u003ccode\u003ectx.json()\u003c/code\u003e now fol­lows the IANA con­tent type stan­dard.\u003c/p\u003e\u003ch2 id=\"vertx-web-openapi\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#vertx-web-openapi\"\u003e\u003c/a\u003eVertx-Web OpenAPI\u003c/h2\u003e\u003cp\u003eA lot of com­mu­nity dis­cus­sions and work has been done to im­prove the se­cu­rity han­dling of Ope­nAPI in Vert.x. We now sup­port all kinds of se­cu­rity de­scribed in Ope­nAPI 3.0, OpenId, OAuth2, API-​Key, HTTP.\u003c/p\u003e\u003cp\u003eThe new API also al­lows for fetch­ing the se­cu­rity con­fig­u­ra­tion from the doc­u­ment it­self, rather than hav­ing it double-​configured in the doc­u­ment and in the code.\u003c/p\u003e\u003ch2 id=\"vertx-auth\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#vertx-auth\"\u003e\u003c/a\u003eVertx-Auth\u003c/h2\u003e\u003cp\u003eIn the Vert.x auth mod­ule, sup­port for \u003ccode\u003eEdDSA\u003c/code\u003e was added to the JOSE/COSE code. This means that we can now use those al­go­rithms in JWT/OAuth2/OIDC/FIDO2. The sup­port re­lies only on the pro­vided JDK which means that users will need to use JDK 15 or above to be able to use those al­go­rithms.\u003c/p\u003e\u003cp\u003eIn the JOSE code, im­prove­ments were made to cor­rectly fol­low the \u003ccode\u003euse\u003c/code\u003e value of a JWK and more tests were added to ver­ify that we in­terop prop­erly with to­kens gen­er­ated by other li­braries.\u003c/p\u003e\u003cp\u003eFi­nally, in \u003ccode\u003eFIDO2/Webauthn\u003c/code\u003e we fol­low the rec­om­men­da­tion of stor­ing the at­tes­ta­tion cer­tifi­cates, which al­lows of­fline val­i­da­tion of de­vices. This is a util­ity that al­lows you to check if to­kens have been com­pro­mised and dis­able their fu­ture use at the RP.\u003c/p\u003e\u003ch2 id=\"kotlin-15-support\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#kotlin-15-support\"\u003e\u003c/a\u003eKotlin 1.5 support\u003c/h2\u003e\u003cp\u003eVert.x 4.1 sup­ports Kotlin 1.5\u003c/p\u003e\u003ch2 id=\"general-pool-improvements\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#general-pool-improvements\"\u003e\u003c/a\u003eGeneral pool improvements\u003c/h2\u003e\u003cp\u003eVert.x in­ter­nal pool has been im­proved to gain more flex­i­bil­ity with new fea­tures such as\u003c/p\u003e\u003cul\u003e\u003cli\u003emul­ti­ple event loops per pool\u003c/li\u003e\u003cli\u003ewaiter can­cel­la­tion\u003c/li\u003e\u003cli\u003elock free im­ple­men­ta­tion\u003c/li\u003e\u003cli\u003econ­nec­tion se­lec­tion strat­egy\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eIn ad­di­tion, the in­ter­nal pool is now used by the Vert.x SQL Client and Vert.x Mail Clients.\u003c/p\u003e\u003ch2 id=\"web-session-storage-with-infinispan\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#web-session-storage-with-infinispan\"\u003e\u003c/a\u003eWeb Session Storage with Infinispan\u003c/h2\u003e\u003cp\u003eVert.x Web \u003ca href=\"/docs/4.1.0/vertx-web/java/#_session_stores\"\u003eses­sion stor­age\u003c/a\u003e is plug­gable.\nIn this ver­sion, a new ses­sion store with \u003ca href=\"https://infinispan.org/\"\u003eIn­fin­is­pan\u003c/a\u003e in-​memory data grid is avail­able.\u003c/p\u003e\u003cp\u003eIt is im­ple­mented on top of the In­fin­is­pan client so it can be used with ei­ther stand­alone or clus­tered Vert.x ap­pli­ca­tions.\u003c/p\u003e\u003cp\u003eIf you want to get started, don’t miss the \u003ca href=\"https://how-to.vertx.io/web-session-infinispan-howto/\"\u003e\u003cem\u003eWeb Ses­sion Stor­age with In­fin­is­pan Client\u003c/em\u003e how-​to\u003c/a\u003e.\u003c/p\u003e","scope":{}}},"prevPost":null,"nextPost":{"meta":{"title":"Migrate from Vert.x 3 to Vert.x 4","category":"guides","authors":[{"name":"Julien Viet","github_id":"vietj"}],"summary":"We provide a clear and well-documented migration path from Vert.x 3.9 to Vert.x 4. Existing users will feel at home with the new version.","pinned":true},"date":"2020-12-02","slug":"from-vert-x-3-to-vert-x-4"},"relatedPosts":[{"meta":{"title":"Things to keep in mind concerning CSRF attacks","category":"guides","authors":[{"name":"Xhelal Likaj","github_id":"xhlika"}],"summary":"Eclipse Vert.x like most frameworks provides an anti-CSRF defense. However, no framework can prevent all attack vectors that exist in the web. Therefore, developers need to be aware of some dangers and common attack vectors concerning CSRF defenses."},"date":"2021-01-23","slug":"eclipse-vert-x-CSRF-concerns"},{"meta":{"title":"Eclipse Vert.x 4.1.0.Beta1 released!","category":"releases","authors":[{"name":"Julien Viet","github_id":"vietj"}],"summary":"The first beta of the upcoming Vert.x 4.1 has just been released. We consider it feature complete and invite the community to test it."},"date":"2021-05-12","slug":"eclipse-vert-x-4-1-Beta1-released"},{"meta":{"title":"Building services and APIs with AMQP 1.0","category":"guides","authors":[{"name":"Jakub Scholz","github_id":"scholzj"}],"summary":"Microservices and APIs are everywhere. Everyone talks about them, presentation slides are full of them ... some people are actually even building them."},"date":"2017-01-25","slug":"building-services-and-apis-with-amqp-1-0"}]},"__N_SSG":true},"page":"/blog/[[...slug]]","query":{"slug":["whats-new-in-vert-x-4-1"]},"buildId":"CMVGPxoywMMUqzejXBSOL","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-9a5c89434732593ca2fd.js"></script><script src="/_next/static/chunks/main-b6e20584df76f29b6f35.js" async=""></script><script src="/_next/static/chunks/webpack-d7b2fb72fb7257504a38.js" async=""></script><script src="/_next/static/chunks/framework.fcef98db13e2318579fb.js" async=""></script><script src="/_next/static/chunks/commons.5b8771ac6e8a338f82f1.js" async=""></script><script src="/_next/static/chunks/styles.7064a0f84b2a7c13404a.js" async=""></script><script src="/_next/static/chunks/pages/_app-3dbbc9c041333077c167.js" async=""></script><script src="/_next/static/chunks/5df0631eea625b022d3730b3f1bf573e1b8deb37.2c5d42edba8dda0b0ba3.js" async=""></script><script src="/_next/static/chunks/pages/blog/%5B%5B...slug%5D%5D-ff5b3ed8f1ab05c5e7a9.js" async=""></script><script src="/_next/static/CMVGPxoywMMUqzejXBSOL/_buildManifest.js" async=""></script><script src="/_next/static/CMVGPxoywMMUqzejXBSOL/_ssgManifest.js" async=""></script></body></html>