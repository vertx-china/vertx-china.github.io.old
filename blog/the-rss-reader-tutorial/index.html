<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="description" content="Vert.x | Reactive applications on the JVM"/><meta name="robots" content="index,follow"/><link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet"/><link href="https://fonts.googleapis.com/css?family=Roboto+Condensed:300,400" rel="stylesheet"/><link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400&amp;display=swap" rel="stylesheet"/><link rel="shortcut icon" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="48x48" href="/favicons/favicon-48x48.png"/><link rel="alternate" type="application/rss+xml" href="/feed/rss.xml"/><link rel="alternate" type="application/atom+xml" href="/feed/atom.xml"/><link rel="alternate" type="application/json" href="/feed/feed.json"/><title>The RSS reader tutorial | 博客 | Eclipse Vert.x</title><meta name="next-head-count" content="16"/><link rel="preload" href="/_next/static/css/styles.bee17d6f.chunk.css" as="style"/><link rel="stylesheet" href="/_next/static/css/styles.bee17d6f.chunk.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-b6e20584df76f29b6f35.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-d7b2fb72fb7257504a38.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.fcef98db13e2318579fb.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.5b8771ac6e8a338f82f1.js" as="script"/><link rel="preload" href="/_next/static/chunks/styles.7064a0f84b2a7c13404a.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-3dbbc9c041333077c167.js" as="script"/><link rel="preload" href="/_next/static/chunks/5df0631eea625b022d3730b3f1bf573e1b8deb37.2c5d42edba8dda0b0ba3.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/blog/%5B%5B...slug%5D%5D-ff5b3ed8f1ab05c5e7a9.js" as="script"/></head><body data-build-time="2021-06-06T00:56:03.426Z" data-build-commit-id="9b6f8ec77788c79dae519f44056d1db46089357e" data-build-run-id="910536558"><div id="__next"><main class="page"><header><div class="navbar"><div class="navbar-content container"><div class="navbar-logo"><a href="/"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAxMjMyLjYgMzE1LjIiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxzdHlsZT4uc3Qwe2ZpbGw6Izc4MmE5MX08L3N0eWxlPjxwYXRoIGQ9Ik0xMjAuOSAyMTQuMkwxOTAuNSAwaDUyLjNsLTk4LjUgMjczLjhIOTguMkwwIDBoNTIuMWw2OC44IDIxNC4yem0yOTEuMi02Mi42SDI5OS42djg0LjJINDMxdjM4SDI1MlYwaDE3Ny43djM4LjRIMjk5LjZWMTE0aDExMi41djM3LjZ6bTgzLjctMTEzLjJINTQ2YzE2LjUuMyAyOSA0LjQgMzcuMyAxMi40IDguMyA4IDEyLjUgMTkuNCAxMi41IDM0IDAgMTQtNC41IDI1LjEtMTMuNSAzMy4yLTkgOC4xLTIxLjYgMTIuMS0zNy42IDEyLjFoLTI3LjF2MjQuMmw4Ni4xIDExOS41aDUxdi0yLjRsLTc3LjItMTA2LjdjMjQuOS01LjUgNDMuMy0yMS43IDUyLjYtMzUuOSA4LjItMTIuNiAxMy4zLTI3LjcgMTMuMy00NiAwLTI2LjgtOC42LTQ3LjQtMjUuOC02MS41QzYwMC41IDcuMSA1NzYuMSAwIDU0NC41IDBoLTk2LjN2MjczLjhoNDcuNiIvPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDUyLjMgMTU3LjdsLTQxLjUgNjIuNyAyOS43IDUzLjRoODUuMXoiLz48Y2lyY2xlIGNsYXNzPSJzdDAiIGN4PSI4MjcuOSIgY3k9IjI3NC43IiByPSI0MC41Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTEwMzcgMGwtNDcuNiA3NC4yTDk0OSAwaC04NGw4NS4zIDEzNS44LTY3LjEgMTA1LjdjNS43IDkuNSA5LjEgMjAuNSA5LjIgMzIuNGg1MC4xTDExMjEuMyAwSDEwMzd6Ii8+PHBhdGggZD0iTTc2My41IDI3My44Yy4xLTkuOSAyLjUtMTkuMiA2LjYtMjcuNVYzOC40aDg1LjRWMEg2MzguMnYzOC40aDg0LjZ2MjM1LjRoNDAuN3ptNDE0LTI2Ni45aC0xNS4zdjQyLjJoLTguNVY2LjloLTE1LjJWMGgzOXY2Ljl6TTExOTMgMGwxNC4yIDM3LjdMMTIyMS4zIDBoMTF2NDkuMWgtOC41VjMyLjlsLjgtMjEuNy0xNC41IDM3LjloLTYuMWwtMTQuNS0zNy44LjggMjEuNnYxNi4yaC04LjVWMGgxMS4yeiIvPjwvc3ZnPg==" alt="Vert.x Logo"/></a></div><div class="navbar-collapse-button"><span></span><span></span><span></span></div><div class="navbar-right"><div class="navbar-menu"><span class="navbar-menu-item with-drop-down"><div class="dropdown"><a class="dropdown-title">开始<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="dropdown-menu"><a href="/introduction-to-vertx-and-reactive/"><li class="dropdown-item">简介</li></a><a href="/get-started/"><li class="dropdown-item">开始</li></a><a href="https://start.vertx.io/" target="_blank" rel="noreferrer"><li class="dropdown-item">应用生成器 <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a></ul></div></span><a class="navbar-menu-item" href="/docs/">文档</a><span class="navbar-menu-item with-drop-down"><div class="dropdown"><a class="dropdown-title">资源<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="dropdown-menu"><a href="/faq/"><li class="dropdown-item">答疑</li></a><a href="/channels/"><li class="dropdown-item">联系渠道</li></a><a href="https://how-to.vertx.io/" target="_blank" rel="noreferrer"><li class="dropdown-item">操作指南 <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a><a href="https://github.com/vert-x3/vertx-eventbus-bridge-clients" target="_blank" rel="noreferrer"><li class="dropdown-item">EventBus Bridge Clients <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a></ul></div></span><a class="navbar-menu-item" href="/blog/">博客</a><a class="navbar-menu-item" href="/community/">社区</a><a class="navbar-menu-item" href="/translation/">翻译团队</a></div><div class="navbar-social"><a href="https://github.com/vert-x3/vertx-awesome" class="navbar-social-link" title="Awesome Vert.x" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="List of awesome Vert.x projects"><title>Awesome Vert.x</title><path d="M24 11.438l-6.154-5.645-.865.944 5.128 4.7H1.895l5.128-4.705-.865-.943-6.154 5.649H0v3.72c0 1.683 1.62 3.053 3.61 3.053h3.795c1.99 0 3.61-1.37 3.61-3.051v-2.446h1.97v2.446c0 1.68 1.62 3.051 3.61 3.051h3.794c1.99 0 3.61-1.37 3.61-3.051v-3.721z"></path></svg></a><a href="https://stackoverflow.com/questions/tagged/vert.x" class="navbar-social-link" title="Stack Overflow" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Stack Overflow questions related to Vert.x"><title>Stack Overflow</title><path d="M18.986 21.865v-6.404h2.134V24H1.844v-8.539h2.13v6.404h15.012zM6.111 19.731H16.85v-2.137H6.111v2.137zm.259-4.852l10.48 2.189.451-2.07-10.478-2.187-.453 2.068zm1.359-5.056l9.705 4.53.903-1.95-9.706-4.53-.902 1.936v.014zm2.715-4.785l8.217 6.855 1.359-1.62-8.216-6.853-1.35 1.617-.01.001zM15.751 0l-1.746 1.294 6.405 8.604 1.746-1.294L15.749 0h.002z"></path></svg></a><a href="https://www.youtube.com/channel/UCGN6L3tRhs92Uer3c6VxOSA" class="navbar-social-link" title="YouTube" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="YouTube channel of Vert.x"><title>YouTube</title><path d="M23.499 6.203a3.008 3.008 0 00-2.089-2.089c-1.87-.501-9.4-.501-9.4-.501s-7.509-.01-9.399.501a3.008 3.008 0 00-2.088 2.09A31.258 31.26 0 000 12.01a31.258 31.26 0 00.523 5.785 3.008 3.008 0 002.088 2.089c1.869.502 9.4.502 9.4.502s7.508 0 9.399-.502a3.008 3.008 0 002.089-2.09 31.258 31.26 0 00.5-5.784 31.258 31.26 0 00-.5-5.808zm-13.891 9.4V8.407l6.266 3.604z"></path></svg></a><a href="https://discord.gg/KzEMwP2" class="navbar-social-link" title="Discord" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Eclipse Vert.x channel on Discord"><title>Discord</title><path d="M20.222 0c1.406 0 2.54 1.137 2.607 2.475V24l-2.677-2.273-1.47-1.338-1.604-1.398.67 2.205H3.71c-1.402 0-2.54-1.065-2.54-2.476V2.48C1.17 1.142 2.31.003 3.715.003h16.5L20.222 0zm-6.118 5.683h-.03l-.202.2c2.073.6 3.076 1.537 3.076 1.537-1.336-.668-2.54-1.002-3.744-1.137-.87-.135-1.74-.064-2.475 0h-.2c-.47 0-1.47.2-2.81.735-.467.203-.735.336-.735.336s1.002-1.002 3.21-1.537l-.135-.135s-1.672-.064-3.477 1.27c0 0-1.805 3.144-1.805 7.02 0 0 1 1.74 3.743 1.806 0 0 .4-.533.805-1.002-1.54-.468-2.14-1.404-2.14-1.404s.134.066.335.2h.06c.03 0 .044.015.06.03v.006c.016.016.03.03.06.03.33.136.66.27.93.4.466.202 1.065.403 1.8.536.93.135 1.996.2 3.21 0 .6-.135 1.2-.267 1.8-.535.39-.2.87-.4 1.397-.737 0 0-.6.936-2.205 1.404.33.466.795 1 .795 1 2.744-.06 3.81-1.8 3.87-1.726 0-3.87-1.815-7.02-1.815-7.02-1.635-1.214-3.165-1.26-3.435-1.26l.056-.02zm.168 4.413c.703 0 1.27.6 1.27 1.335 0 .74-.57 1.34-1.27 1.34-.7 0-1.27-.6-1.27-1.334.002-.74.573-1.338 1.27-1.338zm-4.543 0c.7 0 1.266.6 1.266 1.335 0 .74-.57 1.34-1.27 1.34-.7 0-1.27-.6-1.27-1.334 0-.74.57-1.338 1.27-1.338z"></path></svg></a><a href="https://groups.google.com/forum/?fromgroups#!forum/vertx" class="navbar-social-link" title="Vert.x 用户组" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="A Google group for Vert.x users"><title>Vert.x 用户组</title><path d="M.92 3.332c-.776 0-1.216.67-.692 1.383l2.537 4.403v7.86c0 2.013 1.467 3.69 3.459 3.69H20.31a3.75 3.75 0 003.69-3.69V7.043a3.723 3.723 0 00-3.668-3.71zm5.786 3.71H20.1c.587 0 1.153.357 1.153.923 0 .566-.566.922-1.153.922H6.706c-.587 0-1.153-.356-1.153-.922 0-.566.566-.923 1.153-.923zm0 3.69H20.1c.587 0 1.153.356 1.153.922 0 .566-.566.922-1.153.922H6.706c-.587 0-1.153-.356-1.153-.922 0-.566.566-.922 1.153-.922zm-.021 3.71h9.705c.587 0 1.153.356 1.153.922 0 .566-.566.923-1.153.923H6.685c-.587 0-1.153-.357-1.153-.923 0-.566.566-.922 1.153-.922Z"></path></svg></a><a href="https://shang.qq.com/wpa/qunwpa?idkey=587f58cacb9557e3291b46098e0fe09427b98a1c0f866da23c04c2762bc7e2ad" class="navbar-social-link" title="Vert.x中国用户组QQ群" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Vert.x中国用户组QQ群"><title>Vert.x中国用户组QQ群</title><path d="M21.395 15.035a39.548 39.548 0 0 0-.803-2.264l-1.079-2.695c.001-.032.014-.562.014-.836C19.526 4.632 17.351 0 12 0S4.474 4.632 4.474 9.241c0 .274.013.804.014.836l-1.08 2.695a38.97 38.97 0 0 0-.802 2.264c-1.021 3.283-.69 4.643-.438 4.673.54.065 2.103-2.472 2.103-2.472 0 1.469.756 3.387 2.394 4.771-.612.188-1.363.479-1.845.835-.434.32-.379.646-.301.778.343.578 5.883.369 7.482.189 1.6.18 7.14.389 7.483-.189.078-.132.132-.458-.301-.778-.483-.356-1.233-.646-1.846-.836 1.637-1.384 2.393-3.302 2.393-4.771 0 0 1.563 2.537 2.103 2.472.251-.03.581-1.39-.438-4.673zM12.662 4.846c.039-1.052.659-1.878 1.385-1.846s1.281.912 1.242 1.964c-.039 1.051-.659 1.878-1.385 1.846s-1.282-.912-1.242-1.964zM9.954 3c.725-.033 1.345.794 1.384 1.846.04 1.052-.517 1.931-1.242 1.963-.726.033-1.346-.794-1.385-1.845C8.672 3.912 9.228 3.033 9.954 3zM7.421 8.294c.194-.43 2.147-.908 4.566-.908h.026c2.418 0 4.372.479 4.566.908a.14.14 0 0 1 .014.061c0 .031-.01.059-.026.083-.163.238-2.333 1.416-4.553 1.416h-.026c-2.221 0-4.39-1.178-4.553-1.416a.136.136 0 0 1-.014-.144zm10.422 8.622c-.22 3.676-2.403 5.987-5.774 6.021h-.137c-3.37-.033-5.554-2.345-5.773-6.021-.081-1.35.001-2.496.147-3.43.318.063.638.122.958.176v3.506s1.658.334 3.318.103v-3.225c.488.027.96.04 1.406.034h.025c1.678.021 3.714-.204 5.683-.594.146.934.227 2.08.147 3.43zM10.48 5.804c.313-.041.542-.409.508-.825-.033-.415-.314-.72-.629-.679-.313.04-.541.409-.508.824.034.417.315.72.629.68zM14.479 5.156c.078.037.221.042.289-.146.035-.095.025-.165-.009-.214-.023-.033-.133-.118-.371-.176-.904-.22-1.341.384-1.405.499-.04.072-.012.176.056.227.067.051.139.037.179-.006.58-.628 1.21-.208 1.261-.184z"></path></svg></a></div></div></div></div></header><div class="page-content"><div class="container"><div class="blog-post"><div class="blog-navbar"><h2>Blog</h2><ul><li><a href="/blog/">All posts</a></li><li><a href="/blog/category/releases/">releases</a></li><li><a href="/blog/category/guides/">guides</a></li><li><a href="/blog/category/news/">news</a></li></ul><div class="feed-icons"><a href="/feed/atom.xml"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></div></div><div class="blog-post-main"><div class="blog-post-content"><h1>The RSS reader tutorial</h1><span><p>This tu­to­r­ial is ded­i­cated for users who’d like to know how to use the Eclipse Vert.x Cas­san­dra client in prac­tice.</p><h2 id="before-you-start-this-tutorial"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#before-you-start-this-tutorial"></a>Before you start this tutorial</h2><p>Be­fore start­ing, you should</p><ul><li><p>be fa­mil­iar with <a href="/">Eclipse Vert.x</a>. If you are not, here is the <a href="/docs/guide-for-java-devs/">guide for Java de­vel­op­ers</a>.</p></li><li><p>have some basic un­der­stand­ing of data­bases. Ex­tended knowl­edge of Cas­san­dra is not re­quired.</p></li></ul><p>You also may find it use­ful to read <a href="https://validator.w3.org/feed/docs/rss2.html">the RSS 2.0</a> spec­i­fi­ca­tion, be­cause the re­sulted app is, ba­si­cally, a stor­age of RSS 2.0 feeds.</p><p>To give you an idea of what the App is about, here is how it looks like from the fronted side:</p><p><img src="https://i.imgur.com/2V954zx.png" alt="see how it looks"/></p><p>In the image, we see that browser space is split into 2 parts:</p><ol><li>Saved feed names</li><li>List of ar­ti­cles for the se­lected feed</li></ol><p>Here you also can enter a link to a new feed, so the App will fetch and parse the feed.
After that, it will ap­pear in the left col­umn along with other saved feeds.</p><h2 id="requirements"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#requirements"></a>Requirements</h2><p>For com­plet­ing this tu­to­r­ial you need:</p><ul><li>Java 8 or higher</li><li>Git</li><li>1 hour of your time</li><li>You fa­vorite code ed­i­tor</li></ul><p>For run­ning the ex­am­ple you should en­sure that Cas­san­dra ser­vice is run­ning lo­cally on port 9042.
As an op­tion, you can run Cas­san­dra with <a href="https://github.com/riptano/ccm#installation">ccm</a>(Cas­san­dra Clus­ter Man­ager).
Fol­low <a href="https://github.com/riptano/ccm#installation">this</a> in­struc­tions for in­stalling ccm.
After in­stalling you will be able to run a sin­gle node clus­ter:</p><pre><code class="hljs language-better-shell"><span class="hljs-meta">$</span><span class="bash"> ccm create rss_reader -v 3.11.2 -n 1 -s</span>
<span class="hljs-meta">$</span><span class="bash"> ccm start</span>
</code></pre><p>Be­fore com­plet­ing this step make sure that you have suc­cess­fully cloned the RSS reader repos­i­tory and checked out the <code>step_1</code> branch:</p><pre><code class="hljs language-better-shell"><span class="hljs-meta">$</span><span class="bash"> git <span class="hljs-built_in">clone</span> https://github.com/Sammers21/rss-reader</span>
<span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">cd</span> rss-reader</span>
<span class="hljs-meta">$</span><span class="bash"> git checkout step_1</span>
</code></pre><p>Now you can try to tun this ex­am­ple and see if it works:</p><pre><code class="hljs language-better-shell"><span class="hljs-meta">$</span><span class="bash"> ./gradlew vertxRun</span>
</code></pre><h2 id="schema"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#schema"></a>Schema</h2><p>If you are fa­mil­iar with <a href="http://cassandra.apache.org/">Apache Cas­san­dra</a>, you
should know that the way your data is stored in Cas­san­dra is de­pen­dent on queries
you are run­ning. It means that you need first to fig­ure out what kind of queries
you will be run­ning, and then you can pro­duce a stor­age scheme.</p><p>In our case, we’d like our ap­pli­ca­tion to have 3 end­points:</p><ol><li><code>POST /user/{user_id}/rss_link</code> - for adding links to a user’s feed</li><li><code>GET /user/{user_id}/rss_channels</code> - for re­triev­ing in­for­ma­tion about RSS chan­nels a user sub­scribed on</li><li><code>GET /articles/by_rss_link?link={rss_link}</code> - for re­triev­ing in­for­ma­tion about ar­ti­cles on a spe­cific RSS chan­nel</li></ol><p>For im­ple­ment­ing this end­points, the schema should look as fol­lows:</p><pre><code class="hljs language-sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> rss_by_user (login <span class="hljs-built_in">text</span> , rss_link <span class="hljs-built_in">text</span>, PRIMARY <span class="hljs-keyword">KEY</span> (login, rss_link));
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> articles_by_rss_link(rss_link <span class="hljs-built_in">text</span>, pubDate <span class="hljs-built_in">timestamp</span>, title <span class="hljs-built_in">text</span>, article_link <span class="hljs-built_in">text</span>, description <span class="hljs-built_in">text</span>, PRIMARY <span class="hljs-keyword">KEY</span> ( rss_link , pubDate , article_link));
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> channel_info_by_rss_link(rss_link <span class="hljs-built_in">text</span>, last_fetch_time <span class="hljs-built_in">timestamp</span>,title <span class="hljs-built_in">text</span>, site_link <span class="hljs-built_in">text</span>, description <span class="hljs-built_in">text</span>, PRIMARY <span class="hljs-keyword">KEY</span>(rss_link));
</code></pre><h2 id="what-to-do-in-this-step"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#what-to-do-in-this-step"></a>What to do in this step</h2><p>In this step, we will im­ple­ment only the first end­point</p><h2 id="project-overview"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#project-overview"></a>Project overview</h2><p>There are two no­table classes in the project: <code>AppVerticle</code> and <code>FetchVerticle</code>. The first one is a <a href="/docs/vertx-core/java/#_verticles">Ver­ti­cle</a> re­spon­si­ble for HTTP re­quest han­dling and stor­age schema ini­tial­iza­tion. The sec­ond one is a <a href="/docs/vertx-core/java/#_verticles">Ver­ti­cle</a> as well, but re­spon­si­ble for RSS feeds fetch­ing.</p><p>The idea is sim­ple. When the ap­pli­ca­tion is start­ing the <code>AppVerticle</code> is de­ployed, then it tries to ini­tial­ize stor­age schema, de­scribed in <code>src/main/resources/schema.cql</code> file by read­ing it and ex­e­cut­ing listed queries line by line. After the schema ini­tial­iza­tion the <code>AppVerticle</code> de­ploys <code>FetchVerticle</code> and starts a HTTP server.</p><h2 id="implementing-the-endpoint"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#implementing-the-endpoint"></a>Implementing the endpoint</h2><p>Now, it is time to im­ple­ment the first end­point. Pay at­ten­tion to <code>TODO</code>s, they are for point­ing you out about where changes should be made.</p><p>Now, let’s have a look at the <code>AppVerticle#postRssLink</code> method. This method is called each time the first end­point is called, so we can fig­ure out what is the posted body and id of the user, who per­formed the re­quest, di­rectly there. There are 2 main things we want to do in this method:</p><ol><li>No­ti­fy­ing via the <a href="/docs/vertx-core/java/#event_bus">Event Bus</a> the <code>FetchVerticle</code> to fetch given by user link link to an RSS feed.</li><li>In­sert­ing an entry to the <code>rss_by_user</code> table.</li></ol><p>This is how the <code>AppVerticle#postRssLink</code> method should be im­ple­mented:</p><pre><code class="hljs language-java"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">postRssLink</span><span class="hljs-params">(RoutingContext ctx)</span> </span>{
    ctx.request().bodyHandler(body -&gt; {
        JsonObject bodyAsJson = body.toJsonObject();
        String link = bodyAsJson.getString(<span class="hljs-string">&quot;link&quot;</span>);
        String userId = ctx.request().getParam(<span class="hljs-string">&quot;user_id&quot;</span>);
        <span class="hljs-keyword">if</span> (link == <span class="hljs-keyword">null</span> || userId == <span class="hljs-keyword">null</span>) {
            responseWithInvalidRequest(ctx);
        } <span class="hljs-keyword">else</span> {
            vertx.eventBus().send(<span class="hljs-string">&quot;fetch.rss.link&quot;</span>, link);
            Future&lt;ResultSet&gt; future = Future.future();
            BoundStatement query = insertNewLinkForUser.bind(userId, link);
            client.execute(query, future);
            future.setHandler(result -&gt; {
                <span class="hljs-keyword">if</span> (result.succeeded()) {
                    ctx.response().end(<span class="hljs-keyword">new</span> JsonObject().put(<span class="hljs-string">&quot;message&quot;</span>, <span class="hljs-string">&quot;The feed just added&quot;</span>).toString());
                } <span class="hljs-keyword">else</span> {
                    ctx.response().setStatusCode(<span class="hljs-number">400</span>).end(result.cause().getMessage());
                }
            });
        }
    });
}

<span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">responseWithInvalidRequest</span><span class="hljs-params">(RoutingContext ctx)</span> </span>{
    ctx.response()
            .setStatusCode(<span class="hljs-number">400</span>)
            .putHeader(<span class="hljs-string">&quot;content-type&quot;</span>, <span class="hljs-string">&quot;application/json; charset=utf-8&quot;</span>)
            .end(invalidRequest().toString());
}

<span class="hljs-function"><span class="hljs-keyword">private</span> JsonObject <span class="hljs-title">invalidRequest</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> JsonObject().put(<span class="hljs-string">&quot;message&quot;</span>, <span class="hljs-string">&quot;Invalid request&quot;</span>);
}
</code></pre><p>You may no­tice that <code>insertNewLinkForUser</code> is a <code>PreparedStatement</code>, and should be ini­tial­ized be­fore the <code>AppVerticle</code> start. Let’s do it in the <code>AppVerticle#prepareNecessaryQueries</code> method:</p><pre><code class="hljs language-java"><span class="hljs-function"><span class="hljs-keyword">private</span> Future&lt;Void&gt; <span class="hljs-title">prepareNecessaryQueries</span><span class="hljs-params">()</span> </span>{
    Future&lt;PreparedStatement&gt; insertNewLinkForUserPrepFuture = Future.future();
    client.prepare(<span class="hljs-string">&quot;INSERT INTO rss_by_user (login , rss_link ) VALUES ( ?, ?);&quot;</span>, insertNewLinkForUserPrepFuture);

    <span class="hljs-keyword">return</span> insertNewLinkForUserPrepFuture.compose(preparedStatement -&gt; {
        insertNewLinkForUser = preparedStatement;
        <span class="hljs-keyword">return</span> Future.succeededFuture();
    });
}
</code></pre><p>Also, we should not for­get to fetch a RSS by the link sent to <code>FetchVerticle</code> via the Event Bus. We can do it in the <code>FetchVerticle#startFetchEventBusConsumer</code> method:</p><pre><code class="hljs language-java">vertx.eventBus().localConsumer(<span class="hljs-string">&quot;fetch.rss.link&quot;</span>, message -&gt; {
    String rssLink = (String) message.body();
    log.info(<span class="hljs-string">&quot;fetching &quot;</span> + rssLink);
    webClient.getAbs(rssLink).send(response -&gt; {
        <span class="hljs-keyword">if</span> (response.succeeded()) {
            String bodyAsString = response.result().bodyAsString(<span class="hljs-string">&quot;UTF-8&quot;</span>);
            <span class="hljs-keyword">try</span> {
                RssChannel rssChannel = <span class="hljs-keyword">new</span> RssChannel(bodyAsString);

                BatchStatement batchStatement = <span class="hljs-keyword">new</span> BatchStatement();
                BoundStatement channelInfoInsertQuery = insertChannelInfo.bind(
                        rssLink, <span class="hljs-keyword">new</span> Date(System.currentTimeMillis()), rssChannel.description, rssChannel.link, rssChannel.title
                );
                batchStatement.add(channelInfoInsertQuery);

                <span class="hljs-keyword">for</span> (Article article : rssChannel.articles) {
                    batchStatement.add(insertArticleInfo.bind(rssLink, article.pubDate, article.link, article.description, article.title));
                }
                Future&lt;ResultSet&gt; insertArticlesFuture = Future.future();
                cassandraClient.execute(batchStatement, insertArticlesFuture);

                insertArticlesFuture.compose(insertDone -&gt; Future.succeededFuture());
            } <span class="hljs-keyword">catch</span> (Exception e) {
                log.error(<span class="hljs-string">&quot;Unable to fetch: &quot;</span> + rssLink, e);
            }
        } <span class="hljs-keyword">else</span> {
            log.error(<span class="hljs-string">&quot;Unable to fetch: &quot;</span> + rssLink);
        }
    });
});
</code></pre><p>And, fi­nally, this code would not work if <code>insertChannelInfo</code> and <code>insertArticleInfo</code> state­ments will not be ini­tial­ized at ver­ti­cle start. Let’s to this in the <code>FetchVerticle#prepareNecessaryQueries</code> method:</p><pre><code class="hljs language-java"> <span class="hljs-function"><span class="hljs-keyword">private</span> Future&lt;Void&gt; <span class="hljs-title">prepareNecessaryQueries</span><span class="hljs-params">()</span> </span>{
        Future&lt;PreparedStatement&gt; insertChannelInfoPrepFuture = Future.future();
        cassandraClient.prepare(<span class="hljs-string">&quot;INSERT INTO channel_info_by_rss_link ( rss_link , last_fetch_time, description , site_link , title ) VALUES (?, ?, ?, ?, ?);&quot;</span>, insertChannelInfoPrepFuture);

        Future&lt;PreparedStatement&gt; insertArticleInfoPrepFuture = Future.future();
        cassandraClient.prepare(<span class="hljs-string">&quot;INSERT INTO articles_by_rss_link ( rss_link , pubdate , article_link , description , title ) VALUES ( ?, ?, ?, ?, ?);&quot;</span>, insertArticleInfoPrepFuture);

        <span class="hljs-keyword">return</span> CompositeFuture.all(
                insertChannelInfoPrepFuture.compose(preparedStatement -&gt; {
                    insertChannelInfo = preparedStatement;
                    <span class="hljs-keyword">return</span> Future.succeededFuture();
                }), insertArticleInfoPrepFuture.compose(preparedStatement -&gt; {
                    insertArticleInfo = preparedStatement;
                    <span class="hljs-keyword">return</span> Future.succeededFuture();
                })
        ).mapEmpty();
    }
</code></pre><h2 id="observing"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#observing"></a>Observing</h2><p>After all these changes, you should en­sure that the first end­point is work­ing cor­rectly. You need to run the ap­pli­ca­tion, go to lo­cal­host:8080 in­sert a link to a rss feed there(<a href="http://feeds.bbci.co.uk/news/uk/rss.xml">BBC UK feed news</a> for ex­am­ple) and then click the <em>ENTER</em> but­ton. Now you can con­nect to your local Cas­san­dra in­stance, for in­stance with <a href="https://docs.datastax.com/en/cql/3.3/cql/cql_reference/cqlsh.html">cqlsh</a>, and find out how RSS feed data had been saved in the rss_reader key­space:</p><pre><code class="hljs language-sql">cqlsh&gt; <span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> rss_reader.rss_by_user <span class="hljs-keyword">limit</span> <span class="hljs-number">1</span>  ;

 login | rss_link
<span class="hljs-comment">-------+-----------------------------------------</span>
 Pavel | http://feeds.bbci.co.uk/news/uk/rss.xml

(1 rows)
cqlsh&gt; <span class="hljs-keyword">SELECT</span> description <span class="hljs-keyword">FROM</span> rss_reader.articles_by_rss_link  <span class="hljs-keyword">limit</span> <span class="hljs-number">1</span>;

 description
<span class="hljs-comment">-------------------------------------</span>
 BBC coverage of latest developments

(1 rows)
</code></pre><h2 id="conclusion"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#conclusion"></a>Conclusion</h2><p>In this ar­ti­cle we fig­ured out how to im­ple­ment the first end­point of RSS-​reader app. If you have any prob­lems with com­plet­ing this step you can check­out to <code>step_2</code>, where you can find all changes made for com­plet­ing this step:</p><pre><code class="hljs language-better-shell"><span class="hljs-meta">$</span><span class="bash"> git checkout step_2</span>
</code></pre><p>Thanks for read­ing this. I hope you en­joyed read­ing this ar­ti­cle. See you soon on our <a href="https://gitter.im/eclipse-vertx/vertx-users">Git­ter chan­nel</a>!</p></span></div><div class="blog-post-sidebar"><div class="blog-post-author"><img class="blog-post-author-avatar" src="https://github.com/Sammers21.png?size=160"/><div class="blog-post-author-name">by <a href="https://github.com/Sammers21" target="_blank" rel="noopener noreferrer">Pavel Drankov</a></div></div><div class="blog-post-sidebar-date">Posted on <!-- -->20 August 2018</div>in <a class="blog-post-sidebar-category" href="/blog/category/guides/">guides</a><div class="blog-post-sidebar-reading-time"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg> <!-- -->7 min read</div><div class="blog-post-sidebar-share-icons"><a href="https://twitter.com/intent/tweet?text=The%20RSS%20reader%20tutorial&amp;url=https%3A%2F%2Fvertx.io%2Fblog%2Fthe-rss-reader-tutorial&amp;via=vertx_project" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><title>Twitter</title><path d="M23.954 4.569c-.885.389-1.83.654-2.825.775 1.014-.611 1.794-1.574 2.163-2.723-.951.555-2.005.959-3.127 1.184-.896-.959-2.173-1.559-3.591-1.559-2.717 0-4.92 2.203-4.92 4.917 0 .39.045.765.127 1.124C7.691 8.094 4.066 6.13 1.64 3.161c-.427.722-.666 1.561-.666 2.475 0 1.71.87 3.213 2.188 4.096-.807-.026-1.566-.248-2.228-.616v.061c0 2.385 1.693 4.374 3.946 4.827-.413.111-.849.171-1.296.171-.314 0-.615-.03-.916-.086.631 1.953 2.445 3.377 4.604 3.417-1.68 1.319-3.809 2.105-6.102 2.105-.39 0-.779-.023-1.17-.067 2.189 1.394 4.768 2.209 7.557 2.209 9.054 0 13.999-7.496 13.999-13.986 0-.209 0-.42-.015-.63.961-.689 1.8-1.56 2.46-2.548l-.047-.02z"></path></svg></a><a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fvertx.io%2Fblog%2Fthe-rss-reader-tutorial" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><title>LinkedIn</title><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"></path></svg></a><a href="https://www.facebook.com/sharer.php?u=https%3A%2F%2Fvertx.io%2Fblog%2Fthe-rss-reader-tutorial" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><title>Facebook</title><path d="M23.9981 11.9991C23.9981 5.37216 18.626 0 11.9991 0C5.37216 0 0 5.37216 0 11.9991C0 17.9882 4.38789 22.9522 10.1242 23.8524V15.4676H7.07758V11.9991H10.1242V9.35553C10.1242 6.34826 11.9156 4.68714 14.6564 4.68714C15.9692 4.68714 17.3424 4.92149 17.3424 4.92149V7.87439H15.8294C14.3388 7.87439 13.8739 8.79933 13.8739 9.74824V11.9991H17.2018L16.6698 15.4676H13.8739V23.8524C19.6103 22.9522 23.9981 17.9882 23.9981 11.9991Z"></path></svg></a></div></div></div><div class="blog-post-next-prev"><div class="blog-post-next-prev-entry"><h5>Next post</h5><div class="blog-entry"><div class="blog-entry-meta"><div class="blog-entry-meta-left"><span class="blog-entry-date">5 September 2018</span>​<a class="blog-entry-category" href="/blog/category/guides/">guides</a></div><div class="blog-entry-meta-right"></div></div><h3><a href="/blog/the-rss-reader-tutorial-step-2/">The RSS reader tutorial (Step 2)</a></h3><span class="blog-entry-authors"><ul><li class=""><img src="https://github.com/Sammers21.png?size=50"/><a href="https://github.com/Sammers21" target="_blank" rel="noopener noreferrer">Pavel Drankov</a></li></ul></span><p class="blog-entry-summary">In this second installment of our Vert.x Cassandra Client tutorial, we will add an endpoint that produces an array of RSS channels for a given user ID.</p><span class="read-more-link"><a href="/blog/the-rss-reader-tutorial-step-2/"> 阅读更多</a></span></div></div><div class="blog-post-next-prev-entry"><h5>Previous post</h5><div class="blog-entry"><div class="blog-entry-meta"><div class="blog-entry-meta-left"><span class="blog-entry-date">13 July 2018</span>​<a class="blog-entry-category" href="/blog/category/releases/">releases</a></div><div class="blog-entry-meta-right"></div></div><h3><a href="/blog/eclipse-vert-x-3-5-3/">Eclipse Vert.x 3.5.3</a></h3><span class="blog-entry-authors"><ul><li class=""><img src="https://github.com/vietj.png?size=50"/><a href="https://github.com/vietj" target="_blank" rel="noopener noreferrer">Julien Viet</a></li></ul></span><p class="blog-entry-summary">We have just released Vert.x 3.5.3, a bug fix release of Vert.x 3.5.x.</p><span class="read-more-link"><a href="/blog/eclipse-vert-x-3-5-3/"> 阅读更多</a></span></div></div></div><div class="blog-post-related"><h5>Related posts</h5><div class="blog-post-related-posts"><div class="blog-entry"><div class="blog-entry-meta"><div class="blog-entry-meta-left"><span class="blog-entry-date">5 September 2018</span>​<a class="blog-entry-category" href="/blog/category/guides/">guides</a></div><div class="blog-entry-meta-right"></div></div><h3><a href="/blog/the-rss-reader-tutorial-step-2/">The RSS reader tutorial (Step 2)</a></h3><span class="blog-entry-authors"><ul><li class=""><img src="https://github.com/Sammers21.png?size=50"/><a href="https://github.com/Sammers21" target="_blank" rel="noopener noreferrer">Pavel Drankov</a></li></ul></span><p class="blog-entry-summary">In this second installment of our Vert.x Cassandra Client tutorial, we will add an endpoint that produces an array of RSS channels for a given user ID.</p><span class="read-more-link"><a href="/blog/the-rss-reader-tutorial-step-2/"> 阅读更多</a></span></div><div class="blog-entry"><div class="blog-entry-meta"><div class="blog-entry-meta-left"><span class="blog-entry-date">16 March 2020</span>​<a class="blog-entry-category" href="/blog/category/guides/">guides</a></div><div class="blog-entry-meta-right"></div></div><h3><a href="/blog/easy-sso-for-vert-x-with-keycloak/">Easy SSO for Vert.x with Keycloak</a></h3><span class="blog-entry-authors"><ul><li class=""><img src="https://github.com/thomasdarimont.png?size=50"/><a href="https://github.com/thomasdarimont" target="_blank" rel="noopener noreferrer">Thomas Darimont</a></li></ul></span><p class="blog-entry-summary">In this blog post, you&#x27;ll learn how to implement Single Sign-on with OpenID Connect and how to use Keycloak together with Eclipse Vert.x.</p><span class="read-more-link"><a href="/blog/easy-sso-for-vert-x-with-keycloak/"> 阅读更多</a></span></div><div class="blog-entry"><div class="blog-entry-meta"><div class="blog-entry-meta-left"><span class="blog-entry-date">3 August 2015</span>​<a class="blog-entry-category" href="/blog/category/guides/">guides</a></div><div class="blog-entry-meta-right"></div></div><h3><a href="/blog/unit-and-integration-tests/">Unit and Integration Tests</a></h3><span class="blog-entry-authors"><ul><li class=""><img src="https://github.com/cescoffier.png?size=50"/><a href="https://github.com/cescoffier" target="_blank" rel="noopener noreferrer">Clement Escoffier</a></li></ul></span><p class="blog-entry-summary">Let’s refresh our mind about what we developed so far in the introduction to vert.x series. We forgot an important task. We didn’t test the API.</p><span class="read-more-link"><a href="/blog/unit-and-integration-tests/"> 阅读更多</a></span></div></div></div></div></div></div><footer><div class="container"><div class="footer-nav-section"><div class="footer-nav-list footer-logo"><a href="/"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAxMjMyLjYgMzE1LjIiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxzdHlsZT4uc3Qwe2ZpbGw6Izc4MmE5MX08L3N0eWxlPjxwYXRoIGQ9Ik0xMjAuOSAyMTQuMkwxOTAuNSAwaDUyLjNsLTk4LjUgMjczLjhIOTguMkwwIDBoNTIuMWw2OC44IDIxNC4yem0yOTEuMi02Mi42SDI5OS42djg0LjJINDMxdjM4SDI1MlYwaDE3Ny43djM4LjRIMjk5LjZWMTE0aDExMi41djM3LjZ6bTgzLjctMTEzLjJINTQ2YzE2LjUuMyAyOSA0LjQgMzcuMyAxMi40IDguMyA4IDEyLjUgMTkuNCAxMi41IDM0IDAgMTQtNC41IDI1LjEtMTMuNSAzMy4yLTkgOC4xLTIxLjYgMTIuMS0zNy42IDEyLjFoLTI3LjF2MjQuMmw4Ni4xIDExOS41aDUxdi0yLjRsLTc3LjItMTA2LjdjMjQuOS01LjUgNDMuMy0yMS43IDUyLjYtMzUuOSA4LjItMTIuNiAxMy4zLTI3LjcgMTMuMy00NiAwLTI2LjgtOC42LTQ3LjQtMjUuOC02MS41QzYwMC41IDcuMSA1NzYuMSAwIDU0NC41IDBoLTk2LjN2MjczLjhoNDcuNiIvPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDUyLjMgMTU3LjdsLTQxLjUgNjIuNyAyOS43IDUzLjRoODUuMXoiLz48Y2lyY2xlIGNsYXNzPSJzdDAiIGN4PSI4MjcuOSIgY3k9IjI3NC43IiByPSI0MC41Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTEwMzcgMGwtNDcuNiA3NC4yTDk0OSAwaC04NGw4NS4zIDEzNS44LTY3LjEgMTA1LjdjNS43IDkuNSA5LjEgMjAuNSA5LjIgMzIuNGg1MC4xTDExMjEuMyAwSDEwMzd6Ii8+PHBhdGggZD0iTTc2My41IDI3My44Yy4xLTkuOSAyLjUtMTkuMiA2LjYtMjcuNVYzOC40aDg1LjRWMEg2MzguMnYzOC40aDg0LjZ2MjM1LjRoNDAuN3ptNDE0LTI2Ni45aC0xNS4zdjQyLjJoLTguNVY2LjloLTE1LjJWMGgzOXY2Ljl6TTExOTMgMGwxNC4yIDM3LjdMMTIyMS4zIDBoMTF2NDkuMWgtOC41VjMyLjlsLjgtMjEuNy0xNC41IDM3LjloLTYuMWwtMTQuNS0zNy44LjggMjEuNnYxNi4yaC04LjVWMGgxMS4yeiIvPjwvc3ZnPg==" alt="Vert.x Logo"/></a></div><div class="footer-nav-list"><h5>Eclipse Vert.x</h5><ul class=""><li><a class="navbar-menu-item" href="/docs/">文档</a></li><li><a href="/download/">下载</a></li><li><a href="/blog/">博客</a></li><li><a href="/community/">社区</a></li><li><a href="/translation/">翻译团队</a></li><li><a href="https://github.com/eclipse-vertx/vert.x">GitHub</a></li><li><a href="https://github.com/vertx-china/vertx-web-site">翻译GitHub</a></li></ul></div><div class="footer-nav-list"><h5>资源</h5><ul class=""><li><a href="/faq/">答疑</a></li><li><a href="/channels/">联系渠道</a></li><li><a href="https://how-to.vertx.io/">操作指南</a></li><li><a href="https://start.vertx.io/">应用生成器</a></li></ul></div><div class="footer-nav-list"><h5>Eclipse</h5><ul class=""><li><a href="https://www.eclipse.org/">Eclipse 基金会</a></li><li><a href="https://www.eclipse.org/legal/privacy.php">隐私政策</a></li><li><a href="https://www.eclipse.org/legal/termsofuse.php">使用条款</a></li><li><a href="https://www.eclipse.org/legal/copyright.php">版权代理</a></li><li><a href="https://www.eclipse.org/legal/">法律资源</a></li></ul></div></div><div class="footer-copyright"><div class="footer-copyright-remarks">© <!-- -->2021<!-- --> Eclipse Vert.x™<br/>Eclipse Vert.x™ 是开源的，并在<a href="https://creativecommons.org/licenses/by-sa/3.0/" target="_blank" rel="noopener noreferrer">Eclipse Public License 2.0</a>和<a href="https://www.apache.org/licenses/LICENSE-2.0.html" target="_blank" rel="noopener noreferrer">Apache License 2.0</a>协议下获得了双重许可。<br class="footer-copyright-break"/>网站由 <a href="https://michelkraemer.com" target="_blank" rel="noopener noreferrer">Michel Krämer</a> 设计。</div><div class="footer-copyright-eclipse-logo"><a href="https://www.eclipse.org/" target="_blank" rel="noopener noreferrer"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAyODEuMyA5MS4xIiB4bWw6c3BhY2U9InByZXNlcnZlIj48c3R5bGU+LnN0MHtmaWxsOiNmNzk0MjJ9LnN0MXtmaWxsOiMzZDNjM2J9PC9zdHlsZT48ZyBpZD0iTGF5ZXJfMV8xXyI+PHBhdGggY2xhc3M9InN0MCIgZD0iTTI2NS43IDg0TDI1NyA3M2gtMi43djE3LjdoMy4zdi0xMmw5LjMgMTJoMi4xVjczaC0zLjN2MTF6bS0zMi40LTguM2M0LjIgMCA1LjggMy4zIDUuOCA2LjNzLTEuNiA2LTUuOCA2LTUuNy0zLjEtNS44LTYgMS43LTYuMyA1LjgtNi4zem0wLTNjLTYuMSAwLTkuMSA0LjctOS4xIDkuMyAwIDQuNyAyLjkgOS4xIDkuMSA5LjFzOS00LjYgOS4xLTkuMi0zLTkuMi05LjEtOS4yem0tMjEuMiAxOFY3M2gtMy4zdjE3LjdoMy4zem0tMjMuNiAwaDMuM1Y3Nmg1LjZ2LTNoLTE0LjZ2M2g1LjZsLjEgMTQuN3ptLTE4LjktNi41SDE2M2wzLjMtNy42IDMuMyA3LjZ6bTIuOCA2LjVoMy42TDE2OC4yIDczaC0zLjZsLTggMTcuN2gzLjZsMS41LTMuM2g5LjNsMS40IDMuM3ptLTM4LTE0LjZoMy42YzMuOSAwIDUuNSAyLjggNS41IDUuNS4xIDIuOC0xLjUgNS44LTUuNSA1LjhoLTMuNlY3Ni4xem0zLjctMy4xaC02Ljl2MTcuN2g2LjljNi4yIDAgOC45LTQuNSA4LjktOXMtMi44LTguNy04LjktOC43em0tMjIuNCAxMUwxMDcgNzNoLTIuN3YxNy43aDMuM3YtMTJsOS4zIDEyaDIuMVY3M2gtMy4zdjExek04OC4yIDczdjEwLjJjMCAzLTEuNiA0LjktNC4zIDQuOXMtNC42LTEuNy00LjYtNC45VjczSDc2djEwLjFjMCA1LjMgMy42IDcuOSA3LjkgNy45IDQuNCAwIDcuNy0yLjcgNy43LTcuOVY3M2gtMy40em0tMzMgMi43YzQuMiAwIDUuOCAzLjMgNS44IDYuM3MtMS42IDYtNS44IDYtNS43LTMuMS01LjgtNiAxLjctNi4zIDUuOC02LjN6bTAtM2MtNi4xIDAtOS4xIDQuNy05LjEgOS4zczIuOSA5LjEgOS4xIDkuMSA5LTQuNiA5LjEtOS4yLTMtOS4yLTkuMS05LjJ6bS0yOS43IDE4di02LjVoOC45di0zLjFoLTguOXYtNC44aDkuNFY3M0gyMi4ydjE3LjZoMy4zeiIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yNjkuNCA1NC40aC0yMi4ydi04LjloMjEuNHYtNi45aC0yMS40di05LjFoMjIuMnYtNy4yaC0yOS42djM5LjVoMjkuNnYtNy40em0tNDAtMjUuNmMtMy02LjEtOS40LTcuOC0xNS41LTcuOC03LjMgMC0xNS4zIDMuNC0xNS4zIDExLjUgMCA4LjkgNy40IDExIDE1LjUgMTIgNS4yLjYgOS4xIDIuMSA5LjEgNS44IDAgNC4zLTQuNCA1LjktOS4xIDUuOXMtOS40LTEuOS0xMS4xLTYuM2wtNi4yIDMuMmMyLjkgNy4yIDkuMSA5LjcgMTcuMiA5LjcgOC44IDAgMTYuNi0zLjggMTYuNi0xMi42IDAtOS40LTcuNy0xMS42LTE1LjktMTIuNi00LjctLjYtOC44LTEuNS04LjgtNSAwLTIuOSAyLjYtNS4yIDguMi01LjIgNC4zIDAgOCAyLjIgOS40IDQuNGw1LjktM3pNMTc2IDIyLjJjLTYuMi0uMS0xMi40IDAtMTguNiAwdjM5LjVoNy40VjUwLjFIMTc2YzE5LjQgMCAxOS40LTI3LjkgMC0yNy45em0tMTEuMSA3LjFIMTc2YzkuNSAwIDkuNSAxNCAwIDE0aC0xMS4ybC4xLTE0em0tMTggMzIuNVYyMi4yaC03LjR2MzkuNWw3LjQuMXptLTQ0LTM5LjZ2MzkuNWgyNy43di02LjloLTIwLjNWMjIuMmgtNy40ek05MC43IDUxLjdjLTIuNyAyLjUtNi4yIDQtOS45IDQtOS44IDAtMTMuNS02LjgtMTMuNi0xMy40czQuMS0xMy43IDEzLjYtMTMuN2MzLjUtLjEgNyAxLjMgOS41IDMuN2w1LTQuOGMtMy44LTMuOS05LjEtNi0xNC41LTYtMTQuMyAwLTIxIDEwLjUtMjAuOSAyMC44czYuMyAyMC4zIDIwLjkgMjAuM2M1LjYuMSAxMS0yIDE1LTUuOWwtNS4xLTV6bS0zOSAyLjdIMjkuNXYtOC45aDIxLjR2LTYuOUgyOS41di05LjFoMjIuMnYtNy4ySDIyLjJ2MzkuNWgyOS42bC0uMS03LjR6Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTkuOCAxOC4yQzE4LjggNC4xIDM2LjktLjggNTIuMSA2bC0xLS43QzM1LjctNC42IDE1LjItLjEgNS4zIDE1LjNzLTUuNCAzNS45IDEwIDQ1LjhsMS4xLjZDMy44IDUwLjguOCAzMi4zIDkuOCAxOC4yeiIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yNzIuMiAyNi4xYzAtMi41IDIuMS00LjYgNC42LTQuNiAyLjUgMCA0LjYgMi4xIDQuNiA0LjYgMCAyLjUtMi4xIDQuNi00LjYgNC42LTIuNiAwLTQuNi0yLjEtNC42LTQuNnptOC42IDBjMC0yLjItMS44LTQuMS00LTQuMXMtNC4xIDEuOC00LjEgNC4xYzAgMi4yIDEuNyA0IDMuOSA0LjFoLjFjMi4zIDAgNC4xLTEuOCA0LjEtNC4xem0tNi0yLjVoMi4zYzEuMSAwIDEuOS41IDEuOSAxLjYgMCAuNy0uNCAxLjMtMS4xIDEuNWwxLjIgMS43aC0xLjRsLTEtMS41aC0uN3YxLjVoLTEuMWwtLjEtNC44em0yLjIgMi4zYy41IDAgLjgtLjMuOC0uN3MtLjMtLjctLjgtLjdoLTF2MS4zbDEgLjF6Ii8+PC9nPjwvc3ZnPg==" alt="Eclipse foundation Logo"/></a></div></div></div></footer></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"categories":["releases","guides","news"],"post":{"meta":{"title":"The RSS reader tutorial","category":"guides","authors":[{"name":"Pavel Drankov","github_id":"Sammers21"}],"summary":"In this tutorial, you will learn how to use the Eclipse Vert.x Cassandra client in practice. We will develop an RSS reader with three HTTP endpoints."},"date":"2018-08-20","slug":"the-rss-reader-tutorial","readingTime":{"text":"7 min read","minutes":6.18,"time":370799.99999999994,"words":1236},"content":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"This tu\\xADto\\xADr\\xADial is ded\\xADi\\xADcated for users who\\u2019d like to know how to use the Eclipse Vert.x Cas\\xADsan\\xADdra client in prac\\xADtice.\"), mdx(\"h2\", {\n    \"id\": \"before-you-start-this-tutorial\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#before-you-start-this-tutorial\"\n  })), \"Before you start this tutorial\"), mdx(\"p\", null, \"Be\\xADfore start\\xADing, you should\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"be fa\\xADmil\\xADiar with \", mdx(Link, {\n    href: \"/\",\n    passHref: true,\n    mdxType: \"Link\"\n  }, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"\"\n  }), \"Eclipse Vert.x\")), \". If you are not, here is the \", mdx(Link, {\n    href: \"/docs/guide-for-java-devs/\",\n    passHref: true,\n    mdxType: \"Link\"\n  }, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"\"\n  }), \"guide for Java de\\xADvel\\xADop\\xADers\")), \".\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"have some basic un\\xADder\\xADstand\\xADing of data\\xADbases. Ex\\xADtended knowl\\xADedge of Cas\\xADsan\\xADdra is not re\\xADquired.\"))), mdx(\"p\", null, \"You also may find it use\\xADful to read \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://validator.w3.org/feed/docs/rss2.html\"\n  }), \"the RSS 2.0\"), \" spec\\xADi\\xADfi\\xADca\\xADtion, be\\xADcause the re\\xADsulted app is, ba\\xADsi\\xADcally, a stor\\xADage of RSS 2.0 feeds.\"), mdx(\"p\", null, \"To give you an idea of what the App is about, here is how it looks like from the fronted side:\"), mdx(\"p\", null, mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"https://i.imgur.com/2V954zx.png\",\n    \"alt\": \"see how it looks\"\n  }))), mdx(\"p\", null, \"In the image, we see that browser space is split into 2 parts:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Saved feed names\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"List of ar\\xADti\\xADcles for the se\\xADlected feed\")), mdx(\"p\", null, \"Here you also can enter a link to a new feed, so the App will fetch and parse the feed.\\nAfter that, it will ap\\xADpear in the left col\\xADumn along with other saved feeds.\"), mdx(\"h2\", {\n    \"id\": \"requirements\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#requirements\"\n  })), \"Requirements\"), mdx(\"p\", null, \"For com\\xADplet\\xADing this tu\\xADto\\xADr\\xADial you need:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Java 8 or higher\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Git\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"1 hour of your time\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"You fa\\xADvorite code ed\\xADi\\xADtor\")), mdx(\"p\", null, \"For run\\xADning the ex\\xADam\\xADple you should en\\xADsure that Cas\\xADsan\\xADdra ser\\xADvice is run\\xADning lo\\xADcally on port 9042.\\nAs an op\\xADtion, you can run Cas\\xADsan\\xADdra with \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/riptano/ccm#installation\"\n  }), \"ccm\"), \"(Cas\\xADsan\\xADdra Clus\\xADter Man\\xADager).\\nFol\\xADlow \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/riptano/ccm#installation\"\n  }), \"this\"), \" in\\xADstruc\\xADtions for in\\xADstalling ccm.\\nAfter in\\xADstalling you will be able to run a sin\\xADgle node clus\\xADter:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-better-shell\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"$\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"bash\"\n  }), \" ccm create rss_reader -v 3.11.2 -n 1 -s\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"$\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"bash\"\n  }), \" ccm start\"), \"\\n\")), mdx(\"p\", null, \"Be\\xADfore com\\xADplet\\xADing this step make sure that you have suc\\xADcess\\xADfully cloned the RSS reader repos\\xADi\\xADtory and checked out the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"step_1\"), \" branch:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-better-shell\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"$\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"bash\"\n  }), \" git \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"clone\"), \" https://github.com/Sammers21/rss-reader\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"$\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"bash\"\n  }), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"cd\"), \" rss-reader\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"$\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"bash\"\n  }), \" git checkout step_1\"), \"\\n\")), mdx(\"p\", null, \"Now you can try to tun this ex\\xADam\\xADple and see if it works:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-better-shell\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"$\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"bash\"\n  }), \" ./gradlew vertxRun\"), \"\\n\")), mdx(\"h2\", {\n    \"id\": \"schema\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#schema\"\n  })), \"Schema\"), mdx(\"p\", null, \"If you are fa\\xADmil\\xADiar with \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://cassandra.apache.org/\"\n  }), \"Apache Cas\\xADsan\\xADdra\"), \", you\\nshould know that the way your data is stored in Cas\\xADsan\\xADdra is de\\xADpen\\xADdent on queries\\nyou are run\\xADning. It means that you need first to fig\\xADure out what kind of queries\\nyou will be run\\xADning, and then you can pro\\xADduce a stor\\xADage scheme.\"), mdx(\"p\", null, \"In our case, we\\u2019d like our ap\\xADpli\\xADca\\xADtion to have 3 end\\xADpoints:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"POST /user/{user_id}/rss_link\"), \" - for adding links to a user\\u2019s feed\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"GET /user/{user_id}/rss_channels\"), \" - for re\\xADtriev\\xADing in\\xADfor\\xADma\\xADtion about RSS chan\\xADnels a user sub\\xADscribed on\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"GET /articles/by_rss_link?link={rss_link}\"), \" - for re\\xADtriev\\xADing in\\xADfor\\xADma\\xADtion about ar\\xADti\\xADcles on a spe\\xADcific RSS chan\\xADnel\")), mdx(\"p\", null, \"For im\\xADple\\xADment\\xADing this end\\xADpoints, the schema should look as fol\\xADlows:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-sql\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"CREATE\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"TABLE\"), \" rss_by_user (login \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"text\"), \" , rss_link \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"text\"), \", PRIMARY \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"KEY\"), \" (login, rss_link));\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"CREATE\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"TABLE\"), \" articles_by_rss_link(rss_link \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"text\"), \", pubDate \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"timestamp\"), \", title \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"text\"), \", article_link \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"text\"), \", description \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"text\"), \", PRIMARY \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"KEY\"), \" ( rss_link , pubDate , article_link));\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"CREATE\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"TABLE\"), \" channel_info_by_rss_link(rss_link \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"text\"), \", last_fetch_time \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"timestamp\"), \",title \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"text\"), \", site_link \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"text\"), \", description \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"text\"), \", PRIMARY \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"KEY\"), \"(rss_link));\\n\")), mdx(\"h2\", {\n    \"id\": \"what-to-do-in-this-step\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#what-to-do-in-this-step\"\n  })), \"What to do in this step\"), mdx(\"p\", null, \"In this step, we will im\\xADple\\xADment only the first end\\xADpoint\"), mdx(\"h2\", {\n    \"id\": \"project-overview\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#project-overview\"\n  })), \"Project overview\"), mdx(\"p\", null, \"There are two no\\xADtable classes in the project: \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"AppVerticle\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"FetchVerticle\"), \". The first one is a \", mdx(Link, {\n    href: \"/docs/vertx-core/java/#_verticles\",\n    passHref: true,\n    mdxType: \"Link\"\n  }, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"\"\n  }), \"Ver\\xADti\\xADcle\")), \" re\\xADspon\\xADsi\\xADble for HTTP re\\xADquest han\\xADdling and stor\\xADage schema ini\\xADtial\\xADiza\\xADtion. The sec\\xADond one is a \", mdx(Link, {\n    href: \"/docs/vertx-core/java/#_verticles\",\n    passHref: true,\n    mdxType: \"Link\"\n  }, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"\"\n  }), \"Ver\\xADti\\xADcle\")), \" as well, but re\\xADspon\\xADsi\\xADble for RSS feeds fetch\\xADing.\"), mdx(\"p\", null, \"The idea is sim\\xADple. When the ap\\xADpli\\xADca\\xADtion is start\\xADing the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"AppVerticle\"), \" is de\\xADployed, then it tries to ini\\xADtial\\xADize stor\\xADage schema, de\\xADscribed in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"src/main/resources/schema.cql\"), \" file by read\\xADing it and ex\\xADe\\xADcut\\xADing listed queries line by line. After the schema ini\\xADtial\\xADiza\\xADtion the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"AppVerticle\"), \" de\\xADploys \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"FetchVerticle\"), \" and starts a HTTP server.\"), mdx(\"h2\", {\n    \"id\": \"implementing-the-endpoint\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#implementing-the-endpoint\"\n  })), \"Implementing the endpoint\"), mdx(\"p\", null, \"Now, it is time to im\\xADple\\xADment the first end\\xADpoint. Pay at\\xADten\\xADtion to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"TODO\"), \"s, they are for point\\xADing you out about where changes should be made.\"), mdx(\"p\", null, \"Now, let\\u2019s have a look at the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"AppVerticle#postRssLink\"), \" method. This method is called each time the first end\\xADpoint is called, so we can fig\\xADure out what is the posted body and id of the user, who per\\xADformed the re\\xADquest, di\\xADrectly there. There are 2 main things we want to do in this method:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"No\\xADti\\xADfy\\xADing via the \", mdx(Link, {\n    href: \"/docs/vertx-core/java/#event_bus\",\n    passHref: true,\n    mdxType: \"Link\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"\"\n  }), \"Event Bus\")), \" the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"FetchVerticle\"), \" to fetch given by user link link to an RSS feed.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"In\\xADsert\\xADing an entry to the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"rss_by_user\"), \" table.\")), mdx(\"p\", null, \"This is how the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"AppVerticle#postRssLink\"), \" method should be im\\xADple\\xADmented:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"private\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"postRssLink\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(RoutingContext ctx)\"), \" \"), \"{\\n    ctx.request().bodyHandler(body -\u003e {\\n        JsonObject bodyAsJson = body.toJsonObject();\\n        String link = bodyAsJson.getString(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"link\\\"\"), \");\\n        String userId = ctx.request().getParam(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"user_id\\\"\"), \");\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (link == \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"null\"), \" || userId == \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"null\"), \") {\\n            responseWithInvalidRequest(ctx);\\n        } \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"else\"), \" {\\n            vertx.eventBus().send(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"fetch.rss.link\\\"\"), \", link);\\n            Future\u003cResultSet\u003e future = Future.future();\\n            BoundStatement query = insertNewLinkForUser.bind(userId, link);\\n            client.execute(query, future);\\n            future.setHandler(result -\u003e {\\n                \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (result.succeeded()) {\\n                    ctx.response().end(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" JsonObject().put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"message\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"The feed just added\\\"\"), \").toString());\\n                } \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"else\"), \" {\\n                    ctx.response().setStatusCode(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"400\"), \").end(result.cause().getMessage());\\n                }\\n            });\\n        }\\n    });\\n}\\n\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"private\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"responseWithInvalidRequest\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(RoutingContext ctx)\"), \" \"), \"{\\n    ctx.response()\\n            .setStatusCode(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"400\"), \")\\n            .putHeader(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"content-type\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"application/json; charset=utf-8\\\"\"), \")\\n            .end(invalidRequest().toString());\\n}\\n\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"private\"), \" JsonObject \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"invalidRequest\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"()\"), \" \"), \"{\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"return\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" JsonObject().put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"message\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Invalid request\\\"\"), \");\\n}\\n\")), mdx(\"p\", null, \"You may no\\xADtice that \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"insertNewLinkForUser\"), \" is a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"PreparedStatement\"), \", and should be ini\\xADtial\\xADized be\\xADfore the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"AppVerticle\"), \" start. Let\\u2019s do it in the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"AppVerticle#prepareNecessaryQueries\"), \" method:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"private\"), \" Future\u003cVoid\u003e \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"prepareNecessaryQueries\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"()\"), \" \"), \"{\\n    Future\u003cPreparedStatement\u003e insertNewLinkForUserPrepFuture = Future.future();\\n    client.prepare(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"INSERT INTO rss_by_user (login , rss_link ) VALUES ( ?, ?);\\\"\"), \", insertNewLinkForUserPrepFuture);\\n\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"return\"), \" insertNewLinkForUserPrepFuture.compose(preparedStatement -\u003e {\\n        insertNewLinkForUser = preparedStatement;\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"return\"), \" Future.succeededFuture();\\n    });\\n}\\n\")), mdx(\"p\", null, \"Also, we should not for\\xADget to fetch a RSS by the link sent to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"FetchVerticle\"), \" via the Event Bus. We can do it in the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"FetchVerticle#startFetchEventBusConsumer\"), \" method:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \"vertx.eventBus().localConsumer(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"fetch.rss.link\\\"\"), \", message -\u003e {\\n    String rssLink = (String) message.body();\\n    log.info(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"fetching \\\"\"), \" + rssLink);\\n    webClient.getAbs(rssLink).send(response -\u003e {\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (response.succeeded()) {\\n            String bodyAsString = response.result().bodyAsString(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"UTF-8\\\"\"), \");\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"try\"), \" {\\n                RssChannel rssChannel = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" RssChannel(bodyAsString);\\n\\n                BatchStatement batchStatement = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" BatchStatement();\\n                BoundStatement channelInfoInsertQuery = insertChannelInfo.bind(\\n                        rssLink, \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" Date(System.currentTimeMillis()), rssChannel.description, rssChannel.link, rssChannel.title\\n                );\\n                batchStatement.add(channelInfoInsertQuery);\\n\\n                \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"for\"), \" (Article article : rssChannel.articles) {\\n                    batchStatement.add(insertArticleInfo.bind(rssLink, article.pubDate, article.link, article.description, article.title));\\n                }\\n                Future\u003cResultSet\u003e insertArticlesFuture = Future.future();\\n                cassandraClient.execute(batchStatement, insertArticlesFuture);\\n\\n                insertArticlesFuture.compose(insertDone -\u003e Future.succeededFuture());\\n            } \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"catch\"), \" (Exception e) {\\n                log.error(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Unable to fetch: \\\"\"), \" + rssLink, e);\\n            }\\n        } \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"else\"), \" {\\n            log.error(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Unable to fetch: \\\"\"), \" + rssLink);\\n        }\\n    });\\n});\\n\")), mdx(\"p\", null, \"And, fi\\xADnally, this code would not work if \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"insertChannelInfo\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"insertArticleInfo\"), \" state\\xADments will not be ini\\xADtial\\xADized at ver\\xADti\\xADcle start. Let\\u2019s to this in the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"FetchVerticle#prepareNecessaryQueries\"), \" method:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"private\"), \" Future\u003cVoid\u003e \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"prepareNecessaryQueries\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"()\"), \" \"), \"{\\n        Future\u003cPreparedStatement\u003e insertChannelInfoPrepFuture = Future.future();\\n        cassandraClient.prepare(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"INSERT INTO channel_info_by_rss_link ( rss_link , last_fetch_time, description , site_link , title ) VALUES (?, ?, ?, ?, ?);\\\"\"), \", insertChannelInfoPrepFuture);\\n\\n        Future\u003cPreparedStatement\u003e insertArticleInfoPrepFuture = Future.future();\\n        cassandraClient.prepare(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"INSERT INTO articles_by_rss_link ( rss_link , pubdate , article_link , description , title ) VALUES ( ?, ?, ?, ?, ?);\\\"\"), \", insertArticleInfoPrepFuture);\\n\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"return\"), \" CompositeFuture.all(\\n                insertChannelInfoPrepFuture.compose(preparedStatement -\u003e {\\n                    insertChannelInfo = preparedStatement;\\n                    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"return\"), \" Future.succeededFuture();\\n                }), insertArticleInfoPrepFuture.compose(preparedStatement -\u003e {\\n                    insertArticleInfo = preparedStatement;\\n                    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"return\"), \" Future.succeededFuture();\\n                })\\n        ).mapEmpty();\\n    }\\n\")), mdx(\"h2\", {\n    \"id\": \"observing\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#observing\"\n  })), \"Observing\"), mdx(\"p\", null, \"After all these changes, you should en\\xADsure that the first end\\xADpoint is work\\xADing cor\\xADrectly. You need to run the ap\\xADpli\\xADca\\xADtion, go to lo\\xADcal\\xADhost:8080 in\\xADsert a link to a rss feed there(\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://feeds.bbci.co.uk/news/uk/rss.xml\"\n  }), \"BBC UK feed news\"), \" for ex\\xADam\\xADple) and then click the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"ENTER\"), \" but\\xADton. Now you can con\\xADnect to your local Cas\\xADsan\\xADdra in\\xADstance, for in\\xADstance with \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://docs.datastax.com/en/cql/3.3/cql/cql_reference/cqlsh.html\"\n  }), \"cqlsh\"), \", and find out how RSS feed data had been saved in the rss_reader key\\xADspace:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-sql\"\n  }), \"cqlsh\u003e \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"SELECT\"), \" * \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"FROM\"), \" rss_reader.rss_by_user \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"limit\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"1\"), \"  ;\\n\\n login | rss_link\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"-------+-----------------------------------------\"), \"\\n Pavel | http://feeds.bbci.co.uk/news/uk/rss.xml\\n\\n(1 rows)\\ncqlsh\u003e \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"SELECT\"), \" description \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"FROM\"), \" rss_reader.articles_by_rss_link  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"limit\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"1\"), \";\\n\\n description\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"-------------------------------------\"), \"\\n BBC coverage of latest developments\\n\\n(1 rows)\\n\")), mdx(\"h2\", {\n    \"id\": \"conclusion\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#conclusion\"\n  })), \"Conclusion\"), mdx(\"p\", null, \"In this ar\\xADti\\xADcle we fig\\xADured out how to im\\xADple\\xADment the first end\\xADpoint of RSS-\\u200Breader app. If you have any prob\\xADlems with com\\xADplet\\xADing this step you can check\\xADout to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"step_2\"), \", where you can find all changes made for com\\xADplet\\xADing this step:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-better-shell\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"$\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"bash\"\n  }), \" git checkout step_2\"), \"\\n\")), mdx(\"p\", null, \"Thanks for read\\xADing this. I hope you en\\xADjoyed read\\xADing this ar\\xADti\\xADcle. See you soon on our \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://gitter.im/eclipse-vertx/vertx-users\"\n  }), \"Git\\xADter chan\\xADnel\"), \"!\"));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"\u003cp\u003eThis tu­to­r­ial is ded­i­cated for users who’d like to know how to use the Eclipse Vert.x Cas­san­dra client in prac­tice.\u003c/p\u003e\u003ch2 id=\"before-you-start-this-tutorial\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#before-you-start-this-tutorial\"\u003e\u003c/a\u003eBefore you start this tutorial\u003c/h2\u003e\u003cp\u003eBe­fore start­ing, you should\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003cp\u003ebe fa­mil­iar with \u003ca href=\"/\"\u003eEclipse Vert.x\u003c/a\u003e. If you are not, here is the \u003ca href=\"/docs/guide-for-java-devs/\"\u003eguide for Java de­vel­op­ers\u003c/a\u003e.\u003c/p\u003e\u003c/li\u003e\u003cli\u003e\u003cp\u003ehave some basic un­der­stand­ing of data­bases. Ex­tended knowl­edge of Cas­san­dra is not re­quired.\u003c/p\u003e\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eYou also may find it use­ful to read \u003ca href=\"https://validator.w3.org/feed/docs/rss2.html\"\u003ethe RSS 2.0\u003c/a\u003e spec­i­fi­ca­tion, be­cause the re­sulted app is, ba­si­cally, a stor­age of RSS 2.0 feeds.\u003c/p\u003e\u003cp\u003eTo give you an idea of what the App is about, here is how it looks like from the fronted side:\u003c/p\u003e\u003cp\u003e\u003cimg src=\"https://i.imgur.com/2V954zx.png\" alt=\"see how it looks\"/\u003e\u003c/p\u003e\u003cp\u003eIn the image, we see that browser space is split into 2 parts:\u003c/p\u003e\u003col\u003e\u003cli\u003eSaved feed names\u003c/li\u003e\u003cli\u003eList of ar­ti­cles for the se­lected feed\u003c/li\u003e\u003c/ol\u003e\u003cp\u003eHere you also can enter a link to a new feed, so the App will fetch and parse the feed.\nAfter that, it will ap­pear in the left col­umn along with other saved feeds.\u003c/p\u003e\u003ch2 id=\"requirements\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#requirements\"\u003e\u003c/a\u003eRequirements\u003c/h2\u003e\u003cp\u003eFor com­plet­ing this tu­to­r­ial you need:\u003c/p\u003e\u003cul\u003e\u003cli\u003eJava 8 or higher\u003c/li\u003e\u003cli\u003eGit\u003c/li\u003e\u003cli\u003e1 hour of your time\u003c/li\u003e\u003cli\u003eYou fa­vorite code ed­i­tor\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eFor run­ning the ex­am­ple you should en­sure that Cas­san­dra ser­vice is run­ning lo­cally on port 9042.\nAs an op­tion, you can run Cas­san­dra with \u003ca href=\"https://github.com/riptano/ccm#installation\"\u003eccm\u003c/a\u003e(Cas­san­dra Clus­ter Man­ager).\nFol­low \u003ca href=\"https://github.com/riptano/ccm#installation\"\u003ethis\u003c/a\u003e in­struc­tions for in­stalling ccm.\nAfter in­stalling you will be able to run a sin­gle node clus­ter:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-better-shell\"\u003e\u003cspan class=\"hljs-meta\"\u003e$\u003c/span\u003e\u003cspan class=\"bash\"\u003e ccm create rss_reader -v 3.11.2 -n 1 -s\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e$\u003c/span\u003e\u003cspan class=\"bash\"\u003e ccm start\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eBe­fore com­plet­ing this step make sure that you have suc­cess­fully cloned the RSS reader repos­i­tory and checked out the \u003ccode\u003estep_1\u003c/code\u003e branch:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-better-shell\"\u003e\u003cspan class=\"hljs-meta\"\u003e$\u003c/span\u003e\u003cspan class=\"bash\"\u003e git \u003cspan class=\"hljs-built_in\"\u003eclone\u003c/span\u003e https://github.com/Sammers21/rss-reader\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e$\u003c/span\u003e\u003cspan class=\"bash\"\u003e \u003cspan class=\"hljs-built_in\"\u003ecd\u003c/span\u003e rss-reader\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e$\u003c/span\u003e\u003cspan class=\"bash\"\u003e git checkout step_1\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eNow you can try to tun this ex­am­ple and see if it works:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-better-shell\"\u003e\u003cspan class=\"hljs-meta\"\u003e$\u003c/span\u003e\u003cspan class=\"bash\"\u003e ./gradlew vertxRun\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"schema\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#schema\"\u003e\u003c/a\u003eSchema\u003c/h2\u003e\u003cp\u003eIf you are fa­mil­iar with \u003ca href=\"http://cassandra.apache.org/\"\u003eApache Cas­san­dra\u003c/a\u003e, you\nshould know that the way your data is stored in Cas­san­dra is de­pen­dent on queries\nyou are run­ning. It means that you need first to fig­ure out what kind of queries\nyou will be run­ning, and then you can pro­duce a stor­age scheme.\u003c/p\u003e\u003cp\u003eIn our case, we’d like our ap­pli­ca­tion to have 3 end­points:\u003c/p\u003e\u003col\u003e\u003cli\u003e\u003ccode\u003ePOST /user/{user_id}/rss_link\u003c/code\u003e - for adding links to a user’s feed\u003c/li\u003e\u003cli\u003e\u003ccode\u003eGET /user/{user_id}/rss_channels\u003c/code\u003e - for re­triev­ing in­for­ma­tion about RSS chan­nels a user sub­scribed on\u003c/li\u003e\u003cli\u003e\u003ccode\u003eGET /articles/by_rss_link?link={rss_link}\u003c/code\u003e - for re­triev­ing in­for­ma­tion about ar­ti­cles on a spe­cific RSS chan­nel\u003c/li\u003e\u003c/ol\u003e\u003cp\u003eFor im­ple­ment­ing this end­points, the schema should look as fol­lows:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-sql\"\u003e\u003cspan class=\"hljs-keyword\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eTABLE\u003c/span\u003e rss_by_user (login \u003cspan class=\"hljs-built_in\"\u003etext\u003c/span\u003e , rss_link \u003cspan class=\"hljs-built_in\"\u003etext\u003c/span\u003e, PRIMARY \u003cspan class=\"hljs-keyword\"\u003eKEY\u003c/span\u003e (login, rss_link));\n\u003cspan class=\"hljs-keyword\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eTABLE\u003c/span\u003e articles_by_rss_link(rss_link \u003cspan class=\"hljs-built_in\"\u003etext\u003c/span\u003e, pubDate \u003cspan class=\"hljs-built_in\"\u003etimestamp\u003c/span\u003e, title \u003cspan class=\"hljs-built_in\"\u003etext\u003c/span\u003e, article_link \u003cspan class=\"hljs-built_in\"\u003etext\u003c/span\u003e, description \u003cspan class=\"hljs-built_in\"\u003etext\u003c/span\u003e, PRIMARY \u003cspan class=\"hljs-keyword\"\u003eKEY\u003c/span\u003e ( rss_link , pubDate , article_link));\n\u003cspan class=\"hljs-keyword\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eTABLE\u003c/span\u003e channel_info_by_rss_link(rss_link \u003cspan class=\"hljs-built_in\"\u003etext\u003c/span\u003e, last_fetch_time \u003cspan class=\"hljs-built_in\"\u003etimestamp\u003c/span\u003e,title \u003cspan class=\"hljs-built_in\"\u003etext\u003c/span\u003e, site_link \u003cspan class=\"hljs-built_in\"\u003etext\u003c/span\u003e, description \u003cspan class=\"hljs-built_in\"\u003etext\u003c/span\u003e, PRIMARY \u003cspan class=\"hljs-keyword\"\u003eKEY\u003c/span\u003e(rss_link));\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"what-to-do-in-this-step\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#what-to-do-in-this-step\"\u003e\u003c/a\u003eWhat to do in this step\u003c/h2\u003e\u003cp\u003eIn this step, we will im­ple­ment only the first end­point\u003c/p\u003e\u003ch2 id=\"project-overview\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#project-overview\"\u003e\u003c/a\u003eProject overview\u003c/h2\u003e\u003cp\u003eThere are two no­table classes in the project: \u003ccode\u003eAppVerticle\u003c/code\u003e and \u003ccode\u003eFetchVerticle\u003c/code\u003e. The first one is a \u003ca href=\"/docs/vertx-core/java/#_verticles\"\u003eVer­ti­cle\u003c/a\u003e re­spon­si­ble for HTTP re­quest han­dling and stor­age schema ini­tial­iza­tion. The sec­ond one is a \u003ca href=\"/docs/vertx-core/java/#_verticles\"\u003eVer­ti­cle\u003c/a\u003e as well, but re­spon­si­ble for RSS feeds fetch­ing.\u003c/p\u003e\u003cp\u003eThe idea is sim­ple. When the ap­pli­ca­tion is start­ing the \u003ccode\u003eAppVerticle\u003c/code\u003e is de­ployed, then it tries to ini­tial­ize stor­age schema, de­scribed in \u003ccode\u003esrc/main/resources/schema.cql\u003c/code\u003e file by read­ing it and ex­e­cut­ing listed queries line by line. After the schema ini­tial­iza­tion the \u003ccode\u003eAppVerticle\u003c/code\u003e de­ploys \u003ccode\u003eFetchVerticle\u003c/code\u003e and starts a HTTP server.\u003c/p\u003e\u003ch2 id=\"implementing-the-endpoint\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#implementing-the-endpoint\"\u003e\u003c/a\u003eImplementing the endpoint\u003c/h2\u003e\u003cp\u003eNow, it is time to im­ple­ment the first end­point. Pay at­ten­tion to \u003ccode\u003eTODO\u003c/code\u003es, they are for point­ing you out about where changes should be made.\u003c/p\u003e\u003cp\u003eNow, let’s have a look at the \u003ccode\u003eAppVerticle#postRssLink\u003c/code\u003e method. This method is called each time the first end­point is called, so we can fig­ure out what is the posted body and id of the user, who per­formed the re­quest, di­rectly there. There are 2 main things we want to do in this method:\u003c/p\u003e\u003col\u003e\u003cli\u003eNo­ti­fy­ing via the \u003ca href=\"/docs/vertx-core/java/#event_bus\"\u003eEvent Bus\u003c/a\u003e the \u003ccode\u003eFetchVerticle\u003c/code\u003e to fetch given by user link link to an RSS feed.\u003c/li\u003e\u003cli\u003eIn­sert­ing an entry to the \u003ccode\u003erss_by_user\u003c/code\u003e table.\u003c/li\u003e\u003c/ol\u003e\u003cp\u003eThis is how the \u003ccode\u003eAppVerticle#postRssLink\u003c/code\u003e method should be im­ple­mented:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003epostRssLink\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(RoutingContext ctx)\u003c/span\u003e \u003c/span\u003e{\n    ctx.request().bodyHandler(body -\u0026gt; {\n        JsonObject bodyAsJson = body.toJsonObject();\n        String link = bodyAsJson.getString(\u003cspan class=\"hljs-string\"\u003e\u0026quot;link\u0026quot;\u003c/span\u003e);\n        String userId = ctx.request().getParam(\u003cspan class=\"hljs-string\"\u003e\u0026quot;user_id\u0026quot;\u003c/span\u003e);\n        \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (link == \u003cspan class=\"hljs-keyword\"\u003enull\u003c/span\u003e || userId == \u003cspan class=\"hljs-keyword\"\u003enull\u003c/span\u003e) {\n            responseWithInvalidRequest(ctx);\n        } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n            vertx.eventBus().send(\u003cspan class=\"hljs-string\"\u003e\u0026quot;fetch.rss.link\u0026quot;\u003c/span\u003e, link);\n            Future\u0026lt;ResultSet\u0026gt; future = Future.future();\n            BoundStatement query = insertNewLinkForUser.bind(userId, link);\n            client.execute(query, future);\n            future.setHandler(result -\u0026gt; {\n                \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (result.succeeded()) {\n                    ctx.response().end(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;message\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;The feed just added\u0026quot;\u003c/span\u003e).toString());\n                } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n                    ctx.response().setStatusCode(\u003cspan class=\"hljs-number\"\u003e400\u003c/span\u003e).end(result.cause().getMessage());\n                }\n            });\n        }\n    });\n}\n\n\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eresponseWithInvalidRequest\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(RoutingContext ctx)\u003c/span\u003e \u003c/span\u003e{\n    ctx.response()\n            .setStatusCode(\u003cspan class=\"hljs-number\"\u003e400\u003c/span\u003e)\n            .putHeader(\u003cspan class=\"hljs-string\"\u003e\u0026quot;content-type\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;application/json; charset=utf-8\u0026quot;\u003c/span\u003e)\n            .end(invalidRequest().toString());\n}\n\n\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e JsonObject \u003cspan class=\"hljs-title\"\u003einvalidRequest\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e()\u003c/span\u003e \u003c/span\u003e{\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;message\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;Invalid request\u0026quot;\u003c/span\u003e);\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eYou may no­tice that \u003ccode\u003einsertNewLinkForUser\u003c/code\u003e is a \u003ccode\u003ePreparedStatement\u003c/code\u003e, and should be ini­tial­ized be­fore the \u003ccode\u003eAppVerticle\u003c/code\u003e start. Let’s do it in the \u003ccode\u003eAppVerticle#prepareNecessaryQueries\u003c/code\u003e method:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e Future\u0026lt;Void\u0026gt; \u003cspan class=\"hljs-title\"\u003eprepareNecessaryQueries\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e()\u003c/span\u003e \u003c/span\u003e{\n    Future\u0026lt;PreparedStatement\u0026gt; insertNewLinkForUserPrepFuture = Future.future();\n    client.prepare(\u003cspan class=\"hljs-string\"\u003e\u0026quot;INSERT INTO rss_by_user (login , rss_link ) VALUES ( ?, ?);\u0026quot;\u003c/span\u003e, insertNewLinkForUserPrepFuture);\n\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e insertNewLinkForUserPrepFuture.compose(preparedStatement -\u0026gt; {\n        insertNewLinkForUser = preparedStatement;\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e Future.succeededFuture();\n    });\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eAlso, we should not for­get to fetch a RSS by the link sent to \u003ccode\u003eFetchVerticle\u003c/code\u003e via the Event Bus. We can do it in the \u003ccode\u003eFetchVerticle#startFetchEventBusConsumer\u003c/code\u003e method:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003evertx.eventBus().localConsumer(\u003cspan class=\"hljs-string\"\u003e\u0026quot;fetch.rss.link\u0026quot;\u003c/span\u003e, message -\u0026gt; {\n    String rssLink = (String) message.body();\n    log.info(\u003cspan class=\"hljs-string\"\u003e\u0026quot;fetching \u0026quot;\u003c/span\u003e + rssLink);\n    webClient.getAbs(rssLink).send(response -\u0026gt; {\n        \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (response.succeeded()) {\n            String bodyAsString = response.result().bodyAsString(\u003cspan class=\"hljs-string\"\u003e\u0026quot;UTF-8\u0026quot;\u003c/span\u003e);\n            \u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e {\n                RssChannel rssChannel = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e RssChannel(bodyAsString);\n\n                BatchStatement batchStatement = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e BatchStatement();\n                BoundStatement channelInfoInsertQuery = insertChannelInfo.bind(\n                        rssLink, \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e Date(System.currentTimeMillis()), rssChannel.description, rssChannel.link, rssChannel.title\n                );\n                batchStatement.add(channelInfoInsertQuery);\n\n                \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e (Article article : rssChannel.articles) {\n                    batchStatement.add(insertArticleInfo.bind(rssLink, article.pubDate, article.link, article.description, article.title));\n                }\n                Future\u0026lt;ResultSet\u0026gt; insertArticlesFuture = Future.future();\n                cassandraClient.execute(batchStatement, insertArticlesFuture);\n\n                insertArticlesFuture.compose(insertDone -\u0026gt; Future.succeededFuture());\n            } \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e (Exception e) {\n                log.error(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Unable to fetch: \u0026quot;\u003c/span\u003e + rssLink, e);\n            }\n        } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n            log.error(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Unable to fetch: \u0026quot;\u003c/span\u003e + rssLink);\n        }\n    });\n});\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eAnd, fi­nally, this code would not work if \u003ccode\u003einsertChannelInfo\u003c/code\u003e and \u003ccode\u003einsertArticleInfo\u003c/code\u003e state­ments will not be ini­tial­ized at ver­ti­cle start. Let’s to this in the \u003ccode\u003eFetchVerticle#prepareNecessaryQueries\u003c/code\u003e method:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e Future\u0026lt;Void\u0026gt; \u003cspan class=\"hljs-title\"\u003eprepareNecessaryQueries\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e()\u003c/span\u003e \u003c/span\u003e{\n        Future\u0026lt;PreparedStatement\u0026gt; insertChannelInfoPrepFuture = Future.future();\n        cassandraClient.prepare(\u003cspan class=\"hljs-string\"\u003e\u0026quot;INSERT INTO channel_info_by_rss_link ( rss_link , last_fetch_time, description , site_link , title ) VALUES (?, ?, ?, ?, ?);\u0026quot;\u003c/span\u003e, insertChannelInfoPrepFuture);\n\n        Future\u0026lt;PreparedStatement\u0026gt; insertArticleInfoPrepFuture = Future.future();\n        cassandraClient.prepare(\u003cspan class=\"hljs-string\"\u003e\u0026quot;INSERT INTO articles_by_rss_link ( rss_link , pubdate , article_link , description , title ) VALUES ( ?, ?, ?, ?, ?);\u0026quot;\u003c/span\u003e, insertArticleInfoPrepFuture);\n\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e CompositeFuture.all(\n                insertChannelInfoPrepFuture.compose(preparedStatement -\u0026gt; {\n                    insertChannelInfo = preparedStatement;\n                    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e Future.succeededFuture();\n                }), insertArticleInfoPrepFuture.compose(preparedStatement -\u0026gt; {\n                    insertArticleInfo = preparedStatement;\n                    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e Future.succeededFuture();\n                })\n        ).mapEmpty();\n    }\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"observing\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#observing\"\u003e\u003c/a\u003eObserving\u003c/h2\u003e\u003cp\u003eAfter all these changes, you should en­sure that the first end­point is work­ing cor­rectly. You need to run the ap­pli­ca­tion, go to lo­cal­host:8080 in­sert a link to a rss feed there(\u003ca href=\"http://feeds.bbci.co.uk/news/uk/rss.xml\"\u003eBBC UK feed news\u003c/a\u003e for ex­am­ple) and then click the \u003cem\u003eENTER\u003c/em\u003e but­ton. Now you can con­nect to your local Cas­san­dra in­stance, for in­stance with \u003ca href=\"https://docs.datastax.com/en/cql/3.3/cql/cql_reference/cqlsh.html\"\u003ecqlsh\u003c/a\u003e, and find out how RSS feed data had been saved in the rss_reader key­space:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-sql\"\u003ecqlsh\u0026gt; \u003cspan class=\"hljs-keyword\"\u003eSELECT\u003c/span\u003e * \u003cspan class=\"hljs-keyword\"\u003eFROM\u003c/span\u003e rss_reader.rss_by_user \u003cspan class=\"hljs-keyword\"\u003elimit\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e  ;\n\n login | rss_link\n\u003cspan class=\"hljs-comment\"\u003e-------+-----------------------------------------\u003c/span\u003e\n Pavel | http://feeds.bbci.co.uk/news/uk/rss.xml\n\n(1 rows)\ncqlsh\u0026gt; \u003cspan class=\"hljs-keyword\"\u003eSELECT\u003c/span\u003e description \u003cspan class=\"hljs-keyword\"\u003eFROM\u003c/span\u003e rss_reader.articles_by_rss_link  \u003cspan class=\"hljs-keyword\"\u003elimit\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e;\n\n description\n\u003cspan class=\"hljs-comment\"\u003e-------------------------------------\u003c/span\u003e\n BBC coverage of latest developments\n\n(1 rows)\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"conclusion\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#conclusion\"\u003e\u003c/a\u003eConclusion\u003c/h2\u003e\u003cp\u003eIn this ar­ti­cle we fig­ured out how to im­ple­ment the first end­point of RSS-​reader app. If you have any prob­lems with com­plet­ing this step you can check­out to \u003ccode\u003estep_2\u003c/code\u003e, where you can find all changes made for com­plet­ing this step:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-better-shell\"\u003e\u003cspan class=\"hljs-meta\"\u003e$\u003c/span\u003e\u003cspan class=\"bash\"\u003e git checkout step_2\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThanks for read­ing this. I hope you en­joyed read­ing this ar­ti­cle. See you soon on our \u003ca href=\"https://gitter.im/eclipse-vertx/vertx-users\"\u003eGit­ter chan­nel\u003c/a\u003e!\u003c/p\u003e","scope":{}}},"prevPost":{"meta":{"title":"The RSS reader tutorial (Step 2)","category":"guides","authors":[{"name":"Pavel Drankov","github_id":"Sammers21"}],"summary":"In this second installment of our Vert.x Cassandra Client tutorial, we will add an endpoint that produces an array of RSS channels for a given user ID."},"date":"2018-09-05","slug":"the-rss-reader-tutorial-step-2"},"nextPost":{"meta":{"title":"Eclipse Vert.x 3.5.3","category":"releases","authors":[{"name":"Julien Viet","github_id":"vietj"}],"summary":"We have just released Vert.x 3.5.3, a bug fix release of Vert.x 3.5.x."},"date":"2018-07-13","slug":"eclipse-vert-x-3-5-3"},"relatedPosts":[{"meta":{"title":"The RSS reader tutorial (Step 2)","category":"guides","authors":[{"name":"Pavel Drankov","github_id":"Sammers21"}],"summary":"In this second installment of our Vert.x Cassandra Client tutorial, we will add an endpoint that produces an array of RSS channels for a given user ID."},"date":"2018-09-05","slug":"the-rss-reader-tutorial-step-2"},{"meta":{"title":"Easy SSO for Vert.x with Keycloak","category":"guides","authors":[{"name":"Thomas Darimont","github_id":"thomasdarimont"}],"summary":"In this blog post, you'll learn how to implement Single Sign-on with OpenID Connect and how to use Keycloak together with Eclipse Vert.x."},"date":"2020-03-16","slug":"easy-sso-for-vert-x-with-keycloak"},{"meta":{"title":"Unit and Integration Tests","category":"guides","authors":[{"name":"Clement Escoffier","github_id":"cescoffier"}],"summary":"Let’s refresh our mind about what we developed so far in the introduction to vert.x series. We forgot an important task. We didn’t test the API."},"date":"2015-08-03","slug":"unit-and-integration-tests"}]},"__N_SSG":true},"page":"/blog/[[...slug]]","query":{"slug":["the-rss-reader-tutorial"]},"buildId":"ZYNXRlbslIslGShPY402B","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-9a5c89434732593ca2fd.js"></script><script src="/_next/static/chunks/main-b6e20584df76f29b6f35.js" async=""></script><script src="/_next/static/chunks/webpack-d7b2fb72fb7257504a38.js" async=""></script><script src="/_next/static/chunks/framework.fcef98db13e2318579fb.js" async=""></script><script src="/_next/static/chunks/commons.5b8771ac6e8a338f82f1.js" async=""></script><script src="/_next/static/chunks/styles.7064a0f84b2a7c13404a.js" async=""></script><script src="/_next/static/chunks/pages/_app-3dbbc9c041333077c167.js" async=""></script><script src="/_next/static/chunks/5df0631eea625b022d3730b3f1bf573e1b8deb37.2c5d42edba8dda0b0ba3.js" async=""></script><script src="/_next/static/chunks/pages/blog/%5B%5B...slug%5D%5D-ff5b3ed8f1ab05c5e7a9.js" async=""></script><script src="/_next/static/ZYNXRlbslIslGShPY402B/_buildManifest.js" async=""></script><script src="/_next/static/ZYNXRlbslIslGShPY402B/_ssgManifest.js" async=""></script></body></html>