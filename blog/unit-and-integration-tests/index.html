<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="description" content="Vert.x | Reactive applications on the JVM"/><meta name="robots" content="index,follow"/><link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet"/><link href="https://fonts.googleapis.com/css?family=Roboto+Condensed:300,400" rel="stylesheet"/><link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400&amp;display=swap" rel="stylesheet"/><link rel="shortcut icon" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="48x48" href="/favicons/favicon-48x48.png"/><link rel="alternate" type="application/rss+xml" href="/feed/rss.xml"/><link rel="alternate" type="application/atom+xml" href="/feed/atom.xml"/><link rel="alternate" type="application/json" href="/feed/feed.json"/><title>Unit and Integration Tests | 博客 | Eclipse Vert.x</title><meta name="next-head-count" content="16"/><link rel="preload" href="/_next/static/css/styles.f20dca63.chunk.css" as="style"/><link rel="stylesheet" href="/_next/static/css/styles.f20dca63.chunk.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-b6e20584df76f29b6f35.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-d7b2fb72fb7257504a38.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.fcef98db13e2318579fb.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.5b8771ac6e8a338f82f1.js" as="script"/><link rel="preload" href="/_next/static/chunks/styles.7064a0f84b2a7c13404a.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-3dbbc9c041333077c167.js" as="script"/><link rel="preload" href="/_next/static/chunks/5df0631eea625b022d3730b3f1bf573e1b8deb37.3b9874ba65db13e7d868.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/blog/%5B%5B...slug%5D%5D-c36bc482402d8ffe42a5.js" as="script"/></head><body><div id="__next"><main class="page"><header><div class="navbar"><div class="navbar-content container"><div class="navbar-logo"><a href="/"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAxMTI1LjYgMzE1LjIiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxzdHlsZT4uc3Qwe2ZpbGw6Izc4MmE5MX08L3N0eWxlPjxwYXRoIGQ9Ik0xMjAuOSAyMTQuMkwxOTAuNSAwaDUyLjNsLTk4LjUgMjczLjhIOTguMkwwIDBoNTIuMWw2OC44IDIxNC4yem0yOTEuMi02Mi42SDI5OS42djg0LjJINDMxdjM4SDI1MlYwaDE3Ny43djM4LjRIMjk5LjZWMTE0aDExMi41djM3LjZ6bTgzLjctMTEzLjJINTQ2YzE2LjUuMyAyOSA0LjQgMzcuMyAxMi40IDguMyA4IDEyLjUgMTkuNCAxMi41IDM0IDAgMTQtNC41IDI1LjEtMTMuNSAzMy4yLTkgOC4xLTIxLjYgMTIuMS0zNy42IDEyLjFoLTI3LjF2MjQuMmw4Ni4xIDExOS41aDUxdi0yLjRsLTc3LjItMTA2LjdjMjQuOS01LjUgNDMuMy0yMS43IDUyLjYtMzUuOSA4LjItMTIuNiAxMy4zLTI3LjcgMTMuMy00NiAwLTI2LjgtOC42LTQ3LjQtMjUuOC02MS41QzYwMC41IDcuMSA1NzYuMSAwIDU0NC41IDBoLTk2LjN2MjczLjhoNDcuNiIvPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDUyLjMgMTU3LjdsLTQxLjUgNjIuNyAyOS43IDUzLjRoODUuMXoiLz48Y2lyY2xlIGNsYXNzPSJzdDAiIGN4PSI4MjcuOSIgY3k9IjI3NC43IiByPSI0MC41Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTEwMzcgMGwtNDcuNiA3NC4yTDk0OSAwaC04NGw4NS4zIDEzNS44LTY3LjEgMTA1LjdjNS43IDkuNSA5LjEgMjAuNSA5LjIgMzIuNGg1MC4xTDExMjEuMyAwSDEwMzd6Ii8+PHBhdGggZD0iTTc2My41IDI3My44Yy4xLTkuOSAyLjUtMTkuMiA2LjYtMjcuNVYzOC40aDg1LjRWMEg2MzguMnYzOC40aDg0LjZ2MjM1LjRoNDAuN3oiLz48L3N2Zz4=" alt="Vert.x Logo"/></a></div><div class="navbar-collapse-button"><span></span><span></span><span></span></div><div class="navbar-right"><div class="navbar-menu"><span class="navbar-menu-item with-drop-down"><div class="dropdown"><a class="dropdown-title">开始<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="dropdown-menu"><a href="/introduction-to-vertx-and-reactive/"><li class="dropdown-item">简介</li></a><a href="/get-started/"><li class="dropdown-item">开始</li></a><a href="https://start.vertx.io/" target="_blank" rel="noreferrer"><li class="dropdown-item">App generator <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a></ul></div></span><a class="navbar-menu-item" href="/docs/">文档</a><span class="navbar-menu-item with-drop-down"><div class="dropdown"><a class="dropdown-title">资源<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="dropdown-menu"><a href="/faq/"><li class="dropdown-item">答疑</li></a><a href="/channels/"><li class="dropdown-item">Channels</li></a><a href="https://how-to.vertx.io/" target="_blank" rel="noreferrer"><li class="dropdown-item">How-To’s <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a><a href="https://github.com/vert-x3/vertx-eventbus-bridge-clients" target="_blank" rel="noreferrer"><li class="dropdown-item">EventBus Bridge Clients <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a></ul></div></span><a class="navbar-menu-item" href="/blog/">博客</a><a class="navbar-menu-item" href="/community/">社区</a><a class="navbar-menu-item" href="/translation/">翻译团队</a></div><div class="navbar-social"><a href="https://github.com/vert-x3/vertx-awesome" class="navbar-social-link" title="Awesome Vert.x" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="List of awesome Vert.x projects"><title>Awesome Vert.x</title><path d="M24 11.438l-6.154-5.645-.865.944 5.128 4.7H1.895l5.128-4.705-.865-.943-6.154 5.649H0v3.72c0 1.683 1.62 3.053 3.61 3.053h3.795c1.99 0 3.61-1.37 3.61-3.051v-2.446h1.97v2.446c0 1.68 1.62 3.051 3.61 3.051h3.794c1.99 0 3.61-1.37 3.61-3.051v-3.721z"></path></svg></a><a href="https://stackoverflow.com/questions/tagged/vert.x" class="navbar-social-link" title="Stack Overflow" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Stack Overflow questions related to Vert.x"><title>Stack Overflow</title><path d="M18.986 21.865v-6.404h2.134V24H1.844v-8.539h2.13v6.404h15.012zM6.111 19.731H16.85v-2.137H6.111v2.137zm.259-4.852l10.48 2.189.451-2.07-10.478-2.187-.453 2.068zm1.359-5.056l9.705 4.53.903-1.95-9.706-4.53-.902 1.936v.014zm2.715-4.785l8.217 6.855 1.359-1.62-8.216-6.853-1.35 1.617-.01.001zM15.751 0l-1.746 1.294 6.405 8.604 1.746-1.294L15.749 0h.002z"></path></svg></a><a href="https://www.youtube.com/channel/UCGN6L3tRhs92Uer3c6VxOSA" class="navbar-social-link" title="YouTube" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="YouTube channel of Vert.x"><title>YouTube</title><path d="M23.499 6.203a3.008 3.008 0 00-2.089-2.089c-1.87-.501-9.4-.501-9.4-.501s-7.509-.01-9.399.501a3.008 3.008 0 00-2.088 2.09A31.258 31.26 0 000 12.01a31.258 31.26 0 00.523 5.785 3.008 3.008 0 002.088 2.089c1.869.502 9.4.502 9.4.502s7.508 0 9.399-.502a3.008 3.008 0 002.089-2.09 31.258 31.26 0 00.5-5.784 31.258 31.26 0 00-.5-5.808zm-13.891 9.4V8.407l6.266 3.604z"></path></svg></a><a href="https://discord.gg/KzEMwP2" class="navbar-social-link" title="Discord" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Eclipse Vert.x channel on Discord"><title>Discord</title><path d="M20.222 0c1.406 0 2.54 1.137 2.607 2.475V24l-2.677-2.273-1.47-1.338-1.604-1.398.67 2.205H3.71c-1.402 0-2.54-1.065-2.54-2.476V2.48C1.17 1.142 2.31.003 3.715.003h16.5L20.222 0zm-6.118 5.683h-.03l-.202.2c2.073.6 3.076 1.537 3.076 1.537-1.336-.668-2.54-1.002-3.744-1.137-.87-.135-1.74-.064-2.475 0h-.2c-.47 0-1.47.2-2.81.735-.467.203-.735.336-.735.336s1.002-1.002 3.21-1.537l-.135-.135s-1.672-.064-3.477 1.27c0 0-1.805 3.144-1.805 7.02 0 0 1 1.74 3.743 1.806 0 0 .4-.533.805-1.002-1.54-.468-2.14-1.404-2.14-1.404s.134.066.335.2h.06c.03 0 .044.015.06.03v.006c.016.016.03.03.06.03.33.136.66.27.93.4.466.202 1.065.403 1.8.536.93.135 1.996.2 3.21 0 .6-.135 1.2-.267 1.8-.535.39-.2.87-.4 1.397-.737 0 0-.6.936-2.205 1.404.33.466.795 1 .795 1 2.744-.06 3.81-1.8 3.87-1.726 0-3.87-1.815-7.02-1.815-7.02-1.635-1.214-3.165-1.26-3.435-1.26l.056-.02zm.168 4.413c.703 0 1.27.6 1.27 1.335 0 .74-.57 1.34-1.27 1.34-.7 0-1.27-.6-1.27-1.334.002-.74.573-1.338 1.27-1.338zm-4.543 0c.7 0 1.266.6 1.266 1.335 0 .74-.57 1.34-1.27 1.34-.7 0-1.27-.6-1.27-1.334 0-.74.57-1.338 1.27-1.338z"></path></svg></a><a href="https://groups.google.com/forum/?fromgroups#!forum/vertx" class="navbar-social-link" title="Vert.x User Group" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="A Google group for Vert.x users"><title>Vert.x User Group</title><path d="M.92 3.332c-.776 0-1.216.67-.692 1.383l2.537 4.403v7.86c0 2.013 1.467 3.69 3.459 3.69H20.31a3.75 3.75 0 003.69-3.69V7.043a3.723 3.723 0 00-3.668-3.71zm5.786 3.71H20.1c.587 0 1.153.357 1.153.923 0 .566-.566.922-1.153.922H6.706c-.587 0-1.153-.356-1.153-.922 0-.566.566-.923 1.153-.923zm0 3.69H20.1c.587 0 1.153.356 1.153.922 0 .566-.566.922-1.153.922H6.706c-.587 0-1.153-.356-1.153-.922 0-.566.566-.922 1.153-.922zm-.021 3.71h9.705c.587 0 1.153.356 1.153.922 0 .566-.566.923-1.153.923H6.685c-.587 0-1.153-.357-1.153-.923 0-.566.566-.922 1.153-.922Z"></path></svg></a><a href="https://shang.qq.com/wpa/qunwpa?idkey=587f58cacb9557e3291b46098e0fe09427b98a1c0f866da23c04c2762bc7e2ad" class="navbar-social-link" title="Vert.x中国用户组QQ群" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Vert.x中国用户组QQ群"><title>Vert.x中国用户组QQ群</title><path d="M21.395 15.035a39.548 39.548 0 0 0-.803-2.264l-1.079-2.695c.001-.032.014-.562.014-.836C19.526 4.632 17.351 0 12 0S4.474 4.632 4.474 9.241c0 .274.013.804.014.836l-1.08 2.695a38.97 38.97 0 0 0-.802 2.264c-1.021 3.283-.69 4.643-.438 4.673.54.065 2.103-2.472 2.103-2.472 0 1.469.756 3.387 2.394 4.771-.612.188-1.363.479-1.845.835-.434.32-.379.646-.301.778.343.578 5.883.369 7.482.189 1.6.18 7.14.389 7.483-.189.078-.132.132-.458-.301-.778-.483-.356-1.233-.646-1.846-.836 1.637-1.384 2.393-3.302 2.393-4.771 0 0 1.563 2.537 2.103 2.472.251-.03.581-1.39-.438-4.673zM12.662 4.846c.039-1.052.659-1.878 1.385-1.846s1.281.912 1.242 1.964c-.039 1.051-.659 1.878-1.385 1.846s-1.282-.912-1.242-1.964zM9.954 3c.725-.033 1.345.794 1.384 1.846.04 1.052-.517 1.931-1.242 1.963-.726.033-1.346-.794-1.385-1.845C8.672 3.912 9.228 3.033 9.954 3zM7.421 8.294c.194-.43 2.147-.908 4.566-.908h.026c2.418 0 4.372.479 4.566.908a.14.14 0 0 1 .014.061c0 .031-.01.059-.026.083-.163.238-2.333 1.416-4.553 1.416h-.026c-2.221 0-4.39-1.178-4.553-1.416a.136.136 0 0 1-.014-.144zm10.422 8.622c-.22 3.676-2.403 5.987-5.774 6.021h-.137c-3.37-.033-5.554-2.345-5.773-6.021-.081-1.35.001-2.496.147-3.43.318.063.638.122.958.176v3.506s1.658.334 3.318.103v-3.225c.488.027.96.04 1.406.034h.025c1.678.021 3.714-.204 5.683-.594.146.934.227 2.08.147 3.43zM10.48 5.804c.313-.041.542-.409.508-.825-.033-.415-.314-.72-.629-.679-.313.04-.541.409-.508.824.034.417.315.72.629.68zM14.479 5.156c.078.037.221.042.289-.146.035-.095.025-.165-.009-.214-.023-.033-.133-.118-.371-.176-.904-.22-1.341.384-1.405.499-.04.072-.012.176.056.227.067.051.139.037.179-.006.58-.628 1.21-.208 1.261-.184z"></path></svg></a></div></div></div></div></header><div class="page-content"><div class="container"><div class="blog-post"><div class="blog-navbar"><h2>Blog</h2><ul><li><a href="/blog/">All posts</a></li><li><a href="/blog/category/releases/">releases</a></li><li><a href="/blog/category/guides/">guides</a></li><li><a href="/blog/category/news/">news</a></li></ul><div class="feed-icons"><a href="/feed/atom.xml"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></div></div><div class="blog-post-main"><div class="blog-post-content"><h1>Unit and Integration Tests</h1><span><p>Let’s re­fresh our mind about what we de­vel­oped so far in the <em>in­tro­duc­tion to vert.x</em> se­ries. In <a href="/blog/my-first-vert-x-3-application/">the first post</a>, we de­vel­oped a very sim­ple Vert.x 3 ap­pli­ca­tion, and saw how this ap­pli­ca­tion can be tested, pack­aged and ex­e­cuted. In <a href="/blog/vert-x-application-configuration/">the sec­ond post</a>, we saw how this ap­pli­ca­tion be­came con­fig­urable and how we can use a ran­dom port in test, and use an­other con­fig­urable port in pro­duc­tion. Fi­nally, the <a href="/blog/some-rest-with-vert-x/">pre­vi­ous post</a> has shown how to use vertx-​web and how to im­ple­ment a small REST API. How­ever, we for­got an im­por­tant task. We didn’t test the API. In this post we will in­crease the con­fi­dence we have on this ap­pli­ca­tion by im­ple­ment­ing unit and in­te­gra­tion tests.</p><p>The code of this post is avail­able in the <a href="https://github.com/cescoffier/my-vertx-first-app/tree/post-4">post-4 branch</a> of the <a href="https://github.com/cescoffier/my-vertx-first-app">project</a>. The start­ing post, how­ever is the code avail­able in the <a href="https://github.com/cescoffier/my-vertx-first-app/tree/post-3">post-3 branch</a>.</p><h2 id="tests-tests-tests"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#tests-tests-tests"></a>Tests, Tests, Tests…</h2><p>This post is mainly about tests. We dis­tin­guish two types of tests: unit tests and in­te­gra­tion tests. Both are equally im­por­tant, but have dif­fer­ent focus. Unit tests en­sure that one <em>com­po­nent</em> of your ap­pli­ca­tion, gen­er­ally a class in the Java world, be­haves as ex­pected. The ap­pli­ca­tion is not tested as a whole, but pieces by pieces. In­te­gra­tion tests are more <em>black box</em> in the sense that the ap­pli­ca­tion is started and tested gen­er­ally ex­ter­nally.</p><p>In this post we are going to start with some more unit tests as a warm up ses­sion and then focus on in­te­gra­tion tests. If you al­ready im­ple­mented in­te­gra­tion tests, you may be a bit scared, and it makes sense. But don’t worry, with Vert.x there are no hid­den sur­prises.</p><h2 id="warmup-some-more-unit-tests"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#warmup-some-more-unit-tests"></a>Warmup: Some more unit tests</h2><p>Let’s start slowly. Re­mem­ber in the first post we have im­ple­mented a unit test with <a href="/docs/vertx-unit/java/">vertx-​unit</a>. The test we did is dead sim­ple:</p><ol><li>we started the ap­pli­ca­tion be­fore the test</li><li>we checks that it replies “Hello”</li></ol><p>Just to re­fresh your mind, let’s have a look at the <a href="https://github.com/cescoffier/my-vertx-first-app/blob/post-4/src/test/java/io/vertx/blog/first/MyFirstVerticleTest.java">code</a></p><pre><code class="hljs language-java"><span class="hljs-meta">@Before</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setUp</span><span class="hljs-params">(TestContext context)</span> <span class="hljs-keyword">throws</span> IOException </span>{
  vertx = Vertx.vertx();
  ServerSocket socket = <span class="hljs-keyword">new</span> ServerSocket(<span class="hljs-number">0</span>);
  port = socket.getLocalPort();
  socket.close();
  DeploymentOptions options = <span class="hljs-keyword">new</span> DeploymentOptions()
      .setConfig(<span class="hljs-keyword">new</span> JsonObject().put(<span class="hljs-string">&quot;http.port&quot;</span>, port)
      );
  vertx.deployVerticle(MyFirstVerticle.class.getName(), options, context.asyncAssertSuccess());
}
</code></pre><p>The <code>setUp</code> method is in­voked be­fore each test (as in­structed by the <code>@Before</code> an­no­ta­tion). It, first, cre­ates a new in­stance of Vert.x. Then, it gets a free port and then de­ploys our ver­ti­cle with the right con­fig­u­ra­tion. Thanks to the <code>context.asyncAssertSuccess()</code> it waits until the suc­cess­ful de­ploy­ment of the ver­ti­cle.</p><p>The <code>tearDown</code> is straight­for­ward and just closes the Vert.x in­stance. It au­to­mat­i­cally un-​deploys the ver­ti­cles:</p><pre><code class="hljs language-java"><span class="hljs-meta">@After</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">tearDown</span><span class="hljs-params">(TestContext context)</span> </span>{
  vertx.close(context.asyncAssertSuccess());
}
</code></pre><p>Fi­nally, our sin­gle test is:</p><pre><code class="hljs language-java"><span class="hljs-meta">@Test</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testMyApplication</span><span class="hljs-params">(TestContext context)</span> </span>{
  <span class="hljs-keyword">final</span> Async async = context.async();
  vertx.createHttpClient().getNow(port, <span class="hljs-string">&quot;localhost&quot;</span>, <span class="hljs-string">&quot;/&quot;</span>, response -&gt; {
    response.handler(body -&gt; {
      context.assertTrue(body.toString().contains(<span class="hljs-string">&quot;Hello&quot;</span>));
      async.complete();
    });
  });
 }
</code></pre><p>It is only check­ing that the ap­pli­ca­tion replies “Hello” when we emit a HTTP re­quest on <code>/</code>.</p><p>Let’s now try to im­ple­ment some unit tests checkin that our web ap­pli­ca­tion and the REST API be­have as ex­pected. Let’s start by check­ing that the <code>index.html</code> page is cor­rectly served. This test is very sim­i­lar to the pre­vi­ous one:</p><pre><code class="hljs language-java"><span class="hljs-meta">@Test</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">checkThatTheIndexPageIsServed</span><span class="hljs-params">(TestContext context)</span> </span>{
  Async async = context.async();
  vertx.createHttpClient().getNow(port, <span class="hljs-string">&quot;localhost&quot;</span>, <span class="hljs-string">&quot;/assets/index.html&quot;</span>, response -&gt; {
    context.assertEquals(response.statusCode(), <span class="hljs-number">200</span>);
    context.assertEquals(response.headers().get(<span class="hljs-string">&quot;content-type&quot;</span>), <span class="hljs-string">&quot;text/html&quot;</span>);
    response.bodyHandler(body -&gt; {
      context.assertTrue(body.toString().contains(<span class="hljs-string">&quot;&lt;title&gt;My Whisky Collection&lt;/title&gt;&quot;</span>));
      async.complete();
    });
  });
}
</code></pre><p>We re­trieve the <code>index.html</code> page and check:</p><ol><li>it’s there (sta­tus code 200)</li><li>it’s a HTML page (con­tent type set to “text/html”)</li><li>it has the right title (“My Whisky Col­lec­tion”)</li></ol><div class="alert info"><p>As you can see, we can test the sta­tus code and the head­ers di­rectly on the HTTP re­sponse, but en­sure that the body is right, we need to re­trieve it. This is done with a body han­dler that re­ceives the com­plete body as pa­ra­me­ter. Once the last check is made, we re­lease the <code>async</code> by call­ing <code>complete</code>.</p></div><p>Ok, great, but this ac­tu­ally does not test our REST API. Let’s en­sure that we can add a bot­tle to the col­lec­tion. Un­like the pre­vi­ous tests, this one is using <code>post</code> to <em>post</em> data to the server:</p><pre><code class="hljs language-java"><span class="hljs-meta">@Test</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">checkThatWeCanAdd</span><span class="hljs-params">(TestContext context)</span> </span>{
  Async async = context.async();
  <span class="hljs-keyword">final</span> String json = Json.encodePrettily(<span class="hljs-keyword">new</span> Whisky(<span class="hljs-string">&quot;Jameson&quot;</span>, <span class="hljs-string">&quot;Ireland&quot;</span>));
  <span class="hljs-keyword">final</span> String length = Integer.toString(json.length());
  vertx.createHttpClient().post(port, <span class="hljs-string">&quot;localhost&quot;</span>, <span class="hljs-string">&quot;/api/whiskies&quot;</span>)
      .putHeader(<span class="hljs-string">&quot;content-type&quot;</span>, <span class="hljs-string">&quot;application/json&quot;</span>)
      .putHeader(<span class="hljs-string">&quot;content-length&quot;</span>, length)
      .handler(response -&gt; {
        context.assertEquals(response.statusCode(), <span class="hljs-number">201</span>);
        context.assertTrue(response.headers().get(<span class="hljs-string">&quot;content-type&quot;</span>).contains(<span class="hljs-string">&quot;application/json&quot;</span>));
        response.bodyHandler(body -&gt; {
          <span class="hljs-keyword">final</span> Whisky whisky = Json.decodeValue(body.toString(), Whisky.class);
          context.assertEquals(whisky.getName(), &quot;Jameson&quot;);
          context.assertEquals(whisky.getOrigin(), &quot;Ireland&quot;);
          context.assertNotNull(whisky.getId());
          async.complete();
        });
      })
      .write(json)
      .end();
}
</code></pre><p>First we cre­ate the con­tent we want to add. The server con­sumes JSON data, so we need a JSON string. You can ei­ther write your JSON doc­u­ment man­u­ally, or use the Vert.x method (<code>Json.encodePrettily</code>) as done here. Once we have the con­tent, we cre­ate a <code>post</code> re­quest. We need to con­fig­ure some head­ers to be cor­rectly read by the server. First, we say that we are send­ing JSON data and we also set the con­tent length. We also at­tach a re­sponse han­dler very close to the checks made in the pre­vi­ous test. No­tice that we can re­build our ob­ject from the JSON doc­u­ment send by the server using the <code>JSON.decodeValue</code> method. It’s very con­ve­nient as it avoids lots of boil­er­plate code.  At this point the re­quest is not emit­ted, we need to write the data and call the <code>end()</code> method. This is made using <code>.write(json).end();</code>.</p><p>The order of the meth­ods is im­por­tant. You can­not <em>write</em> data if you don’t have a re­sponse han­dler con­fig­ured. Fi­nally don’t for­get to call <code>end</code>.</p><p>So, let’s try this. You can run the test using:</p><pre><code class="hljs language-bash">mvn clean <span class="hljs-built_in">test</span>
</code></pre><p>We could con­tinue writ­ing more unit test like that, but it could be­come quite com­plex. Let’s see how we could con­tinue our tests using in­te­gra­tion tests.</p><h2 id="it-hurts"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#it-hurts"></a>IT hurts</h2><p>Well, I think we need to make that clear, in­te­gra­tion test­ing hurts. If you have ex­pe­ri­ence in this area, can you re­mem­ber how long did it take to setup every­thing cor­rectly? I get new white hairs by just think­ing about it. Why are in­te­gra­tion tests more com­pli­cated? It’s ba­si­cally be­cause of the setup:</p><ol><li>We must start the ap­pli­ca­tion in a <em>close to pro­duc­tion</em> way</li><li>We must then run the tests (and con­fig­ure them to hit the right ap­pli­ca­tion in­stance)</li><li>We must stop the ap­pli­ca­tion</li></ol><p>That does not sound un­con­quer­able like that, but if you need Linux, MacOS X and Win­dows sup­port, it quickly get messy. There are plenty of great frame­works eas­ing this such as <a href="http://arquillian.org">Ar­quil­lian</a>, but let’s do it with­out any frame­work to un­der­stand how it works.</p><h2 id="we-need-a-battle-plan"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#we-need-a-battle-plan"></a>We need a battle plan</h2><p>Be­fore rush­ing into the com­plex con­fig­u­ra­tion, let’s think a minute about the tasks:</p><p><strong>Step 1 - Re­serve a free port</strong>
We need to get a free port on which the ap­pli­ca­tion can <em>lis­ten</em>, and we need to in­ject this port in our in­te­gra­tion tests.</p><p><strong>Step 2 - Gen­er­ate the ap­pli­ca­tion con­fig­u­ra­tion</strong>
Once we have the free port, we need to write a JSON file con­fig­ur­ing the ap­pli­ca­tion HTTP Port to this port.</p><p><strong>Step 3 - Start the ap­pli­ca­tion</strong>
Sounds easy right? Well it’s not that sim­ple as we need to launch our ap­pli­ca­tion in a back­ground process.</p><p><strong>Step 4 - Ex­e­cute the in­te­gra­tion tests</strong>
Fi­nally, the cen­tral part, run the tests. But be­fore that we should im­ple­ment some in­te­gra­tion tests. Let’s come to that later.</p><p><strong>Step 5 - Stop the ap­pli­ca­tion</strong>
Once the tests have been ex­e­cuted, re­gard­less if there are fail­ures or er­rors in the tests, we need to stop the ap­pli­ca­tion.</p><p>There are mul­ti­ple way to im­ple­ment this plan. We are going to use a <em>generic</em> way. It’s not nec­es­sar­ily the bet­ter, but can be ap­plied al­most every­where. The ap­proach is tight to Apache Maven. If you want to pro­pose an al­ter­na­tive using Gra­dle or a dif­fer­ent tool, I will be happy to add your way to the post.</p><h2 id="implement-the-plan"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#implement-the-plan"></a>Implement the plan</h2><p>As said above, this sec­tion is Maven-​centric, and most of the code goes in the <a href="https://github.com/cescoffier/my-vertx-first-app/blob/post-4/pom.xml">pom.xml</a> file. If you never used the dif­fer­ent Maven life­cy­cle phases, I rec­om­mend you to look at the <a href="https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html">in­tro­duc­tion to the Maven life­cy­cle</a>.</p><p>We need to add and con­fig­ure a cou­ple of plu­g­ins. Open the <code>pom.xml</code> file and in the <code>&lt;plugins&gt;</code> sec­tion add:</p><pre><code class="hljs language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.codehaus.mojo<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>build-helper-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.9.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">executions</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">execution</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>reserve-network-port<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">goals</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>reserve-network-port<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">goals</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">phase</span>&gt;</span>process-sources<span class="hljs-tag">&lt;/<span class="hljs-name">phase</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">portNames</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">portName</span>&gt;</span>http.port<span class="hljs-tag">&lt;/<span class="hljs-name">portName</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">portNames</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">execution</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">executions</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
</code></pre><p>We use the <code>build-helper-maven-plugin</code> (a plug­in to know if you are often using Maven) to pick up a free port. Once found, the plug­in as­signs the <code>http.port</code> vari­able to the picked port. We ex­e­cute this plug­in early in the build (dur­ing the <code>process-sources</code> phase), so we can use the <code>http.port</code> vari­able in the other plug­in. This was for the first step.</p><p>Two ac­tions are re­quired for the sec­ond step. First, in the <code>pom.xml</code> file, just below the <code>&lt;build&gt;</code> open­ing tag, add:</p><pre><code class="hljs language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">testResources</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">testResource</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>src/test/resources<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">filtering</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">filtering</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">testResource</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">testResources</span>&gt;</span>
</code></pre><p>This in­structs Maven to <em>fil­ter</em> re­sources from the <code>src/test/resources</code> di­rec­tory. <em>Fil­ter</em> means re­plac­ing place­hold­ers by ac­tual val­ues. That’s ex­actly what we need as we now have the <code>http.port</code> vari­able. So cre­ate the <code>src/test/resources/my-it-config.json</code> file with the fol­low­ing con­tent:</p><pre><code class="hljs language-javascript">{
  <span class="hljs-string">&quot;http.port&quot;</span>: ${http.port}
}
</code></pre><p>This con­fig­u­ra­tion file is sim­i­lar to the one we did in pre­vi­ous posts. The only dif­fer­ence is the <code>${http.port}</code> which is the (de­fault) Maven syn­tax for fil­ter­ing. So, when Maven is going to process or file it will re­place <code>${http.port}</code> by the se­lected port. That’s all for the sec­ond step.</p><p>The step 3 and 5 are a bit more tricky. We should start and stop the ap­pli­ca­tion. We are going to use the <code>maven-antrun-plugin</code> to achieve this. In the <code>pom.xml</code> file, below the <code>build-helper-maven-plugin</code>, add:</p><pre><code class="hljs language-xml"><span class="hljs-comment">&lt;!-- We use the maven-antrun-plugin to start the application before the integration tests
and stop them afterward --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-antrun-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.8<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">executions</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">execution</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>start-vertx-app<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">phase</span>&gt;</span>pre-integration-test<span class="hljs-tag">&lt;/<span class="hljs-name">phase</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">goals</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>run<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">goals</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">target</span>&gt;</span>
          <span class="hljs-comment">&lt;!--
          Launch the application as in &#x27;production&#x27; using the fatjar.
          We pass the generated configuration, configuring the http port to the picked one
          --&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">exec</span> <span class="hljs-attr">executable</span>=<span class="hljs-string">&quot;${java.home}/bin/java&quot;</span>
                <span class="hljs-attr">dir</span>=<span class="hljs-string">&quot;${project.build.directory}&quot;</span>
                <span class="hljs-attr">spawn</span>=<span class="hljs-string">&quot;true&quot;</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">arg</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;-jar&quot;</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">arg</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;${project.artifactId}-${project.version}-fat.jar&quot;</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">arg</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;-conf&quot;</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">arg</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;${project.build.directory}/test-classes/my-it-config.json&quot;</span>/&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">exec</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">target</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">execution</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">execution</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>stop-vertx-app<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">phase</span>&gt;</span>post-integration-test<span class="hljs-tag">&lt;/<span class="hljs-name">phase</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">goals</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>run<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">goals</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
        <span class="hljs-comment">&lt;!--
          Kill the started process.
          Finding the right process is a bit tricky. Windows command in in the windows profile (below)
          --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">target</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">exec</span> <span class="hljs-attr">executable</span>=<span class="hljs-string">&quot;bash&quot;</span>
                <span class="hljs-attr">dir</span>=<span class="hljs-string">&quot;${project.build.directory}&quot;</span>
                <span class="hljs-attr">spawn</span>=<span class="hljs-string">&quot;false&quot;</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">arg</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;-c&quot;</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">arg</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;ps ax | grep -Ei &#x27;[\-]DtestPort=${http.port}\s+\-jar\s+${project.artifactId}&#x27; | awk &#x27;NR==1{print $1}&#x27; | xargs kill -SIGTERM&quot;</span>/&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">exec</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">target</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">execution</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">executions</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
</code></pre><p>That’s a huge piece of XML, isn’t it ? We con­fig­ure two ex­e­cu­tions of the plug­in. The first one, hap­pen­ing in the <code>pre-integration-test</code> phase, ex­e­cutes a set of bash com­mand to start the ap­pli­ca­tion. It ba­si­cally ex­e­cutes:</p><pre><code class="hljs language-bash">java -jar my-first-app-1.0-SNAPSHOT-fat.jar -conf .../my-it-config.json
</code></pre><div class="alert info"><div class="alert-title">Is the fatjar created?</div><p>The fat jar em­bed­ding our ap­pli­ca­tion is cre­ated in the <code>package</code> phase, pre­ced­ing the <code>pre-integration-test</code>, so yes, the fat jar is cre­ated.</p></div><p>As men­tioned above, we launch the ap­pli­ca­tion as we would in a pro­duc­tion en­vi­ron­ment.</p><p>Once, the in­te­gra­tion tests are ex­e­cuted (step 4 we didn’t look at it yet), we need to stop the ap­pli­ca­tion (so in the the <code>post-integration-test</code> phase).  To close the ap­pli­ca­tion, we are going to in­voke some shell magic com­mand to find our process in with the <code>ps</code> com­mand and send the <code>SIGTERM</code> sig­nal. It is equiv­a­lent to:</p><pre><code class="hljs language-bash">ps
.... -&gt; find your process id
<span class="hljs-built_in">kill</span> your_process_id -SIGTERM
</code></pre><div class="alert info"><div class="alert-title">And Windows?</div><p>I men­tioned it above, we want Win­dows to be sup­ported and these com­mands are not going to work on Win­dows. Don’t worry, Win­dows con­fig­u­ra­tion is below …</p></div><p>We should now do the fourth step we (silently) skipped. To ex­e­cute our in­te­gra­tion tests, we use the <code>maven-failsafe-plugin</code>. Add the fol­low­ing plug­in con­fig­u­ra­tion to your <code>pom.xml</code> file:</p><pre><code class="hljs language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-failsafe-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.18.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">executions</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">execution</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">goals</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>integration-test<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>verify<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">goals</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">systemProperties</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">http.port</span>&gt;</span>${http.port}<span class="hljs-tag">&lt;/<span class="hljs-name">http.port</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">systemProperties</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">execution</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">executions</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
</code></pre><p>As you can see, we pass the <code>http.port</code> prop­erty as a sys­tem vari­able, so our tests are able to con­nect on the right port.</p><p>That’s all! Wow… Let’s try this (for win­dows users, you will need to be pa­tient or to jump to the last sec­tion).</p><pre><code class="hljs language-bash">mvn clean verify
</code></pre><p>We should not use <code>mvn integration-test</code> be­cause the ap­pli­ca­tion would still be run­ning. The <code>verify</code> phase is after the <code>post-integration-test</code> phase and will analyse the integration-​tests re­sults. Build fail­ures be­cause of in­te­gra­tion tests failed as­ser­tions are re­ported in this phase.</p><h2 id="hey-we-dont-have-integration-tests-"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#hey-we-dont-have-integration-tests-"></a>Hey, we don’t have integration tests !</h2><p>And that’s right, we set up every­thing, but we don’t have a sin­gle in­te­gra­tion test. To ease the im­ple­men­ta­tion, let’s use two li­braries: <a href="http://joel-costigliola.github.io/assertj/">As­sertJ</a> and <a href="https://github.com/jayway/rest-assured">Rest-​Assured</a>.</p><p>As­sertJ pro­poses a set of as­ser­tions that you can chain and use flu­ently. Rest As­sured is a frame­work to test REST API.</p><p>In the <code>pom.xml</code> file, add the two fol­low­ing de­pen­den­cies just be­fore <code>&lt;/dependencies&gt;</code>:</p><pre><code class="hljs language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.jayway.restassured<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>rest-assured<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.4.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.assertj<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>assertj-core<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre><p>Then, cre­ate the <code>src/test/java/io/vertx/blog/first/MyRestIT.java</code> file. Un­like unit test, in­te­gra­tion test ends with <code>IT</code>. It’s a con­ven­tion from the Fail­safe plug­in to dis­tin­guish unit (start­ing or end­ing with <em>Test</em>) from in­te­gra­tion tests (start­ing or end­ing with <em>IT</em>). In the cre­ated file add:</p><pre><code class="hljs language-java"><span class="hljs-keyword">package</span> io.vertx.blog.first;

<span class="hljs-keyword">import</span> com.jayway.restassured.RestAssured;
<span class="hljs-keyword">import</span> org.junit.AfterClass;
<span class="hljs-keyword">import</span> org.junit.BeforeClass;

<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyRestIT</span> </span>{

  <span class="hljs-meta">@BeforeClass</span>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">configureRestAssured</span><span class="hljs-params">()</span> </span>{
    RestAssured.baseURI = <span class="hljs-string">&quot;http://localhost&quot;</span>;
    RestAssured.port = Integer.getInteger(<span class="hljs-string">&quot;http.port&quot;</span>, <span class="hljs-number">8080</span>);
  }

  <span class="hljs-meta">@AfterClass</span>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">unconfigureRestAssured</span><span class="hljs-params">()</span> </span>{
    RestAssured.reset();
  }
}
</code></pre><p>The meth­ods an­no­tated with <code>@BeforeClass</code> and <code>@AfterClass</code> are in­voked once be­fore / after all tests of the class. Here, we just re­trieve the http port (passed as a sys­tem prop­erty) and we con­fig­ure REST As­sured.</p><div class="alert info"><div class="alert-title">Am I ready to serve?</div><p>You may need to wait in the <code>configureRestAssured</code> method that the HTTP server has been started. We rec­om­mend the <a href="https://github.com/jayway/awaitility">await­il­ity</a> test frame­work to check that the re­quest can be served. It would fail the test if the server does not start.</p></div><p>It’s now time to im­ple­ment a real test. Let’s check we can re­trieve an in­di­vid­ual prod­uct:</p><pre><code class="hljs language-java"><span class="hljs-meta">@Test</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">checkThatWeCanRetrieveIndividualProduct</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-comment">// Get the list of bottles, ensure it&#x27;s a success and extract the first id.</span>
  <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> id = get(<span class="hljs-string">&quot;/api/whiskies&quot;</span>).then()
      .assertThat()
      .statusCode(<span class="hljs-number">200</span>)
      .extract()
      .jsonPath().getInt(<span class="hljs-string">&quot;find { it.name==&#x27;Bowmore 15 Years Laimrig&#x27; }.id&quot;</span>);
  <span class="hljs-comment">// Now get the individual resource and check the content</span>
  get(<span class="hljs-string">&quot;/api/whiskies/&quot;</span> + id).then()
      .assertThat()
      .statusCode(<span class="hljs-number">200</span>)
      .body(<span class="hljs-string">&quot;name&quot;</span>, equalTo(<span class="hljs-string">&quot;Bowmore 15 Years Laimrig&quot;</span>))
      .body(<span class="hljs-string">&quot;origin&quot;</span>, equalTo(<span class="hljs-string">&quot;Scotland, Islay&quot;</span>))
      .body(<span class="hljs-string">&quot;id&quot;</span>, equalTo(id));
}
</code></pre><p>Here you can ap­pre­ci­ate the power and ex­pres­sive­ness of Rest As­sured. We re­trieve the list of prod­uct, en­sure the re­sponse is cor­rect, and ex­tract the <em>id</em> of a spe­cific bot­tle using a JSON (Groovy) Path ex­pres­sion.</p><p>Then, we try to re­trieve the meta­data of this in­di­vid­ual prod­uct, and check the re­sult.</p><p>Let’s now im­ple­ment a more so­phis­ti­cated sce­nario. Let’s add and delete a prod­uct:</p><pre><code class="hljs language-java"><span class="hljs-meta">@Test</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">checkWeCanAddAndDeleteAProduct</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-comment">// Create a new bottle and retrieve the result (as a Whisky instance).</span>
  Whisky whisky = given()
      .body(<span class="hljs-string">&quot;{\&quot;name\&quot;:\&quot;Jameson\&quot;, \&quot;origin\&quot;:\&quot;Ireland\&quot;}&quot;</span>).request().post(<span class="hljs-string">&quot;/api/whiskies&quot;</span>).thenReturn().as(Whisky.class);
  assertThat(whisky.getName()).isEqualToIgnoringCase(&quot;Jameson&quot;);
  assertThat(whisky.getOrigin()).isEqualToIgnoringCase(&quot;Ireland&quot;);
  assertThat(whisky.getId()).isNotZero();
  // Check that it has created an individual resource, and check the content.
  get(&quot;/api/whiskies/&quot; + whisky.getId()).then()
      .assertThat()
      .statusCode(<span class="hljs-number">200</span>)
      .body(<span class="hljs-string">&quot;name&quot;</span>, equalTo(<span class="hljs-string">&quot;Jameson&quot;</span>))
      .body(<span class="hljs-string">&quot;origin&quot;</span>, equalTo(<span class="hljs-string">&quot;Ireland&quot;</span>))
      .body(<span class="hljs-string">&quot;id&quot;</span>, equalTo(whisky.getId()));
  <span class="hljs-comment">// Delete the bottle</span>
  delete(<span class="hljs-string">&quot;/api/whiskies/&quot;</span> + whisky.getId()).then().assertThat().statusCode(<span class="hljs-number">204</span>);
  <span class="hljs-comment">// Check that the resource is not available anymore</span>
  get(<span class="hljs-string">&quot;/api/whiskies/&quot;</span> + whisky.getId()).then()
      .assertThat()
      .statusCode(<span class="hljs-number">404</span>);
}
</code></pre><p>So, now we have in­te­gra­tion tests let’s try:</p><pre><code class="hljs language-bash">mvn clean verify
</code></pre><p>Sim­ple no? Well, sim­ple once the setup is done right… You can con­tinue im­ple­ment­ing other in­te­gra­tion tests to be sure that every­thing be­have as you ex­pect.</p><h2 id="dear-windows-users"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#dear-windows-users"></a>Dear Windows users…</h2><p>This sec­tion is the bonus part for Win­dows user, or peo­ple want­ing to run their in­te­gra­tion tests on Win­dows ma­chine too. The com­mand we ex­e­cute to stop the ap­pli­ca­tion is not going to work on Win­dows. Luck­ily, it’s pos­si­ble to ex­tend the <code>pom.xml</code> with a pro­file ex­e­cuted on Win­dows.</p><p>In your <code>pom.xml</code>, just after <code>&lt;/build&gt;</code>, add:</p><pre><code class="hljs language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">profiles</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- A profile for windows as the stop command is different --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">profile</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>windows<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">activation</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">os</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>windows<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">os</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">activation</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-antrun-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.8<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">executions</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">execution</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>stop-vertx-app<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">phase</span>&gt;</span>post-integration-test<span class="hljs-tag">&lt;/<span class="hljs-name">phase</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">goals</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>run<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span>
              <span class="hljs-tag">&lt;/<span class="hljs-name">goals</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">target</span>&gt;</span>
                  <span class="hljs-tag">&lt;<span class="hljs-name">exec</span> <span class="hljs-attr">executable</span>=<span class="hljs-string">&quot;wmic&quot;</span>
                      <span class="hljs-attr">dir</span>=<span class="hljs-string">&quot;${project.build.directory}&quot;</span>
                      <span class="hljs-attr">spawn</span>=<span class="hljs-string">&quot;false&quot;</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">arg</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;process&quot;</span>/&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">arg</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;where&quot;</span>/&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">arg</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;CommandLine like &#x27;%${project.artifactId}%&#x27; and not name=&#x27;wmic.exe&#x27;&quot;</span>/&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">arg</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;delete&quot;</span>/&gt;</span>
                  <span class="hljs-tag">&lt;/<span class="hljs-name">exec</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">target</span>&gt;</span>
              <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">execution</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">executions</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">profile</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">profiles</span>&gt;</span>
</code></pre><p>This pro­file re­places the ac­tions de­scribed above to stop the ap­pli­ca­tion with a ver­sion work­ing on win­dows. The pro­file is au­to­mat­i­cally en­abled on Win­dows. As on oth­ers op­er­at­ing sys­tems, ex­e­cute with:</p><pre><code class="hljs language-bash">mvn clean verify
</code></pre><h2 id="conclusion"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#conclusion"></a>Conclusion</h2><p>Wow, what a trip ! We are done… In this post we have seen how we can gain con­fi­dence in Vert.x ap­pli­ca­tions by im­ple­ment­ing both unit and in­te­gra­tion tests. Unit tests, thanks to vert.x unit, are able to check the asyn­chro­nous as­pect of Vert.x ap­pli­ca­tion, but could be com­plex for large sce­nar­ios. Thanks to Rest As­sured and As­sertJ, in­te­gra­tion tests are dead sim­ple to write… but the setup is not straight­for­ward. This post have shown how it can be con­fig­ured eas­ily. Ob­vi­ously, you could also use As­sertJ and Rest As­sured in your unit tests.</p><p>In the <a href="/blog/using-the-asynchronous-sql-client/">next post</a>, we re­place the <em>in mem­ory</em> back­end with a data­base, and use asyn­chro­nous in­te­gra­tion with this data­base.</p><p>Stay Tuned &amp; Happy Cod­ing !</p></span></div><div class="blog-post-sidebar"><div class="blog-post-author"><img class="blog-post-author-avatar" src="https://github.com/cescoffier.png?size=160"/><div class="blog-post-author-name">by <a href="https://github.com/cescoffier" target="_blank" rel="noopener noreferrer">Clement Escoffier</a></div></div><div class="blog-post-sidebar-date">Posted on <!-- -->3 August 2015</div>in <a class="blog-post-sidebar-category" href="/blog/category/guides/">guides</a><div class="blog-post-sidebar-reading-time"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg> <!-- -->15 min read</div><div class="blog-post-sidebar-share-icons"><a href="https://twitter.com/intent/tweet?text=Unit%20and%20Integration%20Tests&amp;url=https%3A%2F%2Fvertx-china.github.io%2Fblog%2Funit-and-integration-tests&amp;via=vertx_project" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><title>Twitter</title><path d="M23.954 4.569c-.885.389-1.83.654-2.825.775 1.014-.611 1.794-1.574 2.163-2.723-.951.555-2.005.959-3.127 1.184-.896-.959-2.173-1.559-3.591-1.559-2.717 0-4.92 2.203-4.92 4.917 0 .39.045.765.127 1.124C7.691 8.094 4.066 6.13 1.64 3.161c-.427.722-.666 1.561-.666 2.475 0 1.71.87 3.213 2.188 4.096-.807-.026-1.566-.248-2.228-.616v.061c0 2.385 1.693 4.374 3.946 4.827-.413.111-.849.171-1.296.171-.314 0-.615-.03-.916-.086.631 1.953 2.445 3.377 4.604 3.417-1.68 1.319-3.809 2.105-6.102 2.105-.39 0-.779-.023-1.17-.067 2.189 1.394 4.768 2.209 7.557 2.209 9.054 0 13.999-7.496 13.999-13.986 0-.209 0-.42-.015-.63.961-.689 1.8-1.56 2.46-2.548l-.047-.02z"></path></svg></a><a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fvertx-china.github.io%2Fblog%2Funit-and-integration-tests" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><title>LinkedIn</title><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"></path></svg></a><a href="https://www.facebook.com/sharer.php?u=https%3A%2F%2Fvertx-china.github.io%2Fblog%2Funit-and-integration-tests" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><title>Facebook</title><path d="M23.9981 11.9991C23.9981 5.37216 18.626 0 11.9991 0C5.37216 0 0 5.37216 0 11.9991C0 17.9882 4.38789 22.9522 10.1242 23.8524V15.4676H7.07758V11.9991H10.1242V9.35553C10.1242 6.34826 11.9156 4.68714 14.6564 4.68714C15.9692 4.68714 17.3424 4.92149 17.3424 4.92149V7.87439H15.8294C14.3388 7.87439 13.8739 8.79933 13.8739 9.74824V11.9991H17.2018L16.6698 15.4676H13.8739V23.8524C19.6103 22.9522 23.9981 17.9882 23.9981 11.9991Z"></path></svg></a></div></div></div><div class="blog-post-next-prev"><div class="blog-post-next-prev-entry"><h5>Next post</h5><div class="blog-entry"><div class="blog-entry-meta"><div class="blog-entry-meta-left"><span class="blog-entry-date">31 August 2015</span>​<a class="blog-entry-category" href="/blog/category/guides/">guides</a></div><div class="blog-entry-meta-right"></div></div><h3><a href="/blog/vert-x3-real-time-web-apps/">Vert.x 3 real time web apps</a></h3><span class="blog-entry-authors"><ul><li class=""><img src="https://github.com/pmlopes.png?size=50"/><a href="https://github.com/pmlopes" target="_blank" rel="noopener noreferrer">Paulo Lopes</a></li></ul></span><p class="blog-entry-summary">One of the interesting features of Vert.x is the SockJS event bus bridge. It allows external applications to communicate with Vert.x event bus using Websockets.</p><span class="read-more-link"><a href="/blog/vert-x3-real-time-web-apps/"> 阅读更多</a></span></div></div><div class="blog-post-next-prev-entry"><h5>Previous post</h5><div class="blog-entry"><div class="blog-entry-meta"><div class="blog-entry-meta-left"><span class="blog-entry-date">27 July 2015</span>​<a class="blog-entry-category" href="/blog/category/guides/">guides</a></div><div class="blog-entry-meta-right"></div></div><h3><a href="/blog/some-rest-with-vert-x/">Some Rest with Vert.x</a></h3><span class="blog-entry-authors"><ul><li class=""><img src="https://github.com/cescoffier.png?size=50"/><a href="https://github.com/cescoffier" target="_blank" rel="noopener noreferrer">Clement Escoffier</a></li></ul></span><p class="blog-entry-summary">This post is part of the Introduction to Vert.x series. Let’s go a bit further this time and develop a CRUD-ish application</p><span class="read-more-link"><a href="/blog/some-rest-with-vert-x/"> 阅读更多</a></span></div></div></div><div class="blog-post-related"><h5>Related posts</h5><div class="blog-post-related-posts"><div class="blog-entry"><div class="blog-entry-meta"><div class="blog-entry-meta-left"><span class="blog-entry-date">27 July 2015</span>​<a class="blog-entry-category" href="/blog/category/guides/">guides</a></div><div class="blog-entry-meta-right"></div></div><h3><a href="/blog/some-rest-with-vert-x/">Some Rest with Vert.x</a></h3><span class="blog-entry-authors"><ul><li class=""><img src="https://github.com/cescoffier.png?size=50"/><a href="https://github.com/cescoffier" target="_blank" rel="noopener noreferrer">Clement Escoffier</a></li></ul></span><p class="blog-entry-summary">This post is part of the Introduction to Vert.x series. Let’s go a bit further this time and develop a CRUD-ish application</p><span class="read-more-link"><a href="/blog/some-rest-with-vert-x/"> 阅读更多</a></span></div><div class="blog-entry"><div class="blog-entry-meta"><div class="blog-entry-meta-left"><span class="blog-entry-date">14 July 2015</span>​<a class="blog-entry-category" href="/blog/category/guides/">guides</a></div><div class="blog-entry-meta-right"></div></div><h3><a href="/blog/my-first-vert-x-3-application/">My first Vert.x 3 Application</a></h3><span class="blog-entry-authors"><ul><li class=""><img src="https://github.com/cescoffier.png?size=50"/><a href="https://github.com/cescoffier" target="_blank" rel="noopener noreferrer">Clement Escoffier</a></li></ul></span><p class="blog-entry-summary">Let&#x27;s say, you heard someone saying that Vert.x is awesome. Ok great, but you may want to try it by yourself. Well, the next natural question is “where do I start ?”</p><span class="read-more-link"><a href="/blog/my-first-vert-x-3-application/"> 阅读更多</a></span></div><div class="blog-entry"><div class="blog-entry-meta"><div class="blog-entry-meta-left"><span class="blog-entry-date">19 October 2015</span>​<a class="blog-entry-category" href="/blog/category/guides/">guides</a></div><div class="blog-entry-meta-right"></div></div><h3><a href="/blog/using-the-asynchronous-sql-client/">Using the asynchronous SQL client</a></h3><span class="blog-entry-authors"><ul><li class=""><img src="https://github.com/cescoffier.png?size=50"/><a href="https://github.com/cescoffier" target="_blank" rel="noopener noreferrer">Clement Escoffier</a></li></ul></span><p class="blog-entry-summary">Finally, back... This post is the fifth post of the introduction to vert.x blog series, after a not-that-small break. In this post we are going to see how we can use JDBC in a vert.x application.</p><span class="read-more-link"><a href="/blog/using-the-asynchronous-sql-client/"> 阅读更多</a></span></div></div></div></div></div></div><footer><div class="container"><div class="footer-nav-section"><div class="footer-nav-list footer-logo"><a href="/"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAxMTI1LjYgMzE1LjIiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxzdHlsZT4uc3Qwe2ZpbGw6Izc4MmE5MX08L3N0eWxlPjxwYXRoIGQ9Ik0xMjAuOSAyMTQuMkwxOTAuNSAwaDUyLjNsLTk4LjUgMjczLjhIOTguMkwwIDBoNTIuMWw2OC44IDIxNC4yem0yOTEuMi02Mi42SDI5OS42djg0LjJINDMxdjM4SDI1MlYwaDE3Ny43djM4LjRIMjk5LjZWMTE0aDExMi41djM3LjZ6bTgzLjctMTEzLjJINTQ2YzE2LjUuMyAyOSA0LjQgMzcuMyAxMi40IDguMyA4IDEyLjUgMTkuNCAxMi41IDM0IDAgMTQtNC41IDI1LjEtMTMuNSAzMy4yLTkgOC4xLTIxLjYgMTIuMS0zNy42IDEyLjFoLTI3LjF2MjQuMmw4Ni4xIDExOS41aDUxdi0yLjRsLTc3LjItMTA2LjdjMjQuOS01LjUgNDMuMy0yMS43IDUyLjYtMzUuOSA4LjItMTIuNiAxMy4zLTI3LjcgMTMuMy00NiAwLTI2LjgtOC42LTQ3LjQtMjUuOC02MS41QzYwMC41IDcuMSA1NzYuMSAwIDU0NC41IDBoLTk2LjN2MjczLjhoNDcuNiIvPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDUyLjMgMTU3LjdsLTQxLjUgNjIuNyAyOS43IDUzLjRoODUuMXoiLz48Y2lyY2xlIGNsYXNzPSJzdDAiIGN4PSI4MjcuOSIgY3k9IjI3NC43IiByPSI0MC41Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTEwMzcgMGwtNDcuNiA3NC4yTDk0OSAwaC04NGw4NS4zIDEzNS44LTY3LjEgMTA1LjdjNS43IDkuNSA5LjEgMjAuNSA5LjIgMzIuNGg1MC4xTDExMjEuMyAwSDEwMzd6Ii8+PHBhdGggZD0iTTc2My41IDI3My44Yy4xLTkuOSAyLjUtMTkuMiA2LjYtMjcuNVYzOC40aDg1LjRWMEg2MzguMnYzOC40aDg0LjZ2MjM1LjRoNDAuN3oiLz48L3N2Zz4=" alt="Vert.x Logo"/></a></div><div class="footer-nav-list"><h5>Eclipse Vert.x</h5><ul class=""><li><a class="navbar-menu-item" href="/docs/">文档</a></li><li><a href="/download/">下载</a></li><li><a href="/blog/">博客</a></li><li><a href="/community/">社区</a></li><li><a href="/translation/">翻译团队</a></li><li><a href="https://github.com/eclipse-vertx/vert.x">GitHub</a></li><li><a href="https://github.com/vertx-china/vertx-web-site">翻译GitHub</a></li></ul></div><div class="footer-nav-list"><h5>资源</h5><ul class=""><li><a href="/faq/">答疑</a></li><li><a href="/channels/">Channels</a></li><li><a href="https://how-to.vertx.io/">How-To’s</a></li><li><a href="https://start.vertx.io/">App Generator</a></li></ul></div><div class="footer-nav-list"><h5>Eclipse</h5><ul class=""><li><a href="https://www.eclipse.org/">Eclipse Foundation</a></li><li><a href="https://www.eclipse.org/legal/privacy.php">Privacy Policy</a></li><li><a href="https://www.eclipse.org/legal/termsofuse.php">Terms of Use</a></li><li><a href="https://www.eclipse.org/legal/copyright.php">Copyright Agent</a></li><li><a href="https://www.eclipse.org/legal/">Legal Resources</a></li></ul></div></div><div class="footer-copyright"><div class="footer-copyright-remarks">© <!-- -->2021<!-- --> Eclipse Vert.x<br/>Eclipse Vert.x is open source and dual-licensed under the <a href="https://creativecommons.org/licenses/by-sa/3.0/" target="_blank" rel="noopener noreferrer">Eclipse Public License 2.0</a> and the <a href="https://www.apache.org/licenses/LICENSE-2.0.html" target="_blank" rel="noopener noreferrer">Apache License 2.0</a>. <br class="footer-copyright-break"/>Website design by <a href="https://michelkraemer.com" target="_blank" rel="noopener noreferrer">Michel Krämer</a>.</div><div class="footer-copyright-eclipse-logo"><a href="https://www.eclipse.org/" target="_blank" rel="noopener noreferrer"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAyODEuMyA5MS4xIiB4bWw6c3BhY2U9InByZXNlcnZlIj48c3R5bGU+LnN0MHtmaWxsOiNmNzk0MjJ9LnN0MXtmaWxsOiMzZDNjM2J9PC9zdHlsZT48ZyBpZD0iTGF5ZXJfMV8xXyI+PHBhdGggY2xhc3M9InN0MCIgZD0iTTI2NS43IDg0TDI1NyA3M2gtMi43djE3LjdoMy4zdi0xMmw5LjMgMTJoMi4xVjczaC0zLjN2MTF6bS0zMi40LTguM2M0LjIgMCA1LjggMy4zIDUuOCA2LjNzLTEuNiA2LTUuOCA2LTUuNy0zLjEtNS44LTYgMS43LTYuMyA1LjgtNi4zem0wLTNjLTYuMSAwLTkuMSA0LjctOS4xIDkuMyAwIDQuNyAyLjkgOS4xIDkuMSA5LjFzOS00LjYgOS4xLTkuMi0zLTkuMi05LjEtOS4yem0tMjEuMiAxOFY3M2gtMy4zdjE3LjdoMy4zem0tMjMuNiAwaDMuM1Y3Nmg1LjZ2LTNoLTE0LjZ2M2g1LjZsLjEgMTQuN3ptLTE4LjktNi41SDE2M2wzLjMtNy42IDMuMyA3LjZ6bTIuOCA2LjVoMy42TDE2OC4yIDczaC0zLjZsLTggMTcuN2gzLjZsMS41LTMuM2g5LjNsMS40IDMuM3ptLTM4LTE0LjZoMy42YzMuOSAwIDUuNSAyLjggNS41IDUuNS4xIDIuOC0xLjUgNS44LTUuNSA1LjhoLTMuNlY3Ni4xem0zLjctMy4xaC02Ljl2MTcuN2g2LjljNi4yIDAgOC45LTQuNSA4LjktOXMtMi44LTguNy04LjktOC43em0tMjIuNCAxMUwxMDcgNzNoLTIuN3YxNy43aDMuM3YtMTJsOS4zIDEyaDIuMVY3M2gtMy4zdjExek04OC4yIDczdjEwLjJjMCAzLTEuNiA0LjktNC4zIDQuOXMtNC42LTEuNy00LjYtNC45VjczSDc2djEwLjFjMCA1LjMgMy42IDcuOSA3LjkgNy45IDQuNCAwIDcuNy0yLjcgNy43LTcuOVY3M2gtMy40em0tMzMgMi43YzQuMiAwIDUuOCAzLjMgNS44IDYuM3MtMS42IDYtNS44IDYtNS43LTMuMS01LjgtNiAxLjctNi4zIDUuOC02LjN6bTAtM2MtNi4xIDAtOS4xIDQuNy05LjEgOS4zczIuOSA5LjEgOS4xIDkuMSA5LTQuNiA5LjEtOS4yLTMtOS4yLTkuMS05LjJ6bS0yOS43IDE4di02LjVoOC45di0zLjFoLTguOXYtNC44aDkuNFY3M0gyMi4ydjE3LjZoMy4zeiIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yNjkuNCA1NC40aC0yMi4ydi04LjloMjEuNHYtNi45aC0yMS40di05LjFoMjIuMnYtNy4yaC0yOS42djM5LjVoMjkuNnYtNy40em0tNDAtMjUuNmMtMy02LjEtOS40LTcuOC0xNS41LTcuOC03LjMgMC0xNS4zIDMuNC0xNS4zIDExLjUgMCA4LjkgNy40IDExIDE1LjUgMTIgNS4yLjYgOS4xIDIuMSA5LjEgNS44IDAgNC4zLTQuNCA1LjktOS4xIDUuOXMtOS40LTEuOS0xMS4xLTYuM2wtNi4yIDMuMmMyLjkgNy4yIDkuMSA5LjcgMTcuMiA5LjcgOC44IDAgMTYuNi0zLjggMTYuNi0xMi42IDAtOS40LTcuNy0xMS42LTE1LjktMTIuNi00LjctLjYtOC44LTEuNS04LjgtNSAwLTIuOSAyLjYtNS4yIDguMi01LjIgNC4zIDAgOCAyLjIgOS40IDQuNGw1LjktM3pNMTc2IDIyLjJjLTYuMi0uMS0xMi40IDAtMTguNiAwdjM5LjVoNy40VjUwLjFIMTc2YzE5LjQgMCAxOS40LTI3LjkgMC0yNy45em0tMTEuMSA3LjFIMTc2YzkuNSAwIDkuNSAxNCAwIDE0aC0xMS4ybC4xLTE0em0tMTggMzIuNVYyMi4yaC03LjR2MzkuNWw3LjQuMXptLTQ0LTM5LjZ2MzkuNWgyNy43di02LjloLTIwLjNWMjIuMmgtNy40ek05MC43IDUxLjdjLTIuNyAyLjUtNi4yIDQtOS45IDQtOS44IDAtMTMuNS02LjgtMTMuNi0xMy40czQuMS0xMy43IDEzLjYtMTMuN2MzLjUtLjEgNyAxLjMgOS41IDMuN2w1LTQuOGMtMy44LTMuOS05LjEtNi0xNC41LTYtMTQuMyAwLTIxIDEwLjUtMjAuOSAyMC44czYuMyAyMC4zIDIwLjkgMjAuM2M1LjYuMSAxMS0yIDE1LTUuOWwtNS4xLTV6bS0zOSAyLjdIMjkuNXYtOC45aDIxLjR2LTYuOUgyOS41di05LjFoMjIuMnYtNy4ySDIyLjJ2MzkuNWgyOS42bC0uMS03LjR6Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTkuOCAxOC4yQzE4LjggNC4xIDM2LjktLjggNTIuMSA2bC0xLS43QzM1LjctNC42IDE1LjItLjEgNS4zIDE1LjNzLTUuNCAzNS45IDEwIDQ1LjhsMS4xLjZDMy44IDUwLjguOCAzMi4zIDkuOCAxOC4yeiIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yNzIuMiAyNi4xYzAtMi41IDIuMS00LjYgNC42LTQuNiAyLjUgMCA0LjYgMi4xIDQuNiA0LjYgMCAyLjUtMi4xIDQuNi00LjYgNC42LTIuNiAwLTQuNi0yLjEtNC42LTQuNnptOC42IDBjMC0yLjItMS44LTQuMS00LTQuMXMtNC4xIDEuOC00LjEgNC4xYzAgMi4yIDEuNyA0IDMuOSA0LjFoLjFjMi4zIDAgNC4xLTEuOCA0LjEtNC4xem0tNi0yLjVoMi4zYzEuMSAwIDEuOS41IDEuOSAxLjYgMCAuNy0uNCAxLjMtMS4xIDEuNWwxLjIgMS43aC0xLjRsLTEtMS41aC0uN3YxLjVoLTEuMWwtLjEtNC44em0yLjIgMi4zYy41IDAgLjgtLjMuOC0uN3MtLjMtLjctLjgtLjdoLTF2MS4zbDEgLjF6Ii8+PC9nPjwvc3ZnPg==" alt="Eclipse foundation Logo"/></a></div></div></div></footer></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"categories":["releases","guides","news"],"post":{"meta":{"title":"Unit and Integration Tests","category":"guides","authors":[{"name":"Clement Escoffier","github_id":"cescoffier"}],"summary":"Let’s refresh our mind about what we developed so far in the introduction to vert.x series. We forgot an important task. We didn’t test the API."},"date":"2015-08-03","slug":"unit-and-integration-tests","readingTime":{"text":"15 min read","minutes":14.215,"time":852900,"words":2843},"content":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Let\\u2019s re\\xADfresh our mind about what we de\\xADvel\\xADoped so far in the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"in\\xADtro\\xADduc\\xADtion to vert.x\"), \" se\\xADries. In \", mdx(Link, {\n    href: \"/blog/my-first-vert-x-3-application/\",\n    passHref: true,\n    mdxType: \"Link\"\n  }, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"\"\n  }), \"the first post\")), \", we de\\xADvel\\xADoped a very sim\\xADple Vert.x 3 ap\\xADpli\\xADca\\xADtion, and saw how this ap\\xADpli\\xADca\\xADtion can be tested, pack\\xADaged and ex\\xADe\\xADcuted. In \", mdx(Link, {\n    href: \"/blog/vert-x-application-configuration/\",\n    passHref: true,\n    mdxType: \"Link\"\n  }, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"\"\n  }), \"the sec\\xADond post\")), \", we saw how this ap\\xADpli\\xADca\\xADtion be\\xADcame con\\xADfig\\xADurable and how we can use a ran\\xADdom port in test, and use an\\xADother con\\xADfig\\xADurable port in pro\\xADduc\\xADtion. Fi\\xADnally, the \", mdx(Link, {\n    href: \"/blog/some-rest-with-vert-x/\",\n    passHref: true,\n    mdxType: \"Link\"\n  }, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"\"\n  }), \"pre\\xADvi\\xADous post\")), \" has shown how to use vertx-\\u200Bweb and how to im\\xADple\\xADment a small REST API. How\\xADever, we for\\xADgot an im\\xADpor\\xADtant task. We didn\\u2019t test the API. In this post we will in\\xADcrease the con\\xADfi\\xADdence we have on this ap\\xADpli\\xADca\\xADtion by im\\xADple\\xADment\\xADing unit and in\\xADte\\xADgra\\xADtion tests.\"), mdx(\"p\", null, \"The code of this post is avail\\xADable in the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/cescoffier/my-vertx-first-app/tree/post-4\"\n  }), \"post-4 branch\"), \" of the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/cescoffier/my-vertx-first-app\"\n  }), \"project\"), \". The start\\xADing post, how\\xADever is the code avail\\xADable in the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/cescoffier/my-vertx-first-app/tree/post-3\"\n  }), \"post-3 branch\"), \".\"), mdx(\"h2\", {\n    \"id\": \"tests-tests-tests\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#tests-tests-tests\"\n  })), \"Tests, Tests, Tests\\u2026\"), mdx(\"p\", null, \"This post is mainly about tests. We dis\\xADtin\\xADguish two types of tests: unit tests and in\\xADte\\xADgra\\xADtion tests. Both are equally im\\xADpor\\xADtant, but have dif\\xADfer\\xADent focus. Unit tests en\\xADsure that one \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"com\\xADpo\\xADnent\"), \" of your ap\\xADpli\\xADca\\xADtion, gen\\xADer\\xADally a class in the Java world, be\\xADhaves as ex\\xADpected. The ap\\xADpli\\xADca\\xADtion is not tested as a whole, but pieces by pieces. In\\xADte\\xADgra\\xADtion tests are more \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"black box\"), \" in the sense that the ap\\xADpli\\xADca\\xADtion is started and tested gen\\xADer\\xADally ex\\xADter\\xADnally.\"), mdx(\"p\", null, \"In this post we are going to start with some more unit tests as a warm up ses\\xADsion and then focus on in\\xADte\\xADgra\\xADtion tests. If you al\\xADready im\\xADple\\xADmented in\\xADte\\xADgra\\xADtion tests, you may be a bit scared, and it makes sense. But don\\u2019t worry, with Vert.x there are no hid\\xADden sur\\xADprises.\"), mdx(\"h2\", {\n    \"id\": \"warmup-some-more-unit-tests\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#warmup-some-more-unit-tests\"\n  })), \"Warmup: Some more unit tests\"), mdx(\"p\", null, \"Let\\u2019s start slowly. Re\\xADmem\\xADber in the first post we have im\\xADple\\xADmented a unit test with \", mdx(Link, {\n    href: \"/docs/vertx-unit/java/\",\n    passHref: true,\n    mdxType: \"Link\"\n  }, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"\"\n  }), \"vertx-\\u200Bunit\")), \". The test we did is dead sim\\xADple:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"we started the ap\\xADpli\\xADca\\xADtion be\\xADfore the test\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"we checks that it replies \\u201CHello\\u201D\")), mdx(\"p\", null, \"Just to re\\xADfresh your mind, let\\u2019s have a look at the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/cescoffier/my-vertx-first-app/blob/post-4/src/test/java/io/vertx/blog/first/MyFirstVerticleTest.java\"\n  }), \"code\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"@Before\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"setUp\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(TestContext context)\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"throws\"), \" IOException \"), \"{\\n  vertx = Vertx.vertx();\\n  ServerSocket socket = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" ServerSocket(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"0\"), \");\\n  port = socket.getLocalPort();\\n  socket.close();\\n  DeploymentOptions options = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" DeploymentOptions()\\n      .setConfig(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" JsonObject().put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"http.port\\\"\"), \", port)\\n      );\\n  vertx.deployVerticle(MyFirstVerticle.class.getName(), options, context.asyncAssertSuccess());\\n}\\n\")), mdx(\"p\", null, \"The \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"setUp\"), \" method is in\\xADvoked be\\xADfore each test (as in\\xADstructed by the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"@Before\"), \" an\\xADno\\xADta\\xADtion). It, first, cre\\xADates a new in\\xADstance of Vert.x. Then, it gets a free port and then de\\xADploys our ver\\xADti\\xADcle with the right con\\xADfig\\xADu\\xADra\\xADtion. Thanks to the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"context.asyncAssertSuccess()\"), \" it waits until the suc\\xADcess\\xADful de\\xADploy\\xADment of the ver\\xADti\\xADcle.\"), mdx(\"p\", null, \"The \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"tearDown\"), \" is straight\\xADfor\\xADward and just closes the Vert.x in\\xADstance. It au\\xADto\\xADmat\\xADi\\xADcally un-\\u200Bdeploys the ver\\xADti\\xADcles:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"@After\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"tearDown\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(TestContext context)\"), \" \"), \"{\\n  vertx.close(context.asyncAssertSuccess());\\n}\\n\")), mdx(\"p\", null, \"Fi\\xADnally, our sin\\xADgle test is:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"@Test\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"testMyApplication\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(TestContext context)\"), \" \"), \"{\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"final\"), \" Async async = context.async();\\n  vertx.createHttpClient().getNow(port, \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"localhost\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/\\\"\"), \", response -\u003e {\\n    response.handler(body -\u003e {\\n      context.assertTrue(body.toString().contains(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Hello\\\"\"), \"));\\n      async.complete();\\n    });\\n  });\\n }\\n\")), mdx(\"p\", null, \"It is only check\\xADing that the ap\\xADpli\\xADca\\xADtion replies \\u201CHello\\u201D when we emit a HTTP re\\xADquest on \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/\"), \".\"), mdx(\"p\", null, \"Let\\u2019s now try to im\\xADple\\xADment some unit tests checkin that our web ap\\xADpli\\xADca\\xADtion and the REST API be\\xADhave as ex\\xADpected. Let\\u2019s start by check\\xADing that the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"index.html\"), \" page is cor\\xADrectly served. This test is very sim\\xADi\\xADlar to the pre\\xADvi\\xADous one:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"@Test\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"checkThatTheIndexPageIsServed\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(TestContext context)\"), \" \"), \"{\\n  Async async = context.async();\\n  vertx.createHttpClient().getNow(port, \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"localhost\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/assets/index.html\\\"\"), \", response -\u003e {\\n    context.assertEquals(response.statusCode(), \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"200\"), \");\\n    context.assertEquals(response.headers().get(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"content-type\\\"\"), \"), \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"text/html\\\"\"), \");\\n    response.bodyHandler(body -\u003e {\\n      context.assertTrue(body.toString().contains(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"\u003ctitle\u003eMy Whisky Collection\u003c/title\u003e\\\"\"), \"));\\n      async.complete();\\n    });\\n  });\\n}\\n\")), mdx(\"p\", null, \"We re\\xADtrieve the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"index.html\"), \" page and check:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"it\\u2019s there (sta\\xADtus code 200)\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"it\\u2019s a HTML page (con\\xADtent type set to \\u201Ctext/html\\u201D)\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"it has the right title (\\u201CMy Whisky Col\\xADlec\\xADtion\\u201D)\")), mdx(Alert, {\n    info: true,\n    mdxType: \"Alert\"\n  }, mdx(\"p\", null, \"As you can see, we can test the sta\\xADtus code and the head\\xADers di\\xADrectly on the HTTP re\\xADsponse, but en\\xADsure that the body is right, we need to re\\xADtrieve it. This is done with a body han\\xADdler that re\\xADceives the com\\xADplete body as pa\\xADra\\xADme\\xADter. Once the last check is made, we re\\xADlease the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"async\"), \" by call\\xADing \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"complete\"), \".\")), mdx(\"p\", null, \"Ok, great, but this ac\\xADtu\\xADally does not test our REST API. Let\\u2019s en\\xADsure that we can add a bot\\xADtle to the col\\xADlec\\xADtion. Un\\xADlike the pre\\xADvi\\xADous tests, this one is using \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"post\"), \" to \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"post\"), \" data to the server:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"@Test\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"checkThatWeCanAdd\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(TestContext context)\"), \" \"), \"{\\n  Async async = context.async();\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"final\"), \" String json = Json.encodePrettily(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" Whisky(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Jameson\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Ireland\\\"\"), \"));\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"final\"), \" String length = Integer.toString(json.length());\\n  vertx.createHttpClient().post(port, \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"localhost\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/api/whiskies\\\"\"), \")\\n      .putHeader(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"content-type\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"application/json\\\"\"), \")\\n      .putHeader(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"content-length\\\"\"), \", length)\\n      .handler(response -\u003e {\\n        context.assertEquals(response.statusCode(), \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"201\"), \");\\n        context.assertTrue(response.headers().get(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"content-type\\\"\"), \").contains(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"application/json\\\"\"), \"));\\n        response.bodyHandler(body -\u003e {\\n          \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"final\"), \" Whisky whisky = Json.decodeValue(body.toString(), Whisky.class);\\n          context.assertEquals(whisky.getName(), \\\"Jameson\\\");\\n          context.assertEquals(whisky.getOrigin(), \\\"Ireland\\\");\\n          context.assertNotNull(whisky.getId());\\n          async.complete();\\n        });\\n      })\\n      .write(json)\\n      .end();\\n}\\n\")), mdx(\"p\", null, \"First we cre\\xADate the con\\xADtent we want to add. The server con\\xADsumes JSON data, so we need a JSON string. You can ei\\xADther write your JSON doc\\xADu\\xADment man\\xADu\\xADally, or use the Vert.x method (\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Json.encodePrettily\"), \") as done here. Once we have the con\\xADtent, we cre\\xADate a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"post\"), \" re\\xADquest. We need to con\\xADfig\\xADure some head\\xADers to be cor\\xADrectly read by the server. First, we say that we are send\\xADing JSON data and we also set the con\\xADtent length. We also at\\xADtach a re\\xADsponse han\\xADdler very close to the checks made in the pre\\xADvi\\xADous test. No\\xADtice that we can re\\xADbuild our ob\\xADject from the JSON doc\\xADu\\xADment send by the server using the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"JSON.decodeValue\"), \" method. It\\u2019s very con\\xADve\\xADnient as it avoids lots of boil\\xADer\\xADplate code.  At this point the re\\xADquest is not emit\\xADted, we need to write the data and call the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"end()\"), \" method. This is made using \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \".write(json).end();\"), \".\"), mdx(\"p\", null, \"The order of the meth\\xADods is im\\xADpor\\xADtant. You can\\xADnot \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"write\"), \" data if you don\\u2019t have a re\\xADsponse han\\xADdler con\\xADfig\\xADured. Fi\\xADnally don\\u2019t for\\xADget to call \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"end\"), \".\"), mdx(\"p\", null, \"So, let\\u2019s try this. You can run the test using:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-bash\"\n  }), \"mvn clean \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"test\"), \"\\n\")), mdx(\"p\", null, \"We could con\\xADtinue writ\\xADing more unit test like that, but it could be\\xADcome quite com\\xADplex. Let\\u2019s see how we could con\\xADtinue our tests using in\\xADte\\xADgra\\xADtion tests.\"), mdx(\"h2\", {\n    \"id\": \"it-hurts\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#it-hurts\"\n  })), \"IT hurts\"), mdx(\"p\", null, \"Well, I think we need to make that clear, in\\xADte\\xADgra\\xADtion test\\xADing hurts. If you have ex\\xADpe\\xADri\\xADence in this area, can you re\\xADmem\\xADber how long did it take to setup every\\xADthing cor\\xADrectly? I get new white hairs by just think\\xADing about it. Why are in\\xADte\\xADgra\\xADtion tests more com\\xADpli\\xADcated? It\\u2019s ba\\xADsi\\xADcally be\\xADcause of the setup:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"We must start the ap\\xADpli\\xADca\\xADtion in a \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"close to pro\\xADduc\\xADtion\"), \" way\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"We must then run the tests (and con\\xADfig\\xADure them to hit the right ap\\xADpli\\xADca\\xADtion in\\xADstance)\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"We must stop the ap\\xADpli\\xADca\\xADtion\")), mdx(\"p\", null, \"That does not sound un\\xADcon\\xADquer\\xADable like that, but if you need Linux, MacOS X and Win\\xADdows sup\\xADport, it quickly get messy. There are plenty of great frame\\xADworks eas\\xADing this such as \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://arquillian.org\"\n  }), \"Ar\\xADquil\\xADlian\"), \", but let\\u2019s do it with\\xADout any frame\\xADwork to un\\xADder\\xADstand how it works.\"), mdx(\"h2\", {\n    \"id\": \"we-need-a-battle-plan\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#we-need-a-battle-plan\"\n  })), \"We need a battle plan\"), mdx(\"p\", null, \"Be\\xADfore rush\\xADing into the com\\xADplex con\\xADfig\\xADu\\xADra\\xADtion, let\\u2019s think a minute about the tasks:\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Step 1 - Re\\xADserve a free port\"), \"\\nWe need to get a free port on which the ap\\xADpli\\xADca\\xADtion can \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"lis\\xADten\"), \", and we need to in\\xADject this port in our in\\xADte\\xADgra\\xADtion tests.\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Step 2 - Gen\\xADer\\xADate the ap\\xADpli\\xADca\\xADtion con\\xADfig\\xADu\\xADra\\xADtion\"), \"\\nOnce we have the free port, we need to write a JSON file con\\xADfig\\xADur\\xADing the ap\\xADpli\\xADca\\xADtion HTTP Port to this port.\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Step 3 - Start the ap\\xADpli\\xADca\\xADtion\"), \"\\nSounds easy right? Well it\\u2019s not that sim\\xADple as we need to launch our ap\\xADpli\\xADca\\xADtion in a back\\xADground process.\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Step 4 - Ex\\xADe\\xADcute the in\\xADte\\xADgra\\xADtion tests\"), \"\\nFi\\xADnally, the cen\\xADtral part, run the tests. But be\\xADfore that we should im\\xADple\\xADment some in\\xADte\\xADgra\\xADtion tests. Let\\u2019s come to that later.\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Step 5 - Stop the ap\\xADpli\\xADca\\xADtion\"), \"\\nOnce the tests have been ex\\xADe\\xADcuted, re\\xADgard\\xADless if there are fail\\xADures or er\\xADrors in the tests, we need to stop the ap\\xADpli\\xADca\\xADtion.\"), mdx(\"p\", null, \"There are mul\\xADti\\xADple way to im\\xADple\\xADment this plan. We are going to use a \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"generic\"), \" way. It\\u2019s not nec\\xADes\\xADsar\\xADily the bet\\xADter, but can be ap\\xADplied al\\xADmost every\\xADwhere. The ap\\xADproach is tight to Apache Maven. If you want to pro\\xADpose an al\\xADter\\xADna\\xADtive using Gra\\xADdle or a dif\\xADfer\\xADent tool, I will be happy to add your way to the post.\"), mdx(\"h2\", {\n    \"id\": \"implement-the-plan\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#implement-the-plan\"\n  })), \"Implement the plan\"), mdx(\"p\", null, \"As said above, this sec\\xADtion is Maven-\\u200Bcentric, and most of the code goes in the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/cescoffier/my-vertx-first-app/blob/post-4/pom.xml\"\n  }), \"pom.xml\"), \" file. If you never used the dif\\xADfer\\xADent Maven life\\xADcy\\xADcle phases, I rec\\xADom\\xADmend you to look at the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html\"\n  }), \"in\\xADtro\\xADduc\\xADtion to the Maven life\\xADcy\\xADcle\"), \".\"), mdx(\"p\", null, \"We need to add and con\\xADfig\\xADure a cou\\xADple of plu\\xADg\\xADins. Open the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"pom.xml\"), \" file and in the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"\u003cplugins\u003e\"), \" sec\\xADtion add:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-xml\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"plugin\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"groupId\"), \"\u003e\"), \"org.codehaus.mojo\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"groupId\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"artifactId\"), \"\u003e\"), \"build-helper-maven-plugin\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"artifactId\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"version\"), \"\u003e\"), \"1.9.1\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"version\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"executions\"), \"\u003e\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"execution\"), \"\u003e\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"id\"), \"\u003e\"), \"reserve-network-port\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"id\"), \"\u003e\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"goals\"), \"\u003e\"), \"\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"goal\"), \"\u003e\"), \"reserve-network-port\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"goal\"), \"\u003e\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"goals\"), \"\u003e\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"phase\"), \"\u003e\"), \"process-sources\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"phase\"), \"\u003e\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"configuration\"), \"\u003e\"), \"\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"portNames\"), \"\u003e\"), \"\\n          \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"portName\"), \"\u003e\"), \"http.port\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"portName\"), \"\u003e\"), \"\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"portNames\"), \"\u003e\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"configuration\"), \"\u003e\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"execution\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"executions\"), \"\u003e\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"plugin\"), \"\u003e\"), \"\\n\")), mdx(\"p\", null, \"We use the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"build-helper-maven-plugin\"), \" (a plug\\xADin to know if you are often using Maven) to pick up a free port. Once found, the plug\\xADin as\\xADsigns the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"http.port\"), \" vari\\xADable to the picked port. We ex\\xADe\\xADcute this plug\\xADin early in the build (dur\\xADing the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"process-sources\"), \" phase), so we can use the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"http.port\"), \" vari\\xADable in the other plug\\xADin. This was for the first step.\"), mdx(\"p\", null, \"Two ac\\xADtions are re\\xADquired for the sec\\xADond step. First, in the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"pom.xml\"), \" file, just below the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"\u003cbuild\u003e\"), \" open\\xADing tag, add:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-xml\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"testResources\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"testResource\"), \"\u003e\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"directory\"), \"\u003e\"), \"src/test/resources\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"directory\"), \"\u003e\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"filtering\"), \"\u003e\"), \"true\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"filtering\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"testResource\"), \"\u003e\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"testResources\"), \"\u003e\"), \"\\n\")), mdx(\"p\", null, \"This in\\xADstructs Maven to \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"fil\\xADter\"), \" re\\xADsources from the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"src/test/resources\"), \" di\\xADrec\\xADtory. \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Fil\\xADter\"), \" means re\\xADplac\\xADing place\\xADhold\\xADers by ac\\xADtual val\\xADues. That\\u2019s ex\\xADactly what we need as we now have the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"http.port\"), \" vari\\xADable. So cre\\xADate the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"src/test/resources/my-it-config.json\"), \" file with the fol\\xADlow\\xADing con\\xADtent:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-javascript\"\n  }), \"{\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"http.port\\\"\"), \": ${http.port}\\n}\\n\")), mdx(\"p\", null, \"This con\\xADfig\\xADu\\xADra\\xADtion file is sim\\xADi\\xADlar to the one we did in pre\\xADvi\\xADous posts. The only dif\\xADfer\\xADence is the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"${http.port}\"), \" which is the (de\\xADfault) Maven syn\\xADtax for fil\\xADter\\xADing. So, when Maven is going to process or file it will re\\xADplace \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"${http.port}\"), \" by the se\\xADlected port. That\\u2019s all for the sec\\xADond step.\"), mdx(\"p\", null, \"The step 3 and 5 are a bit more tricky. We should start and stop the ap\\xADpli\\xADca\\xADtion. We are going to use the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"maven-antrun-plugin\"), \" to achieve this. In the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"pom.xml\"), \" file, below the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"build-helper-maven-plugin\"), \", add:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-xml\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"\u003c!-- We use the maven-antrun-plugin to start the application before the integration tests\\nand stop them afterward --\u003e\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"plugin\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"artifactId\"), \"\u003e\"), \"maven-antrun-plugin\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"artifactId\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"version\"), \"\u003e\"), \"1.8\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"version\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"executions\"), \"\u003e\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"execution\"), \"\u003e\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"id\"), \"\u003e\"), \"start-vertx-app\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"id\"), \"\u003e\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"phase\"), \"\u003e\"), \"pre-integration-test\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"phase\"), \"\u003e\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"goals\"), \"\u003e\"), \"\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"goal\"), \"\u003e\"), \"run\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"goal\"), \"\u003e\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"goals\"), \"\u003e\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"configuration\"), \"\u003e\"), \"\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"target\"), \"\u003e\"), \"\\n          \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"\u003c!--\\n          Launch the application as in 'production' using the fatjar.\\n          We pass the generated configuration, configuring the http port to the picked one\\n          --\u003e\"), \"\\n          \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"exec\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"executable\"), \"=\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"${java.home}/bin/java\\\"\"), \"\\n                \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"dir\"), \"=\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"${project.build.directory}\\\"\"), \"\\n                \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"spawn\"), \"=\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"true\\\"\"), \"\u003e\"), \"\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"arg\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"value\"), \"=\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"-jar\\\"\"), \"/\u003e\"), \"\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"arg\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"value\"), \"=\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"${project.artifactId}-${project.version}-fat.jar\\\"\"), \"/\u003e\"), \"\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"arg\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"value\"), \"=\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"-conf\\\"\"), \"/\u003e\"), \"\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"arg\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"value\"), \"=\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"${project.build.directory}/test-classes/my-it-config.json\\\"\"), \"/\u003e\"), \"\\n          \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"exec\"), \"\u003e\"), \"\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"target\"), \"\u003e\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"configuration\"), \"\u003e\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"execution\"), \"\u003e\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"execution\"), \"\u003e\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"id\"), \"\u003e\"), \"stop-vertx-app\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"id\"), \"\u003e\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"phase\"), \"\u003e\"), \"post-integration-test\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"phase\"), \"\u003e\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"goals\"), \"\u003e\"), \"\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"goal\"), \"\u003e\"), \"run\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"goal\"), \"\u003e\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"goals\"), \"\u003e\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"configuration\"), \"\u003e\"), \"\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"\u003c!--\\n          Kill the started process.\\n          Finding the right process is a bit tricky. Windows command in in the windows profile (below)\\n          --\u003e\"), \"\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"target\"), \"\u003e\"), \"\\n          \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"exec\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"executable\"), \"=\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"bash\\\"\"), \"\\n                \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"dir\"), \"=\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"${project.build.directory}\\\"\"), \"\\n                \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"spawn\"), \"=\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"false\\\"\"), \"\u003e\"), \"\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"arg\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"value\"), \"=\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"-c\\\"\"), \"/\u003e\"), \"\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"arg\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"value\"), \"=\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"ps ax | grep -Ei '[\\\\-]DtestPort=${http.port}\\\\s+\\\\-jar\\\\s+${project.artifactId}' | awk 'NR==1{print $1}' | xargs kill -SIGTERM\\\"\"), \"/\u003e\"), \"\\n          \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"exec\"), \"\u003e\"), \"\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"target\"), \"\u003e\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"configuration\"), \"\u003e\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"execution\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"executions\"), \"\u003e\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"plugin\"), \"\u003e\"), \"\\n\")), mdx(\"p\", null, \"That\\u2019s a huge piece of XML, isn\\u2019t it ? We con\\xADfig\\xADure two ex\\xADe\\xADcu\\xADtions of the plug\\xADin. The first one, hap\\xADpen\\xADing in the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"pre-integration-test\"), \" phase, ex\\xADe\\xADcutes a set of bash com\\xADmand to start the ap\\xADpli\\xADca\\xADtion. It ba\\xADsi\\xADcally ex\\xADe\\xADcutes:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-bash\"\n  }), \"java -jar my-first-app-1.0-SNAPSHOT-fat.jar -conf .../my-it-config.json\\n\")), mdx(Alert, {\n    info: true,\n    title: \"Is the fatjar created?\",\n    mdxType: \"Alert\"\n  }, mdx(\"p\", null, \"The fat jar em\\xADbed\\xADding our ap\\xADpli\\xADca\\xADtion is cre\\xADated in the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"package\"), \" phase, pre\\xADced\\xADing the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"pre-integration-test\"), \", so yes, the fat jar is cre\\xADated.\")), mdx(\"p\", null, \"As men\\xADtioned above, we launch the ap\\xADpli\\xADca\\xADtion as we would in a pro\\xADduc\\xADtion en\\xADvi\\xADron\\xADment.\"), mdx(\"p\", null, \"Once, the in\\xADte\\xADgra\\xADtion tests are ex\\xADe\\xADcuted (step 4 we didn\\u2019t look at it yet), we need to stop the ap\\xADpli\\xADca\\xADtion (so in the the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"post-integration-test\"), \" phase).  To close the ap\\xADpli\\xADca\\xADtion, we are going to in\\xADvoke some shell magic com\\xADmand to find our process in with the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ps\"), \" com\\xADmand and send the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"SIGTERM\"), \" sig\\xADnal. It is equiv\\xADa\\xADlent to:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-bash\"\n  }), \"ps\\n.... -\u003e find your process id\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-built_in\"\n  }), \"kill\"), \" your_process_id -SIGTERM\\n\")), mdx(Alert, {\n    info: true,\n    title: \"And Windows?\",\n    mdxType: \"Alert\"\n  }, mdx(\"p\", null, \"I men\\xADtioned it above, we want Win\\xADdows to be sup\\xADported and these com\\xADmands are not going to work on Win\\xADdows. Don\\u2019t worry, Win\\xADdows con\\xADfig\\xADu\\xADra\\xADtion is below \\u2026\")), mdx(\"p\", null, \"We should now do the fourth step we (silently) skipped. To ex\\xADe\\xADcute our in\\xADte\\xADgra\\xADtion tests, we use the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"maven-failsafe-plugin\"), \". Add the fol\\xADlow\\xADing plug\\xADin con\\xADfig\\xADu\\xADra\\xADtion to your \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"pom.xml\"), \" file:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-xml\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"plugin\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"groupId\"), \"\u003e\"), \"org.apache.maven.plugins\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"groupId\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"artifactId\"), \"\u003e\"), \"maven-failsafe-plugin\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"artifactId\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"version\"), \"\u003e\"), \"2.18.1\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"version\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"executions\"), \"\u003e\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"execution\"), \"\u003e\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"goals\"), \"\u003e\"), \"\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"goal\"), \"\u003e\"), \"integration-test\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"goal\"), \"\u003e\"), \"\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"goal\"), \"\u003e\"), \"verify\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"goal\"), \"\u003e\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"goals\"), \"\u003e\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"configuration\"), \"\u003e\"), \"\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"systemProperties\"), \"\u003e\"), \"\\n          \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"http.port\"), \"\u003e\"), \"${http.port}\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"http.port\"), \"\u003e\"), \"\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"systemProperties\"), \"\u003e\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"configuration\"), \"\u003e\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"execution\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"executions\"), \"\u003e\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"plugin\"), \"\u003e\"), \"\\n\")), mdx(\"p\", null, \"As you can see, we pass the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"http.port\"), \" prop\\xADerty as a sys\\xADtem vari\\xADable, so our tests are able to con\\xADnect on the right port.\"), mdx(\"p\", null, \"That\\u2019s all! Wow\\u2026 Let\\u2019s try this (for win\\xADdows users, you will need to be pa\\xADtient or to jump to the last sec\\xADtion).\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-bash\"\n  }), \"mvn clean verify\\n\")), mdx(\"p\", null, \"We should not use \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"mvn integration-test\"), \" be\\xADcause the ap\\xADpli\\xADca\\xADtion would still be run\\xADning. The \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"verify\"), \" phase is after the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"post-integration-test\"), \" phase and will analyse the integration-\\u200Btests re\\xADsults. Build fail\\xADures be\\xADcause of in\\xADte\\xADgra\\xADtion tests failed as\\xADser\\xADtions are re\\xADported in this phase.\"), mdx(\"h2\", {\n    \"id\": \"hey-we-dont-have-integration-tests-\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#hey-we-dont-have-integration-tests-\"\n  })), \"Hey, we don\\u2019t have integration tests !\"), mdx(\"p\", null, \"And that\\u2019s right, we set up every\\xADthing, but we don\\u2019t have a sin\\xADgle in\\xADte\\xADgra\\xADtion test. To ease the im\\xADple\\xADmen\\xADta\\xADtion, let\\u2019s use two li\\xADbraries: \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://joel-costigliola.github.io/assertj/\"\n  }), \"As\\xADsertJ\"), \" and \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/jayway/rest-assured\"\n  }), \"Rest-\\u200BAssured\"), \".\"), mdx(\"p\", null, \"As\\xADsertJ pro\\xADposes a set of as\\xADser\\xADtions that you can chain and use flu\\xADently. Rest As\\xADsured is a frame\\xADwork to test REST API.\"), mdx(\"p\", null, \"In the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"pom.xml\"), \" file, add the two fol\\xADlow\\xADing de\\xADpen\\xADden\\xADcies just be\\xADfore \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"\u003c/dependencies\u003e\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-xml\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"dependency\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"groupId\"), \"\u003e\"), \"com.jayway.restassured\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"groupId\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"artifactId\"), \"\u003e\"), \"rest-assured\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"artifactId\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"version\"), \"\u003e\"), \"2.4.0\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"version\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"scope\"), \"\u003e\"), \"test\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"scope\"), \"\u003e\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"dependency\"), \"\u003e\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"dependency\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"groupId\"), \"\u003e\"), \"org.assertj\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"groupId\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"artifactId\"), \"\u003e\"), \"assertj-core\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"artifactId\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"version\"), \"\u003e\"), \"2.0.0\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"version\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"scope\"), \"\u003e\"), \"test\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"scope\"), \"\u003e\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"dependency\"), \"\u003e\"), \"\\n\")), mdx(\"p\", null, \"Then, cre\\xADate the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"src/test/java/io/vertx/blog/first/MyRestIT.java\"), \" file. Un\\xADlike unit test, in\\xADte\\xADgra\\xADtion test ends with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"IT\"), \". It\\u2019s a con\\xADven\\xADtion from the Fail\\xADsafe plug\\xADin to dis\\xADtin\\xADguish unit (start\\xADing or end\\xADing with \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Test\"), \") from in\\xADte\\xADgra\\xADtion tests (start\\xADing or end\\xADing with \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"IT\"), \"). In the cre\\xADated file add:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"package\"), \" io.vertx.blog.first;\\n\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"import\"), \" com.jayway.restassured.RestAssured;\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"import\"), \" org.junit.AfterClass;\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"import\"), \" org.junit.BeforeClass;\\n\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-class\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"class\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"MyRestIT\"), \" \"), \"{\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"@BeforeClass\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"static\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"configureRestAssured\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"()\"), \" \"), \"{\\n    RestAssured.baseURI = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"http://localhost\\\"\"), \";\\n    RestAssured.port = Integer.getInteger(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"http.port\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"8080\"), \");\\n  }\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"@AfterClass\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"static\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"unconfigureRestAssured\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"()\"), \" \"), \"{\\n    RestAssured.reset();\\n  }\\n}\\n\")), mdx(\"p\", null, \"The meth\\xADods an\\xADno\\xADtated with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"@BeforeClass\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"@AfterClass\"), \" are in\\xADvoked once be\\xADfore / after all tests of the class. Here, we just re\\xADtrieve the http port (passed as a sys\\xADtem prop\\xADerty) and we con\\xADfig\\xADure REST As\\xADsured.\"), mdx(Alert, {\n    info: true,\n    title: \"Am I ready to serve?\",\n    mdxType: \"Alert\"\n  }, mdx(\"p\", null, \"You may need to wait in the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"configureRestAssured\"), \" method that the HTTP server has been started. We rec\\xADom\\xADmend the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/jayway/awaitility\"\n  }), \"await\\xADil\\xADity\"), \" test frame\\xADwork to check that the re\\xADquest can be served. It would fail the test if the server does not start.\")), mdx(\"p\", null, \"It\\u2019s now time to im\\xADple\\xADment a real test. Let\\u2019s check we can re\\xADtrieve an in\\xADdi\\xADvid\\xADual prod\\xADuct:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"@Test\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"checkThatWeCanRetrieveIndividualProduct\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"()\"), \" \"), \"{\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Get the list of bottles, ensure it's a success and extract the first id.\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"final\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"int\"), \" id = get(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/api/whiskies\\\"\"), \").then()\\n      .assertThat()\\n      .statusCode(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"200\"), \")\\n      .extract()\\n      .jsonPath().getInt(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"find { it.name=='Bowmore 15 Years Laimrig' }.id\\\"\"), \");\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Now get the individual resource and check the content\"), \"\\n  get(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/api/whiskies/\\\"\"), \" + id).then()\\n      .assertThat()\\n      .statusCode(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"200\"), \")\\n      .body(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"name\\\"\"), \", equalTo(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Bowmore 15 Years Laimrig\\\"\"), \"))\\n      .body(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"origin\\\"\"), \", equalTo(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Scotland, Islay\\\"\"), \"))\\n      .body(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"id\\\"\"), \", equalTo(id));\\n}\\n\")), mdx(\"p\", null, \"Here you can ap\\xADpre\\xADci\\xADate the power and ex\\xADpres\\xADsive\\xADness of Rest As\\xADsured. We re\\xADtrieve the list of prod\\xADuct, en\\xADsure the re\\xADsponse is cor\\xADrect, and ex\\xADtract the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"id\"), \" of a spe\\xADcific bot\\xADtle using a JSON (Groovy) Path ex\\xADpres\\xADsion.\"), mdx(\"p\", null, \"Then, we try to re\\xADtrieve the meta\\xADdata of this in\\xADdi\\xADvid\\xADual prod\\xADuct, and check the re\\xADsult.\"), mdx(\"p\", null, \"Let\\u2019s now im\\xADple\\xADment a more so\\xADphis\\xADti\\xADcated sce\\xADnario. Let\\u2019s add and delete a prod\\xADuct:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"@Test\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"public\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"checkWeCanAddAndDeleteAProduct\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"()\"), \" \"), \"{\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Create a new bottle and retrieve the result (as a Whisky instance).\"), \"\\n  Whisky whisky = given()\\n      .body(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"{\\\\\\\"name\\\\\\\":\\\\\\\"Jameson\\\\\\\", \\\\\\\"origin\\\\\\\":\\\\\\\"Ireland\\\\\\\"}\\\"\"), \").request().post(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/api/whiskies\\\"\"), \").thenReturn().as(Whisky.class);\\n  assertThat(whisky.getName()).isEqualToIgnoringCase(\\\"Jameson\\\");\\n  assertThat(whisky.getOrigin()).isEqualToIgnoringCase(\\\"Ireland\\\");\\n  assertThat(whisky.getId()).isNotZero();\\n  // Check that it has created an individual resource, and check the content.\\n  get(\\\"/api/whiskies/\\\" + whisky.getId()).then()\\n      .assertThat()\\n      .statusCode(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"200\"), \")\\n      .body(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"name\\\"\"), \", equalTo(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Jameson\\\"\"), \"))\\n      .body(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"origin\\\"\"), \", equalTo(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Ireland\\\"\"), \"))\\n      .body(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"id\\\"\"), \", equalTo(whisky.getId()));\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Delete the bottle\"), \"\\n  delete(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/api/whiskies/\\\"\"), \" + whisky.getId()).then().assertThat().statusCode(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"204\"), \");\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Check that the resource is not available anymore\"), \"\\n  get(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/api/whiskies/\\\"\"), \" + whisky.getId()).then()\\n      .assertThat()\\n      .statusCode(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"404\"), \");\\n}\\n\")), mdx(\"p\", null, \"So, now we have in\\xADte\\xADgra\\xADtion tests let\\u2019s try:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-bash\"\n  }), \"mvn clean verify\\n\")), mdx(\"p\", null, \"Sim\\xADple no? Well, sim\\xADple once the setup is done right\\u2026 You can con\\xADtinue im\\xADple\\xADment\\xADing other in\\xADte\\xADgra\\xADtion tests to be sure that every\\xADthing be\\xADhave as you ex\\xADpect.\"), mdx(\"h2\", {\n    \"id\": \"dear-windows-users\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#dear-windows-users\"\n  })), \"Dear Windows users\\u2026\"), mdx(\"p\", null, \"This sec\\xADtion is the bonus part for Win\\xADdows user, or peo\\xADple want\\xADing to run their in\\xADte\\xADgra\\xADtion tests on Win\\xADdows ma\\xADchine too. The com\\xADmand we ex\\xADe\\xADcute to stop the ap\\xADpli\\xADca\\xADtion is not going to work on Win\\xADdows. Luck\\xADily, it\\u2019s pos\\xADsi\\xADble to ex\\xADtend the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"pom.xml\"), \" with a pro\\xADfile ex\\xADe\\xADcuted on Win\\xADdows.\"), mdx(\"p\", null, \"In your \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"pom.xml\"), \", just after \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"\u003c/build\u003e\"), \", add:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-xml\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"profiles\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"\u003c!-- A profile for windows as the stop command is different --\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"profile\"), \"\u003e\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"id\"), \"\u003e\"), \"windows\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"id\"), \"\u003e\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"activation\"), \"\u003e\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"os\"), \"\u003e\"), \"\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"family\"), \"\u003e\"), \"windows\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"family\"), \"\u003e\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"os\"), \"\u003e\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"activation\"), \"\u003e\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"build\"), \"\u003e\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"plugins\"), \"\u003e\"), \"\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"plugin\"), \"\u003e\"), \"\\n          \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"artifactId\"), \"\u003e\"), \"maven-antrun-plugin\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"artifactId\"), \"\u003e\"), \"\\n          \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"version\"), \"\u003e\"), \"1.8\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"version\"), \"\u003e\"), \"\\n          \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"executions\"), \"\u003e\"), \"\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"execution\"), \"\u003e\"), \"\\n              \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"id\"), \"\u003e\"), \"stop-vertx-app\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"id\"), \"\u003e\"), \"\\n              \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"phase\"), \"\u003e\"), \"post-integration-test\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"phase\"), \"\u003e\"), \"\\n              \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"goals\"), \"\u003e\"), \"\\n                \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"goal\"), \"\u003e\"), \"run\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"goal\"), \"\u003e\"), \"\\n              \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"goals\"), \"\u003e\"), \"\\n              \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"configuration\"), \"\u003e\"), \"\\n                \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"target\"), \"\u003e\"), \"\\n                  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"exec\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"executable\"), \"=\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"wmic\\\"\"), \"\\n                      \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"dir\"), \"=\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"${project.build.directory}\\\"\"), \"\\n                      \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"spawn\"), \"=\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"false\\\"\"), \"\u003e\"), \"\\n                    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"arg\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"value\"), \"=\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"process\\\"\"), \"/\u003e\"), \"\\n                    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"arg\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"value\"), \"=\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"where\\\"\"), \"/\u003e\"), \"\\n                    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"arg\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"value\"), \"=\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"CommandLine like '%${project.artifactId}%' and not name='wmic.exe'\\\"\"), \"/\u003e\"), \"\\n                    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"arg\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"value\"), \"=\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"delete\\\"\"), \"/\u003e\"), \"\\n                  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"exec\"), \"\u003e\"), \"\\n                \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"target\"), \"\u003e\"), \"\\n              \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"configuration\"), \"\u003e\"), \"\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"execution\"), \"\u003e\"), \"\\n          \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"executions\"), \"\u003e\"), \"\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"plugin\"), \"\u003e\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"plugins\"), \"\u003e\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"build\"), \"\u003e\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"profile\"), \"\u003e\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-tag\"\n  }), \"\u003c/\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-name\"\n  }), \"profiles\"), \"\u003e\"), \"\\n\")), mdx(\"p\", null, \"This pro\\xADfile re\\xADplaces the ac\\xADtions de\\xADscribed above to stop the ap\\xADpli\\xADca\\xADtion with a ver\\xADsion work\\xADing on win\\xADdows. The pro\\xADfile is au\\xADto\\xADmat\\xADi\\xADcally en\\xADabled on Win\\xADdows. As on oth\\xADers op\\xADer\\xADat\\xADing sys\\xADtems, ex\\xADe\\xADcute with:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-bash\"\n  }), \"mvn clean verify\\n\")), mdx(\"h2\", {\n    \"id\": \"conclusion\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#conclusion\"\n  })), \"Conclusion\"), mdx(\"p\", null, \"Wow, what a trip ! We are done\\u2026 In this post we have seen how we can gain con\\xADfi\\xADdence in Vert.x ap\\xADpli\\xADca\\xADtions by im\\xADple\\xADment\\xADing both unit and in\\xADte\\xADgra\\xADtion tests. Unit tests, thanks to vert.x unit, are able to check the asyn\\xADchro\\xADnous as\\xADpect of Vert.x ap\\xADpli\\xADca\\xADtion, but could be com\\xADplex for large sce\\xADnar\\xADios. Thanks to Rest As\\xADsured and As\\xADsertJ, in\\xADte\\xADgra\\xADtion tests are dead sim\\xADple to write\\u2026 but the setup is not straight\\xADfor\\xADward. This post have shown how it can be con\\xADfig\\xADured eas\\xADily. Ob\\xADvi\\xADously, you could also use As\\xADsertJ and Rest As\\xADsured in your unit tests.\"), mdx(\"p\", null, \"In the \", mdx(Link, {\n    href: \"/blog/using-the-asynchronous-sql-client/\",\n    passHref: true,\n    mdxType: \"Link\"\n  }, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"\"\n  }), \"next post\")), \", we re\\xADplace the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"in mem\\xADory\"), \" back\\xADend with a data\\xADbase, and use asyn\\xADchro\\xADnous in\\xADte\\xADgra\\xADtion with this data\\xADbase.\"), mdx(\"p\", null, \"Stay Tuned \u0026 Happy Cod\\xADing !\"));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"\u003cp\u003eLet’s re­fresh our mind about what we de­vel­oped so far in the \u003cem\u003ein­tro­duc­tion to vert.x\u003c/em\u003e se­ries. In \u003ca href=\"/blog/my-first-vert-x-3-application/\"\u003ethe first post\u003c/a\u003e, we de­vel­oped a very sim­ple Vert.x 3 ap­pli­ca­tion, and saw how this ap­pli­ca­tion can be tested, pack­aged and ex­e­cuted. In \u003ca href=\"/blog/vert-x-application-configuration/\"\u003ethe sec­ond post\u003c/a\u003e, we saw how this ap­pli­ca­tion be­came con­fig­urable and how we can use a ran­dom port in test, and use an­other con­fig­urable port in pro­duc­tion. Fi­nally, the \u003ca href=\"/blog/some-rest-with-vert-x/\"\u003epre­vi­ous post\u003c/a\u003e has shown how to use vertx-​web and how to im­ple­ment a small REST API. How­ever, we for­got an im­por­tant task. We didn’t test the API. In this post we will in­crease the con­fi­dence we have on this ap­pli­ca­tion by im­ple­ment­ing unit and in­te­gra­tion tests.\u003c/p\u003e\u003cp\u003eThe code of this post is avail­able in the \u003ca href=\"https://github.com/cescoffier/my-vertx-first-app/tree/post-4\"\u003epost-4 branch\u003c/a\u003e of the \u003ca href=\"https://github.com/cescoffier/my-vertx-first-app\"\u003eproject\u003c/a\u003e. The start­ing post, how­ever is the code avail­able in the \u003ca href=\"https://github.com/cescoffier/my-vertx-first-app/tree/post-3\"\u003epost-3 branch\u003c/a\u003e.\u003c/p\u003e\u003ch2 id=\"tests-tests-tests\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#tests-tests-tests\"\u003e\u003c/a\u003eTests, Tests, Tests…\u003c/h2\u003e\u003cp\u003eThis post is mainly about tests. We dis­tin­guish two types of tests: unit tests and in­te­gra­tion tests. Both are equally im­por­tant, but have dif­fer­ent focus. Unit tests en­sure that one \u003cem\u003ecom­po­nent\u003c/em\u003e of your ap­pli­ca­tion, gen­er­ally a class in the Java world, be­haves as ex­pected. The ap­pli­ca­tion is not tested as a whole, but pieces by pieces. In­te­gra­tion tests are more \u003cem\u003eblack box\u003c/em\u003e in the sense that the ap­pli­ca­tion is started and tested gen­er­ally ex­ter­nally.\u003c/p\u003e\u003cp\u003eIn this post we are going to start with some more unit tests as a warm up ses­sion and then focus on in­te­gra­tion tests. If you al­ready im­ple­mented in­te­gra­tion tests, you may be a bit scared, and it makes sense. But don’t worry, with Vert.x there are no hid­den sur­prises.\u003c/p\u003e\u003ch2 id=\"warmup-some-more-unit-tests\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#warmup-some-more-unit-tests\"\u003e\u003c/a\u003eWarmup: Some more unit tests\u003c/h2\u003e\u003cp\u003eLet’s start slowly. Re­mem­ber in the first post we have im­ple­mented a unit test with \u003ca href=\"/docs/vertx-unit/java/\"\u003evertx-​unit\u003c/a\u003e. The test we did is dead sim­ple:\u003c/p\u003e\u003col\u003e\u003cli\u003ewe started the ap­pli­ca­tion be­fore the test\u003c/li\u003e\u003cli\u003ewe checks that it replies “Hello”\u003c/li\u003e\u003c/ol\u003e\u003cp\u003eJust to re­fresh your mind, let’s have a look at the \u003ca href=\"https://github.com/cescoffier/my-vertx-first-app/blob/post-4/src/test/java/io/vertx/blog/first/MyFirstVerticleTest.java\"\u003ecode\u003c/a\u003e\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-meta\"\u003e@Before\u003c/span\u003e\n\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003esetUp\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(TestContext context)\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003ethrows\u003c/span\u003e IOException \u003c/span\u003e{\n  vertx = Vertx.vertx();\n  ServerSocket socket = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e ServerSocket(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e);\n  port = socket.getLocalPort();\n  socket.close();\n  DeploymentOptions options = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e DeploymentOptions()\n      .setConfig(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;http.port\u0026quot;\u003c/span\u003e, port)\n      );\n  vertx.deployVerticle(MyFirstVerticle.class.getName(), options, context.asyncAssertSuccess());\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThe \u003ccode\u003esetUp\u003c/code\u003e method is in­voked be­fore each test (as in­structed by the \u003ccode\u003e@Before\u003c/code\u003e an­no­ta­tion). It, first, cre­ates a new in­stance of Vert.x. Then, it gets a free port and then de­ploys our ver­ti­cle with the right con­fig­u­ra­tion. Thanks to the \u003ccode\u003econtext.asyncAssertSuccess()\u003c/code\u003e it waits until the suc­cess­ful de­ploy­ment of the ver­ti­cle.\u003c/p\u003e\u003cp\u003eThe \u003ccode\u003etearDown\u003c/code\u003e is straight­for­ward and just closes the Vert.x in­stance. It au­to­mat­i­cally un-​deploys the ver­ti­cles:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-meta\"\u003e@After\u003c/span\u003e\n\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003etearDown\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(TestContext context)\u003c/span\u003e \u003c/span\u003e{\n  vertx.close(context.asyncAssertSuccess());\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eFi­nally, our sin­gle test is:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-meta\"\u003e@Test\u003c/span\u003e\n\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003etestMyApplication\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(TestContext context)\u003c/span\u003e \u003c/span\u003e{\n  \u003cspan class=\"hljs-keyword\"\u003efinal\u003c/span\u003e Async async = context.async();\n  vertx.createHttpClient().getNow(port, \u003cspan class=\"hljs-string\"\u003e\u0026quot;localhost\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;/\u0026quot;\u003c/span\u003e, response -\u0026gt; {\n    response.handler(body -\u0026gt; {\n      context.assertTrue(body.toString().contains(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Hello\u0026quot;\u003c/span\u003e));\n      async.complete();\n    });\n  });\n }\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eIt is only check­ing that the ap­pli­ca­tion replies “Hello” when we emit a HTTP re­quest on \u003ccode\u003e/\u003c/code\u003e.\u003c/p\u003e\u003cp\u003eLet’s now try to im­ple­ment some unit tests checkin that our web ap­pli­ca­tion and the REST API be­have as ex­pected. Let’s start by check­ing that the \u003ccode\u003eindex.html\u003c/code\u003e page is cor­rectly served. This test is very sim­i­lar to the pre­vi­ous one:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-meta\"\u003e@Test\u003c/span\u003e\n\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003echeckThatTheIndexPageIsServed\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(TestContext context)\u003c/span\u003e \u003c/span\u003e{\n  Async async = context.async();\n  vertx.createHttpClient().getNow(port, \u003cspan class=\"hljs-string\"\u003e\u0026quot;localhost\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;/assets/index.html\u0026quot;\u003c/span\u003e, response -\u0026gt; {\n    context.assertEquals(response.statusCode(), \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e);\n    context.assertEquals(response.headers().get(\u003cspan class=\"hljs-string\"\u003e\u0026quot;content-type\u0026quot;\u003c/span\u003e), \u003cspan class=\"hljs-string\"\u003e\u0026quot;text/html\u0026quot;\u003c/span\u003e);\n    response.bodyHandler(body -\u0026gt; {\n      context.assertTrue(body.toString().contains(\u003cspan class=\"hljs-string\"\u003e\u0026quot;\u0026lt;title\u0026gt;My Whisky Collection\u0026lt;/title\u0026gt;\u0026quot;\u003c/span\u003e));\n      async.complete();\n    });\n  });\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eWe re­trieve the \u003ccode\u003eindex.html\u003c/code\u003e page and check:\u003c/p\u003e\u003col\u003e\u003cli\u003eit’s there (sta­tus code 200)\u003c/li\u003e\u003cli\u003eit’s a HTML page (con­tent type set to “text/html”)\u003c/li\u003e\u003cli\u003eit has the right title (“My Whisky Col­lec­tion”)\u003c/li\u003e\u003c/ol\u003e\u003cdiv class=\"alert info\"\u003e\u003cp\u003eAs you can see, we can test the sta­tus code and the head­ers di­rectly on the HTTP re­sponse, but en­sure that the body is right, we need to re­trieve it. This is done with a body han­dler that re­ceives the com­plete body as pa­ra­me­ter. Once the last check is made, we re­lease the \u003ccode\u003easync\u003c/code\u003e by call­ing \u003ccode\u003ecomplete\u003c/code\u003e.\u003c/p\u003e\u003c/div\u003e\u003cp\u003eOk, great, but this ac­tu­ally does not test our REST API. Let’s en­sure that we can add a bot­tle to the col­lec­tion. Un­like the pre­vi­ous tests, this one is using \u003ccode\u003epost\u003c/code\u003e to \u003cem\u003epost\u003c/em\u003e data to the server:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-meta\"\u003e@Test\u003c/span\u003e\n\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003echeckThatWeCanAdd\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(TestContext context)\u003c/span\u003e \u003c/span\u003e{\n  Async async = context.async();\n  \u003cspan class=\"hljs-keyword\"\u003efinal\u003c/span\u003e String json = Json.encodePrettily(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e Whisky(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Jameson\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;Ireland\u0026quot;\u003c/span\u003e));\n  \u003cspan class=\"hljs-keyword\"\u003efinal\u003c/span\u003e String length = Integer.toString(json.length());\n  vertx.createHttpClient().post(port, \u003cspan class=\"hljs-string\"\u003e\u0026quot;localhost\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;/api/whiskies\u0026quot;\u003c/span\u003e)\n      .putHeader(\u003cspan class=\"hljs-string\"\u003e\u0026quot;content-type\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;application/json\u0026quot;\u003c/span\u003e)\n      .putHeader(\u003cspan class=\"hljs-string\"\u003e\u0026quot;content-length\u0026quot;\u003c/span\u003e, length)\n      .handler(response -\u0026gt; {\n        context.assertEquals(response.statusCode(), \u003cspan class=\"hljs-number\"\u003e201\u003c/span\u003e);\n        context.assertTrue(response.headers().get(\u003cspan class=\"hljs-string\"\u003e\u0026quot;content-type\u0026quot;\u003c/span\u003e).contains(\u003cspan class=\"hljs-string\"\u003e\u0026quot;application/json\u0026quot;\u003c/span\u003e));\n        response.bodyHandler(body -\u0026gt; {\n          \u003cspan class=\"hljs-keyword\"\u003efinal\u003c/span\u003e Whisky whisky = Json.decodeValue(body.toString(), Whisky.class);\n          context.assertEquals(whisky.getName(), \u0026quot;Jameson\u0026quot;);\n          context.assertEquals(whisky.getOrigin(), \u0026quot;Ireland\u0026quot;);\n          context.assertNotNull(whisky.getId());\n          async.complete();\n        });\n      })\n      .write(json)\n      .end();\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eFirst we cre­ate the con­tent we want to add. The server con­sumes JSON data, so we need a JSON string. You can ei­ther write your JSON doc­u­ment man­u­ally, or use the Vert.x method (\u003ccode\u003eJson.encodePrettily\u003c/code\u003e) as done here. Once we have the con­tent, we cre­ate a \u003ccode\u003epost\u003c/code\u003e re­quest. We need to con­fig­ure some head­ers to be cor­rectly read by the server. First, we say that we are send­ing JSON data and we also set the con­tent length. We also at­tach a re­sponse han­dler very close to the checks made in the pre­vi­ous test. No­tice that we can re­build our ob­ject from the JSON doc­u­ment send by the server using the \u003ccode\u003eJSON.decodeValue\u003c/code\u003e method. It’s very con­ve­nient as it avoids lots of boil­er­plate code.  At this point the re­quest is not emit­ted, we need to write the data and call the \u003ccode\u003eend()\u003c/code\u003e method. This is made using \u003ccode\u003e.write(json).end();\u003c/code\u003e.\u003c/p\u003e\u003cp\u003eThe order of the meth­ods is im­por­tant. You can­not \u003cem\u003ewrite\u003c/em\u003e data if you don’t have a re­sponse han­dler con­fig­ured. Fi­nally don’t for­get to call \u003ccode\u003eend\u003c/code\u003e.\u003c/p\u003e\u003cp\u003eSo, let’s try this. You can run the test using:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003emvn clean \u003cspan class=\"hljs-built_in\"\u003etest\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eWe could con­tinue writ­ing more unit test like that, but it could be­come quite com­plex. Let’s see how we could con­tinue our tests using in­te­gra­tion tests.\u003c/p\u003e\u003ch2 id=\"it-hurts\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#it-hurts\"\u003e\u003c/a\u003eIT hurts\u003c/h2\u003e\u003cp\u003eWell, I think we need to make that clear, in­te­gra­tion test­ing hurts. If you have ex­pe­ri­ence in this area, can you re­mem­ber how long did it take to setup every­thing cor­rectly? I get new white hairs by just think­ing about it. Why are in­te­gra­tion tests more com­pli­cated? It’s ba­si­cally be­cause of the setup:\u003c/p\u003e\u003col\u003e\u003cli\u003eWe must start the ap­pli­ca­tion in a \u003cem\u003eclose to pro­duc­tion\u003c/em\u003e way\u003c/li\u003e\u003cli\u003eWe must then run the tests (and con­fig­ure them to hit the right ap­pli­ca­tion in­stance)\u003c/li\u003e\u003cli\u003eWe must stop the ap­pli­ca­tion\u003c/li\u003e\u003c/ol\u003e\u003cp\u003eThat does not sound un­con­quer­able like that, but if you need Linux, MacOS X and Win­dows sup­port, it quickly get messy. There are plenty of great frame­works eas­ing this such as \u003ca href=\"http://arquillian.org\"\u003eAr­quil­lian\u003c/a\u003e, but let’s do it with­out any frame­work to un­der­stand how it works.\u003c/p\u003e\u003ch2 id=\"we-need-a-battle-plan\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#we-need-a-battle-plan\"\u003e\u003c/a\u003eWe need a battle plan\u003c/h2\u003e\u003cp\u003eBe­fore rush­ing into the com­plex con­fig­u­ra­tion, let’s think a minute about the tasks:\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eStep 1 - Re­serve a free port\u003c/strong\u003e\nWe need to get a free port on which the ap­pli­ca­tion can \u003cem\u003elis­ten\u003c/em\u003e, and we need to in­ject this port in our in­te­gra­tion tests.\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eStep 2 - Gen­er­ate the ap­pli­ca­tion con­fig­u­ra­tion\u003c/strong\u003e\nOnce we have the free port, we need to write a JSON file con­fig­ur­ing the ap­pli­ca­tion HTTP Port to this port.\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eStep 3 - Start the ap­pli­ca­tion\u003c/strong\u003e\nSounds easy right? Well it’s not that sim­ple as we need to launch our ap­pli­ca­tion in a back­ground process.\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eStep 4 - Ex­e­cute the in­te­gra­tion tests\u003c/strong\u003e\nFi­nally, the cen­tral part, run the tests. But be­fore that we should im­ple­ment some in­te­gra­tion tests. Let’s come to that later.\u003c/p\u003e\u003cp\u003e\u003cstrong\u003eStep 5 - Stop the ap­pli­ca­tion\u003c/strong\u003e\nOnce the tests have been ex­e­cuted, re­gard­less if there are fail­ures or er­rors in the tests, we need to stop the ap­pli­ca­tion.\u003c/p\u003e\u003cp\u003eThere are mul­ti­ple way to im­ple­ment this plan. We are going to use a \u003cem\u003egeneric\u003c/em\u003e way. It’s not nec­es­sar­ily the bet­ter, but can be ap­plied al­most every­where. The ap­proach is tight to Apache Maven. If you want to pro­pose an al­ter­na­tive using Gra­dle or a dif­fer­ent tool, I will be happy to add your way to the post.\u003c/p\u003e\u003ch2 id=\"implement-the-plan\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#implement-the-plan\"\u003e\u003c/a\u003eImplement the plan\u003c/h2\u003e\u003cp\u003eAs said above, this sec­tion is Maven-​centric, and most of the code goes in the \u003ca href=\"https://github.com/cescoffier/my-vertx-first-app/blob/post-4/pom.xml\"\u003epom.xml\u003c/a\u003e file. If you never used the dif­fer­ent Maven life­cy­cle phases, I rec­om­mend you to look at the \u003ca href=\"https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html\"\u003ein­tro­duc­tion to the Maven life­cy­cle\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eWe need to add and con­fig­ure a cou­ple of plu­g­ins. Open the \u003ccode\u003epom.xml\u003c/code\u003e file and in the \u003ccode\u003e\u0026lt;plugins\u0026gt;\u003c/code\u003e sec­tion add:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eplugin\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003eorg.codehaus.mojo\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003ebuild-helper-maven-plugin\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e1.9.1\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eexecutions\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eexecution\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eid\u003c/span\u003e\u0026gt;\u003c/span\u003ereserve-network-port\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eid\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003egoals\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003egoal\u003c/span\u003e\u0026gt;\u003c/span\u003ereserve-network-port\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003egoal\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003egoals\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ephase\u003c/span\u003e\u0026gt;\u003c/span\u003eprocess-sources\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ephase\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003econfiguration\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eportNames\u003c/span\u003e\u0026gt;\u003c/span\u003e\n          \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eportName\u003c/span\u003e\u0026gt;\u003c/span\u003ehttp.port\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eportName\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eportNames\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003econfiguration\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eexecution\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eexecutions\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eplugin\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eWe use the \u003ccode\u003ebuild-helper-maven-plugin\u003c/code\u003e (a plug­in to know if you are often using Maven) to pick up a free port. Once found, the plug­in as­signs the \u003ccode\u003ehttp.port\u003c/code\u003e vari­able to the picked port. We ex­e­cute this plug­in early in the build (dur­ing the \u003ccode\u003eprocess-sources\u003c/code\u003e phase), so we can use the \u003ccode\u003ehttp.port\u003c/code\u003e vari­able in the other plug­in. This was for the first step.\u003c/p\u003e\u003cp\u003eTwo ac­tions are re­quired for the sec­ond step. First, in the \u003ccode\u003epom.xml\u003c/code\u003e file, just below the \u003ccode\u003e\u0026lt;build\u0026gt;\u003c/code\u003e open­ing tag, add:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003etestResources\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003etestResource\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003edirectory\u003c/span\u003e\u0026gt;\u003c/span\u003esrc/test/resources\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003edirectory\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003efiltering\u003c/span\u003e\u0026gt;\u003c/span\u003etrue\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003efiltering\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003etestResource\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003etestResources\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThis in­structs Maven to \u003cem\u003efil­ter\u003c/em\u003e re­sources from the \u003ccode\u003esrc/test/resources\u003c/code\u003e di­rec­tory. \u003cem\u003eFil­ter\u003c/em\u003e means re­plac­ing place­hold­ers by ac­tual val­ues. That’s ex­actly what we need as we now have the \u003ccode\u003ehttp.port\u003c/code\u003e vari­able. So cre­ate the \u003ccode\u003esrc/test/resources/my-it-config.json\u003c/code\u003e file with the fol­low­ing con­tent:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e{\n  \u003cspan class=\"hljs-string\"\u003e\u0026quot;http.port\u0026quot;\u003c/span\u003e: ${http.port}\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThis con­fig­u­ra­tion file is sim­i­lar to the one we did in pre­vi­ous posts. The only dif­fer­ence is the \u003ccode\u003e${http.port}\u003c/code\u003e which is the (de­fault) Maven syn­tax for fil­ter­ing. So, when Maven is going to process or file it will re­place \u003ccode\u003e${http.port}\u003c/code\u003e by the se­lected port. That’s all for the sec­ond step.\u003c/p\u003e\u003cp\u003eThe step 3 and 5 are a bit more tricky. We should start and stop the ap­pli­ca­tion. We are going to use the \u003ccode\u003emaven-antrun-plugin\u003c/code\u003e to achieve this. In the \u003ccode\u003epom.xml\u003c/code\u003e file, below the \u003ccode\u003ebuild-helper-maven-plugin\u003c/code\u003e, add:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-xml\"\u003e\u003cspan class=\"hljs-comment\"\u003e\u0026lt;!-- We use the maven-antrun-plugin to start the application before the integration tests\nand stop them afterward --\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eplugin\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003emaven-antrun-plugin\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e1.8\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eexecutions\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eexecution\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eid\u003c/span\u003e\u0026gt;\u003c/span\u003estart-vertx-app\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eid\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ephase\u003c/span\u003e\u0026gt;\u003c/span\u003epre-integration-test\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ephase\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003egoals\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003egoal\u003c/span\u003e\u0026gt;\u003c/span\u003erun\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003egoal\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003egoals\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003econfiguration\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003etarget\u003c/span\u003e\u0026gt;\u003c/span\u003e\n          \u003cspan class=\"hljs-comment\"\u003e\u0026lt;!--\n          Launch the application as in \u0026#x27;production\u0026#x27; using the fatjar.\n          We pass the generated configuration, configuring the http port to the picked one\n          --\u0026gt;\u003c/span\u003e\n          \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eexec\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eexecutable\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;${java.home}/bin/java\u0026quot;\u003c/span\u003e\n                \u003cspan class=\"hljs-attr\"\u003edir\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;${project.build.directory}\u0026quot;\u003c/span\u003e\n                \u003cspan class=\"hljs-attr\"\u003espawn\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;true\u0026quot;\u003c/span\u003e\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003earg\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003evalue\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;-jar\u0026quot;\u003c/span\u003e/\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003earg\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003evalue\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;${project.artifactId}-${project.version}-fat.jar\u0026quot;\u003c/span\u003e/\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003earg\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003evalue\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;-conf\u0026quot;\u003c/span\u003e/\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003earg\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003evalue\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;${project.build.directory}/test-classes/my-it-config.json\u0026quot;\u003c/span\u003e/\u0026gt;\u003c/span\u003e\n          \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eexec\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003etarget\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003econfiguration\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eexecution\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eexecution\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eid\u003c/span\u003e\u0026gt;\u003c/span\u003estop-vertx-app\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eid\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ephase\u003c/span\u003e\u0026gt;\u003c/span\u003epost-integration-test\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ephase\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003egoals\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003egoal\u003c/span\u003e\u0026gt;\u003c/span\u003erun\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003egoal\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003egoals\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003econfiguration\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-comment\"\u003e\u0026lt;!--\n          Kill the started process.\n          Finding the right process is a bit tricky. Windows command in in the windows profile (below)\n          --\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003etarget\u003c/span\u003e\u0026gt;\u003c/span\u003e\n          \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eexec\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eexecutable\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;bash\u0026quot;\u003c/span\u003e\n                \u003cspan class=\"hljs-attr\"\u003edir\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;${project.build.directory}\u0026quot;\u003c/span\u003e\n                \u003cspan class=\"hljs-attr\"\u003espawn\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;false\u0026quot;\u003c/span\u003e\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003earg\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003evalue\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;-c\u0026quot;\u003c/span\u003e/\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003earg\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003evalue\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;ps ax | grep -Ei \u0026#x27;[\\-]DtestPort=${http.port}\\s+\\-jar\\s+${project.artifactId}\u0026#x27; | awk \u0026#x27;NR==1{print $1}\u0026#x27; | xargs kill -SIGTERM\u0026quot;\u003c/span\u003e/\u0026gt;\u003c/span\u003e\n          \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eexec\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003etarget\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003econfiguration\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eexecution\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eexecutions\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eplugin\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThat’s a huge piece of XML, isn’t it ? We con­fig­ure two ex­e­cu­tions of the plug­in. The first one, hap­pen­ing in the \u003ccode\u003epre-integration-test\u003c/code\u003e phase, ex­e­cutes a set of bash com­mand to start the ap­pli­ca­tion. It ba­si­cally ex­e­cutes:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003ejava -jar my-first-app-1.0-SNAPSHOT-fat.jar -conf .../my-it-config.json\n\u003c/code\u003e\u003c/pre\u003e\u003cdiv class=\"alert info\"\u003e\u003cdiv class=\"alert-title\"\u003eIs the fatjar created?\u003c/div\u003e\u003cp\u003eThe fat jar em­bed­ding our ap­pli­ca­tion is cre­ated in the \u003ccode\u003epackage\u003c/code\u003e phase, pre­ced­ing the \u003ccode\u003epre-integration-test\u003c/code\u003e, so yes, the fat jar is cre­ated.\u003c/p\u003e\u003c/div\u003e\u003cp\u003eAs men­tioned above, we launch the ap­pli­ca­tion as we would in a pro­duc­tion en­vi­ron­ment.\u003c/p\u003e\u003cp\u003eOnce, the in­te­gra­tion tests are ex­e­cuted (step 4 we didn’t look at it yet), we need to stop the ap­pli­ca­tion (so in the the \u003ccode\u003epost-integration-test\u003c/code\u003e phase).  To close the ap­pli­ca­tion, we are going to in­voke some shell magic com­mand to find our process in with the \u003ccode\u003eps\u003c/code\u003e com­mand and send the \u003ccode\u003eSIGTERM\u003c/code\u003e sig­nal. It is equiv­a­lent to:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003eps\n.... -\u0026gt; find your process id\n\u003cspan class=\"hljs-built_in\"\u003ekill\u003c/span\u003e your_process_id -SIGTERM\n\u003c/code\u003e\u003c/pre\u003e\u003cdiv class=\"alert info\"\u003e\u003cdiv class=\"alert-title\"\u003eAnd Windows?\u003c/div\u003e\u003cp\u003eI men­tioned it above, we want Win­dows to be sup­ported and these com­mands are not going to work on Win­dows. Don’t worry, Win­dows con­fig­u­ra­tion is below …\u003c/p\u003e\u003c/div\u003e\u003cp\u003eWe should now do the fourth step we (silently) skipped. To ex­e­cute our in­te­gra­tion tests, we use the \u003ccode\u003emaven-failsafe-plugin\u003c/code\u003e. Add the fol­low­ing plug­in con­fig­u­ra­tion to your \u003ccode\u003epom.xml\u003c/code\u003e file:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eplugin\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003eorg.apache.maven.plugins\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003emaven-failsafe-plugin\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e2.18.1\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eexecutions\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eexecution\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003egoals\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003egoal\u003c/span\u003e\u0026gt;\u003c/span\u003eintegration-test\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003egoal\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003egoal\u003c/span\u003e\u0026gt;\u003c/span\u003everify\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003egoal\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003egoals\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003econfiguration\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003esystemProperties\u003c/span\u003e\u0026gt;\u003c/span\u003e\n          \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ehttp.port\u003c/span\u003e\u0026gt;\u003c/span\u003e${http.port}\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ehttp.port\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003esystemProperties\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003econfiguration\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eexecution\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eexecutions\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eplugin\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eAs you can see, we pass the \u003ccode\u003ehttp.port\u003c/code\u003e prop­erty as a sys­tem vari­able, so our tests are able to con­nect on the right port.\u003c/p\u003e\u003cp\u003eThat’s all! Wow… Let’s try this (for win­dows users, you will need to be pa­tient or to jump to the last sec­tion).\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003emvn clean verify\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eWe should not use \u003ccode\u003emvn integration-test\u003c/code\u003e be­cause the ap­pli­ca­tion would still be run­ning. The \u003ccode\u003everify\u003c/code\u003e phase is after the \u003ccode\u003epost-integration-test\u003c/code\u003e phase and will analyse the integration-​tests re­sults. Build fail­ures be­cause of in­te­gra­tion tests failed as­ser­tions are re­ported in this phase.\u003c/p\u003e\u003ch2 id=\"hey-we-dont-have-integration-tests-\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#hey-we-dont-have-integration-tests-\"\u003e\u003c/a\u003eHey, we don’t have integration tests !\u003c/h2\u003e\u003cp\u003eAnd that’s right, we set up every­thing, but we don’t have a sin­gle in­te­gra­tion test. To ease the im­ple­men­ta­tion, let’s use two li­braries: \u003ca href=\"http://joel-costigliola.github.io/assertj/\"\u003eAs­sertJ\u003c/a\u003e and \u003ca href=\"https://github.com/jayway/rest-assured\"\u003eRest-​Assured\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eAs­sertJ pro­poses a set of as­ser­tions that you can chain and use flu­ently. Rest As­sured is a frame­work to test REST API.\u003c/p\u003e\u003cp\u003eIn the \u003ccode\u003epom.xml\u003c/code\u003e file, add the two fol­low­ing de­pen­den­cies just be­fore \u003ccode\u003e\u0026lt;/dependencies\u0026gt;\u003c/code\u003e:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003ecom.jayway.restassured\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003erest-assured\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e2.4.0\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003escope\u003c/span\u003e\u0026gt;\u003c/span\u003etest\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003escope\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003eorg.assertj\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003eassertj-core\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e2.0.0\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003escope\u003c/span\u003e\u0026gt;\u003c/span\u003etest\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003escope\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThen, cre­ate the \u003ccode\u003esrc/test/java/io/vertx/blog/first/MyRestIT.java\u003c/code\u003e file. Un­like unit test, in­te­gra­tion test ends with \u003ccode\u003eIT\u003c/code\u003e. It’s a con­ven­tion from the Fail­safe plug­in to dis­tin­guish unit (start­ing or end­ing with \u003cem\u003eTest\u003c/em\u003e) from in­te­gra­tion tests (start­ing or end­ing with \u003cem\u003eIT\u003c/em\u003e). In the cre­ated file add:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-keyword\"\u003epackage\u003c/span\u003e io.vertx.blog.first;\n\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e com.jayway.restassured.RestAssured;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e org.junit.AfterClass;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e org.junit.BeforeClass;\n\n\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eMyRestIT\u003c/span\u003e \u003c/span\u003e{\n\n  \u003cspan class=\"hljs-meta\"\u003e@BeforeClass\u003c/span\u003e\n  \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003econfigureRestAssured\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e()\u003c/span\u003e \u003c/span\u003e{\n    RestAssured.baseURI = \u003cspan class=\"hljs-string\"\u003e\u0026quot;http://localhost\u0026quot;\u003c/span\u003e;\n    RestAssured.port = Integer.getInteger(\u003cspan class=\"hljs-string\"\u003e\u0026quot;http.port\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e);\n  }\n\n  \u003cspan class=\"hljs-meta\"\u003e@AfterClass\u003c/span\u003e\n  \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eunconfigureRestAssured\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e()\u003c/span\u003e \u003c/span\u003e{\n    RestAssured.reset();\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThe meth­ods an­no­tated with \u003ccode\u003e@BeforeClass\u003c/code\u003e and \u003ccode\u003e@AfterClass\u003c/code\u003e are in­voked once be­fore / after all tests of the class. Here, we just re­trieve the http port (passed as a sys­tem prop­erty) and we con­fig­ure REST As­sured.\u003c/p\u003e\u003cdiv class=\"alert info\"\u003e\u003cdiv class=\"alert-title\"\u003eAm I ready to serve?\u003c/div\u003e\u003cp\u003eYou may need to wait in the \u003ccode\u003econfigureRestAssured\u003c/code\u003e method that the HTTP server has been started. We rec­om­mend the \u003ca href=\"https://github.com/jayway/awaitility\"\u003eawait­il­ity\u003c/a\u003e test frame­work to check that the re­quest can be served. It would fail the test if the server does not start.\u003c/p\u003e\u003c/div\u003e\u003cp\u003eIt’s now time to im­ple­ment a real test. Let’s check we can re­trieve an in­di­vid­ual prod­uct:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-meta\"\u003e@Test\u003c/span\u003e\n\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003echeckThatWeCanRetrieveIndividualProduct\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e()\u003c/span\u003e \u003c/span\u003e{\n  \u003cspan class=\"hljs-comment\"\u003e// Get the list of bottles, ensure it\u0026#x27;s a success and extract the first id.\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003efinal\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eint\u003c/span\u003e id = get(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/api/whiskies\u0026quot;\u003c/span\u003e).then()\n      .assertThat()\n      .statusCode(\u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e)\n      .extract()\n      .jsonPath().getInt(\u003cspan class=\"hljs-string\"\u003e\u0026quot;find { it.name==\u0026#x27;Bowmore 15 Years Laimrig\u0026#x27; }.id\u0026quot;\u003c/span\u003e);\n  \u003cspan class=\"hljs-comment\"\u003e// Now get the individual resource and check the content\u003c/span\u003e\n  get(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/api/whiskies/\u0026quot;\u003c/span\u003e + id).then()\n      .assertThat()\n      .statusCode(\u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e)\n      .body(\u003cspan class=\"hljs-string\"\u003e\u0026quot;name\u0026quot;\u003c/span\u003e, equalTo(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Bowmore 15 Years Laimrig\u0026quot;\u003c/span\u003e))\n      .body(\u003cspan class=\"hljs-string\"\u003e\u0026quot;origin\u0026quot;\u003c/span\u003e, equalTo(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Scotland, Islay\u0026quot;\u003c/span\u003e))\n      .body(\u003cspan class=\"hljs-string\"\u003e\u0026quot;id\u0026quot;\u003c/span\u003e, equalTo(id));\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eHere you can ap­pre­ci­ate the power and ex­pres­sive­ness of Rest As­sured. We re­trieve the list of prod­uct, en­sure the re­sponse is cor­rect, and ex­tract the \u003cem\u003eid\u003c/em\u003e of a spe­cific bot­tle using a JSON (Groovy) Path ex­pres­sion.\u003c/p\u003e\u003cp\u003eThen, we try to re­trieve the meta­data of this in­di­vid­ual prod­uct, and check the re­sult.\u003c/p\u003e\u003cp\u003eLet’s now im­ple­ment a more so­phis­ti­cated sce­nario. Let’s add and delete a prod­uct:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-meta\"\u003e@Test\u003c/span\u003e\n\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003echeckWeCanAddAndDeleteAProduct\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e()\u003c/span\u003e \u003c/span\u003e{\n  \u003cspan class=\"hljs-comment\"\u003e// Create a new bottle and retrieve the result (as a Whisky instance).\u003c/span\u003e\n  Whisky whisky = given()\n      .body(\u003cspan class=\"hljs-string\"\u003e\u0026quot;{\\\u0026quot;name\\\u0026quot;:\\\u0026quot;Jameson\\\u0026quot;, \\\u0026quot;origin\\\u0026quot;:\\\u0026quot;Ireland\\\u0026quot;}\u0026quot;\u003c/span\u003e).request().post(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/api/whiskies\u0026quot;\u003c/span\u003e).thenReturn().as(Whisky.class);\n  assertThat(whisky.getName()).isEqualToIgnoringCase(\u0026quot;Jameson\u0026quot;);\n  assertThat(whisky.getOrigin()).isEqualToIgnoringCase(\u0026quot;Ireland\u0026quot;);\n  assertThat(whisky.getId()).isNotZero();\n  // Check that it has created an individual resource, and check the content.\n  get(\u0026quot;/api/whiskies/\u0026quot; + whisky.getId()).then()\n      .assertThat()\n      .statusCode(\u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e)\n      .body(\u003cspan class=\"hljs-string\"\u003e\u0026quot;name\u0026quot;\u003c/span\u003e, equalTo(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Jameson\u0026quot;\u003c/span\u003e))\n      .body(\u003cspan class=\"hljs-string\"\u003e\u0026quot;origin\u0026quot;\u003c/span\u003e, equalTo(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Ireland\u0026quot;\u003c/span\u003e))\n      .body(\u003cspan class=\"hljs-string\"\u003e\u0026quot;id\u0026quot;\u003c/span\u003e, equalTo(whisky.getId()));\n  \u003cspan class=\"hljs-comment\"\u003e// Delete the bottle\u003c/span\u003e\n  delete(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/api/whiskies/\u0026quot;\u003c/span\u003e + whisky.getId()).then().assertThat().statusCode(\u003cspan class=\"hljs-number\"\u003e204\u003c/span\u003e);\n  \u003cspan class=\"hljs-comment\"\u003e// Check that the resource is not available anymore\u003c/span\u003e\n  get(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/api/whiskies/\u0026quot;\u003c/span\u003e + whisky.getId()).then()\n      .assertThat()\n      .statusCode(\u003cspan class=\"hljs-number\"\u003e404\u003c/span\u003e);\n}\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eSo, now we have in­te­gra­tion tests let’s try:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003emvn clean verify\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eSim­ple no? Well, sim­ple once the setup is done right… You can con­tinue im­ple­ment­ing other in­te­gra­tion tests to be sure that every­thing be­have as you ex­pect.\u003c/p\u003e\u003ch2 id=\"dear-windows-users\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#dear-windows-users\"\u003e\u003c/a\u003eDear Windows users…\u003c/h2\u003e\u003cp\u003eThis sec­tion is the bonus part for Win­dows user, or peo­ple want­ing to run their in­te­gra­tion tests on Win­dows ma­chine too. The com­mand we ex­e­cute to stop the ap­pli­ca­tion is not going to work on Win­dows. Luck­ily, it’s pos­si­ble to ex­tend the \u003ccode\u003epom.xml\u003c/code\u003e with a pro­file ex­e­cuted on Win­dows.\u003c/p\u003e\u003cp\u003eIn your \u003ccode\u003epom.xml\u003c/code\u003e, just after \u003ccode\u003e\u0026lt;/build\u0026gt;\u003c/code\u003e, add:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eprofiles\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-comment\"\u003e\u0026lt;!-- A profile for windows as the stop command is different --\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eprofile\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eid\u003c/span\u003e\u0026gt;\u003c/span\u003ewindows\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eid\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eactivation\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eos\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003efamily\u003c/span\u003e\u0026gt;\u003c/span\u003ewindows\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003efamily\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eos\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eactivation\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ebuild\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eplugins\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eplugin\u003c/span\u003e\u0026gt;\u003c/span\u003e\n          \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003emaven-antrun-plugin\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n          \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e1.8\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e\n          \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eexecutions\u003c/span\u003e\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eexecution\u003c/span\u003e\u0026gt;\u003c/span\u003e\n              \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eid\u003c/span\u003e\u0026gt;\u003c/span\u003estop-vertx-app\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eid\u003c/span\u003e\u0026gt;\u003c/span\u003e\n              \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ephase\u003c/span\u003e\u0026gt;\u003c/span\u003epost-integration-test\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ephase\u003c/span\u003e\u0026gt;\u003c/span\u003e\n              \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003egoals\u003c/span\u003e\u0026gt;\u003c/span\u003e\n                \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003egoal\u003c/span\u003e\u0026gt;\u003c/span\u003erun\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003egoal\u003c/span\u003e\u0026gt;\u003c/span\u003e\n              \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003egoals\u003c/span\u003e\u0026gt;\u003c/span\u003e\n              \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003econfiguration\u003c/span\u003e\u0026gt;\u003c/span\u003e\n                \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003etarget\u003c/span\u003e\u0026gt;\u003c/span\u003e\n                  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eexec\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eexecutable\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;wmic\u0026quot;\u003c/span\u003e\n                      \u003cspan class=\"hljs-attr\"\u003edir\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;${project.build.directory}\u0026quot;\u003c/span\u003e\n                      \u003cspan class=\"hljs-attr\"\u003espawn\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;false\u0026quot;\u003c/span\u003e\u0026gt;\u003c/span\u003e\n                    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003earg\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003evalue\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;process\u0026quot;\u003c/span\u003e/\u0026gt;\u003c/span\u003e\n                    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003earg\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003evalue\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;where\u0026quot;\u003c/span\u003e/\u0026gt;\u003c/span\u003e\n                    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003earg\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003evalue\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;CommandLine like \u0026#x27;%${project.artifactId}%\u0026#x27; and not name=\u0026#x27;wmic.exe\u0026#x27;\u0026quot;\u003c/span\u003e/\u0026gt;\u003c/span\u003e\n                    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003earg\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003evalue\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;delete\u0026quot;\u003c/span\u003e/\u0026gt;\u003c/span\u003e\n                  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eexec\u003c/span\u003e\u0026gt;\u003c/span\u003e\n                \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003etarget\u003c/span\u003e\u0026gt;\u003c/span\u003e\n              \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003econfiguration\u003c/span\u003e\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eexecution\u003c/span\u003e\u0026gt;\u003c/span\u003e\n          \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eexecutions\u003c/span\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eplugin\u003c/span\u003e\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eplugins\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ebuild\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eprofile\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eprofiles\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThis pro­file re­places the ac­tions de­scribed above to stop the ap­pli­ca­tion with a ver­sion work­ing on win­dows. The pro­file is au­to­mat­i­cally en­abled on Win­dows. As on oth­ers op­er­at­ing sys­tems, ex­e­cute with:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003emvn clean verify\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"conclusion\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#conclusion\"\u003e\u003c/a\u003eConclusion\u003c/h2\u003e\u003cp\u003eWow, what a trip ! We are done… In this post we have seen how we can gain con­fi­dence in Vert.x ap­pli­ca­tions by im­ple­ment­ing both unit and in­te­gra­tion tests. Unit tests, thanks to vert.x unit, are able to check the asyn­chro­nous as­pect of Vert.x ap­pli­ca­tion, but could be com­plex for large sce­nar­ios. Thanks to Rest As­sured and As­sertJ, in­te­gra­tion tests are dead sim­ple to write… but the setup is not straight­for­ward. This post have shown how it can be con­fig­ured eas­ily. Ob­vi­ously, you could also use As­sertJ and Rest As­sured in your unit tests.\u003c/p\u003e\u003cp\u003eIn the \u003ca href=\"/blog/using-the-asynchronous-sql-client/\"\u003enext post\u003c/a\u003e, we re­place the \u003cem\u003ein mem­ory\u003c/em\u003e back­end with a data­base, and use asyn­chro­nous in­te­gra­tion with this data­base.\u003c/p\u003e\u003cp\u003eStay Tuned \u0026amp; Happy Cod­ing !\u003c/p\u003e","scope":{}}},"prevPost":{"meta":{"title":"Vert.x 3 real time web apps","category":"guides","authors":[{"name":"Paulo Lopes","github_id":"pmlopes"}],"summary":"One of the interesting features of Vert.x is the SockJS event bus bridge. It allows external applications to communicate with Vert.x event bus using Websockets."},"date":"2015-08-31","slug":"vert-x3-real-time-web-apps"},"nextPost":{"meta":{"title":"Some Rest with Vert.x","category":"guides","authors":[{"name":"Clement Escoffier","github_id":"cescoffier"}],"summary":"This post is part of the Introduction to Vert.x series. Let’s go a bit further this time and develop a CRUD-ish application"},"date":"2015-07-27","slug":"some-rest-with-vert-x"},"relatedPosts":[{"meta":{"title":"Some Rest with Vert.x","category":"guides","authors":[{"name":"Clement Escoffier","github_id":"cescoffier"}],"summary":"This post is part of the Introduction to Vert.x series. Let’s go a bit further this time and develop a CRUD-ish application"},"date":"2015-07-27","slug":"some-rest-with-vert-x"},{"meta":{"title":"My first Vert.x 3 Application","category":"guides","authors":[{"name":"Clement Escoffier","github_id":"cescoffier"}],"summary":"Let's say, you heard someone saying that Vert.x is awesome. Ok great, but you may want to try it by yourself. Well, the next natural question is “where do I start ?”"},"date":"2015-07-14","slug":"my-first-vert-x-3-application"},{"meta":{"title":"Using the asynchronous SQL client","category":"guides","authors":[{"name":"Clement Escoffier","github_id":"cescoffier"}],"summary":"Finally, back... This post is the fifth post of the introduction to vert.x blog series, after a not-that-small break. In this post we are going to see how we can use JDBC in a vert.x application."},"date":"2015-10-19","slug":"using-the-asynchronous-sql-client"}]},"__N_SSG":true},"page":"/blog/[[...slug]]","query":{"slug":["unit-and-integration-tests"]},"buildId":"gffg8fJmO9B83jNLnDyDY","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-9a5c89434732593ca2fd.js"></script><script src="/_next/static/chunks/main-b6e20584df76f29b6f35.js" async=""></script><script src="/_next/static/chunks/webpack-d7b2fb72fb7257504a38.js" async=""></script><script src="/_next/static/chunks/framework.fcef98db13e2318579fb.js" async=""></script><script src="/_next/static/chunks/commons.5b8771ac6e8a338f82f1.js" async=""></script><script src="/_next/static/chunks/styles.7064a0f84b2a7c13404a.js" async=""></script><script src="/_next/static/chunks/pages/_app-3dbbc9c041333077c167.js" async=""></script><script src="/_next/static/chunks/5df0631eea625b022d3730b3f1bf573e1b8deb37.3b9874ba65db13e7d868.js" async=""></script><script src="/_next/static/chunks/pages/blog/%5B%5B...slug%5D%5D-c36bc482402d8ffe42a5.js" async=""></script><script src="/_next/static/gffg8fJmO9B83jNLnDyDY/_buildManifest.js" async=""></script><script src="/_next/static/gffg8fJmO9B83jNLnDyDY/_ssgManifest.js" async=""></script></body></html>