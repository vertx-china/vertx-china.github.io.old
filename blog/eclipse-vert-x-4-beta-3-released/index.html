<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="description" content="Vert.x | Reactive applications on the JVM"/><meta name="robots" content="index,follow"/><link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet"/><link href="https://fonts.googleapis.com/css?family=Roboto+Condensed:300,400" rel="stylesheet"/><link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400&amp;display=swap" rel="stylesheet"/><link rel="shortcut icon" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="48x48" href="/favicons/favicon-48x48.png"/><link rel="alternate" type="application/rss+xml" href="/feed/rss.xml"/><link rel="alternate" type="application/atom+xml" href="/feed/atom.xml"/><link rel="alternate" type="application/json" href="/feed/feed.json"/><title>Eclipse Vert.x 4 beta 3 released! | 博客 | Eclipse Vert.x</title><meta name="next-head-count" content="16"/><link rel="preload" href="/_next/static/css/styles.f20dca63.chunk.css" as="style"/><link rel="stylesheet" href="/_next/static/css/styles.f20dca63.chunk.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-b6e20584df76f29b6f35.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-d7b2fb72fb7257504a38.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.fcef98db13e2318579fb.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.5b8771ac6e8a338f82f1.js" as="script"/><link rel="preload" href="/_next/static/chunks/styles.7064a0f84b2a7c13404a.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-3dbbc9c041333077c167.js" as="script"/><link rel="preload" href="/_next/static/chunks/5df0631eea625b022d3730b3f1bf573e1b8deb37.3b9874ba65db13e7d868.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/blog/%5B%5B...slug%5D%5D-c36bc482402d8ffe42a5.js" as="script"/></head><body><div id="__next"><main class="page"><header><div class="navbar"><div class="navbar-content container"><div class="navbar-logo"><a href="/"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAxMTI1LjYgMzE1LjIiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxzdHlsZT4uc3Qwe2ZpbGw6Izc4MmE5MX08L3N0eWxlPjxwYXRoIGQ9Ik0xMjAuOSAyMTQuMkwxOTAuNSAwaDUyLjNsLTk4LjUgMjczLjhIOTguMkwwIDBoNTIuMWw2OC44IDIxNC4yem0yOTEuMi02Mi42SDI5OS42djg0LjJINDMxdjM4SDI1MlYwaDE3Ny43djM4LjRIMjk5LjZWMTE0aDExMi41djM3LjZ6bTgzLjctMTEzLjJINTQ2YzE2LjUuMyAyOSA0LjQgMzcuMyAxMi40IDguMyA4IDEyLjUgMTkuNCAxMi41IDM0IDAgMTQtNC41IDI1LjEtMTMuNSAzMy4yLTkgOC4xLTIxLjYgMTIuMS0zNy42IDEyLjFoLTI3LjF2MjQuMmw4Ni4xIDExOS41aDUxdi0yLjRsLTc3LjItMTA2LjdjMjQuOS01LjUgNDMuMy0yMS43IDUyLjYtMzUuOSA4LjItMTIuNiAxMy4zLTI3LjcgMTMuMy00NiAwLTI2LjgtOC42LTQ3LjQtMjUuOC02MS41QzYwMC41IDcuMSA1NzYuMSAwIDU0NC41IDBoLTk2LjN2MjczLjhoNDcuNiIvPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDUyLjMgMTU3LjdsLTQxLjUgNjIuNyAyOS43IDUzLjRoODUuMXoiLz48Y2lyY2xlIGNsYXNzPSJzdDAiIGN4PSI4MjcuOSIgY3k9IjI3NC43IiByPSI0MC41Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTEwMzcgMGwtNDcuNiA3NC4yTDk0OSAwaC04NGw4NS4zIDEzNS44LTY3LjEgMTA1LjdjNS43IDkuNSA5LjEgMjAuNSA5LjIgMzIuNGg1MC4xTDExMjEuMyAwSDEwMzd6Ii8+PHBhdGggZD0iTTc2My41IDI3My44Yy4xLTkuOSAyLjUtMTkuMiA2LjYtMjcuNVYzOC40aDg1LjRWMEg2MzguMnYzOC40aDg0LjZ2MjM1LjRoNDAuN3oiLz48L3N2Zz4=" alt="Vert.x Logo"/></a></div><div class="navbar-collapse-button"><span></span><span></span><span></span></div><div class="navbar-right"><div class="navbar-menu"><span class="navbar-menu-item with-drop-down"><div class="dropdown"><a class="dropdown-title">开始<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="dropdown-menu"><a href="/introduction-to-vertx-and-reactive/"><li class="dropdown-item">简介</li></a><a href="/get-started/"><li class="dropdown-item">开始</li></a><a href="https://start.vertx.io/" target="_blank" rel="noreferrer"><li class="dropdown-item">App generator <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a></ul></div></span><a class="navbar-menu-item" href="/docs/">文档</a><span class="navbar-menu-item with-drop-down"><div class="dropdown"><a class="dropdown-title">资源<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="dropdown-menu"><a href="/faq/"><li class="dropdown-item">答疑</li></a><a href="/channels/"><li class="dropdown-item">Channels</li></a><a href="https://how-to.vertx.io/" target="_blank" rel="noreferrer"><li class="dropdown-item">How-To’s <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a><a href="https://github.com/vert-x3/vertx-eventbus-bridge-clients" target="_blank" rel="noreferrer"><li class="dropdown-item">EventBus Bridge Clients <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a></ul></div></span><a class="navbar-menu-item" href="/blog/">博客</a><a class="navbar-menu-item" href="/community/">社区</a><a class="navbar-menu-item" href="/translation/">翻译团队</a></div><div class="navbar-social"><a href="https://github.com/vert-x3/vertx-awesome" class="navbar-social-link" title="Awesome Vert.x" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="List of awesome Vert.x projects"><title>Awesome Vert.x</title><path d="M24 11.438l-6.154-5.645-.865.944 5.128 4.7H1.895l5.128-4.705-.865-.943-6.154 5.649H0v3.72c0 1.683 1.62 3.053 3.61 3.053h3.795c1.99 0 3.61-1.37 3.61-3.051v-2.446h1.97v2.446c0 1.68 1.62 3.051 3.61 3.051h3.794c1.99 0 3.61-1.37 3.61-3.051v-3.721z"></path></svg></a><a href="https://stackoverflow.com/questions/tagged/vert.x" class="navbar-social-link" title="Stack Overflow" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Stack Overflow questions related to Vert.x"><title>Stack Overflow</title><path d="M18.986 21.865v-6.404h2.134V24H1.844v-8.539h2.13v6.404h15.012zM6.111 19.731H16.85v-2.137H6.111v2.137zm.259-4.852l10.48 2.189.451-2.07-10.478-2.187-.453 2.068zm1.359-5.056l9.705 4.53.903-1.95-9.706-4.53-.902 1.936v.014zm2.715-4.785l8.217 6.855 1.359-1.62-8.216-6.853-1.35 1.617-.01.001zM15.751 0l-1.746 1.294 6.405 8.604 1.746-1.294L15.749 0h.002z"></path></svg></a><a href="https://www.youtube.com/channel/UCGN6L3tRhs92Uer3c6VxOSA" class="navbar-social-link" title="YouTube" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="YouTube channel of Vert.x"><title>YouTube</title><path d="M23.499 6.203a3.008 3.008 0 00-2.089-2.089c-1.87-.501-9.4-.501-9.4-.501s-7.509-.01-9.399.501a3.008 3.008 0 00-2.088 2.09A31.258 31.26 0 000 12.01a31.258 31.26 0 00.523 5.785 3.008 3.008 0 002.088 2.089c1.869.502 9.4.502 9.4.502s7.508 0 9.399-.502a3.008 3.008 0 002.089-2.09 31.258 31.26 0 00.5-5.784 31.258 31.26 0 00-.5-5.808zm-13.891 9.4V8.407l6.266 3.604z"></path></svg></a><a href="https://discord.gg/KzEMwP2" class="navbar-social-link" title="Discord" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Eclipse Vert.x channel on Discord"><title>Discord</title><path d="M20.222 0c1.406 0 2.54 1.137 2.607 2.475V24l-2.677-2.273-1.47-1.338-1.604-1.398.67 2.205H3.71c-1.402 0-2.54-1.065-2.54-2.476V2.48C1.17 1.142 2.31.003 3.715.003h16.5L20.222 0zm-6.118 5.683h-.03l-.202.2c2.073.6 3.076 1.537 3.076 1.537-1.336-.668-2.54-1.002-3.744-1.137-.87-.135-1.74-.064-2.475 0h-.2c-.47 0-1.47.2-2.81.735-.467.203-.735.336-.735.336s1.002-1.002 3.21-1.537l-.135-.135s-1.672-.064-3.477 1.27c0 0-1.805 3.144-1.805 7.02 0 0 1 1.74 3.743 1.806 0 0 .4-.533.805-1.002-1.54-.468-2.14-1.404-2.14-1.404s.134.066.335.2h.06c.03 0 .044.015.06.03v.006c.016.016.03.03.06.03.33.136.66.27.93.4.466.202 1.065.403 1.8.536.93.135 1.996.2 3.21 0 .6-.135 1.2-.267 1.8-.535.39-.2.87-.4 1.397-.737 0 0-.6.936-2.205 1.404.33.466.795 1 .795 1 2.744-.06 3.81-1.8 3.87-1.726 0-3.87-1.815-7.02-1.815-7.02-1.635-1.214-3.165-1.26-3.435-1.26l.056-.02zm.168 4.413c.703 0 1.27.6 1.27 1.335 0 .74-.57 1.34-1.27 1.34-.7 0-1.27-.6-1.27-1.334.002-.74.573-1.338 1.27-1.338zm-4.543 0c.7 0 1.266.6 1.266 1.335 0 .74-.57 1.34-1.27 1.34-.7 0-1.27-.6-1.27-1.334 0-.74.57-1.338 1.27-1.338z"></path></svg></a><a href="https://groups.google.com/forum/?fromgroups#!forum/vertx" class="navbar-social-link" title="Vert.x User Group" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="A Google group for Vert.x users"><title>Vert.x User Group</title><path d="M.92 3.332c-.776 0-1.216.67-.692 1.383l2.537 4.403v7.86c0 2.013 1.467 3.69 3.459 3.69H20.31a3.75 3.75 0 003.69-3.69V7.043a3.723 3.723 0 00-3.668-3.71zm5.786 3.71H20.1c.587 0 1.153.357 1.153.923 0 .566-.566.922-1.153.922H6.706c-.587 0-1.153-.356-1.153-.922 0-.566.566-.923 1.153-.923zm0 3.69H20.1c.587 0 1.153.356 1.153.922 0 .566-.566.922-1.153.922H6.706c-.587 0-1.153-.356-1.153-.922 0-.566.566-.922 1.153-.922zm-.021 3.71h9.705c.587 0 1.153.356 1.153.922 0 .566-.566.923-1.153.923H6.685c-.587 0-1.153-.357-1.153-.923 0-.566.566-.922 1.153-.922Z"></path></svg></a><a href="https://shang.qq.com/wpa/qunwpa?idkey=587f58cacb9557e3291b46098e0fe09427b98a1c0f866da23c04c2762bc7e2ad" class="navbar-social-link" title="Vert.x中国用户组QQ群" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Vert.x中国用户组QQ群"><title>Vert.x中国用户组QQ群</title><path d="M21.395 15.035a39.548 39.548 0 0 0-.803-2.264l-1.079-2.695c.001-.032.014-.562.014-.836C19.526 4.632 17.351 0 12 0S4.474 4.632 4.474 9.241c0 .274.013.804.014.836l-1.08 2.695a38.97 38.97 0 0 0-.802 2.264c-1.021 3.283-.69 4.643-.438 4.673.54.065 2.103-2.472 2.103-2.472 0 1.469.756 3.387 2.394 4.771-.612.188-1.363.479-1.845.835-.434.32-.379.646-.301.778.343.578 5.883.369 7.482.189 1.6.18 7.14.389 7.483-.189.078-.132.132-.458-.301-.778-.483-.356-1.233-.646-1.846-.836 1.637-1.384 2.393-3.302 2.393-4.771 0 0 1.563 2.537 2.103 2.472.251-.03.581-1.39-.438-4.673zM12.662 4.846c.039-1.052.659-1.878 1.385-1.846s1.281.912 1.242 1.964c-.039 1.051-.659 1.878-1.385 1.846s-1.282-.912-1.242-1.964zM9.954 3c.725-.033 1.345.794 1.384 1.846.04 1.052-.517 1.931-1.242 1.963-.726.033-1.346-.794-1.385-1.845C8.672 3.912 9.228 3.033 9.954 3zM7.421 8.294c.194-.43 2.147-.908 4.566-.908h.026c2.418 0 4.372.479 4.566.908a.14.14 0 0 1 .014.061c0 .031-.01.059-.026.083-.163.238-2.333 1.416-4.553 1.416h-.026c-2.221 0-4.39-1.178-4.553-1.416a.136.136 0 0 1-.014-.144zm10.422 8.622c-.22 3.676-2.403 5.987-5.774 6.021h-.137c-3.37-.033-5.554-2.345-5.773-6.021-.081-1.35.001-2.496.147-3.43.318.063.638.122.958.176v3.506s1.658.334 3.318.103v-3.225c.488.027.96.04 1.406.034h.025c1.678.021 3.714-.204 5.683-.594.146.934.227 2.08.147 3.43zM10.48 5.804c.313-.041.542-.409.508-.825-.033-.415-.314-.72-.629-.679-.313.04-.541.409-.508.824.034.417.315.72.629.68zM14.479 5.156c.078.037.221.042.289-.146.035-.095.025-.165-.009-.214-.023-.033-.133-.118-.371-.176-.904-.22-1.341.384-1.405.499-.04.072-.012.176.056.227.067.051.139.037.179-.006.58-.628 1.21-.208 1.261-.184z"></path></svg></a></div></div></div></div></header><div class="page-content"><div class="container"><div class="blog-post"><div class="blog-navbar"><h2>Blog</h2><ul><li><a href="/blog/">All posts</a></li><li><a href="/blog/category/releases/">releases</a></li><li><a href="/blog/category/guides/">guides</a></li><li><a href="/blog/category/news/">news</a></li></ul><div class="feed-icons"><a href="/feed/atom.xml"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></div></div><div class="blog-post-main"><div class="blog-post-content"><h1>Eclipse Vert.x 4 beta 3 released!</h1><span><p>We are ex­tremely pleased to an­nounce the third 4.0 beta re­lease of Eclipse Vert.x.</p><p>Vert.x 4 is the evo­lu­tion of the Vert.x 3.x se­ries that will bring key fea­tures to Vert.x.</p><h2 id="http-client-request-creation"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#http-client-request-creation"></a>HTTP client request creation</h2><p>Until Beta3, HTTP client has cre­ated lazy HTTP re­quests, since then cre­at­ing a re­quest
has be­come an asyn­chro­nous op­er­a­tion guar­an­tee­ing that a slot for per­form­ing the re­quest
is granted:</p><pre><code class="hljs language-java"><span class="hljs-comment">// Created a request</span>
HttpClientRequest request = client.get(<span class="hljs-string">&quot;/some-uri&quot;</span>);

<span class="hljs-comment">// Connect to the server or reuse a connection from the pool and then try to send the request</span>
request.end();

<span class="hljs-comment">// Since Beta3</span>
client.get(<span class="hljs-string">&quot;/some-uri&quot;</span>, ar -&gt; {
  <span class="hljs-comment">// The client connected to the server or reused a connection from the pool</span>
  <span class="hljs-keyword">if</span> (ar.succeeded()) {
    HttpClientRequest request = ar.result();

    <span class="hljs-comment">// Send the request</span>
    request.end();
  }
});
</code></pre><p>An­other (hid­den) mo­ti­va­tion to switch to this model is avoid­ing data races when the
HTTP client is used out­side the event-​loop using fu­tures.</p><p>Pre­vi­ously, you could write code like:</p><pre><code class="hljs language-java">Future&lt;HttpClientResponse&gt; get = client.get(<span class="hljs-string">&quot;some-uri&quot;</span>);

<span class="hljs-comment">// Assuming we have a client that returns a future response</span>
<span class="hljs-comment">// assuging this is *not* on the event-loop</span>
Future&lt;Buffer&gt; fut = get.send().compose(response -&gt; {

  <span class="hljs-comment">// Response events might have happen already</span>
  <span class="hljs-keyword">return</span> response.body();
});
</code></pre><p>Now, you can write in­stead:</p><pre><code class="hljs language-java">Future&lt;Buffer&gt; fut = client.get(<span class="hljs-string">&quot;some-uri&quot;</span>).compose(request -&gt; {
  request.send().compose(response -&gt; response.body())
});
</code></pre><h2 id="httpserverresponse-send-method"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#httpserverresponse-send-method"></a>HttpServerResponse send method</h2><p>In the pre­vi­ous beta, HTTP client re­quest got a new sim­pli­fied <code>send</code> method to send
a body or a stream. We did the same for the HTTP server re­sponse API:</p><pre><code class="hljs language-java">server.requestHandler(req -&gt; {
  req.pause();
  getSomeStream().onSuccess(stream -&gt; {
    req.response().send(stream);
  });
});
</code></pre><h2 id="http-tunnel-improvements"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#http-tunnel-improvements"></a>HTTP tunnel improvements</h2><p>Cre­at­ing an HTTP tun­nel has now be­come more nat­ural:</p><pre><code class="hljs language-java">client.request(HttpMethod.CONNECT, <span class="hljs-string">&quot;some-uri&quot;</span>)
  .onSuccess(request -&gt; {

    <span class="hljs-comment">// Connect to the server</span>
    request.connect(ar -&gt; {
      <span class="hljs-keyword">if</span> (ar.succeeded()) {
        HttpClientResponse response = ar.result();

        <span class="hljs-keyword">if</span> (response.statusCode() != <span class="hljs-number">200</span>) {
          <span class="hljs-comment">// Connect failed for some reason</span>
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-comment">// Tunnel created, raw buffers are transmitted on the wire</span>
          NetSocket socket = response.netSocket();
        }
      }
    });
});
</code></pre><p>The new <code>connect</code> method tells the client that when a <code>201</code> re­sponse is re­ceived
from the server then the con­nec­tion should be switched to not in­ter­pret HTTP
data any­more.</p><p>On the server, the API has be­come asyn­chro­nous and re­named to <code>toNetSocket()</code>:</p><pre><code class="hljs language-java">server.requestHandler(request -&gt; {
  <span class="hljs-keyword">if</span> (request.method() == HttpMethod.CONNECT) {
    <span class="hljs-comment">// Will send an HTTP 201 status code and switch the connection to use raw buffers</span>
    request.toNetSocket(ar -&gt; {
      <span class="hljs-keyword">if</span> (ar.succeeded()) {
        NetSocket socket = ar.result();
      }
    });
  }
});
</code></pre><h2 id="websocket-upgrade-improvements"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#websocket-upgrade-improvements"></a>WebSocket upgrade improvements</h2><p>The server Web­Socket man­ual up­grade op­er­a­tion has also be­come asyn­chro­nous and re­named
to <code>toWebSocket()</code></p><pre><code class="hljs language-java">server.requestHandler(request -&gt; {
  <span class="hljs-keyword">if</span> (request.method() == HttpMethod.GET &amp;&amp; <span class="hljs-string">&quot;Upgrade&quot;</span>.equals(request.getHeader(<span class="hljs-string">&quot;connection&quot;</span>))) {
    <span class="hljs-comment">// Will do the WebSocket handshake</span>
    request.toWebSocket(ar -&gt; {
      <span class="hljs-keyword">if</span> (ar.succeeded()) {
        ServerWebSocket socket = ar.result();
      }
    });
  }
});
</code></pre><h2 id="row-to-json-conversion"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#row-to-json-conversion"></a>Row to JSON conversion</h2><p>SQL client can now eas­ily trans­form a <code>Row</code> into a JSON ob­ject, this can be con­vie­nient
for ap­pli­ca­tions di­rectly trans­fer­ring JSON re­sults to the client:</p><pre><code class="hljs language-java">client
  .preparedQuery(<span class="hljs-string">&quot;SELECT * FROM USERS WHERE ID=$1&quot;</span>)
  .execute(Tuple.of(id))
  .onSuccess(row -&gt; {
    <span class="hljs-keyword">if</span> (row.size() == <span class="hljs-number">1</span>) {
      JsonObject json = row.iterator().next().toJson();
    }
  });
</code></pre><h2 id="oauth2oidc-pkce"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#oauth2oidc-pkce"></a>OAuth2/OIDC PKCE</h2><p><code>OAuth2Handler</code> can now han­dle <a href="https://tools.ietf.org/html/rfc7636">PKCE</a>, which means an­other layer of se­cu­rity to your ap­pli­ca­tion.</p><h2 id="redis-resp3"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#redis-resp3"></a>Redis RESP3</h2><p>The redis client can now speak <code>RESP3</code> with redis servers. This means it can han­dle all the new types and APIs avail­able on redis from all ver­sions (RESP2, redis &lt; 6) and (RESP3, redis &gt;= 6).</p><h2 id="finally"><a aria-hidden="true" tabindex="-1" class="heading-anchor" href="#finally"></a>Finally</h2><p>This is the Beta3 re­lase of Vert.x 4, you can of course ex­pect an­other beta as we get feed­back from the com­mu­nity and fix is­sues that we failed to catch be­fore.</p><p>You can also read the mile­stone an­nounces to know more about the over­ral changes:</p><ul><li><a href="/blog/eclipse-vert-x-4-beta-1-released/">https://vertx.io/blog/eclipse-​vert-x-4-​beta-1-​released</a></li><li><a href="/blog/eclipse-vert-x-4-milestone-5-released/">https://vertx.io/blog/eclipse-​vert-x-4-​milestone-5-​released</a></li><li><a href="/blog/eclipse-vert-x-4-milestone-5-released/">https://vertx.io/blog/eclipse-​vert-x-4-​milestone-5-​released</a></li><li><a href="/blog/eclipse-vert-x-4-milestone-4-released/">https://vertx.io/blog/eclipse-​vert-x-4-​milestone-4-​released</a></li><li><a href="/blog/eclipse-vert-x-4-milestone-3-released/">https://vertx.io/blog/eclipse-​vert-x-4-​milestone-3-​released</a></li><li><a href="/blog/eclipse-vert-x-4-milestone-2-released/">https://vertx.io/blog/eclipse-​vert-x-4-​milestone-2-​released</a></li><li><a href="/blog/eclipse-vert-x-4-milestone-1-released/">https://vertx.io/blog/eclipse-​vert-x-4-​milestone-1-​released</a></li></ul><p>The <a href="https://github.com/vert-x3/wiki/wiki/4.0.0-Deprecations-and-breaking-changes">dep­re­ca­tions and break­ing changes</a>
can be found on the wiki.</p><p>For this re­lease, there are no Docker im­ages.</p><p>The re­lease ar­ti­facts have been de­ployed to <a href="https://search.maven.org/search?q=g:io.vertx%20AND%20v:4.0.0.Beta1">Maven Cen­tral</a> and you can get the dis­tri­b­u­tion on <a href="https://repo1.maven.org/maven2/io/vertx/vertx-stack-manager/4.0.0.Beta1/">Maven Cen­tral</a>.</p><p>You can boot­strap a Vert.x 4.0.0.Beta3 project using <a href="https://start.vertx.io">https://start.vertx.io</a>.</p><p>The doc­u­men­ta­tion has been de­ployed on this pre­view web-​site <a href="https://vertx-web-site.github.io/docs/">https://vertx-​web-site.github.io/docs/</a></p><p>That’s it! Happy cod­ing and see you soon on our user or dev <a href="/community/">chan­nels</a>.</p></span></div><div class="blog-post-sidebar"><div class="blog-post-author"><img class="blog-post-author-avatar" src="https://github.com/vietj.png?size=160"/><div class="blog-post-author-name">by <a href="https://github.com/vietj" target="_blank" rel="noopener noreferrer">Julien Viet</a></div></div><div class="blog-post-sidebar-date">Posted on <!-- -->25 September 2020</div>in <a class="blog-post-sidebar-category" href="/blog/category/releases/">releases</a><div class="blog-post-sidebar-reading-time"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg> <!-- -->4 min read</div><div class="blog-post-sidebar-share-icons"><a href="https://twitter.com/intent/tweet?text=Eclipse%20Vert.x%204%20beta%203%20released!&amp;url=https%3A%2F%2Fvertx-china.github.io%2Fblog%2Feclipse-vert-x-4-beta-3-released&amp;via=vertx_project" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><title>Twitter</title><path d="M23.954 4.569c-.885.389-1.83.654-2.825.775 1.014-.611 1.794-1.574 2.163-2.723-.951.555-2.005.959-3.127 1.184-.896-.959-2.173-1.559-3.591-1.559-2.717 0-4.92 2.203-4.92 4.917 0 .39.045.765.127 1.124C7.691 8.094 4.066 6.13 1.64 3.161c-.427.722-.666 1.561-.666 2.475 0 1.71.87 3.213 2.188 4.096-.807-.026-1.566-.248-2.228-.616v.061c0 2.385 1.693 4.374 3.946 4.827-.413.111-.849.171-1.296.171-.314 0-.615-.03-.916-.086.631 1.953 2.445 3.377 4.604 3.417-1.68 1.319-3.809 2.105-6.102 2.105-.39 0-.779-.023-1.17-.067 2.189 1.394 4.768 2.209 7.557 2.209 9.054 0 13.999-7.496 13.999-13.986 0-.209 0-.42-.015-.63.961-.689 1.8-1.56 2.46-2.548l-.047-.02z"></path></svg></a><a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fvertx-china.github.io%2Fblog%2Feclipse-vert-x-4-beta-3-released" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><title>LinkedIn</title><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"></path></svg></a><a href="https://www.facebook.com/sharer.php?u=https%3A%2F%2Fvertx-china.github.io%2Fblog%2Feclipse-vert-x-4-beta-3-released" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><title>Facebook</title><path d="M23.9981 11.9991C23.9981 5.37216 18.626 0 11.9991 0C5.37216 0 0 5.37216 0 11.9991C0 17.9882 4.38789 22.9522 10.1242 23.8524V15.4676H7.07758V11.9991H10.1242V9.35553C10.1242 6.34826 11.9156 4.68714 14.6564 4.68714C15.9692 4.68714 17.3424 4.92149 17.3424 4.92149V7.87439H15.8294C14.3388 7.87439 13.8739 8.79933 13.8739 9.74824V11.9991H17.2018L16.6698 15.4676H13.8739V23.8524C19.6103 22.9522 23.9981 17.9882 23.9981 11.9991Z"></path></svg></a></div></div></div><div class="blog-post-next-prev"><div class="blog-post-next-prev-entry"><h5>Next post</h5><div class="blog-entry"><div class="blog-entry-meta"><div class="blog-entry-meta-left"><span class="blog-entry-date">1 October 2020</span>​<a class="blog-entry-category" href="/blog/category/guides/">guides</a></div><div class="blog-entry-meta-right"></div></div><h3><a href="/blog/jwt-authorization-for-vert-x-with-keycloak/">JWT Authorization for Vert.x with Keycloak</a></h3><span class="blog-entry-authors"><ul><li class=""><img src="https://github.com/thomasdarimont.png?size=50"/><a href="https://github.com/thomasdarimont" target="_blank" rel="noopener noreferrer">Thomas Darimont</a></li></ul></span><p class="blog-entry-summary">In this blog post, you&#x27;ll learn about JWT foundations, protect routes with JWT Authorization, JWT encoded tokens, and RBAC with Keycloak</p><span class="read-more-link"><a href="/blog/jwt-authorization-for-vert-x-with-keycloak/"> 阅读更多</a></span></div></div><div class="blog-post-next-prev-entry"><h5>Previous post</h5><div class="blog-entry"><div class="blog-entry-meta"><div class="blog-entry-meta-left"><span class="blog-entry-date">17 September 2020</span>​<a class="blog-entry-category" href="/blog/category/releases/">releases</a></div><div class="blog-entry-meta-right"></div></div><h3><a href="/blog/eclipse-vert-x-3-9-3-released/">Eclipse Vert.x 3.9.3 released!</a></h3><span class="blog-entry-authors"><ul><li class=""><img src="https://github.com/vietj.png?size=50"/><a href="https://github.com/vietj" target="_blank" rel="noopener noreferrer">Julien Viet</a></li></ul></span><p class="blog-entry-summary">Eclipse Vert.x version 3.9.3 has just been released. It fixes quite a few bugs that have been reported by the community.</p><span class="read-more-link"><a href="/blog/eclipse-vert-x-3-9-3-released/"> 阅读更多</a></span></div></div></div><div class="blog-post-related"><h5>Related posts</h5><div class="blog-post-related-posts"><div class="blog-entry"><div class="blog-entry-meta"><div class="blog-entry-meta-left"><span class="blog-entry-date">15 January 2016</span>​<a class="blog-entry-category" href="/blog/category/guides/">guides</a></div><div class="blog-entry-meta-right"></div></div><h3><a href="/blog/real-time-bidding-with-websockets-and-vert-x/">Real-time bidding with Websockets and Vert.x</a></h3><span class="blog-entry-authors"><ul><li class=""><img src="https://github.com/mwarc.png?size=50"/><a href="https://github.com/mwarc" target="_blank" rel="noopener noreferrer">Marcin Warczyglowa</a></li></ul></span><p class="blog-entry-summary">The expectations of users for interactivity with web applications have changed over the past few years.
    Users during bidding in auction no longer want to press the refresh button.</p><span class="read-more-link"><a href="/blog/real-time-bidding-with-websockets-and-vert-x/"> 阅读更多</a></span></div><div class="blog-entry"><div class="blog-entry-meta"><div class="blog-entry-meta-left"><span class="blog-entry-date">27 July 2015</span>​<a class="blog-entry-category" href="/blog/category/guides/">guides</a></div><div class="blog-entry-meta-right"></div></div><h3><a href="/blog/some-rest-with-vert-x/">Some Rest with Vert.x</a></h3><span class="blog-entry-authors"><ul><li class=""><img src="https://github.com/cescoffier.png?size=50"/><a href="https://github.com/cescoffier" target="_blank" rel="noopener noreferrer">Clement Escoffier</a></li></ul></span><p class="blog-entry-summary">This post is part of the Introduction to Vert.x series. Let’s go a bit further this time and develop a CRUD-ish application</p><span class="read-more-link"><a href="/blog/some-rest-with-vert-x/"> 阅读更多</a></span></div><div class="blog-entry"><div class="blog-entry-meta"><div class="blog-entry-meta-left"><span class="blog-entry-date">25 January 2017</span>​<a class="blog-entry-category" href="/blog/category/guides/">guides</a></div><div class="blog-entry-meta-right"></div></div><h3><a href="/blog/building-services-and-apis-with-amqp-1-0/">Building services and APIs with AMQP 1.0</a></h3><span class="blog-entry-authors"><ul><li class=""><img src="https://github.com/scholzj.png?size=50"/><a href="https://github.com/scholzj" target="_blank" rel="noopener noreferrer">Jakub Scholz</a></li></ul></span><p class="blog-entry-summary">Microservices and APIs are everywhere. Everyone talks about them, presentation slides are full of them ... some people are actually even building them.</p><span class="read-more-link"><a href="/blog/building-services-and-apis-with-amqp-1-0/"> 阅读更多</a></span></div></div></div></div></div></div><footer><div class="container"><div class="footer-nav-section"><div class="footer-nav-list footer-logo"><a href="/"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAxMTI1LjYgMzE1LjIiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxzdHlsZT4uc3Qwe2ZpbGw6Izc4MmE5MX08L3N0eWxlPjxwYXRoIGQ9Ik0xMjAuOSAyMTQuMkwxOTAuNSAwaDUyLjNsLTk4LjUgMjczLjhIOTguMkwwIDBoNTIuMWw2OC44IDIxNC4yem0yOTEuMi02Mi42SDI5OS42djg0LjJINDMxdjM4SDI1MlYwaDE3Ny43djM4LjRIMjk5LjZWMTE0aDExMi41djM3LjZ6bTgzLjctMTEzLjJINTQ2YzE2LjUuMyAyOSA0LjQgMzcuMyAxMi40IDguMyA4IDEyLjUgMTkuNCAxMi41IDM0IDAgMTQtNC41IDI1LjEtMTMuNSAzMy4yLTkgOC4xLTIxLjYgMTIuMS0zNy42IDEyLjFoLTI3LjF2MjQuMmw4Ni4xIDExOS41aDUxdi0yLjRsLTc3LjItMTA2LjdjMjQuOS01LjUgNDMuMy0yMS43IDUyLjYtMzUuOSA4LjItMTIuNiAxMy4zLTI3LjcgMTMuMy00NiAwLTI2LjgtOC42LTQ3LjQtMjUuOC02MS41QzYwMC41IDcuMSA1NzYuMSAwIDU0NC41IDBoLTk2LjN2MjczLjhoNDcuNiIvPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDUyLjMgMTU3LjdsLTQxLjUgNjIuNyAyOS43IDUzLjRoODUuMXoiLz48Y2lyY2xlIGNsYXNzPSJzdDAiIGN4PSI4MjcuOSIgY3k9IjI3NC43IiByPSI0MC41Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTEwMzcgMGwtNDcuNiA3NC4yTDk0OSAwaC04NGw4NS4zIDEzNS44LTY3LjEgMTA1LjdjNS43IDkuNSA5LjEgMjAuNSA5LjIgMzIuNGg1MC4xTDExMjEuMyAwSDEwMzd6Ii8+PHBhdGggZD0iTTc2My41IDI3My44Yy4xLTkuOSAyLjUtMTkuMiA2LjYtMjcuNVYzOC40aDg1LjRWMEg2MzguMnYzOC40aDg0LjZ2MjM1LjRoNDAuN3oiLz48L3N2Zz4=" alt="Vert.x Logo"/></a></div><div class="footer-nav-list"><h5>Eclipse Vert.x</h5><ul class=""><li><a class="navbar-menu-item" href="/docs/">文档</a></li><li><a href="/download/">下载</a></li><li><a href="/blog/">博客</a></li><li><a href="/community/">社区</a></li><li><a href="/translation/">翻译团队</a></li><li><a href="https://github.com/eclipse-vertx/vert.x">GitHub</a></li><li><a href="https://github.com/vertx-china/vertx-web-site">翻译GitHub</a></li></ul></div><div class="footer-nav-list"><h5>资源</h5><ul class=""><li><a href="/faq/">答疑</a></li><li><a href="/channels/">Channels</a></li><li><a href="https://how-to.vertx.io/">How-To’s</a></li><li><a href="https://start.vertx.io/">App Generator</a></li></ul></div><div class="footer-nav-list"><h5>Eclipse</h5><ul class=""><li><a href="https://www.eclipse.org/">Eclipse Foundation</a></li><li><a href="https://www.eclipse.org/legal/privacy.php">Privacy Policy</a></li><li><a href="https://www.eclipse.org/legal/termsofuse.php">Terms of Use</a></li><li><a href="https://www.eclipse.org/legal/copyright.php">Copyright Agent</a></li><li><a href="https://www.eclipse.org/legal/">Legal Resources</a></li></ul></div></div><div class="footer-copyright"><div class="footer-copyright-remarks">© <!-- -->2021<!-- --> Eclipse Vert.x<br/>Eclipse Vert.x is open source and dual-licensed under the <a href="https://creativecommons.org/licenses/by-sa/3.0/" target="_blank" rel="noopener noreferrer">Eclipse Public License 2.0</a> and the <a href="https://www.apache.org/licenses/LICENSE-2.0.html" target="_blank" rel="noopener noreferrer">Apache License 2.0</a>. <br class="footer-copyright-break"/>Website design by <a href="https://michelkraemer.com" target="_blank" rel="noopener noreferrer">Michel Krämer</a>.</div><div class="footer-copyright-eclipse-logo"><a href="https://www.eclipse.org/" target="_blank" rel="noopener noreferrer"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAyODEuMyA5MS4xIiB4bWw6c3BhY2U9InByZXNlcnZlIj48c3R5bGU+LnN0MHtmaWxsOiNmNzk0MjJ9LnN0MXtmaWxsOiMzZDNjM2J9PC9zdHlsZT48ZyBpZD0iTGF5ZXJfMV8xXyI+PHBhdGggY2xhc3M9InN0MCIgZD0iTTI2NS43IDg0TDI1NyA3M2gtMi43djE3LjdoMy4zdi0xMmw5LjMgMTJoMi4xVjczaC0zLjN2MTF6bS0zMi40LTguM2M0LjIgMCA1LjggMy4zIDUuOCA2LjNzLTEuNiA2LTUuOCA2LTUuNy0zLjEtNS44LTYgMS43LTYuMyA1LjgtNi4zem0wLTNjLTYuMSAwLTkuMSA0LjctOS4xIDkuMyAwIDQuNyAyLjkgOS4xIDkuMSA5LjFzOS00LjYgOS4xLTkuMi0zLTkuMi05LjEtOS4yem0tMjEuMiAxOFY3M2gtMy4zdjE3LjdoMy4zem0tMjMuNiAwaDMuM1Y3Nmg1LjZ2LTNoLTE0LjZ2M2g1LjZsLjEgMTQuN3ptLTE4LjktNi41SDE2M2wzLjMtNy42IDMuMyA3LjZ6bTIuOCA2LjVoMy42TDE2OC4yIDczaC0zLjZsLTggMTcuN2gzLjZsMS41LTMuM2g5LjNsMS40IDMuM3ptLTM4LTE0LjZoMy42YzMuOSAwIDUuNSAyLjggNS41IDUuNS4xIDIuOC0xLjUgNS44LTUuNSA1LjhoLTMuNlY3Ni4xem0zLjctMy4xaC02Ljl2MTcuN2g2LjljNi4yIDAgOC45LTQuNSA4LjktOXMtMi44LTguNy04LjktOC43em0tMjIuNCAxMUwxMDcgNzNoLTIuN3YxNy43aDMuM3YtMTJsOS4zIDEyaDIuMVY3M2gtMy4zdjExek04OC4yIDczdjEwLjJjMCAzLTEuNiA0LjktNC4zIDQuOXMtNC42LTEuNy00LjYtNC45VjczSDc2djEwLjFjMCA1LjMgMy42IDcuOSA3LjkgNy45IDQuNCAwIDcuNy0yLjcgNy43LTcuOVY3M2gtMy40em0tMzMgMi43YzQuMiAwIDUuOCAzLjMgNS44IDYuM3MtMS42IDYtNS44IDYtNS43LTMuMS01LjgtNiAxLjctNi4zIDUuOC02LjN6bTAtM2MtNi4xIDAtOS4xIDQuNy05LjEgOS4zczIuOSA5LjEgOS4xIDkuMSA5LTQuNiA5LjEtOS4yLTMtOS4yLTkuMS05LjJ6bS0yOS43IDE4di02LjVoOC45di0zLjFoLTguOXYtNC44aDkuNFY3M0gyMi4ydjE3LjZoMy4zeiIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yNjkuNCA1NC40aC0yMi4ydi04LjloMjEuNHYtNi45aC0yMS40di05LjFoMjIuMnYtNy4yaC0yOS42djM5LjVoMjkuNnYtNy40em0tNDAtMjUuNmMtMy02LjEtOS40LTcuOC0xNS41LTcuOC03LjMgMC0xNS4zIDMuNC0xNS4zIDExLjUgMCA4LjkgNy40IDExIDE1LjUgMTIgNS4yLjYgOS4xIDIuMSA5LjEgNS44IDAgNC4zLTQuNCA1LjktOS4xIDUuOXMtOS40LTEuOS0xMS4xLTYuM2wtNi4yIDMuMmMyLjkgNy4yIDkuMSA5LjcgMTcuMiA5LjcgOC44IDAgMTYuNi0zLjggMTYuNi0xMi42IDAtOS40LTcuNy0xMS42LTE1LjktMTIuNi00LjctLjYtOC44LTEuNS04LjgtNSAwLTIuOSAyLjYtNS4yIDguMi01LjIgNC4zIDAgOCAyLjIgOS40IDQuNGw1LjktM3pNMTc2IDIyLjJjLTYuMi0uMS0xMi40IDAtMTguNiAwdjM5LjVoNy40VjUwLjFIMTc2YzE5LjQgMCAxOS40LTI3LjkgMC0yNy45em0tMTEuMSA3LjFIMTc2YzkuNSAwIDkuNSAxNCAwIDE0aC0xMS4ybC4xLTE0em0tMTggMzIuNVYyMi4yaC03LjR2MzkuNWw3LjQuMXptLTQ0LTM5LjZ2MzkuNWgyNy43di02LjloLTIwLjNWMjIuMmgtNy40ek05MC43IDUxLjdjLTIuNyAyLjUtNi4yIDQtOS45IDQtOS44IDAtMTMuNS02LjgtMTMuNi0xMy40czQuMS0xMy43IDEzLjYtMTMuN2MzLjUtLjEgNyAxLjMgOS41IDMuN2w1LTQuOGMtMy44LTMuOS05LjEtNi0xNC41LTYtMTQuMyAwLTIxIDEwLjUtMjAuOSAyMC44czYuMyAyMC4zIDIwLjkgMjAuM2M1LjYuMSAxMS0yIDE1LTUuOWwtNS4xLTV6bS0zOSAyLjdIMjkuNXYtOC45aDIxLjR2LTYuOUgyOS41di05LjFoMjIuMnYtNy4ySDIyLjJ2MzkuNWgyOS42bC0uMS03LjR6Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTkuOCAxOC4yQzE4LjggNC4xIDM2LjktLjggNTIuMSA2bC0xLS43QzM1LjctNC42IDE1LjItLjEgNS4zIDE1LjNzLTUuNCAzNS45IDEwIDQ1LjhsMS4xLjZDMy44IDUwLjguOCAzMi4zIDkuOCAxOC4yeiIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yNzIuMiAyNi4xYzAtMi41IDIuMS00LjYgNC42LTQuNiAyLjUgMCA0LjYgMi4xIDQuNiA0LjYgMCAyLjUtMi4xIDQuNi00LjYgNC42LTIuNiAwLTQuNi0yLjEtNC42LTQuNnptOC42IDBjMC0yLjItMS44LTQuMS00LTQuMXMtNC4xIDEuOC00LjEgNC4xYzAgMi4yIDEuNyA0IDMuOSA0LjFoLjFjMi4zIDAgNC4xLTEuOCA0LjEtNC4xem0tNi0yLjVoMi4zYzEuMSAwIDEuOS41IDEuOSAxLjYgMCAuNy0uNCAxLjMtMS4xIDEuNWwxLjIgMS43aC0xLjRsLTEtMS41aC0uN3YxLjVoLTEuMWwtLjEtNC44em0yLjIgMi4zYy41IDAgLjgtLjMuOC0uN3MtLjMtLjctLjgtLjdoLTF2MS4zbDEgLjF6Ii8+PC9nPjwvc3ZnPg==" alt="Eclipse foundation Logo"/></a></div></div></div></footer></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"categories":["releases","guides","news"],"post":{"meta":{"title":"Eclipse Vert.x 4 beta 3 released!","category":"releases","authors":[{"name":"Julien Viet","github_id":"vietj"}],"summary":"The third beta version of Eclipse Vert.x 4.0 highlights many features including (but not limited to) HTTP client request creation, HTTP tunnel improvements, and WebSocket upgrade improvements."},"date":"2020-09-25","slug":"eclipse-vert-x-4-beta-3-released","readingTime":{"text":"4 min read","minutes":3.51,"time":210600,"words":702},"content":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"We are ex\\xADtremely pleased to an\\xADnounce the third 4.0 beta re\\xADlease of Eclipse Vert.x.\"), mdx(\"p\", null, \"Vert.x 4 is the evo\\xADlu\\xADtion of the Vert.x 3.x se\\xADries that will bring key fea\\xADtures to Vert.x.\"), mdx(\"h2\", {\n    \"id\": \"http-client-request-creation\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#http-client-request-creation\"\n  })), \"HTTP client request creation\"), mdx(\"p\", null, \"Until Beta3, HTTP client has cre\\xADated lazy HTTP re\\xADquests, since then cre\\xADat\\xADing a re\\xADquest\\nhas be\\xADcome an asyn\\xADchro\\xADnous op\\xADer\\xADa\\xADtion guar\\xADan\\xADtee\\xADing that a slot for per\\xADform\\xADing the re\\xADquest\\nis granted:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Created a request\"), \"\\nHttpClientRequest request = client.get(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/some-uri\\\"\"), \");\\n\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Connect to the server or reuse a connection from the pool and then try to send the request\"), \"\\nrequest.end();\\n\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Since Beta3\"), \"\\nclient.get(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"/some-uri\\\"\"), \", ar -\u003e {\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// The client connected to the server or reused a connection from the pool\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (ar.succeeded()) {\\n    HttpClientRequest request = ar.result();\\n\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Send the request\"), \"\\n    request.end();\\n  }\\n});\\n\")), mdx(\"p\", null, \"An\\xADother (hid\\xADden) mo\\xADti\\xADva\\xADtion to switch to this model is avoid\\xADing data races when the\\nHTTP client is used out\\xADside the event-\\u200Bloop using fu\\xADtures.\"), mdx(\"p\", null, \"Pre\\xADvi\\xADously, you could write code like:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \"Future\u003cHttpClientResponse\u003e get = client.get(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"some-uri\\\"\"), \");\\n\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Assuming we have a client that returns a future response\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// assuging this is *not* on the event-loop\"), \"\\nFuture\u003cBuffer\u003e fut = get.send().compose(response -\u003e {\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Response events might have happen already\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"return\"), \" response.body();\\n});\\n\")), mdx(\"p\", null, \"Now, you can write in\\xADstead:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \"Future\u003cBuffer\u003e fut = client.get(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"some-uri\\\"\"), \").compose(request -\u003e {\\n  request.send().compose(response -\u003e response.body())\\n});\\n\")), mdx(\"h2\", {\n    \"id\": \"httpserverresponse-send-method\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#httpserverresponse-send-method\"\n  })), \"HttpServerResponse send method\"), mdx(\"p\", null, \"In the pre\\xADvi\\xADous beta, HTTP client re\\xADquest got a new sim\\xADpli\\xADfied \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"send\"), \" method to send\\na body or a stream. We did the same for the HTTP server re\\xADsponse API:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \"server.requestHandler(req -\u003e {\\n  req.pause();\\n  getSomeStream().onSuccess(stream -\u003e {\\n    req.response().send(stream);\\n  });\\n});\\n\")), mdx(\"h2\", {\n    \"id\": \"http-tunnel-improvements\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#http-tunnel-improvements\"\n  })), \"HTTP tunnel improvements\"), mdx(\"p\", null, \"Cre\\xADat\\xADing an HTTP tun\\xADnel has now be\\xADcome more nat\\xADural:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \"client.request(HttpMethod.CONNECT, \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"some-uri\\\"\"), \")\\n  .onSuccess(request -\u003e {\\n\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Connect to the server\"), \"\\n    request.connect(ar -\u003e {\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (ar.succeeded()) {\\n        HttpClientResponse response = ar.result();\\n\\n        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (response.statusCode() != \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"200\"), \") {\\n          \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Connect failed for some reason\"), \"\\n        } \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"else\"), \" {\\n          \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Tunnel created, raw buffers are transmitted on the wire\"), \"\\n          NetSocket socket = response.netSocket();\\n        }\\n      }\\n    });\\n});\\n\")), mdx(\"p\", null, \"The new \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"connect\"), \" method tells the client that when a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"201\"), \" re\\xADsponse is re\\xADceived\\nfrom the server then the con\\xADnec\\xADtion should be switched to not in\\xADter\\xADpret HTTP\\ndata any\\xADmore.\"), mdx(\"p\", null, \"On the server, the API has be\\xADcome asyn\\xADchro\\xADnous and re\\xADnamed to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"toNetSocket()\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \"server.requestHandler(request -\u003e {\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (request.method() == HttpMethod.CONNECT) {\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Will send an HTTP 201 status code and switch the connection to use raw buffers\"), \"\\n    request.toNetSocket(ar -\u003e {\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (ar.succeeded()) {\\n        NetSocket socket = ar.result();\\n      }\\n    });\\n  }\\n});\\n\")), mdx(\"h2\", {\n    \"id\": \"websocket-upgrade-improvements\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#websocket-upgrade-improvements\"\n  })), \"WebSocket upgrade improvements\"), mdx(\"p\", null, \"The server Web\\xADSocket man\\xADual up\\xADgrade op\\xADer\\xADa\\xADtion has also be\\xADcome asyn\\xADchro\\xADnous and re\\xADnamed\\nto \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"toWebSocket()\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \"server.requestHandler(request -\u003e {\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (request.method() == HttpMethod.GET \u0026\u0026 \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Upgrade\\\"\"), \".equals(request.getHeader(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"connection\\\"\"), \"))) {\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// Will do the WebSocket handshake\"), \"\\n    request.toWebSocket(ar -\u003e {\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (ar.succeeded()) {\\n        ServerWebSocket socket = ar.result();\\n      }\\n    });\\n  }\\n});\\n\")), mdx(\"h2\", {\n    \"id\": \"row-to-json-conversion\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#row-to-json-conversion\"\n  })), \"Row to JSON conversion\"), mdx(\"p\", null, \"SQL client can now eas\\xADily trans\\xADform a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Row\"), \" into a JSON ob\\xADject, this can be con\\xADvie\\xADnient\\nfor ap\\xADpli\\xADca\\xADtions di\\xADrectly trans\\xADfer\\xADring JSON re\\xADsults to the client:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), \"client\\n  .preparedQuery(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"SELECT * FROM USERS WHERE ID=$1\\\"\"), \")\\n  .execute(Tuple.of(id))\\n  .onSuccess(row -\u003e {\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (row.size() == \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"1\"), \") {\\n      JsonObject json = row.iterator().next().toJson();\\n    }\\n  });\\n\")), mdx(\"h2\", {\n    \"id\": \"oauth2oidc-pkce\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#oauth2oidc-pkce\"\n  })), \"OAuth2/OIDC PKCE\"), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"OAuth2Handler\"), \" can now han\\xADdle \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://tools.ietf.org/html/rfc7636\"\n  }), \"PKCE\"), \", which means an\\xADother layer of se\\xADcu\\xADrity to your ap\\xADpli\\xADca\\xADtion.\"), mdx(\"h2\", {\n    \"id\": \"redis-resp3\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#redis-resp3\"\n  })), \"Redis RESP3\"), mdx(\"p\", null, \"The redis client can now speak \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"RESP3\"), \" with redis servers. This means it can han\\xADdle all the new types and APIs avail\\xADable on redis from all ver\\xADsions (RESP2, redis \u003c 6) and (RESP3, redis \u003e= 6).\"), mdx(\"h2\", {\n    \"id\": \"finally\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#finally\"\n  })), \"Finally\"), mdx(\"p\", null, \"This is the Beta3 re\\xADlase of Vert.x 4, you can of course ex\\xADpect an\\xADother beta as we get feed\\xADback from the com\\xADmu\\xADnity and fix is\\xADsues that we failed to catch be\\xADfore.\"), mdx(\"p\", null, \"You can also read the mile\\xADstone an\\xADnounces to know more about the over\\xADral changes:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(Link, {\n    href: \"/blog/eclipse-vert-x-4-beta-1-released\",\n    passHref: true,\n    mdxType: \"Link\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"\"\n  }), \"https://vertx.io/blog/eclipse-\\u200Bvert-x-4-\\u200Bbeta-1-\\u200Breleased\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(Link, {\n    href: \"/blog/eclipse-vert-x-4-milestone-5-released\",\n    passHref: true,\n    mdxType: \"Link\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"\"\n  }), \"https://vertx.io/blog/eclipse-\\u200Bvert-x-4-\\u200Bmilestone-5-\\u200Breleased\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(Link, {\n    href: \"/blog/eclipse-vert-x-4-milestone-5-released\",\n    passHref: true,\n    mdxType: \"Link\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"\"\n  }), \"https://vertx.io/blog/eclipse-\\u200Bvert-x-4-\\u200Bmilestone-5-\\u200Breleased\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(Link, {\n    href: \"/blog/eclipse-vert-x-4-milestone-4-released\",\n    passHref: true,\n    mdxType: \"Link\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"\"\n  }), \"https://vertx.io/blog/eclipse-\\u200Bvert-x-4-\\u200Bmilestone-4-\\u200Breleased\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(Link, {\n    href: \"/blog/eclipse-vert-x-4-milestone-3-released\",\n    passHref: true,\n    mdxType: \"Link\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"\"\n  }), \"https://vertx.io/blog/eclipse-\\u200Bvert-x-4-\\u200Bmilestone-3-\\u200Breleased\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(Link, {\n    href: \"/blog/eclipse-vert-x-4-milestone-2-released\",\n    passHref: true,\n    mdxType: \"Link\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"\"\n  }), \"https://vertx.io/blog/eclipse-\\u200Bvert-x-4-\\u200Bmilestone-2-\\u200Breleased\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(Link, {\n    href: \"/blog/eclipse-vert-x-4-milestone-1-released\",\n    passHref: true,\n    mdxType: \"Link\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"\"\n  }), \"https://vertx.io/blog/eclipse-\\u200Bvert-x-4-\\u200Bmilestone-1-\\u200Breleased\")))), mdx(\"p\", null, \"The \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/vert-x3/wiki/wiki/4.0.0-Deprecations-and-breaking-changes\"\n  }), \"dep\\xADre\\xADca\\xADtions and break\\xADing changes\"), \"\\ncan be found on the wiki.\"), mdx(\"p\", null, \"For this re\\xADlease, there are no Docker im\\xADages.\"), mdx(\"p\", null, \"The re\\xADlease ar\\xADti\\xADfacts have been de\\xADployed to \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://search.maven.org/search?q=g:io.vertx%20AND%20v:4.0.0.Beta1\"\n  }), \"Maven Cen\\xADtral\"), \" and you can get the dis\\xADtri\\xADb\\xADu\\xADtion on \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://repo1.maven.org/maven2/io/vertx/vertx-stack-manager/4.0.0.Beta1/\"\n  }), \"Maven Cen\\xADtral\"), \".\"), mdx(\"p\", null, \"You can boot\\xADstrap a Vert.x 4.0.0.Beta3 project using \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://start.vertx.io\"\n  }), \"https://start.vertx.io\"), \".\"), mdx(\"p\", null, \"The doc\\xADu\\xADmen\\xADta\\xADtion has been de\\xADployed on this pre\\xADview web-\\u200Bsite \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://vertx-web-site.github.io/docs/\"\n  }), \"https://vertx-\\u200Bweb-site.github.io/docs/\")), mdx(\"p\", null, \"That\\u2019s it! Happy cod\\xADing and see you soon on our user or dev \", mdx(Link, {\n    href: \"/community\",\n    passHref: true,\n    mdxType: \"Link\"\n  }, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"\"\n  }), \"chan\\xADnels\")), \".\"));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"\u003cp\u003eWe are ex­tremely pleased to an­nounce the third 4.0 beta re­lease of Eclipse Vert.x.\u003c/p\u003e\u003cp\u003eVert.x 4 is the evo­lu­tion of the Vert.x 3.x se­ries that will bring key fea­tures to Vert.x.\u003c/p\u003e\u003ch2 id=\"http-client-request-creation\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#http-client-request-creation\"\u003e\u003c/a\u003eHTTP client request creation\u003c/h2\u003e\u003cp\u003eUntil Beta3, HTTP client has cre­ated lazy HTTP re­quests, since then cre­at­ing a re­quest\nhas be­come an asyn­chro­nous op­er­a­tion guar­an­tee­ing that a slot for per­form­ing the re­quest\nis granted:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003e\u003cspan class=\"hljs-comment\"\u003e// Created a request\u003c/span\u003e\nHttpClientRequest request = client.get(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/some-uri\u0026quot;\u003c/span\u003e);\n\n\u003cspan class=\"hljs-comment\"\u003e// Connect to the server or reuse a connection from the pool and then try to send the request\u003c/span\u003e\nrequest.end();\n\n\u003cspan class=\"hljs-comment\"\u003e// Since Beta3\u003c/span\u003e\nclient.get(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/some-uri\u0026quot;\u003c/span\u003e, ar -\u0026gt; {\n  \u003cspan class=\"hljs-comment\"\u003e// The client connected to the server or reused a connection from the pool\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.succeeded()) {\n    HttpClientRequest request = ar.result();\n\n    \u003cspan class=\"hljs-comment\"\u003e// Send the request\u003c/span\u003e\n    request.end();\n  }\n});\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eAn­other (hid­den) mo­ti­va­tion to switch to this model is avoid­ing data races when the\nHTTP client is used out­side the event-​loop using fu­tures.\u003c/p\u003e\u003cp\u003ePre­vi­ously, you could write code like:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003eFuture\u0026lt;HttpClientResponse\u0026gt; get = client.get(\u003cspan class=\"hljs-string\"\u003e\u0026quot;some-uri\u0026quot;\u003c/span\u003e);\n\n\u003cspan class=\"hljs-comment\"\u003e// Assuming we have a client that returns a future response\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// assuging this is *not* on the event-loop\u003c/span\u003e\nFuture\u0026lt;Buffer\u0026gt; fut = get.send().compose(response -\u0026gt; {\n\n  \u003cspan class=\"hljs-comment\"\u003e// Response events might have happen already\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e response.body();\n});\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eNow, you can write in­stead:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003eFuture\u0026lt;Buffer\u0026gt; fut = client.get(\u003cspan class=\"hljs-string\"\u003e\u0026quot;some-uri\u0026quot;\u003c/span\u003e).compose(request -\u0026gt; {\n  request.send().compose(response -\u0026gt; response.body())\n});\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"httpserverresponse-send-method\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#httpserverresponse-send-method\"\u003e\u003c/a\u003eHttpServerResponse send method\u003c/h2\u003e\u003cp\u003eIn the pre­vi­ous beta, HTTP client re­quest got a new sim­pli­fied \u003ccode\u003esend\u003c/code\u003e method to send\na body or a stream. We did the same for the HTTP server re­sponse API:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003eserver.requestHandler(req -\u0026gt; {\n  req.pause();\n  getSomeStream().onSuccess(stream -\u0026gt; {\n    req.response().send(stream);\n  });\n});\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"http-tunnel-improvements\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#http-tunnel-improvements\"\u003e\u003c/a\u003eHTTP tunnel improvements\u003c/h2\u003e\u003cp\u003eCre­at­ing an HTTP tun­nel has now be­come more nat­ural:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003eclient.request(HttpMethod.CONNECT, \u003cspan class=\"hljs-string\"\u003e\u0026quot;some-uri\u0026quot;\u003c/span\u003e)\n  .onSuccess(request -\u0026gt; {\n\n    \u003cspan class=\"hljs-comment\"\u003e// Connect to the server\u003c/span\u003e\n    request.connect(ar -\u0026gt; {\n      \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.succeeded()) {\n        HttpClientResponse response = ar.result();\n\n        \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (response.statusCode() != \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e) {\n          \u003cspan class=\"hljs-comment\"\u003e// Connect failed for some reason\u003c/span\u003e\n        } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n          \u003cspan class=\"hljs-comment\"\u003e// Tunnel created, raw buffers are transmitted on the wire\u003c/span\u003e\n          NetSocket socket = response.netSocket();\n        }\n      }\n    });\n});\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThe new \u003ccode\u003econnect\u003c/code\u003e method tells the client that when a \u003ccode\u003e201\u003c/code\u003e re­sponse is re­ceived\nfrom the server then the con­nec­tion should be switched to not in­ter­pret HTTP\ndata any­more.\u003c/p\u003e\u003cp\u003eOn the server, the API has be­come asyn­chro­nous and re­named to \u003ccode\u003etoNetSocket()\u003c/code\u003e:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003eserver.requestHandler(request -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (request.method() == HttpMethod.CONNECT) {\n    \u003cspan class=\"hljs-comment\"\u003e// Will send an HTTP 201 status code and switch the connection to use raw buffers\u003c/span\u003e\n    request.toNetSocket(ar -\u0026gt; {\n      \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.succeeded()) {\n        NetSocket socket = ar.result();\n      }\n    });\n  }\n});\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"websocket-upgrade-improvements\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#websocket-upgrade-improvements\"\u003e\u003c/a\u003eWebSocket upgrade improvements\u003c/h2\u003e\u003cp\u003eThe server Web­Socket man­ual up­grade op­er­a­tion has also be­come asyn­chro­nous and re­named\nto \u003ccode\u003etoWebSocket()\u003c/code\u003e\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003eserver.requestHandler(request -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (request.method() == HttpMethod.GET \u0026amp;\u0026amp; \u003cspan class=\"hljs-string\"\u003e\u0026quot;Upgrade\u0026quot;\u003c/span\u003e.equals(request.getHeader(\u003cspan class=\"hljs-string\"\u003e\u0026quot;connection\u0026quot;\u003c/span\u003e))) {\n    \u003cspan class=\"hljs-comment\"\u003e// Will do the WebSocket handshake\u003c/span\u003e\n    request.toWebSocket(ar -\u0026gt; {\n      \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.succeeded()) {\n        ServerWebSocket socket = ar.result();\n      }\n    });\n  }\n});\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"row-to-json-conversion\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#row-to-json-conversion\"\u003e\u003c/a\u003eRow to JSON conversion\u003c/h2\u003e\u003cp\u003eSQL client can now eas­ily trans­form a \u003ccode\u003eRow\u003c/code\u003e into a JSON ob­ject, this can be con­vie­nient\nfor ap­pli­ca­tions di­rectly trans­fer­ring JSON re­sults to the client:\u003c/p\u003e\u003cpre\u003e\u003ccode class=\"hljs language-java\"\u003eclient\n  .preparedQuery(\u003cspan class=\"hljs-string\"\u003e\u0026quot;SELECT * FROM USERS WHERE ID=$1\u0026quot;\u003c/span\u003e)\n  .execute(Tuple.of(id))\n  .onSuccess(row -\u0026gt; {\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (row.size() == \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e) {\n      JsonObject json = row.iterator().next().toJson();\n    }\n  });\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"oauth2oidc-pkce\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#oauth2oidc-pkce\"\u003e\u003c/a\u003eOAuth2/OIDC PKCE\u003c/h2\u003e\u003cp\u003e\u003ccode\u003eOAuth2Handler\u003c/code\u003e can now han­dle \u003ca href=\"https://tools.ietf.org/html/rfc7636\"\u003ePKCE\u003c/a\u003e, which means an­other layer of se­cu­rity to your ap­pli­ca­tion.\u003c/p\u003e\u003ch2 id=\"redis-resp3\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#redis-resp3\"\u003e\u003c/a\u003eRedis RESP3\u003c/h2\u003e\u003cp\u003eThe redis client can now speak \u003ccode\u003eRESP3\u003c/code\u003e with redis servers. This means it can han­dle all the new types and APIs avail­able on redis from all ver­sions (RESP2, redis \u0026lt; 6) and (RESP3, redis \u0026gt;= 6).\u003c/p\u003e\u003ch2 id=\"finally\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#finally\"\u003e\u003c/a\u003eFinally\u003c/h2\u003e\u003cp\u003eThis is the Beta3 re­lase of Vert.x 4, you can of course ex­pect an­other beta as we get feed­back from the com­mu­nity and fix is­sues that we failed to catch be­fore.\u003c/p\u003e\u003cp\u003eYou can also read the mile­stone an­nounces to know more about the over­ral changes:\u003c/p\u003e\u003cul\u003e\u003cli\u003e\u003ca href=\"/blog/eclipse-vert-x-4-beta-1-released/\"\u003ehttps://vertx.io/blog/eclipse-​vert-x-4-​beta-1-​released\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003ca href=\"/blog/eclipse-vert-x-4-milestone-5-released/\"\u003ehttps://vertx.io/blog/eclipse-​vert-x-4-​milestone-5-​released\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003ca href=\"/blog/eclipse-vert-x-4-milestone-5-released/\"\u003ehttps://vertx.io/blog/eclipse-​vert-x-4-​milestone-5-​released\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003ca href=\"/blog/eclipse-vert-x-4-milestone-4-released/\"\u003ehttps://vertx.io/blog/eclipse-​vert-x-4-​milestone-4-​released\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003ca href=\"/blog/eclipse-vert-x-4-milestone-3-released/\"\u003ehttps://vertx.io/blog/eclipse-​vert-x-4-​milestone-3-​released\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003ca href=\"/blog/eclipse-vert-x-4-milestone-2-released/\"\u003ehttps://vertx.io/blog/eclipse-​vert-x-4-​milestone-2-​released\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003ca href=\"/blog/eclipse-vert-x-4-milestone-1-released/\"\u003ehttps://vertx.io/blog/eclipse-​vert-x-4-​milestone-1-​released\u003c/a\u003e\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eThe \u003ca href=\"https://github.com/vert-x3/wiki/wiki/4.0.0-Deprecations-and-breaking-changes\"\u003edep­re­ca­tions and break­ing changes\u003c/a\u003e\ncan be found on the wiki.\u003c/p\u003e\u003cp\u003eFor this re­lease, there are no Docker im­ages.\u003c/p\u003e\u003cp\u003eThe re­lease ar­ti­facts have been de­ployed to \u003ca href=\"https://search.maven.org/search?q=g:io.vertx%20AND%20v:4.0.0.Beta1\"\u003eMaven Cen­tral\u003c/a\u003e and you can get the dis­tri­b­u­tion on \u003ca href=\"https://repo1.maven.org/maven2/io/vertx/vertx-stack-manager/4.0.0.Beta1/\"\u003eMaven Cen­tral\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eYou can boot­strap a Vert.x 4.0.0.Beta3 project using \u003ca href=\"https://start.vertx.io\"\u003ehttps://start.vertx.io\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eThe doc­u­men­ta­tion has been de­ployed on this pre­view web-​site \u003ca href=\"https://vertx-web-site.github.io/docs/\"\u003ehttps://vertx-​web-site.github.io/docs/\u003c/a\u003e\u003c/p\u003e\u003cp\u003eThat’s it! Happy cod­ing and see you soon on our user or dev \u003ca href=\"/community/\"\u003echan­nels\u003c/a\u003e.\u003c/p\u003e","scope":{}}},"prevPost":{"meta":{"title":"JWT Authorization for Vert.x with Keycloak","category":"guides","authors":[{"name":"Thomas Darimont","github_id":"thomasdarimont"}],"summary":"In this blog post, you'll learn about JWT foundations, protect routes with JWT Authorization, JWT encoded tokens, and RBAC with Keycloak"},"date":"2020-10-01","slug":"jwt-authorization-for-vert-x-with-keycloak"},"nextPost":{"meta":{"title":"Eclipse Vert.x 3.9.3 released!","category":"releases","authors":[{"name":"Julien Viet","github_id":"vietj"}],"summary":"Eclipse Vert.x version 3.9.3 has just been released. It fixes quite a few bugs that have been reported by the community."},"date":"2020-09-17","slug":"eclipse-vert-x-3-9-3-released"},"relatedPosts":[{"meta":{"title":"Real-time bidding with Websockets and Vert.x","category":"guides","authors":[{"name":"Marcin Warczyglowa","github_id":"mwarc"}],"summary":"The expectations of users for interactivity with web applications have changed over the past few years.\n    Users during bidding in auction no longer want to press the refresh button."},"date":"2016-01-15","slug":"real-time-bidding-with-websockets-and-vert-x"},{"meta":{"title":"Some Rest with Vert.x","category":"guides","authors":[{"name":"Clement Escoffier","github_id":"cescoffier"}],"summary":"This post is part of the Introduction to Vert.x series. Let’s go a bit further this time and develop a CRUD-ish application"},"date":"2015-07-27","slug":"some-rest-with-vert-x"},{"meta":{"title":"Building services and APIs with AMQP 1.0","category":"guides","authors":[{"name":"Jakub Scholz","github_id":"scholzj"}],"summary":"Microservices and APIs are everywhere. Everyone talks about them, presentation slides are full of them ... some people are actually even building them."},"date":"2017-01-25","slug":"building-services-and-apis-with-amqp-1-0"}]},"__N_SSG":true},"page":"/blog/[[...slug]]","query":{"slug":["eclipse-vert-x-4-beta-3-released"]},"buildId":"vkmGKzB5aa87Mnn8yeTPG","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-9a5c89434732593ca2fd.js"></script><script src="/_next/static/chunks/main-b6e20584df76f29b6f35.js" async=""></script><script src="/_next/static/chunks/webpack-d7b2fb72fb7257504a38.js" async=""></script><script src="/_next/static/chunks/framework.fcef98db13e2318579fb.js" async=""></script><script src="/_next/static/chunks/commons.5b8771ac6e8a338f82f1.js" async=""></script><script src="/_next/static/chunks/styles.7064a0f84b2a7c13404a.js" async=""></script><script src="/_next/static/chunks/pages/_app-3dbbc9c041333077c167.js" async=""></script><script src="/_next/static/chunks/5df0631eea625b022d3730b3f1bf573e1b8deb37.3b9874ba65db13e7d868.js" async=""></script><script src="/_next/static/chunks/pages/blog/%5B%5B...slug%5D%5D-c36bc482402d8ffe42a5.js" async=""></script><script src="/_next/static/vkmGKzB5aa87Mnn8yeTPG/_buildManifest.js" async=""></script><script src="/_next/static/vkmGKzB5aa87Mnn8yeTPG/_ssgManifest.js" async=""></script></body></html>