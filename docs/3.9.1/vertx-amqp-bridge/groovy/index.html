<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="description" content="Vert.x | Reactive applications on the JVM"/><meta name="robots" content="index,follow"/><link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet"/><link href="https://fonts.googleapis.com/css?family=Roboto+Condensed:300,400" rel="stylesheet"/><link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400&amp;display=swap" rel="stylesheet"/><link rel="shortcut icon" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="48x48" href="/favicons/favicon-48x48.png"/><link rel="alternate" type="application/rss+xml" href="/feed/rss.xml"/><link rel="alternate" type="application/atom+xml" href="/feed/atom.xml"/><link rel="alternate" type="application/json" href="/feed/feed.json"/><title>Vert.x AMQP Bridge | Eclipse Vert.x</title><meta name="next-head-count" content="16"/><link rel="preload" href="/_next/static/css/styles.f20dca63.chunk.css" as="style"/><link rel="stylesheet" href="/_next/static/css/styles.f20dca63.chunk.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-b6e20584df76f29b6f35.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-d7b2fb72fb7257504a38.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.fcef98db13e2318579fb.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.5b8771ac6e8a338f82f1.js" as="script"/><link rel="preload" href="/_next/static/chunks/styles.7064a0f84b2a7c13404a.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-3dbbc9c041333077c167.js" as="script"/><link rel="preload" href="/_next/static/chunks/5df0631eea625b022d3730b3f1bf573e1b8deb37.dd672925a2e24782fa8b.js" as="script"/><link rel="preload" href="/_next/static/chunks/31acfd8439b7c9eee4abe9f59c7500d6c943ee0d.2fd31bea904cf90ee764.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/docs/%5B%5B...slug%5D%5D-a029dc5d19ec928c6924.js" as="script"/></head><body><div id="__next"><main class="page docs"><header><div class="navbar"><div class="navbar-content container"><div class="navbar-logo"><a href="/"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAxMTI1LjYgMzE1LjIiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxzdHlsZT4uc3Qwe2ZpbGw6Izc4MmE5MX08L3N0eWxlPjxwYXRoIGQ9Ik0xMjAuOSAyMTQuMkwxOTAuNSAwaDUyLjNsLTk4LjUgMjczLjhIOTguMkwwIDBoNTIuMWw2OC44IDIxNC4yem0yOTEuMi02Mi42SDI5OS42djg0LjJINDMxdjM4SDI1MlYwaDE3Ny43djM4LjRIMjk5LjZWMTE0aDExMi41djM3LjZ6bTgzLjctMTEzLjJINTQ2YzE2LjUuMyAyOSA0LjQgMzcuMyAxMi40IDguMyA4IDEyLjUgMTkuNCAxMi41IDM0IDAgMTQtNC41IDI1LjEtMTMuNSAzMy4yLTkgOC4xLTIxLjYgMTIuMS0zNy42IDEyLjFoLTI3LjF2MjQuMmw4Ni4xIDExOS41aDUxdi0yLjRsLTc3LjItMTA2LjdjMjQuOS01LjUgNDMuMy0yMS43IDUyLjYtMzUuOSA4LjItMTIuNiAxMy4zLTI3LjcgMTMuMy00NiAwLTI2LjgtOC42LTQ3LjQtMjUuOC02MS41QzYwMC41IDcuMSA1NzYuMSAwIDU0NC41IDBoLTk2LjN2MjczLjhoNDcuNiIvPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDUyLjMgMTU3LjdsLTQxLjUgNjIuNyAyOS43IDUzLjRoODUuMXoiLz48Y2lyY2xlIGNsYXNzPSJzdDAiIGN4PSI4MjcuOSIgY3k9IjI3NC43IiByPSI0MC41Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTEwMzcgMGwtNDcuNiA3NC4yTDk0OSAwaC04NGw4NS4zIDEzNS44LTY3LjEgMTA1LjdjNS43IDkuNSA5LjEgMjAuNSA5LjIgMzIuNGg1MC4xTDExMjEuMyAwSDEwMzd6Ii8+PHBhdGggZD0iTTc2My41IDI3My44Yy4xLTkuOSAyLjUtMTkuMiA2LjYtMjcuNVYzOC40aDg1LjRWMEg2MzguMnYzOC40aDg0LjZ2MjM1LjRoNDAuN3oiLz48L3N2Zz4=" alt="Vert.x Logo"/></a></div><div class="navbar-collapse-button"><span></span><span></span><span></span></div><div class="navbar-right"><div class="navbar-menu"><span class="navbar-menu-item with-drop-down"><div class="dropdown"><a class="dropdown-title">开始<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="dropdown-menu"><a href="/introduction-to-vertx-and-reactive/"><li class="dropdown-item">简介</li></a><a href="/get-started/"><li class="dropdown-item">开始</li></a><a href="https://start.vertx.io/" target="_blank" rel="noreferrer"><li class="dropdown-item">应用生成器 <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a></ul></div></span><a class="navbar-menu-item" href="/docs/">文档</a><span class="navbar-menu-item with-drop-down"><div class="dropdown"><a class="dropdown-title">资源<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="dropdown-menu"><a href="/faq/"><li class="dropdown-item">答疑</li></a><a href="/channels/"><li class="dropdown-item">联系渠道</li></a><a href="https://how-to.vertx.io/" target="_blank" rel="noreferrer"><li class="dropdown-item">操作指南 <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a><a href="https://github.com/vert-x3/vertx-eventbus-bridge-clients" target="_blank" rel="noreferrer"><li class="dropdown-item">EventBus Bridge Clients <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a></ul></div></span><a class="navbar-menu-item" href="/blog/">博客</a><a class="navbar-menu-item" href="/community/">社区</a><a class="navbar-menu-item" href="/translation/">翻译团队</a></div><div class="navbar-social"><a href="https://github.com/vert-x3/vertx-awesome" class="navbar-social-link" title="Awesome Vert.x" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="List of awesome Vert.x projects"><title>Awesome Vert.x</title><path d="M24 11.438l-6.154-5.645-.865.944 5.128 4.7H1.895l5.128-4.705-.865-.943-6.154 5.649H0v3.72c0 1.683 1.62 3.053 3.61 3.053h3.795c1.99 0 3.61-1.37 3.61-3.051v-2.446h1.97v2.446c0 1.68 1.62 3.051 3.61 3.051h3.794c1.99 0 3.61-1.37 3.61-3.051v-3.721z"></path></svg></a><a href="https://stackoverflow.com/questions/tagged/vert.x" class="navbar-social-link" title="Stack Overflow" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Stack Overflow questions related to Vert.x"><title>Stack Overflow</title><path d="M18.986 21.865v-6.404h2.134V24H1.844v-8.539h2.13v6.404h15.012zM6.111 19.731H16.85v-2.137H6.111v2.137zm.259-4.852l10.48 2.189.451-2.07-10.478-2.187-.453 2.068zm1.359-5.056l9.705 4.53.903-1.95-9.706-4.53-.902 1.936v.014zm2.715-4.785l8.217 6.855 1.359-1.62-8.216-6.853-1.35 1.617-.01.001zM15.751 0l-1.746 1.294 6.405 8.604 1.746-1.294L15.749 0h.002z"></path></svg></a><a href="https://www.youtube.com/channel/UCGN6L3tRhs92Uer3c6VxOSA" class="navbar-social-link" title="YouTube" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="YouTube channel of Vert.x"><title>YouTube</title><path d="M23.499 6.203a3.008 3.008 0 00-2.089-2.089c-1.87-.501-9.4-.501-9.4-.501s-7.509-.01-9.399.501a3.008 3.008 0 00-2.088 2.09A31.258 31.26 0 000 12.01a31.258 31.26 0 00.523 5.785 3.008 3.008 0 002.088 2.089c1.869.502 9.4.502 9.4.502s7.508 0 9.399-.502a3.008 3.008 0 002.089-2.09 31.258 31.26 0 00.5-5.784 31.258 31.26 0 00-.5-5.808zm-13.891 9.4V8.407l6.266 3.604z"></path></svg></a><a href="https://discord.gg/KzEMwP2" class="navbar-social-link" title="Discord" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Eclipse Vert.x channel on Discord"><title>Discord</title><path d="M20.222 0c1.406 0 2.54 1.137 2.607 2.475V24l-2.677-2.273-1.47-1.338-1.604-1.398.67 2.205H3.71c-1.402 0-2.54-1.065-2.54-2.476V2.48C1.17 1.142 2.31.003 3.715.003h16.5L20.222 0zm-6.118 5.683h-.03l-.202.2c2.073.6 3.076 1.537 3.076 1.537-1.336-.668-2.54-1.002-3.744-1.137-.87-.135-1.74-.064-2.475 0h-.2c-.47 0-1.47.2-2.81.735-.467.203-.735.336-.735.336s1.002-1.002 3.21-1.537l-.135-.135s-1.672-.064-3.477 1.27c0 0-1.805 3.144-1.805 7.02 0 0 1 1.74 3.743 1.806 0 0 .4-.533.805-1.002-1.54-.468-2.14-1.404-2.14-1.404s.134.066.335.2h.06c.03 0 .044.015.06.03v.006c.016.016.03.03.06.03.33.136.66.27.93.4.466.202 1.065.403 1.8.536.93.135 1.996.2 3.21 0 .6-.135 1.2-.267 1.8-.535.39-.2.87-.4 1.397-.737 0 0-.6.936-2.205 1.404.33.466.795 1 .795 1 2.744-.06 3.81-1.8 3.87-1.726 0-3.87-1.815-7.02-1.815-7.02-1.635-1.214-3.165-1.26-3.435-1.26l.056-.02zm.168 4.413c.703 0 1.27.6 1.27 1.335 0 .74-.57 1.34-1.27 1.34-.7 0-1.27-.6-1.27-1.334.002-.74.573-1.338 1.27-1.338zm-4.543 0c.7 0 1.266.6 1.266 1.335 0 .74-.57 1.34-1.27 1.34-.7 0-1.27-.6-1.27-1.334 0-.74.57-1.338 1.27-1.338z"></path></svg></a><a href="https://groups.google.com/forum/?fromgroups#!forum/vertx" class="navbar-social-link" title="Vert.x 用户组" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="A Google group for Vert.x users"><title>Vert.x 用户组</title><path d="M.92 3.332c-.776 0-1.216.67-.692 1.383l2.537 4.403v7.86c0 2.013 1.467 3.69 3.459 3.69H20.31a3.75 3.75 0 003.69-3.69V7.043a3.723 3.723 0 00-3.668-3.71zm5.786 3.71H20.1c.587 0 1.153.357 1.153.923 0 .566-.566.922-1.153.922H6.706c-.587 0-1.153-.356-1.153-.922 0-.566.566-.923 1.153-.923zm0 3.69H20.1c.587 0 1.153.356 1.153.922 0 .566-.566.922-1.153.922H6.706c-.587 0-1.153-.356-1.153-.922 0-.566.566-.922 1.153-.922zm-.021 3.71h9.705c.587 0 1.153.356 1.153.922 0 .566-.566.923-1.153.923H6.685c-.587 0-1.153-.357-1.153-.923 0-.566.566-.922 1.153-.922Z"></path></svg></a><a href="https://shang.qq.com/wpa/qunwpa?idkey=587f58cacb9557e3291b46098e0fe09427b98a1c0f866da23c04c2762bc7e2ad" class="navbar-social-link" title="Vert.x中国用户组QQ群" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Vert.x中国用户组QQ群"><title>Vert.x中国用户组QQ群</title><path d="M21.395 15.035a39.548 39.548 0 0 0-.803-2.264l-1.079-2.695c.001-.032.014-.562.014-.836C19.526 4.632 17.351 0 12 0S4.474 4.632 4.474 9.241c0 .274.013.804.014.836l-1.08 2.695a38.97 38.97 0 0 0-.802 2.264c-1.021 3.283-.69 4.643-.438 4.673.54.065 2.103-2.472 2.103-2.472 0 1.469.756 3.387 2.394 4.771-.612.188-1.363.479-1.845.835-.434.32-.379.646-.301.778.343.578 5.883.369 7.482.189 1.6.18 7.14.389 7.483-.189.078-.132.132-.458-.301-.778-.483-.356-1.233-.646-1.846-.836 1.637-1.384 2.393-3.302 2.393-4.771 0 0 1.563 2.537 2.103 2.472.251-.03.581-1.39-.438-4.673zM12.662 4.846c.039-1.052.659-1.878 1.385-1.846s1.281.912 1.242 1.964c-.039 1.051-.659 1.878-1.385 1.846s-1.282-.912-1.242-1.964zM9.954 3c.725-.033 1.345.794 1.384 1.846.04 1.052-.517 1.931-1.242 1.963-.726.033-1.346-.794-1.385-1.845C8.672 3.912 9.228 3.033 9.954 3zM7.421 8.294c.194-.43 2.147-.908 4.566-.908h.026c2.418 0 4.372.479 4.566.908a.14.14 0 0 1 .014.061c0 .031-.01.059-.026.083-.163.238-2.333 1.416-4.553 1.416h-.026c-2.221 0-4.39-1.178-4.553-1.416a.136.136 0 0 1-.014-.144zm10.422 8.622c-.22 3.676-2.403 5.987-5.774 6.021h-.137c-3.37-.033-5.554-2.345-5.773-6.021-.081-1.35.001-2.496.147-3.43.318.063.638.122.958.176v3.506s1.658.334 3.318.103v-3.225c.488.027.96.04 1.406.034h.025c1.678.021 3.714-.204 5.683-.594.146.934.227 2.08.147 3.43zM10.48 5.804c.313-.041.542-.409.508-.825-.033-.415-.314-.72-.629-.679-.313.04-.541.409-.508.824.034.417.315.72.629.68zM14.479 5.156c.078.037.221.042.289-.146.035-.095.025-.165-.009-.214-.023-.033-.133-.118-.371-.176-.904-.22-1.341.384-1.405.499-.04.072-.012.176.056.227.067.051.139.037.179-.006.58-.628 1.21-.208 1.261-.184z"></path></svg></a></div></div></div></div></header><div class="page-content docs-content"><div class="container"><div class="docs-content-wrapper"><aside class=""><div class="docs-content-wrapper-sidebar"><div class="search-panel"><div class="search"><input type="text" placeholder="Search..." value=""/><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="search-icon"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="search-icon-delete"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg></div><ul class="search-results"></ul><div class="search-results-none">No results.</div></div><div class="docs-content-toc"><div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_using_vert_x_amqp_bridge">Using Vert.x AMQP Bridge</a></li>
<li><a href="#_getting_started">Getting Started</a>
<ul class="sectlevel2">
<li><a href="#_sending_a_message">Sending a Message</a></li>
<li><a href="#_receiving_a_message">Receiving a Message</a></li>
</ul>
</li>
<li><a href="#message_payload">Message Payload</a>
<ul class="sectlevel2">
<li><a href="#_overview">Overview</a></li>
<li><a href="#_application_properties">Application Properties</a></li>
</ul>
</li>
<li><a href="#_flow_control">Flow Control</a>
<ul class="sectlevel2">
<li><a href="#_producers">Producers</a></li>
<li><a href="#_consumers">Consumers</a></li>
</ul>
</li>
<li><a href="#_connecting_using_ssl">Connecting using SSL</a></li>
<li><a href="#_sending_and_receiving_replies">Sending and Receiving replies.</a>
<ul class="sectlevel2">
<li><a href="#_sent_messages_seeking_a_reply">Sent messages seeking a reply.</a></li>
<li><a href="#_received_messages_seeking_a_reply">Received messages seeking a reply.</a></li>
</ul>
</li>
</ul>
</div></div></div></aside><div class="docs-content-sidebar-toggle"><div style="position:relative"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-list"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-x"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></div></div><div class="docs-content-inner"><div class="docs-content-metadata"><div class="docs-content-metadata-left"><div><a href="https://vertx.io/docs/apidocs"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path></svg> API</a></div><span class="docs-content-metadata-version"><div class="dropdown"><a class="dropdown-title">vundefined<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="dropdown-menu align-right"></ul></div></span></div></div><div><h1>Vert.x AMQP Bridge</h1>

<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This component provides AMQP 1.0 producer and consumer support via a bridging layer implementing the Vert.x event bus
MessageProducer and MessageConsumer APIs over the top of <a href="https://github.com/vert-x3/vertx-proton/">vertx-proton</a>.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">警告</div>
</td>
<td class="content">
This component will be removed in Vert.x 4, instead you should use <a href="https://vertx.io/docs/vertx-amqp-client/java/">Vert.x AMQP Client</a>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_using_vert_x_amqp_bridge"><a class="anchor" href="#_using_vert_x_amqp_bridge"></a>Using Vert.x AMQP Bridge</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To use Vert.x AMQP Bridge, add the following dependency to the <em>dependencies</em> section of your build descriptor:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Maven (in your <code>pom.xml</code>):</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.vertx<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>vertx-amqp-bridge<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.9.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Gradle (in your <code>build.gradle</code> file):</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">compile io.<span class="hljs-string">vertx:</span>vertx-amqp-<span class="hljs-string">bridge:</span><span class="hljs-number">3.9</span><span class="hljs-number">.1</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_getting_started"><a class="anchor" href="#_getting_started"></a>Getting Started</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_sending_a_message"><a class="anchor" href="#_sending_a_message"></a>Sending a Message</h3>
<div class="paragraph">
<p>Here is a simple example of creating a <code><a href="../../apidocs/io/vertx/core/eventbus/MessageProducer.html">MessageProducer</a></code> and sending a message with it.
First, an <code><a href="../../apidocs/io/vertx/amqpbridge/AmqpBridge.html">AmqpBridge</a></code> is created and started to establish the underlying AMQP connection,
then when this is complete the producer is created and a message sent using it. You can optionally supply a username
and password when starting the bridge, as well as supplying <code><a href="../../apidocs/io/vertx/amqpbridge/AmqpBridgeOptions.html">AmqpBridgeOptions</a></code> in order
to configure various options such as for using SSL connections.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy"><span class="hljs-keyword">def</span> bridge = AmqpBridge.create(vertx)
<span class="hljs-comment">// Start the bridge, then use the event loop thread to process things thereafter.</span>
bridge.start(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">5672</span>, { res -&gt;
  <span class="hljs-comment">// Set up a producer using the bridge, send a message with it.</span>
  <span class="hljs-keyword">def</span> producer = bridge.createProducer(<span class="hljs-string">"myAmqpAddress"</span>)

  <span class="hljs-keyword">def</span> amqpMsgPayload = [:]
  amqpMsgPayload.body = <span class="hljs-string">"myStringContent"</span>

  producer.send(amqpMsgPayload)
})</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_receiving_a_message"><a class="anchor" href="#_receiving_a_message"></a>Receiving a Message</h3>
<div class="paragraph">
<p>Here is a simple example of creating a <code><a href="../../apidocs/io/vertx/core/eventbus/MessageConsumer.html">MessageConsumer</a></code> and registering a handler with it.
First, an <code><a href="../../apidocs/io/vertx/amqpbridge/AmqpBridge.html">AmqpBridge</a></code> is created and started to establish the underlying AMQP connection,
then when this is complete the consumer is created and a handler registered that prints the body of incoming AMQP
messages.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy"><span class="hljs-keyword">def</span> bridge = AmqpBridge.create(vertx)
<span class="hljs-comment">// Start the bridge, then use the event loop thread to process things thereafter.</span>
bridge.start(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">5672</span>, { res -&gt;
  <span class="hljs-comment">// Set up a consumer using the bridge, register a handler for it.</span>
  <span class="hljs-keyword">def</span> consumer = bridge.createConsumer(<span class="hljs-string">"myAmqpAddress"</span>)
  consumer.handler({ vertxMsg -&gt;
    <span class="hljs-keyword">def</span> amqpMsgPayload = vertxMsg.body()
    <span class="hljs-keyword">def</span> amqpBody = amqpMsgPayload.body

    println(<span class="hljs-string">"Received a message with body: ${amqpBody}"</span>)
  })
})</code></pre>
</div>
</div>
<div class="paragraph">
<p>Receipt of the AMQP message is accepted automatically as soon as the consumer&#8217;s handler returns upon delivering the
message to the application.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="message_payload"><a class="anchor" href="#message_payload"></a>Message Payload</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview"><a class="anchor" href="#_overview"></a>Overview</h3>
<div class="paragraph">
<p>The message payload is passed as a JsonObject with elements representing various sections of the
<a href="http://docs.oasis-open.org/amqp/core/v1.0/os/amqp-core-messaging-v1.0-os.html#section-message-format">AMQP
message</a>.</p>
</div>
<div class="paragraph">
<p>The top-level elements supported are:</p>
</div>
<div class="paragraph">
<p><strong>body</strong>: The content for the body section of the AMQP message.
<strong>body_type</strong>: An optional String used to indicate whether the "body" element represents an AmqpValue (default), Data, or AmqpSequence section. The values used are "value", "data", and "sequence" respectively.
<strong>header</strong>: An optional  JsonObject representing the elements of the message Header section. Expanded below.
<strong>properties</strong>: An optional JsonObject representing the elements of the message Properties section. Expanded below.
<strong>application_properties</strong>: An optional JsonObject containing any application defined properties(/headers).
<strong>message_annotations</strong>: An optional JsonObject representing any message annotations.</p>
</div>
<div class="paragraph">
<p>The elements of the optional "header" sub-element are:</p>
</div>
<div class="paragraph">
<p><strong>durable</strong>: optional boolean indicating whether the message is durable (default false).
<strong>priority</strong>: optional short indicating the message priority (default 4).
<strong>ttl</strong>: optional long indicating ttl in milliseconds (no default). See also 'properties' absolute expiry time.
<strong>first_acquirer</strong>: boolean indicating if this is the first acquirer of the message (default false)
<strong>delivery_count</strong>: long indicating the number of previous <em>failed</em> delivery attempts for message.</p>
</div>
<div class="paragraph">
<p>The elements of the optional "properties" sub-element are:</p>
</div>
<div class="paragraph">
<p><strong>to</strong>: optional string with address message is being sent to (no default).
<strong>reply_to</strong>: optional string with address for replies (no default). Set automatically when sent with reply handler.
<strong>message_id</strong>: optional string with message id (no default). Set automatically when sending with reply handler.
<strong>correlation_id</strong>: optional string with correlation id (no default). Set automatically when implicit reply is sent.
<strong>subject</strong>: optional string with message subject (no default).
<strong>group_id</strong>: optional string with message group id (no default).
<strong>group_sequence</strong>: optional long with message group sequence (no default).
<strong>reply_to_group_id</strong>: optional string with message reply to group id (no default).
<strong>content_type</strong>: optional string with message content type (no default). Only for use with Data body sections.
<strong>content_encoding</strong>: optional string with message content encoding (no default).
<strong>creation_time</strong>: optional long with message creation time in milliseconds since the unix epoch (no default).
<strong>absolute_expiry_time</strong>: optional long with absolute expiry time as milliseconds since the unix epoch (no default).
<strong>user_id</strong>: optional string with the id of the user sending the message (no default).</p>
</div>
</div>
<div class="sect2">
<h3 id="_application_properties"><a class="anchor" href="#_application_properties"></a>Application Properties</h3>
<div class="paragraph">
<p>To send a message with application properties, the "application_properties" element is added to the payload,
containing a JsonObject whose contents represent the application property entries, which have string keys and a
object representing a simple value such as String, Boolean, Integer, etc. For example, adding a property to a sent
message could look something like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy"><span class="hljs-keyword">def</span> applicationProperties = [:]
applicationProperties.name = <span class="hljs-string">"value"</span>

<span class="hljs-keyword">def</span> amqpMsgPayload = [:]
amqpMsgPayload.application_properties = applicationProperties

producer.send(amqpMsgPayload)</code></pre>
</div>
</div>
<div class="paragraph">
<p>When receiving a message with application properties, the "application_properties" element is added to the JsonObject
payload returned, containing a JsonObject whose contents represent the application property entries. For example,
retrieving an application-property from a received message might look like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy"><span class="hljs-comment">// Check the application properties section was present before use, it may not be</span>
<span class="hljs-keyword">def</span> appProps = amqpMsgPayload.application_properties
<span class="hljs-keyword">if</span> (appProps != <span class="hljs-literal">null</span>) {
  <span class="hljs-keyword">def</span> propValue = appProps.propertyName
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_flow_control"><a class="anchor" href="#_flow_control"></a>Flow Control</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Message transfer between peers, such as clients and servers, is governed by credit in AMQP 1.0, with receiving peers
granting sending peers a number of credits to allow them to send messages. As each message is sent a unit of credit
is used up, with the receiving peer needing to replenish the senders credit over time in order for message delivery
to progress. This allows for recipients to flow control senders by governing the amount of outstanding credit
available.</p>
</div>
<div class="sect2">
<h3 id="_producers"><a class="anchor" href="#_producers"></a>Producers</h3>
<div class="paragraph">
<p>While a MessageProducer will buffer outgoing messages if there are insufficient credits to send them all
immediately, and then send them once credit is granted, it is typically more desirable for the application to work
in tandem with the producer and attempt to send only what it knows can actually currently be sent.</p>
</div>
<div class="paragraph">
<p>This is possible by inspecting whether the producer write queue is full, i.e it currently has no credit to send:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">producer.writeQueueFull()</code></pre>
</div>
</div>
<div class="paragraph">
<p>This check can be used in concert with a handler that can be registered to receive callbacks whenever the producer
receives more credit and is able to send messages immediately rather than buffer them:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">producer.drainHandler({ v -&gt;
  <span class="hljs-comment">// ...do stuff and send...</span>
})</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_consumers"><a class="anchor" href="#_consumers"></a>Consumers</h3>
<div class="paragraph">
<p>In the case of a MessageConsumer, the bridge automatically gives 1000 credits to the sending peer when the consumer
handler is registered, and replenishes this credit automatically as messages are delivered to the handler. It is
possible to adjust the amount of credit given initially (the value must be at least 1) by adjusting the maximum
buffered message value before registering a handler, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">consumer.setMaxBufferedMessages(<span class="hljs-number">5</span>)
consumer.handler({ msg -&gt;
  <span class="hljs-comment">// ...handle received messages...</span>
})</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_connecting_using_ssl"><a class="anchor" href="#_connecting_using_ssl"></a>Connecting using SSL</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can also optionally supply <code><a href="../../apidocs/io/vertx/amqpbridge/AmqpBridgeOptions.html">AmqpBridgeOptions</a></code> when creating the bridge in order to
configure various options, the most typically used of which are around behaviour for SSL connections.</p>
</div>
<div class="paragraph">
<p>The following is an example of using configuration to create a bridge connecting to a server using SSL,
authenticating with a username and password, and supplying a PKCS12 based trust store to verify trust of the server
certificate:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy"><span class="hljs-keyword">def</span> bridgeOptions = [:]
bridgeOptions.ssl = <span class="hljs-literal">true</span>

<span class="hljs-keyword">def</span> trustOptions = [
<span class="hljs-symbol">  path:</span><span class="hljs-string">"path/to/pkcs12.truststore"</span>,
<span class="hljs-symbol">  password:</span><span class="hljs-string">"password"</span>
]
bridgeOptions.pfxTrustOptions = trustOptions

<span class="hljs-keyword">def</span> bridge = AmqpBridge.create(vertx, bridgeOptions)
bridge.start(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">5672</span>, <span class="hljs-string">"username"</span>, <span class="hljs-string">"password"</span>, { res -&gt;
  <span class="hljs-comment">// ..do things with the bridge..</span>
})</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following is an example of using configuration to create a bridge connecting to a server requiring SSL Client
Certificate Authentication, supplying both a PKCS12 based trust store to verify trust of the server certificate and
also a PKCS12 based key store containing an SSL key and certificate the server can use to verify the client:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy"><span class="hljs-keyword">def</span> bridgeOptions = [:]
bridgeOptions.ssl = <span class="hljs-literal">true</span>

<span class="hljs-keyword">def</span> trustOptions = [
<span class="hljs-symbol">  path:</span><span class="hljs-string">"path/to/pkcs12.truststore"</span>,
<span class="hljs-symbol">  password:</span><span class="hljs-string">"password"</span>
]
bridgeOptions.pfxTrustOptions = trustOptions

<span class="hljs-keyword">def</span> keyCertOptions = [
<span class="hljs-symbol">  path:</span><span class="hljs-string">"path/to/pkcs12.keystore"</span>,
<span class="hljs-symbol">  password:</span><span class="hljs-string">"password"</span>
]
bridgeOptions.pfxKeyCertOptions = keyCertOptions

<span class="hljs-keyword">def</span> bridge = AmqpBridge.create(vertx, bridgeOptions)
bridge.start(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">5672</span>, { res -&gt;
  <span class="hljs-comment">// ..do things with the bridge..</span>
})</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_sending_and_receiving_replies"><a class="anchor" href="#_sending_and_receiving_replies"></a>Sending and Receiving replies.</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Like many messaging protocols, AMQP includes support for a reply-to address to be set on each message sent so that
recipients can be told where to send any responses required. The vert.x <code><a href="../../apidocs/io/vertx/core/eventbus/Message.html">Message</a></code>
objects also support the concept of a reply address, though when using the Event Bus the sender doesn&#8217;t set it
explicitly, and it is instead populated implicitly if a message is sent with a reply <code><a href="../../apidocs/io/vertx/core/Handler.html">Handler</a></code>.
This section describes how the bridge handles sending and receiving AMQP messages with reply-to while using the
Vert.x producer, consumer, and message APIs implemented by the bridge.</p>
</div>
<div class="sect2">
<h3 id="_sent_messages_seeking_a_reply"><a class="anchor" href="#_sent_messages_seeking_a_reply"></a>Sent messages seeking a reply.</h3>
<div class="paragraph">
<p>There are two options when sending messages to which responses are required:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Populate the AMQP reply-to address of the outgoing message explicitly.</p>
</li>
<li>
<p>Provide a reply handler when sending to populate it implicitly.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>With the first option, you may explicitly populate the "reply_to" element of the message "properties" section, as
outlined in the <a href="#message_payload">message payload overview</a>. Here you would provide a string containing the name
of the AMQP address on the server to which recipients should direct their responses, typically a named queue to which
you have already established a consumer to receive the replies. This route may be necessary if you need to receive
multiple replies to a given sent AMQP message.</p>
</div>
<div class="paragraph">
<p>With the second option a reply <code><a href="../../apidocs/io/vertx/core/Handler.html">Handler</a></code> may also be given in addition to the message payload
when sending a message, to be registered such that it is invoked when a [single] response message is received for the
message being sent.</p>
</div>
<div class="paragraph">
<p>To facilitate this, upon startup the bridge internally creates a consumer from a server-named dynamic address, the
name of which it then uses as the reply-to address on any AMQP messages sent when a replyHandler was given. The
bridge also populates the <em>message-id</em> of the outgoing AMQP message, and uses this value to keep track of the reply
handler. Incoming messages on the internal 'reply consumer' have their <em>correlation-id</em> values inspected in order to
match them to the reply handler originally given, requiring that reply senders populate the <em>correlation-id</em> field
with the <em>message-id</em> of the original message.</p>
</div>
<div class="paragraph">
<p>The following shows the process for the second option:</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="../../images/producer-reply-handler.png" alt="producer reply handler">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The producer is used to send a message to an AMQP address, providing a reply handler.</p>
</li>
<li>
<p>The bridge send implementation populates the <em>reply-to</em> and <em>message-id</em> fields of the outgoing AMQP message,
records the handler, and sends the message to the server.</p>
</li>
<li>
<p>The receiving application (perhaps also a Vert.x AMQP bridge) consumes the message and sends
a reply to its <em>reply-to</em> address, setting its <em>correlation-id</em> field as the original messages <em>message-id</em>.</p>
</li>
<li>
<p>The server dispatches the reply message to the internal 'reply consumer' of the bridge.</p>
</li>
<li>
<p>The bridge processes the AMQP message, creating the Vert.x Message with JsonObject body, uses the <em>correlation-id</em>
value to match it with the reply handler, and then invokes the handler with the reply message.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The following is a basic example of sending a message and providing a reply-handler to process the response:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy"><span class="hljs-keyword">def</span> amqpMsgPayload = [:]
amqpMsgPayload.body = <span class="hljs-string">"myRequest"</span>

producer.send(amqpMsgPayload, { res -&gt;
  <span class="hljs-keyword">def</span> amqpReplyMessagePayload = res.result().body()
  <span class="hljs-comment">// ...do something with reply message...</span>
})</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_received_messages_seeking_a_reply"><a class="anchor" href="#_received_messages_seeking_a_reply"></a>Received messages seeking a reply.</h3>
<div class="paragraph">
<p>When a message arrives, its replyAddress may be inspected. If the AMQP message had its <em>reply-to</em> field populated,
then the address given will be returned from the Vert.x message replyAddress method. If no <em>reply-to</em> value was
present on the message, the value returned will be null.</p>
</div>
<div class="paragraph">
<p>There are two options when receiving messages to which responses are required:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Populate the AMQP reply-to address of an outgoing message sent explicitly using a producer.</p>
</li>
<li>
<p>Send a reply using the Message reply method.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>With the first option, you may explicitly populate the "reply_to" element of the message "properties" section, as
outlined in the <a href="#message_payload">message payload overview</a>, and send it explicitly using a producer established
to the address using the bridge.</p>
</div>
<div class="paragraph">
<p>With the second option, a reply message may be sent by calling the reply method on the Vert.x message
object. The reply method implementation ensures that the outgoing message <em>correlation-id</em> is populated appropriately
using the <em>message-id</em> of the original message, such that the response can be matched in the case the original
message was sent from a Vert.x AMQP bridge producer with a reply handler provided.</p>
</div>
<div class="paragraph">
<p>The following outlines the process for both routes, of receiving a message sent by an application (not shown), and
sending a reply:</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="../../images/consumer-reply.png" alt="consumer reply">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The server sends an AMQP message to the consumer, with a reply-to value set to another address.</p>
</li>
<li>
<p>The bridge processes the AMQP message, creating the Vert.x Message with JsonObject body. The Message replyAddress
is set to the reply-to value from the AMQP message.</p>
</li>
<li>
<p>The Message is passed to the consumer Handler, which processes it, inspecting the replyAddress and preparing to
send a response.</p>
</li>
<li>
<p>The handler chooses to either send a reply using an explicit producer, or call the reply method on the message
object.</p>
</li>
<li>
<p>The reply message arrives at the response address on the server, ready to be sent to a reply consumer for the
original sending application .</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The following is a basic example of sending a reply using the message reply method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">consumer.handler({ msg -&gt;
  <span class="hljs-comment">// ...do something with received message...then reply...</span>
  <span class="hljs-keyword">def</span> replyAddress = msg.replyAddress()
  <span class="hljs-keyword">if</span> (replyAddress != <span class="hljs-literal">null</span>) {
    <span class="hljs-keyword">def</span> amqpReplyMessagePayload = [:]
    amqpReplyMessagePayload.body = <span class="hljs-string">"myResponse"</span>

    msg.reply(amqpReplyMessagePayload)
  }
})</code></pre>
</div>
</div>
</div>
</div>
</div></div></div></div></div></div><footer><div class="container"><div class="footer-nav-section"><div class="footer-nav-list footer-logo"><a href="/"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAxMTI1LjYgMzE1LjIiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxzdHlsZT4uc3Qwe2ZpbGw6Izc4MmE5MX08L3N0eWxlPjxwYXRoIGQ9Ik0xMjAuOSAyMTQuMkwxOTAuNSAwaDUyLjNsLTk4LjUgMjczLjhIOTguMkwwIDBoNTIuMWw2OC44IDIxNC4yem0yOTEuMi02Mi42SDI5OS42djg0LjJINDMxdjM4SDI1MlYwaDE3Ny43djM4LjRIMjk5LjZWMTE0aDExMi41djM3LjZ6bTgzLjctMTEzLjJINTQ2YzE2LjUuMyAyOSA0LjQgMzcuMyAxMi40IDguMyA4IDEyLjUgMTkuNCAxMi41IDM0IDAgMTQtNC41IDI1LjEtMTMuNSAzMy4yLTkgOC4xLTIxLjYgMTIuMS0zNy42IDEyLjFoLTI3LjF2MjQuMmw4Ni4xIDExOS41aDUxdi0yLjRsLTc3LjItMTA2LjdjMjQuOS01LjUgNDMuMy0yMS43IDUyLjYtMzUuOSA4LjItMTIuNiAxMy4zLTI3LjcgMTMuMy00NiAwLTI2LjgtOC42LTQ3LjQtMjUuOC02MS41QzYwMC41IDcuMSA1NzYuMSAwIDU0NC41IDBoLTk2LjN2MjczLjhoNDcuNiIvPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDUyLjMgMTU3LjdsLTQxLjUgNjIuNyAyOS43IDUzLjRoODUuMXoiLz48Y2lyY2xlIGNsYXNzPSJzdDAiIGN4PSI4MjcuOSIgY3k9IjI3NC43IiByPSI0MC41Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTEwMzcgMGwtNDcuNiA3NC4yTDk0OSAwaC04NGw4NS4zIDEzNS44LTY3LjEgMTA1LjdjNS43IDkuNSA5LjEgMjAuNSA5LjIgMzIuNGg1MC4xTDExMjEuMyAwSDEwMzd6Ii8+PHBhdGggZD0iTTc2My41IDI3My44Yy4xLTkuOSAyLjUtMTkuMiA2LjYtMjcuNVYzOC40aDg1LjRWMEg2MzguMnYzOC40aDg0LjZ2MjM1LjRoNDAuN3oiLz48L3N2Zz4=" alt="Vert.x Logo"/></a></div><div class="footer-nav-list"><h5>Eclipse Vert.x</h5><ul class=""><li><a class="navbar-menu-item" href="/docs/">文档</a></li><li><a href="/download/">下载</a></li><li><a href="/blog/">博客</a></li><li><a href="/community/">社区</a></li><li><a href="/translation/">翻译团队</a></li><li><a href="https://github.com/eclipse-vertx/vert.x">GitHub</a></li><li><a href="https://github.com/vertx-china/vertx-web-site">翻译GitHub</a></li></ul></div><div class="footer-nav-list"><h5>资源</h5><ul class=""><li><a href="/faq/">答疑</a></li><li><a href="/channels/">联系渠道</a></li><li><a href="https://how-to.vertx.io/">操作指南</a></li><li><a href="https://start.vertx.io/">应用生成器</a></li></ul></div><div class="footer-nav-list"><h5>Eclipse</h5><ul class=""><li><a href="https://www.eclipse.org/">Eclipse 基金会</a></li><li><a href="https://www.eclipse.org/legal/privacy.php">隐私政策</a></li><li><a href="https://www.eclipse.org/legal/termsofuse.php">使用条款</a></li><li><a href="https://www.eclipse.org/legal/copyright.php">版权代理</a></li><li><a href="https://www.eclipse.org/legal/">法律资源</a></li></ul></div></div><div class="footer-copyright"><div class="footer-copyright-remarks">© <!-- -->2021<!-- --> Eclipse Vert.x<br/>Eclipse Vert.x 是开源的，并在<a href="https://creativecommons.org/licenses/by-sa/3.0/" target="_blank" rel="noopener noreferrer">Eclipse Public License 2.0</a>和<a href="https://www.apache.org/licenses/LICENSE-2.0.html" target="_blank" rel="noopener noreferrer">Apache License 2.0</a>协议下获得了双重许可。<br class="footer-copyright-break"/>网站由 <a href="https://michelkraemer.com" target="_blank" rel="noopener noreferrer">Michel Krämer</a> 设计。</div><div class="footer-copyright-eclipse-logo"><a href="https://www.eclipse.org/" target="_blank" rel="noopener noreferrer"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAyODEuMyA5MS4xIiB4bWw6c3BhY2U9InByZXNlcnZlIj48c3R5bGU+LnN0MHtmaWxsOiNmNzk0MjJ9LnN0MXtmaWxsOiMzZDNjM2J9PC9zdHlsZT48ZyBpZD0iTGF5ZXJfMV8xXyI+PHBhdGggY2xhc3M9InN0MCIgZD0iTTI2NS43IDg0TDI1NyA3M2gtMi43djE3LjdoMy4zdi0xMmw5LjMgMTJoMi4xVjczaC0zLjN2MTF6bS0zMi40LTguM2M0LjIgMCA1LjggMy4zIDUuOCA2LjNzLTEuNiA2LTUuOCA2LTUuNy0zLjEtNS44LTYgMS43LTYuMyA1LjgtNi4zem0wLTNjLTYuMSAwLTkuMSA0LjctOS4xIDkuMyAwIDQuNyAyLjkgOS4xIDkuMSA5LjFzOS00LjYgOS4xLTkuMi0zLTkuMi05LjEtOS4yem0tMjEuMiAxOFY3M2gtMy4zdjE3LjdoMy4zem0tMjMuNiAwaDMuM1Y3Nmg1LjZ2LTNoLTE0LjZ2M2g1LjZsLjEgMTQuN3ptLTE4LjktNi41SDE2M2wzLjMtNy42IDMuMyA3LjZ6bTIuOCA2LjVoMy42TDE2OC4yIDczaC0zLjZsLTggMTcuN2gzLjZsMS41LTMuM2g5LjNsMS40IDMuM3ptLTM4LTE0LjZoMy42YzMuOSAwIDUuNSAyLjggNS41IDUuNS4xIDIuOC0xLjUgNS44LTUuNSA1LjhoLTMuNlY3Ni4xem0zLjctMy4xaC02Ljl2MTcuN2g2LjljNi4yIDAgOC45LTQuNSA4LjktOXMtMi44LTguNy04LjktOC43em0tMjIuNCAxMUwxMDcgNzNoLTIuN3YxNy43aDMuM3YtMTJsOS4zIDEyaDIuMVY3M2gtMy4zdjExek04OC4yIDczdjEwLjJjMCAzLTEuNiA0LjktNC4zIDQuOXMtNC42LTEuNy00LjYtNC45VjczSDc2djEwLjFjMCA1LjMgMy42IDcuOSA3LjkgNy45IDQuNCAwIDcuNy0yLjcgNy43LTcuOVY3M2gtMy40em0tMzMgMi43YzQuMiAwIDUuOCAzLjMgNS44IDYuM3MtMS42IDYtNS44IDYtNS43LTMuMS01LjgtNiAxLjctNi4zIDUuOC02LjN6bTAtM2MtNi4xIDAtOS4xIDQuNy05LjEgOS4zczIuOSA5LjEgOS4xIDkuMSA5LTQuNiA5LjEtOS4yLTMtOS4yLTkuMS05LjJ6bS0yOS43IDE4di02LjVoOC45di0zLjFoLTguOXYtNC44aDkuNFY3M0gyMi4ydjE3LjZoMy4zeiIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yNjkuNCA1NC40aC0yMi4ydi04LjloMjEuNHYtNi45aC0yMS40di05LjFoMjIuMnYtNy4yaC0yOS42djM5LjVoMjkuNnYtNy40em0tNDAtMjUuNmMtMy02LjEtOS40LTcuOC0xNS41LTcuOC03LjMgMC0xNS4zIDMuNC0xNS4zIDExLjUgMCA4LjkgNy40IDExIDE1LjUgMTIgNS4yLjYgOS4xIDIuMSA5LjEgNS44IDAgNC4zLTQuNCA1LjktOS4xIDUuOXMtOS40LTEuOS0xMS4xLTYuM2wtNi4yIDMuMmMyLjkgNy4yIDkuMSA5LjcgMTcuMiA5LjcgOC44IDAgMTYuNi0zLjggMTYuNi0xMi42IDAtOS40LTcuNy0xMS42LTE1LjktMTIuNi00LjctLjYtOC44LTEuNS04LjgtNSAwLTIuOSAyLjYtNS4yIDguMi01LjIgNC4zIDAgOCAyLjIgOS40IDQuNGw1LjktM3pNMTc2IDIyLjJjLTYuMi0uMS0xMi40IDAtMTguNiAwdjM5LjVoNy40VjUwLjFIMTc2YzE5LjQgMCAxOS40LTI3LjkgMC0yNy45em0tMTEuMSA3LjFIMTc2YzkuNSAwIDkuNSAxNCAwIDE0aC0xMS4ybC4xLTE0em0tMTggMzIuNVYyMi4yaC03LjR2MzkuNWw3LjQuMXptLTQ0LTM5LjZ2MzkuNWgyNy43di02LjloLTIwLjNWMjIuMmgtNy40ek05MC43IDUxLjdjLTIuNyAyLjUtNi4yIDQtOS45IDQtOS44IDAtMTMuNS02LjgtMTMuNi0xMy40czQuMS0xMy43IDEzLjYtMTMuN2MzLjUtLjEgNyAxLjMgOS41IDMuN2w1LTQuOGMtMy44LTMuOS05LjEtNi0xNC41LTYtMTQuMyAwLTIxIDEwLjUtMjAuOSAyMC44czYuMyAyMC4zIDIwLjkgMjAuM2M1LjYuMSAxMS0yIDE1LTUuOWwtNS4xLTV6bS0zOSAyLjdIMjkuNXYtOC45aDIxLjR2LTYuOUgyOS41di05LjFoMjIuMnYtNy4ySDIyLjJ2MzkuNWgyOS42bC0uMS03LjR6Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTkuOCAxOC4yQzE4LjggNC4xIDM2LjktLjggNTIuMSA2bC0xLS43QzM1LjctNC42IDE1LjItLjEgNS4zIDE1LjNzLTUuNCAzNS45IDEwIDQ1LjhsMS4xLjZDMy44IDUwLjguOCAzMi4zIDkuOCAxOC4yeiIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yNzIuMiAyNi4xYzAtMi41IDIuMS00LjYgNC42LTQuNiAyLjUgMCA0LjYgMi4xIDQuNiA0LjYgMCAyLjUtMi4xIDQuNi00LjYgNC42LTIuNiAwLTQuNi0yLjEtNC42LTQuNnptOC42IDBjMC0yLjItMS44LTQuMS00LTQuMXMtNC4xIDEuOC00LjEgNC4xYzAgMi4yIDEuNyA0IDMuOSA0LjFoLjFjMi4zIDAgNC4xLTEuOCA0LjEtNC4xem0tNi0yLjVoMi4zYzEuMSAwIDEuOS41IDEuOSAxLjYgMCAuNy0uNCAxLjMtMS4xIDEuNWwxLjIgMS43aC0xLjRsLTEtMS41aC0uN3YxLjVoLTEuMWwtLjEtNC44em0yLjIgMi4zYy41IDAgLjgtLjMuOC0uN3MtLjMtLjctLjgtLjdoLTF2MS4zbDEgLjF6Ii8+PC9nPjwvc3ZnPg==" alt="Eclipse foundation Logo"/></a></div></div></div></footer></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"slug":"3.9.1/vertx-amqp-bridge/groovy","title":"Vert.x AMQP Bridge","fallbackGitHubStars":null,"toc":"\u003cdiv id=\"toc\" class=\"toc\"\u003e\n\u003cdiv id=\"toctitle\"\u003eTable of Contents\u003c/div\u003e\n\u003cul class=\"sectlevel1\"\u003e\n\u003cli\u003e\u003ca href=\"#_using_vert_x_amqp_bridge\"\u003eUsing Vert.x AMQP Bridge\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_getting_started\"\u003eGetting Started\u003c/a\u003e\n\u003cul class=\"sectlevel2\"\u003e\n\u003cli\u003e\u003ca href=\"#_sending_a_message\"\u003eSending a Message\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_receiving_a_message\"\u003eReceiving a Message\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#message_payload\"\u003eMessage Payload\u003c/a\u003e\n\u003cul class=\"sectlevel2\"\u003e\n\u003cli\u003e\u003ca href=\"#_overview\"\u003eOverview\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_application_properties\"\u003eApplication Properties\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_flow_control\"\u003eFlow Control\u003c/a\u003e\n\u003cul class=\"sectlevel2\"\u003e\n\u003cli\u003e\u003ca href=\"#_producers\"\u003eProducers\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_consumers\"\u003eConsumers\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_connecting_using_ssl\"\u003eConnecting using SSL\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_sending_and_receiving_replies\"\u003eSending and Receiving replies.\u003c/a\u003e\n\u003cul class=\"sectlevel2\"\u003e\n\u003cli\u003e\u003ca href=\"#_sent_messages_seeking_a_reply\"\u003eSent messages seeking a reply.\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_received_messages_seeking_a_reply\"\u003eReceived messages seeking a reply.\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e","contents":"\u003ch1\u003eVert.x AMQP Bridge\u003c/h1\u003e\n\n\u003cdiv id=\"preamble\"\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThis component provides AMQP 1.0 producer and consumer support via a bridging layer implementing the Vert.x event bus\nMessageProducer and MessageConsumer APIs over the top of \u003ca href=\"https://github.com/vert-x3/vertx-proton/\"\u003evertx-proton\u003c/a\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"admonitionblock warning\"\u003e\n\u003ctable\u003e\n\u003ctr\u003e\n\u003ctd class=\"icon\"\u003e\n\u003cdiv class=\"title\"\u003e警告\u003c/div\u003e\n\u003c/td\u003e\n\u003ctd class=\"content\"\u003e\nThis component will be removed in Vert.x 4, instead you should use \u003ca href=\"https://vertx.io/docs/vertx-amqp-client/java/\"\u003eVert.x AMQP Client\u003c/a\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_using_vert_x_amqp_bridge\"\u003e\u003ca class=\"anchor\" href=\"#_using_vert_x_amqp_bridge\"\u003e\u003c/a\u003eUsing Vert.x AMQP Bridge\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eTo use Vert.x AMQP Bridge, add the following dependency to the \u003cem\u003edependencies\u003c/em\u003e section of your build descriptor:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eMaven (in your \u003ccode\u003epom.xml\u003c/code\u003e):\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-xml\" data-lang=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\n \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003eio.vertx\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003evertx-amqp-bridge\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e3.9.1\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eGradle (in your \u003ccode\u003ebuild.gradle\u003c/code\u003e file):\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-groovy\" data-lang=\"groovy\"\u003ecompile io.\u003cspan class=\"hljs-string\"\u003evertx:\u003c/span\u003evertx-amqp-\u003cspan class=\"hljs-string\"\u003ebridge:\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e3.9\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.1\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_getting_started\"\u003e\u003ca class=\"anchor\" href=\"#_getting_started\"\u003e\u003c/a\u003eGetting Started\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_sending_a_message\"\u003e\u003ca class=\"anchor\" href=\"#_sending_a_message\"\u003e\u003c/a\u003eSending a Message\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eHere is a simple example of creating a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/eventbus/MessageProducer.html\"\u003eMessageProducer\u003c/a\u003e\u003c/code\u003e and sending a message with it.\nFirst, an \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/amqpbridge/AmqpBridge.html\"\u003eAmqpBridge\u003c/a\u003e\u003c/code\u003e is created and started to establish the underlying AMQP connection,\nthen when this is complete the producer is created and a message sent using it. You can optionally supply a username\nand password when starting the bridge, as well as supplying \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/amqpbridge/AmqpBridgeOptions.html\"\u003eAmqpBridgeOptions\u003c/a\u003e\u003c/code\u003e in order\nto configure various options such as for using SSL connections.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-groovy\" data-lang=\"groovy\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e bridge = AmqpBridge.create(vertx)\n\u003cspan class=\"hljs-comment\"\u003e// Start the bridge, then use the event loop thread to process things thereafter.\u003c/span\u003e\nbridge.start(\u003cspan class=\"hljs-string\"\u003e\"localhost\"\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e5672\u003c/span\u003e, { res -\u0026gt;\n  \u003cspan class=\"hljs-comment\"\u003e// Set up a producer using the bridge, send a message with it.\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e producer = bridge.createProducer(\u003cspan class=\"hljs-string\"\u003e\"myAmqpAddress\"\u003c/span\u003e)\n\n  \u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e amqpMsgPayload = [:]\n  amqpMsgPayload.body = \u003cspan class=\"hljs-string\"\u003e\"myStringContent\"\u003c/span\u003e\n\n  producer.send(amqpMsgPayload)\n})\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_receiving_a_message\"\u003e\u003ca class=\"anchor\" href=\"#_receiving_a_message\"\u003e\u003c/a\u003eReceiving a Message\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eHere is a simple example of creating a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/eventbus/MessageConsumer.html\"\u003eMessageConsumer\u003c/a\u003e\u003c/code\u003e and registering a handler with it.\nFirst, an \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/amqpbridge/AmqpBridge.html\"\u003eAmqpBridge\u003c/a\u003e\u003c/code\u003e is created and started to establish the underlying AMQP connection,\nthen when this is complete the consumer is created and a handler registered that prints the body of incoming AMQP\nmessages.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-groovy\" data-lang=\"groovy\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e bridge = AmqpBridge.create(vertx)\n\u003cspan class=\"hljs-comment\"\u003e// Start the bridge, then use the event loop thread to process things thereafter.\u003c/span\u003e\nbridge.start(\u003cspan class=\"hljs-string\"\u003e\"localhost\"\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e5672\u003c/span\u003e, { res -\u0026gt;\n  \u003cspan class=\"hljs-comment\"\u003e// Set up a consumer using the bridge, register a handler for it.\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e consumer = bridge.createConsumer(\u003cspan class=\"hljs-string\"\u003e\"myAmqpAddress\"\u003c/span\u003e)\n  consumer.handler({ vertxMsg -\u0026gt;\n    \u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e amqpMsgPayload = vertxMsg.body()\n    \u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e amqpBody = amqpMsgPayload.body\n\n    println(\u003cspan class=\"hljs-string\"\u003e\"Received a message with body: ${amqpBody}\"\u003c/span\u003e)\n  })\n})\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eReceipt of the AMQP message is accepted automatically as soon as the consumer\u0026#8217;s handler returns upon delivering the\nmessage to the application.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"message_payload\"\u003e\u003ca class=\"anchor\" href=\"#message_payload\"\u003e\u003c/a\u003eMessage Payload\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_overview\"\u003e\u003ca class=\"anchor\" href=\"#_overview\"\u003e\u003c/a\u003eOverview\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe message payload is passed as a JsonObject with elements representing various sections of the\n\u003ca href=\"http://docs.oasis-open.org/amqp/core/v1.0/os/amqp-core-messaging-v1.0-os.html#section-message-format\"\u003eAMQP\nmessage\u003c/a\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe top-level elements supported are:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e\u003cstrong\u003ebody\u003c/strong\u003e: The content for the body section of the AMQP message.\n\u003cstrong\u003ebody_type\u003c/strong\u003e: An optional String used to indicate whether the \"body\" element represents an AmqpValue (default), Data, or AmqpSequence section. The values used are \"value\", \"data\", and \"sequence\" respectively.\n\u003cstrong\u003eheader\u003c/strong\u003e: An optional  JsonObject representing the elements of the message Header section. Expanded below.\n\u003cstrong\u003eproperties\u003c/strong\u003e: An optional JsonObject representing the elements of the message Properties section. Expanded below.\n\u003cstrong\u003eapplication_properties\u003c/strong\u003e: An optional JsonObject containing any application defined properties(/headers).\n\u003cstrong\u003emessage_annotations\u003c/strong\u003e: An optional JsonObject representing any message annotations.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe elements of the optional \"header\" sub-element are:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e\u003cstrong\u003edurable\u003c/strong\u003e: optional boolean indicating whether the message is durable (default false).\n\u003cstrong\u003epriority\u003c/strong\u003e: optional short indicating the message priority (default 4).\n\u003cstrong\u003ettl\u003c/strong\u003e: optional long indicating ttl in milliseconds (no default). See also 'properties' absolute expiry time.\n\u003cstrong\u003efirst_acquirer\u003c/strong\u003e: boolean indicating if this is the first acquirer of the message (default false)\n\u003cstrong\u003edelivery_count\u003c/strong\u003e: long indicating the number of previous \u003cem\u003efailed\u003c/em\u003e delivery attempts for message.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe elements of the optional \"properties\" sub-element are:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e\u003cstrong\u003eto\u003c/strong\u003e: optional string with address message is being sent to (no default).\n\u003cstrong\u003ereply_to\u003c/strong\u003e: optional string with address for replies (no default). Set automatically when sent with reply handler.\n\u003cstrong\u003emessage_id\u003c/strong\u003e: optional string with message id (no default). Set automatically when sending with reply handler.\n\u003cstrong\u003ecorrelation_id\u003c/strong\u003e: optional string with correlation id (no default). Set automatically when implicit reply is sent.\n\u003cstrong\u003esubject\u003c/strong\u003e: optional string with message subject (no default).\n\u003cstrong\u003egroup_id\u003c/strong\u003e: optional string with message group id (no default).\n\u003cstrong\u003egroup_sequence\u003c/strong\u003e: optional long with message group sequence (no default).\n\u003cstrong\u003ereply_to_group_id\u003c/strong\u003e: optional string with message reply to group id (no default).\n\u003cstrong\u003econtent_type\u003c/strong\u003e: optional string with message content type (no default). Only for use with Data body sections.\n\u003cstrong\u003econtent_encoding\u003c/strong\u003e: optional string with message content encoding (no default).\n\u003cstrong\u003ecreation_time\u003c/strong\u003e: optional long with message creation time in milliseconds since the unix epoch (no default).\n\u003cstrong\u003eabsolute_expiry_time\u003c/strong\u003e: optional long with absolute expiry time as milliseconds since the unix epoch (no default).\n\u003cstrong\u003euser_id\u003c/strong\u003e: optional string with the id of the user sending the message (no default).\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_application_properties\"\u003e\u003ca class=\"anchor\" href=\"#_application_properties\"\u003e\u003c/a\u003eApplication Properties\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eTo send a message with application properties, the \"application_properties\" element is added to the payload,\ncontaining a JsonObject whose contents represent the application property entries, which have string keys and a\nobject representing a simple value such as String, Boolean, Integer, etc. For example, adding a property to a sent\nmessage could look something like:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-groovy\" data-lang=\"groovy\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e applicationProperties = [:]\napplicationProperties.name = \u003cspan class=\"hljs-string\"\u003e\"value\"\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e amqpMsgPayload = [:]\namqpMsgPayload.application_properties = applicationProperties\n\nproducer.send(amqpMsgPayload)\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eWhen receiving a message with application properties, the \"application_properties\" element is added to the JsonObject\npayload returned, containing a JsonObject whose contents represent the application property entries. For example,\nretrieving an application-property from a received message might look like:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-groovy\" data-lang=\"groovy\"\u003e\u003cspan class=\"hljs-comment\"\u003e// Check the application properties section was present before use, it may not be\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e appProps = amqpMsgPayload.application_properties\n\u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (appProps != \u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e propValue = appProps.propertyName\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_flow_control\"\u003e\u003ca class=\"anchor\" href=\"#_flow_control\"\u003e\u003c/a\u003eFlow Control\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eMessage transfer between peers, such as clients and servers, is governed by credit in AMQP 1.0, with receiving peers\ngranting sending peers a number of credits to allow them to send messages. As each message is sent a unit of credit\nis used up, with the receiving peer needing to replenish the senders credit over time in order for message delivery\nto progress. This allows for recipients to flow control senders by governing the amount of outstanding credit\navailable.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_producers\"\u003e\u003ca class=\"anchor\" href=\"#_producers\"\u003e\u003c/a\u003eProducers\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eWhile a MessageProducer will buffer outgoing messages if there are insufficient credits to send them all\nimmediately, and then send them once credit is granted, it is typically more desirable for the application to work\nin tandem with the producer and attempt to send only what it knows can actually currently be sent.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThis is possible by inspecting whether the producer write queue is full, i.e it currently has no credit to send:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-groovy\" data-lang=\"groovy\"\u003eproducer.writeQueueFull()\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThis check can be used in concert with a handler that can be registered to receive callbacks whenever the producer\nreceives more credit and is able to send messages immediately rather than buffer them:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-groovy\" data-lang=\"groovy\"\u003eproducer.drainHandler({ v -\u0026gt;\n  \u003cspan class=\"hljs-comment\"\u003e// ...do stuff and send...\u003c/span\u003e\n})\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_consumers\"\u003e\u003ca class=\"anchor\" href=\"#_consumers\"\u003e\u003c/a\u003eConsumers\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIn the case of a MessageConsumer, the bridge automatically gives 1000 credits to the sending peer when the consumer\nhandler is registered, and replenishes this credit automatically as messages are delivered to the handler. It is\npossible to adjust the amount of credit given initially (the value must be at least 1) by adjusting the maximum\nbuffered message value before registering a handler, for example:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-groovy\" data-lang=\"groovy\"\u003econsumer.setMaxBufferedMessages(\u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e)\nconsumer.handler({ msg -\u0026gt;\n  \u003cspan class=\"hljs-comment\"\u003e// ...handle received messages...\u003c/span\u003e\n})\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_connecting_using_ssl\"\u003e\u003ca class=\"anchor\" href=\"#_connecting_using_ssl\"\u003e\u003c/a\u003eConnecting using SSL\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eYou can also optionally supply \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/amqpbridge/AmqpBridgeOptions.html\"\u003eAmqpBridgeOptions\u003c/a\u003e\u003c/code\u003e when creating the bridge in order to\nconfigure various options, the most typically used of which are around behaviour for SSL connections.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe following is an example of using configuration to create a bridge connecting to a server using SSL,\nauthenticating with a username and password, and supplying a PKCS12 based trust store to verify trust of the server\ncertificate:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-groovy\" data-lang=\"groovy\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e bridgeOptions = [:]\nbridgeOptions.ssl = \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e trustOptions = [\n\u003cspan class=\"hljs-symbol\"\u003e  path:\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e\"path/to/pkcs12.truststore\"\u003c/span\u003e,\n\u003cspan class=\"hljs-symbol\"\u003e  password:\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e\"password\"\u003c/span\u003e\n]\nbridgeOptions.pfxTrustOptions = trustOptions\n\n\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e bridge = AmqpBridge.create(vertx, bridgeOptions)\nbridge.start(\u003cspan class=\"hljs-string\"\u003e\"localhost\"\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e5672\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"username\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"password\"\u003c/span\u003e, { res -\u0026gt;\n  \u003cspan class=\"hljs-comment\"\u003e// ..do things with the bridge..\u003c/span\u003e\n})\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe following is an example of using configuration to create a bridge connecting to a server requiring SSL Client\nCertificate Authentication, supplying both a PKCS12 based trust store to verify trust of the server certificate and\nalso a PKCS12 based key store containing an SSL key and certificate the server can use to verify the client:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-groovy\" data-lang=\"groovy\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e bridgeOptions = [:]\nbridgeOptions.ssl = \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e trustOptions = [\n\u003cspan class=\"hljs-symbol\"\u003e  path:\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e\"path/to/pkcs12.truststore\"\u003c/span\u003e,\n\u003cspan class=\"hljs-symbol\"\u003e  password:\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e\"password\"\u003c/span\u003e\n]\nbridgeOptions.pfxTrustOptions = trustOptions\n\n\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e keyCertOptions = [\n\u003cspan class=\"hljs-symbol\"\u003e  path:\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e\"path/to/pkcs12.keystore\"\u003c/span\u003e,\n\u003cspan class=\"hljs-symbol\"\u003e  password:\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e\"password\"\u003c/span\u003e\n]\nbridgeOptions.pfxKeyCertOptions = keyCertOptions\n\n\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e bridge = AmqpBridge.create(vertx, bridgeOptions)\nbridge.start(\u003cspan class=\"hljs-string\"\u003e\"localhost\"\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e5672\u003c/span\u003e, { res -\u0026gt;\n  \u003cspan class=\"hljs-comment\"\u003e// ..do things with the bridge..\u003c/span\u003e\n})\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_sending_and_receiving_replies\"\u003e\u003ca class=\"anchor\" href=\"#_sending_and_receiving_replies\"\u003e\u003c/a\u003eSending and Receiving replies.\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eLike many messaging protocols, AMQP includes support for a reply-to address to be set on each message sent so that\nrecipients can be told where to send any responses required. The vert.x \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/eventbus/Message.html\"\u003eMessage\u003c/a\u003e\u003c/code\u003e\nobjects also support the concept of a reply address, though when using the Event Bus the sender doesn\u0026#8217;t set it\nexplicitly, and it is instead populated implicitly if a message is sent with a reply \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/Handler.html\"\u003eHandler\u003c/a\u003e\u003c/code\u003e.\nThis section describes how the bridge handles sending and receiving AMQP messages with reply-to while using the\nVert.x producer, consumer, and message APIs implemented by the bridge.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_sent_messages_seeking_a_reply\"\u003e\u003ca class=\"anchor\" href=\"#_sent_messages_seeking_a_reply\"\u003e\u003c/a\u003eSent messages seeking a reply.\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThere are two options when sending messages to which responses are required:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003ePopulate the AMQP reply-to address of the outgoing message explicitly.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eProvide a reply handler when sending to populate it implicitly.\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eWith the first option, you may explicitly populate the \"reply_to\" element of the message \"properties\" section, as\noutlined in the \u003ca href=\"#message_payload\"\u003emessage payload overview\u003c/a\u003e. Here you would provide a string containing the name\nof the AMQP address on the server to which recipients should direct their responses, typically a named queue to which\nyou have already established a consumer to receive the replies. This route may be necessary if you need to receive\nmultiple replies to a given sent AMQP message.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eWith the second option a reply \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/Handler.html\"\u003eHandler\u003c/a\u003e\u003c/code\u003e may also be given in addition to the message payload\nwhen sending a message, to be registered such that it is invoked when a [single] response message is received for the\nmessage being sent.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eTo facilitate this, upon startup the bridge internally creates a consumer from a server-named dynamic address, the\nname of which it then uses as the reply-to address on any AMQP messages sent when a replyHandler was given. The\nbridge also populates the \u003cem\u003emessage-id\u003c/em\u003e of the outgoing AMQP message, and uses this value to keep track of the reply\nhandler. Incoming messages on the internal 'reply consumer' have their \u003cem\u003ecorrelation-id\u003c/em\u003e values inspected in order to\nmatch them to the reply handler originally given, requiring that reply senders populate the \u003cem\u003ecorrelation-id\u003c/em\u003e field\nwith the \u003cem\u003emessage-id\u003c/em\u003e of the original message.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe following shows the process for the second option:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"imageblock text-center\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cimg src=\"../../images/producer-reply-handler.png\" alt=\"producer reply handler\"\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"olist arabic\"\u003e\n\u003col class=\"arabic\"\u003e\n\u003cli\u003e\n\u003cp\u003eThe producer is used to send a message to an AMQP address, providing a reply handler.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eThe bridge send implementation populates the \u003cem\u003ereply-to\u003c/em\u003e and \u003cem\u003emessage-id\u003c/em\u003e fields of the outgoing AMQP message,\nrecords the handler, and sends the message to the server.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eThe receiving application (perhaps also a Vert.x AMQP bridge) consumes the message and sends\na reply to its \u003cem\u003ereply-to\u003c/em\u003e address, setting its \u003cem\u003ecorrelation-id\u003c/em\u003e field as the original messages \u003cem\u003emessage-id\u003c/em\u003e.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eThe server dispatches the reply message to the internal 'reply consumer' of the bridge.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eThe bridge processes the AMQP message, creating the Vert.x Message with JsonObject body, uses the \u003cem\u003ecorrelation-id\u003c/em\u003e\nvalue to match it with the reply handler, and then invokes the handler with the reply message.\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe following is a basic example of sending a message and providing a reply-handler to process the response:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-groovy\" data-lang=\"groovy\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e amqpMsgPayload = [:]\namqpMsgPayload.body = \u003cspan class=\"hljs-string\"\u003e\"myRequest\"\u003c/span\u003e\n\nproducer.send(amqpMsgPayload, { res -\u0026gt;\n  \u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e amqpReplyMessagePayload = res.result().body()\n  \u003cspan class=\"hljs-comment\"\u003e// ...do something with reply message...\u003c/span\u003e\n})\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_received_messages_seeking_a_reply\"\u003e\u003ca class=\"anchor\" href=\"#_received_messages_seeking_a_reply\"\u003e\u003c/a\u003eReceived messages seeking a reply.\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eWhen a message arrives, its replyAddress may be inspected. If the AMQP message had its \u003cem\u003ereply-to\u003c/em\u003e field populated,\nthen the address given will be returned from the Vert.x message replyAddress method. If no \u003cem\u003ereply-to\u003c/em\u003e value was\npresent on the message, the value returned will be null.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThere are two options when receiving messages to which responses are required:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003ePopulate the AMQP reply-to address of an outgoing message sent explicitly using a producer.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eSend a reply using the Message reply method.\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eWith the first option, you may explicitly populate the \"reply_to\" element of the message \"properties\" section, as\noutlined in the \u003ca href=\"#message_payload\"\u003emessage payload overview\u003c/a\u003e, and send it explicitly using a producer established\nto the address using the bridge.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eWith the second option, a reply message may be sent by calling the reply method on the Vert.x message\nobject. The reply method implementation ensures that the outgoing message \u003cem\u003ecorrelation-id\u003c/em\u003e is populated appropriately\nusing the \u003cem\u003emessage-id\u003c/em\u003e of the original message, such that the response can be matched in the case the original\nmessage was sent from a Vert.x AMQP bridge producer with a reply handler provided.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe following outlines the process for both routes, of receiving a message sent by an application (not shown), and\nsending a reply:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"imageblock text-center\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cimg src=\"../../images/consumer-reply.png\" alt=\"consumer reply\"\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"olist arabic\"\u003e\n\u003col class=\"arabic\"\u003e\n\u003cli\u003e\n\u003cp\u003eThe server sends an AMQP message to the consumer, with a reply-to value set to another address.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eThe bridge processes the AMQP message, creating the Vert.x Message with JsonObject body. The Message replyAddress\nis set to the reply-to value from the AMQP message.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eThe Message is passed to the consumer Handler, which processes it, inspecting the replyAddress and preparing to\nsend a response.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eThe handler chooses to either send a reply using an explicit producer, or call the reply method on the message\nobject.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eThe reply message arrives at the response address on the server, ready to be sent to a reply consumer for the\noriginal sending application .\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe following is a basic example of sending a reply using the message reply method:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-groovy\" data-lang=\"groovy\"\u003econsumer.handler({ msg -\u0026gt;\n  \u003cspan class=\"hljs-comment\"\u003e// ...do something with received message...then reply...\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e replyAddress = msg.replyAddress()\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (replyAddress != \u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e) {\n    \u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e amqpReplyMessagePayload = [:]\n    amqpReplyMessagePayload.body = \u003cspan class=\"hljs-string\"\u003e\"myResponse\"\u003c/span\u003e\n\n    msg.reply(amqpReplyMessagePayload)\n  }\n})\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e","version":"3.9.1"},"__N_SSG":true},"page":"/docs/[[...slug]]","query":{"slug":["3.9.1","vertx-amqp-bridge","groovy"]},"buildId":"mKMZ9ChAiyo74OgIJhaWF","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-9a5c89434732593ca2fd.js"></script><script src="/_next/static/chunks/main-b6e20584df76f29b6f35.js" async=""></script><script src="/_next/static/chunks/webpack-d7b2fb72fb7257504a38.js" async=""></script><script src="/_next/static/chunks/framework.fcef98db13e2318579fb.js" async=""></script><script src="/_next/static/chunks/commons.5b8771ac6e8a338f82f1.js" async=""></script><script src="/_next/static/chunks/styles.7064a0f84b2a7c13404a.js" async=""></script><script src="/_next/static/chunks/pages/_app-3dbbc9c041333077c167.js" async=""></script><script src="/_next/static/chunks/5df0631eea625b022d3730b3f1bf573e1b8deb37.dd672925a2e24782fa8b.js" async=""></script><script src="/_next/static/chunks/31acfd8439b7c9eee4abe9f59c7500d6c943ee0d.2fd31bea904cf90ee764.js" async=""></script><script src="/_next/static/chunks/pages/docs/%5B%5B...slug%5D%5D-a029dc5d19ec928c6924.js" async=""></script><script src="/_next/static/mKMZ9ChAiyo74OgIJhaWF/_buildManifest.js" async=""></script><script src="/_next/static/mKMZ9ChAiyo74OgIJhaWF/_ssgManifest.js" async=""></script></body></html>