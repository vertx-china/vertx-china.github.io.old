<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="description" content="Vert.x | Reactive applications on the JVM"/><meta name="robots" content="index,follow"/><link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet"/><link href="https://fonts.googleapis.com/css?family=Roboto+Condensed:300,400" rel="stylesheet"/><link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400&amp;display=swap" rel="stylesheet"/><link rel="shortcut icon" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="48x48" href="/favicons/favicon-48x48.png"/><link rel="alternate" type="application/rss+xml" href="/feed/rss.xml"/><link rel="alternate" type="application/atom+xml" href="/feed/atom.xml"/><link rel="alternate" type="application/json" href="/feed/feed.json"/><title>MongoDB 客户端 | Eclipse Vert.x</title><link rel="preload" href="https://api.github.com/repos/vert-x3/vertx-mongo-client" as="fetch" crossorigin="anonymous"/><meta name="next-head-count" content="17"/><link rel="preload" href="/_next/static/css/styles.f20dca63.chunk.css" as="style"/><link rel="stylesheet" href="/_next/static/css/styles.f20dca63.chunk.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-b6e20584df76f29b6f35.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-d7b2fb72fb7257504a38.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.fcef98db13e2318579fb.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.5b8771ac6e8a338f82f1.js" as="script"/><link rel="preload" href="/_next/static/chunks/styles.7064a0f84b2a7c13404a.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-3dbbc9c041333077c167.js" as="script"/><link rel="preload" href="/_next/static/chunks/5df0631eea625b022d3730b3f1bf573e1b8deb37.3b9874ba65db13e7d868.js" as="script"/><link rel="preload" href="/_next/static/chunks/31acfd8439b7c9eee4abe9f59c7500d6c943ee0d.202da639f2e299a63b4b.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/docs/%5B%5B...slug%5D%5D-f144718c033f8d0b431b.js" as="script"/></head><body><div id="__next"><main class="page docs"><header><div class="navbar"><div class="navbar-content container"><div class="navbar-logo"><a href="/"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAxMTI1LjYgMzE1LjIiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxzdHlsZT4uc3Qwe2ZpbGw6Izc4MmE5MX08L3N0eWxlPjxwYXRoIGQ9Ik0xMjAuOSAyMTQuMkwxOTAuNSAwaDUyLjNsLTk4LjUgMjczLjhIOTguMkwwIDBoNTIuMWw2OC44IDIxNC4yem0yOTEuMi02Mi42SDI5OS42djg0LjJINDMxdjM4SDI1MlYwaDE3Ny43djM4LjRIMjk5LjZWMTE0aDExMi41djM3LjZ6bTgzLjctMTEzLjJINTQ2YzE2LjUuMyAyOSA0LjQgMzcuMyAxMi40IDguMyA4IDEyLjUgMTkuNCAxMi41IDM0IDAgMTQtNC41IDI1LjEtMTMuNSAzMy4yLTkgOC4xLTIxLjYgMTIuMS0zNy42IDEyLjFoLTI3LjF2MjQuMmw4Ni4xIDExOS41aDUxdi0yLjRsLTc3LjItMTA2LjdjMjQuOS01LjUgNDMuMy0yMS43IDUyLjYtMzUuOSA4LjItMTIuNiAxMy4zLTI3LjcgMTMuMy00NiAwLTI2LjgtOC42LTQ3LjQtMjUuOC02MS41QzYwMC41IDcuMSA1NzYuMSAwIDU0NC41IDBoLTk2LjN2MjczLjhoNDcuNiIvPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDUyLjMgMTU3LjdsLTQxLjUgNjIuNyAyOS43IDUzLjRoODUuMXoiLz48Y2lyY2xlIGNsYXNzPSJzdDAiIGN4PSI4MjcuOSIgY3k9IjI3NC43IiByPSI0MC41Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTEwMzcgMGwtNDcuNiA3NC4yTDk0OSAwaC04NGw4NS4zIDEzNS44LTY3LjEgMTA1LjdjNS43IDkuNSA5LjEgMjAuNSA5LjIgMzIuNGg1MC4xTDExMjEuMyAwSDEwMzd6Ii8+PHBhdGggZD0iTTc2My41IDI3My44Yy4xLTkuOSAyLjUtMTkuMiA2LjYtMjcuNVYzOC40aDg1LjRWMEg2MzguMnYzOC40aDg0LjZ2MjM1LjRoNDAuN3oiLz48L3N2Zz4=" alt="Vert.x Logo"/></a></div><div class="navbar-collapse-button"><span></span><span></span><span></span></div><div class="navbar-right"><div class="navbar-menu"><span class="navbar-menu-item with-drop-down"><div class="dropdown"><a class="dropdown-title">开始<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="dropdown-menu"><a href="/introduction-to-vertx-and-reactive/"><li class="dropdown-item">简介</li></a><a href="/get-started/"><li class="dropdown-item">开始</li></a><a href="https://start.vertx.io/" target="_blank" rel="noreferrer"><li class="dropdown-item">App generator <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a></ul></div></span><a class="navbar-menu-item" href="/docs/">文档</a><span class="navbar-menu-item with-drop-down"><div class="dropdown"><a class="dropdown-title">资源<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="dropdown-menu"><a href="/faq/"><li class="dropdown-item">答疑</li></a><a href="/channels/"><li class="dropdown-item">Channels</li></a><a href="https://how-to.vertx.io/" target="_blank" rel="noreferrer"><li class="dropdown-item">How-To’s <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a><a href="https://github.com/vert-x3/vertx-eventbus-bridge-clients" target="_blank" rel="noreferrer"><li class="dropdown-item">EventBus Bridge Clients <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a></ul></div></span><a class="navbar-menu-item" href="/blog/">博客</a><a class="navbar-menu-item" href="/community/">社区</a><a class="navbar-menu-item" href="/translation/">翻译团队</a></div><div class="navbar-social"><a href="https://github.com/vert-x3/vertx-awesome" class="navbar-social-link" title="Awesome Vert.x" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="List of awesome Vert.x projects"><title>Awesome Vert.x</title><path d="M24 11.438l-6.154-5.645-.865.944 5.128 4.7H1.895l5.128-4.705-.865-.943-6.154 5.649H0v3.72c0 1.683 1.62 3.053 3.61 3.053h3.795c1.99 0 3.61-1.37 3.61-3.051v-2.446h1.97v2.446c0 1.68 1.62 3.051 3.61 3.051h3.794c1.99 0 3.61-1.37 3.61-3.051v-3.721z"></path></svg></a><a href="https://stackoverflow.com/questions/tagged/vert.x" class="navbar-social-link" title="Stack Overflow" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Stack Overflow questions related to Vert.x"><title>Stack Overflow</title><path d="M18.986 21.865v-6.404h2.134V24H1.844v-8.539h2.13v6.404h15.012zM6.111 19.731H16.85v-2.137H6.111v2.137zm.259-4.852l10.48 2.189.451-2.07-10.478-2.187-.453 2.068zm1.359-5.056l9.705 4.53.903-1.95-9.706-4.53-.902 1.936v.014zm2.715-4.785l8.217 6.855 1.359-1.62-8.216-6.853-1.35 1.617-.01.001zM15.751 0l-1.746 1.294 6.405 8.604 1.746-1.294L15.749 0h.002z"></path></svg></a><a href="https://www.youtube.com/channel/UCGN6L3tRhs92Uer3c6VxOSA" class="navbar-social-link" title="YouTube" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="YouTube channel of Vert.x"><title>YouTube</title><path d="M23.499 6.203a3.008 3.008 0 00-2.089-2.089c-1.87-.501-9.4-.501-9.4-.501s-7.509-.01-9.399.501a3.008 3.008 0 00-2.088 2.09A31.258 31.26 0 000 12.01a31.258 31.26 0 00.523 5.785 3.008 3.008 0 002.088 2.089c1.869.502 9.4.502 9.4.502s7.508 0 9.399-.502a3.008 3.008 0 002.089-2.09 31.258 31.26 0 00.5-5.784 31.258 31.26 0 00-.5-5.808zm-13.891 9.4V8.407l6.266 3.604z"></path></svg></a><a href="https://discord.gg/KzEMwP2" class="navbar-social-link" title="Discord" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Eclipse Vert.x channel on Discord"><title>Discord</title><path d="M20.222 0c1.406 0 2.54 1.137 2.607 2.475V24l-2.677-2.273-1.47-1.338-1.604-1.398.67 2.205H3.71c-1.402 0-2.54-1.065-2.54-2.476V2.48C1.17 1.142 2.31.003 3.715.003h16.5L20.222 0zm-6.118 5.683h-.03l-.202.2c2.073.6 3.076 1.537 3.076 1.537-1.336-.668-2.54-1.002-3.744-1.137-.87-.135-1.74-.064-2.475 0h-.2c-.47 0-1.47.2-2.81.735-.467.203-.735.336-.735.336s1.002-1.002 3.21-1.537l-.135-.135s-1.672-.064-3.477 1.27c0 0-1.805 3.144-1.805 7.02 0 0 1 1.74 3.743 1.806 0 0 .4-.533.805-1.002-1.54-.468-2.14-1.404-2.14-1.404s.134.066.335.2h.06c.03 0 .044.015.06.03v.006c.016.016.03.03.06.03.33.136.66.27.93.4.466.202 1.065.403 1.8.536.93.135 1.996.2 3.21 0 .6-.135 1.2-.267 1.8-.535.39-.2.87-.4 1.397-.737 0 0-.6.936-2.205 1.404.33.466.795 1 .795 1 2.744-.06 3.81-1.8 3.87-1.726 0-3.87-1.815-7.02-1.815-7.02-1.635-1.214-3.165-1.26-3.435-1.26l.056-.02zm.168 4.413c.703 0 1.27.6 1.27 1.335 0 .74-.57 1.34-1.27 1.34-.7 0-1.27-.6-1.27-1.334.002-.74.573-1.338 1.27-1.338zm-4.543 0c.7 0 1.266.6 1.266 1.335 0 .74-.57 1.34-1.27 1.34-.7 0-1.27-.6-1.27-1.334 0-.74.57-1.338 1.27-1.338z"></path></svg></a><a href="https://groups.google.com/forum/?fromgroups#!forum/vertx" class="navbar-social-link" title="Vert.x User Group" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="A Google group for Vert.x users"><title>Vert.x User Group</title><path d="M.92 3.332c-.776 0-1.216.67-.692 1.383l2.537 4.403v7.86c0 2.013 1.467 3.69 3.459 3.69H20.31a3.75 3.75 0 003.69-3.69V7.043a3.723 3.723 0 00-3.668-3.71zm5.786 3.71H20.1c.587 0 1.153.357 1.153.923 0 .566-.566.922-1.153.922H6.706c-.587 0-1.153-.356-1.153-.922 0-.566.566-.923 1.153-.923zm0 3.69H20.1c.587 0 1.153.356 1.153.922 0 .566-.566.922-1.153.922H6.706c-.587 0-1.153-.356-1.153-.922 0-.566.566-.922 1.153-.922zm-.021 3.71h9.705c.587 0 1.153.356 1.153.922 0 .566-.566.923-1.153.923H6.685c-.587 0-1.153-.357-1.153-.923 0-.566.566-.922 1.153-.922Z"></path></svg></a><a href="https://shang.qq.com/wpa/qunwpa?idkey=587f58cacb9557e3291b46098e0fe09427b98a1c0f866da23c04c2762bc7e2ad" class="navbar-social-link" title="Vert.x中国用户组QQ群" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Vert.x中国用户组QQ群"><title>Vert.x中国用户组QQ群</title><path d="M21.395 15.035a39.548 39.548 0 0 0-.803-2.264l-1.079-2.695c.001-.032.014-.562.014-.836C19.526 4.632 17.351 0 12 0S4.474 4.632 4.474 9.241c0 .274.013.804.014.836l-1.08 2.695a38.97 38.97 0 0 0-.802 2.264c-1.021 3.283-.69 4.643-.438 4.673.54.065 2.103-2.472 2.103-2.472 0 1.469.756 3.387 2.394 4.771-.612.188-1.363.479-1.845.835-.434.32-.379.646-.301.778.343.578 5.883.369 7.482.189 1.6.18 7.14.389 7.483-.189.078-.132.132-.458-.301-.778-.483-.356-1.233-.646-1.846-.836 1.637-1.384 2.393-3.302 2.393-4.771 0 0 1.563 2.537 2.103 2.472.251-.03.581-1.39-.438-4.673zM12.662 4.846c.039-1.052.659-1.878 1.385-1.846s1.281.912 1.242 1.964c-.039 1.051-.659 1.878-1.385 1.846s-1.282-.912-1.242-1.964zM9.954 3c.725-.033 1.345.794 1.384 1.846.04 1.052-.517 1.931-1.242 1.963-.726.033-1.346-.794-1.385-1.845C8.672 3.912 9.228 3.033 9.954 3zM7.421 8.294c.194-.43 2.147-.908 4.566-.908h.026c2.418 0 4.372.479 4.566.908a.14.14 0 0 1 .014.061c0 .031-.01.059-.026.083-.163.238-2.333 1.416-4.553 1.416h-.026c-2.221 0-4.39-1.178-4.553-1.416a.136.136 0 0 1-.014-.144zm10.422 8.622c-.22 3.676-2.403 5.987-5.774 6.021h-.137c-3.37-.033-5.554-2.345-5.773-6.021-.081-1.35.001-2.496.147-3.43.318.063.638.122.958.176v3.506s1.658.334 3.318.103v-3.225c.488.027.96.04 1.406.034h.025c1.678.021 3.714-.204 5.683-.594.146.934.227 2.08.147 3.43zM10.48 5.804c.313-.041.542-.409.508-.825-.033-.415-.314-.72-.629-.679-.313.04-.541.409-.508.824.034.417.315.72.629.68zM14.479 5.156c.078.037.221.042.289-.146.035-.095.025-.165-.009-.214-.023-.033-.133-.118-.371-.176-.904-.22-1.341.384-1.405.499-.04.072-.012.176.056.227.067.051.139.037.179-.006.58-.628 1.21-.208 1.261-.184z"></path></svg></a></div></div></div></div></header><div class="page-content docs-content"><div class="container"><div class="docs-content-wrapper"><aside class=""><div class="docs-content-wrapper-sidebar"><div class="search-panel"><div class="search"><input type="text" placeholder="Search..." value=""/><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="search-icon"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="search-icon-delete"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg></div><ul class="search-results"></ul><div class="search-results-none">No results.</div></div><div class="docs-content-toc"><div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_using_vert_x_mongodb_client">Using Vert.x MongoDB Client</a></li>
<li><a href="#_creating_a_client">Creating a client</a>
<ul class="sectlevel2">
<li><a href="#_using_the_default_shared_pool">Using the default shared pool</a></li>
<li><a href="#_specifying_a_pool_source_name">Specifying a pool source name</a></li>
<li><a href="#_creating_a_client_with_a_non_shared_data_pool">Creating a client with a non shared data pool</a></li>
</ul>
</li>
<li><a href="#_using_the_api">Using the API</a>
<ul class="sectlevel2">
<li><a href="#_saving_documents">Saving documents</a></li>
<li><a href="#_inserting_documents">Inserting documents</a></li>
<li><a href="#_updating_documents">Updating documents</a></li>
<li><a href="#_replacing_documents">Replacing documents</a></li>
<li><a href="#_bulk_operations">Bulk operations</a></li>
<li><a href="#_finding_documents">Finding documents</a></li>
<li><a href="#_finding_documents_in_batches">Finding documents in batches</a></li>
<li><a href="#_finding_a_single_document">Finding a single document</a></li>
<li><a href="#_removing_documents">Removing documents</a></li>
<li><a href="#_removing_a_single_document">Removing a single document</a></li>
<li><a href="#_counting_documents">Counting documents</a></li>
<li><a href="#_managing_mongodb_collections">Managing MongoDB collections</a></li>
<li><a href="#_running_other_mongodb_commands">Running other MongoDB commands</a></li>
<li><a href="#_mongodb_extended_json_support">MongoDB Extended JSON support</a></li>
<li><a href="#_getting_distinct_values">Getting distinct values</a></li>
</ul>
</li>
<li><a href="#_configuring_the_client">Configuring the client</a></li>
<li><a href="#_rxjava_2_api">RxJava 2 API</a>
<ul class="sectlevel2">
<li><a href="#_creating_an_rxified_client">Creating an Rxified client</a></li>
<li><a href="#_finding_documents_in_batches_2">Finding documents in batches</a></li>
</ul>
</li>
</ul>
</div></div></div></aside><div class="docs-content-sidebar-toggle"><div style="position:relative"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-list"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-x"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></div></div><div class="docs-content-inner"><div class="docs-content-metadata"><div class="docs-content-metadata-left"><div class="docs-content-metadata-repo"><div class="github-stars"><a href="https://github.com/vert-x3/vertx-mongo-client"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg>null stars</a></div></div><div><a href="https://vertx.io/docs/apidocs"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path></svg> API</a></div><div class="docs-content-metadata-examples"><a href="https://github.com/vert-x3/vertx-examples/tree/3.x/mongo-examples"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather"><path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"></path></svg> Examples</a></div><div class="docs-content-metadata-edit"><a href="https://github.com/vert-x3/vertx-mongo-client/tree/master/src/main/asciidoc"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg> 改进翻译</a></div><span class="docs-content-metadata-version"><div class="dropdown"><a class="dropdown-title">v4.0.3<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="dropdown-menu align-right"><a href="/docs/vertx-mongo-client/java/"><li class="dropdown-item active has-active-siblings"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="dropdown-check-icon"><polyline points="20 6 9 17 4 12"></polyline></svg>Latest (v<!-- -->4.0.3<!-- -->)</li></a><a href="/docs/3.9.6/vertx-mongo-client/java/"><li class="dropdown-item has-active-siblings">v<!-- -->3.9.6</li></a></ul></div></span></div></div><div><h1>Vert.x MongoDB Client</h1>

<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>A Vert.x client allowing applications to interact with a MongoDB instance, whether that&#8217;s
saving, retrieving, searching, or deleting documents. Mongo is a great match for persisting data in a Vert.x application
as it natively handles JSON (BSON) documents.</p>
</div>
<div class="paragraph">
<p><strong>Features</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Completely non-blocking</p>
</li>
<li>
<p>Custom codec to support fast serialization to/from Vert.x JSON</p>
</li>
<li>
<p>Supports a majority of the configuration options from the MongoDB Java Driver</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This client is based on the
<a href="http://mongodb.github.io/mongo-java-driver/3.2/driver-async/getting-started">MongoDB Async Driver</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_using_vert_x_mongodb_client"><a class="anchor" href="#_using_vert_x_mongodb_client"></a>Using Vert.x MongoDB Client</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To use this project, add the following dependency to the <em>dependencies</em> section of your build descriptor:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Maven (in your <code>pom.xml</code>):</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.vertx<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>vertx-mongo-client<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.9.6<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Gradle (in your <code>build.gradle</code> file):</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">compile <span class="hljs-string">'io.vertx:vertx-mongo-client:3.9.6'</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creating_a_client"><a class="anchor" href="#_creating_a_client"></a>Creating a client</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can create a client in several ways:</p>
</div>
<div class="sect2">
<h3 id="_using_the_default_shared_pool"><a class="anchor" href="#_using_the_default_shared_pool"></a>Using the default shared pool</h3>
<div class="paragraph">
<p>In most cases you will want to share a pool between different client instances.</p>
</div>
<div class="paragraph">
<p>E.g. you scale your application by deploying multiple instances of your verticle and you want each verticle instance
to share the same pool so you don&#8217;t end up with multiple pools</p>
</div>
<div class="paragraph">
<p>The simplest way to do this is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">MongoClient client = MongoClient.createShared(vertx, config);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The first call to <code><a href="../../apidocs/io/vertx/ext/mongo/MongoClient.html#createShared-io.vertx.core.Vertx-io.vertx.core.json.JsonObject-">MongoClient.createShared</a></code>
will actually create the pool, and the specified config will be used.</p>
</div>
<div class="paragraph">
<p>Subsequent calls will return a new client instance that uses the same pool, so the configuration won&#8217;t be used.</p>
</div>
</div>
<div class="sect2">
<h3 id="_specifying_a_pool_source_name"><a class="anchor" href="#_specifying_a_pool_source_name"></a>Specifying a pool source name</h3>
<div class="paragraph">
<p>You can create a client specifying a pool source name as follows</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">MongoClient client = MongoClient.createShared(vertx, config, <span class="hljs-string">"MyPoolName"</span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>If different clients are created using the same Vert.x instance and specifying the same pool name, they will
share the same pool.</p>
</div>
<div class="paragraph">
<p>The first call to <code><a href="../../apidocs/io/vertx/ext/mongo/MongoClient.html#createShared-io.vertx.core.Vertx-io.vertx.core.json.JsonObject-">MongoClient.createShared</a></code>
will actually create the pool, and the specified config will be used.</p>
</div>
<div class="paragraph">
<p>Subsequent calls will return a new client instance that uses the same pool, so the configuration won&#8217;t be used.</p>
</div>
<div class="paragraph">
<p>Use this way of creating if you wish different groups of clients to have different pools, e.g. they&#8217;re
interacting with different databases.</p>
</div>
</div>
<div class="sect2">
<h3 id="_creating_a_client_with_a_non_shared_data_pool"><a class="anchor" href="#_creating_a_client_with_a_non_shared_data_pool"></a>Creating a client with a non shared data pool</h3>
<div class="paragraph">
<p>In most cases you will want to share a pool between different client instances.
However, it&#8217;s possible you want to create a client instance that doesn&#8217;t share its pool with any other client.</p>
</div>
<div class="paragraph">
<p>In that case you can use <code><a href="../../apidocs/io/vertx/ext/mongo/MongoClient.html#create-io.vertx.core.Vertx-io.vertx.core.json.JsonObject-">MongoClient.create</a></code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">MongoClient client = MongoClient.create(vertx, config);</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is equivalent to calling <code><a href="../../apidocs/io/vertx/ext/mongo/MongoClient.html#createShared-io.vertx.core.Vertx-io.vertx.core.json.JsonObject-java.lang.String-">MongoClient.createShared</a></code>
with a unique pool name each time.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_using_the_api"><a class="anchor" href="#_using_the_api"></a>Using the API</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The client API is represented by <code><a href="../../apidocs/io/vertx/ext/mongo/MongoClient.html">MongoClient</a></code>.</p>
</div>
<div class="sect2">
<h3 id="_saving_documents"><a class="anchor" href="#_saving_documents"></a>Saving documents</h3>
<div class="paragraph">
<p>To save a document you use <code><a href="../../apidocs/io/vertx/ext/mongo/MongoClient.html#save-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.core.Handler-">save</a></code>.</p>
</div>
<div class="paragraph">
<p>If the document has no <code>\_id</code> field, it is inserted, otherwise, it is <em>upserted</em>.
Upserted means it is inserted if it doesn&#8217;t already exist, otherwise it is updated.</p>
</div>
<div class="paragraph">
<p>If the document is inserted and has no id, then the id field generated will be returned to the result handler.</p>
</div>
<div class="paragraph">
<p>Here&#8217;s an example of saving a document and getting the id back</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">JsonObject document = <span class="hljs-keyword">new</span> JsonObject()
  .put(<span class="hljs-string">"title"</span>, <span class="hljs-string">"The Hobbit"</span>);
mongoClient.save(<span class="hljs-string">"books"</span>, document, res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    String id = res.result();
    System.out.println(<span class="hljs-string">"Saved book with id "</span> + id);
  } <span class="hljs-keyword">else</span> {
    res.cause().printStackTrace();
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>And here&#8217;s an example of saving a document which already has an id.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">JsonObject document = <span class="hljs-keyword">new</span> JsonObject()
  .put(<span class="hljs-string">"title"</span>, <span class="hljs-string">"The Hobbit"</span>)
  .put(<span class="hljs-string">"_id"</span>, <span class="hljs-string">"123244"</span>);
mongoClient.save(<span class="hljs-string">"books"</span>, document, res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    <span class="hljs-comment">// ...</span>
  } <span class="hljs-keyword">else</span> {
    res.cause().printStackTrace();
  }
});</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_inserting_documents"><a class="anchor" href="#_inserting_documents"></a>Inserting documents</h3>
<div class="paragraph">
<p>To insert a document you use <code><a href="../../apidocs/io/vertx/ext/mongo/MongoClient.html#insert-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.core.Handler-">insert</a></code>.</p>
</div>
<div class="paragraph">
<p>If the document is inserted and has no id, then the id field generated will be returned to the result handler.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">JsonObject document = <span class="hljs-keyword">new</span> JsonObject()
  .put(<span class="hljs-string">"title"</span>, <span class="hljs-string">"The Hobbit"</span>);
mongoClient.insert(<span class="hljs-string">"books"</span>, document, res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    String id = res.result();
    System.out.println(<span class="hljs-string">"Inserted book with id "</span> + id);
  } <span class="hljs-keyword">else</span> {
    res.cause().printStackTrace();
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>If a document is inserted with an id, and a document with that id already exists, the insert will fail:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">JsonObject document = <span class="hljs-keyword">new</span> JsonObject()
  .put(<span class="hljs-string">"title"</span>, <span class="hljs-string">"The Hobbit"</span>)
  .put(<span class="hljs-string">"_id"</span>, <span class="hljs-string">"123244"</span>);
mongoClient.insert(<span class="hljs-string">"books"</span>, document, res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    <span class="hljs-comment">//...</span>
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// Will fail if the book with that id already exists.</span>
  }
});</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_updating_documents"><a class="anchor" href="#_updating_documents"></a>Updating documents</h3>
<div class="paragraph">
<p>To update a documents you use <code><a href="../../apidocs/io/vertx/ext/mongo/MongoClient.html#updateCollection-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.core.json.JsonObject-io.vertx.core.Handler-">updateCollection</a></code>.</p>
</div>
<div class="paragraph">
<p>This updates one or multiple documents in a collection.
The json object that is passed in the <code>updateCollection</code> parameter must contain
<a href="http://docs.mongodb.org/manual/reference/operator/update-field/">Update Operators</a>
and determines how the object is updated.</p>
</div>
<div class="paragraph">
<p>The json object specified in the query parameter determines which documents in the collection will be updated.</p>
</div>
<div class="paragraph">
<p>Here&#8217;s an example of updating a document in the books collection:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">JsonObject query = <span class="hljs-keyword">new</span> JsonObject()
  .put(<span class="hljs-string">"title"</span>, <span class="hljs-string">"The Hobbit"</span>);
<span class="hljs-comment">// Set the author field</span>
JsonObject update = <span class="hljs-keyword">new</span> JsonObject().put(<span class="hljs-string">"$set"</span>, <span class="hljs-keyword">new</span> JsonObject()
  .put(<span class="hljs-string">"author"</span>, <span class="hljs-string">"J. R. R. Tolkien"</span>));
mongoClient.updateCollection(<span class="hljs-string">"books"</span>, query, update, res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    System.out.println(<span class="hljs-string">"Book updated !"</span>);
  } <span class="hljs-keyword">else</span> {
    res.cause().printStackTrace();
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>To specify if the update should upsert or update multiple documents, use
<code><a href="../../apidocs/io/vertx/ext/mongo/MongoClient.html#updateCollectionWithOptions-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.core.json.JsonObject-io.vertx.ext.mongo.UpdateOptions-io.vertx.core.Handler-">updateCollectionWithOptions</a></code>
and pass in an instance of <code><a href="../../apidocs/io/vertx/ext/mongo/UpdateOptions.html">UpdateOptions</a></code>.</p>
</div>
<div class="paragraph">
<p>This has the following fields:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>multi</code></dt>
<dd>
<p>set to true to update multiple documents</p>
</dd>
<dt class="hdlist1"><code>upsert</code></dt>
<dd>
<p>set to true to insert the document if the query doesn&#8217;t match</p>
</dd>
<dt class="hdlist1"><code>writeConcern</code></dt>
<dd>
<p>the write concern for this operation</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">JsonObject query = <span class="hljs-keyword">new</span> JsonObject()
  .put(<span class="hljs-string">"title"</span>, <span class="hljs-string">"The Hobbit"</span>);
<span class="hljs-comment">// Set the author field</span>
JsonObject update = <span class="hljs-keyword">new</span> JsonObject().put(<span class="hljs-string">"$set"</span>, <span class="hljs-keyword">new</span> JsonObject()
  .put(<span class="hljs-string">"author"</span>, <span class="hljs-string">"J. R. R. Tolkien"</span>));
UpdateOptions options = <span class="hljs-keyword">new</span> UpdateOptions().setMulti(<span class="hljs-keyword">true</span>);
mongoClient.updateCollectionWithOptions(<span class="hljs-string">"books"</span>, query, update, options, res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    System.out.println(<span class="hljs-string">"Book updated !"</span>);
  } <span class="hljs-keyword">else</span> {
    res.cause().printStackTrace();
  }
});</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_replacing_documents"><a class="anchor" href="#_replacing_documents"></a>Replacing documents</h3>
<div class="paragraph">
<p>To replace documents you use <code><a href="../../apidocs/io/vertx/ext/mongo/MongoClient.html#replaceDocuments-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.core.json.JsonObject-io.vertx.core.Handler-">replaceDocuments</a></code>.</p>
</div>
<div class="paragraph">
<p>This is similar to the update operation, however it does not take any operator.
Instead it replaces the entire document with the one provided.</p>
</div>
<div class="paragraph">
<p>Here&#8217;s an example of replacing a document in the books collection</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">JsonObject query = <span class="hljs-keyword">new</span> JsonObject()
  .put(<span class="hljs-string">"title"</span>, <span class="hljs-string">"The Hobbit"</span>);
JsonObject replace = <span class="hljs-keyword">new</span> JsonObject()
  .put(<span class="hljs-string">"title"</span>, <span class="hljs-string">"The Lord of the Rings"</span>)
  .put(<span class="hljs-string">"author"</span>, <span class="hljs-string">"J. R. R. Tolkien"</span>);
mongoClient.replaceDocuments(<span class="hljs-string">"books"</span>, query, replace, res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    System.out.println(<span class="hljs-string">"Book replaced !"</span>);
  } <span class="hljs-keyword">else</span> {
    res.cause().printStackTrace();
  }
});</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_bulk_operations"><a class="anchor" href="#_bulk_operations"></a>Bulk operations</h3>
<div class="paragraph">
<p>To execute multiple insert, update, replace, or delete operations at once, use <code><a href="../../apidocs/io/vertx/ext/mongo/MongoClient.html#bulkWrite-java.lang.String-java.util.List-io.vertx.core.Handler-">bulkWrite</a></code>.</p>
</div>
<div class="paragraph">
<p>You can pass a list of <code><a href="../../apidocs/io/vertx/ext/mongo/BulkOperation.html">BulkOperations</a></code>, with each working similar to the matching single operation.
You can pass as many operations, even of the same type, as you wish.</p>
</div>
<div class="paragraph">
<p>To specify if the bulk operation should be executed in order, and with what write option, use <code><a href="../../apidocs/io/vertx/ext/mongo/MongoClient.html#bulkWriteWithOptions-java.lang.String-java.util.List-io.vertx.ext.mongo.BulkWriteOptions-io.vertx.core.Handler-">bulkWriteWithOptions</a></code>
and pass an instance of <code><a href="../../apidocs/io/vertx/ext/mongo/BulkWriteOptions.html">BulkWriteOptions</a></code>.
For more explanation what ordered means, see
<a href="https://docs.mongodb.com/manual/reference/method/db.collection.bulkWrite/#execution-of-operations">Execution of Operations</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_finding_documents"><a class="anchor" href="#_finding_documents"></a>Finding documents</h3>
<div class="paragraph">
<p>To find documents you use <code><a href="../../apidocs/io/vertx/ext/mongo/MongoClient.html#find-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.core.Handler-">find</a></code>.</p>
</div>
<div class="paragraph">
<p>The <code>query</code> parameter is used to match the documents in the collection.</p>
</div>
<div class="paragraph">
<p>Here&#8217;s a simple example with an empty query that will match all books:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">JsonObject query = <span class="hljs-keyword">new</span> JsonObject();
mongoClient.find(<span class="hljs-string">"books"</span>, query, res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    <span class="hljs-keyword">for</span> (JsonObject json : res.result()) {
      System.out.println(json.encodePrettily());
    }
  } <span class="hljs-keyword">else</span> {
    res.cause().printStackTrace();
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here&#8217;s another example that will match all books by Tolkien:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">JsonObject query = <span class="hljs-keyword">new</span> JsonObject()
  .put(<span class="hljs-string">"author"</span>, <span class="hljs-string">"J. R. R. Tolkien"</span>);
mongoClient.find(<span class="hljs-string">"books"</span>, query, res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    <span class="hljs-keyword">for</span> (JsonObject json : res.result()) {
      System.out.println(json.encodePrettily());
    }
  } <span class="hljs-keyword">else</span> {
    res.cause().printStackTrace();
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>The matching documents are returned as a list of json objects in the result handler.</p>
</div>
<div class="paragraph">
<p>To specify things like what fields to return, how many results to return, etc use <code><a href="../../apidocs/io/vertx/ext/mongo/MongoClient.html#findWithOptions-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.ext.mongo.FindOptions-io.vertx.core.Handler-">findWithOptions</a></code>
and pass in the an instance of <code><a href="../../apidocs/io/vertx/ext/mongo/FindOptions.html">FindOptions</a></code>.</p>
</div>
<div class="paragraph">
<p>This has the following fields:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>fields</code></dt>
<dd>
<p>The fields to return in the results. Defaults to <code>null</code>, meaning all fields will be returned</p>
</dd>
<dt class="hdlist1"><code>sort</code></dt>
<dd>
<p>The fields to sort by. Defaults to <code>null</code>.</p>
</dd>
<dt class="hdlist1"><code>limit</code></dt>
<dd>
<p>The limit of the number of results to return. Default to <code>-1</code>, meaning all results will be returned.</p>
</dd>
<dt class="hdlist1"><code>skip</code></dt>
<dd>
<p>The number of documents to skip before returning the results. Defaults to <code>0</code>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_finding_documents_in_batches"><a class="anchor" href="#_finding_documents_in_batches"></a>Finding documents in batches</h3>
<div class="paragraph">
<p>When dealing with large data sets, it is not advised to use the
<code><a href="../../apidocs/io/vertx/ext/mongo/MongoClient.html#find-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.core.Handler-">find</a></code> and
<code><a href="../../apidocs/io/vertx/ext/mongo/MongoClient.html#findWithOptions-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.ext.mongo.FindOptions-io.vertx.core.Handler-">findWithOptions</a></code> methods.
In order to avoid inflating the whole response into memory, use <code><a href="../../apidocs/io/vertx/ext/mongo/MongoClient.html#findBatch-java.lang.String-io.vertx.core.json.JsonObject-">findBatch</a></code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">JsonObject query = <span class="hljs-keyword">new</span> JsonObject()
  .put(<span class="hljs-string">"author"</span>, <span class="hljs-string">"J. R. R. Tolkien"</span>);
mongoClient.findBatch(<span class="hljs-string">"book"</span>, query)
  .exceptionHandler(throwable -&gt; throwable.printStackTrace())
  .endHandler(v -&gt; System.out.println(<span class="hljs-string">"End of research"</span>))
  .handler(doc -&gt; System.out.println(<span class="hljs-string">"Found doc: "</span> + doc.encodePrettily()));</code></pre>
</div>
</div>
<div class="paragraph">
<p>The matching documents are emitted one by one by the <code><a href="../../apidocs/io/vertx/core/streams/ReadStream.html">ReadStream</a></code> handler.</p>
</div>
<div class="paragraph">
<p><code><a href="../../apidocs/io/vertx/ext/mongo/FindOptions.html">FindOptions</a></code> has an extra parameter <code>batchSize</code> which you can use to set the number of documents to load at once:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">JsonObject query = <span class="hljs-keyword">new</span> JsonObject()
  .put(<span class="hljs-string">"author"</span>, <span class="hljs-string">"J. R. R. Tolkien"</span>);
FindOptions options = <span class="hljs-keyword">new</span> FindOptions().setBatchSize(<span class="hljs-number">100</span>);
mongoClient.findBatchWithOptions(<span class="hljs-string">"book"</span>, query, options)
  .exceptionHandler(throwable -&gt; throwable.printStackTrace())
  .endHandler(v -&gt; System.out.println(<span class="hljs-string">"End of research"</span>))
  .handler(doc -&gt; System.out.println(<span class="hljs-string">"Found doc: "</span> + doc.encodePrettily()));</code></pre>
</div>
</div>
<div class="paragraph">
<p>By default, <code>batchSize</code> is set to 20.</p>
</div>
</div>
<div class="sect2">
<h3 id="_finding_a_single_document"><a class="anchor" href="#_finding_a_single_document"></a>Finding a single document</h3>
<div class="paragraph">
<p>To find a single document you use <code><a href="../../apidocs/io/vertx/ext/mongo/MongoClient.html#findOne-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.core.json.JsonObject-io.vertx.core.Handler-">findOne</a></code>.</p>
</div>
<div class="paragraph">
<p>This works just like <code><a href="../../apidocs/io/vertx/ext/mongo/MongoClient.html#find-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.core.Handler-">find</a></code> but it returns just the first matching document.</p>
</div>
</div>
<div class="sect2">
<h3 id="_removing_documents"><a class="anchor" href="#_removing_documents"></a>Removing documents</h3>
<div class="paragraph">
<p>To remove documents use <code><a href="../../apidocs/io/vertx/ext/mongo/MongoClient.html#removeDocuments-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.core.Handler-">removeDocuments</a></code>.</p>
</div>
<div class="paragraph">
<p>The <code>query</code> parameter is used to match the documents in the collection to determine which ones to remove.</p>
</div>
<div class="paragraph">
<p>Here&#8217;s an example of removing all Tolkien books:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">JsonObject query = <span class="hljs-keyword">new</span> JsonObject()
  .put(<span class="hljs-string">"author"</span>, <span class="hljs-string">"J. R. R. Tolkien"</span>);
mongoClient.removeDocuments(<span class="hljs-string">"books"</span>, query, res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    System.out.println(<span class="hljs-string">"Never much liked Tolkien stuff!"</span>);
  } <span class="hljs-keyword">else</span> {
    res.cause().printStackTrace();
  }
});</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_removing_a_single_document"><a class="anchor" href="#_removing_a_single_document"></a>Removing a single document</h3>
<div class="paragraph">
<p>To remove a single document you use <code><a href="../../apidocs/io/vertx/ext/mongo/MongoClient.html#removeDocument-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.core.Handler-">removeDocument</a></code>.</p>
</div>
<div class="paragraph">
<p>This works just like <code><a href="../../apidocs/io/vertx/ext/mongo/MongoClient.html#removeDocuments-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.core.Handler-">removeDocuments</a></code> but it removes just the first matching document.</p>
</div>
</div>
<div class="sect2">
<h3 id="_counting_documents"><a class="anchor" href="#_counting_documents"></a>Counting documents</h3>
<div class="paragraph">
<p>To count documents use <code><a href="../../apidocs/io/vertx/ext/mongo/MongoClient.html#count-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.core.Handler-">count</a></code>.</p>
</div>
<div class="paragraph">
<p>Here&#8217;s an example that counts the number of Tolkien books. The number is passed to the result handler.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">JsonObject query = <span class="hljs-keyword">new</span> JsonObject()
  .put(<span class="hljs-string">"author"</span>, <span class="hljs-string">"J. R. R. Tolkien"</span>);
mongoClient.count(<span class="hljs-string">"books"</span>, query, res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    <span class="hljs-keyword">long</span> num = res.result();
  } <span class="hljs-keyword">else</span> {
    res.cause().printStackTrace();
  }
});</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_managing_mongodb_collections"><a class="anchor" href="#_managing_mongodb_collections"></a>Managing MongoDB collections</h3>
<div class="paragraph">
<p>All MongoDB documents are stored in collections.</p>
</div>
<div class="paragraph">
<p>To get a list of all collections you can use <code><a href="../../apidocs/io/vertx/ext/mongo/MongoClient.html#getCollections-io.vertx.core.Handler-">getCollections</a></code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">mongoClient.getCollections(res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    List&lt;String&gt; collections = res.result();
  } <span class="hljs-keyword">else</span> {
    res.cause().printStackTrace();
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>To create a new collection you can use <code><a href="../../apidocs/io/vertx/ext/mongo/MongoClient.html#createCollection-java.lang.String-io.vertx.core.Handler-">createCollection</a></code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">mongoClient.createCollection(<span class="hljs-string">"mynewcollectionr"</span>, res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    <span class="hljs-comment">// Created ok!</span>
  } <span class="hljs-keyword">else</span> {
    res.cause().printStackTrace();
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>To drop a collection you can use <code><a href="../../apidocs/io/vertx/ext/mongo/MongoClient.html#dropCollection-java.lang.String-io.vertx.core.Handler-">dropCollection</a></code></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">注意</div>
</td>
<td class="content">
Dropping a collection will delete all documents within it!
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">mongoClient.dropCollection(<span class="hljs-string">"mynewcollectionr"</span>, res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    <span class="hljs-comment">// Dropped ok!</span>
  } <span class="hljs-keyword">else</span> {
    res.cause().printStackTrace();
  }
});</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_running_other_mongodb_commands"><a class="anchor" href="#_running_other_mongodb_commands"></a>Running other MongoDB commands</h3>
<div class="paragraph">
<p>You can run arbitrary MongoDB commands with <code><a href="../../apidocs/io/vertx/ext/mongo/MongoClient.html#runCommand-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.core.Handler-">runCommand</a></code>.</p>
</div>
<div class="paragraph">
<p>Commands can be used to run more advanced MongoDB features, such as using MapReduce.
For more information see the mongo docs for supported <a href="http://docs.mongodb.org/manual/reference/command">Commands</a>.</p>
</div>
<div class="paragraph">
<p>Here&#8217;s an example of running an aggregate command. Note that the command name must be specified as a parameter
and also be contained in the JSON that represents the command. This is because JSON is not ordered but BSON is
ordered and MongoDB expects the first BSON entry to be the name of the command. In order for us to know which
of the entries in the JSON is the command name it must be specified as a parameter.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">JsonObject command = <span class="hljs-keyword">new</span> JsonObject()
  .put(<span class="hljs-string">"aggregate"</span>, <span class="hljs-string">"collection_name"</span>)
  .put(<span class="hljs-string">"pipeline"</span>, <span class="hljs-keyword">new</span> JsonArray());
mongoClient.runCommand(<span class="hljs-string">"aggregate"</span>, command, res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    JsonArray resArr = res.result().getJsonArray(<span class="hljs-string">"result"</span>);
    <span class="hljs-comment">// etc</span>
  } <span class="hljs-keyword">else</span> {
    res.cause().printStackTrace();
  }
});</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_mongodb_extended_json_support"><a class="anchor" href="#_mongodb_extended_json_support"></a>MongoDB Extended JSON support</h3>
<div class="paragraph">
<p>For now, only <code>date</code>, <code>oid</code> and <code>binary</code> types are supported
(see <a href="http://docs.mongodb.org/manual/reference/mongodb-extended-json">MongoDB Extended JSON</a>).</p>
</div>
<div class="paragraph">
<p>Here&#8217;s an example of inserting a document with a <code>date</code> field:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">JsonObject document = <span class="hljs-keyword">new</span> JsonObject()
  .put(<span class="hljs-string">"title"</span>, <span class="hljs-string">"The Hobbit"</span>)
  <span class="hljs-comment">//ISO-8601 date</span>
  .put(<span class="hljs-string">"publicationDate"</span>, <span class="hljs-keyword">new</span> JsonObject().put(<span class="hljs-string">"$date"</span>, <span class="hljs-string">"1937-09-21T00:00:00+00:00"</span>));
mongoService.save(<span class="hljs-string">"publishedBooks"</span>, document, res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    String id = res.result();
    mongoService.findOne(<span class="hljs-string">"publishedBooks"</span>, <span class="hljs-keyword">new</span> JsonObject().put(<span class="hljs-string">"_id"</span>, id), <span class="hljs-keyword">null</span>, res2 -&gt; {
      <span class="hljs-keyword">if</span> (res2.succeeded()) {
        System.out.println(<span class="hljs-string">"To retrieve ISO-8601 date : "</span>
          + res2.result().getJsonObject(<span class="hljs-string">"publicationDate"</span>).getString(<span class="hljs-string">"$date"</span>));
      } <span class="hljs-keyword">else</span> {
        res2.cause().printStackTrace();
      }
    });
  } <span class="hljs-keyword">else</span> {
    res.cause().printStackTrace();
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here&#8217;s an example (in Java) of inserting a document with a binary field and reading it back</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="hljs-keyword">byte</span>[] binaryObject = <span class="hljs-keyword">new</span> <span class="hljs-keyword">byte</span>[<span class="hljs-number">40</span>];
JsonObject document = <span class="hljs-keyword">new</span> JsonObject()
  .put(<span class="hljs-string">"name"</span>, <span class="hljs-string">"Alan Turing"</span>)
  .put(<span class="hljs-string">"binaryStuff"</span>, <span class="hljs-keyword">new</span> JsonObject().put(<span class="hljs-string">"$binary"</span>, binaryObject));
mongoService.save(<span class="hljs-string">"smartPeople"</span>, document, res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    String id = res.result();
    mongoService.findOne(<span class="hljs-string">"smartPeople"</span>, <span class="hljs-keyword">new</span> JsonObject().put(<span class="hljs-string">"_id"</span>, id), <span class="hljs-keyword">null</span>, res2 -&gt; {
      <span class="hljs-keyword">if</span> (res2.succeeded()) {
        <span class="hljs-keyword">byte</span>[] reconstitutedBinaryObject = res2.result().getJsonObject(<span class="hljs-string">"binaryStuff"</span>).getBinary(<span class="hljs-string">"$binary"</span>);
        <span class="hljs-comment">//This could now be de-serialized into an object in real life</span>
      } <span class="hljs-keyword">else</span> {
        res2.cause().printStackTrace();
      }
    });
  } <span class="hljs-keyword">else</span> {
    res.cause().printStackTrace();
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here&#8217;s an example of inserting a base 64 encoded string, typing it as binary a binary field, and reading it back</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">String base64EncodedString = <span class="hljs-string">"a2FpbHVhIGlzIHRoZSAjMSBiZWFjaCBpbiB0aGUgd29ybGQ="</span>;
JsonObject document = <span class="hljs-keyword">new</span> JsonObject()
  .put(<span class="hljs-string">"name"</span>, <span class="hljs-string">"Alan Turing"</span>)
  .put(<span class="hljs-string">"binaryStuff"</span>, <span class="hljs-keyword">new</span> JsonObject().put(<span class="hljs-string">"$binary"</span>, base64EncodedString));
mongoService.save(<span class="hljs-string">"smartPeople"</span>, document, res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    String id = res.result();
    mongoService.findOne(<span class="hljs-string">"smartPeople"</span>, <span class="hljs-keyword">new</span> JsonObject().put(<span class="hljs-string">"_id"</span>, id), <span class="hljs-keyword">null</span>, res2 -&gt; {
      <span class="hljs-keyword">if</span> (res2.succeeded()) {
        String reconstitutedBase64EncodedString = res2.result().getJsonObject(<span class="hljs-string">"binaryStuff"</span>).getString(<span class="hljs-string">"$binary"</span>);
        <span class="hljs-comment">//This could now converted back to bytes from the base 64 string</span>
      } <span class="hljs-keyword">else</span> {
        res2.cause().printStackTrace();
      }
    });
  } <span class="hljs-keyword">else</span> {
    res.cause().printStackTrace();
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here&#8217;s an example of inserting an object ID and reading it back</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">String individualId = <span class="hljs-keyword">new</span> ObjectId().toHexString();
JsonObject document = <span class="hljs-keyword">new</span> JsonObject()
  .put(<span class="hljs-string">"name"</span>, <span class="hljs-string">"Stephen Hawking"</span>)
  .put(<span class="hljs-string">"individualId"</span>, <span class="hljs-keyword">new</span> JsonObject().put(<span class="hljs-string">"$oid"</span>, individualId));
mongoService.save(<span class="hljs-string">"smartPeople"</span>, document, res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    String id = res.result();
    JsonObject query = <span class="hljs-keyword">new</span> JsonObject().put(<span class="hljs-string">"_id"</span>, id);
    mongoService.findOne(<span class="hljs-string">"smartPeople"</span>, query, <span class="hljs-keyword">null</span>, res2 -&gt; {
      <span class="hljs-keyword">if</span> (res2.succeeded()) {
        String reconstitutedIndividualId = res2.result()
          .getJsonObject(<span class="hljs-string">"individualId"</span>).getString(<span class="hljs-string">"$oid"</span>);
      } <span class="hljs-keyword">else</span> {
        res2.cause().printStackTrace();
      }
    });
  } <span class="hljs-keyword">else</span> {
    res.cause().printStackTrace();
  }
});</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_getting_distinct_values"><a class="anchor" href="#_getting_distinct_values"></a>Getting distinct values</h3>
<div class="paragraph">
<p>Here&#8217;s an example of getting distinct value</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">JsonObject document = <span class="hljs-keyword">new</span> JsonObject()
  .put(<span class="hljs-string">"title"</span>, <span class="hljs-string">"The Hobbit"</span>);
mongoClient.save(<span class="hljs-string">"books"</span>, document, res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    mongoClient.distinct(<span class="hljs-string">"books"</span>, <span class="hljs-string">"title"</span>, String<span class="hljs-class">.<span class="hljs-keyword">class</span>.<span class="hljs-title">getName</span>(), <span class="hljs-title">res2</span> -&gt; </span>{
      System.out.println(<span class="hljs-string">"Title is : "</span> + res2.result().getJsonArray(<span class="hljs-number">0</span>));
    });
  } <span class="hljs-keyword">else</span> {
    res.cause().printStackTrace();
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here&#8217;s an example of getting distinct value in batch mode</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">JsonObject document = <span class="hljs-keyword">new</span> JsonObject()
  .put(<span class="hljs-string">"title"</span>, <span class="hljs-string">"The Hobbit"</span>);
mongoClient.save(<span class="hljs-string">"books"</span>, document, res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    mongoClient.distinctBatch(<span class="hljs-string">"books"</span>, <span class="hljs-string">"title"</span>, String<span class="hljs-class">.<span class="hljs-keyword">class</span>.<span class="hljs-title">getName</span>())
      .<span class="hljs-title">handler</span>(<span class="hljs-title">book</span> -&gt; <span class="hljs-title">System</span>.<span class="hljs-title">out</span>.<span class="hljs-title">println</span>("<span class="hljs-title">Title</span> <span class="hljs-title">is</span> : " + <span class="hljs-title">book</span>.<span class="hljs-title">getString</span>("<span class="hljs-title">title</span>")))</span>;
  } <span class="hljs-keyword">else</span> {
    res.cause().printStackTrace();
  }
});</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Here&#8217;s an example of getting distinct value with query</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">JsonObject document = <span class="hljs-keyword">new</span> JsonObject()
  .put(<span class="hljs-string">"title"</span>, <span class="hljs-string">"The Hobbit"</span>)
  .put(<span class="hljs-string">"publicationDate"</span>, <span class="hljs-keyword">new</span> JsonObject().put(<span class="hljs-string">"$date"</span>, <span class="hljs-string">"1937-09-21T00:00:00+00:00"</span>));
JsonObject query = <span class="hljs-keyword">new</span> JsonObject()
  .put(<span class="hljs-string">"publicationDate"</span>,
    <span class="hljs-keyword">new</span> JsonObject().put(<span class="hljs-string">"$gte"</span>, <span class="hljs-keyword">new</span> JsonObject().put(<span class="hljs-string">"$date"</span>, <span class="hljs-string">"1937-09-21T00:00:00+00:00"</span>)));
mongoClient.save(<span class="hljs-string">"books"</span>, document, res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    mongoClient.distinctWithQuery(<span class="hljs-string">"books"</span>, <span class="hljs-string">"title"</span>, String<span class="hljs-class">.<span class="hljs-keyword">class</span>.<span class="hljs-title">getName</span>(), <span class="hljs-title">query</span>, <span class="hljs-title">res2</span> -&gt; </span>{
      System.out.println(<span class="hljs-string">"Title is : "</span> + res2.result().getJsonArray(<span class="hljs-number">0</span>));
    });
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here&#8217;s an example of getting distinct value in batch mode with query</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">JsonObject document = <span class="hljs-keyword">new</span> JsonObject()
  .put(<span class="hljs-string">"title"</span>, <span class="hljs-string">"The Hobbit"</span>)
  .put(<span class="hljs-string">"publicationDate"</span>, <span class="hljs-keyword">new</span> JsonObject().put(<span class="hljs-string">"$date"</span>, <span class="hljs-string">"1937-09-21T00:00:00+00:00"</span>));
JsonObject query = <span class="hljs-keyword">new</span> JsonObject()
  .put(<span class="hljs-string">"publicationDate"</span>, <span class="hljs-keyword">new</span> JsonObject()
    .put(<span class="hljs-string">"$gte"</span>, <span class="hljs-keyword">new</span> JsonObject().put(<span class="hljs-string">"$date"</span>, <span class="hljs-string">"1937-09-21T00:00:00+00:00"</span>)));
mongoClient.save(<span class="hljs-string">"books"</span>, document, res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    mongoClient.distinctBatchWithQuery(<span class="hljs-string">"books"</span>, <span class="hljs-string">"title"</span>, String<span class="hljs-class">.<span class="hljs-keyword">class</span>.<span class="hljs-title">getName</span>(), <span class="hljs-title">query</span>)
      .<span class="hljs-title">handler</span>(<span class="hljs-title">book</span> -&gt; <span class="hljs-title">System</span>.<span class="hljs-title">out</span>.<span class="hljs-title">println</span>("<span class="hljs-title">Title</span> <span class="hljs-title">is</span> : " + <span class="hljs-title">book</span>.<span class="hljs-title">getString</span>("<span class="hljs-title">title</span>")))</span>;
  }
});</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuring_the_client"><a class="anchor" href="#_configuring_the_client"></a>Configuring the client</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The client is configured with a json object.</p>
</div>
<div class="paragraph">
<p>The following configuration is supported by the mongo client:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>db_name</code></dt>
<dd>
<p>Name of the database in the MongoDB instance to use. Defaults to <code>default_db</code></p>
</dd>
<dt class="hdlist1"><code>useObjectId</code></dt>
<dd>
<p>Toggle this option to support persisting and retrieving ObjectId&#8217;s as strings. If <code>true</code>, hex-strings will
be saved as native Mongodb ObjectId types in the document collection. This will allow the sorting of documents based on creation
time. You can also derive the creation time from the hex-string using ObjectId::getDate(). Set to <code>false</code> for other types of your choosing.
If set to false, or left to default, hex strings will be generated as the document _id if the _id is omitted from the document.
Defaults to <code>false</code>.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The mongo client tries to support most options that are allowed by the driver. There are two ways to configure mongo
for use by the driver, either by a connection string or by separate configuration options.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">注意</div>
</td>
<td class="content">
If the connection string is used the mongo client will ignore any driver configuration options.
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>connection_string</code></dt>
<dd>
<p>The connection string the driver uses to create the client. E.g. <code>mongodb://localhost:27017</code>.
For more information on the format of the connection string please consult the driver documentation.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p><strong>Specific driver configuration options</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">{
 <span class="hljs-comment">// Single Cluster Settings</span>
 <span class="hljs-string">"host"</span> : <span class="hljs-string">"127.0.0.1"</span>, <span class="hljs-comment">// string</span>
 <span class="hljs-string">"port"</span> : <span class="hljs-number">27017</span>,      <span class="hljs-comment">// int</span>

 <span class="hljs-comment">// Multiple Cluster Settings</span>
 <span class="hljs-string">"hosts"</span> : [
   {
     <span class="hljs-string">"host"</span> : <span class="hljs-string">"cluster1"</span>, <span class="hljs-comment">// string</span>
     <span class="hljs-string">"port"</span> : <span class="hljs-number">27000</span>       <span class="hljs-comment">// int</span>
   },
   {
     <span class="hljs-string">"host"</span> : <span class="hljs-string">"cluster2"</span>, <span class="hljs-comment">// string</span>
     <span class="hljs-string">"port"</span> : <span class="hljs-number">28000</span>       <span class="hljs-comment">// int</span>
   },
   ...
 ],
 <span class="hljs-string">"replicaSet"</span> :  <span class="hljs-string">"foo"</span>,    <span class="hljs-comment">// string</span>
 <span class="hljs-string">"serverSelectionTimeoutMS"</span> : <span class="hljs-number">30000</span>, <span class="hljs-comment">// long</span>

 <span class="hljs-comment">// Connection Pool Settings</span>
 <span class="hljs-string">"maxPoolSize"</span> : <span class="hljs-number">50</span>,                <span class="hljs-comment">// int</span>
 <span class="hljs-string">"minPoolSize"</span> : <span class="hljs-number">25</span>,                <span class="hljs-comment">// int</span>
 <span class="hljs-string">"maxIdleTimeMS"</span> : <span class="hljs-number">300000</span>,          <span class="hljs-comment">// long</span>
 <span class="hljs-string">"maxLifeTimeMS"</span> : <span class="hljs-number">3600000</span>,         <span class="hljs-comment">// long</span>
 <span class="hljs-string">"waitQueueMultiple"</span>  : <span class="hljs-number">10</span>,         <span class="hljs-comment">// int</span>
 <span class="hljs-string">"waitQueueTimeoutMS"</span> : <span class="hljs-number">10000</span>,      <span class="hljs-comment">// long</span>
 <span class="hljs-string">"maintenanceFrequencyMS"</span> : <span class="hljs-number">2000</span>,   <span class="hljs-comment">// long</span>
 <span class="hljs-string">"maintenanceInitialDelayMS"</span> : <span class="hljs-number">500</span>, <span class="hljs-comment">// long</span>

 <span class="hljs-comment">// Credentials / Auth</span>
 <span class="hljs-string">"username"</span>   : <span class="hljs-string">"john"</span>,     <span class="hljs-comment">// string</span>
 <span class="hljs-string">"password"</span>   : <span class="hljs-string">"passw0rd"</span>, <span class="hljs-comment">// string</span>
 <span class="hljs-string">"authSource"</span> : <span class="hljs-string">"some.db"</span>   <span class="hljs-comment">// string</span>
 <span class="hljs-comment">// Auth mechanism</span>
 <span class="hljs-string">"authMechanism"</span>     : <span class="hljs-string">"GSSAPI"</span>,        <span class="hljs-comment">// string</span>
 <span class="hljs-string">"gssapiServiceName"</span> : <span class="hljs-string">"myservicename"</span>, <span class="hljs-comment">// string</span>

 <span class="hljs-comment">// Socket Settings</span>
 <span class="hljs-string">"connectTimeoutMS"</span> : <span class="hljs-number">300000</span>, <span class="hljs-comment">// int</span>
 <span class="hljs-string">"socketTimeoutMS"</span>  : <span class="hljs-number">100000</span>, <span class="hljs-comment">// int</span>
 <span class="hljs-string">"sendBufferSize"</span>    : <span class="hljs-number">8192</span>,  <span class="hljs-comment">// int</span>
 <span class="hljs-string">"receiveBufferSize"</span> : <span class="hljs-number">8192</span>,  <span class="hljs-comment">// int</span>
 <span class="hljs-string">"keepAlive"</span> : <span class="hljs-literal">true</span>           <span class="hljs-comment">// boolean</span>

 <span class="hljs-comment">// Heartbeat socket settings</span>
 <span class="hljs-string">"heartbeat.socket"</span> : {
 <span class="hljs-string">"connectTimeoutMS"</span> : <span class="hljs-number">300000</span>, <span class="hljs-comment">// int</span>
 <span class="hljs-string">"socketTimeoutMS"</span>  : <span class="hljs-number">100000</span>, <span class="hljs-comment">// int</span>
 <span class="hljs-string">"sendBufferSize"</span>    : <span class="hljs-number">8192</span>,  <span class="hljs-comment">// int</span>
 <span class="hljs-string">"receiveBufferSize"</span> : <span class="hljs-number">8192</span>,  <span class="hljs-comment">// int</span>
 <span class="hljs-string">"keepAlive"</span> : <span class="hljs-literal">true</span>           <span class="hljs-comment">// boolean</span>
 }

 <span class="hljs-comment">// Server Settings</span>
 <span class="hljs-string">"heartbeatFrequencyMS"</span> :    <span class="hljs-number">1000</span> <span class="hljs-comment">// long</span>
 <span class="hljs-string">"minHeartbeatFrequencyMS"</span> : <span class="hljs-number">500</span> <span class="hljs-comment">// long</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Driver option descriptions</strong></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>host</code></dt>
<dd>
<p>The host the MongoDB instance is running. Defaults to <code>127.0.0.1</code>. This is ignored if <code>hosts</code> is specified</p>
</dd>
<dt class="hdlist1"><code>port</code></dt>
<dd>
<p>The port the MongoDB instance is listening on. Defaults to <code>27017</code>. This is ignored if <code>hosts</code> is specified</p>
</dd>
<dt class="hdlist1"><code>hosts</code></dt>
<dd>
<p>An array representing the hosts and ports to support a MongoDB cluster (sharding / replication)</p>
</dd>
<dt class="hdlist1"><code>host</code></dt>
<dd>
<p>A host in the cluster</p>
</dd>
<dt class="hdlist1"><code>port</code></dt>
<dd>
<p>The port a host in the cluster is listening on</p>
</dd>
<dt class="hdlist1"><code>replicaSet</code></dt>
<dd>
<p>The name of the replica set, if the MongoDB instance is a member of a replica set</p>
</dd>
<dt class="hdlist1"><code>serverSelectionTimeoutMS</code></dt>
<dd>
<p>The time in milliseconds that the mongo driver will wait to select a server for an operation before raising an error.</p>
</dd>
<dt class="hdlist1"><code>maxPoolSize</code></dt>
<dd>
<p>The maximum number of connections in the connection pool. The default value is <code>100</code></p>
</dd>
<dt class="hdlist1"><code>minPoolSize</code></dt>
<dd>
<p>The minimum number of connections in the connection pool. The default value is <code>0</code></p>
</dd>
<dt class="hdlist1"><code>maxIdleTimeMS</code></dt>
<dd>
<p>The maximum idle time of a pooled connection. The default value is <code>0</code> which means there is no limit</p>
</dd>
<dt class="hdlist1"><code>maxLifeTimeMS</code></dt>
<dd>
<p>The maximum time a pooled connection can live for. The default value is <code>0</code> which means there is no limit</p>
</dd>
<dt class="hdlist1"><code>waitQueueMultiple</code></dt>
<dd>
<p>The maximum number of waiters for a connection to become available from the pool. Default value is <code>500</code></p>
</dd>
<dt class="hdlist1"><code>waitQueueTimeoutMS</code></dt>
<dd>
<p>The maximum time that a thread may wait for a connection to become available. Default value is <code>120000</code> (2 minutes)</p>
</dd>
<dt class="hdlist1"><code>maintenanceFrequencyMS</code></dt>
<dd>
<p>The time period between runs of the maintenance job. Default is <code>0</code>.</p>
</dd>
<dt class="hdlist1"><code>maintenanceInitialDelayMS</code></dt>
<dd>
<p>The period of time to wait before running the first maintenance job on the connection pool. Default is <code>0</code>.</p>
</dd>
<dt class="hdlist1"><code>username</code></dt>
<dd>
<p>The username to authenticate. Default is <code>null</code> (meaning no authentication required)</p>
</dd>
<dt class="hdlist1"><code>password</code></dt>
<dd>
<p>The password to use to authenticate.</p>
</dd>
<dt class="hdlist1"><code>authSource</code></dt>
<dd>
<p>The database name associated with the user&#8217;s credentials. Default value is the <code>db_name</code> value.</p>
</dd>
<dt class="hdlist1"><code>authMechanism</code></dt>
<dd>
<p>The authentication mechanism to use. See [Authentication](<a href="http://docs.mongodb.org/manual/core/authentication/" class="bare">http://docs.mongodb.org/manual/core/authentication/</a>) for more details.</p>
</dd>
<dt class="hdlist1"><code>gssapiServiceName</code></dt>
<dd>
<p>The Kerberos service name if <code>GSSAPI</code> is specified as the <code>authMechanism</code>.</p>
</dd>
<dt class="hdlist1"><code>connectTimeoutMS</code></dt>
<dd>
<p>The time in milliseconds to attempt a connection before timing out. Default is <code>10000</code> (10 seconds)</p>
</dd>
<dt class="hdlist1"><code>socketTimeoutMS</code></dt>
<dd>
<p>The time in milliseconds to attempt a send or receive on a socket before the attempt times out. Default is <code>0</code> meaning there is no timeout</p>
</dd>
<dt class="hdlist1"><code>sendBufferSize</code></dt>
<dd>
<p>Sets the send buffer size (SO_SNDBUF) for the socket. Default is <code>0</code>, meaning it will use the OS default for this option.</p>
</dd>
<dt class="hdlist1"><code>receiveBufferSize</code></dt>
<dd>
<p>Sets the receive buffer size (SO_RCVBUF) for the socket. Default is <code>0</code>, meaning it will use the OS default for this option.</p>
</dd>
<dt class="hdlist1"><code>keepAlive</code></dt>
<dd>
<p>Sets the keep alive (SO_KEEPALIVE) for the socket. Default is <code>false</code></p>
</dd>
<dt class="hdlist1"><code>heartbeat.socket</code></dt>
<dd>
<p>Configures the socket settings for the cluster monitor of the MongoDB java driver.</p>
</dd>
<dt class="hdlist1"><code>heartbeatFrequencyMS</code></dt>
<dd>
<p>The frequency that the cluster monitor attempts to reach each server. Default is <code>5000</code> (5 seconds)</p>
</dd>
<dt class="hdlist1"><code>minHeartbeatFrequencyMS</code></dt>
<dd>
<p>The minimum heartbeat frequency. The default value is <code>1000</code> (1 second)</p>
</dd>
<dt class="hdlist1"><code>ssl</code></dt>
<dd>
<p>Enable ssl between the vertx-mongo-client and mongo</p>
</dd>
<dt class="hdlist1"><code>trustAll</code></dt>
<dd>
<p>When using ssl, trust <em>ALL</em> certificates. <strong>WARNING</strong> - Trusting <em>ALL</em> certificates will open you up to potential security issues such as MITM attacks.</p>
</dd>
<dt class="hdlist1"><code>caPath</code></dt>
<dd>
<p>Set a path to a file that contains a certificate that will be used as a source of trust when making SSL connections to mongo.</p>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">注意</div>
</td>
<td class="content">
Most of the default values listed above use the default values of the MongoDB Java Driver.
Please consult the driver documentation for up to date information.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_rxjava_2_api"><a class="anchor" href="#_rxjava_2_api"></a>RxJava 2 API</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Mongo client provides an Rxified version of the original API.</p>
</div>
<div class="sect2">
<h3 id="_creating_an_rxified_client"><a class="anchor" href="#_creating_an_rxified_client"></a>Creating an Rxified client</h3>
<div class="paragraph">
<p>To create an Rxified Mongo client, make sure to import the <code><a href="../../apidocs/io/vertx/reactivex/ext/mongo/MongoClient.html">MongoClient</a></code> class.
Then use one of the <code>create</code> methods to get an instance:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">MongoClient client = MongoClient.createShared(vertx, config);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_finding_documents_in_batches_2"><a class="anchor" href="#_finding_documents_in_batches_2"></a>Finding documents in batches</h3>
<div class="paragraph">
<p>A <code><a href="../../apidocs/io/vertx/reactivex/core/streams/ReadStream.html">ReadStream</a></code> can be converted to a <code><a href="../../apidocs/io/reactivex/Flowable.html">Flowable</a></code>, which is handy when you have to deal with large data sets:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">JsonObject query = <span class="hljs-keyword">new</span> JsonObject()
  .put(<span class="hljs-string">"author"</span>, <span class="hljs-string">"J. R. R. Tolkien"</span>);

ReadStream&lt;JsonObject&gt; books = mongoClient.findBatch(<span class="hljs-string">"book"</span>, query);

<span class="hljs-comment">// Convert the stream to a Flowable</span>
Flowable&lt;JsonObject&gt; flowable = books.toFlowable();

flowable.subscribe(doc -&gt; {
  System.out.println(<span class="hljs-string">"Found doc: "</span> + doc.encodePrettily());
}, throwable -&gt; {
  throwable.printStackTrace();
}, () -&gt; {
  System.out.println(<span class="hljs-string">"End of research"</span>);
});</code></pre>
</div>
</div>
</div>
</div>
</div></div></div></div></div></div><footer><div class="container"><div class="footer-nav-section"><div class="footer-nav-list footer-logo"><a href="/"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAxMTI1LjYgMzE1LjIiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxzdHlsZT4uc3Qwe2ZpbGw6Izc4MmE5MX08L3N0eWxlPjxwYXRoIGQ9Ik0xMjAuOSAyMTQuMkwxOTAuNSAwaDUyLjNsLTk4LjUgMjczLjhIOTguMkwwIDBoNTIuMWw2OC44IDIxNC4yem0yOTEuMi02Mi42SDI5OS42djg0LjJINDMxdjM4SDI1MlYwaDE3Ny43djM4LjRIMjk5LjZWMTE0aDExMi41djM3LjZ6bTgzLjctMTEzLjJINTQ2YzE2LjUuMyAyOSA0LjQgMzcuMyAxMi40IDguMyA4IDEyLjUgMTkuNCAxMi41IDM0IDAgMTQtNC41IDI1LjEtMTMuNSAzMy4yLTkgOC4xLTIxLjYgMTIuMS0zNy42IDEyLjFoLTI3LjF2MjQuMmw4Ni4xIDExOS41aDUxdi0yLjRsLTc3LjItMTA2LjdjMjQuOS01LjUgNDMuMy0yMS43IDUyLjYtMzUuOSA4LjItMTIuNiAxMy4zLTI3LjcgMTMuMy00NiAwLTI2LjgtOC42LTQ3LjQtMjUuOC02MS41QzYwMC41IDcuMSA1NzYuMSAwIDU0NC41IDBoLTk2LjN2MjczLjhoNDcuNiIvPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDUyLjMgMTU3LjdsLTQxLjUgNjIuNyAyOS43IDUzLjRoODUuMXoiLz48Y2lyY2xlIGNsYXNzPSJzdDAiIGN4PSI4MjcuOSIgY3k9IjI3NC43IiByPSI0MC41Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTEwMzcgMGwtNDcuNiA3NC4yTDk0OSAwaC04NGw4NS4zIDEzNS44LTY3LjEgMTA1LjdjNS43IDkuNSA5LjEgMjAuNSA5LjIgMzIuNGg1MC4xTDExMjEuMyAwSDEwMzd6Ii8+PHBhdGggZD0iTTc2My41IDI3My44Yy4xLTkuOSAyLjUtMTkuMiA2LjYtMjcuNVYzOC40aDg1LjRWMEg2MzguMnYzOC40aDg0LjZ2MjM1LjRoNDAuN3oiLz48L3N2Zz4=" alt="Vert.x Logo"/></a></div><div class="footer-nav-list"><h5>Eclipse Vert.x</h5><ul class=""><li><a class="navbar-menu-item" href="/docs/">文档</a></li><li><a href="/download/">下载</a></li><li><a href="/blog/">博客</a></li><li><a href="/community/">社区</a></li><li><a href="/translation/">翻译团队</a></li><li><a href="https://github.com/eclipse-vertx/vert.x">GitHub</a></li><li><a href="https://github.com/vertx-china/vertx-web-site">翻译GitHub</a></li></ul></div><div class="footer-nav-list"><h5>资源</h5><ul class=""><li><a href="/faq/">答疑</a></li><li><a href="/channels/">Channels</a></li><li><a href="https://how-to.vertx.io/">How-To’s</a></li><li><a href="https://start.vertx.io/">App Generator</a></li></ul></div><div class="footer-nav-list"><h5>Eclipse</h5><ul class=""><li><a href="https://www.eclipse.org/">Eclipse Foundation</a></li><li><a href="https://www.eclipse.org/legal/privacy.php">Privacy Policy</a></li><li><a href="https://www.eclipse.org/legal/termsofuse.php">Terms of Use</a></li><li><a href="https://www.eclipse.org/legal/copyright.php">Copyright Agent</a></li><li><a href="https://www.eclipse.org/legal/">Legal Resources</a></li></ul></div></div><div class="footer-copyright"><div class="footer-copyright-remarks">© <!-- -->2021<!-- --> Eclipse Vert.x<br/>Eclipse Vert.x is open source and dual-licensed under the <a href="https://creativecommons.org/licenses/by-sa/3.0/" target="_blank" rel="noopener noreferrer">Eclipse Public License 2.0</a> and the <a href="https://www.apache.org/licenses/LICENSE-2.0.html" target="_blank" rel="noopener noreferrer">Apache License 2.0</a>. <br class="footer-copyright-break"/>Website design by <a href="https://michelkraemer.com" target="_blank" rel="noopener noreferrer">Michel Krämer</a>.</div><div class="footer-copyright-eclipse-logo"><a href="https://www.eclipse.org/" target="_blank" rel="noopener noreferrer"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAyODEuMyA5MS4xIiB4bWw6c3BhY2U9InByZXNlcnZlIj48c3R5bGU+LnN0MHtmaWxsOiNmNzk0MjJ9LnN0MXtmaWxsOiMzZDNjM2J9PC9zdHlsZT48ZyBpZD0iTGF5ZXJfMV8xXyI+PHBhdGggY2xhc3M9InN0MCIgZD0iTTI2NS43IDg0TDI1NyA3M2gtMi43djE3LjdoMy4zdi0xMmw5LjMgMTJoMi4xVjczaC0zLjN2MTF6bS0zMi40LTguM2M0LjIgMCA1LjggMy4zIDUuOCA2LjNzLTEuNiA2LTUuOCA2LTUuNy0zLjEtNS44LTYgMS43LTYuMyA1LjgtNi4zem0wLTNjLTYuMSAwLTkuMSA0LjctOS4xIDkuMyAwIDQuNyAyLjkgOS4xIDkuMSA5LjFzOS00LjYgOS4xLTkuMi0zLTkuMi05LjEtOS4yem0tMjEuMiAxOFY3M2gtMy4zdjE3LjdoMy4zem0tMjMuNiAwaDMuM1Y3Nmg1LjZ2LTNoLTE0LjZ2M2g1LjZsLjEgMTQuN3ptLTE4LjktNi41SDE2M2wzLjMtNy42IDMuMyA3LjZ6bTIuOCA2LjVoMy42TDE2OC4yIDczaC0zLjZsLTggMTcuN2gzLjZsMS41LTMuM2g5LjNsMS40IDMuM3ptLTM4LTE0LjZoMy42YzMuOSAwIDUuNSAyLjggNS41IDUuNS4xIDIuOC0xLjUgNS44LTUuNSA1LjhoLTMuNlY3Ni4xem0zLjctMy4xaC02Ljl2MTcuN2g2LjljNi4yIDAgOC45LTQuNSA4LjktOXMtMi44LTguNy04LjktOC43em0tMjIuNCAxMUwxMDcgNzNoLTIuN3YxNy43aDMuM3YtMTJsOS4zIDEyaDIuMVY3M2gtMy4zdjExek04OC4yIDczdjEwLjJjMCAzLTEuNiA0LjktNC4zIDQuOXMtNC42LTEuNy00LjYtNC45VjczSDc2djEwLjFjMCA1LjMgMy42IDcuOSA3LjkgNy45IDQuNCAwIDcuNy0yLjcgNy43LTcuOVY3M2gtMy40em0tMzMgMi43YzQuMiAwIDUuOCAzLjMgNS44IDYuM3MtMS42IDYtNS44IDYtNS43LTMuMS01LjgtNiAxLjctNi4zIDUuOC02LjN6bTAtM2MtNi4xIDAtOS4xIDQuNy05LjEgOS4zczIuOSA5LjEgOS4xIDkuMSA5LTQuNiA5LjEtOS4yLTMtOS4yLTkuMS05LjJ6bS0yOS43IDE4di02LjVoOC45di0zLjFoLTguOXYtNC44aDkuNFY3M0gyMi4ydjE3LjZoMy4zeiIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yNjkuNCA1NC40aC0yMi4ydi04LjloMjEuNHYtNi45aC0yMS40di05LjFoMjIuMnYtNy4yaC0yOS42djM5LjVoMjkuNnYtNy40em0tNDAtMjUuNmMtMy02LjEtOS40LTcuOC0xNS41LTcuOC03LjMgMC0xNS4zIDMuNC0xNS4zIDExLjUgMCA4LjkgNy40IDExIDE1LjUgMTIgNS4yLjYgOS4xIDIuMSA5LjEgNS44IDAgNC4zLTQuNCA1LjktOS4xIDUuOXMtOS40LTEuOS0xMS4xLTYuM2wtNi4yIDMuMmMyLjkgNy4yIDkuMSA5LjcgMTcuMiA5LjcgOC44IDAgMTYuNi0zLjggMTYuNi0xMi42IDAtOS40LTcuNy0xMS42LTE1LjktMTIuNi00LjctLjYtOC44LTEuNS04LjgtNSAwLTIuOSAyLjYtNS4yIDguMi01LjIgNC4zIDAgOCAyLjIgOS40IDQuNGw1LjktM3pNMTc2IDIyLjJjLTYuMi0uMS0xMi40IDAtMTguNiAwdjM5LjVoNy40VjUwLjFIMTc2YzE5LjQgMCAxOS40LTI3LjkgMC0yNy45em0tMTEuMSA3LjFIMTc2YzkuNSAwIDkuNSAxNCAwIDE0aC0xMS4ybC4xLTE0em0tMTggMzIuNVYyMi4yaC03LjR2MzkuNWw3LjQuMXptLTQ0LTM5LjZ2MzkuNWgyNy43di02LjloLTIwLjNWMjIuMmgtNy40ek05MC43IDUxLjdjLTIuNyAyLjUtNi4yIDQtOS45IDQtOS44IDAtMTMuNS02LjgtMTMuNi0xMy40czQuMS0xMy43IDEzLjYtMTMuN2MzLjUtLjEgNyAxLjMgOS41IDMuN2w1LTQuOGMtMy44LTMuOS05LjEtNi0xNC41LTYtMTQuMyAwLTIxIDEwLjUtMjAuOSAyMC44czYuMyAyMC4zIDIwLjkgMjAuM2M1LjYuMSAxMS0yIDE1LTUuOWwtNS4xLTV6bS0zOSAyLjdIMjkuNXYtOC45aDIxLjR2LTYuOUgyOS41di05LjFoMjIuMnYtNy4ySDIyLjJ2MzkuNWgyOS42bC0uMS03LjR6Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTkuOCAxOC4yQzE4LjggNC4xIDM2LjktLjggNTIuMSA2bC0xLS43QzM1LjctNC42IDE1LjItLjEgNS4zIDE1LjNzLTUuNCAzNS45IDEwIDQ1LjhsMS4xLjZDMy44IDUwLjguOCAzMi4zIDkuOCAxOC4yeiIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yNzIuMiAyNi4xYzAtMi41IDIuMS00LjYgNC42LTQuNiAyLjUgMCA0LjYgMi4xIDQuNiA0LjYgMCAyLjUtMi4xIDQuNi00LjYgNC42LTIuNiAwLTQuNi0yLjEtNC42LTQuNnptOC42IDBjMC0yLjItMS44LTQuMS00LTQuMXMtNC4xIDEuOC00LjEgNC4xYzAgMi4yIDEuNyA0IDMuOSA0LjFoLjFjMi4zIDAgNC4xLTEuOCA0LjEtNC4xem0tNi0yLjVoMi4zYzEuMSAwIDEuOS41IDEuOSAxLjYgMCAuNy0uNCAxLjMtMS4xIDEuNWwxLjIgMS43aC0xLjRsLTEtMS41aC0uN3YxLjVoLTEuMWwtLjEtNC44em0yLjIgMi4zYy41IDAgLjgtLjMuOC0uN3MtLjMtLjctLjgtLjdoLTF2MS4zbDEgLjF6Ii8+PC9nPjwvc3ZnPg==" alt="Eclipse foundation Logo"/></a></div></div></div></footer></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"slug":"3.9.6/vertx-mongo-client/java","title":"Vert.x MongoDB Client","fallbackGitHubStars":null,"toc":"\u003cdiv id=\"toc\" class=\"toc\"\u003e\n\u003cdiv id=\"toctitle\"\u003eTable of Contents\u003c/div\u003e\n\u003cul class=\"sectlevel1\"\u003e\n\u003cli\u003e\u003ca href=\"#_using_vert_x_mongodb_client\"\u003eUsing Vert.x MongoDB Client\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_creating_a_client\"\u003eCreating a client\u003c/a\u003e\n\u003cul class=\"sectlevel2\"\u003e\n\u003cli\u003e\u003ca href=\"#_using_the_default_shared_pool\"\u003eUsing the default shared pool\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_specifying_a_pool_source_name\"\u003eSpecifying a pool source name\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_creating_a_client_with_a_non_shared_data_pool\"\u003eCreating a client with a non shared data pool\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_using_the_api\"\u003eUsing the API\u003c/a\u003e\n\u003cul class=\"sectlevel2\"\u003e\n\u003cli\u003e\u003ca href=\"#_saving_documents\"\u003eSaving documents\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_inserting_documents\"\u003eInserting documents\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_updating_documents\"\u003eUpdating documents\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_replacing_documents\"\u003eReplacing documents\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_bulk_operations\"\u003eBulk operations\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_finding_documents\"\u003eFinding documents\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_finding_documents_in_batches\"\u003eFinding documents in batches\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_finding_a_single_document\"\u003eFinding a single document\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_removing_documents\"\u003eRemoving documents\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_removing_a_single_document\"\u003eRemoving a single document\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_counting_documents\"\u003eCounting documents\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_managing_mongodb_collections\"\u003eManaging MongoDB collections\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_running_other_mongodb_commands\"\u003eRunning other MongoDB commands\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_mongodb_extended_json_support\"\u003eMongoDB Extended JSON support\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_getting_distinct_values\"\u003eGetting distinct values\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_configuring_the_client\"\u003eConfiguring the client\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_rxjava_2_api\"\u003eRxJava 2 API\u003c/a\u003e\n\u003cul class=\"sectlevel2\"\u003e\n\u003cli\u003e\u003ca href=\"#_creating_an_rxified_client\"\u003eCreating an Rxified client\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_finding_documents_in_batches_2\"\u003eFinding documents in batches\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e","contents":"\u003ch1\u003eVert.x MongoDB Client\u003c/h1\u003e\n\n\u003cdiv id=\"preamble\"\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eA Vert.x client allowing applications to interact with a MongoDB instance, whether that\u0026#8217;s\nsaving, retrieving, searching, or deleting documents. Mongo is a great match for persisting data in a Vert.x application\nas it natively handles JSON (BSON) documents.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e\u003cstrong\u003eFeatures\u003c/strong\u003e\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eCompletely non-blocking\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eCustom codec to support fast serialization to/from Vert.x JSON\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eSupports a majority of the configuration options from the MongoDB Java Driver\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThis client is based on the\n\u003ca href=\"http://mongodb.github.io/mongo-java-driver/3.2/driver-async/getting-started\"\u003eMongoDB Async Driver\u003c/a\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_using_vert_x_mongodb_client\"\u003e\u003ca class=\"anchor\" href=\"#_using_vert_x_mongodb_client\"\u003e\u003c/a\u003eUsing Vert.x MongoDB Client\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eTo use this project, add the following dependency to the \u003cem\u003edependencies\u003c/em\u003e section of your build descriptor:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eMaven (in your \u003ccode\u003epom.xml\u003c/code\u003e):\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-xml\" data-lang=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\n \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003eio.vertx\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003evertx-mongo-client\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e3.9.6\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eGradle (in your \u003ccode\u003ebuild.gradle\u003c/code\u003e file):\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-groovy\" data-lang=\"groovy\"\u003ecompile \u003cspan class=\"hljs-string\"\u003e'io.vertx:vertx-mongo-client:3.9.6'\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_creating_a_client\"\u003e\u003ca class=\"anchor\" href=\"#_creating_a_client\"\u003e\u003c/a\u003eCreating a client\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eYou can create a client in several ways:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_using_the_default_shared_pool\"\u003e\u003ca class=\"anchor\" href=\"#_using_the_default_shared_pool\"\u003e\u003c/a\u003eUsing the default shared pool\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIn most cases you will want to share a pool between different client instances.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eE.g. you scale your application by deploying multiple instances of your verticle and you want each verticle instance\nto share the same pool so you don\u0026#8217;t end up with multiple pools\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe simplest way to do this is as follows:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eMongoClient client = MongoClient.createShared(vertx, config);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe first call to \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoClient.html#createShared-io.vertx.core.Vertx-io.vertx.core.json.JsonObject-\"\u003eMongoClient.createShared\u003c/a\u003e\u003c/code\u003e\nwill actually create the pool, and the specified config will be used.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eSubsequent calls will return a new client instance that uses the same pool, so the configuration won\u0026#8217;t be used.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_specifying_a_pool_source_name\"\u003e\u003ca class=\"anchor\" href=\"#_specifying_a_pool_source_name\"\u003e\u003c/a\u003eSpecifying a pool source name\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eYou can create a client specifying a pool source name as follows\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eMongoClient client = MongoClient.createShared(vertx, config, \u003cspan class=\"hljs-string\"\u003e\"MyPoolName\"\u003c/span\u003e);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIf different clients are created using the same Vert.x instance and specifying the same pool name, they will\nshare the same pool.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe first call to \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoClient.html#createShared-io.vertx.core.Vertx-io.vertx.core.json.JsonObject-\"\u003eMongoClient.createShared\u003c/a\u003e\u003c/code\u003e\nwill actually create the pool, and the specified config will be used.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eSubsequent calls will return a new client instance that uses the same pool, so the configuration won\u0026#8217;t be used.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eUse this way of creating if you wish different groups of clients to have different pools, e.g. they\u0026#8217;re\ninteracting with different databases.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_creating_a_client_with_a_non_shared_data_pool\"\u003e\u003ca class=\"anchor\" href=\"#_creating_a_client_with_a_non_shared_data_pool\"\u003e\u003c/a\u003eCreating a client with a non shared data pool\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIn most cases you will want to share a pool between different client instances.\nHowever, it\u0026#8217;s possible you want to create a client instance that doesn\u0026#8217;t share its pool with any other client.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIn that case you can use \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoClient.html#create-io.vertx.core.Vertx-io.vertx.core.json.JsonObject-\"\u003eMongoClient.create\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eMongoClient client = MongoClient.create(vertx, config);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThis is equivalent to calling \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoClient.html#createShared-io.vertx.core.Vertx-io.vertx.core.json.JsonObject-java.lang.String-\"\u003eMongoClient.createShared\u003c/a\u003e\u003c/code\u003e\nwith a unique pool name each time.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_using_the_api\"\u003e\u003ca class=\"anchor\" href=\"#_using_the_api\"\u003e\u003c/a\u003eUsing the API\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe client API is represented by \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoClient.html\"\u003eMongoClient\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_saving_documents\"\u003e\u003ca class=\"anchor\" href=\"#_saving_documents\"\u003e\u003c/a\u003eSaving documents\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eTo save a document you use \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoClient.html#save-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.core.Handler-\"\u003esave\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIf the document has no \u003ccode\u003e\\_id\u003c/code\u003e field, it is inserted, otherwise, it is \u003cem\u003eupserted\u003c/em\u003e.\nUpserted means it is inserted if it doesn\u0026#8217;t already exist, otherwise it is updated.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIf the document is inserted and has no id, then the id field generated will be returned to the result handler.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eHere\u0026#8217;s an example of saving a document and getting the id back\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eJsonObject document = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject()\n  .put(\u003cspan class=\"hljs-string\"\u003e\"title\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"The Hobbit\"\u003c/span\u003e);\nmongoClient.save(\u003cspan class=\"hljs-string\"\u003e\"books\"\u003c/span\u003e, document, res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    String id = res.result();\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\"Saved book with id \"\u003c/span\u003e + id);\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    res.cause().printStackTrace();\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eAnd here\u0026#8217;s an example of saving a document which already has an id.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eJsonObject document = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject()\n  .put(\u003cspan class=\"hljs-string\"\u003e\"title\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"The Hobbit\"\u003c/span\u003e)\n  .put(\u003cspan class=\"hljs-string\"\u003e\"_id\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"123244\"\u003c/span\u003e);\nmongoClient.save(\u003cspan class=\"hljs-string\"\u003e\"books\"\u003c/span\u003e, document, res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    \u003cspan class=\"hljs-comment\"\u003e// ...\u003c/span\u003e\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    res.cause().printStackTrace();\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_inserting_documents\"\u003e\u003ca class=\"anchor\" href=\"#_inserting_documents\"\u003e\u003c/a\u003eInserting documents\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eTo insert a document you use \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoClient.html#insert-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.core.Handler-\"\u003einsert\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIf the document is inserted and has no id, then the id field generated will be returned to the result handler.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eJsonObject document = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject()\n  .put(\u003cspan class=\"hljs-string\"\u003e\"title\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"The Hobbit\"\u003c/span\u003e);\nmongoClient.insert(\u003cspan class=\"hljs-string\"\u003e\"books\"\u003c/span\u003e, document, res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    String id = res.result();\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\"Inserted book with id \"\u003c/span\u003e + id);\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    res.cause().printStackTrace();\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIf a document is inserted with an id, and a document with that id already exists, the insert will fail:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eJsonObject document = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject()\n  .put(\u003cspan class=\"hljs-string\"\u003e\"title\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"The Hobbit\"\u003c/span\u003e)\n  .put(\u003cspan class=\"hljs-string\"\u003e\"_id\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"123244\"\u003c/span\u003e);\nmongoClient.insert(\u003cspan class=\"hljs-string\"\u003e\"books\"\u003c/span\u003e, document, res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    \u003cspan class=\"hljs-comment\"\u003e//...\u003c/span\u003e\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    \u003cspan class=\"hljs-comment\"\u003e// Will fail if the book with that id already exists.\u003c/span\u003e\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_updating_documents\"\u003e\u003ca class=\"anchor\" href=\"#_updating_documents\"\u003e\u003c/a\u003eUpdating documents\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eTo update a documents you use \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoClient.html#updateCollection-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.core.json.JsonObject-io.vertx.core.Handler-\"\u003eupdateCollection\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThis updates one or multiple documents in a collection.\nThe json object that is passed in the \u003ccode\u003eupdateCollection\u003c/code\u003e parameter must contain\n\u003ca href=\"http://docs.mongodb.org/manual/reference/operator/update-field/\"\u003eUpdate Operators\u003c/a\u003e\nand determines how the object is updated.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe json object specified in the query parameter determines which documents in the collection will be updated.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eHere\u0026#8217;s an example of updating a document in the books collection:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eJsonObject query = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject()\n  .put(\u003cspan class=\"hljs-string\"\u003e\"title\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"The Hobbit\"\u003c/span\u003e);\n\u003cspan class=\"hljs-comment\"\u003e// Set the author field\u003c/span\u003e\nJsonObject update = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject().put(\u003cspan class=\"hljs-string\"\u003e\"$set\"\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject()\n  .put(\u003cspan class=\"hljs-string\"\u003e\"author\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"J. R. R. Tolkien\"\u003c/span\u003e));\nmongoClient.updateCollection(\u003cspan class=\"hljs-string\"\u003e\"books\"\u003c/span\u003e, query, update, res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\"Book updated !\"\u003c/span\u003e);\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    res.cause().printStackTrace();\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eTo specify if the update should upsert or update multiple documents, use\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoClient.html#updateCollectionWithOptions-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.core.json.JsonObject-io.vertx.ext.mongo.UpdateOptions-io.vertx.core.Handler-\"\u003eupdateCollectionWithOptions\u003c/a\u003e\u003c/code\u003e\nand pass in an instance of \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/UpdateOptions.html\"\u003eUpdateOptions\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThis has the following fields:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"dlist\"\u003e\n\u003cdl\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003emulti\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003eset to true to update multiple documents\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003eupsert\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003eset to true to insert the document if the query doesn\u0026#8217;t match\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003ewriteConcern\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003ethe write concern for this operation\u003c/p\u003e\n\u003c/dd\u003e\n\u003c/dl\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eJsonObject query = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject()\n  .put(\u003cspan class=\"hljs-string\"\u003e\"title\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"The Hobbit\"\u003c/span\u003e);\n\u003cspan class=\"hljs-comment\"\u003e// Set the author field\u003c/span\u003e\nJsonObject update = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject().put(\u003cspan class=\"hljs-string\"\u003e\"$set\"\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject()\n  .put(\u003cspan class=\"hljs-string\"\u003e\"author\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"J. R. R. Tolkien\"\u003c/span\u003e));\nUpdateOptions options = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e UpdateOptions().setMulti(\u003cspan class=\"hljs-keyword\"\u003etrue\u003c/span\u003e);\nmongoClient.updateCollectionWithOptions(\u003cspan class=\"hljs-string\"\u003e\"books\"\u003c/span\u003e, query, update, options, res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\"Book updated !\"\u003c/span\u003e);\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    res.cause().printStackTrace();\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_replacing_documents\"\u003e\u003ca class=\"anchor\" href=\"#_replacing_documents\"\u003e\u003c/a\u003eReplacing documents\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eTo replace documents you use \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoClient.html#replaceDocuments-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.core.json.JsonObject-io.vertx.core.Handler-\"\u003ereplaceDocuments\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThis is similar to the update operation, however it does not take any operator.\nInstead it replaces the entire document with the one provided.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eHere\u0026#8217;s an example of replacing a document in the books collection\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eJsonObject query = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject()\n  .put(\u003cspan class=\"hljs-string\"\u003e\"title\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"The Hobbit\"\u003c/span\u003e);\nJsonObject replace = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject()\n  .put(\u003cspan class=\"hljs-string\"\u003e\"title\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"The Lord of the Rings\"\u003c/span\u003e)\n  .put(\u003cspan class=\"hljs-string\"\u003e\"author\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"J. R. R. Tolkien\"\u003c/span\u003e);\nmongoClient.replaceDocuments(\u003cspan class=\"hljs-string\"\u003e\"books\"\u003c/span\u003e, query, replace, res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\"Book replaced !\"\u003c/span\u003e);\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    res.cause().printStackTrace();\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_bulk_operations\"\u003e\u003ca class=\"anchor\" href=\"#_bulk_operations\"\u003e\u003c/a\u003eBulk operations\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eTo execute multiple insert, update, replace, or delete operations at once, use \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoClient.html#bulkWrite-java.lang.String-java.util.List-io.vertx.core.Handler-\"\u003ebulkWrite\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eYou can pass a list of \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/BulkOperation.html\"\u003eBulkOperations\u003c/a\u003e\u003c/code\u003e, with each working similar to the matching single operation.\nYou can pass as many operations, even of the same type, as you wish.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eTo specify if the bulk operation should be executed in order, and with what write option, use \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoClient.html#bulkWriteWithOptions-java.lang.String-java.util.List-io.vertx.ext.mongo.BulkWriteOptions-io.vertx.core.Handler-\"\u003ebulkWriteWithOptions\u003c/a\u003e\u003c/code\u003e\nand pass an instance of \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/BulkWriteOptions.html\"\u003eBulkWriteOptions\u003c/a\u003e\u003c/code\u003e.\nFor more explanation what ordered means, see\n\u003ca href=\"https://docs.mongodb.com/manual/reference/method/db.collection.bulkWrite/#execution-of-operations\"\u003eExecution of Operations\u003c/a\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_finding_documents\"\u003e\u003ca class=\"anchor\" href=\"#_finding_documents\"\u003e\u003c/a\u003eFinding documents\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eTo find documents you use \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoClient.html#find-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.core.Handler-\"\u003efind\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe \u003ccode\u003equery\u003c/code\u003e parameter is used to match the documents in the collection.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eHere\u0026#8217;s a simple example with an empty query that will match all books:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eJsonObject query = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject();\nmongoClient.find(\u003cspan class=\"hljs-string\"\u003e\"books\"\u003c/span\u003e, query, res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e (JsonObject json : res.result()) {\n      System.out.println(json.encodePrettily());\n    }\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    res.cause().printStackTrace();\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eHere\u0026#8217;s another example that will match all books by Tolkien:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eJsonObject query = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject()\n  .put(\u003cspan class=\"hljs-string\"\u003e\"author\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"J. R. R. Tolkien\"\u003c/span\u003e);\nmongoClient.find(\u003cspan class=\"hljs-string\"\u003e\"books\"\u003c/span\u003e, query, res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e (JsonObject json : res.result()) {\n      System.out.println(json.encodePrettily());\n    }\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    res.cause().printStackTrace();\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe matching documents are returned as a list of json objects in the result handler.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eTo specify things like what fields to return, how many results to return, etc use \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoClient.html#findWithOptions-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.ext.mongo.FindOptions-io.vertx.core.Handler-\"\u003efindWithOptions\u003c/a\u003e\u003c/code\u003e\nand pass in the an instance of \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/FindOptions.html\"\u003eFindOptions\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThis has the following fields:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"dlist\"\u003e\n\u003cdl\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003efields\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003eThe fields to return in the results. Defaults to \u003ccode\u003enull\u003c/code\u003e, meaning all fields will be returned\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003esort\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003eThe fields to sort by. Defaults to \u003ccode\u003enull\u003c/code\u003e.\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003elimit\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003eThe limit of the number of results to return. Default to \u003ccode\u003e-1\u003c/code\u003e, meaning all results will be returned.\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003eskip\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003eThe number of documents to skip before returning the results. Defaults to \u003ccode\u003e0\u003c/code\u003e.\u003c/p\u003e\n\u003c/dd\u003e\n\u003c/dl\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_finding_documents_in_batches\"\u003e\u003ca class=\"anchor\" href=\"#_finding_documents_in_batches\"\u003e\u003c/a\u003eFinding documents in batches\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eWhen dealing with large data sets, it is not advised to use the\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoClient.html#find-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.core.Handler-\"\u003efind\u003c/a\u003e\u003c/code\u003e and\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoClient.html#findWithOptions-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.ext.mongo.FindOptions-io.vertx.core.Handler-\"\u003efindWithOptions\u003c/a\u003e\u003c/code\u003e methods.\nIn order to avoid inflating the whole response into memory, use \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoClient.html#findBatch-java.lang.String-io.vertx.core.json.JsonObject-\"\u003efindBatch\u003c/a\u003e\u003c/code\u003e:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eJsonObject query = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject()\n  .put(\u003cspan class=\"hljs-string\"\u003e\"author\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"J. R. R. Tolkien\"\u003c/span\u003e);\nmongoClient.findBatch(\u003cspan class=\"hljs-string\"\u003e\"book\"\u003c/span\u003e, query)\n  .exceptionHandler(throwable -\u0026gt; throwable.printStackTrace())\n  .endHandler(v -\u0026gt; System.out.println(\u003cspan class=\"hljs-string\"\u003e\"End of research\"\u003c/span\u003e))\n  .handler(doc -\u0026gt; System.out.println(\u003cspan class=\"hljs-string\"\u003e\"Found doc: \"\u003c/span\u003e + doc.encodePrettily()));\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe matching documents are emitted one by one by the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/streams/ReadStream.html\"\u003eReadStream\u003c/a\u003e\u003c/code\u003e handler.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/FindOptions.html\"\u003eFindOptions\u003c/a\u003e\u003c/code\u003e has an extra parameter \u003ccode\u003ebatchSize\u003c/code\u003e which you can use to set the number of documents to load at once:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eJsonObject query = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject()\n  .put(\u003cspan class=\"hljs-string\"\u003e\"author\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"J. R. R. Tolkien\"\u003c/span\u003e);\nFindOptions options = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e FindOptions().setBatchSize(\u003cspan class=\"hljs-number\"\u003e100\u003c/span\u003e);\nmongoClient.findBatchWithOptions(\u003cspan class=\"hljs-string\"\u003e\"book\"\u003c/span\u003e, query, options)\n  .exceptionHandler(throwable -\u0026gt; throwable.printStackTrace())\n  .endHandler(v -\u0026gt; System.out.println(\u003cspan class=\"hljs-string\"\u003e\"End of research\"\u003c/span\u003e))\n  .handler(doc -\u0026gt; System.out.println(\u003cspan class=\"hljs-string\"\u003e\"Found doc: \"\u003c/span\u003e + doc.encodePrettily()));\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eBy default, \u003ccode\u003ebatchSize\u003c/code\u003e is set to 20.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_finding_a_single_document\"\u003e\u003ca class=\"anchor\" href=\"#_finding_a_single_document\"\u003e\u003c/a\u003eFinding a single document\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eTo find a single document you use \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoClient.html#findOne-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.core.json.JsonObject-io.vertx.core.Handler-\"\u003efindOne\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThis works just like \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoClient.html#find-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.core.Handler-\"\u003efind\u003c/a\u003e\u003c/code\u003e but it returns just the first matching document.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_removing_documents\"\u003e\u003ca class=\"anchor\" href=\"#_removing_documents\"\u003e\u003c/a\u003eRemoving documents\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eTo remove documents use \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoClient.html#removeDocuments-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.core.Handler-\"\u003eremoveDocuments\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe \u003ccode\u003equery\u003c/code\u003e parameter is used to match the documents in the collection to determine which ones to remove.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eHere\u0026#8217;s an example of removing all Tolkien books:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eJsonObject query = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject()\n  .put(\u003cspan class=\"hljs-string\"\u003e\"author\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"J. R. R. Tolkien\"\u003c/span\u003e);\nmongoClient.removeDocuments(\u003cspan class=\"hljs-string\"\u003e\"books\"\u003c/span\u003e, query, res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\"Never much liked Tolkien stuff!\"\u003c/span\u003e);\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    res.cause().printStackTrace();\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_removing_a_single_document\"\u003e\u003ca class=\"anchor\" href=\"#_removing_a_single_document\"\u003e\u003c/a\u003eRemoving a single document\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eTo remove a single document you use \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoClient.html#removeDocument-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.core.Handler-\"\u003eremoveDocument\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThis works just like \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoClient.html#removeDocuments-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.core.Handler-\"\u003eremoveDocuments\u003c/a\u003e\u003c/code\u003e but it removes just the first matching document.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_counting_documents\"\u003e\u003ca class=\"anchor\" href=\"#_counting_documents\"\u003e\u003c/a\u003eCounting documents\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eTo count documents use \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoClient.html#count-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.core.Handler-\"\u003ecount\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eHere\u0026#8217;s an example that counts the number of Tolkien books. The number is passed to the result handler.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eJsonObject query = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject()\n  .put(\u003cspan class=\"hljs-string\"\u003e\"author\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"J. R. R. Tolkien\"\u003c/span\u003e);\nmongoClient.count(\u003cspan class=\"hljs-string\"\u003e\"books\"\u003c/span\u003e, query, res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    \u003cspan class=\"hljs-keyword\"\u003elong\u003c/span\u003e num = res.result();\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    res.cause().printStackTrace();\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_managing_mongodb_collections\"\u003e\u003ca class=\"anchor\" href=\"#_managing_mongodb_collections\"\u003e\u003c/a\u003eManaging MongoDB collections\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eAll MongoDB documents are stored in collections.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eTo get a list of all collections you can use \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoClient.html#getCollections-io.vertx.core.Handler-\"\u003egetCollections\u003c/a\u003e\u003c/code\u003e\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003emongoClient.getCollections(res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    List\u0026lt;String\u0026gt; collections = res.result();\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    res.cause().printStackTrace();\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eTo create a new collection you can use \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoClient.html#createCollection-java.lang.String-io.vertx.core.Handler-\"\u003ecreateCollection\u003c/a\u003e\u003c/code\u003e\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003emongoClient.createCollection(\u003cspan class=\"hljs-string\"\u003e\"mynewcollectionr\"\u003c/span\u003e, res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    \u003cspan class=\"hljs-comment\"\u003e// Created ok!\u003c/span\u003e\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    res.cause().printStackTrace();\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eTo drop a collection you can use \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoClient.html#dropCollection-java.lang.String-io.vertx.core.Handler-\"\u003edropCollection\u003c/a\u003e\u003c/code\u003e\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"admonitionblock note\"\u003e\n\u003ctable\u003e\n\u003ctr\u003e\n\u003ctd class=\"icon\"\u003e\n\u003cdiv class=\"title\"\u003e注意\u003c/div\u003e\n\u003c/td\u003e\n\u003ctd class=\"content\"\u003e\nDropping a collection will delete all documents within it!\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003emongoClient.dropCollection(\u003cspan class=\"hljs-string\"\u003e\"mynewcollectionr\"\u003c/span\u003e, res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    \u003cspan class=\"hljs-comment\"\u003e// Dropped ok!\u003c/span\u003e\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    res.cause().printStackTrace();\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_running_other_mongodb_commands\"\u003e\u003ca class=\"anchor\" href=\"#_running_other_mongodb_commands\"\u003e\u003c/a\u003eRunning other MongoDB commands\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eYou can run arbitrary MongoDB commands with \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoClient.html#runCommand-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.core.Handler-\"\u003erunCommand\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eCommands can be used to run more advanced MongoDB features, such as using MapReduce.\nFor more information see the mongo docs for supported \u003ca href=\"http://docs.mongodb.org/manual/reference/command\"\u003eCommands\u003c/a\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eHere\u0026#8217;s an example of running an aggregate command. Note that the command name must be specified as a parameter\nand also be contained in the JSON that represents the command. This is because JSON is not ordered but BSON is\nordered and MongoDB expects the first BSON entry to be the name of the command. In order for us to know which\nof the entries in the JSON is the command name it must be specified as a parameter.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eJsonObject command = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject()\n  .put(\u003cspan class=\"hljs-string\"\u003e\"aggregate\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"collection_name\"\u003c/span\u003e)\n  .put(\u003cspan class=\"hljs-string\"\u003e\"pipeline\"\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonArray());\nmongoClient.runCommand(\u003cspan class=\"hljs-string\"\u003e\"aggregate\"\u003c/span\u003e, command, res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    JsonArray resArr = res.result().getJsonArray(\u003cspan class=\"hljs-string\"\u003e\"result\"\u003c/span\u003e);\n    \u003cspan class=\"hljs-comment\"\u003e// etc\u003c/span\u003e\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    res.cause().printStackTrace();\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_mongodb_extended_json_support\"\u003e\u003ca class=\"anchor\" href=\"#_mongodb_extended_json_support\"\u003e\u003c/a\u003eMongoDB Extended JSON support\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eFor now, only \u003ccode\u003edate\u003c/code\u003e, \u003ccode\u003eoid\u003c/code\u003e and \u003ccode\u003ebinary\u003c/code\u003e types are supported\n(see \u003ca href=\"http://docs.mongodb.org/manual/reference/mongodb-extended-json\"\u003eMongoDB Extended JSON\u003c/a\u003e).\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eHere\u0026#8217;s an example of inserting a document with a \u003ccode\u003edate\u003c/code\u003e field:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eJsonObject document = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject()\n  .put(\u003cspan class=\"hljs-string\"\u003e\"title\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"The Hobbit\"\u003c/span\u003e)\n  \u003cspan class=\"hljs-comment\"\u003e//ISO-8601 date\u003c/span\u003e\n  .put(\u003cspan class=\"hljs-string\"\u003e\"publicationDate\"\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject().put(\u003cspan class=\"hljs-string\"\u003e\"$date\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"1937-09-21T00:00:00+00:00\"\u003c/span\u003e));\nmongoService.save(\u003cspan class=\"hljs-string\"\u003e\"publishedBooks\"\u003c/span\u003e, document, res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    String id = res.result();\n    mongoService.findOne(\u003cspan class=\"hljs-string\"\u003e\"publishedBooks\"\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject().put(\u003cspan class=\"hljs-string\"\u003e\"_id\"\u003c/span\u003e, id), \u003cspan class=\"hljs-keyword\"\u003enull\u003c/span\u003e, res2 -\u0026gt; {\n      \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res2.succeeded()) {\n        System.out.println(\u003cspan class=\"hljs-string\"\u003e\"To retrieve ISO-8601 date : \"\u003c/span\u003e\n          + res2.result().getJsonObject(\u003cspan class=\"hljs-string\"\u003e\"publicationDate\"\u003c/span\u003e).getString(\u003cspan class=\"hljs-string\"\u003e\"$date\"\u003c/span\u003e));\n      } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n        res2.cause().printStackTrace();\n      }\n    });\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    res.cause().printStackTrace();\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eHere\u0026#8217;s an example (in Java) of inserting a document with a binary field and reading it back\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003e\u003cspan class=\"hljs-keyword\"\u003ebyte\u003c/span\u003e[] binaryObject = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003ebyte\u003c/span\u003e[\u003cspan class=\"hljs-number\"\u003e40\u003c/span\u003e];\nJsonObject document = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject()\n  .put(\u003cspan class=\"hljs-string\"\u003e\"name\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"Alan Turing\"\u003c/span\u003e)\n  .put(\u003cspan class=\"hljs-string\"\u003e\"binaryStuff\"\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject().put(\u003cspan class=\"hljs-string\"\u003e\"$binary\"\u003c/span\u003e, binaryObject));\nmongoService.save(\u003cspan class=\"hljs-string\"\u003e\"smartPeople\"\u003c/span\u003e, document, res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    String id = res.result();\n    mongoService.findOne(\u003cspan class=\"hljs-string\"\u003e\"smartPeople\"\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject().put(\u003cspan class=\"hljs-string\"\u003e\"_id\"\u003c/span\u003e, id), \u003cspan class=\"hljs-keyword\"\u003enull\u003c/span\u003e, res2 -\u0026gt; {\n      \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res2.succeeded()) {\n        \u003cspan class=\"hljs-keyword\"\u003ebyte\u003c/span\u003e[] reconstitutedBinaryObject = res2.result().getJsonObject(\u003cspan class=\"hljs-string\"\u003e\"binaryStuff\"\u003c/span\u003e).getBinary(\u003cspan class=\"hljs-string\"\u003e\"$binary\"\u003c/span\u003e);\n        \u003cspan class=\"hljs-comment\"\u003e//This could now be de-serialized into an object in real life\u003c/span\u003e\n      } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n        res2.cause().printStackTrace();\n      }\n    });\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    res.cause().printStackTrace();\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eHere\u0026#8217;s an example of inserting a base 64 encoded string, typing it as binary a binary field, and reading it back\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eString base64EncodedString = \u003cspan class=\"hljs-string\"\u003e\"a2FpbHVhIGlzIHRoZSAjMSBiZWFjaCBpbiB0aGUgd29ybGQ=\"\u003c/span\u003e;\nJsonObject document = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject()\n  .put(\u003cspan class=\"hljs-string\"\u003e\"name\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"Alan Turing\"\u003c/span\u003e)\n  .put(\u003cspan class=\"hljs-string\"\u003e\"binaryStuff\"\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject().put(\u003cspan class=\"hljs-string\"\u003e\"$binary\"\u003c/span\u003e, base64EncodedString));\nmongoService.save(\u003cspan class=\"hljs-string\"\u003e\"smartPeople\"\u003c/span\u003e, document, res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    String id = res.result();\n    mongoService.findOne(\u003cspan class=\"hljs-string\"\u003e\"smartPeople\"\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject().put(\u003cspan class=\"hljs-string\"\u003e\"_id\"\u003c/span\u003e, id), \u003cspan class=\"hljs-keyword\"\u003enull\u003c/span\u003e, res2 -\u0026gt; {\n      \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res2.succeeded()) {\n        String reconstitutedBase64EncodedString = res2.result().getJsonObject(\u003cspan class=\"hljs-string\"\u003e\"binaryStuff\"\u003c/span\u003e).getString(\u003cspan class=\"hljs-string\"\u003e\"$binary\"\u003c/span\u003e);\n        \u003cspan class=\"hljs-comment\"\u003e//This could now converted back to bytes from the base 64 string\u003c/span\u003e\n      } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n        res2.cause().printStackTrace();\n      }\n    });\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    res.cause().printStackTrace();\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eHere\u0026#8217;s an example of inserting an object ID and reading it back\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eString individualId = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e ObjectId().toHexString();\nJsonObject document = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject()\n  .put(\u003cspan class=\"hljs-string\"\u003e\"name\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"Stephen Hawking\"\u003c/span\u003e)\n  .put(\u003cspan class=\"hljs-string\"\u003e\"individualId\"\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject().put(\u003cspan class=\"hljs-string\"\u003e\"$oid\"\u003c/span\u003e, individualId));\nmongoService.save(\u003cspan class=\"hljs-string\"\u003e\"smartPeople\"\u003c/span\u003e, document, res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    String id = res.result();\n    JsonObject query = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject().put(\u003cspan class=\"hljs-string\"\u003e\"_id\"\u003c/span\u003e, id);\n    mongoService.findOne(\u003cspan class=\"hljs-string\"\u003e\"smartPeople\"\u003c/span\u003e, query, \u003cspan class=\"hljs-keyword\"\u003enull\u003c/span\u003e, res2 -\u0026gt; {\n      \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res2.succeeded()) {\n        String reconstitutedIndividualId = res2.result()\n          .getJsonObject(\u003cspan class=\"hljs-string\"\u003e\"individualId\"\u003c/span\u003e).getString(\u003cspan class=\"hljs-string\"\u003e\"$oid\"\u003c/span\u003e);\n      } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n        res2.cause().printStackTrace();\n      }\n    });\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    res.cause().printStackTrace();\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_getting_distinct_values\"\u003e\u003ca class=\"anchor\" href=\"#_getting_distinct_values\"\u003e\u003c/a\u003eGetting distinct values\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eHere\u0026#8217;s an example of getting distinct value\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eJsonObject document = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject()\n  .put(\u003cspan class=\"hljs-string\"\u003e\"title\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"The Hobbit\"\u003c/span\u003e);\nmongoClient.save(\u003cspan class=\"hljs-string\"\u003e\"books\"\u003c/span\u003e, document, res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    mongoClient.distinct(\u003cspan class=\"hljs-string\"\u003e\"books\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"title\"\u003c/span\u003e, String\u003cspan class=\"hljs-class\"\u003e.\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e.\u003cspan class=\"hljs-title\"\u003egetName\u003c/span\u003e(), \u003cspan class=\"hljs-title\"\u003eres2\u003c/span\u003e -\u0026gt; \u003c/span\u003e{\n      System.out.println(\u003cspan class=\"hljs-string\"\u003e\"Title is : \"\u003c/span\u003e + res2.result().getJsonArray(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e));\n    });\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    res.cause().printStackTrace();\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eHere\u0026#8217;s an example of getting distinct value in batch mode\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eJsonObject document = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject()\n  .put(\u003cspan class=\"hljs-string\"\u003e\"title\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"The Hobbit\"\u003c/span\u003e);\nmongoClient.save(\u003cspan class=\"hljs-string\"\u003e\"books\"\u003c/span\u003e, document, res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    mongoClient.distinctBatch(\u003cspan class=\"hljs-string\"\u003e\"books\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"title\"\u003c/span\u003e, String\u003cspan class=\"hljs-class\"\u003e.\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e.\u003cspan class=\"hljs-title\"\u003egetName\u003c/span\u003e())\n      .\u003cspan class=\"hljs-title\"\u003ehandler\u003c/span\u003e(\u003cspan class=\"hljs-title\"\u003ebook\u003c/span\u003e -\u0026gt; \u003cspan class=\"hljs-title\"\u003eSystem\u003c/span\u003e.\u003cspan class=\"hljs-title\"\u003eout\u003c/span\u003e.\u003cspan class=\"hljs-title\"\u003eprintln\u003c/span\u003e(\"\u003cspan class=\"hljs-title\"\u003eTitle\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eis\u003c/span\u003e : \" + \u003cspan class=\"hljs-title\"\u003ebook\u003c/span\u003e.\u003cspan class=\"hljs-title\"\u003egetString\u003c/span\u003e(\"\u003cspan class=\"hljs-title\"\u003etitle\u003c/span\u003e\")))\u003c/span\u003e;\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    res.cause().printStackTrace();\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eHere\u0026#8217;s an example of getting distinct value with query\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eJsonObject document = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject()\n  .put(\u003cspan class=\"hljs-string\"\u003e\"title\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"The Hobbit\"\u003c/span\u003e)\n  .put(\u003cspan class=\"hljs-string\"\u003e\"publicationDate\"\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject().put(\u003cspan class=\"hljs-string\"\u003e\"$date\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"1937-09-21T00:00:00+00:00\"\u003c/span\u003e));\nJsonObject query = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject()\n  .put(\u003cspan class=\"hljs-string\"\u003e\"publicationDate\"\u003c/span\u003e,\n    \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject().put(\u003cspan class=\"hljs-string\"\u003e\"$gte\"\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject().put(\u003cspan class=\"hljs-string\"\u003e\"$date\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"1937-09-21T00:00:00+00:00\"\u003c/span\u003e)));\nmongoClient.save(\u003cspan class=\"hljs-string\"\u003e\"books\"\u003c/span\u003e, document, res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    mongoClient.distinctWithQuery(\u003cspan class=\"hljs-string\"\u003e\"books\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"title\"\u003c/span\u003e, String\u003cspan class=\"hljs-class\"\u003e.\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e.\u003cspan class=\"hljs-title\"\u003egetName\u003c/span\u003e(), \u003cspan class=\"hljs-title\"\u003equery\u003c/span\u003e, \u003cspan class=\"hljs-title\"\u003eres2\u003c/span\u003e -\u0026gt; \u003c/span\u003e{\n      System.out.println(\u003cspan class=\"hljs-string\"\u003e\"Title is : \"\u003c/span\u003e + res2.result().getJsonArray(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e));\n    });\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eHere\u0026#8217;s an example of getting distinct value in batch mode with query\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eJsonObject document = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject()\n  .put(\u003cspan class=\"hljs-string\"\u003e\"title\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"The Hobbit\"\u003c/span\u003e)\n  .put(\u003cspan class=\"hljs-string\"\u003e\"publicationDate\"\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject().put(\u003cspan class=\"hljs-string\"\u003e\"$date\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"1937-09-21T00:00:00+00:00\"\u003c/span\u003e));\nJsonObject query = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject()\n  .put(\u003cspan class=\"hljs-string\"\u003e\"publicationDate\"\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject()\n    .put(\u003cspan class=\"hljs-string\"\u003e\"$gte\"\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject().put(\u003cspan class=\"hljs-string\"\u003e\"$date\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"1937-09-21T00:00:00+00:00\"\u003c/span\u003e)));\nmongoClient.save(\u003cspan class=\"hljs-string\"\u003e\"books\"\u003c/span\u003e, document, res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    mongoClient.distinctBatchWithQuery(\u003cspan class=\"hljs-string\"\u003e\"books\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"title\"\u003c/span\u003e, String\u003cspan class=\"hljs-class\"\u003e.\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e.\u003cspan class=\"hljs-title\"\u003egetName\u003c/span\u003e(), \u003cspan class=\"hljs-title\"\u003equery\u003c/span\u003e)\n      .\u003cspan class=\"hljs-title\"\u003ehandler\u003c/span\u003e(\u003cspan class=\"hljs-title\"\u003ebook\u003c/span\u003e -\u0026gt; \u003cspan class=\"hljs-title\"\u003eSystem\u003c/span\u003e.\u003cspan class=\"hljs-title\"\u003eout\u003c/span\u003e.\u003cspan class=\"hljs-title\"\u003eprintln\u003c/span\u003e(\"\u003cspan class=\"hljs-title\"\u003eTitle\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eis\u003c/span\u003e : \" + \u003cspan class=\"hljs-title\"\u003ebook\u003c/span\u003e.\u003cspan class=\"hljs-title\"\u003egetString\u003c/span\u003e(\"\u003cspan class=\"hljs-title\"\u003etitle\u003c/span\u003e\")))\u003c/span\u003e;\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_configuring_the_client\"\u003e\u003ca class=\"anchor\" href=\"#_configuring_the_client\"\u003e\u003c/a\u003eConfiguring the client\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe client is configured with a json object.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe following configuration is supported by the mongo client:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"dlist\"\u003e\n\u003cdl\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003edb_name\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003eName of the database in the MongoDB instance to use. Defaults to \u003ccode\u003edefault_db\u003c/code\u003e\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003euseObjectId\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003eToggle this option to support persisting and retrieving ObjectId\u0026#8217;s as strings. If \u003ccode\u003etrue\u003c/code\u003e, hex-strings will\nbe saved as native Mongodb ObjectId types in the document collection. This will allow the sorting of documents based on creation\ntime. You can also derive the creation time from the hex-string using ObjectId::getDate(). Set to \u003ccode\u003efalse\u003c/code\u003e for other types of your choosing.\nIf set to false, or left to default, hex strings will be generated as the document _id if the _id is omitted from the document.\nDefaults to \u003ccode\u003efalse\u003c/code\u003e.\u003c/p\u003e\n\u003c/dd\u003e\n\u003c/dl\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe mongo client tries to support most options that are allowed by the driver. There are two ways to configure mongo\nfor use by the driver, either by a connection string or by separate configuration options.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"admonitionblock note\"\u003e\n\u003ctable\u003e\n\u003ctr\u003e\n\u003ctd class=\"icon\"\u003e\n\u003cdiv class=\"title\"\u003e注意\u003c/div\u003e\n\u003c/td\u003e\n\u003ctd class=\"content\"\u003e\nIf the connection string is used the mongo client will ignore any driver configuration options.\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\n\u003c/div\u003e\n\u003cdiv class=\"dlist\"\u003e\n\u003cdl\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003econnection_string\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003eThe connection string the driver uses to create the client. E.g. \u003ccode\u003emongodb://localhost:27017\u003c/code\u003e.\nFor more information on the format of the connection string please consult the driver documentation.\u003c/p\u003e\n\u003c/dd\u003e\n\u003c/dl\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e\u003cstrong\u003eSpecific driver configuration options\u003c/strong\u003e\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-js\" data-lang=\"js\"\u003e{\n \u003cspan class=\"hljs-comment\"\u003e// Single Cluster Settings\u003c/span\u003e\n \u003cspan class=\"hljs-string\"\u003e\"host\"\u003c/span\u003e : \u003cspan class=\"hljs-string\"\u003e\"127.0.0.1\"\u003c/span\u003e, \u003cspan class=\"hljs-comment\"\u003e// string\u003c/span\u003e\n \u003cspan class=\"hljs-string\"\u003e\"port\"\u003c/span\u003e : \u003cspan class=\"hljs-number\"\u003e27017\u003c/span\u003e,      \u003cspan class=\"hljs-comment\"\u003e// int\u003c/span\u003e\n\n \u003cspan class=\"hljs-comment\"\u003e// Multiple Cluster Settings\u003c/span\u003e\n \u003cspan class=\"hljs-string\"\u003e\"hosts\"\u003c/span\u003e : [\n   {\n     \u003cspan class=\"hljs-string\"\u003e\"host\"\u003c/span\u003e : \u003cspan class=\"hljs-string\"\u003e\"cluster1\"\u003c/span\u003e, \u003cspan class=\"hljs-comment\"\u003e// string\u003c/span\u003e\n     \u003cspan class=\"hljs-string\"\u003e\"port\"\u003c/span\u003e : \u003cspan class=\"hljs-number\"\u003e27000\u003c/span\u003e       \u003cspan class=\"hljs-comment\"\u003e// int\u003c/span\u003e\n   },\n   {\n     \u003cspan class=\"hljs-string\"\u003e\"host\"\u003c/span\u003e : \u003cspan class=\"hljs-string\"\u003e\"cluster2\"\u003c/span\u003e, \u003cspan class=\"hljs-comment\"\u003e// string\u003c/span\u003e\n     \u003cspan class=\"hljs-string\"\u003e\"port\"\u003c/span\u003e : \u003cspan class=\"hljs-number\"\u003e28000\u003c/span\u003e       \u003cspan class=\"hljs-comment\"\u003e// int\u003c/span\u003e\n   },\n   ...\n ],\n \u003cspan class=\"hljs-string\"\u003e\"replicaSet\"\u003c/span\u003e :  \u003cspan class=\"hljs-string\"\u003e\"foo\"\u003c/span\u003e,    \u003cspan class=\"hljs-comment\"\u003e// string\u003c/span\u003e\n \u003cspan class=\"hljs-string\"\u003e\"serverSelectionTimeoutMS\"\u003c/span\u003e : \u003cspan class=\"hljs-number\"\u003e30000\u003c/span\u003e, \u003cspan class=\"hljs-comment\"\u003e// long\u003c/span\u003e\n\n \u003cspan class=\"hljs-comment\"\u003e// Connection Pool Settings\u003c/span\u003e\n \u003cspan class=\"hljs-string\"\u003e\"maxPoolSize\"\u003c/span\u003e : \u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e,                \u003cspan class=\"hljs-comment\"\u003e// int\u003c/span\u003e\n \u003cspan class=\"hljs-string\"\u003e\"minPoolSize\"\u003c/span\u003e : \u003cspan class=\"hljs-number\"\u003e25\u003c/span\u003e,                \u003cspan class=\"hljs-comment\"\u003e// int\u003c/span\u003e\n \u003cspan class=\"hljs-string\"\u003e\"maxIdleTimeMS\"\u003c/span\u003e : \u003cspan class=\"hljs-number\"\u003e300000\u003c/span\u003e,          \u003cspan class=\"hljs-comment\"\u003e// long\u003c/span\u003e\n \u003cspan class=\"hljs-string\"\u003e\"maxLifeTimeMS\"\u003c/span\u003e : \u003cspan class=\"hljs-number\"\u003e3600000\u003c/span\u003e,         \u003cspan class=\"hljs-comment\"\u003e// long\u003c/span\u003e\n \u003cspan class=\"hljs-string\"\u003e\"waitQueueMultiple\"\u003c/span\u003e  : \u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e,         \u003cspan class=\"hljs-comment\"\u003e// int\u003c/span\u003e\n \u003cspan class=\"hljs-string\"\u003e\"waitQueueTimeoutMS\"\u003c/span\u003e : \u003cspan class=\"hljs-number\"\u003e10000\u003c/span\u003e,      \u003cspan class=\"hljs-comment\"\u003e// long\u003c/span\u003e\n \u003cspan class=\"hljs-string\"\u003e\"maintenanceFrequencyMS\"\u003c/span\u003e : \u003cspan class=\"hljs-number\"\u003e2000\u003c/span\u003e,   \u003cspan class=\"hljs-comment\"\u003e// long\u003c/span\u003e\n \u003cspan class=\"hljs-string\"\u003e\"maintenanceInitialDelayMS\"\u003c/span\u003e : \u003cspan class=\"hljs-number\"\u003e500\u003c/span\u003e, \u003cspan class=\"hljs-comment\"\u003e// long\u003c/span\u003e\n\n \u003cspan class=\"hljs-comment\"\u003e// Credentials / Auth\u003c/span\u003e\n \u003cspan class=\"hljs-string\"\u003e\"username\"\u003c/span\u003e   : \u003cspan class=\"hljs-string\"\u003e\"john\"\u003c/span\u003e,     \u003cspan class=\"hljs-comment\"\u003e// string\u003c/span\u003e\n \u003cspan class=\"hljs-string\"\u003e\"password\"\u003c/span\u003e   : \u003cspan class=\"hljs-string\"\u003e\"passw0rd\"\u003c/span\u003e, \u003cspan class=\"hljs-comment\"\u003e// string\u003c/span\u003e\n \u003cspan class=\"hljs-string\"\u003e\"authSource\"\u003c/span\u003e : \u003cspan class=\"hljs-string\"\u003e\"some.db\"\u003c/span\u003e   \u003cspan class=\"hljs-comment\"\u003e// string\u003c/span\u003e\n \u003cspan class=\"hljs-comment\"\u003e// Auth mechanism\u003c/span\u003e\n \u003cspan class=\"hljs-string\"\u003e\"authMechanism\"\u003c/span\u003e     : \u003cspan class=\"hljs-string\"\u003e\"GSSAPI\"\u003c/span\u003e,        \u003cspan class=\"hljs-comment\"\u003e// string\u003c/span\u003e\n \u003cspan class=\"hljs-string\"\u003e\"gssapiServiceName\"\u003c/span\u003e : \u003cspan class=\"hljs-string\"\u003e\"myservicename\"\u003c/span\u003e, \u003cspan class=\"hljs-comment\"\u003e// string\u003c/span\u003e\n\n \u003cspan class=\"hljs-comment\"\u003e// Socket Settings\u003c/span\u003e\n \u003cspan class=\"hljs-string\"\u003e\"connectTimeoutMS\"\u003c/span\u003e : \u003cspan class=\"hljs-number\"\u003e300000\u003c/span\u003e, \u003cspan class=\"hljs-comment\"\u003e// int\u003c/span\u003e\n \u003cspan class=\"hljs-string\"\u003e\"socketTimeoutMS\"\u003c/span\u003e  : \u003cspan class=\"hljs-number\"\u003e100000\u003c/span\u003e, \u003cspan class=\"hljs-comment\"\u003e// int\u003c/span\u003e\n \u003cspan class=\"hljs-string\"\u003e\"sendBufferSize\"\u003c/span\u003e    : \u003cspan class=\"hljs-number\"\u003e8192\u003c/span\u003e,  \u003cspan class=\"hljs-comment\"\u003e// int\u003c/span\u003e\n \u003cspan class=\"hljs-string\"\u003e\"receiveBufferSize\"\u003c/span\u003e : \u003cspan class=\"hljs-number\"\u003e8192\u003c/span\u003e,  \u003cspan class=\"hljs-comment\"\u003e// int\u003c/span\u003e\n \u003cspan class=\"hljs-string\"\u003e\"keepAlive\"\u003c/span\u003e : \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e           \u003cspan class=\"hljs-comment\"\u003e// boolean\u003c/span\u003e\n\n \u003cspan class=\"hljs-comment\"\u003e// Heartbeat socket settings\u003c/span\u003e\n \u003cspan class=\"hljs-string\"\u003e\"heartbeat.socket\"\u003c/span\u003e : {\n \u003cspan class=\"hljs-string\"\u003e\"connectTimeoutMS\"\u003c/span\u003e : \u003cspan class=\"hljs-number\"\u003e300000\u003c/span\u003e, \u003cspan class=\"hljs-comment\"\u003e// int\u003c/span\u003e\n \u003cspan class=\"hljs-string\"\u003e\"socketTimeoutMS\"\u003c/span\u003e  : \u003cspan class=\"hljs-number\"\u003e100000\u003c/span\u003e, \u003cspan class=\"hljs-comment\"\u003e// int\u003c/span\u003e\n \u003cspan class=\"hljs-string\"\u003e\"sendBufferSize\"\u003c/span\u003e    : \u003cspan class=\"hljs-number\"\u003e8192\u003c/span\u003e,  \u003cspan class=\"hljs-comment\"\u003e// int\u003c/span\u003e\n \u003cspan class=\"hljs-string\"\u003e\"receiveBufferSize\"\u003c/span\u003e : \u003cspan class=\"hljs-number\"\u003e8192\u003c/span\u003e,  \u003cspan class=\"hljs-comment\"\u003e// int\u003c/span\u003e\n \u003cspan class=\"hljs-string\"\u003e\"keepAlive\"\u003c/span\u003e : \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e           \u003cspan class=\"hljs-comment\"\u003e// boolean\u003c/span\u003e\n }\n\n \u003cspan class=\"hljs-comment\"\u003e// Server Settings\u003c/span\u003e\n \u003cspan class=\"hljs-string\"\u003e\"heartbeatFrequencyMS\"\u003c/span\u003e :    \u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e \u003cspan class=\"hljs-comment\"\u003e// long\u003c/span\u003e\n \u003cspan class=\"hljs-string\"\u003e\"minHeartbeatFrequencyMS\"\u003c/span\u003e : \u003cspan class=\"hljs-number\"\u003e500\u003c/span\u003e \u003cspan class=\"hljs-comment\"\u003e// long\u003c/span\u003e\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e\u003cstrong\u003eDriver option descriptions\u003c/strong\u003e\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"dlist\"\u003e\n\u003cdl\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003ehost\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003eThe host the MongoDB instance is running. Defaults to \u003ccode\u003e127.0.0.1\u003c/code\u003e. This is ignored if \u003ccode\u003ehosts\u003c/code\u003e is specified\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003eport\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003eThe port the MongoDB instance is listening on. Defaults to \u003ccode\u003e27017\u003c/code\u003e. This is ignored if \u003ccode\u003ehosts\u003c/code\u003e is specified\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003ehosts\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003eAn array representing the hosts and ports to support a MongoDB cluster (sharding / replication)\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003ehost\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003eA host in the cluster\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003eport\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003eThe port a host in the cluster is listening on\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003ereplicaSet\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003eThe name of the replica set, if the MongoDB instance is a member of a replica set\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003eserverSelectionTimeoutMS\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003eThe time in milliseconds that the mongo driver will wait to select a server for an operation before raising an error.\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003emaxPoolSize\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003eThe maximum number of connections in the connection pool. The default value is \u003ccode\u003e100\u003c/code\u003e\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003eminPoolSize\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003eThe minimum number of connections in the connection pool. The default value is \u003ccode\u003e0\u003c/code\u003e\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003emaxIdleTimeMS\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003eThe maximum idle time of a pooled connection. The default value is \u003ccode\u003e0\u003c/code\u003e which means there is no limit\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003emaxLifeTimeMS\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003eThe maximum time a pooled connection can live for. The default value is \u003ccode\u003e0\u003c/code\u003e which means there is no limit\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003ewaitQueueMultiple\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003eThe maximum number of waiters for a connection to become available from the pool. Default value is \u003ccode\u003e500\u003c/code\u003e\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003ewaitQueueTimeoutMS\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003eThe maximum time that a thread may wait for a connection to become available. Default value is \u003ccode\u003e120000\u003c/code\u003e (2 minutes)\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003emaintenanceFrequencyMS\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003eThe time period between runs of the maintenance job. Default is \u003ccode\u003e0\u003c/code\u003e.\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003emaintenanceInitialDelayMS\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003eThe period of time to wait before running the first maintenance job on the connection pool. Default is \u003ccode\u003e0\u003c/code\u003e.\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003eusername\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003eThe username to authenticate. Default is \u003ccode\u003enull\u003c/code\u003e (meaning no authentication required)\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003epassword\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003eThe password to use to authenticate.\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003eauthSource\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003eThe database name associated with the user\u0026#8217;s credentials. Default value is the \u003ccode\u003edb_name\u003c/code\u003e value.\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003eauthMechanism\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003eThe authentication mechanism to use. See [Authentication](\u003ca href=\"http://docs.mongodb.org/manual/core/authentication/\" class=\"bare\"\u003ehttp://docs.mongodb.org/manual/core/authentication/\u003c/a\u003e) for more details.\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003egssapiServiceName\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003eThe Kerberos service name if \u003ccode\u003eGSSAPI\u003c/code\u003e is specified as the \u003ccode\u003eauthMechanism\u003c/code\u003e.\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003econnectTimeoutMS\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003eThe time in milliseconds to attempt a connection before timing out. Default is \u003ccode\u003e10000\u003c/code\u003e (10 seconds)\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003esocketTimeoutMS\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003eThe time in milliseconds to attempt a send or receive on a socket before the attempt times out. Default is \u003ccode\u003e0\u003c/code\u003e meaning there is no timeout\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003esendBufferSize\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003eSets the send buffer size (SO_SNDBUF) for the socket. Default is \u003ccode\u003e0\u003c/code\u003e, meaning it will use the OS default for this option.\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003ereceiveBufferSize\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003eSets the receive buffer size (SO_RCVBUF) for the socket. Default is \u003ccode\u003e0\u003c/code\u003e, meaning it will use the OS default for this option.\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003ekeepAlive\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003eSets the keep alive (SO_KEEPALIVE) for the socket. Default is \u003ccode\u003efalse\u003c/code\u003e\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003eheartbeat.socket\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003eConfigures the socket settings for the cluster monitor of the MongoDB java driver.\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003eheartbeatFrequencyMS\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003eThe frequency that the cluster monitor attempts to reach each server. Default is \u003ccode\u003e5000\u003c/code\u003e (5 seconds)\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003eminHeartbeatFrequencyMS\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003eThe minimum heartbeat frequency. The default value is \u003ccode\u003e1000\u003c/code\u003e (1 second)\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003essl\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003eEnable ssl between the vertx-mongo-client and mongo\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003etrustAll\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003eWhen using ssl, trust \u003cem\u003eALL\u003c/em\u003e certificates. \u003cstrong\u003eWARNING\u003c/strong\u003e - Trusting \u003cem\u003eALL\u003c/em\u003e certificates will open you up to potential security issues such as MITM attacks.\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003ecaPath\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003eSet a path to a file that contains a certificate that will be used as a source of trust when making SSL connections to mongo.\u003c/p\u003e\n\u003c/dd\u003e\n\u003c/dl\u003e\n\u003c/div\u003e\n\u003cdiv class=\"admonitionblock note\"\u003e\n\u003ctable\u003e\n\u003ctr\u003e\n\u003ctd class=\"icon\"\u003e\n\u003cdiv class=\"title\"\u003e注意\u003c/div\u003e\n\u003c/td\u003e\n\u003ctd class=\"content\"\u003e\nMost of the default values listed above use the default values of the MongoDB Java Driver.\nPlease consult the driver documentation for up to date information.\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_rxjava_2_api\"\u003e\u003ca class=\"anchor\" href=\"#_rxjava_2_api\"\u003e\u003c/a\u003eRxJava 2 API\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe Mongo client provides an Rxified version of the original API.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_creating_an_rxified_client\"\u003e\u003ca class=\"anchor\" href=\"#_creating_an_rxified_client\"\u003e\u003c/a\u003eCreating an Rxified client\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eTo create an Rxified Mongo client, make sure to import the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/reactivex/ext/mongo/MongoClient.html\"\u003eMongoClient\u003c/a\u003e\u003c/code\u003e class.\nThen use one of the \u003ccode\u003ecreate\u003c/code\u003e methods to get an instance:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eMongoClient client = MongoClient.createShared(vertx, config);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_finding_documents_in_batches_2\"\u003e\u003ca class=\"anchor\" href=\"#_finding_documents_in_batches_2\"\u003e\u003c/a\u003eFinding documents in batches\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eA \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/reactivex/core/streams/ReadStream.html\"\u003eReadStream\u003c/a\u003e\u003c/code\u003e can be converted to a \u003ccode\u003e\u003ca href=\"../../apidocs/io/reactivex/Flowable.html\"\u003eFlowable\u003c/a\u003e\u003c/code\u003e, which is handy when you have to deal with large data sets:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eJsonObject query = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject()\n  .put(\u003cspan class=\"hljs-string\"\u003e\"author\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"J. R. R. Tolkien\"\u003c/span\u003e);\n\nReadStream\u0026lt;JsonObject\u0026gt; books = mongoClient.findBatch(\u003cspan class=\"hljs-string\"\u003e\"book\"\u003c/span\u003e, query);\n\n\u003cspan class=\"hljs-comment\"\u003e// Convert the stream to a Flowable\u003c/span\u003e\nFlowable\u0026lt;JsonObject\u0026gt; flowable = books.toFlowable();\n\nflowable.subscribe(doc -\u0026gt; {\n  System.out.println(\u003cspan class=\"hljs-string\"\u003e\"Found doc: \"\u003c/span\u003e + doc.encodePrettily());\n}, throwable -\u0026gt; {\n  throwable.printStackTrace();\n}, () -\u0026gt; {\n  System.out.println(\u003cspan class=\"hljs-string\"\u003e\"End of research\"\u003c/span\u003e);\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e","version":"3.9.6"},"__N_SSG":true},"page":"/docs/[[...slug]]","query":{"slug":["3.9.6","vertx-mongo-client","java"]},"buildId":"3r2_xhh1RtXZpLNVhhMg4","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-9a5c89434732593ca2fd.js"></script><script src="/_next/static/chunks/main-b6e20584df76f29b6f35.js" async=""></script><script src="/_next/static/chunks/webpack-d7b2fb72fb7257504a38.js" async=""></script><script src="/_next/static/chunks/framework.fcef98db13e2318579fb.js" async=""></script><script src="/_next/static/chunks/commons.5b8771ac6e8a338f82f1.js" async=""></script><script src="/_next/static/chunks/styles.7064a0f84b2a7c13404a.js" async=""></script><script src="/_next/static/chunks/pages/_app-3dbbc9c041333077c167.js" async=""></script><script src="/_next/static/chunks/5df0631eea625b022d3730b3f1bf573e1b8deb37.3b9874ba65db13e7d868.js" async=""></script><script src="/_next/static/chunks/31acfd8439b7c9eee4abe9f59c7500d6c943ee0d.202da639f2e299a63b4b.js" async=""></script><script src="/_next/static/chunks/pages/docs/%5B%5B...slug%5D%5D-f144718c033f8d0b431b.js" async=""></script><script src="/_next/static/3r2_xhh1RtXZpLNVhhMg4/_buildManifest.js" async=""></script><script src="/_next/static/3r2_xhh1RtXZpLNVhhMg4/_ssgManifest.js" async=""></script></body></html>