<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="description" content="Vert.x | Reactive applications on the JVM"/><meta name="robots" content="index,follow"/><link rel="shortcut icon" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="48x48" href="/favicons/favicon-48x48.png"/><link rel="alternate" type="application/rss+xml" href="/feed/rss.xml"/><link rel="alternate" type="application/atom+xml" href="/feed/atom.xml"/><link rel="alternate" type="application/json" href="/feed/feed.json"/><title>Vertx unit | Eclipse Vert.x</title><meta name="next-head-count" content="13"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-6853d859ade043b9.js" defer=""></script><script src="/_next/static/chunks/framework-01395af778c6fb71.js" defer=""></script><script src="/_next/static/chunks/main-2ea7ab41ab691905.js" defer=""></script><script src="/_next/static/chunks/pages/_app-155bbedc7d6c4b74.js" defer=""></script><script src="/_next/static/chunks/778-5eaf13e353ab0b06.js" defer=""></script><script src="/_next/static/chunks/619-34d9218a66d5b123.js" defer=""></script><script src="/_next/static/chunks/629-5a87bb724d19315e.js" defer=""></script><script src="/_next/static/chunks/923-e93d8f14ebe18c9e.js" defer=""></script><script src="/_next/static/chunks/434-be9324d6e5b718aa.js" defer=""></script><script src="/_next/static/chunks/pages/docs/%5B%5B...slug%5D%5D-b6a025bc5d4ae207.js" defer=""></script><script src="/_next/static/DxYj1qG9XZR4Q5BZwOJ88/_buildManifest.js" defer=""></script><script src="/_next/static/DxYj1qG9XZR4Q5BZwOJ88/_ssgManifest.js" defer=""></script><script src="/_next/static/DxYj1qG9XZR4Q5BZwOJ88/_middlewareManifest.js" defer=""></script><style id="__jsx-400ec7965926e858">.dropdown-item.jsx-400ec7965926e858{white-space:nowrap;
line-height:2;
width:100%;
padding:0 1.5rem;
cursor:pointer}
.dropdown-item.jsx-400ec7965926e858:hover{background-color:#e9ecef}
.dropdown-item.active.jsx-400ec7965926e858{font-weight:400;
padding-left:.75rem}
.dropdown-item.has-active-siblings.jsx-400ec7965926e858:not(.active){padding-left:calc(0.75rem + 16px + 0.5em)}
.dropdown-item.jsx-400ec7965926e858 .dropdown-check-icon.jsx-400ec7965926e858{width:16px;
margin-right:.5em;
margin-top:1px}</style><style id="__jsx-6650573c8f14945d">.dropdown.jsx-6650573c8f14945d{position:relative;
display:inline-block}
.dropdown.jsx-6650573c8f14945d .dropdown-title.jsx-6650573c8f14945d{margin-right:0;
cursor:pointer;
-webkit-user-select:none;
-moz-user-select:none;
-ms-user-select:none;
user-select:none}
.dropdown.jsx-6650573c8f14945d .dropdown-menu.jsx-6650573c8f14945d{position:absolute;
background-color:#f8f9fa;
box-shadow:0 2px 5px 0 rgba(0, 0, 0, .1);
border-radius:.8rem;
list-style-type:none;
padding:.6666666667rem 0;
margin:.25rem 0 0 0;
z-index:100;
display:none;
-webkit-user-select:none;
-moz-user-select:none;
-ms-user-select:none;
user-select:none}
.dropdown.jsx-6650573c8f14945d .dropdown-menu.jsx-6650573c8f14945d a{color:#4d4d4d;
-webkit-text-decoration:none;
text-decoration:none;
font-weight:300}
.dropdown.jsx-6650573c8f14945d .dropdown-menu.align-right.jsx-6650573c8f14945d{right:0}
.dropdown.jsx-6650573c8f14945d .dropdown-menu.visible.jsx-6650573c8f14945d{display:block}
.dropdown.jsx-6650573c8f14945d .dropdown-menu.jsx-6650573c8f14945d a.jsx-6650573c8f14945d:hover{color:inherit}
.dropdown.jsx-6650573c8f14945d svg{margin-bottom:2px}</style><style id="__jsx-75cbc16d79a176fb">.tooltip.jsx-75cbc16d79a176fb{font-size:.75rem;
color:#4d4d4d;
background-color:#f8f9fa;
border-radius:.4rem;
padding:0 .4rem;
box-shadow:0 0 5px rgba(0, 0, 0, .3);
display:none;
white-space:nowrap;
-webkit-user-select:none;
-moz-user-select:none;
-ms-user-select:none;
user-select:none}
.tooltip.visible.jsx-75cbc16d79a176fb{display:block}
.tooltip.jsx-75cbc16d79a176fb .tooltip-arrow.jsx-75cbc16d79a176fb, .tooltip.jsx-75cbc16d79a176fb .tooltip-arrow.jsx-75cbc16d79a176fb::before{position:absolute;
width:8px;
height:8px;
z-index:-1}
.tooltip.jsx-75cbc16d79a176fb .tooltip-arrow.jsx-75cbc16d79a176fb::before{content:"";
-webkit-transform:rotate(45deg);
-moz-transform:rotate(45deg);
-ms-transform:rotate(45deg);
transform:rotate(45deg);
background:#f8f9fa;
box-shadow:-2px -2px 2px rgba(0, 0, 0, .1)}
.tooltip[data-popper-placement^=top].jsx-75cbc16d79a176fb>.tooltip-arrow.jsx-75cbc16d79a176fb{bottom:-4px}
.tooltip[data-popper-placement^=top].jsx-75cbc16d79a176fb>.tooltip-arrow.jsx-75cbc16d79a176fb::before{-webkit-transform:rotate(225deg);
-moz-transform:rotate(225deg);
-ms-transform:rotate(225deg);
transform:rotate(225deg)}
.tooltip[data-popper-placement^=bottom].jsx-75cbc16d79a176fb>.tooltip-arrow.jsx-75cbc16d79a176fb{top:-4px}
.tooltip[data-popper-placement^=left].jsx-75cbc16d79a176fb>.tooltip-arrow.jsx-75cbc16d79a176fb{right:-4px}
.tooltip[data-popper-placement^=left].jsx-75cbc16d79a176fb>.tooltip-arrow.jsx-75cbc16d79a176fb::before{-webkit-transform:rotate(135deg);
-moz-transform:rotate(135deg);
-ms-transform:rotate(135deg);
transform:rotate(135deg)}
.tooltip[data-popper-placement^=right].jsx-75cbc16d79a176fb>.tooltip-arrow.jsx-75cbc16d79a176fb{left:-4px}
.tooltip[data-popper-placement^=right].jsx-75cbc16d79a176fb>.tooltip-arrow.jsx-75cbc16d79a176fb::before{-webkit-transform:rotate(315deg);
-moz-transform:rotate(315deg);
-ms-transform:rotate(315deg);
transform:rotate(315deg)}</style><style id="__jsx-f705e145f931f504">.navbar{position:absolute;
top:2.75rem;
width:100%}
.navbar a{color:#3c3c3b}
.navbar a.navbar-menu-item, .navbar .dropdown-title{text-transform:uppercase}
.navbar a.navbar-menu-item:hover, .navbar .dropdown-title:hover{-webkit-text-decoration:none;
text-decoration:none;
color:#898987;
-webkit-transition:color .15s ease-in-out;
transition:color .15s ease-in-out}
.navbar .navbar-content{display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex;
-webkit-flex-direction:row;
-ms-flex-direction:row;
flex-direction:row;
-webkit-align-items:center;
-webkit-box-align:center;
-ms-flex-align:center;
align-items:center;
position:relative}
.navbar .navbar-content .navbar-logo{-webkit-flex:1;
-ms-flex:1;
flex:1}
.navbar .navbar-content .navbar-logo img{width:8.3rem}
.navbar .navbar-content .navbar-collapse-button{display:none;
cursor:pointer}
@media (max-width:1000px) {.navbar .navbar-content .navbar-collapse-button{display:inline-block}}
.navbar .navbar-content .navbar-collapse-button span{display:block;
width:33px;
height:4px;
margin-bottom:5px;
position:relative;
background:#3c3c3b;
border-radius:3px;
z-index:1;
transform-origin:4px 0;
-webkit-transition:-webkit-transform .5s cubic-bezier(0.77, 0.2, 0.05, 1), background .5s cubic-bezier(0.77, 0.2, 0.05, 1), opacity .55s ease;
transition:transform .5s cubic-bezier(0.77, 0.2, 0.05, 1), background .5s cubic-bezier(0.77, 0.2, 0.05, 1), opacity .55s ease}
.navbar .navbar-content .navbar-collapse-button span:first-child{transform-origin:0% 0%}
.navbar .navbar-content .navbar-collapse-button span:nth-last-child(2){transform-origin:0% 100%}
.navbar .navbar-content .navbar-right{display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex;
-webkit-flex-direction:row;
-ms-flex-direction:row;
flex-direction:row;
-webkit-align-items:baseline;
-webkit-box-align:baseline;
-ms-flex-align:baseline;
align-items:baseline;
margin-bottom:10px}
@media (max-width:1000px) {.navbar .navbar-content .navbar-right{max-height:0;
-webkit-transition:max-height 200ms ease-in-out;
transition:max-height 200ms ease-in-out;
box-shadow:0 2px 5px 0 rgba(0, 0, 0, .1);
-webkit-flex-direction:column;
-ms-flex-direction:column;
flex-direction:column;
position:absolute;
top:2.75rem;
left:.8rem;
right:.8rem;
background-color:#f8f9fa;
overflow-x:auto;
overflow-y:hidden}}
.navbar .navbar-content .navbar-menu .navbar-menu-item{font-weight:400;
margin-right:2.5rem}
.navbar .navbar-content .navbar-menu .navbar-menu-item.with-drop-down{margin-right:1.8rem}
@media (max-width:1250px) {.navbar .navbar-content .navbar-menu .navbar-menu-item{margin-right:1.5rem}}
@media (max-width:1000px) {.navbar .navbar-content .navbar-menu .navbar-menu-item{display:block;
margin-bottom:1rem;
font-size:1.2rem}}
.navbar .navbar-content .navbar-menu .navbar-menu-item .external-link-icon{margin-left:.25em}
@media (max-width:1000px) {.navbar .navbar-content .navbar-menu{-webkit-flex-direction:column;
-ms-flex-direction:column;
flex-direction:column;
padding:1rem}}
.navbar .navbar-content .navbar-social{margin-left:1.6rem;
font-size:.875rem}
.navbar .navbar-content .navbar-social svg{height:16px;
margin-bottom:2px}
@media (max-width:1000px) {.navbar .navbar-content .navbar-social svg{height:1rem}}
@media (max-width:1250px) {.navbar .navbar-content .navbar-social{margin-left:1rem}}
@media (max-width:1000px) {.navbar .navbar-content .navbar-social{margin-left:auto;
padding:0 1rem 1rem 0;
font-size:1rem}}
@media (max-width:768px) {.navbar{top:1rem}}
.page .navbar{top:0;
padding-top:1.5rem;
padding-bottom:1rem;
position:fixed;
background-color:#fff;
z-index:2}</style><style id="__jsx-bf3edc7191e82cb">.search{position:relative}
.search input{color:#adb5bd;
border:1px solid #dee2e6;
border-radius:.4rem;
font-size:.875rem;
padding:.25rem 1.8rem .35rem 1.8rem;
width:100%;
-webkit-transition:color .15s ease-in-out, border-color .15s ease-in-out;
transition:color .15s ease-in-out, border-color .15s ease-in-out;
background-color:transparent}
.search input:focus{border-color:#adb5bd;
color:#3c3c3b}
.search .autosuggest{position:absolute;
top:0;
-webkit-user-select:none;
-moz-user-select:none;
-ms-user-select:none;
user-select:none;
z-index:-100;
opacity:.5}
.search .search-icon, .search .search-icon-delete{position:absolute;
top:.55rem;
height:1rem;
stroke:#adb5bd;
-webkit-transition:stroke .15s ease-in-out;
transition:stroke .15s ease-in-out}
.search .search-icon{left:.4rem}
.search input:focus+.search-icon{stroke:#6f6970}
.search .search-icon-delete{stroke:#6f6970;
right:.4rem;
height:.75rem;
top:.7rem;
opacity:0;
-webkit-transition:opacity .15s ease-in-out;
transition:opacity .15s ease-in-out;
cursor:text}
.search.has-content .search-icon-delete{opacity:1;
cursor:pointer}</style><style id="__jsx-9ece789f808ef724">.search-results, .search-results-none{font-size:.875rem;
overflow:auto;
list-style-type:none;
padding-left:0;
display:none}
.search-results.visible, .search-results-none.visible{display:block}
.search-results{list-style-type:none;
padding:0;
margin-bottom:0}
.search-results li{display:block;
padding:.5rem;
margin-bottom:1rem;
border-radius:.4rem;
border:1px solid transparent;
cursor:pointer;
max-width:17rem;
overflow-x:hidden}
.search-results li.active{background-color:#f8f9fa;
border:1px solid #e9ecef}
.search-results li h5{margin:0 0 .5rem 0;
font-size:1em}
.search-results li .search-results-highlight{background-color:#ff0}
.search-results-none{padding:1rem .5rem;
text-align:center;
width:100%}</style><style id="__jsx-d1843944f2d67b">.search-panel{display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex;
-webkit-flex-direction:column;
-ms-flex-direction:column;
flex-direction:column;
position:relative}</style><style id="__jsx-aeedcf66895f49d7">footer{font-size:.875rem;
padding-top:3rem;
padding-bottom:4rem;
background-color:#f8f9fa;
border-top:1px solid #dee2e6;
margin-top:1rem;
color:#6f6970}
footer h5{font-size:1rem;
margin-top:0;
margin-bottom:1rem;
color:#3c3c3b;
text-transform:uppercase}
footer ul{padding:0;
list-style:none;
line-height:2}
footer a{color:#6f6970}
footer .footer-logo img, footer .footer-copyright-eclipse-logo img{-webkit-filter:grayscale(100);
filter:grayscale(100);
opacity:.5;
-webkit-transition:all .15s ease-in-out;
transition:all .15s ease-in-out}
footer .footer-logo img:hover, footer .footer-copyright-eclipse-logo img:hover{-webkit-filter:grayscale(0);
filter:grayscale(0);
opacity:1}
footer .footer-nav-section{display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex;
-webkit-flex-direction:row;
-ms-flex-direction:row;
flex-direction:row;
margin-bottom:6rem}
footer .footer-nav-section .footer-logo{margin-top:.4rem}
footer .footer-nav-section .footer-logo img{width:8.3rem}
footer .footer-nav-section .footer-nav-list{width:20%}
footer .footer-copyright{display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex;
-webkit-flex-direction:row;
-ms-flex-direction:row;
flex-direction:row;
-webkit-box-pack:justify;
-webkit-justify-content:space-between;
justify-content:space-between;
-webkit-align-items:center;
-webkit-box-align:center;
-ms-flex-align:center;
align-items:center}
footer .footer-copyright a{white-space:nowrap}
footer .footer-copyright .footer-copyright-eclipse-logo{width:17%;
margin-bottom:.5rem}
@media (max-width:1250px) {footer .footer-copyright .footer-copyright-break{display:none}
footer .footer-copyright .footer-copyright-eclipse-logo{width:30%}}
@media (max-width:1000px) {footer .footer-nav-section .footer-nav-list{width:25%}
footer .footer-copyright .footer-copyright-break{display:inline-block}
footer .footer-copyright .footer-copyright-eclipse-logo{width:40%}}
@media (max-width:768px) {footer .footer-nav-section{max-width:100%;
margin-left:auto;
margin-right:auto}}
@media (max-width:640px) {footer .footer-nav-section{max-width:80%;
margin-bottom:3rem;
-webkit-flex-direction:column;
-ms-flex-direction:column;
flex-direction:column}
footer .footer-nav-section h5{cursor:pointer}
footer .footer-nav-section h5::after{display:inline-block;
content:"";
border-top:.4em solid;
border-right:.4em solid transparent;
border-bottom:0;
border-left:.4em solid transparent;
position:absolute;
top:.75rem;
right:0}
footer .footer-nav-section .footer-nav-list{width:100%;
position:relative}
footer .footer-nav-section .footer-nav-list ul{overflow-y:hidden;
max-height:0;
-webkit-transition:all 200ms ease-in-out;
transition:all 200ms ease-in-out}
footer .footer-nav-section .footer-nav-list ul.visible{margin-bottom:2rem}
footer .footer-nav-section .footer-logo{margin:0 auto 3rem auto;
width:auto}
footer .footer-copyright{max-width:80%;
text-align:center;
margin-left:auto;
margin-right:auto;
-webkit-flex-direction:column-reverse;
-ms-flex-direction:column-reverse;
flex-direction:column-reverse}
footer .footer-copyright .footer-copyright-eclipse-logo{width:7.6rem;
margin-bottom:1rem}}</style><style id="__jsx-efcc50be384cabc7">.page-content{margin-top:6em;
margin-bottom:8rem}
.docs .docs-content .docs-content-wrapper{display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex;
-webkit-box-pack:justify;
-webkit-justify-content:space-between;
justify-content:space-between}
.docs .docs-content .docs-content-wrapper aside{-webkit-flex:0 0 17rem;
-ms-flex:0 0 17rem;
flex:0 0 17rem}
.docs .docs-content .docs-content-wrapper aside .docs-content-wrapper-sidebar{position:-webkit-sticky;
position:sticky;
top:7em}
.docs .docs-content .docs-content-wrapper aside .search-panel{margin-top:1rem;
width:100%}
.docs .docs-content .docs-content-wrapper aside .search-panel .search-results{max-height:calc(100vh - 10rem - 1px)}
.docs .docs-content .docs-content-wrapper aside .docs-content-toc{margin-top:1rem;
overflow-y:auto;
max-height:calc(100vh - 10rem - 3px)}
.docs .docs-content .docs-content-wrapper aside .docs-content-toc #toctitle{display:none}
.docs .docs-content .docs-content-wrapper aside .docs-content-toc ul{margin-top:0;
padding-left:0;
list-style-type:none}
.docs .docs-content .docs-content-wrapper aside .docs-content-toc ul.sectlevel2{display:none}
.docs .docs-content .docs-content-wrapper aside .docs-content-toc ul li{padding:.3333333333rem 0}
.docs .docs-content .docs-content-wrapper aside.docs-has-search-results .docs-content-toc{display:none}
@media (max-width:1250px) {.docs .docs-content .docs-content-wrapper aside{-webkit-flex:0 0 15rem;
-ms-flex:0 0 15rem;
flex:0 0 15rem}}
@media (max-width:1000px) {.docs .docs-content .docs-content-wrapper aside{z-index:1;
position:fixed;
top:0;
right:0;
width:25rem;
height:100vh;
max-width:100%;
padding-top:6rem;
padding-left:2rem;
padding-right:2rem;
background-color:#fff;
border-left:1px solid #dee2e6;
-webkit-transform:translateX(100%);
-moz-transform:translateX(100%);
-ms-transform:translateX(100%);
transform:translateX(100%);
-webkit-transition:-webkit-transform 200ms ease-in-out;
transition:transform 200ms ease-in-out;
will-change:transform}
.docs .docs-content .docs-content-wrapper aside.collapse{-webkit-transform:translateX(0%);
-moz-transform:translateX(0%);
-ms-transform:translateX(0%);
transform:translateX(0%)}}
@media (max-width:640px) {.docs .docs-content .docs-content-wrapper aside{min-width:100%;
border-left:none}}
.docs .docs-content .docs-content-wrapper .docs-content-sidebar-toggle{z-index:1000;
cursor:pointer;
display:none;
position:fixed;
-webkit-justify-content:center;
justify-content:center;
-webkit-align-items:center;
-webkit-box-align:center;
-ms-flex-align:center;
align-items:center;
right:2rem;
bottom:2rem;
color:#fff;
background-color:#4d4d4d;
padding:.5rem;
border-radius:.8rem;
-webkit-transition:background-color .15s ease-in-out;
transition:background-color .15s ease-in-out}
.docs .docs-content .docs-content-wrapper .docs-content-sidebar-toggle .feather-list, .docs .docs-content .docs-content-wrapper .docs-content-sidebar-toggle .feather-x{display:block}
.docs .docs-content .docs-content-wrapper .docs-content-sidebar-toggle .feather-x{position:absolute;
left:0;
top:0;
opacity:0;
-webkit-transition:opacity .15s ease-in-out;
transition:opacity .15s ease-in-out}
.docs .docs-content .docs-content-wrapper .docs-content-sidebar-toggle:hover{background-color:#3c3c3b}
.docs .docs-content .docs-content-wrapper .docs-content-sidebar-toggle.collapse .feather-list{opacity:0}
.docs .docs-content .docs-content-wrapper .docs-content-sidebar-toggle.collapse .feather-x{opacity:1}
@media (max-width:1000px) {.docs .docs-content .docs-content-wrapper .docs-content-sidebar-toggle{display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex}}
@media (max-width:640px) {.docs .docs-content .docs-content-wrapper .docs-content-sidebar-toggle{right:1rem;
bottom:1rem}}
.docs .docs-content .docs-content-inner{max-width:calc(100% - 19.5rem);
overflow:hidden}
.docs .docs-content .docs-content-inner .docs-content-metadata{margin-top:1.2rem;
margin-bottom:1.2rem;
display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex;
flex-wrap:wrap;
-webkit-align-items:baseline;
-webkit-box-align:baseline;
-ms-flex-align:baseline;
align-items:baseline}
@media (max-width:1000px) {.docs .docs-content .docs-content-inner .docs-content-metadata{-webkit-flex-direction:column;
-ms-flex-direction:column;
flex-direction:column}}
.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-repo{display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex}
.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-left{display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex;
-webkit-align-items:center;
-webkit-box-align:center;
-ms-flex-align:center;
align-items:center;
-webkit-flex:1;
-ms-flex:1;
flex:1}
.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-left>*{margin-right:2rem}
.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-left>*:last-child{margin-right:0}
.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-left a{display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex;
-webkit-align-items:center;
-webkit-box-align:center;
-ms-flex-align:center;
align-items:center;
color:#6f6970;
white-space:nowrap}
.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-left a:hover{color:#782b90}
.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-left a .feather{margin-right:.25em;
height:1rem}
@media (max-width:1000px) {.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-left{flex-wrap:wrap;
margin-bottom:1rem}}
.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-version{-webkit-flex:1;
-ms-flex:1;
flex:1;
display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex}
@media (min-width:1000px) {.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-version{-webkit-box-pack:end;
-ms-flex-pack:end;
-webkit-justify-content:flex-end;
justify-content:flex-end}}
.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-version svg{height:16px;
margin-bottom:-2px}
@media (max-width:1000px) {.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-version svg{height:1rem;
margin-bottom:-1px}}
.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-version .dropdown-menu a{-webkit-text-decoration:none;
text-decoration:none}
.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-version .dropdown-menu a:hover{color:#6f6970}
.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-label{display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex;
margin-left:2rem}
.docs .docs-content .docs-content-inner h1{padding-top:0;
margin-top:.6rem;
line-height:1.2}
.docs .docs-content .docs-content-inner h1::after{content:"";
width:30%;
display:block;
border:2px solid #782b90;
border-radius:2px;
margin-top:1.1rem}
.docs .docs-content .docs-content-inner .ulist>ul{padding-left:1.1rem}
.docs .docs-content .docs-content-inner h2{border-top:1px solid #dee2e6;
margin-top:5rem;
padding-top:2rem}
.docs .docs-content .docs-content-inner h3, .docs .docs-content .docs-content-inner h4{margin-top:3rem}
@media (max-width:1250px) {.docs .docs-content .docs-content-inner{max-width:calc(100% - 17.5rem)}}
@media (max-width:1000px) {.docs .docs-content .docs-content-inner{max-width:100%}}
.docs .docs-content .admonitionblock{border-top-right-radius:.8rem;
border-bottom-right-radius:.8rem;
background-color:#f8f9fa;
padding:1rem;
margin:1.5rem 0;
border-left:9px solid transparent}
.docs .docs-content .admonitionblock.note, .docs .docs-content .admonitionblock.tip{border-color:#6cb9f0}
.docs .docs-content .admonitionblock.important, .docs .docs-content .admonitionblock.warning, .docs .docs-content .admonitionblock.caution{border-color:#f0a46c}
.docs .docs-content .admonitionblock tr{display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex;
-webkit-flex-direction:column;
-ms-flex-direction:column;
flex-direction:column}
.docs .docs-content .admonitionblock .title{font-weight:400}
.docs .docs-content .admonitionblock .title::after{content:":"}
.docs .docs-content dt{font-weight:400}
.docs .docs-content .anchor{opacity:0;
-webkit-align-self:flex-start;
-ms-flex-item-align:flex-start;
align-self:flex-start;
outline:none}
.docs .docs-content .anchor::after{content:"#";
position:absolute;
margin-left:-1.5rem;
color:#ced4da;
padding-right:.45rem}
.docs .docs-content .anchor:hover{opacity:1}
.docs .docs-content h2:hover .anchor, .docs .docs-content h3:hover .anchor, .docs .docs-content h4:hover .anchor, .docs .docs-content h5:hover .anchor, .docs .docs-content h6:hover .anchor{opacity:1}
.docs .docs-content h1 .anchor{display:none}
.docs .docs-content h4 .anchor::after, .docs .docs-content h5 .anchor::after, .docs .docs-content h6 .anchor::after{padding-right:.6rem}</style><style id="__jsx-7824b3ad3820c879">html{line-height:1.15;
-webkit-text-size-adjust:100%}
body{margin:0}
main{display:block}
h1{font-size:2em;
margin:.67em 0}
hr{box-sizing:content-box;
height:0;
overflow:visible}
pre{font-family:monospace, monospace;
font-size:1em}
a{background-color:transparent}
abbr[title]{border-bottom:none;
text-decoration:underline;
text-decoration:underline dotted}
b, strong{font-weight:bolder}
code, kbd, samp{font-family:monospace, monospace;
font-size:1em}
small{font-size:80%}
sub, sup{font-size:75%;
line-height:0;
position:relative;
vertical-align:baseline}
sub{bottom:-0.25em}
sup{top:-0.5em}
img{border-style:none}
button, input, optgroup, select, textarea{font-family:inherit;
font-size:100%;
line-height:1.15;
margin:0}
button, input{overflow:visible}
button, select{text-transform:none}
button, [type=button], [type=reset], [type=submit]{-webkit-appearance:button}
button::-moz-focus-inner, [type=button]::-moz-focus-inner, [type=reset]::-moz-focus-inner, [type=submit]::-moz-focus-inner{border-style:none;
padding:0}
button:-moz-focusring, [type=button]:-moz-focusring, [type=reset]:-moz-focusring, [type=submit]:-moz-focusring{outline:1px dotted ButtonText}
fieldset{padding:.35em .75em .625em}
legend{box-sizing:border-box;
color:inherit;
display:table;
max-width:100%;
padding:0;
white-space:normal}
progress{vertical-align:baseline}
textarea{overflow:auto}
[type=checkbox], [type=radio]{box-sizing:border-box;
padding:0}
[type=number]::-webkit-inner-spin-button, [type=number]::-webkit-outer-spin-button{height:auto}
[type=search]{-webkit-appearance:textfield;
outline-offset:-2px}
[type=search]::-webkit-search-decoration{-webkit-appearance:none}
::-webkit-file-upload-button{-webkit-appearance:button;
font:inherit}
details{display:block}
summary{display:list-item}
template{display:none}
[hidden]{display:none}
.hljs, pre{display:block;
overflow-x:auto;
padding:.5em;
background:#3a2840;
color:#fff}
.hljs.language-shell :not(.bash)+.bash, .hljs.language-better-shell :not(.bash)+.bash, pre.language-shell :not(.bash)+.bash, pre.language-better-shell :not(.bash)+.bash{color:#d2a8e0}
pre{border-radius:.8rem;
padding:1rem;
font-size:.875rem;
margin:1.5rem 0}
.hljs-keyword, .hljs-selector-tag, .hljs-tag{color:#d2a8e0}
.hljs-template-tag{color:red}
.hljs-number{color:#6cb9f0}
.hljs-variable, .hljs-template-variable, .hljs-attribute, .hljs-literal{color:#c9e5f9}
.hljs-subst{color:red}
.hljs-title, .hljs-name, .hljs-selector-id, .hljs-selector-class, .hljs-section, .hljs-type{color:#f0a46c}
.hljs-symbol, .hljs-bullet, .hljs-link{color:#d2a8e0}
.hljs-deletion, .hljs-string, .hljs-built_in, .hljs-builtin-name{color:#6cb9f0}
.hljs-addition, .hljs-comment, .hljs-quote, .hljs-meta{color:#adb5bd}
.hljs-emphasis{font-style:italic}
.hljs-strong{font-weight:bold}
#nprogress{pointer-events:none}
#nprogress .bar{background:#29d;
position:fixed;
z-index:1031;
top:0;
left:0;
width:100%;
height:2px}
#nprogress .peg{display:block;
position:absolute;
right:0px;
width:100px;
height:100%;
box-shadow:0 0 10px #29d, 0 0 5px #29d;
opacity:1;
-webkit-transform:rotate(3deg) translate(0px, -4px);
-ms-transform:rotate(3deg) translate(0px, -4px);
-webkit-transform:rotate(3deg) translate(0px, -4px);
-moz-transform:rotate(3deg) translate(0px, -4px);
-ms-transform:rotate(3deg) translate(0px, -4px);
transform:rotate(3deg) translate(0px, -4px)}
#nprogress .spinner{display:block;
position:fixed;
z-index:1031;
top:15px;
right:15px}
#nprogress .spinner-icon{width:18px;
height:18px;
box-sizing:border-box;
border:solid 2px transparent;
border-top-color:#29d;
border-left-color:#29d;
border-radius:50%;
-webkit-animation:nprogress-spinner 400ms linear infinite;
-webkit-animation:nprogress-spinner 400ms linear infinite;
animation:nprogress-spinner 400ms linear infinite}
.nprogress-custom-parent{overflow:hidden;
position:relative}
.nprogress-custom-parent #nprogress .spinner, .nprogress-custom-parent #nprogress .bar{position:absolute}
@keyframes nprogress-spinner {0% {-webkit-transform:rotate(0deg)}100% {-webkit-transform:rotate(360deg)}}
@keyframes nprogress-spinner {0% {transform:rotate(0deg)}100% {transform:rotate(360deg)}}
#nprogress .bar{background:#782b90}
#nprogress .peg{box-shadow:0 0 10px #782b90, 0 0 5px #782b90}
#nprogress .spinner-icon{border-top-color:#782b90;
border-left-color:#782b90}
html{box-sizing:border-box}
*, *::before, *::after{box-sizing:inherit}
:root{font-size:18px}
@media (max-width:1000px) {:root{font-size:17.1px}}
@media (max-width:768px) {:root{font-size:16.2px}}
@media (max-width:640px) {:root{font-size:15.3px}}
body, input{font-family:Roboto, sans-serif;
font-weight:300;
line-height:1.7;
color:#3c3c3b}
input{outline:none}
h1, h2, h3, h4, h5, h6{font-weight:400}
h1{font-size:2.5rem}
h2{font-size:2rem}
h3{font-size:1.75rem}
h4{font-size:1.5rem}
h5{font-size:1.25rem}
h6{font-size:1.1rem}
.container{width:100%;
padding-right:.8rem;
padding-left:.8rem;
margin-right:auto;
margin-left:auto}
@media (min-width:640px) {.container{max-width:620px}}
@media (min-width:768px) {.container{max-width:738px}}
@media (min-width:1000px) {.container{max-width:950px}}
@media (min-width:1250px) {.container{max-width:1180px}}
@media (min-width:1250px) {.container-narrow{max-width:950px}}
.img-fluid{max-width:100%}
a{-webkit-text-decoration:none;
text-decoration:none;
color:#782b90}
a:hover{text-decoration:underline;
color:#571f69}
img{vertical-align:middle}
svg{overflow:hidden;
vertical-align:middle}
code, pre{font-family:"Roboto Mono", SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace}
p code{display:-webkit-inline-box;
display:-webkit-inline-flex;
display:-ms-inline-flexbox;
display:inline-flex;
max-width:100%;
overflow:auto}
.heading-anchor{opacity:0;
-webkit-align-self:flex-start;
-ms-flex-item-align:flex-start;
align-self:flex-start;
outline:none}
.heading-anchor::after{content:"#";
position:absolute;
margin-left:-1.5rem;
color:#ced4da;
padding-right:.45rem}
.heading-anchor:hover{opacity:1}
h2:hover .heading-anchor, h3:hover .heading-anchor, h4:hover .heading-anchor, h5:hover .heading-anchor, h6:hover .heading-anchor{opacity:1}
h1 .heading-anchor{display:none}
h4 .heading-anchor::after, h5 .heading-anchor::after, h6 .heading-anchor::after{padding-right:.6rem}</style><style data-href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500&display=swap">@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5vAA.woff) format('woff')}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Me5g.woff) format('woff')}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmEU9vAA.woff) format('woff')}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5fCRc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5fABc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5fCBc4AMP6lbBP.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5fBxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5fCxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5fChc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5fBBc4AMP6lQ.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Mu72xKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Mu5mxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Mu7mxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Mu4WxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Mu7WxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Mu7GxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Mu4mxKKTU1Kg.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmEU9fCRc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmEU9fABc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmEU9fCBc4AMP6lbBP.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmEU9fBxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmEU9fCxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmEU9fChc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmEU9fBBc4AMP6lQ.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style><style data-href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@300;400&display=swap">@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v25/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZKCA.woff) format('woff')}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v25/ieVl2ZhZI2eCN5jzbjEETS9weq8-59Y.woff) format('woff')}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v25/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCkYb9lecyVC4A.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v25/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCAYb9lecyVC4A.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v25/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCgYb9lecyVC4A.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v25/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCcYb9lecyVC4A.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v25/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCsYb9lecyVC4A.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v25/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCoYb9lecyVC4A.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v25/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCQYb9lecyU.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v25/ieVl2ZhZI2eCN5jzbjEETS9weq8-19-7DQk6YvNkeg.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v25/ieVl2ZhZI2eCN5jzbjEETS9weq8-19a7DQk6YvNkeg.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v25/ieVl2ZhZI2eCN5jzbjEETS9weq8-1967DQk6YvNkeg.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v25/ieVl2ZhZI2eCN5jzbjEETS9weq8-19G7DQk6YvNkeg.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v25/ieVl2ZhZI2eCN5jzbjEETS9weq8-1927DQk6YvNkeg.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v25/ieVl2ZhZI2eCN5jzbjEETS9weq8-19y7DQk6YvNkeg.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v25/ieVl2ZhZI2eCN5jzbjEETS9weq8-19K7DQk6YvM.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style><style data-href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400&display=swap">@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v21/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vqPQA.woff) format('woff')}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v21/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vq_SeW-AJi8SJQtQ4Y.woff) format('woff');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v21/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vq_QOW-AJi8SJQtQ4Y.woff) format('woff');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v21/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vq_R-W-AJi8SJQtQ4Y.woff) format('woff');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v21/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vq_S-W-AJi8SJQtQ4Y.woff) format('woff');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v21/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vq_SuW-AJi8SJQtQ4Y.woff) format('woff');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v21/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vq_ROW-AJi8SJQt.woff) format('woff');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><body data-build-time="2022-05-05T22:55:21.503Z" data-build-commit-id="74c7933730aaf9b2d601c96696b7cbaa4beb5d95" data-build-run-id="2278663533"><div id="__next" data-reactroot=""><main class="jsx-efcc50be384cabc7 page docs"><header><div class="jsx-f705e145f931f504 navbar"><div class="jsx-f705e145f931f504 navbar-content container"><div class="jsx-f705e145f931f504 navbar-logo"><a class="jsx-f705e145f931f504" href="/"><img src="data:image/svg+xml,%3csvg version=&#x27;1.1&#x27; id=&#x27;Layer_1&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27; x=&#x27;0&#x27; y=&#x27;0&#x27; viewBox=&#x27;0 0 1232.6 315.2&#x27; style=&#x27;enable-background:new 0 0 1232.6 315.2&#x27; xml:space=&#x27;preserve&#x27;%3e%3cstyle%3e.st0%7bfill:%23782a91%7d%3c/style%3e%3cpath d=&#x27;M120.9 214.2 190.5 0h52.3l-98.5 273.8H98.2L0 0h52.1l68.8 214.2zm291.2-62.6H299.6v84.2H431v38H252V0h177.7v38.4H299.6V114h112.5v37.6zm83.7-113.2H546c16.5.3 29 4.4 37.3 12.4 8.3 8 12.5 19.4 12.5 34 0 14-4.5 25.1-13.5 33.2-9 8.1-21.6 12.1-37.6 12.1h-27.1v24.2l86.1 119.5h51v-2.4l-77.2-106.7c24.9-5.5 43.3-21.7 52.6-35.9 8.2-12.6 13.3-27.7 13.3-46 0-26.8-8.6-47.4-25.8-61.5C600.5 7.1 576.1 0 544.5 0h-96.3v273.8h47.6&#x27;/%3e%3cpath class=&#x27;st0&#x27; d=&#x27;m1052.3 157.7-41.5 62.7 29.7 53.4h85.1z&#x27;/%3e%3ccircle class=&#x27;st0&#x27; cx=&#x27;827.9&#x27; cy=&#x27;274.7&#x27; r=&#x27;40.5&#x27;/%3e%3cpath class=&#x27;st0&#x27; d=&#x27;m1037 0-47.6 74.2L949 0h-84l85.3 135.8-67.1 105.7c5.7 9.5 9.1 20.5 9.2 32.4h50.1L1121.3 0H1037z&#x27;/%3e%3cpath d=&#x27;M763.5 273.8c.1-9.9 2.5-19.2 6.6-27.5V38.4h85.4V0H638.2v38.4h84.6v235.4h40.7zm414-266.9h-15.3v42.2h-8.5V6.9h-15.2V0h39v6.9zM1193 0l14.2 37.7L1221.3 0h11v49.1h-8.5V32.9l.8-21.7-14.5 37.9h-6.1l-14.5-37.8.8 21.6v16.2h-8.5V0h11.2z&#x27;/%3e%3c/svg%3e" alt="Vert.x Logo" class="jsx-f705e145f931f504"/></a></div><div class="jsx-f705e145f931f504 navbar-collapse-button"><span class="jsx-f705e145f931f504"></span><span class="jsx-f705e145f931f504"></span><span class="jsx-f705e145f931f504"></span></div><div class="jsx-f705e145f931f504 navbar-right"><div class="jsx-f705e145f931f504 navbar-menu"><span class="jsx-f705e145f931f504 navbar-menu-item with-drop-down"><div class="jsx-6650573c8f14945d dropdown"><a class="jsx-6650573c8f14945d dropdown-title">开始<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="jsx-6650573c8f14945d dropdown-menu"><a class="jsx-f705e145f931f504" href="/introduction-to-vertx-and-reactive/"><li class="jsx-400ec7965926e858 dropdown-item">简介</li></a><a class="jsx-f705e145f931f504" href="/get-started/"><li class="jsx-400ec7965926e858 dropdown-item">开始</li></a><a href="https://start.vertx.io/" target="_blank" rel="noreferrer" class="jsx-f705e145f931f504"><li class="jsx-400ec7965926e858 dropdown-item">应用生成器 <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a></ul></div></span><a class="jsx-f705e145f931f504 navbar-menu-item" href="/docs/">文档</a><span class="jsx-f705e145f931f504 navbar-menu-item with-drop-down"><div class="jsx-6650573c8f14945d dropdown"><a class="jsx-6650573c8f14945d dropdown-title">资源<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="jsx-6650573c8f14945d dropdown-menu"><a class="jsx-f705e145f931f504" href="/faq/"><li class="jsx-400ec7965926e858 dropdown-item">答疑</li></a><a class="jsx-f705e145f931f504" href="/channels/"><li class="jsx-400ec7965926e858 dropdown-item">联系渠道</li></a><a href="https://how-to.vertx.io/" target="_blank" rel="noreferrer" class="jsx-f705e145f931f504"><li class="jsx-400ec7965926e858 dropdown-item">操作指南 <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a><a href="https://github.com/vert-x3/vertx-eventbus-bridge-clients" target="_blank" rel="noreferrer" class="jsx-f705e145f931f504"><li class="jsx-400ec7965926e858 dropdown-item">EventBus Bridge Clients <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a><a href="https://github.com/vert-x3/advanced-vertx-guide" target="_blank" rel="noreferrer" class="jsx-f705e145f931f504"><li class="jsx-400ec7965926e858 dropdown-item">Advanced Vert.x Guide <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a></ul></div></span><a class="jsx-f705e145f931f504 navbar-menu-item" href="/blog/">博客</a><a class="jsx-f705e145f931f504 navbar-menu-item" href="/community/">社区</a><a class="jsx-f705e145f931f504 navbar-menu-item" href="/translation/">翻译团队</a></div><div class="jsx-f705e145f931f504 navbar-social"><span class="jsx-75cbc16d79a176fb "><a href="https://github.com/vert-x3/vertx-awesome" target="_blank" rel="noopener noreferrer" class="jsx-f705e145f931f504 navbar-social-link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="List of awesome Vert.x projects"><title></title><path d="M24 11.438l-6.154-5.645-.865.944 5.128 4.7H1.895l5.128-4.705-.865-.943-6.154 5.649H0v3.72c0 1.683 1.62 3.053 3.61 3.053h3.795c1.99 0 3.61-1.37 3.61-3.051v-2.446h1.97v2.446c0 1.68 1.62 3.051 3.61 3.051h3.794c1.99 0 3.61-1.37 3.61-3.051v-3.721z"></path></svg></a></span><div class="jsx-75cbc16d79a176fb tooltip">Awesome Vert.x<div data-popper-arrow="true" class="jsx-75cbc16d79a176fb tooltip-arrow"></div></div><span class="jsx-75cbc16d79a176fb "><a href="https://stackoverflow.com/questions/tagged/vert.x" target="_blank" rel="noopener noreferrer" class="jsx-f705e145f931f504 navbar-social-link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Stack Overflow questions related to Vert.x"><title></title><path d="M15.725 0l-1.72 1.277 6.39 8.588 1.716-1.277L15.725 0zm-3.94 3.418l-1.369 1.644 8.225 6.85 1.369-1.644-8.225-6.85zm-3.15 4.465l-.905 1.94 9.702 4.517.904-1.94-9.701-4.517zm-1.85 4.86l-.44 2.093 10.473 2.201.44-2.092-10.473-2.203zM1.89 15.47V24h19.19v-8.53h-2.133v6.397H4.021v-6.396H1.89zm4.265 2.133v2.13h10.66v-2.13H6.154Z"></path></svg></a></span><div class="jsx-75cbc16d79a176fb tooltip">Stack Overflow<div data-popper-arrow="true" class="jsx-75cbc16d79a176fb tooltip-arrow"></div></div><span class="jsx-75cbc16d79a176fb "><a href="https://www.youtube.com/channel/UCGN6L3tRhs92Uer3c6VxOSA" target="_blank" rel="noopener noreferrer" class="jsx-f705e145f931f504 navbar-social-link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="YouTube channel of Vert.x"><title></title><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"></path></svg></a></span><div class="jsx-75cbc16d79a176fb tooltip">YouTube<div data-popper-arrow="true" class="jsx-75cbc16d79a176fb tooltip-arrow"></div></div><span class="jsx-75cbc16d79a176fb "><a href="https://discord.gg/KzEMwP2" target="_blank" rel="noopener noreferrer" class="jsx-f705e145f931f504 navbar-social-link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Eclipse Vert.x channel on Discord"><title></title><path d="M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.946 2.4189-2.1568 2.4189Z"></path></svg></a></span><div class="jsx-75cbc16d79a176fb tooltip">Discord<div data-popper-arrow="true" class="jsx-75cbc16d79a176fb tooltip-arrow"></div></div><span class="jsx-75cbc16d79a176fb "><a href="https://groups.google.com/forum/?fromgroups#!forum/vertx" target="_blank" rel="noopener noreferrer" class="jsx-f705e145f931f504 navbar-social-link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="A Google group for Vert.x users"><title></title><path d="M.92 3.332c-.776 0-1.216.67-.692 1.383l2.537 4.403v7.86c0 2.013 1.467 3.69 3.459 3.69H20.31a3.75 3.75 0 003.69-3.69V7.043a3.723 3.723 0 00-3.668-3.71zm5.786 3.71H20.1c.587 0 1.153.357 1.153.923 0 .566-.566.922-1.153.922H6.706c-.587 0-1.153-.356-1.153-.922 0-.566.566-.923 1.153-.923zm0 3.69H20.1c.587 0 1.153.356 1.153.922 0 .566-.566.922-1.153.922H6.706c-.587 0-1.153-.356-1.153-.922 0-.566.566-.922 1.153-.922zm-.021 3.71h9.705c.587 0 1.153.356 1.153.922 0 .566-.566.923-1.153.923H6.685c-.587 0-1.153-.357-1.153-.923 0-.566.566-.922 1.153-.922Z"></path></svg></a></span><div class="jsx-75cbc16d79a176fb tooltip">Vert.x User Group<div data-popper-arrow="true" class="jsx-75cbc16d79a176fb tooltip-arrow"></div></div><span class="jsx-75cbc16d79a176fb "><a href="https://qm.qq.com/cgi-bin/qm/qr?k=I4Z94iAgTJXB6FyR_U5scsJHtkjb1pif&amp;jump_from=webapi" target="_blank" rel="noopener noreferrer" class="jsx-f705e145f931f504 navbar-social-link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Vert.x中国用户组QQ群"><title></title><path d="M21.395 15.035a39.548 39.548 0 0 0-.803-2.264l-1.079-2.695c.001-.032.014-.562.014-.836C19.526 4.632 17.351 0 12 0S4.474 4.632 4.474 9.241c0 .274.013.804.014.836l-1.08 2.695a38.97 38.97 0 0 0-.802 2.264c-1.021 3.283-.69 4.643-.438 4.673.54.065 2.103-2.472 2.103-2.472 0 1.469.756 3.387 2.394 4.771-.612.188-1.363.479-1.845.835-.434.32-.379.646-.301.778.343.578 5.883.369 7.482.189 1.6.18 7.14.389 7.483-.189.078-.132.132-.458-.301-.778-.483-.356-1.233-.646-1.846-.836 1.637-1.384 2.393-3.302 2.393-4.771 0 0 1.563 2.537 2.103 2.472.251-.03.581-1.39-.438-4.673zM12.662 4.846c.039-1.052.659-1.878 1.385-1.846s1.281.912 1.242 1.964c-.039 1.051-.659 1.878-1.385 1.846s-1.282-.912-1.242-1.964zM9.954 3c.725-.033 1.345.794 1.384 1.846.04 1.052-.517 1.931-1.242 1.963-.726.033-1.346-.794-1.385-1.845C8.672 3.912 9.228 3.033 9.954 3zM7.421 8.294c.194-.43 2.147-.908 4.566-.908h.026c2.418 0 4.372.479 4.566.908a.14.14 0 0 1 .014.061c0 .031-.01.059-.026.083-.163.238-2.333 1.416-4.553 1.416h-.026c-2.221 0-4.39-1.178-4.553-1.416a.136.136 0 0 1-.014-.144zm10.422 8.622c-.22 3.676-2.403 5.987-5.774 6.021h-.137c-3.37-.033-5.554-2.345-5.773-6.021-.081-1.35.001-2.496.147-3.43.318.063.638.122.958.176v3.506s1.658.334 3.318.103v-3.225c.488.027.96.04 1.406.034h.025c1.678.021 3.714-.204 5.683-.594.146.934.227 2.08.147 3.43zM10.48 5.804c.313-.041.542-.409.508-.825-.033-.415-.314-.72-.629-.679-.313.04-.541.409-.508.824.034.417.315.72.629.68zM14.479 5.156c.078.037.221.042.289-.146.035-.095.025-.165-.009-.214-.023-.033-.133-.118-.371-.176-.904-.22-1.341.384-1.405.499-.04.072-.012.176.056.227.067.051.139.037.179-.006.58-.628 1.21-.208 1.261-.184z"></path></svg></a></span><div class="jsx-75cbc16d79a176fb tooltip">Vert.x中国用户组QQ群<div data-popper-arrow="true" class="jsx-75cbc16d79a176fb tooltip-arrow"></div></div><span class="jsx-75cbc16d79a176fb "><a href="https://qun.qq.com/qqweb/qunpro/share?_wv=3&amp;_wwv=128&amp;inviteCode=1reLvB&amp;from=246610&amp;biz=ka" target="_blank" rel="noopener noreferrer" class="jsx-f705e145f931f504 navbar-social-link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 200 200" aria-label=""><path d="M13 73L16 49L52 49L58 14L82 14L77 49L135 49L141 14L166 14L160 49L195 49L192 73L157 73L148 124L184 124L181 149L144 149L137 193L90 149L61 149L55 185L31 185L36 149L0 149L6 124L100 124L120 144L131 75L72 75L64 124L40 124L48 73Z"></path></svg></a></span><div class="jsx-75cbc16d79a176fb tooltip">Vert.x中国用户组QQ频道<div data-popper-arrow="true" class="jsx-75cbc16d79a176fb tooltip-arrow"></div></div></div></div></div></div></header><div class="jsx-efcc50be384cabc7 page-content docs-content"><div class="jsx-efcc50be384cabc7 container"><div class="jsx-efcc50be384cabc7 docs-content-wrapper"><aside class="jsx-efcc50be384cabc7 "><div class="jsx-efcc50be384cabc7 docs-content-wrapper-sidebar"><div class="jsx-d1843944f2d67b search-panel"><div class="jsx-bf3edc7191e82cb search"><input type="text" disabled="" class="jsx-bf3edc7191e82cb autosuggest"/><input type="text" placeholder="Search..." value="" class="jsx-bf3edc7191e82cb"/><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="search-icon"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="search-icon-delete"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg></div><ul class="jsx-9ece789f808ef724 search-results"></ul><div class="jsx-9ece789f808ef724 search-results-none">No results.</div></div><div class="jsx-efcc50be384cabc7 docs-content-toc"><div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_introduction">Introduction</a></li>
<li><a href="#_writing_a_test_suite">Writing a test suite</a></li>
<li><a href="#_asserting">Asserting</a>
<ul class="sectlevel2">
<li><a href="#_assertequals">assertEquals</a></li>
<li><a href="#_assertnotequals">assertNotEquals</a></li>
<li><a href="#_assertnull">assertNull</a></li>
<li><a href="#_assertnotnull">assertNotNull</a></li>
<li><a href="#_assertinrange">assertInRange</a></li>
<li><a href="#_asserttrue_and_assertfalse">assertTrue and assertFalse</a></li>
<li><a href="#_failing">Failing</a></li>
<li><a href="#_using_third_party_assertion_framework">Using third-party assertion framework</a></li>
</ul>
</li>
<li><a href="#_asynchronous_testing">Asynchronous testing</a></li>
<li><a href="#_asynchronous_assertions">Asynchronous assertions</a></li>
<li><a href="#_repeating_test">Repeating test</a></li>
<li><a href="#_sharing_objects">Sharing objects</a></li>
<li><a href="#_running">Running</a>
<ul class="sectlevel2">
<li><a href="#_test_suite_completion">Test suite completion</a></li>
<li><a href="#_time_out">Time out</a></li>
<li><a href="#event_loop">Event loop</a></li>
</ul>
</li>
<li><a href="#reporting">Reporting</a>
<ul class="sectlevel2">
<li><a href="#_console_reporting">Console reporting</a></li>
<li><a href="#_file_reporting">File reporting</a></li>
<li><a href="#_log_reporting">Log reporting</a></li>
<li><a href="#_event_bus_reporting">Event bus reporting</a></li>
</ul>
</li>
<li><a href="#vertx_integration">Vertx integration</a></li>
<li><a href="#_junit_integration">Junit integration</a>
<ul class="sectlevel2">
<li><a href="#_running_a_test_on_a_vert_x_context">Running a test on a Vert.x context</a></li>
<li><a href="#_timeout">Timeout</a></li>
<li><a href="#_parameterized_tests">Parameterized tests</a></li>
<li><a href="#_repeating_a_test">Repeating a test</a></li>
<li><a href="#_using_with_other_assertion_libraries">Using with other assertion libraries</a></li>
</ul>
</li>
<li><a href="#_java_language_integration">Java language integration</a>
<ul class="sectlevel2">
<li><a href="#_test_suite_integration">Test suite integration</a></li>
</ul>
</li>
</ul>
</div></div></div></aside><div class="jsx-efcc50be384cabc7 docs-content-sidebar-toggle"><div style="position:relative" class="jsx-efcc50be384cabc7"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-list"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-x"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></div></div><div class="jsx-efcc50be384cabc7 docs-content-inner"><div class="jsx-efcc50be384cabc7 docs-content-metadata"><div class="jsx-efcc50be384cabc7 docs-content-metadata-left"><div class="jsx-efcc50be384cabc7"><a href="https://vertx.io/docs/apidocs" class="jsx-efcc50be384cabc7"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path></svg> API</a></div><span class="jsx-efcc50be384cabc7 docs-content-metadata-version"><div class="jsx-6650573c8f14945d dropdown"><a class="jsx-6650573c8f14945d dropdown-title">v4.2.7<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="jsx-6650573c8f14945d dropdown-menu align-right"></ul></div></span></div></div><div class="jsx-efcc50be384cabc7"><h1>Vertx unit</h1>

<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Asynchronous polyglot unit testing.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction"><a class="anchor" href="#_introduction"></a>Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Vertx Unit is designed for writing asynchronous unit tests with a polyglot API and running these tests
in the JVM. Vertx Unit Api borrows from existing test frameworks like <a href="http://junit.org">JUnit</a> or <a href="http://qunitjs.com">QUnit</a>
and follows the Vert.x practices.</p>
</div>
<div class="paragraph">
<p>As a consequence Vertx Unit is the natural choice for testing Vert.x applications.</p>
</div>
<div class="paragraph">
<p>To use vert.x unit, add the following dependency to the <em>dependencies</em> section of your build descriptor:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Maven (in your <code>pom.xml</code>):</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.vertx<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>vertx-unit<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.9.10<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Gradle (in your <code>build.gradle</code> file):</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">testCompile ${io.vertx}:${vertx-unit}:<span class="hljs-number">3.9</span><span class="hljs-number">.10</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Vert.x unit can be used in different ways and run anywhere your code runs, it is just a matter of reporting
the results the right way, this example shows the bare minimum test suite:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby"><span class="hljs-keyword">require</span> <span class="hljs-string">&#x27;vertx-unit/test_suite&#x27;</span>
suite = VertxUnit::TestSuite.create(<span class="hljs-string">&quot;the_test_suite&quot;</span>)
suite.test(<span class="hljs-string">&quot;my_test_case&quot;</span>) { <span class="hljs-params">|context|</span>
  s = <span class="hljs-string">&quot;value&quot;</span>
  context.assert_equals(<span class="hljs-string">&quot;value&quot;</span>, s)
}
suite.run()</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>run</code> method will execute the suite and go through all the
tests of the suite. The suite can fail or pass, this does not matter if the outer world is not aware
of the test result.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby"><span class="hljs-keyword">require</span> <span class="hljs-string">&#x27;vertx-unit/test_suite&#x27;</span>
suite = VertxUnit::TestSuite.create(<span class="hljs-string">&quot;the_test_suite&quot;</span>)
suite.test(<span class="hljs-string">&quot;my_test_case&quot;</span>) { <span class="hljs-params">|context|</span>
  s = <span class="hljs-string">&quot;value&quot;</span>
  context.assert_equals(<span class="hljs-string">&quot;value&quot;</span>, s)
}
suite.run({
  <span class="hljs-string">&#x27;reporters&#x27;</span> =&gt; [
    {
      <span class="hljs-string">&#x27;to&#x27;</span> =&gt; <span class="hljs-string">&quot;console&quot;</span>
    }
  ]
})</code></pre>
</div>
</div>
<div class="paragraph">
<p>When executed, the test suite now reports to the console the steps of the test suite:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Begin test suite the_test_suite
Begin test my_test
Passed my_test
End test suite the_test_suite , run: 1, Failures: 0, Errors: 0</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>reporters</code> option configures the reporters used by the suite runner for reporting the execution
of the tests, see the <a href="#reporting">Reporting</a> section for more info.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_writing_a_test_suite"><a class="anchor" href="#_writing_a_test_suite"></a>Writing a test suite</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A test suite is a named collection of test case, a test case is a straight callback to execute. The suite can
have lifecycle callbacks to execute <em>before</em> and/or <em>after</em> the test cases or the test suite that are used for
initializing or disposing services used by the test suite.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby"><span class="hljs-keyword">require</span> <span class="hljs-string">&#x27;vertx-unit/test_suite&#x27;</span>
suite = VertxUnit::TestSuite.create(<span class="hljs-string">&quot;the_test_suite&quot;</span>)
suite.test(<span class="hljs-string">&quot;my_test_case_1&quot;</span>) { <span class="hljs-params">|context|</span>
  <span class="hljs-comment"># Test 1</span>
}
suite.test(<span class="hljs-string">&quot;my_test_case_2&quot;</span>) { <span class="hljs-params">|context|</span>
  <span class="hljs-comment"># Test 2</span>
}
suite.test(<span class="hljs-string">&quot;my_test_case_3&quot;</span>) { <span class="hljs-params">|context|</span>
  <span class="hljs-comment"># Test 3</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The API is fluent and therefore the test cases can be chained:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby"><span class="hljs-keyword">require</span> <span class="hljs-string">&#x27;vertx-unit/test_suite&#x27;</span>
suite = VertxUnit::TestSuite.create(<span class="hljs-string">&quot;the_test_suite&quot;</span>)
suite.test(<span class="hljs-string">&quot;my_test_case_1&quot;</span>) { <span class="hljs-params">|context|</span>
  <span class="hljs-comment"># Test 1</span>
}.test(<span class="hljs-string">&quot;my_test_case_2&quot;</span>) { <span class="hljs-params">|context|</span>
  <span class="hljs-comment"># Test 2</span>
}.test(<span class="hljs-string">&quot;my_test_case_3&quot;</span>) { <span class="hljs-params">|context|</span>
  <span class="hljs-comment"># Test 3</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The test cases declaration order is not guaranteed, so test cases should not rely on the execution of
another test case to run. Such practice is considered as a bad one.</p>
</div>
<div class="paragraph">
<p>Vertx Unit provides <em>before</em> and <em>after</em> callbacks for doing global setup or cleanup:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby"><span class="hljs-keyword">require</span> <span class="hljs-string">&#x27;vertx-unit/test_suite&#x27;</span>
suite = VertxUnit::TestSuite.create(<span class="hljs-string">&quot;the_test_suite&quot;</span>)
suite.before() { <span class="hljs-params">|context|</span>
  <span class="hljs-comment"># Test suite setup</span>
}.test(<span class="hljs-string">&quot;my_test_case_1&quot;</span>) { <span class="hljs-params">|context|</span>
  <span class="hljs-comment"># Test 1</span>
}.test(<span class="hljs-string">&quot;my_test_case_2&quot;</span>) { <span class="hljs-params">|context|</span>
  <span class="hljs-comment"># Test 2</span>
}.test(<span class="hljs-string">&quot;my_test_case_3&quot;</span>) { <span class="hljs-params">|context|</span>
  <span class="hljs-comment"># Test 3</span>
}.after() { <span class="hljs-params">|context|</span>
  <span class="hljs-comment"># Test suite cleanup</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The declaration order of the method does not matter, the example declares the <em>before</em> callback before
the test cases and <em>after</em> callback after the test cases but it could be anywhere, as long as it is done before
running the test suite.</p>
</div>
<div class="paragraph">
<p>The <em>before</em> callback is executed before any tests, when it fails, the test suite execution will stop and the
failure is reported. The <em>after</em> callback is the last callback executed by the testsuite, unless
the <em>before</em> callback reporter a failure.</p>
</div>
<div class="paragraph">
<p>Likewise, Vertx Unit provides the <em>beforeEach</em> and <em>afterEach</em> callback that do the same but are executed
for each test case:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby"><span class="hljs-keyword">require</span> <span class="hljs-string">&#x27;vertx-unit/test_suite&#x27;</span>
suite = VertxUnit::TestSuite.create(<span class="hljs-string">&quot;the_test_suite&quot;</span>)
suite.before_each() { <span class="hljs-params">|context|</span>
  <span class="hljs-comment"># Test case setup</span>
}.test(<span class="hljs-string">&quot;my_test_case_1&quot;</span>) { <span class="hljs-params">|context|</span>
  <span class="hljs-comment"># Test 1</span>
}.test(<span class="hljs-string">&quot;my_test_case_2&quot;</span>) { <span class="hljs-params">|context|</span>
  <span class="hljs-comment"># Test 2</span>
}.test(<span class="hljs-string">&quot;my_test_case_3&quot;</span>) { <span class="hljs-params">|context|</span>
  <span class="hljs-comment"># Test 3</span>
}.after_each() { <span class="hljs-params">|context|</span>
  <span class="hljs-comment"># Test case cleanup</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <em>beforeEach</em> callback is executed before each test case, when it fails, the test case is not executed and the
failure is reported. The <em>afterEach</em> callback is the executed just after the test case callback, unless
the <em>beforeEach</em> callback reported a failure.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_asserting"><a class="anchor" href="#_asserting"></a>Asserting</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Vertx Unit provides the <code><a href="../../yardoc/VertxUnit/TestContext.html">TestContext</a></code> object for doing assertions in test cases. The <em>context</em>
object provides the usual methods when dealing with assertions.</p>
</div>
<div class="sect2">
<h3 id="_assertequals"><a class="anchor" href="#_assertequals"></a>assertEquals</h3>
<div class="paragraph">
<p>Assert two objects are equals, works for <em>basic</em> types or <em>json</em> types.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">suite.test(<span class="hljs-string">&quot;my_test_case&quot;</span>) { <span class="hljs-params">|context|</span>
  context.assert_equals(<span class="hljs-number">10</span>, callbackCount)
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>There is also an overloaded version for providing a message:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">suite.test(<span class="hljs-string">&quot;my_test_case&quot;</span>) { <span class="hljs-params">|context|</span>
  context.assert_equals(<span class="hljs-number">10</span>, callbackCount, <span class="hljs-string">&quot;Should have been 10 instead of <span class="hljs-subst">#{callbackCount}</span>&quot;</span>)
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Usually each assertion provides an overloaded version.</p>
</div>
</div>
<div class="sect2">
<h3 id="_assertnotequals"><a class="anchor" href="#_assertnotequals"></a>assertNotEquals</h3>
<div class="paragraph">
<p>The counter part of <em>assertEquals</em>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">suite.test(<span class="hljs-string">&quot;my_test_case&quot;</span>) { <span class="hljs-params">|context|</span>
  context.assert_not_equals(<span class="hljs-number">10</span>, callbackCount)
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_assertnull"><a class="anchor" href="#_assertnull"></a>assertNull</h3>
<div class="paragraph">
<p>Assert an object is null, works for <em>basic</em> types or <em>json</em> types.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">suite.test(<span class="hljs-string">&quot;my_test_case&quot;</span>) { <span class="hljs-params">|context|</span>
  context.assert_null(<span class="hljs-literal">nil</span>)
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_assertnotnull"><a class="anchor" href="#_assertnotnull"></a>assertNotNull</h3>
<div class="paragraph">
<p>The counter part of <em>assertNull</em>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">suite.test(<span class="hljs-string">&quot;my_test_case&quot;</span>) { <span class="hljs-params">|context|</span>
  context.assert_not_null(<span class="hljs-string">&quot;not null!&quot;</span>)
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_assertinrange"><a class="anchor" href="#_assertinrange"></a>assertInRange</h3>
<div class="paragraph">
<p>The <code><a href="../../yardoc/VertxUnit/TestContext.html#assert_in_range-instance_method">assertInRange</a></code> targets real numbers.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>suite.test("my_test_case") { |context|

  # Assert that 0.1 is equals to 0.2 +/- 0.5

  context.assert_in_range(0.1, 0.2, 0.5)
}</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_asserttrue_and_assertfalse"><a class="anchor" href="#_asserttrue_and_assertfalse"></a>assertTrue and assertFalse</h3>
<div class="paragraph">
<p>Asserts the value of a boolean expression.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">suite.test(<span class="hljs-string">&quot;my_test_case&quot;</span>) { <span class="hljs-params">|context|</span>
  context.assert_true(var)
  context.assert_false(value &gt; <span class="hljs-number">10</span>)
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_failing"><a class="anchor" href="#_failing"></a>Failing</h3>
<div class="paragraph">
<p>Last but not least, <em>test</em> provides a <em>fail</em> method that will throw an assertion error:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">suite.test(<span class="hljs-string">&quot;my_test_case&quot;</span>) { <span class="hljs-params">|context|</span>
  context.fail(<span class="hljs-string">&quot;That should never happen&quot;</span>)
  <span class="hljs-comment"># Following statements won&#x27;t be executed</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The failure can either be a <em>string</em> as seen previously or an <em>error</em>. The <em>error</em> object depends
on the target language, for Java or Groovy it can be any class extending <em>Throwable- , for
JavaScript it is an _error</em>, for Ruby it is an <em>Exception</em>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_using_third_party_assertion_framework"><a class="anchor" href="#_using_third_party_assertion_framework"></a>Using third-party assertion framework</h3>
<div class="paragraph">
<p>It is also possible to use any other assertion framework, like the popular <em>hamcrest</em> and <em>assertj</em>.
The recommended way to go is to use <code><a href="../../yardoc/VertxUnit/TestContext.html#verify-instance_method">verify</a></code>
and perform the assertions within the supplied <em>Handler</em>. This way, asynchronous testing termination
will be correctly handled.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">suite.test(<span class="hljs-string">&quot;my_test_case&quot;</span>) { <span class="hljs-params">|context|</span>
  context.verify() { <span class="hljs-params">|v|</span>
    <span class="hljs-comment"># Using here Assert from junit, could be assertj, hamcrest or any other</span>
    <span class="hljs-comment"># Even manually throwing an AssertionError.</span>
    Java::OrgJunit::Assert.assert_not_null(<span class="hljs-string">&quot;not null!&quot;</span>)
    Java::OrgJunit::Assert.assert_equals(<span class="hljs-number">10</span>, callbackCount)
  }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_asynchronous_testing"><a class="anchor" href="#_asynchronous_testing"></a>Asynchronous testing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The previous examples supposed that test cases were terminated after their respective callbacks, this is the
default behavior of a test case callback. Often it is desirable to terminate the test after the test case
callback, for instance:</p>
</div>
<div class="listingblock">
<div class="title">The Async object asynchronously completes the test case</div>
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">suite.test(<span class="hljs-string">&quot;my_test_case&quot;</span>) { <span class="hljs-params">|context|</span>
  async = context.async()
  eventBus.consumer(<span class="hljs-string">&quot;the-address&quot;</span>) { <span class="hljs-params">|msg|</span>
    <b class="conum">(2)</b>
    async.complete()
  }
  <b class="conum">(1)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The callback exits but the test case is not terminated</p>
</li>
<li>
<p>The event callback from the bus terminates the test</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Creating an <code><a href="../../yardoc/VertxUnit/Async.html">Async</a></code> object with the <code><a href="../../yardoc/VertxUnit/TestContext.html#async-instance_method">async</a></code> method marks the
executed test case as non terminated. The test case terminates when the <code><a href="../../yardoc/VertxUnit/Async.html#complete-instance_method">complete</a></code>
method is invoked.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">注意</div>
</td>
<td class="content">
When the <code>complete</code> callback is not invoked, the test case fails after a certain timeout.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Several <code>Async</code> objects can be created during the same test case, all of them must be <em>completed</em> to terminate
the test.</p>
</div>
<div class="listingblock">
<div class="title">Several Async objects provide coordination</div>
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">suite.test(<span class="hljs-string">&quot;my_test_case&quot;</span>) { <span class="hljs-params">|context|</span>

  async1 = context.async()
  client = vertx.create_http_client()
  req = client.get(<span class="hljs-number">8080</span>, <span class="hljs-string">&quot;localhost&quot;</span>, <span class="hljs-string">&quot;/&quot;</span>)
  req.exception_handler() { <span class="hljs-params">|err|</span>
    context.fail(err.get_message())
  }
  req.handler() { <span class="hljs-params">|resp|</span>
    context.assert_equals(<span class="hljs-number">200</span>, resp.status_code())
    async1.complete()
  }
  req.<span class="hljs-keyword">end</span>()

  async2 = context.async()
  vertx.event_bus().consumer(<span class="hljs-string">&quot;the-address&quot;</span>) { <span class="hljs-params">|msg|</span>
    async2.complete()
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Async objects can also be used in <em>before</em> or <em>after</em> callbacks, it can be very convenient in a <em>before</em> callback
to implement a setup that depends on one or several asynchronous results:</p>
</div>
<div class="listingblock">
<div class="title">Async starts an http server before test cases</div>
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">suite.before() { <span class="hljs-params">|context|</span>
  async = context.async()
  server = vertx.create_http_server()
  server.request_handler(&amp;requestHandler)
  server.listen(<span class="hljs-number">8080</span>) { <span class="hljs-params">|ar_err,ar|</span>
    context.assert_true(ar_err == <span class="hljs-literal">nil</span>)
    async.complete()
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>It is possible to wait until the completion of a specific <code><a href="../../yardoc/VertxUnit/Async.html">Async</a></code>, similar
to Java&#8217;s count-down latch:</p>
</div>
<div class="listingblock">
<div class="title">Wait for completion</div>
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">async = context.async()
server = vertx.create_http_server()
server.request_handler(&amp;requestHandler)
server.listen(<span class="hljs-number">8080</span>) { <span class="hljs-params">|ar_err,ar|</span>
  context.assert_true(ar_err == <span class="hljs-literal">nil</span>)
  async.complete()
}

<span class="hljs-comment"># Wait until completion</span>
async.await_success()

<span class="hljs-comment"># Do something else</span></code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">警告</div>
</td>
<td class="content">
this should not be executed from the event loop!
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Async can also be created with an initial count value, it completes when the count-down reaches
zero using <code><a href="../../yardoc/VertxUnit/Async.html#count_down-instance_method">countDown</a></code>:</p>
</div>
<div class="listingblock">
<div class="title">Wait until the complete count-down reaches zero</div>
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">async = context.async(<span class="hljs-number">2</span>)
server = vertx.create_http_server()
server.request_handler(&amp;requestHandler)
server.listen(<span class="hljs-number">8080</span>) { <span class="hljs-params">|ar_err,ar|</span>
  context.assert_true(ar_err == <span class="hljs-literal">nil</span>)
  async.count_down()
}

vertx.set_timer(<span class="hljs-number">1000</span>) { <span class="hljs-params">|id|</span>
  async.complete()
}

<span class="hljs-comment"># Wait until completion of the timer and the http request</span>
async.await_success()

<span class="hljs-comment"># Do something else</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Calling <code>complete()</code> on an async completes the async as usual, it actually sets the value to <code>0</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_asynchronous_assertions"><a class="anchor" href="#_asynchronous_assertions"></a>Asynchronous assertions</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code><a href="../../yardoc/VertxUnit/TestContext.html">TestContext</a></code> provides useful methods that provides powerful constructs for async testing:</p>
</div>
<div class="paragraph">
<p>The <code><a href="../../yardoc/VertxUnit/TestContext.html#async_assert_success-instance_method">asyncAssertSuccess</a></code> method returns an {@literal Handler&lt;AsyncResult&lt;T&gt;&gt;}
instance that acts like <code><a href="../../yardoc/VertxUnit/Async.html">Async</a></code>, resolving the <code>Async</code> on success and failing the test
on failure with the failure cause.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="hljs-type">Async</span> <span class="hljs-variable">async</span> <span class="hljs-operator">=</span> context.async();
vertx.deployVerticle(<span class="hljs-string">&quot;my.verticle&quot;</span>, ar -&gt; {
  <span class="hljs-keyword">if</span> (ar.succeeded()) {
    async.complete();
  } <span class="hljs-keyword">else</span> {
    context.fail(ar.cause());
  }
});

<span class="hljs-comment">// Can be replaced by</span>

vertx.deployVerticle(<span class="hljs-string">&quot;my.verticle&quot;</span>, context.asyncAssertSuccess());</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code><a href="../../yardoc/VertxUnit/TestContext.html#async_assert_success-instance_method">asyncAssertSuccess</a></code> method returns an {@literal Handler&lt;AsyncResult&lt;T&gt;&gt;}
instance that acts like <code><a href="../../yardoc/VertxUnit/Async.html">Async</a></code>, invoking the delegating {@literal Handler&lt;T&gt;} on success
and failing the test on failure with the failure cause.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="hljs-type">AtomicBoolean</span> <span class="hljs-variable">started</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicBoolean</span>();
<span class="hljs-type">Async</span> <span class="hljs-variable">async</span> <span class="hljs-operator">=</span> context.async();
vertx.deployVerticle(<span class="hljs-keyword">new</span> <span class="hljs-title class_">AbstractVerticle</span>() {
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">start</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
    started.set(<span class="hljs-literal">true</span>);
  }
}, ar -&gt; {
  <span class="hljs-keyword">if</span> (ar.succeeded()) {
    context.assertTrue(started.get());
    async.complete();
  } <span class="hljs-keyword">else</span> {
    context.fail(ar.cause());
  }
});

<span class="hljs-comment">// Can be replaced by</span>

vertx.deployVerticle(<span class="hljs-string">&quot;my.verticle&quot;</span>, context.asyncAssertSuccess(id -&gt; {
  context.assertTrue(started.get());
}));</code></pre>
</div>
</div>
<div class="paragraph">
<p>The async is completed when the <code>Handler</code> exits, unless new asyncs were created during the invocation, which
can be handy to <em>chain</em> asynchronous behaviors:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="hljs-type">Async</span> <span class="hljs-variable">async</span> <span class="hljs-operator">=</span> context.async();
vertx.deployVerticle(<span class="hljs-string">&quot;my.verticle&quot;</span>, ar1 -&gt; {
  <span class="hljs-keyword">if</span> (ar1.succeeded()) {
    vertx.deployVerticle(<span class="hljs-string">&quot;my.otherverticle&quot;</span>, ar2 -&gt; {
      <span class="hljs-keyword">if</span> (ar2.succeeded()) {
        async.complete();
      } <span class="hljs-keyword">else</span> {
        context.fail(ar2.cause());
      }
    });
  } <span class="hljs-keyword">else</span> {
    context.fail(ar1.cause());
  }
});

<span class="hljs-comment">// Can be replaced by</span>

vertx.deployVerticle(<span class="hljs-string">&quot;my.verticle&quot;</span>, context.asyncAssertSuccess(id -&gt;
        vertx.deployVerticle(<span class="hljs-string">&quot;my_otherverticle&quot;</span>, context.asyncAssertSuccess())
));</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code><a href="../../yardoc/VertxUnit/TestContext.html#async_assert_failure-instance_method">asyncAssertFailure</a></code> method returns an {@literal Handler&lt;AsyncResult&lt;T&gt;&gt;}
instance that acts like <code><a href="../../yardoc/VertxUnit/Async.html">Async</a></code>, resolving the <code>Async</code> on failure and failing the test
on success.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="hljs-type">Async</span> <span class="hljs-variable">async</span> <span class="hljs-operator">=</span> context.async();
vertx.deployVerticle(<span class="hljs-string">&quot;my.verticle&quot;</span>, ar -&gt; {
  <span class="hljs-keyword">if</span> (ar.succeeded()) {
    context.fail();
  } <span class="hljs-keyword">else</span> {
    async.complete();
  }
});

<span class="hljs-comment">// Can be replaced by</span>

vertx.deployVerticle(<span class="hljs-string">&quot;my.verticle&quot;</span>, context.asyncAssertFailure());</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code><a href="../../yardoc/VertxUnit/TestContext.html#async_assert_failure-instance_method">asyncAssertFailure</a></code> method returns an {@literal Handler&lt;AsyncResult&lt;T&gt;&gt;}
instance that acts like <code><a href="../../yardoc/VertxUnit/Async.html">Async</a></code>, invoking the delegating {@literal Handler&lt;Throwable&gt;} on
failure and failing the test on success.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="hljs-type">Async</span> <span class="hljs-variable">async</span> <span class="hljs-operator">=</span> context.async();
vertx.deployVerticle(<span class="hljs-string">&quot;my.verticle&quot;</span>, ar -&gt; {
  <span class="hljs-keyword">if</span> (ar.succeeded()) {
    context.fail();
  } <span class="hljs-keyword">else</span> {
    context.assertTrue(ar.cause() <span class="hljs-keyword">instanceof</span> IllegalArgumentException);
    async.complete();
  }
});

<span class="hljs-comment">// Can be replaced by</span>

vertx.deployVerticle(<span class="hljs-string">&quot;my.verticle&quot;</span>, context.asyncAssertFailure(cause -&gt; {
  context.assertTrue(cause <span class="hljs-keyword">instanceof</span> IllegalArgumentException);
}));</code></pre>
</div>
</div>
<div class="paragraph">
<p>The async is completed when the <code>Handler</code> exits, unless new asyncs were created during the invocation.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_repeating_test"><a class="anchor" href="#_repeating_test"></a>Repeating test</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When a test fails randomly or not often, for instance a race condition, it is convenient to run the same
test multiple times to increase the failure likelihood of the test.</p>
</div>
<div class="listingblock">
<div class="title">Repeating a test</div>
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby"><span class="hljs-keyword">require</span> <span class="hljs-string">&#x27;vertx-unit/test_suite&#x27;</span>
VertxUnit::TestSuite.create(<span class="hljs-string">&quot;my_suite&quot;</span>).test(<span class="hljs-string">&quot;my_test&quot;</span>, <span class="hljs-number">1000</span>) { <span class="hljs-params">|context|</span>
  <span class="hljs-comment"># This will be executed 1000 times</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>When declared, <em>beforeEach</em> and <em>afterEach</em> callbacks will be executed as many times as the test is executed.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">注意</div>
</td>
<td class="content">
test repetition are executed sequentially
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_sharing_objects"><a class="anchor" href="#_sharing_objects"></a>Sharing objects</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code><a href="../../yardoc/VertxUnit/TestContext.html">TestContext</a></code> has <code>get</code>/<code>put</code>/<code>remove</code> operations for sharing state between callbacks.</p>
</div>
<div class="paragraph">
<p>Any object added during the <em>before</em> callback is available in any other callbacks. Each test case will operate on
a copy of the shared state, so updates will only be visible for a test case.</p>
</div>
<div class="listingblock">
<div class="title">Sharing state between callbacks</div>
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby"><span class="hljs-keyword">require</span> <span class="hljs-string">&#x27;vertx-unit/test_suite&#x27;</span>
VertxUnit::TestSuite.create(<span class="hljs-string">&quot;my_suite&quot;</span>).before() { <span class="hljs-params">|context|</span>

  <span class="hljs-comment"># host is available for all test cases</span>
  context.put(<span class="hljs-string">&quot;host&quot;</span>, <span class="hljs-string">&quot;localhost&quot;</span>)

}.before_each() { <span class="hljs-params">|context|</span>

  <span class="hljs-comment"># Generate a random port for each test</span>
  port = helper.random_port()

  <span class="hljs-comment"># Get host</span>
  host = context.get(<span class="hljs-string">&quot;host&quot;</span>)

  <span class="hljs-comment"># Setup server</span>
  async = context.async()
  server = vertx.create_http_server()
  server.request_handler() { <span class="hljs-params">|req|</span>
    req.response().set_status_code(<span class="hljs-number">200</span>).<span class="hljs-keyword">end</span>()
  }
  server.listen(port, host) { <span class="hljs-params">|ar_err,ar|</span>
    context.assert_true(ar_err == <span class="hljs-literal">nil</span>)
    context.put(<span class="hljs-string">&quot;port&quot;</span>, port)
    async.complete()
  }

}.test(<span class="hljs-string">&quot;my_test&quot;</span>) { <span class="hljs-params">|context|</span>

  <span class="hljs-comment"># Get the shared state</span>
  port = context.get(<span class="hljs-string">&quot;port&quot;</span>)
  host = context.get(<span class="hljs-string">&quot;host&quot;</span>)

  <span class="hljs-comment"># Do request</span>
  client = vertx.create_http_client()
  req = client.get(port, host, <span class="hljs-string">&quot;/resource&quot;</span>)
  async = context.async()
  req.handler() { <span class="hljs-params">|resp|</span>
    context.assert_equals(<span class="hljs-number">200</span>, resp.status_code())
    async.complete()
  }
  req.<span class="hljs-keyword">end</span>()
}</code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">警告</div>
</td>
<td class="content">
sharing any object is only supported in Java, other languages can share only basic or json types.
Other objects should be shared using the features of that language.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_running"><a class="anchor" href="#_running"></a>Running</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When a test suite is created, it won&#8217;t be executed until the <code><a href="../../yardoc/VertxUnit/TestSuite.html#run-instance_method">run</a></code> method
is called.</p>
</div>
<div class="listingblock">
<div class="title">Running a test suite</div>
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">suite.run()</code></pre>
</div>
</div>
<div class="paragraph">
<p>The test suite can also be run with a specified <code><a href="../../yardoc/Vertx/Vertx.html">Vertx</a></code> instance:</p>
</div>
<div class="listingblock">
<div class="title">Provides a Vertx instance to run the test suite</div>
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">suite.run(vertx)</code></pre>
</div>
</div>
<div class="paragraph">
<p>When running with a <code>Vertx</code> instance, the test suite is executed using the Vertx event loop, see the <a href="#event_loop">Event loop</a>
section for more details.</p>
</div>
<div class="paragraph">
<p>A test suite can be run with the Vert.x Command Line Interface with the <code>vertx test</code> command:</p>
</div>
<div class="listingblock">
<div class="title">Running a test suite with the Vert.x CLI</div>
<div class="content">
<pre class="highlight"><code>&gt; vertx test the_test_suite.js
Begin test suite the_test_suite
Succeeded in deploying verticle
Begin test my_test_case
Passed my_test_case
End test suite my_suite , run: 1, Failures: 0, Errors: 0</code></pre>
</div>
</div>
<div class="paragraph">
<p>Such test suite just need to be executed via the <code><a href="../../yardoc/VertxUnit/TestSuite.html#run-instance_method">run</a></code> command, the
<code>vertx test</code> command takes care of configuring reporting, timeout, etc&#8230;&#8203;, pretty much like in this
example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby"><span class="hljs-keyword">require</span> <span class="hljs-string">&#x27;vertx-unit/test_suite&#x27;</span>
suite = VertxUnit::TestSuite.create(<span class="hljs-string">&quot;the_test_suite&quot;</span>)
suite.test(<span class="hljs-string">&quot;my_test_case&quot;</span>) { <span class="hljs-params">|context|</span>
  s = <span class="hljs-string">&quot;value&quot;</span>
  context.assert_equals(<span class="hljs-string">&quot;value&quot;</span>, s)
}
suite.run()</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>vertx test</code> command extends the <code>vertx run</code> command. The exit behavior of the JVM is changed
the JVM exits when the test suite is executed and a return value is provided indicating the tests
success (0) or failure (1).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">注意</div>
</td>
<td class="content">
several test suites can executed in the same verticle, Vert.x Unit waits until completion of
all suite executed.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_test_suite_completion"><a class="anchor" href="#_test_suite_completion"></a>Test suite completion</h3>
<div class="paragraph">
<p>No assumptions can be made about when the test suite will be completed, and if some code needs to be executed
after the test suite, it should either be in the test suite <em>after</em> callback or as callback of the
<code><a href="../../yardoc/VertxUnit/Completion.html">Completion</a></code>:</p>
</div>
<div class="listingblock">
<div class="title">Test suite execution callback</div>
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">completion = suite.run(vertx)

<span class="hljs-comment"># Simple completion callback</span>
completion.handler() { <span class="hljs-params">|ar_err,ar|</span>
  <span class="hljs-keyword">if</span> (ar_err == <span class="hljs-literal">nil</span>)
    puts <span class="hljs-string">&quot;Test suite passed!&quot;</span>
  <span class="hljs-keyword">else</span>
    puts <span class="hljs-string">&quot;Test suite failed:&quot;</span>
    ar_err.print_stack_trace()
  <span class="hljs-keyword">end</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code><a href="../../yardoc/VertxUnit/Completion.html">Completion</a></code> object provides also a <code><a href="../../yardoc/VertxUnit/Completion.html#resolve-instance_method">resolve</a></code> method that
takes a <code>Promise</code> object, this <code>Promise</code> will be notified of the test suite execution:</p>
</div>
<div class="listingblock">
<div class="title">Resolving the start Promise with the test suite</div>
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">completion = suite.run()

<span class="hljs-comment"># When the suite completes, the promise is resolved</span>
completion.resolve(startPromise)</code></pre>
</div>
</div>
<div class="paragraph">
<p>This allow to easily create a <em>test</em> verticle whose deployment is the test suite execution, allowing the
code that deploys it to be easily aware of the success or failure.</p>
</div>
<div class="paragraph">
<p>The completion object can also be used like a latch to block until the test suite completes. This should
be used when the thread running the test suite is not the same than the current thread:</p>
</div>
<div class="listingblock">
<div class="title">Blocking until the test suite completes</div>
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">completion = suite.run()

<span class="hljs-comment"># Wait until the test suite completes</span>
completion.await()</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>await</code> throws an exception when the thread is interrupted or a timeout is fired.</p>
</div>
<div class="paragraph">
<p>The <code><a href="../../yardoc/VertxUnit/Completion.html#await_success-instance_method">awaitSuccess</a></code> is a variation that throws an exception when
the test suite fails.</p>
</div>
<div class="listingblock">
<div class="title">Blocking until the test suite succeeds</div>
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">completion = suite.run()

<span class="hljs-comment"># Wait until the test suite succeeds otherwise throw an exception</span>
completion.await_success()</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_time_out"><a class="anchor" href="#_time_out"></a>Time out</h3>
<div class="paragraph">
<p>Each test case of a test suite must execute before a certain timeout is reached. The default timeout is
of <em>2 minutes</em>, it can be changed using <em>test options</em>:</p>
</div>
<div class="listingblock">
<div class="title">Setting the test suite timeout</div>
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">options = {
  <span class="hljs-string">&#x27;timeout&#x27;</span> =&gt; <span class="hljs-number">10000</span>
}

<span class="hljs-comment"># Run with a 10 seconds time out</span>
suite.run(options)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="event_loop"><a class="anchor" href="#event_loop"></a>Event loop</h3>
<div class="paragraph">
<p>Vertx Unit execution is a list of tasks to execute, the execution of each task is driven by the completion
of the previous task. These tasks should leverage Vert.x event loop when possible but that depends on the
current execution context (i.e the test suite is executed in a <code>main</code> or embedded in a <code>Verticle</code>) and
wether or not a <code>Vertx</code> instance is configured.</p>
</div>
<div class="paragraph">
<p>The <code><a href="../dataobjects.html#TestOptions#set_use_event_loop-instance_method">useEventLoop</a></code> configures the usage of the event
loop:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Event loop usage</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top">useEventLoop:null</th>
<th class="tableblock halign-left valign-top">useEventLoop:true</th>
<th class="tableblock halign-left valign-top">useEventLoop:false</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Vertx</code> instance</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">use vertx event loop</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">use vertx event loop</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">force no event loop</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">in a <code>Verticle</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">use current event loop</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">use current event loop</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">force no event loop</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">in a <em>main</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">use no event loop</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">raise an error</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">use no event loop</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The default <code>useEventLoop</code> value is <code>null</code>, that means that it will uses an event loop when possible and fallback
to no event loop when no one is available.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="reporting"><a class="anchor" href="#reporting"></a>Reporting</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Reporting is an important piece of a test suite, Vertx Unit can be configured to run with different kind
of reporters.</p>
</div>
<div class="paragraph">
<p>By default no reporter is configured, when running a test suite, <em>test options</em> can be provided to
configure one or several:</p>
</div>
<div class="listingblock">
<div class="title">Using the console reporter and as a junit xml file</div>
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby"><span class="hljs-comment"># Report to console</span>
consoleReport = {
  <span class="hljs-string">&#x27;to&#x27;</span> =&gt; <span class="hljs-string">&quot;console&quot;</span>
}

<span class="hljs-comment"># Report junit files to the current directory</span>
junitReport = {
  <span class="hljs-string">&#x27;to&#x27;</span> =&gt; <span class="hljs-string">&quot;file:.&quot;</span>,
  <span class="hljs-string">&#x27;format&#x27;</span> =&gt; <span class="hljs-string">&quot;junit&quot;</span>
}

suite.run({
  <span class="hljs-string">&#x27;reporters&#x27;</span> =&gt; [
    consoleReport,
    junitReport
  ]
})</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_console_reporting"><a class="anchor" href="#_console_reporting"></a>Console reporting</h3>
<div class="paragraph">
<p>Reports to the JVM <code>System.out</code> and <code>System.err</code>:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">to</dt>
<dd>
<p><em>console</em></p>
</dd>
<dt class="hdlist1">format</dt>
<dd>
<p><em>simple</em> or <em>junit</em></p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_file_reporting"><a class="anchor" href="#_file_reporting"></a>File reporting</h3>
<div class="paragraph">
<p>Reports to a file, a <code>Vertx</code> instance must be provided:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">to</dt>
<dd>
<p><em>file</em> <code>:</code> <em>dir name</em></p>
</dd>
<dt class="hdlist1">format</dt>
<dd>
<p><em>simple</em> or <em>junit</em></p>
</dd>
<dt class="hdlist1">example</dt>
<dd>
<p><code>file:.</code></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The file reporter will create files in the configured directory, the files will be named after the
test suite name executed and the format (i.e <em>simple</em> creates <em>txt</em> files and <em>junit</em> creates <em>xml</em>
files).</p>
</div>
</div>
<div class="sect2">
<h3 id="_log_reporting"><a class="anchor" href="#_log_reporting"></a>Log reporting</h3>
<div class="paragraph">
<p>Reports to a logger, a <code>Vertx</code> instance must be provided:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">to</dt>
<dd>
<p><em>log</em> <code>:</code> <em>logger name</em></p>
</dd>
<dt class="hdlist1">example</dt>
<dd>
<p><code>log:mylogger</code></p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_event_bus_reporting"><a class="anchor" href="#_event_bus_reporting"></a>Event bus reporting</h3>
<div class="paragraph">
<p>Reports events to the event bus, a <code>Vertx</code> instance must be provided:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">to</dt>
<dd>
<p><em>bus</em> <code>:</code> <em>event bus address</em></p>
</dd>
<dt class="hdlist1">example</dt>
<dd>
<p><code>bus:the-address</code></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>It allow to decouple the execution of the test suite from the reporting.</p>
</div>
<div class="paragraph">
<p>The messages sent over the event bus can be collected by the <code><a href="../../yardoc/VertxUnit/EventBusCollector.html">EventBusCollector</a></code>
and achieve custom reporting:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby"><span class="hljs-keyword">require</span> <span class="hljs-string">&#x27;vertx-unit/event_bus_collector&#x27;</span>
collector = VertxUnit::EventBusCollector.create(vertx, {
  <span class="hljs-string">&#x27;reporters&#x27;</span> =&gt; [
    {
      <span class="hljs-string">&#x27;to&#x27;</span> =&gt; <span class="hljs-string">&quot;file:report.xml&quot;</span>,
      <span class="hljs-string">&#x27;format&#x27;</span> =&gt; <span class="hljs-string">&quot;junit&quot;</span>
    }
  ]
})

collector.register(<span class="hljs-string">&quot;the-address&quot;</span>)</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="vertx_integration"><a class="anchor" href="#vertx_integration"></a>Vertx integration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>By default, assertions and failures must be done on the <code><a href="../../yardoc/VertxUnit/TestContext.html">TestContext</a></code> and throwing an
assertion error works only when called by Vert.x Unit:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">suite.test(<span class="hljs-string">&quot;my_test_case&quot;</span>) { <span class="hljs-params">|ctx|</span>

  <span class="hljs-comment"># The failure will be reported by Vert.x Unit</span>
  raise <span class="hljs-string">&quot;it failed!&quot;</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In a regular Vert.x callback, the failure will be ignored:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">suite.test(<span class="hljs-string">&quot;test-server&quot;</span>) { <span class="hljs-params">|testContext|</span>
  server = vertx.create_http_server().request_handler() { <span class="hljs-params">|req|</span>
    <span class="hljs-keyword">if</span> (req.path().==(<span class="hljs-string">&quot;/somepath&quot;</span>))
      raise <span class="hljs-string">&quot;Wrong path!&quot;</span>
    <span class="hljs-keyword">end</span>
    req.response().<span class="hljs-keyword">end</span>()
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Since Vert.x 3.3, a global exception handler can be set to report the event loop uncaught exceptions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">suite.before() { <span class="hljs-params">|testContext|</span>

  <span class="hljs-comment"># Report uncaught exceptions as Vert.x Unit failures</span>
  vertx.exception_handler(&amp;testContext.exception_handler())
}

suite.test(<span class="hljs-string">&quot;test-server&quot;</span>) { <span class="hljs-params">|testContext|</span>
  server = vertx.create_http_server().request_handler() { <span class="hljs-params">|req|</span>
    <span class="hljs-keyword">if</span> (req.path().==(<span class="hljs-string">&quot;/somepath&quot;</span>))
      raise <span class="hljs-string">&quot;Wrong path!&quot;</span>
    <span class="hljs-keyword">end</span>
    req.response().<span class="hljs-keyword">end</span>()
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The exception handler is set during the <em>before</em> phase, the <code><a href="../../yardoc/VertxUnit/TestContext.html">TestContext</a></code> is shared
between each <em>before</em>, <em>test</em> and <em>after</em> phase. So the exception handler obtained during the <em>before</em> phase
is correct.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_junit_integration"><a class="anchor" href="#_junit_integration"></a>Junit integration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Although Vertx Unit is polyglot and not based on JUnit, it is possible to run a Vertx Unit test suite or a test case
from JUnit, allowing you to integrate your tests with JUnit and your build system or IDE.</p>
</div>
<div class="listingblock">
<div class="title">Run a Java class as a JUnit test suite</div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="hljs-meta">@RunWith(VertxUnitRunner.class)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JUnitTestSuite</span> {
  <span class="hljs-meta">@Test</span>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testSomething</span><span class="hljs-params">(TestContext context)</span> {
    context.assertFalse(<span class="hljs-literal">false</span>);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code><a href="unavailable">VertxUnitRunner</a></code> uses the junit annotations for introspecting the class
and create a test suite after the class. The methods should declare a <code><a href="../../yardoc/VertxUnit/TestContext.html">TestContext</a></code>
argument, if they don&#8217;t it is fine too. However the <code>TestContext</code> is the only way to retrieve the associated
Vertx instance of perform asynchronous tests.</p>
</div>
<div class="paragraph">
<p>The JUnit integration is also available for the Groovy language with the <code>io.vertx.groovy.ext.unit.junit.VertxUnitRunner</code>
runner.</p>
</div>
<div class="sect2">
<h3 id="_running_a_test_on_a_vert_x_context"><a class="anchor" href="#_running_a_test_on_a_vert_x_context"></a>Running a test on a Vert.x context</h3>
<div class="paragraph">
<p>By default the thread invoking the test methods is the JUnit thread. The <code><a href="unavailable">RunTestOnContext</a></code>
JUnit rule can be used to alter this behavior for running these test methods with a Vert.x event loop thread.</p>
</div>
<div class="paragraph">
<p>Thus there must be some care when state is shared between test methods and Vert.x handlers as they won&#8217;t be
on the same thread, e.g incrementing a counter in a Vert.x handler and asserting the counter in the test method.
One way to solve this is to use proper synchronization, another is to execute test methods on a Vert.x context
that will be propagated to the created handlers.</p>
</div>
<div class="paragraph">
<p>For this purpose the <code><a href="unavailable">RunTestOnContext</a></code> rule needs a <code><a href="../../yardoc/Vertx/Vertx.html">Vertx</a></code>
instance. Such instance can be provided, otherwise the rule will manage an instance under the hood. Such
instance can be retrieved when the test is running, making this rule a way to manage a <code><a href="../../yardoc/Vertx/Vertx.html">Vertx</a></code>
instance as well.</p>
</div>
<div class="listingblock">
<div class="title">Run a Java class as a JUnit test suite</div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="hljs-meta">@RunWith(VertxUnitRunner.class)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RunOnContextJUnitTestSuite</span> {

  <span class="hljs-meta">@Rule</span>
  <span class="hljs-keyword">public</span> <span class="hljs-type">RunTestOnContext</span> <span class="hljs-variable">rule</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RunTestOnContext</span>();

  <span class="hljs-meta">@Test</span>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testSomething</span><span class="hljs-params">(TestContext context)</span> {
    <span class="hljs-comment">// Use the underlying vertx instance</span>
    <span class="hljs-type">Vertx</span> <span class="hljs-variable">vertx</span> <span class="hljs-operator">=</span> rule.vertx();
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The rule can be annotated by {@literal @Rule} or {@literal @ClassRule}, the former manages a Vert.x instance
per test, the later a single Vert.x for the test methods of the class.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">警告</div>
</td>
<td class="content">
keep in mind that you cannot block the event loop when using this rule. Usage of classes like
<code>CountDownLatch</code> or similar classes must be done with care.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_timeout"><a class="anchor" href="#_timeout"></a>Timeout</h3>
<div class="paragraph">
<p>The Vert.x Unit 2 minutes timeout can be overriden with the <code>timeout</code> member of the <code>@Test</code> annotation:</p>
</div>
<div class="listingblock">
<div class="title">Configure the timeout at the test level</div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JunitTestWithTimeout</span> {

  <span class="hljs-meta">@Test(timeout = 1000l)</span>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testSomething</span><span class="hljs-params">(TestContext context)</span> {
    <span class="hljs-comment">//...</span>
  }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>For a more global configuration, the <code><a href="unavailable">Timeout</a></code> rule can be used:</p>
</div>
<div class="listingblock">
<div class="title">Configure the timeout at the class level</div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="hljs-meta">@RunWith(VertxUnitRunner.class)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TimeoutTestSuite</span> {

  <span class="hljs-meta">@Rule</span>
  <span class="hljs-keyword">public</span> <span class="hljs-type">Timeout</span> <span class="hljs-variable">rule</span> <span class="hljs-operator">=</span> Timeout.seconds(<span class="hljs-number">1</span>);

  <span class="hljs-meta">@Test</span>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testSomething</span><span class="hljs-params">(TestContext context)</span> {
    <span class="hljs-comment">//...</span>
  }
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">注意</div>
</td>
<td class="content">
the <code>@Test</code> timeout overrides the the <code><a href="unavailable">Timeout</a></code> rule.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_parameterized_tests"><a class="anchor" href="#_parameterized_tests"></a>Parameterized tests</h3>
<div class="paragraph">
<p>JUnit provides useful <code>Parameterized</code> tests, Vert.x Unit tests can be ran with this particular runner thanks to
the <code><a href="unavailable">VertxUnitRunnerWithParametersFactory</a></code>:</p>
</div>
<div class="listingblock">
<div class="title">Running a Vert.x Unit parameterized test</div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="hljs-meta">@RunWith(Parameterized.class)</span>
<span class="hljs-meta">@Parameterized</span>.UseParametersRunnerFactory(VertxUnitRunnerWithParametersFactory.class)
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SimpleParameterizedTest</span> {

  <span class="hljs-meta">@Parameterized</span>.Parameters
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Iterable&lt;Integer&gt; <span class="hljs-title function_">data</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">return</span> Arrays.asList(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>);
  }

  <span class="hljs-keyword">public</span> <span class="hljs-title function_">SimpleParameterizedTest</span><span class="hljs-params">(<span class="hljs-type">int</span> value)</span> {
    <span class="hljs-comment">//...</span>
  }

  <span class="hljs-meta">@Test</span>
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testSomething</span><span class="hljs-params">(TestContext context)</span> {
    <span class="hljs-comment">// Execute test with the current value</span>
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Parameterized tests can also be done in Groovy with the <code>io.vertx.groovy.ext.unit.junit.VertxUnitRunnerWithParametersFactory</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_repeating_a_test"><a class="anchor" href="#_repeating_a_test"></a>Repeating a test</h3>
<div class="paragraph">
<p>When a test fails randomly or not often, for instance a race condition, it is convenient to run the same
test multiple times to increase the likelihood failure of the test.</p>
</div>
<div class="paragraph">
<p>With JUnit a test has to be annotated with <code><a href="unavailable">@Repeat</a></code> to be repeated. The test must
also define the <code><a href="unavailable">RepeatRule</a></code> among its rules.</p>
</div>
<div class="listingblock">
<div class="title">Repeating a test with JUnit</div>
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby"><span class="hljs-variable">@RunWith</span>(VertxUnitRunner.<span class="hljs-keyword">class</span>)
public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RepeatingTest</span> {</span>

  <span class="hljs-variable">@Rule</span>
  public RepeatRule rule = new RepeatRule();

  <span class="hljs-variable">@Repeat</span>(<span class="hljs-number">1000</span>)
  <span class="hljs-variable">@Test</span>
  public void testSomething(TestContext context) {
    <span class="hljs-regexp">//</span> This will be executed <span class="hljs-number">1000</span> times
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>When declared, <em>before</em> and <em>after</em> life cycle will be executed as many times as the test is executed.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">注意</div>
</td>
<td class="content">
test repetition are executed sequentially
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_using_with_other_assertion_libraries"><a class="anchor" href="#_using_with_other_assertion_libraries"></a>Using with other assertion libraries</h3>
<div class="paragraph">
<p>Vert.x Unit usability has been greatly improved in Vert.x 3.3. You can now write tests using
<a href="http://hamcrest.org/">Hamcrest</a>, <a href="http://joel-costigliola.github.io/assertj/">AssertJ</a>,
<a href="https://github.com/rest-assured/rest-assured/">Rest Assured</a>, or any assertion library you want. This is made
possible by the global exception handler described in <a href="#vertx_integration">Vertx integration</a>.</p>
</div>
<div class="paragraph">
<p>You can find Java examples of using Vert.x Unit with Hamcrest and AssertJ in the
<a href="https://github.com/vert-x3/vertx-examples/tree/master/unit-examples">vertx-examples</a> project.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_java_language_integration"><a class="anchor" href="#_java_language_integration"></a>Java language integration</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_test_suite_integration"><a class="anchor" href="#_test_suite_integration"></a>Test suite integration</h3>
<div class="paragraph">
<p>The Java language provides classes and it is possible to create test suites directly from Java classes with the
following mapping rules:</p>
</div>
<div class="paragraph">
<p>The <code>testSuiteObject</code> argument methods are inspected and the public, non static methods
with <code><a href="../../yardoc/VertxUnit/TestContext.html">TestContext</a></code> parameter are retained and mapped to a Vertx Unit test suite
via the method name:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>before</code> : before callback</p>
</li>
<li>
<p><code>after</code> : after callback</p>
</li>
<li>
<p><code>beforeEach</code> : beforeEach callback</p>
</li>
<li>
<p><code>afterEach</code> : afterEach callback</p>
</li>
<li>
<p>when the name starts with <em>test</em> : test case callback named after the method name</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Test suite written using a Java class</div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyTestSuite</span> {

  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testSomething</span><span class="hljs-params">(TestContext context)</span> {
    context.assertFalse(<span class="hljs-literal">false</span>);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This class can be turned into a Vertx test suite easily:</p>
</div>
<div class="listingblock">
<div class="title">Create a test suite from a Java object</div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="hljs-type">TestSuite</span> <span class="hljs-variable">suite</span> <span class="hljs-operator">=</span> TestSuite.create(<span class="hljs-keyword">new</span> <span class="hljs-title class_">MyTestSuite</span>());</code></pre>
</div>
</div>
</div>
</div>
</div></div></div></div></div></div><footer class="jsx-aeedcf66895f49d7"><div class="jsx-aeedcf66895f49d7 container"><div class="jsx-aeedcf66895f49d7 footer-nav-section"><div class="jsx-aeedcf66895f49d7 footer-nav-list footer-logo"><a class="jsx-aeedcf66895f49d7" href="/"><img src="data:image/svg+xml,%3csvg version=&#x27;1.1&#x27; id=&#x27;Layer_1&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27; x=&#x27;0&#x27; y=&#x27;0&#x27; viewBox=&#x27;0 0 1232.6 315.2&#x27; style=&#x27;enable-background:new 0 0 1232.6 315.2&#x27; xml:space=&#x27;preserve&#x27;%3e%3cstyle%3e.st0%7bfill:%23782a91%7d%3c/style%3e%3cpath d=&#x27;M120.9 214.2 190.5 0h52.3l-98.5 273.8H98.2L0 0h52.1l68.8 214.2zm291.2-62.6H299.6v84.2H431v38H252V0h177.7v38.4H299.6V114h112.5v37.6zm83.7-113.2H546c16.5.3 29 4.4 37.3 12.4 8.3 8 12.5 19.4 12.5 34 0 14-4.5 25.1-13.5 33.2-9 8.1-21.6 12.1-37.6 12.1h-27.1v24.2l86.1 119.5h51v-2.4l-77.2-106.7c24.9-5.5 43.3-21.7 52.6-35.9 8.2-12.6 13.3-27.7 13.3-46 0-26.8-8.6-47.4-25.8-61.5C600.5 7.1 576.1 0 544.5 0h-96.3v273.8h47.6&#x27;/%3e%3cpath class=&#x27;st0&#x27; d=&#x27;m1052.3 157.7-41.5 62.7 29.7 53.4h85.1z&#x27;/%3e%3ccircle class=&#x27;st0&#x27; cx=&#x27;827.9&#x27; cy=&#x27;274.7&#x27; r=&#x27;40.5&#x27;/%3e%3cpath class=&#x27;st0&#x27; d=&#x27;m1037 0-47.6 74.2L949 0h-84l85.3 135.8-67.1 105.7c5.7 9.5 9.1 20.5 9.2 32.4h50.1L1121.3 0H1037z&#x27;/%3e%3cpath d=&#x27;M763.5 273.8c.1-9.9 2.5-19.2 6.6-27.5V38.4h85.4V0H638.2v38.4h84.6v235.4h40.7zm414-266.9h-15.3v42.2h-8.5V6.9h-15.2V0h39v6.9zM1193 0l14.2 37.7L1221.3 0h11v49.1h-8.5V32.9l.8-21.7-14.5 37.9h-6.1l-14.5-37.8.8 21.6v16.2h-8.5V0h11.2z&#x27;/%3e%3c/svg%3e" alt="Vert.x Logo" class="jsx-aeedcf66895f49d7"/></a></div><div class="jsx-aeedcf66895f49d7 footer-nav-list"><h5 class="jsx-aeedcf66895f49d7">Eclipse Vert.x</h5><ul class="jsx-aeedcf66895f49d7 "><li class="jsx-aeedcf66895f49d7"><a class="jsx-aeedcf66895f49d7 navbar-menu-item" href="/docs/">文档</a></li><li class="jsx-aeedcf66895f49d7"><a class="jsx-aeedcf66895f49d7" href="/download/">下载</a></li><li class="jsx-aeedcf66895f49d7"><a class="jsx-aeedcf66895f49d7" href="/blog/">博客</a></li><li class="jsx-aeedcf66895f49d7"><a class="jsx-aeedcf66895f49d7" href="/community/">社区</a></li><li class="jsx-aeedcf66895f49d7"><a class="jsx-aeedcf66895f49d7" href="/translation/">翻译团队</a></li><li class="jsx-aeedcf66895f49d7"><a href="https://github.com/eclipse-vertx/vert.x" class="jsx-aeedcf66895f49d7">GitHub</a></li><li class="jsx-aeedcf66895f49d7"><a href="https://github.com/vertx-china/vertx-web-site" class="jsx-aeedcf66895f49d7">翻译GitHub</a></li></ul></div><div class="jsx-aeedcf66895f49d7 footer-nav-list"><h5 class="jsx-aeedcf66895f49d7">资源</h5><ul class="jsx-aeedcf66895f49d7 "><li class="jsx-aeedcf66895f49d7"><a class="jsx-aeedcf66895f49d7" href="/faq/">答疑</a></li><li class="jsx-aeedcf66895f49d7"><a class="jsx-aeedcf66895f49d7" href="/channels/">联系渠道</a></li><li class="jsx-aeedcf66895f49d7"><a href="https://how-to.vertx.io/" class="jsx-aeedcf66895f49d7">操作指南</a></li><li class="jsx-aeedcf66895f49d7"><a href="https://start.vertx.io/" class="jsx-aeedcf66895f49d7">应用生成器</a></li><li class="jsx-aeedcf66895f49d7"><a href="/.well-known/security.txt" class="jsx-aeedcf66895f49d7">security.txt</a></li></ul></div><div class="jsx-aeedcf66895f49d7 footer-nav-list"><h5 class="jsx-aeedcf66895f49d7">Eclipse</h5><ul class="jsx-aeedcf66895f49d7 "><li class="jsx-aeedcf66895f49d7"><a href="https://www.eclipse.org/" class="jsx-aeedcf66895f49d7">Eclipse 基金会</a></li><li class="jsx-aeedcf66895f49d7"><a href="https://www.eclipse.org/legal/privacy.php" class="jsx-aeedcf66895f49d7">隐私政策</a></li><li class="jsx-aeedcf66895f49d7"><a href="https://www.eclipse.org/legal/termsofuse.php" class="jsx-aeedcf66895f49d7">使用条款</a></li><li class="jsx-aeedcf66895f49d7"><a href="https://www.eclipse.org/legal/copyright.php" class="jsx-aeedcf66895f49d7">版权代理</a></li><li class="jsx-aeedcf66895f49d7"><a href="https://www.eclipse.org/legal/" class="jsx-aeedcf66895f49d7">法律资源</a></li></ul></div></div><div class="jsx-aeedcf66895f49d7 footer-copyright"><div class="jsx-aeedcf66895f49d7 footer-copyright-remarks">© <!-- -->2022<!-- --> Eclipse Vert.x™<br class="jsx-aeedcf66895f49d7"/>Eclipse Vert.x™ 是开源的，并在<a href="https://creativecommons.org/licenses/by-sa/3.0/" target="_blank" rel="noopener noreferrer" class="jsx-aeedcf66895f49d7">Eclipse Public License 2.0</a>和<a href="https://www.apache.org/licenses/LICENSE-2.0.html" target="_blank" rel="noopener noreferrer" class="jsx-aeedcf66895f49d7">Apache License 2.0</a>协议下获得了双重许可。<br class="jsx-aeedcf66895f49d7 footer-copyright-break"/>网站由 <a href="https://michelkraemer.com" target="_blank" rel="noopener noreferrer" class="jsx-aeedcf66895f49d7">Michel Krämer</a> 设计。</div><div class="jsx-aeedcf66895f49d7 footer-copyright-eclipse-logo"><a href="https://www.eclipse.org/" target="_blank" rel="noopener noreferrer" class="jsx-aeedcf66895f49d7"><img src="data:image/svg+xml,%3csvg version=&#x27;1.1&#x27; id=&#x27;Layer_1&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27; x=&#x27;0&#x27; y=&#x27;0&#x27; viewBox=&#x27;0 0 281.3 91.1&#x27; style=&#x27;enable-background:new 0 0 281.3 91.1&#x27; xml:space=&#x27;preserve&#x27;%3e%3cstyle%3e.st0%7bfill:%23f79422%7d.st1%7bfill:%233d3c3b%7d%3c/style%3e%3cg id=&#x27;Layer_1_1_&#x27;%3e%3cpath class=&#x27;st0&#x27; d=&#x27;M265.7 84 257 73h-2.7v17.7h3.3v-12l9.3 12h2.1V73h-3.3v11zm-32.4-8.3c4.2 0 5.8 3.3 5.8 6.3s-1.6 6-5.8 6-5.7-3.1-5.8-6 1.7-6.3 5.8-6.3zm0-3c-6.1 0-9.1 4.7-9.1 9.3 0 4.7 2.9 9.1 9.1 9.1s9-4.6 9.1-9.2-3-9.2-9.1-9.2zm-21.2 18V73h-3.3v17.7h3.3zm-23.6 0h3.3V76h5.6v-3h-14.6v3h5.6l.1 14.7zm-18.9-6.5H163l3.3-7.6 3.3 7.6zm2.8 6.5h3.6L168.2 73h-3.6l-8 17.7h3.6l1.5-3.3h9.3l1.4 3.3zm-38-14.6h3.6c3.9 0 5.5 2.8 5.5 5.5.1 2.8-1.5 5.8-5.5 5.8h-3.6V76.1zm3.7-3.1h-6.9v17.7h6.9c6.2 0 8.9-4.5 8.9-9s-2.8-8.7-8.9-8.7zm-22.4 11L107 73h-2.7v17.7h3.3v-12l9.3 12h2.1V73h-3.3v11zM88.2 73v10.2c0 3-1.6 4.9-4.3 4.9s-4.6-1.7-4.6-4.9V73H76v10.1c0 5.3 3.6 7.9 7.9 7.9 4.4 0 7.7-2.7 7.7-7.9V73h-3.4zm-33 2.7c4.2 0 5.8 3.3 5.8 6.3s-1.6 6-5.8 6-5.7-3.1-5.8-6 1.7-6.3 5.8-6.3zm0-3c-6.1 0-9.1 4.7-9.1 9.3s2.9 9.1 9.1 9.1 9-4.6 9.1-9.2-3-9.2-9.1-9.2zm-29.7 18v-6.5h8.9v-3.1h-8.9v-4.8h9.4V73H22.2v17.6h3.3z&#x27;/%3e%3cpath class=&#x27;st1&#x27; d=&#x27;M269.4 54.4h-22.2v-8.9h21.4v-6.9h-21.4v-9.1h22.2v-7.2h-29.6v39.5h29.6v-7.4zm-40-25.6c-3-6.1-9.4-7.8-15.5-7.8-7.3 0-15.3 3.4-15.3 11.5 0 8.9 7.4 11 15.5 12 5.2.6 9.1 2.1 9.1 5.8 0 4.3-4.4 5.9-9.1 5.9s-9.4-1.9-11.1-6.3l-6.2 3.2c2.9 7.2 9.1 9.7 17.2 9.7 8.8 0 16.6-3.8 16.6-12.6 0-9.4-7.7-11.6-15.9-12.6-4.7-.6-8.8-1.5-8.8-5 0-2.9 2.6-5.2 8.2-5.2 4.3 0 8 2.2 9.4 4.4l5.9-3zM176 22.2c-6.2-.1-12.4 0-18.6 0v39.5h7.4V50.1H176c19.4 0 19.4-27.9 0-27.9zm-11.1 7.1H176c9.5 0 9.5 14 0 14h-11.2l.1-14zm-18 32.5V22.2h-7.4v39.5l7.4.1zm-44-39.6v39.5h27.7v-6.9h-20.3V22.2h-7.4zM90.7 51.7c-2.7 2.5-6.2 4-9.9 4-9.8 0-13.5-6.8-13.6-13.4s4.1-13.7 13.6-13.7c3.5-.1 7 1.3 9.5 3.7l5-4.8c-3.8-3.9-9.1-6-14.5-6-14.3 0-21 10.5-20.9 20.8s6.3 20.3 20.9 20.3c5.6.1 11-2 15-5.9l-5.1-5zm-39 2.7H29.5v-8.9h21.4v-6.9H29.5v-9.1h22.2v-7.2H22.2v39.5h29.6l-.1-7.4z&#x27;/%3e%3cpath class=&#x27;st0&#x27; d=&#x27;M9.8 18.2C18.8 4.1 36.9-.8 52.1 6l-1-.7C35.7-4.6 15.2-.1 5.3 15.3s-5.4 35.9 10 45.8l1.1.6C3.8 50.8.8 32.3 9.8 18.2z&#x27;/%3e%3cpath class=&#x27;st1&#x27; d=&#x27;M272.2 26.1c0-2.5 2.1-4.6 4.6-4.6 2.5 0 4.6 2.1 4.6 4.6 0 2.5-2.1 4.6-4.6 4.6-2.6 0-4.6-2.1-4.6-4.6zm8.6 0c0-2.2-1.8-4.1-4-4.1s-4.1 1.8-4.1 4.1c0 2.2 1.7 4 3.9 4.1h.1c2.3 0 4.1-1.8 4.1-4.1zm-6-2.5h2.3c1.1 0 1.9.5 1.9 1.6 0 .7-.4 1.3-1.1 1.5l1.2 1.7h-1.4l-1-1.5h-.7v1.5h-1.1l-.1-4.8zm2.2 2.3c.5 0 .8-.3.8-.7s-.3-.7-.8-.7h-1v1.3l1 .1z&#x27;/%3e%3c/g%3e%3c/svg%3e" alt="Eclipse foundation Logo" class="jsx-aeedcf66895f49d7"/></a></div></div></div></footer></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"slug":"3.9.10/vertx-unit/ruby","title":"Vertx unit","fallbackGitHubStars":null,"toc":"\u003cdiv id=\"toc\" class=\"toc\"\u003e\n\u003cdiv id=\"toctitle\"\u003eTable of Contents\u003c/div\u003e\n\u003cul class=\"sectlevel1\"\u003e\n\u003cli\u003e\u003ca href=\"#_introduction\"\u003eIntroduction\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_writing_a_test_suite\"\u003eWriting a test suite\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_asserting\"\u003eAsserting\u003c/a\u003e\n\u003cul class=\"sectlevel2\"\u003e\n\u003cli\u003e\u003ca href=\"#_assertequals\"\u003eassertEquals\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_assertnotequals\"\u003eassertNotEquals\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_assertnull\"\u003eassertNull\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_assertnotnull\"\u003eassertNotNull\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_assertinrange\"\u003eassertInRange\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_asserttrue_and_assertfalse\"\u003eassertTrue and assertFalse\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_failing\"\u003eFailing\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_using_third_party_assertion_framework\"\u003eUsing third-party assertion framework\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_asynchronous_testing\"\u003eAsynchronous testing\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_asynchronous_assertions\"\u003eAsynchronous assertions\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_repeating_test\"\u003eRepeating test\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_sharing_objects\"\u003eSharing objects\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_running\"\u003eRunning\u003c/a\u003e\n\u003cul class=\"sectlevel2\"\u003e\n\u003cli\u003e\u003ca href=\"#_test_suite_completion\"\u003eTest suite completion\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_time_out\"\u003eTime out\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#event_loop\"\u003eEvent loop\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#reporting\"\u003eReporting\u003c/a\u003e\n\u003cul class=\"sectlevel2\"\u003e\n\u003cli\u003e\u003ca href=\"#_console_reporting\"\u003eConsole reporting\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_file_reporting\"\u003eFile reporting\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_log_reporting\"\u003eLog reporting\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_event_bus_reporting\"\u003eEvent bus reporting\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#vertx_integration\"\u003eVertx integration\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_junit_integration\"\u003eJunit integration\u003c/a\u003e\n\u003cul class=\"sectlevel2\"\u003e\n\u003cli\u003e\u003ca href=\"#_running_a_test_on_a_vert_x_context\"\u003eRunning a test on a Vert.x context\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_timeout\"\u003eTimeout\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_parameterized_tests\"\u003eParameterized tests\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_repeating_a_test\"\u003eRepeating a test\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_using_with_other_assertion_libraries\"\u003eUsing with other assertion libraries\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_java_language_integration\"\u003eJava language integration\u003c/a\u003e\n\u003cul class=\"sectlevel2\"\u003e\n\u003cli\u003e\u003ca href=\"#_test_suite_integration\"\u003eTest suite integration\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e","contents":"\u003ch1\u003eVertx unit\u003c/h1\u003e\n\n\u003cdiv id=\"preamble\"\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eAsynchronous polyglot unit testing.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_introduction\"\u003e\u003ca class=\"anchor\" href=\"#_introduction\"\u003e\u003c/a\u003eIntroduction\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eVertx Unit is designed for writing asynchronous unit tests with a polyglot API and running these tests\nin the JVM. Vertx Unit Api borrows from existing test frameworks like \u003ca href=\"http://junit.org\"\u003eJUnit\u003c/a\u003e or \u003ca href=\"http://qunitjs.com\"\u003eQUnit\u003c/a\u003e\nand follows the Vert.x practices.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eAs a consequence Vertx Unit is the natural choice for testing Vert.x applications.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eTo use vert.x unit, add the following dependency to the \u003cem\u003edependencies\u003c/em\u003e section of your build descriptor:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eMaven (in your \u003ccode\u003epom.xml\u003c/code\u003e):\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-xml\" data-lang=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\n \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003eio.vertx\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003evertx-unit\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e3.9.10\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e\n \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003escope\u003c/span\u003e\u0026gt;\u003c/span\u003etest\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003escope\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eGradle (in your \u003ccode\u003ebuild.gradle\u003c/code\u003e file):\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-groovy\" data-lang=\"groovy\"\u003etestCompile ${io.vertx}:${vertx-unit}:\u003cspan class=\"hljs-number\"\u003e3.9\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.10\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eVert.x unit can be used in different ways and run anywhere your code runs, it is just a matter of reporting\nthe results the right way, this example shows the bare minimum test suite:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-ruby\" data-lang=\"ruby\"\u003e\u003cspan class=\"hljs-keyword\"\u003erequire\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026#x27;vertx-unit/test_suite\u0026#x27;\u003c/span\u003e\nsuite = VertxUnit::TestSuite.create(\u003cspan class=\"hljs-string\"\u003e\u0026quot;the_test_suite\u0026quot;\u003c/span\u003e)\nsuite.test(\u003cspan class=\"hljs-string\"\u003e\u0026quot;my_test_case\u0026quot;\u003c/span\u003e) { \u003cspan class=\"hljs-params\"\u003e|context|\u003c/span\u003e\n  s = \u003cspan class=\"hljs-string\"\u003e\u0026quot;value\u0026quot;\u003c/span\u003e\n  context.assert_equals(\u003cspan class=\"hljs-string\"\u003e\u0026quot;value\u0026quot;\u003c/span\u003e, s)\n}\nsuite.run()\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe \u003ccode\u003erun\u003c/code\u003e method will execute the suite and go through all the\ntests of the suite. The suite can fail or pass, this does not matter if the outer world is not aware\nof the test result.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-ruby\" data-lang=\"ruby\"\u003e\u003cspan class=\"hljs-keyword\"\u003erequire\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026#x27;vertx-unit/test_suite\u0026#x27;\u003c/span\u003e\nsuite = VertxUnit::TestSuite.create(\u003cspan class=\"hljs-string\"\u003e\u0026quot;the_test_suite\u0026quot;\u003c/span\u003e)\nsuite.test(\u003cspan class=\"hljs-string\"\u003e\u0026quot;my_test_case\u0026quot;\u003c/span\u003e) { \u003cspan class=\"hljs-params\"\u003e|context|\u003c/span\u003e\n  s = \u003cspan class=\"hljs-string\"\u003e\u0026quot;value\u0026quot;\u003c/span\u003e\n  context.assert_equals(\u003cspan class=\"hljs-string\"\u003e\u0026quot;value\u0026quot;\u003c/span\u003e, s)\n}\nsuite.run({\n  \u003cspan class=\"hljs-string\"\u003e\u0026#x27;reporters\u0026#x27;\u003c/span\u003e =\u0026gt; [\n    {\n      \u003cspan class=\"hljs-string\"\u003e\u0026#x27;to\u0026#x27;\u003c/span\u003e =\u0026gt; \u003cspan class=\"hljs-string\"\u003e\u0026quot;console\u0026quot;\u003c/span\u003e\n    }\n  ]\n})\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eWhen executed, the test suite now reports to the console the steps of the test suite:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre\u003eBegin test suite the_test_suite\nBegin test my_test\nPassed my_test\nEnd test suite the_test_suite , run: 1, Failures: 0, Errors: 0\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe \u003ccode\u003ereporters\u003c/code\u003e option configures the reporters used by the suite runner for reporting the execution\nof the tests, see the \u003ca href=\"#reporting\"\u003eReporting\u003c/a\u003e section for more info.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_writing_a_test_suite\"\u003e\u003ca class=\"anchor\" href=\"#_writing_a_test_suite\"\u003e\u003c/a\u003eWriting a test suite\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eA test suite is a named collection of test case, a test case is a straight callback to execute. The suite can\nhave lifecycle callbacks to execute \u003cem\u003ebefore\u003c/em\u003e and/or \u003cem\u003eafter\u003c/em\u003e the test cases or the test suite that are used for\ninitializing or disposing services used by the test suite.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-ruby\" data-lang=\"ruby\"\u003e\u003cspan class=\"hljs-keyword\"\u003erequire\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026#x27;vertx-unit/test_suite\u0026#x27;\u003c/span\u003e\nsuite = VertxUnit::TestSuite.create(\u003cspan class=\"hljs-string\"\u003e\u0026quot;the_test_suite\u0026quot;\u003c/span\u003e)\nsuite.test(\u003cspan class=\"hljs-string\"\u003e\u0026quot;my_test_case_1\u0026quot;\u003c/span\u003e) { \u003cspan class=\"hljs-params\"\u003e|context|\u003c/span\u003e\n  \u003cspan class=\"hljs-comment\"\u003e# Test 1\u003c/span\u003e\n}\nsuite.test(\u003cspan class=\"hljs-string\"\u003e\u0026quot;my_test_case_2\u0026quot;\u003c/span\u003e) { \u003cspan class=\"hljs-params\"\u003e|context|\u003c/span\u003e\n  \u003cspan class=\"hljs-comment\"\u003e# Test 2\u003c/span\u003e\n}\nsuite.test(\u003cspan class=\"hljs-string\"\u003e\u0026quot;my_test_case_3\u0026quot;\u003c/span\u003e) { \u003cspan class=\"hljs-params\"\u003e|context|\u003c/span\u003e\n  \u003cspan class=\"hljs-comment\"\u003e# Test 3\u003c/span\u003e\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe API is fluent and therefore the test cases can be chained:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-ruby\" data-lang=\"ruby\"\u003e\u003cspan class=\"hljs-keyword\"\u003erequire\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026#x27;vertx-unit/test_suite\u0026#x27;\u003c/span\u003e\nsuite = VertxUnit::TestSuite.create(\u003cspan class=\"hljs-string\"\u003e\u0026quot;the_test_suite\u0026quot;\u003c/span\u003e)\nsuite.test(\u003cspan class=\"hljs-string\"\u003e\u0026quot;my_test_case_1\u0026quot;\u003c/span\u003e) { \u003cspan class=\"hljs-params\"\u003e|context|\u003c/span\u003e\n  \u003cspan class=\"hljs-comment\"\u003e# Test 1\u003c/span\u003e\n}.test(\u003cspan class=\"hljs-string\"\u003e\u0026quot;my_test_case_2\u0026quot;\u003c/span\u003e) { \u003cspan class=\"hljs-params\"\u003e|context|\u003c/span\u003e\n  \u003cspan class=\"hljs-comment\"\u003e# Test 2\u003c/span\u003e\n}.test(\u003cspan class=\"hljs-string\"\u003e\u0026quot;my_test_case_3\u0026quot;\u003c/span\u003e) { \u003cspan class=\"hljs-params\"\u003e|context|\u003c/span\u003e\n  \u003cspan class=\"hljs-comment\"\u003e# Test 3\u003c/span\u003e\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe test cases declaration order is not guaranteed, so test cases should not rely on the execution of\nanother test case to run. Such practice is considered as a bad one.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eVertx Unit provides \u003cem\u003ebefore\u003c/em\u003e and \u003cem\u003eafter\u003c/em\u003e callbacks for doing global setup or cleanup:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-ruby\" data-lang=\"ruby\"\u003e\u003cspan class=\"hljs-keyword\"\u003erequire\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026#x27;vertx-unit/test_suite\u0026#x27;\u003c/span\u003e\nsuite = VertxUnit::TestSuite.create(\u003cspan class=\"hljs-string\"\u003e\u0026quot;the_test_suite\u0026quot;\u003c/span\u003e)\nsuite.before() { \u003cspan class=\"hljs-params\"\u003e|context|\u003c/span\u003e\n  \u003cspan class=\"hljs-comment\"\u003e# Test suite setup\u003c/span\u003e\n}.test(\u003cspan class=\"hljs-string\"\u003e\u0026quot;my_test_case_1\u0026quot;\u003c/span\u003e) { \u003cspan class=\"hljs-params\"\u003e|context|\u003c/span\u003e\n  \u003cspan class=\"hljs-comment\"\u003e# Test 1\u003c/span\u003e\n}.test(\u003cspan class=\"hljs-string\"\u003e\u0026quot;my_test_case_2\u0026quot;\u003c/span\u003e) { \u003cspan class=\"hljs-params\"\u003e|context|\u003c/span\u003e\n  \u003cspan class=\"hljs-comment\"\u003e# Test 2\u003c/span\u003e\n}.test(\u003cspan class=\"hljs-string\"\u003e\u0026quot;my_test_case_3\u0026quot;\u003c/span\u003e) { \u003cspan class=\"hljs-params\"\u003e|context|\u003c/span\u003e\n  \u003cspan class=\"hljs-comment\"\u003e# Test 3\u003c/span\u003e\n}.after() { \u003cspan class=\"hljs-params\"\u003e|context|\u003c/span\u003e\n  \u003cspan class=\"hljs-comment\"\u003e# Test suite cleanup\u003c/span\u003e\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe declaration order of the method does not matter, the example declares the \u003cem\u003ebefore\u003c/em\u003e callback before\nthe test cases and \u003cem\u003eafter\u003c/em\u003e callback after the test cases but it could be anywhere, as long as it is done before\nrunning the test suite.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe \u003cem\u003ebefore\u003c/em\u003e callback is executed before any tests, when it fails, the test suite execution will stop and the\nfailure is reported. The \u003cem\u003eafter\u003c/em\u003e callback is the last callback executed by the testsuite, unless\nthe \u003cem\u003ebefore\u003c/em\u003e callback reporter a failure.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eLikewise, Vertx Unit provides the \u003cem\u003ebeforeEach\u003c/em\u003e and \u003cem\u003eafterEach\u003c/em\u003e callback that do the same but are executed\nfor each test case:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-ruby\" data-lang=\"ruby\"\u003e\u003cspan class=\"hljs-keyword\"\u003erequire\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026#x27;vertx-unit/test_suite\u0026#x27;\u003c/span\u003e\nsuite = VertxUnit::TestSuite.create(\u003cspan class=\"hljs-string\"\u003e\u0026quot;the_test_suite\u0026quot;\u003c/span\u003e)\nsuite.before_each() { \u003cspan class=\"hljs-params\"\u003e|context|\u003c/span\u003e\n  \u003cspan class=\"hljs-comment\"\u003e# Test case setup\u003c/span\u003e\n}.test(\u003cspan class=\"hljs-string\"\u003e\u0026quot;my_test_case_1\u0026quot;\u003c/span\u003e) { \u003cspan class=\"hljs-params\"\u003e|context|\u003c/span\u003e\n  \u003cspan class=\"hljs-comment\"\u003e# Test 1\u003c/span\u003e\n}.test(\u003cspan class=\"hljs-string\"\u003e\u0026quot;my_test_case_2\u0026quot;\u003c/span\u003e) { \u003cspan class=\"hljs-params\"\u003e|context|\u003c/span\u003e\n  \u003cspan class=\"hljs-comment\"\u003e# Test 2\u003c/span\u003e\n}.test(\u003cspan class=\"hljs-string\"\u003e\u0026quot;my_test_case_3\u0026quot;\u003c/span\u003e) { \u003cspan class=\"hljs-params\"\u003e|context|\u003c/span\u003e\n  \u003cspan class=\"hljs-comment\"\u003e# Test 3\u003c/span\u003e\n}.after_each() { \u003cspan class=\"hljs-params\"\u003e|context|\u003c/span\u003e\n  \u003cspan class=\"hljs-comment\"\u003e# Test case cleanup\u003c/span\u003e\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe \u003cem\u003ebeforeEach\u003c/em\u003e callback is executed before each test case, when it fails, the test case is not executed and the\nfailure is reported. The \u003cem\u003eafterEach\u003c/em\u003e callback is the executed just after the test case callback, unless\nthe \u003cem\u003ebeforeEach\u003c/em\u003e callback reported a failure.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_asserting\"\u003e\u003ca class=\"anchor\" href=\"#_asserting\"\u003e\u003c/a\u003eAsserting\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eVertx Unit provides the \u003ccode\u003e\u003ca href=\"../../yardoc/VertxUnit/TestContext.html\"\u003eTestContext\u003c/a\u003e\u003c/code\u003e object for doing assertions in test cases. The \u003cem\u003econtext\u003c/em\u003e\nobject provides the usual methods when dealing with assertions.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_assertequals\"\u003e\u003ca class=\"anchor\" href=\"#_assertequals\"\u003e\u003c/a\u003eassertEquals\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eAssert two objects are equals, works for \u003cem\u003ebasic\u003c/em\u003e types or \u003cem\u003ejson\u003c/em\u003e types.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-ruby\" data-lang=\"ruby\"\u003esuite.test(\u003cspan class=\"hljs-string\"\u003e\u0026quot;my_test_case\u0026quot;\u003c/span\u003e) { \u003cspan class=\"hljs-params\"\u003e|context|\u003c/span\u003e\n  context.assert_equals(\u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e, callbackCount)\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThere is also an overloaded version for providing a message:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-ruby\" data-lang=\"ruby\"\u003esuite.test(\u003cspan class=\"hljs-string\"\u003e\u0026quot;my_test_case\u0026quot;\u003c/span\u003e) { \u003cspan class=\"hljs-params\"\u003e|context|\u003c/span\u003e\n  context.assert_equals(\u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e, callbackCount, \u003cspan class=\"hljs-string\"\u003e\u0026quot;Should have been 10 instead of \u003cspan class=\"hljs-subst\"\u003e#{callbackCount}\u003c/span\u003e\u0026quot;\u003c/span\u003e)\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eUsually each assertion provides an overloaded version.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_assertnotequals\"\u003e\u003ca class=\"anchor\" href=\"#_assertnotequals\"\u003e\u003c/a\u003eassertNotEquals\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe counter part of \u003cem\u003eassertEquals\u003c/em\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-ruby\" data-lang=\"ruby\"\u003esuite.test(\u003cspan class=\"hljs-string\"\u003e\u0026quot;my_test_case\u0026quot;\u003c/span\u003e) { \u003cspan class=\"hljs-params\"\u003e|context|\u003c/span\u003e\n  context.assert_not_equals(\u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e, callbackCount)\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_assertnull\"\u003e\u003ca class=\"anchor\" href=\"#_assertnull\"\u003e\u003c/a\u003eassertNull\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eAssert an object is null, works for \u003cem\u003ebasic\u003c/em\u003e types or \u003cem\u003ejson\u003c/em\u003e types.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-ruby\" data-lang=\"ruby\"\u003esuite.test(\u003cspan class=\"hljs-string\"\u003e\u0026quot;my_test_case\u0026quot;\u003c/span\u003e) { \u003cspan class=\"hljs-params\"\u003e|context|\u003c/span\u003e\n  context.assert_null(\u003cspan class=\"hljs-literal\"\u003enil\u003c/span\u003e)\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_assertnotnull\"\u003e\u003ca class=\"anchor\" href=\"#_assertnotnull\"\u003e\u003c/a\u003eassertNotNull\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe counter part of \u003cem\u003eassertNull\u003c/em\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-ruby\" data-lang=\"ruby\"\u003esuite.test(\u003cspan class=\"hljs-string\"\u003e\u0026quot;my_test_case\u0026quot;\u003c/span\u003e) { \u003cspan class=\"hljs-params\"\u003e|context|\u003c/span\u003e\n  context.assert_not_null(\u003cspan class=\"hljs-string\"\u003e\u0026quot;not null!\u0026quot;\u003c/span\u003e)\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_assertinrange\"\u003e\u003ca class=\"anchor\" href=\"#_assertinrange\"\u003e\u003c/a\u003eassertInRange\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe \u003ccode\u003e\u003ca href=\"../../yardoc/VertxUnit/TestContext.html#assert_in_range-instance_method\"\u003eassertInRange\u003c/a\u003e\u003c/code\u003e targets real numbers.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre\u003esuite.test(\"my_test_case\") { |context|\n\n  # Assert that 0.1 is equals to 0.2 +/- 0.5\n\n  context.assert_in_range(0.1, 0.2, 0.5)\n}\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_asserttrue_and_assertfalse\"\u003e\u003ca class=\"anchor\" href=\"#_asserttrue_and_assertfalse\"\u003e\u003c/a\u003eassertTrue and assertFalse\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eAsserts the value of a boolean expression.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-ruby\" data-lang=\"ruby\"\u003esuite.test(\u003cspan class=\"hljs-string\"\u003e\u0026quot;my_test_case\u0026quot;\u003c/span\u003e) { \u003cspan class=\"hljs-params\"\u003e|context|\u003c/span\u003e\n  context.assert_true(var)\n  context.assert_false(value \u0026gt; \u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e)\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_failing\"\u003e\u003ca class=\"anchor\" href=\"#_failing\"\u003e\u003c/a\u003eFailing\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eLast but not least, \u003cem\u003etest\u003c/em\u003e provides a \u003cem\u003efail\u003c/em\u003e method that will throw an assertion error:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-ruby\" data-lang=\"ruby\"\u003esuite.test(\u003cspan class=\"hljs-string\"\u003e\u0026quot;my_test_case\u0026quot;\u003c/span\u003e) { \u003cspan class=\"hljs-params\"\u003e|context|\u003c/span\u003e\n  context.fail(\u003cspan class=\"hljs-string\"\u003e\u0026quot;That should never happen\u0026quot;\u003c/span\u003e)\n  \u003cspan class=\"hljs-comment\"\u003e# Following statements won\u0026#x27;t be executed\u003c/span\u003e\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe failure can either be a \u003cem\u003estring\u003c/em\u003e as seen previously or an \u003cem\u003eerror\u003c/em\u003e. The \u003cem\u003eerror\u003c/em\u003e object depends\non the target language, for Java or Groovy it can be any class extending \u003cem\u003eThrowable- , for\nJavaScript it is an _error\u003c/em\u003e, for Ruby it is an \u003cem\u003eException\u003c/em\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_using_third_party_assertion_framework\"\u003e\u003ca class=\"anchor\" href=\"#_using_third_party_assertion_framework\"\u003e\u003c/a\u003eUsing third-party assertion framework\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIt is also possible to use any other assertion framework, like the popular \u003cem\u003ehamcrest\u003c/em\u003e and \u003cem\u003eassertj\u003c/em\u003e.\nThe recommended way to go is to use \u003ccode\u003e\u003ca href=\"../../yardoc/VertxUnit/TestContext.html#verify-instance_method\"\u003everify\u003c/a\u003e\u003c/code\u003e\nand perform the assertions within the supplied \u003cem\u003eHandler\u003c/em\u003e. This way, asynchronous testing termination\nwill be correctly handled.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-ruby\" data-lang=\"ruby\"\u003esuite.test(\u003cspan class=\"hljs-string\"\u003e\u0026quot;my_test_case\u0026quot;\u003c/span\u003e) { \u003cspan class=\"hljs-params\"\u003e|context|\u003c/span\u003e\n  context.verify() { \u003cspan class=\"hljs-params\"\u003e|v|\u003c/span\u003e\n    \u003cspan class=\"hljs-comment\"\u003e# Using here Assert from junit, could be assertj, hamcrest or any other\u003c/span\u003e\n    \u003cspan class=\"hljs-comment\"\u003e# Even manually throwing an AssertionError.\u003c/span\u003e\n    Java::OrgJunit::Assert.assert_not_null(\u003cspan class=\"hljs-string\"\u003e\u0026quot;not null!\u0026quot;\u003c/span\u003e)\n    Java::OrgJunit::Assert.assert_equals(\u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e, callbackCount)\n  }\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_asynchronous_testing\"\u003e\u003ca class=\"anchor\" href=\"#_asynchronous_testing\"\u003e\u003c/a\u003eAsynchronous testing\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe previous examples supposed that test cases were terminated after their respective callbacks, this is the\ndefault behavior of a test case callback. Often it is desirable to terminate the test after the test case\ncallback, for instance:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"title\"\u003eThe Async object asynchronously completes the test case\u003c/div\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-ruby\" data-lang=\"ruby\"\u003esuite.test(\u003cspan class=\"hljs-string\"\u003e\u0026quot;my_test_case\u0026quot;\u003c/span\u003e) { \u003cspan class=\"hljs-params\"\u003e|context|\u003c/span\u003e\n  async = context.async()\n  eventBus.consumer(\u003cspan class=\"hljs-string\"\u003e\u0026quot;the-address\u0026quot;\u003c/span\u003e) { \u003cspan class=\"hljs-params\"\u003e|msg|\u003c/span\u003e\n    \u003cb class=\"conum\"\u003e(2)\u003c/b\u003e\n    async.complete()\n  }\n  \u003cb class=\"conum\"\u003e(1)\u003c/b\u003e\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"colist arabic\"\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003eThe callback exits but the test case is not terminated\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eThe event callback from the bus terminates the test\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eCreating an \u003ccode\u003e\u003ca href=\"../../yardoc/VertxUnit/Async.html\"\u003eAsync\u003c/a\u003e\u003c/code\u003e object with the \u003ccode\u003e\u003ca href=\"../../yardoc/VertxUnit/TestContext.html#async-instance_method\"\u003easync\u003c/a\u003e\u003c/code\u003e method marks the\nexecuted test case as non terminated. The test case terminates when the \u003ccode\u003e\u003ca href=\"../../yardoc/VertxUnit/Async.html#complete-instance_method\"\u003ecomplete\u003c/a\u003e\u003c/code\u003e\nmethod is invoked.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"admonitionblock note\"\u003e\n\u003ctable\u003e\n\u003ctr\u003e\n\u003ctd class=\"icon\"\u003e\n\u003cdiv class=\"title\"\u003e注意\u003c/div\u003e\n\u003c/td\u003e\n\u003ctd class=\"content\"\u003e\nWhen the \u003ccode\u003ecomplete\u003c/code\u003e callback is not invoked, the test case fails after a certain timeout.\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eSeveral \u003ccode\u003eAsync\u003c/code\u003e objects can be created during the same test case, all of them must be \u003cem\u003ecompleted\u003c/em\u003e to terminate\nthe test.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"title\"\u003eSeveral Async objects provide coordination\u003c/div\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-ruby\" data-lang=\"ruby\"\u003esuite.test(\u003cspan class=\"hljs-string\"\u003e\u0026quot;my_test_case\u0026quot;\u003c/span\u003e) { \u003cspan class=\"hljs-params\"\u003e|context|\u003c/span\u003e\n\n  async1 = context.async()\n  client = vertx.create_http_client()\n  req = client.get(\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;localhost\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;/\u0026quot;\u003c/span\u003e)\n  req.exception_handler() { \u003cspan class=\"hljs-params\"\u003e|err|\u003c/span\u003e\n    context.fail(err.get_message())\n  }\n  req.handler() { \u003cspan class=\"hljs-params\"\u003e|resp|\u003c/span\u003e\n    context.assert_equals(\u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e, resp.status_code())\n    async1.complete()\n  }\n  req.\u003cspan class=\"hljs-keyword\"\u003eend\u003c/span\u003e()\n\n  async2 = context.async()\n  vertx.event_bus().consumer(\u003cspan class=\"hljs-string\"\u003e\u0026quot;the-address\u0026quot;\u003c/span\u003e) { \u003cspan class=\"hljs-params\"\u003e|msg|\u003c/span\u003e\n    async2.complete()\n  }\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eAsync objects can also be used in \u003cem\u003ebefore\u003c/em\u003e or \u003cem\u003eafter\u003c/em\u003e callbacks, it can be very convenient in a \u003cem\u003ebefore\u003c/em\u003e callback\nto implement a setup that depends on one or several asynchronous results:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"title\"\u003eAsync starts an http server before test cases\u003c/div\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-ruby\" data-lang=\"ruby\"\u003esuite.before() { \u003cspan class=\"hljs-params\"\u003e|context|\u003c/span\u003e\n  async = context.async()\n  server = vertx.create_http_server()\n  server.request_handler(\u0026amp;requestHandler)\n  server.listen(\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e) { \u003cspan class=\"hljs-params\"\u003e|ar_err,ar|\u003c/span\u003e\n    context.assert_true(ar_err == \u003cspan class=\"hljs-literal\"\u003enil\u003c/span\u003e)\n    async.complete()\n  }\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIt is possible to wait until the completion of a specific \u003ccode\u003e\u003ca href=\"../../yardoc/VertxUnit/Async.html\"\u003eAsync\u003c/a\u003e\u003c/code\u003e, similar\nto Java\u0026#8217;s count-down latch:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"title\"\u003eWait for completion\u003c/div\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-ruby\" data-lang=\"ruby\"\u003easync = context.async()\nserver = vertx.create_http_server()\nserver.request_handler(\u0026amp;requestHandler)\nserver.listen(\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e) { \u003cspan class=\"hljs-params\"\u003e|ar_err,ar|\u003c/span\u003e\n  context.assert_true(ar_err == \u003cspan class=\"hljs-literal\"\u003enil\u003c/span\u003e)\n  async.complete()\n}\n\n\u003cspan class=\"hljs-comment\"\u003e# Wait until completion\u003c/span\u003e\nasync.await_success()\n\n\u003cspan class=\"hljs-comment\"\u003e# Do something else\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"admonitionblock warning\"\u003e\n\u003ctable\u003e\n\u003ctr\u003e\n\u003ctd class=\"icon\"\u003e\n\u003cdiv class=\"title\"\u003e警告\u003c/div\u003e\n\u003c/td\u003e\n\u003ctd class=\"content\"\u003e\nthis should not be executed from the event loop!\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eAsync can also be created with an initial count value, it completes when the count-down reaches\nzero using \u003ccode\u003e\u003ca href=\"../../yardoc/VertxUnit/Async.html#count_down-instance_method\"\u003ecountDown\u003c/a\u003e\u003c/code\u003e:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"title\"\u003eWait until the complete count-down reaches zero\u003c/div\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-ruby\" data-lang=\"ruby\"\u003easync = context.async(\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e)\nserver = vertx.create_http_server()\nserver.request_handler(\u0026amp;requestHandler)\nserver.listen(\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e) { \u003cspan class=\"hljs-params\"\u003e|ar_err,ar|\u003c/span\u003e\n  context.assert_true(ar_err == \u003cspan class=\"hljs-literal\"\u003enil\u003c/span\u003e)\n  async.count_down()\n}\n\nvertx.set_timer(\u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e) { \u003cspan class=\"hljs-params\"\u003e|id|\u003c/span\u003e\n  async.complete()\n}\n\n\u003cspan class=\"hljs-comment\"\u003e# Wait until completion of the timer and the http request\u003c/span\u003e\nasync.await_success()\n\n\u003cspan class=\"hljs-comment\"\u003e# Do something else\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eCalling \u003ccode\u003ecomplete()\u003c/code\u003e on an async completes the async as usual, it actually sets the value to \u003ccode\u003e0\u003c/code\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_asynchronous_assertions\"\u003e\u003ca class=\"anchor\" href=\"#_asynchronous_assertions\"\u003e\u003c/a\u003eAsynchronous assertions\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e\u003ccode\u003e\u003ca href=\"../../yardoc/VertxUnit/TestContext.html\"\u003eTestContext\u003c/a\u003e\u003c/code\u003e provides useful methods that provides powerful constructs for async testing:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe \u003ccode\u003e\u003ca href=\"../../yardoc/VertxUnit/TestContext.html#async_assert_success-instance_method\"\u003easyncAssertSuccess\u003c/a\u003e\u003c/code\u003e method returns an {@literal Handler\u0026lt;AsyncResult\u0026lt;T\u0026gt;\u0026gt;}\ninstance that acts like \u003ccode\u003e\u003ca href=\"../../yardoc/VertxUnit/Async.html\"\u003eAsync\u003c/a\u003e\u003c/code\u003e, resolving the \u003ccode\u003eAsync\u003c/code\u003e on success and failing the test\non failure with the failure cause.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003e\u003cspan class=\"hljs-type\"\u003eAsync\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e context.async();\nvertx.deployVerticle(\u003cspan class=\"hljs-string\"\u003e\u0026quot;my.verticle\u0026quot;\u003c/span\u003e, ar -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.succeeded()) {\n    async.complete();\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    context.fail(ar.cause());\n  }\n});\n\n\u003cspan class=\"hljs-comment\"\u003e// Can be replaced by\u003c/span\u003e\n\nvertx.deployVerticle(\u003cspan class=\"hljs-string\"\u003e\u0026quot;my.verticle\u0026quot;\u003c/span\u003e, context.asyncAssertSuccess());\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe \u003ccode\u003e\u003ca href=\"../../yardoc/VertxUnit/TestContext.html#async_assert_success-instance_method\"\u003easyncAssertSuccess\u003c/a\u003e\u003c/code\u003e method returns an {@literal Handler\u0026lt;AsyncResult\u0026lt;T\u0026gt;\u0026gt;}\ninstance that acts like \u003ccode\u003e\u003ca href=\"../../yardoc/VertxUnit/Async.html\"\u003eAsync\u003c/a\u003e\u003c/code\u003e, invoking the delegating {@literal Handler\u0026lt;T\u0026gt;} on success\nand failing the test on failure with the failure cause.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003e\u003cspan class=\"hljs-type\"\u003eAtomicBoolean\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003estarted\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eAtomicBoolean\u003c/span\u003e();\n\u003cspan class=\"hljs-type\"\u003eAsync\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e context.async();\nvertx.deployVerticle(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eAbstractVerticle\u003c/span\u003e() {\n  \u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003estart\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e()\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003ethrows\u003c/span\u003e Exception {\n    started.set(\u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e);\n  }\n}, ar -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.succeeded()) {\n    context.assertTrue(started.get());\n    async.complete();\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    context.fail(ar.cause());\n  }\n});\n\n\u003cspan class=\"hljs-comment\"\u003e// Can be replaced by\u003c/span\u003e\n\nvertx.deployVerticle(\u003cspan class=\"hljs-string\"\u003e\u0026quot;my.verticle\u0026quot;\u003c/span\u003e, context.asyncAssertSuccess(id -\u0026gt; {\n  context.assertTrue(started.get());\n}));\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe async is completed when the \u003ccode\u003eHandler\u003c/code\u003e exits, unless new asyncs were created during the invocation, which\ncan be handy to \u003cem\u003echain\u003c/em\u003e asynchronous behaviors:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003e\u003cspan class=\"hljs-type\"\u003eAsync\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e context.async();\nvertx.deployVerticle(\u003cspan class=\"hljs-string\"\u003e\u0026quot;my.verticle\u0026quot;\u003c/span\u003e, ar1 -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar1.succeeded()) {\n    vertx.deployVerticle(\u003cspan class=\"hljs-string\"\u003e\u0026quot;my.otherverticle\u0026quot;\u003c/span\u003e, ar2 -\u0026gt; {\n      \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar2.succeeded()) {\n        async.complete();\n      } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n        context.fail(ar2.cause());\n      }\n    });\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    context.fail(ar1.cause());\n  }\n});\n\n\u003cspan class=\"hljs-comment\"\u003e// Can be replaced by\u003c/span\u003e\n\nvertx.deployVerticle(\u003cspan class=\"hljs-string\"\u003e\u0026quot;my.verticle\u0026quot;\u003c/span\u003e, context.asyncAssertSuccess(id -\u0026gt;\n        vertx.deployVerticle(\u003cspan class=\"hljs-string\"\u003e\u0026quot;my_otherverticle\u0026quot;\u003c/span\u003e, context.asyncAssertSuccess())\n));\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe \u003ccode\u003e\u003ca href=\"../../yardoc/VertxUnit/TestContext.html#async_assert_failure-instance_method\"\u003easyncAssertFailure\u003c/a\u003e\u003c/code\u003e method returns an {@literal Handler\u0026lt;AsyncResult\u0026lt;T\u0026gt;\u0026gt;}\ninstance that acts like \u003ccode\u003e\u003ca href=\"../../yardoc/VertxUnit/Async.html\"\u003eAsync\u003c/a\u003e\u003c/code\u003e, resolving the \u003ccode\u003eAsync\u003c/code\u003e on failure and failing the test\non success.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003e\u003cspan class=\"hljs-type\"\u003eAsync\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e context.async();\nvertx.deployVerticle(\u003cspan class=\"hljs-string\"\u003e\u0026quot;my.verticle\u0026quot;\u003c/span\u003e, ar -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.succeeded()) {\n    context.fail();\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    async.complete();\n  }\n});\n\n\u003cspan class=\"hljs-comment\"\u003e// Can be replaced by\u003c/span\u003e\n\nvertx.deployVerticle(\u003cspan class=\"hljs-string\"\u003e\u0026quot;my.verticle\u0026quot;\u003c/span\u003e, context.asyncAssertFailure());\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe \u003ccode\u003e\u003ca href=\"../../yardoc/VertxUnit/TestContext.html#async_assert_failure-instance_method\"\u003easyncAssertFailure\u003c/a\u003e\u003c/code\u003e method returns an {@literal Handler\u0026lt;AsyncResult\u0026lt;T\u0026gt;\u0026gt;}\ninstance that acts like \u003ccode\u003e\u003ca href=\"../../yardoc/VertxUnit/Async.html\"\u003eAsync\u003c/a\u003e\u003c/code\u003e, invoking the delegating {@literal Handler\u0026lt;Throwable\u0026gt;} on\nfailure and failing the test on success.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003e\u003cspan class=\"hljs-type\"\u003eAsync\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e context.async();\nvertx.deployVerticle(\u003cspan class=\"hljs-string\"\u003e\u0026quot;my.verticle\u0026quot;\u003c/span\u003e, ar -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.succeeded()) {\n    context.fail();\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    context.assertTrue(ar.cause() \u003cspan class=\"hljs-keyword\"\u003einstanceof\u003c/span\u003e IllegalArgumentException);\n    async.complete();\n  }\n});\n\n\u003cspan class=\"hljs-comment\"\u003e// Can be replaced by\u003c/span\u003e\n\nvertx.deployVerticle(\u003cspan class=\"hljs-string\"\u003e\u0026quot;my.verticle\u0026quot;\u003c/span\u003e, context.asyncAssertFailure(cause -\u0026gt; {\n  context.assertTrue(cause \u003cspan class=\"hljs-keyword\"\u003einstanceof\u003c/span\u003e IllegalArgumentException);\n}));\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe async is completed when the \u003ccode\u003eHandler\u003c/code\u003e exits, unless new asyncs were created during the invocation.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_repeating_test\"\u003e\u003ca class=\"anchor\" href=\"#_repeating_test\"\u003e\u003c/a\u003eRepeating test\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eWhen a test fails randomly or not often, for instance a race condition, it is convenient to run the same\ntest multiple times to increase the failure likelihood of the test.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"title\"\u003eRepeating a test\u003c/div\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-ruby\" data-lang=\"ruby\"\u003e\u003cspan class=\"hljs-keyword\"\u003erequire\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026#x27;vertx-unit/test_suite\u0026#x27;\u003c/span\u003e\nVertxUnit::TestSuite.create(\u003cspan class=\"hljs-string\"\u003e\u0026quot;my_suite\u0026quot;\u003c/span\u003e).test(\u003cspan class=\"hljs-string\"\u003e\u0026quot;my_test\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e) { \u003cspan class=\"hljs-params\"\u003e|context|\u003c/span\u003e\n  \u003cspan class=\"hljs-comment\"\u003e# This will be executed 1000 times\u003c/span\u003e\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eWhen declared, \u003cem\u003ebeforeEach\u003c/em\u003e and \u003cem\u003eafterEach\u003c/em\u003e callbacks will be executed as many times as the test is executed.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"admonitionblock note\"\u003e\n\u003ctable\u003e\n\u003ctr\u003e\n\u003ctd class=\"icon\"\u003e\n\u003cdiv class=\"title\"\u003e注意\u003c/div\u003e\n\u003c/td\u003e\n\u003ctd class=\"content\"\u003e\ntest repetition are executed sequentially\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_sharing_objects\"\u003e\u003ca class=\"anchor\" href=\"#_sharing_objects\"\u003e\u003c/a\u003eSharing objects\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe \u003ccode\u003e\u003ca href=\"../../yardoc/VertxUnit/TestContext.html\"\u003eTestContext\u003c/a\u003e\u003c/code\u003e has \u003ccode\u003eget\u003c/code\u003e/\u003ccode\u003eput\u003c/code\u003e/\u003ccode\u003eremove\u003c/code\u003e operations for sharing state between callbacks.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eAny object added during the \u003cem\u003ebefore\u003c/em\u003e callback is available in any other callbacks. Each test case will operate on\na copy of the shared state, so updates will only be visible for a test case.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"title\"\u003eSharing state between callbacks\u003c/div\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-ruby\" data-lang=\"ruby\"\u003e\u003cspan class=\"hljs-keyword\"\u003erequire\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026#x27;vertx-unit/test_suite\u0026#x27;\u003c/span\u003e\nVertxUnit::TestSuite.create(\u003cspan class=\"hljs-string\"\u003e\u0026quot;my_suite\u0026quot;\u003c/span\u003e).before() { \u003cspan class=\"hljs-params\"\u003e|context|\u003c/span\u003e\n\n  \u003cspan class=\"hljs-comment\"\u003e# host is available for all test cases\u003c/span\u003e\n  context.put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;host\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;localhost\u0026quot;\u003c/span\u003e)\n\n}.before_each() { \u003cspan class=\"hljs-params\"\u003e|context|\u003c/span\u003e\n\n  \u003cspan class=\"hljs-comment\"\u003e# Generate a random port for each test\u003c/span\u003e\n  port = helper.random_port()\n\n  \u003cspan class=\"hljs-comment\"\u003e# Get host\u003c/span\u003e\n  host = context.get(\u003cspan class=\"hljs-string\"\u003e\u0026quot;host\u0026quot;\u003c/span\u003e)\n\n  \u003cspan class=\"hljs-comment\"\u003e# Setup server\u003c/span\u003e\n  async = context.async()\n  server = vertx.create_http_server()\n  server.request_handler() { \u003cspan class=\"hljs-params\"\u003e|req|\u003c/span\u003e\n    req.response().set_status_code(\u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e).\u003cspan class=\"hljs-keyword\"\u003eend\u003c/span\u003e()\n  }\n  server.listen(port, host) { \u003cspan class=\"hljs-params\"\u003e|ar_err,ar|\u003c/span\u003e\n    context.assert_true(ar_err == \u003cspan class=\"hljs-literal\"\u003enil\u003c/span\u003e)\n    context.put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;port\u0026quot;\u003c/span\u003e, port)\n    async.complete()\n  }\n\n}.test(\u003cspan class=\"hljs-string\"\u003e\u0026quot;my_test\u0026quot;\u003c/span\u003e) { \u003cspan class=\"hljs-params\"\u003e|context|\u003c/span\u003e\n\n  \u003cspan class=\"hljs-comment\"\u003e# Get the shared state\u003c/span\u003e\n  port = context.get(\u003cspan class=\"hljs-string\"\u003e\u0026quot;port\u0026quot;\u003c/span\u003e)\n  host = context.get(\u003cspan class=\"hljs-string\"\u003e\u0026quot;host\u0026quot;\u003c/span\u003e)\n\n  \u003cspan class=\"hljs-comment\"\u003e# Do request\u003c/span\u003e\n  client = vertx.create_http_client()\n  req = client.get(port, host, \u003cspan class=\"hljs-string\"\u003e\u0026quot;/resource\u0026quot;\u003c/span\u003e)\n  async = context.async()\n  req.handler() { \u003cspan class=\"hljs-params\"\u003e|resp|\u003c/span\u003e\n    context.assert_equals(\u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e, resp.status_code())\n    async.complete()\n  }\n  req.\u003cspan class=\"hljs-keyword\"\u003eend\u003c/span\u003e()\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"admonitionblock warning\"\u003e\n\u003ctable\u003e\n\u003ctr\u003e\n\u003ctd class=\"icon\"\u003e\n\u003cdiv class=\"title\"\u003e警告\u003c/div\u003e\n\u003c/td\u003e\n\u003ctd class=\"content\"\u003e\nsharing any object is only supported in Java, other languages can share only basic or json types.\nOther objects should be shared using the features of that language.\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_running\"\u003e\u003ca class=\"anchor\" href=\"#_running\"\u003e\u003c/a\u003eRunning\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eWhen a test suite is created, it won\u0026#8217;t be executed until the \u003ccode\u003e\u003ca href=\"../../yardoc/VertxUnit/TestSuite.html#run-instance_method\"\u003erun\u003c/a\u003e\u003c/code\u003e method\nis called.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"title\"\u003eRunning a test suite\u003c/div\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-ruby\" data-lang=\"ruby\"\u003esuite.run()\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe test suite can also be run with a specified \u003ccode\u003e\u003ca href=\"../../yardoc/Vertx/Vertx.html\"\u003eVertx\u003c/a\u003e\u003c/code\u003e instance:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"title\"\u003eProvides a Vertx instance to run the test suite\u003c/div\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-ruby\" data-lang=\"ruby\"\u003esuite.run(vertx)\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eWhen running with a \u003ccode\u003eVertx\u003c/code\u003e instance, the test suite is executed using the Vertx event loop, see the \u003ca href=\"#event_loop\"\u003eEvent loop\u003c/a\u003e\nsection for more details.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eA test suite can be run with the Vert.x Command Line Interface with the \u003ccode\u003evertx test\u003c/code\u003e command:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"title\"\u003eRunning a test suite with the Vert.x CLI\u003c/div\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode\u003e\u0026gt; vertx test the_test_suite.js\nBegin test suite the_test_suite\nSucceeded in deploying verticle\nBegin test my_test_case\nPassed my_test_case\nEnd test suite my_suite , run: 1, Failures: 0, Errors: 0\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eSuch test suite just need to be executed via the \u003ccode\u003e\u003ca href=\"../../yardoc/VertxUnit/TestSuite.html#run-instance_method\"\u003erun\u003c/a\u003e\u003c/code\u003e command, the\n\u003ccode\u003evertx test\u003c/code\u003e command takes care of configuring reporting, timeout, etc\u0026#8230;\u0026#8203;, pretty much like in this\nexample:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-ruby\" data-lang=\"ruby\"\u003e\u003cspan class=\"hljs-keyword\"\u003erequire\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026#x27;vertx-unit/test_suite\u0026#x27;\u003c/span\u003e\nsuite = VertxUnit::TestSuite.create(\u003cspan class=\"hljs-string\"\u003e\u0026quot;the_test_suite\u0026quot;\u003c/span\u003e)\nsuite.test(\u003cspan class=\"hljs-string\"\u003e\u0026quot;my_test_case\u0026quot;\u003c/span\u003e) { \u003cspan class=\"hljs-params\"\u003e|context|\u003c/span\u003e\n  s = \u003cspan class=\"hljs-string\"\u003e\u0026quot;value\u0026quot;\u003c/span\u003e\n  context.assert_equals(\u003cspan class=\"hljs-string\"\u003e\u0026quot;value\u0026quot;\u003c/span\u003e, s)\n}\nsuite.run()\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe \u003ccode\u003evertx test\u003c/code\u003e command extends the \u003ccode\u003evertx run\u003c/code\u003e command. The exit behavior of the JVM is changed\nthe JVM exits when the test suite is executed and a return value is provided indicating the tests\nsuccess (0) or failure (1).\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"admonitionblock note\"\u003e\n\u003ctable\u003e\n\u003ctr\u003e\n\u003ctd class=\"icon\"\u003e\n\u003cdiv class=\"title\"\u003e注意\u003c/div\u003e\n\u003c/td\u003e\n\u003ctd class=\"content\"\u003e\nseveral test suites can executed in the same verticle, Vert.x Unit waits until completion of\nall suite executed.\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_test_suite_completion\"\u003e\u003ca class=\"anchor\" href=\"#_test_suite_completion\"\u003e\u003c/a\u003eTest suite completion\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eNo assumptions can be made about when the test suite will be completed, and if some code needs to be executed\nafter the test suite, it should either be in the test suite \u003cem\u003eafter\u003c/em\u003e callback or as callback of the\n\u003ccode\u003e\u003ca href=\"../../yardoc/VertxUnit/Completion.html\"\u003eCompletion\u003c/a\u003e\u003c/code\u003e:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"title\"\u003eTest suite execution callback\u003c/div\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-ruby\" data-lang=\"ruby\"\u003ecompletion = suite.run(vertx)\n\n\u003cspan class=\"hljs-comment\"\u003e# Simple completion callback\u003c/span\u003e\ncompletion.handler() { \u003cspan class=\"hljs-params\"\u003e|ar_err,ar|\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar_err == \u003cspan class=\"hljs-literal\"\u003enil\u003c/span\u003e)\n    puts \u003cspan class=\"hljs-string\"\u003e\u0026quot;Test suite passed!\u0026quot;\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e\n    puts \u003cspan class=\"hljs-string\"\u003e\u0026quot;Test suite failed:\u0026quot;\u003c/span\u003e\n    ar_err.print_stack_trace()\n  \u003cspan class=\"hljs-keyword\"\u003eend\u003c/span\u003e\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe \u003ccode\u003e\u003ca href=\"../../yardoc/VertxUnit/Completion.html\"\u003eCompletion\u003c/a\u003e\u003c/code\u003e object provides also a \u003ccode\u003e\u003ca href=\"../../yardoc/VertxUnit/Completion.html#resolve-instance_method\"\u003eresolve\u003c/a\u003e\u003c/code\u003e method that\ntakes a \u003ccode\u003ePromise\u003c/code\u003e object, this \u003ccode\u003ePromise\u003c/code\u003e will be notified of the test suite execution:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"title\"\u003eResolving the start Promise with the test suite\u003c/div\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-ruby\" data-lang=\"ruby\"\u003ecompletion = suite.run()\n\n\u003cspan class=\"hljs-comment\"\u003e# When the suite completes, the promise is resolved\u003c/span\u003e\ncompletion.resolve(startPromise)\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThis allow to easily create a \u003cem\u003etest\u003c/em\u003e verticle whose deployment is the test suite execution, allowing the\ncode that deploys it to be easily aware of the success or failure.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe completion object can also be used like a latch to block until the test suite completes. This should\nbe used when the thread running the test suite is not the same than the current thread:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"title\"\u003eBlocking until the test suite completes\u003c/div\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-ruby\" data-lang=\"ruby\"\u003ecompletion = suite.run()\n\n\u003cspan class=\"hljs-comment\"\u003e# Wait until the test suite completes\u003c/span\u003e\ncompletion.await()\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe \u003ccode\u003eawait\u003c/code\u003e throws an exception when the thread is interrupted or a timeout is fired.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe \u003ccode\u003e\u003ca href=\"../../yardoc/VertxUnit/Completion.html#await_success-instance_method\"\u003eawaitSuccess\u003c/a\u003e\u003c/code\u003e is a variation that throws an exception when\nthe test suite fails.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"title\"\u003eBlocking until the test suite succeeds\u003c/div\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-ruby\" data-lang=\"ruby\"\u003ecompletion = suite.run()\n\n\u003cspan class=\"hljs-comment\"\u003e# Wait until the test suite succeeds otherwise throw an exception\u003c/span\u003e\ncompletion.await_success()\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_time_out\"\u003e\u003ca class=\"anchor\" href=\"#_time_out\"\u003e\u003c/a\u003eTime out\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eEach test case of a test suite must execute before a certain timeout is reached. The default timeout is\nof \u003cem\u003e2 minutes\u003c/em\u003e, it can be changed using \u003cem\u003etest options\u003c/em\u003e:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"title\"\u003eSetting the test suite timeout\u003c/div\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-ruby\" data-lang=\"ruby\"\u003eoptions = {\n  \u003cspan class=\"hljs-string\"\u003e\u0026#x27;timeout\u0026#x27;\u003c/span\u003e =\u0026gt; \u003cspan class=\"hljs-number\"\u003e10000\u003c/span\u003e\n}\n\n\u003cspan class=\"hljs-comment\"\u003e# Run with a 10 seconds time out\u003c/span\u003e\nsuite.run(options)\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"event_loop\"\u003e\u003ca class=\"anchor\" href=\"#event_loop\"\u003e\u003c/a\u003eEvent loop\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eVertx Unit execution is a list of tasks to execute, the execution of each task is driven by the completion\nof the previous task. These tasks should leverage Vert.x event loop when possible but that depends on the\ncurrent execution context (i.e the test suite is executed in a \u003ccode\u003emain\u003c/code\u003e or embedded in a \u003ccode\u003eVerticle\u003c/code\u003e) and\nwether or not a \u003ccode\u003eVertx\u003c/code\u003e instance is configured.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe \u003ccode\u003e\u003ca href=\"../dataobjects.html#TestOptions#set_use_event_loop-instance_method\"\u003euseEventLoop\u003c/a\u003e\u003c/code\u003e configures the usage of the event\nloop:\u003c/p\u003e\n\u003c/div\u003e\n\u003ctable class=\"tableblock frame-all grid-all stretch\"\u003e\n\u003ccaption class=\"title\"\u003eTable 1. Event loop usage\u003c/caption\u003e\n\u003ccolgroup\u003e\n\u003ccol style=\"width: 25%;\"\u003e\n\u003ccol style=\"width: 25%;\"\u003e\n\u003ccol style=\"width: 25%;\"\u003e\n\u003ccol style=\"width: 25%;\"\u003e\n\u003c/colgroup\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth class=\"tableblock halign-left valign-top\"\u003e\u003c/th\u003e\n\u003cth class=\"tableblock halign-left valign-top\"\u003euseEventLoop:null\u003c/th\u003e\n\u003cth class=\"tableblock halign-left valign-top\"\u003euseEventLoop:true\u003c/th\u003e\n\u003cth class=\"tableblock halign-left valign-top\"\u003euseEventLoop:false\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd class=\"tableblock halign-left valign-top\"\u003e\u003cp class=\"tableblock\"\u003e\u003ccode\u003eVertx\u003c/code\u003e instance\u003c/p\u003e\u003c/td\u003e\n\u003ctd class=\"tableblock halign-left valign-top\"\u003e\u003cp class=\"tableblock\"\u003euse vertx event loop\u003c/p\u003e\u003c/td\u003e\n\u003ctd class=\"tableblock halign-left valign-top\"\u003e\u003cp class=\"tableblock\"\u003euse vertx event loop\u003c/p\u003e\u003c/td\u003e\n\u003ctd class=\"tableblock halign-left valign-top\"\u003e\u003cp class=\"tableblock\"\u003eforce no event loop\u003c/p\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd class=\"tableblock halign-left valign-top\"\u003e\u003cp class=\"tableblock\"\u003ein a \u003ccode\u003eVerticle\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\n\u003ctd class=\"tableblock halign-left valign-top\"\u003e\u003cp class=\"tableblock\"\u003euse current event loop\u003c/p\u003e\u003c/td\u003e\n\u003ctd class=\"tableblock halign-left valign-top\"\u003e\u003cp class=\"tableblock\"\u003euse current event loop\u003c/p\u003e\u003c/td\u003e\n\u003ctd class=\"tableblock halign-left valign-top\"\u003e\u003cp class=\"tableblock\"\u003eforce no event loop\u003c/p\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd class=\"tableblock halign-left valign-top\"\u003e\u003cp class=\"tableblock\"\u003ein a \u003cem\u003emain\u003c/em\u003e\u003c/p\u003e\u003c/td\u003e\n\u003ctd class=\"tableblock halign-left valign-top\"\u003e\u003cp class=\"tableblock\"\u003euse no event loop\u003c/p\u003e\u003c/td\u003e\n\u003ctd class=\"tableblock halign-left valign-top\"\u003e\u003cp class=\"tableblock\"\u003eraise an error\u003c/p\u003e\u003c/td\u003e\n\u003ctd class=\"tableblock halign-left valign-top\"\u003e\u003cp class=\"tableblock\"\u003euse no event loop\u003c/p\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe default \u003ccode\u003euseEventLoop\u003c/code\u003e value is \u003ccode\u003enull\u003c/code\u003e, that means that it will uses an event loop when possible and fallback\nto no event loop when no one is available.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"reporting\"\u003e\u003ca class=\"anchor\" href=\"#reporting\"\u003e\u003c/a\u003eReporting\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eReporting is an important piece of a test suite, Vertx Unit can be configured to run with different kind\nof reporters.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eBy default no reporter is configured, when running a test suite, \u003cem\u003etest options\u003c/em\u003e can be provided to\nconfigure one or several:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"title\"\u003eUsing the console reporter and as a junit xml file\u003c/div\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-ruby\" data-lang=\"ruby\"\u003e\u003cspan class=\"hljs-comment\"\u003e# Report to console\u003c/span\u003e\nconsoleReport = {\n  \u003cspan class=\"hljs-string\"\u003e\u0026#x27;to\u0026#x27;\u003c/span\u003e =\u0026gt; \u003cspan class=\"hljs-string\"\u003e\u0026quot;console\u0026quot;\u003c/span\u003e\n}\n\n\u003cspan class=\"hljs-comment\"\u003e# Report junit files to the current directory\u003c/span\u003e\njunitReport = {\n  \u003cspan class=\"hljs-string\"\u003e\u0026#x27;to\u0026#x27;\u003c/span\u003e =\u0026gt; \u003cspan class=\"hljs-string\"\u003e\u0026quot;file:.\u0026quot;\u003c/span\u003e,\n  \u003cspan class=\"hljs-string\"\u003e\u0026#x27;format\u0026#x27;\u003c/span\u003e =\u0026gt; \u003cspan class=\"hljs-string\"\u003e\u0026quot;junit\u0026quot;\u003c/span\u003e\n}\n\nsuite.run({\n  \u003cspan class=\"hljs-string\"\u003e\u0026#x27;reporters\u0026#x27;\u003c/span\u003e =\u0026gt; [\n    consoleReport,\n    junitReport\n  ]\n})\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_console_reporting\"\u003e\u003ca class=\"anchor\" href=\"#_console_reporting\"\u003e\u003c/a\u003eConsole reporting\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eReports to the JVM \u003ccode\u003eSystem.out\u003c/code\u003e and \u003ccode\u003eSystem.err\u003c/code\u003e:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"dlist\"\u003e\n\u003cdl\u003e\n\u003cdt class=\"hdlist1\"\u003eto\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003e\u003cem\u003econsole\u003c/em\u003e\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003eformat\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003e\u003cem\u003esimple\u003c/em\u003e or \u003cem\u003ejunit\u003c/em\u003e\u003c/p\u003e\n\u003c/dd\u003e\n\u003c/dl\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_file_reporting\"\u003e\u003ca class=\"anchor\" href=\"#_file_reporting\"\u003e\u003c/a\u003eFile reporting\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eReports to a file, a \u003ccode\u003eVertx\u003c/code\u003e instance must be provided:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"dlist\"\u003e\n\u003cdl\u003e\n\u003cdt class=\"hdlist1\"\u003eto\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003e\u003cem\u003efile\u003c/em\u003e \u003ccode\u003e:\u003c/code\u003e \u003cem\u003edir name\u003c/em\u003e\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003eformat\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003e\u003cem\u003esimple\u003c/em\u003e or \u003cem\u003ejunit\u003c/em\u003e\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003eexample\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003e\u003ccode\u003efile:.\u003c/code\u003e\u003c/p\u003e\n\u003c/dd\u003e\n\u003c/dl\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe file reporter will create files in the configured directory, the files will be named after the\ntest suite name executed and the format (i.e \u003cem\u003esimple\u003c/em\u003e creates \u003cem\u003etxt\u003c/em\u003e files and \u003cem\u003ejunit\u003c/em\u003e creates \u003cem\u003exml\u003c/em\u003e\nfiles).\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_log_reporting\"\u003e\u003ca class=\"anchor\" href=\"#_log_reporting\"\u003e\u003c/a\u003eLog reporting\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eReports to a logger, a \u003ccode\u003eVertx\u003c/code\u003e instance must be provided:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"dlist\"\u003e\n\u003cdl\u003e\n\u003cdt class=\"hdlist1\"\u003eto\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003e\u003cem\u003elog\u003c/em\u003e \u003ccode\u003e:\u003c/code\u003e \u003cem\u003elogger name\u003c/em\u003e\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003eexample\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003e\u003ccode\u003elog:mylogger\u003c/code\u003e\u003c/p\u003e\n\u003c/dd\u003e\n\u003c/dl\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_event_bus_reporting\"\u003e\u003ca class=\"anchor\" href=\"#_event_bus_reporting\"\u003e\u003c/a\u003eEvent bus reporting\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eReports events to the event bus, a \u003ccode\u003eVertx\u003c/code\u003e instance must be provided:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"dlist\"\u003e\n\u003cdl\u003e\n\u003cdt class=\"hdlist1\"\u003eto\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003e\u003cem\u003ebus\u003c/em\u003e \u003ccode\u003e:\u003c/code\u003e \u003cem\u003eevent bus address\u003c/em\u003e\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003eexample\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003e\u003ccode\u003ebus:the-address\u003c/code\u003e\u003c/p\u003e\n\u003c/dd\u003e\n\u003c/dl\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIt allow to decouple the execution of the test suite from the reporting.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe messages sent over the event bus can be collected by the \u003ccode\u003e\u003ca href=\"../../yardoc/VertxUnit/EventBusCollector.html\"\u003eEventBusCollector\u003c/a\u003e\u003c/code\u003e\nand achieve custom reporting:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-ruby\" data-lang=\"ruby\"\u003e\u003cspan class=\"hljs-keyword\"\u003erequire\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026#x27;vertx-unit/event_bus_collector\u0026#x27;\u003c/span\u003e\ncollector = VertxUnit::EventBusCollector.create(vertx, {\n  \u003cspan class=\"hljs-string\"\u003e\u0026#x27;reporters\u0026#x27;\u003c/span\u003e =\u0026gt; [\n    {\n      \u003cspan class=\"hljs-string\"\u003e\u0026#x27;to\u0026#x27;\u003c/span\u003e =\u0026gt; \u003cspan class=\"hljs-string\"\u003e\u0026quot;file:report.xml\u0026quot;\u003c/span\u003e,\n      \u003cspan class=\"hljs-string\"\u003e\u0026#x27;format\u0026#x27;\u003c/span\u003e =\u0026gt; \u003cspan class=\"hljs-string\"\u003e\u0026quot;junit\u0026quot;\u003c/span\u003e\n    }\n  ]\n})\n\ncollector.register(\u003cspan class=\"hljs-string\"\u003e\u0026quot;the-address\u0026quot;\u003c/span\u003e)\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"vertx_integration\"\u003e\u003ca class=\"anchor\" href=\"#vertx_integration\"\u003e\u003c/a\u003eVertx integration\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eBy default, assertions and failures must be done on the \u003ccode\u003e\u003ca href=\"../../yardoc/VertxUnit/TestContext.html\"\u003eTestContext\u003c/a\u003e\u003c/code\u003e and throwing an\nassertion error works only when called by Vert.x Unit:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-ruby\" data-lang=\"ruby\"\u003esuite.test(\u003cspan class=\"hljs-string\"\u003e\u0026quot;my_test_case\u0026quot;\u003c/span\u003e) { \u003cspan class=\"hljs-params\"\u003e|ctx|\u003c/span\u003e\n\n  \u003cspan class=\"hljs-comment\"\u003e# The failure will be reported by Vert.x Unit\u003c/span\u003e\n  raise \u003cspan class=\"hljs-string\"\u003e\u0026quot;it failed!\u0026quot;\u003c/span\u003e\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIn a regular Vert.x callback, the failure will be ignored:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-ruby\" data-lang=\"ruby\"\u003esuite.test(\u003cspan class=\"hljs-string\"\u003e\u0026quot;test-server\u0026quot;\u003c/span\u003e) { \u003cspan class=\"hljs-params\"\u003e|testContext|\u003c/span\u003e\n  server = vertx.create_http_server().request_handler() { \u003cspan class=\"hljs-params\"\u003e|req|\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (req.path().==(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/somepath\u0026quot;\u003c/span\u003e))\n      raise \u003cspan class=\"hljs-string\"\u003e\u0026quot;Wrong path!\u0026quot;\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003eend\u003c/span\u003e\n    req.response().\u003cspan class=\"hljs-keyword\"\u003eend\u003c/span\u003e()\n  }\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eSince Vert.x 3.3, a global exception handler can be set to report the event loop uncaught exceptions:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-ruby\" data-lang=\"ruby\"\u003esuite.before() { \u003cspan class=\"hljs-params\"\u003e|testContext|\u003c/span\u003e\n\n  \u003cspan class=\"hljs-comment\"\u003e# Report uncaught exceptions as Vert.x Unit failures\u003c/span\u003e\n  vertx.exception_handler(\u0026amp;testContext.exception_handler())\n}\n\nsuite.test(\u003cspan class=\"hljs-string\"\u003e\u0026quot;test-server\u0026quot;\u003c/span\u003e) { \u003cspan class=\"hljs-params\"\u003e|testContext|\u003c/span\u003e\n  server = vertx.create_http_server().request_handler() { \u003cspan class=\"hljs-params\"\u003e|req|\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (req.path().==(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/somepath\u0026quot;\u003c/span\u003e))\n      raise \u003cspan class=\"hljs-string\"\u003e\u0026quot;Wrong path!\u0026quot;\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003eend\u003c/span\u003e\n    req.response().\u003cspan class=\"hljs-keyword\"\u003eend\u003c/span\u003e()\n  }\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe exception handler is set during the \u003cem\u003ebefore\u003c/em\u003e phase, the \u003ccode\u003e\u003ca href=\"../../yardoc/VertxUnit/TestContext.html\"\u003eTestContext\u003c/a\u003e\u003c/code\u003e is shared\nbetween each \u003cem\u003ebefore\u003c/em\u003e, \u003cem\u003etest\u003c/em\u003e and \u003cem\u003eafter\u003c/em\u003e phase. So the exception handler obtained during the \u003cem\u003ebefore\u003c/em\u003e phase\nis correct.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_junit_integration\"\u003e\u003ca class=\"anchor\" href=\"#_junit_integration\"\u003e\u003c/a\u003eJunit integration\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eAlthough Vertx Unit is polyglot and not based on JUnit, it is possible to run a Vertx Unit test suite or a test case\nfrom JUnit, allowing you to integrate your tests with JUnit and your build system or IDE.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"title\"\u003eRun a Java class as a JUnit test suite\u003c/div\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003e\u003cspan class=\"hljs-meta\"\u003e@RunWith(VertxUnitRunner.class)\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eJUnitTestSuite\u003c/span\u003e {\n  \u003cspan class=\"hljs-meta\"\u003e@Test\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003etestSomething\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(TestContext context)\u003c/span\u003e {\n    context.assertFalse(\u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e);\n  }\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe \u003ccode\u003e\u003ca href=\"unavailable\"\u003eVertxUnitRunner\u003c/a\u003e\u003c/code\u003e uses the junit annotations for introspecting the class\nand create a test suite after the class. The methods should declare a \u003ccode\u003e\u003ca href=\"../../yardoc/VertxUnit/TestContext.html\"\u003eTestContext\u003c/a\u003e\u003c/code\u003e\nargument, if they don\u0026#8217;t it is fine too. However the \u003ccode\u003eTestContext\u003c/code\u003e is the only way to retrieve the associated\nVertx instance of perform asynchronous tests.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe JUnit integration is also available for the Groovy language with the \u003ccode\u003eio.vertx.groovy.ext.unit.junit.VertxUnitRunner\u003c/code\u003e\nrunner.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_running_a_test_on_a_vert_x_context\"\u003e\u003ca class=\"anchor\" href=\"#_running_a_test_on_a_vert_x_context\"\u003e\u003c/a\u003eRunning a test on a Vert.x context\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eBy default the thread invoking the test methods is the JUnit thread. The \u003ccode\u003e\u003ca href=\"unavailable\"\u003eRunTestOnContext\u003c/a\u003e\u003c/code\u003e\nJUnit rule can be used to alter this behavior for running these test methods with a Vert.x event loop thread.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThus there must be some care when state is shared between test methods and Vert.x handlers as they won\u0026#8217;t be\non the same thread, e.g incrementing a counter in a Vert.x handler and asserting the counter in the test method.\nOne way to solve this is to use proper synchronization, another is to execute test methods on a Vert.x context\nthat will be propagated to the created handlers.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eFor this purpose the \u003ccode\u003e\u003ca href=\"unavailable\"\u003eRunTestOnContext\u003c/a\u003e\u003c/code\u003e rule needs a \u003ccode\u003e\u003ca href=\"../../yardoc/Vertx/Vertx.html\"\u003eVertx\u003c/a\u003e\u003c/code\u003e\ninstance. Such instance can be provided, otherwise the rule will manage an instance under the hood. Such\ninstance can be retrieved when the test is running, making this rule a way to manage a \u003ccode\u003e\u003ca href=\"../../yardoc/Vertx/Vertx.html\"\u003eVertx\u003c/a\u003e\u003c/code\u003e\ninstance as well.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"title\"\u003eRun a Java class as a JUnit test suite\u003c/div\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003e\u003cspan class=\"hljs-meta\"\u003e@RunWith(VertxUnitRunner.class)\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eRunOnContextJUnitTestSuite\u003c/span\u003e {\n\n  \u003cspan class=\"hljs-meta\"\u003e@Rule\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-type\"\u003eRunTestOnContext\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003erule\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eRunTestOnContext\u003c/span\u003e();\n\n  \u003cspan class=\"hljs-meta\"\u003e@Test\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003etestSomething\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(TestContext context)\u003c/span\u003e {\n    \u003cspan class=\"hljs-comment\"\u003e// Use the underlying vertx instance\u003c/span\u003e\n    \u003cspan class=\"hljs-type\"\u003eVertx\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003evertx\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e rule.vertx();\n  }\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe rule can be annotated by {@literal @Rule} or {@literal @ClassRule}, the former manages a Vert.x instance\nper test, the later a single Vert.x for the test methods of the class.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"admonitionblock warning\"\u003e\n\u003ctable\u003e\n\u003ctr\u003e\n\u003ctd class=\"icon\"\u003e\n\u003cdiv class=\"title\"\u003e警告\u003c/div\u003e\n\u003c/td\u003e\n\u003ctd class=\"content\"\u003e\nkeep in mind that you cannot block the event loop when using this rule. Usage of classes like\n\u003ccode\u003eCountDownLatch\u003c/code\u003e or similar classes must be done with care.\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_timeout\"\u003e\u003ca class=\"anchor\" href=\"#_timeout\"\u003e\u003c/a\u003eTimeout\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe Vert.x Unit 2 minutes timeout can be overriden with the \u003ccode\u003etimeout\u003c/code\u003e member of the \u003ccode\u003e@Test\u003c/code\u003e annotation:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"title\"\u003eConfigure the timeout at the test level\u003c/div\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eJunitTestWithTimeout\u003c/span\u003e {\n\n  \u003cspan class=\"hljs-meta\"\u003e@Test(timeout = 1000l)\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003etestSomething\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(TestContext context)\u003c/span\u003e {\n    \u003cspan class=\"hljs-comment\"\u003e//...\u003c/span\u003e\n  }\n\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eFor a more global configuration, the \u003ccode\u003e\u003ca href=\"unavailable\"\u003eTimeout\u003c/a\u003e\u003c/code\u003e rule can be used:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"title\"\u003eConfigure the timeout at the class level\u003c/div\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003e\u003cspan class=\"hljs-meta\"\u003e@RunWith(VertxUnitRunner.class)\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eTimeoutTestSuite\u003c/span\u003e {\n\n  \u003cspan class=\"hljs-meta\"\u003e@Rule\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-type\"\u003eTimeout\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003erule\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e Timeout.seconds(\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e);\n\n  \u003cspan class=\"hljs-meta\"\u003e@Test\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003etestSomething\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(TestContext context)\u003c/span\u003e {\n    \u003cspan class=\"hljs-comment\"\u003e//...\u003c/span\u003e\n  }\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"admonitionblock note\"\u003e\n\u003ctable\u003e\n\u003ctr\u003e\n\u003ctd class=\"icon\"\u003e\n\u003cdiv class=\"title\"\u003e注意\u003c/div\u003e\n\u003c/td\u003e\n\u003ctd class=\"content\"\u003e\nthe \u003ccode\u003e@Test\u003c/code\u003e timeout overrides the the \u003ccode\u003e\u003ca href=\"unavailable\"\u003eTimeout\u003c/a\u003e\u003c/code\u003e rule.\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_parameterized_tests\"\u003e\u003ca class=\"anchor\" href=\"#_parameterized_tests\"\u003e\u003c/a\u003eParameterized tests\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eJUnit provides useful \u003ccode\u003eParameterized\u003c/code\u003e tests, Vert.x Unit tests can be ran with this particular runner thanks to\nthe \u003ccode\u003e\u003ca href=\"unavailable\"\u003eVertxUnitRunnerWithParametersFactory\u003c/a\u003e\u003c/code\u003e:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"title\"\u003eRunning a Vert.x Unit parameterized test\u003c/div\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003e\u003cspan class=\"hljs-meta\"\u003e@RunWith(Parameterized.class)\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e@Parameterized\u003c/span\u003e.UseParametersRunnerFactory(VertxUnitRunnerWithParametersFactory.class)\n\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eSimpleParameterizedTest\u003c/span\u003e {\n\n  \u003cspan class=\"hljs-meta\"\u003e@Parameterized\u003c/span\u003e.Parameters\n  \u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003estatic\u003c/span\u003e Iterable\u0026lt;Integer\u0026gt; \u003cspan class=\"hljs-title function_\"\u003edata\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e()\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e Arrays.asList(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e);\n  }\n\n  \u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eSimpleParameterizedTest\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(\u003cspan class=\"hljs-type\"\u003eint\u003c/span\u003e value)\u003c/span\u003e {\n    \u003cspan class=\"hljs-comment\"\u003e//...\u003c/span\u003e\n  }\n\n  \u003cspan class=\"hljs-meta\"\u003e@Test\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003etestSomething\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(TestContext context)\u003c/span\u003e {\n    \u003cspan class=\"hljs-comment\"\u003e// Execute test with the current value\u003c/span\u003e\n  }\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eParameterized tests can also be done in Groovy with the \u003ccode\u003eio.vertx.groovy.ext.unit.junit.VertxUnitRunnerWithParametersFactory\u003c/code\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_repeating_a_test\"\u003e\u003ca class=\"anchor\" href=\"#_repeating_a_test\"\u003e\u003c/a\u003eRepeating a test\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eWhen a test fails randomly or not often, for instance a race condition, it is convenient to run the same\ntest multiple times to increase the likelihood failure of the test.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eWith JUnit a test has to be annotated with \u003ccode\u003e\u003ca href=\"unavailable\"\u003e@Repeat\u003c/a\u003e\u003c/code\u003e to be repeated. The test must\nalso define the \u003ccode\u003e\u003ca href=\"unavailable\"\u003eRepeatRule\u003c/a\u003e\u003c/code\u003e among its rules.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"title\"\u003eRepeating a test with JUnit\u003c/div\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-ruby\" data-lang=\"ruby\"\u003e\u003cspan class=\"hljs-variable\"\u003e@RunWith\u003c/span\u003e(VertxUnitRunner.\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e)\npublic \u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eRepeatingTest\u003c/span\u003e {\u003c/span\u003e\n\n  \u003cspan class=\"hljs-variable\"\u003e@Rule\u003c/span\u003e\n  public RepeatRule rule = new RepeatRule();\n\n  \u003cspan class=\"hljs-variable\"\u003e@Repeat\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e)\n  \u003cspan class=\"hljs-variable\"\u003e@Test\u003c/span\u003e\n  public void testSomething(TestContext context) {\n    \u003cspan class=\"hljs-regexp\"\u003e//\u003c/span\u003e This will be executed \u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e times\n  }\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eWhen declared, \u003cem\u003ebefore\u003c/em\u003e and \u003cem\u003eafter\u003c/em\u003e life cycle will be executed as many times as the test is executed.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"admonitionblock note\"\u003e\n\u003ctable\u003e\n\u003ctr\u003e\n\u003ctd class=\"icon\"\u003e\n\u003cdiv class=\"title\"\u003e注意\u003c/div\u003e\n\u003c/td\u003e\n\u003ctd class=\"content\"\u003e\ntest repetition are executed sequentially\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_using_with_other_assertion_libraries\"\u003e\u003ca class=\"anchor\" href=\"#_using_with_other_assertion_libraries\"\u003e\u003c/a\u003eUsing with other assertion libraries\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eVert.x Unit usability has been greatly improved in Vert.x 3.3. You can now write tests using\n\u003ca href=\"http://hamcrest.org/\"\u003eHamcrest\u003c/a\u003e, \u003ca href=\"http://joel-costigliola.github.io/assertj/\"\u003eAssertJ\u003c/a\u003e,\n\u003ca href=\"https://github.com/rest-assured/rest-assured/\"\u003eRest Assured\u003c/a\u003e, or any assertion library you want. This is made\npossible by the global exception handler described in \u003ca href=\"#vertx_integration\"\u003eVertx integration\u003c/a\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eYou can find Java examples of using Vert.x Unit with Hamcrest and AssertJ in the\n\u003ca href=\"https://github.com/vert-x3/vertx-examples/tree/master/unit-examples\"\u003evertx-examples\u003c/a\u003e project.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_java_language_integration\"\u003e\u003ca class=\"anchor\" href=\"#_java_language_integration\"\u003e\u003c/a\u003eJava language integration\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_test_suite_integration\"\u003e\u003ca class=\"anchor\" href=\"#_test_suite_integration\"\u003e\u003c/a\u003eTest suite integration\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe Java language provides classes and it is possible to create test suites directly from Java classes with the\nfollowing mapping rules:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe \u003ccode\u003etestSuiteObject\u003c/code\u003e argument methods are inspected and the public, non static methods\nwith \u003ccode\u003e\u003ca href=\"../../yardoc/VertxUnit/TestContext.html\"\u003eTestContext\u003c/a\u003e\u003c/code\u003e parameter are retained and mapped to a Vertx Unit test suite\nvia the method name:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003ebefore\u003c/code\u003e : before callback\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003eafter\u003c/code\u003e : after callback\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003ebeforeEach\u003c/code\u003e : beforeEach callback\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003eafterEach\u003c/code\u003e : afterEach callback\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003ewhen the name starts with \u003cem\u003etest\u003c/em\u003e : test case callback named after the method name\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"title\"\u003eTest suite written using a Java class\u003c/div\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eMyTestSuite\u003c/span\u003e {\n\n  \u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003etestSomething\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(TestContext context)\u003c/span\u003e {\n    context.assertFalse(\u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e);\n  }\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThis class can be turned into a Vertx test suite easily:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"title\"\u003eCreate a test suite from a Java object\u003c/div\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003e\u003cspan class=\"hljs-type\"\u003eTestSuite\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003esuite\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e TestSuite.create(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eMyTestSuite\u003c/span\u003e());\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e","version":"3.9.10"},"__N_SSG":true},"page":"/docs/[[...slug]]","query":{"slug":["3.9.10","vertx-unit","ruby"]},"buildId":"DxYj1qG9XZR4Q5BZwOJ88","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>