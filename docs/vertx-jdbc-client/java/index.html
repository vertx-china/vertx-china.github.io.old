<!DOCTYPE html><html lang="en"><head><link rel="stylesheet" data-href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500&amp;display=swap"/><link rel="stylesheet" data-href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@300;400&amp;display=swap"/><link rel="stylesheet" data-href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400&amp;display=swap"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="description" content="Vert.x | Reactive applications on the JVM"/><meta name="robots" content="index,follow"/><link rel="shortcut icon" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="48x48" href="/favicons/favicon-48x48.png"/><link rel="alternate" type="application/rss+xml" href="/feed/rss.xml"/><link rel="alternate" type="application/atom+xml" href="/feed/atom.xml"/><link rel="alternate" type="application/json" href="/feed/feed.json"/><title>JDBC 客户端 | Eclipse Vert.x</title><link rel="preload" href="https://api.github.com/repos/vert-x3/vertx-jdbc-client" as="fetch" crossorigin="anonymous" class="jsx-1153611384"/><meta name="next-head-count" content="14"/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-a54b4f32bdc1ef890ddd.js"></script><script src="/_next/static/chunks/webpack-0e0f5c5c9fa5a29e0d78.js" defer=""></script><script src="/_next/static/chunks/framework-2191d16384373197bc0a.js" defer=""></script><script src="/_next/static/chunks/main-791d360c4f713077c3d6.js" defer=""></script><script src="/_next/static/chunks/pages/_app-0727c67bedbbb4c22e4a.js" defer=""></script><script src="/_next/static/chunks/615-6d6ca750e2a9fa60adea.js" defer=""></script><script src="/_next/static/chunks/619-e0ac0bb7086baf39108f.js" defer=""></script><script src="/_next/static/chunks/934-2dc74a92af3e0e391096.js" defer=""></script><script src="/_next/static/chunks/31-bb0d9e1106ba3e8c65f3.js" defer=""></script><script src="/_next/static/chunks/907-66e2ac95d5144ecb02a6.js" defer=""></script><script src="/_next/static/chunks/pages/docs/%5B%5B...slug%5D%5D-4918292890b836d7a66a.js" defer=""></script><script src="/_next/static/3iXe8BxFwtviKnGQjkri0/_buildManifest.js" defer=""></script><script src="/_next/static/3iXe8BxFwtviKnGQjkri0/_ssgManifest.js" defer=""></script><style id="__jsx-1030027079">.dropdown-item.jsx-1030027079{white-space:nowrap;line-height:2;width:100%;padding:0 1.5rem;cursor:pointer;}.dropdown-item.jsx-1030027079:hover{background-color:#e9ecef;}.dropdown-item.active.jsx-1030027079{font-weight:400;padding-left:0.75rem;}.dropdown-item.has-active-siblings.jsx-1030027079:not(.active){padding-left:calc(0.75rem + 16px + 0.5em);}.dropdown-item.jsx-1030027079 .dropdown-check-icon.jsx-1030027079{width:16px;margin-right:0.5em;margin-top:1px;}</style><style id="__jsx-3534061111">.dropdown.jsx-3534061111{position:relative;display:inline-block;}.dropdown.jsx-3534061111 .dropdown-title.jsx-3534061111{margin-right:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.dropdown.jsx-3534061111 .dropdown-menu.jsx-3534061111{position:absolute;background-color:#f8f9fa;box-shadow:0 2px 5px 0 rgba(0,0,0,0.1);border-radius:0.8rem;list-style-type:none;padding:0.6666666667rem 0;margin:0.25rem 0 0 0;z-index:100;display:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.dropdown.jsx-3534061111 .dropdown-menu.jsx-3534061111 a{color:#4d4d4d;-webkit-text-decoration:none;text-decoration:none;font-weight:300;}.dropdown.jsx-3534061111 .dropdown-menu.align-right.jsx-3534061111{right:0;}.dropdown.jsx-3534061111 .dropdown-menu.visible.jsx-3534061111{display:block;}.dropdown.jsx-3534061111 .dropdown-menu.jsx-3534061111 a.jsx-3534061111:hover{color:inherit;}.dropdown.jsx-3534061111 svg{margin-bottom:2px;}</style><style id="__jsx-3537117450">.navbar{position:absolute;top:2.75rem;width:100%;}.navbar a{color:#3c3c3b;}.navbar a.navbar-menu-item,.navbar .dropdown-title{text-transform:uppercase;}.navbar a.navbar-menu-item:hover,.navbar .dropdown-title:hover{-webkit-text-decoration:none;text-decoration:none;color:#898987;-webkit-transition:color 0.15s ease-in-out;transition:color 0.15s ease-in-out;}.navbar .navbar-content{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:relative;}.navbar .navbar-content .navbar-logo{-webkit-flex:1;-ms-flex:1;flex:1;}.navbar .navbar-content .navbar-logo img{width:8.3rem;}.navbar .navbar-content .navbar-collapse-button{display:none;cursor:pointer;}@media (max-width:1000px){.navbar .navbar-content .navbar-collapse-button{display:inline-block;}}.navbar .navbar-content .navbar-collapse-button span{display:block;width:33px;height:4px;margin-bottom:5px;position:relative;background:#3c3c3b;border-radius:3px;z-index:1;-webkit-transform-origin:4px 0;-ms-transform-origin:4px 0;transform-origin:4px 0;-webkit-transition:-webkit-transform 0.5s cubic-bezier(0.77,0.2,0.05,1),background 0.5s cubic-bezier(0.77,0.2,0.05,1),opacity 0.55s ease;-webkit-transition:transform 0.5s cubic-bezier(0.77,0.2,0.05,1),background 0.5s cubic-bezier(0.77,0.2,0.05,1),opacity 0.55s ease;transition:transform 0.5s cubic-bezier(0.77,0.2,0.05,1),background 0.5s cubic-bezier(0.77,0.2,0.05,1),opacity 0.55s ease;}.navbar .navbar-content .navbar-collapse-button span:first-child{-webkit-transform-origin:0% 0%;-ms-transform-origin:0% 0%;transform-origin:0% 0%;}.navbar .navbar-content .navbar-collapse-button span:nth-last-child(2){-webkit-transform-origin:0% 100%;-ms-transform-origin:0% 100%;transform-origin:0% 100%;}.navbar .navbar-content .navbar-right{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:baseline;-webkit-box-align:baseline;-ms-flex-align:baseline;align-items:baseline;margin-bottom:10px;}@media (max-width:1000px){.navbar .navbar-content .navbar-right{max-height:0;-webkit-transition:max-height 200ms ease-in-out;transition:max-height 200ms ease-in-out;box-shadow:0 2px 5px 0 rgba(0,0,0,0.1);-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;position:absolute;top:2.75rem;left:0.8rem;right:0.8rem;background-color:#f8f9fa;overflow-x:auto;overflow-y:hidden;}}.navbar .navbar-content .navbar-menu .navbar-menu-item{font-weight:400;margin-right:2.5rem;}.navbar .navbar-content .navbar-menu .navbar-menu-item.with-drop-down{margin-right:1.8rem;}@media (max-width:1250px){.navbar .navbar-content .navbar-menu .navbar-menu-item{margin-right:1.5rem;}}@media (max-width:1000px){.navbar .navbar-content .navbar-menu .navbar-menu-item{display:block;margin-bottom:1rem;font-size:1.2rem;}}.navbar .navbar-content .navbar-menu .navbar-menu-item .external-link-icon{margin-left:0.25em;}@media (max-width:1000px){.navbar .navbar-content .navbar-menu{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:1rem;}}.navbar .navbar-content .navbar-social{margin-left:1.6rem;font-size:0.875rem;}.navbar .navbar-content .navbar-social svg{height:16px;margin-bottom:2px;}@media (max-width:1000px){.navbar .navbar-content .navbar-social svg{height:1rem;}}@media (max-width:1250px){.navbar .navbar-content .navbar-social{margin-left:1rem;}}@media (max-width:1000px){.navbar .navbar-content .navbar-social{margin-left:auto;padding:0 1rem 1rem 0;font-size:1rem;}}@media (max-width:768px){.navbar{top:1rem;}}.page .navbar{top:0;padding-top:1.5rem;padding-bottom:1rem;position:fixed;background-color:#fff;z-index:2;}</style><style id="__jsx-2520609189">.search input{color:#adb5bd;border:1px solid #dee2e6;border-radius:0.4rem;font-size:0.875rem;padding:0.25rem 1.8rem 0.35rem 1.8rem;width:100%;-webkit-transition:color 0.15s ease-in-out,border-color 0.15s ease-in-out;transition:color 0.15s ease-in-out,border-color 0.15s ease-in-out;}.search input:focus{border-color:#adb5bd;color:#3c3c3b;}.search .search-icon,.search .search-icon-delete{position:absolute;top:0.55rem;height:1rem;stroke:#adb5bd;-webkit-transition:stroke 0.15s ease-in-out;transition:stroke 0.15s ease-in-out;}.search .search-icon{left:0.4rem;}.search input:focus+.search-icon{stroke:#6f6970;}.search .search-icon-delete{stroke:#6f6970;right:0.4rem;height:0.75rem;top:0.7rem;opacity:0;-webkit-transition:opacity 0.15s ease-in-out;transition:opacity 0.15s ease-in-out;cursor:text;}.search.has-content .search-icon-delete{opacity:1;cursor:pointer;}</style><style id="__jsx-4212053455">.search-results,.search-results-none{font-size:0.875rem;overflow:auto;list-style-type:none;padding-left:0;display:none;}.search-results.visible,.search-results-none.visible{display:block;}.search-results{list-style-type:none;padding:0;margin-bottom:0;}.search-results li{display:block;padding:0.5rem;margin-bottom:1rem;border-radius:0.4rem;border:1px solid transparent;cursor:pointer;}.search-results li.active{background-color:#f8f9fa;border:1px solid #e9ecef;}.search-results li h5{margin:0 0 0.5rem 0;font-size:1em;}.search-results li .search-results-highlight{background-color:yellow;}.search-results-none{padding:1rem 0.5rem;text-align:center;width:100%;}</style><style id="__jsx-2599647406">.search-panel{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;position:relative;}</style><style id="__jsx-1153611384">.github-stars.jsx-1153611384{display:inline-block;}.github-stars.jsx-1153611384 .icon.jsx-1153611384{margin-right:0.25em;}.github-stars.jsx-1153611384 .icon.jsx-1153611384 svg{height:1rem;}</style><style id="__jsx-1771812074">footer{font-size:0.875rem;padding-top:3rem;padding-bottom:4rem;background-color:#f8f9fa;border-top:1px solid #dee2e6;margin-top:1rem;color:#6f6970;}footer h5{font-size:1rem;margin-top:0;margin-bottom:1rem;color:#3c3c3b;text-transform:uppercase;}footer ul{padding:0;list-style:none;line-height:2;}footer a{color:#6f6970;}footer .footer-logo img,footer .footer-copyright-eclipse-logo img{-webkit-filter:grayscale(100);filter:grayscale(100);opacity:0.5;-webkit-transition:all 0.15s ease-in-out;transition:all 0.15s ease-in-out;}footer .footer-logo img:hover,footer .footer-copyright-eclipse-logo img:hover{-webkit-filter:grayscale(0);filter:grayscale(0);opacity:1;}footer .footer-nav-section{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;margin-bottom:6rem;}footer .footer-nav-section .footer-logo{margin-top:0.4rem;}footer .footer-nav-section .footer-logo img{width:8.3rem;}footer .footer-nav-section .footer-nav-list{width:20%;}footer .footer-copyright{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}footer .footer-copyright a{white-space:nowrap;}footer .footer-copyright .footer-copyright-eclipse-logo{width:17%;margin-bottom:0.5rem;}@media (max-width:1250px){footer .footer-copyright .footer-copyright-break{display:none;}footer .footer-copyright .footer-copyright-eclipse-logo{width:30%;}}@media (max-width:1000px){footer .footer-nav-section .footer-nav-list{width:25%;}footer .footer-copyright .footer-copyright-break{display:inline-block;}footer .footer-copyright .footer-copyright-eclipse-logo{width:40%;}}@media (max-width:768px){footer .footer-nav-section{max-width:100%;margin-left:auto;margin-right:auto;}}@media (max-width:640px){footer .footer-nav-section{max-width:80%;margin-bottom:3rem;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}footer .footer-nav-section h5{cursor:pointer;}footer .footer-nav-section h5::after{display:inline-block;content:"";border-top:0.4em solid;border-right:0.4em solid transparent;border-bottom:0;border-left:0.4em solid transparent;position:absolute;top:0.75rem;right:0;}footer .footer-nav-section .footer-nav-list{width:100%;position:relative;}footer .footer-nav-section .footer-nav-list ul{overflow-y:hidden;max-height:0;-webkit-transition:all 200ms ease-in-out;transition:all 200ms ease-in-out;}footer .footer-nav-section .footer-nav-list ul.visible{margin-bottom:2rem;}footer .footer-nav-section .footer-logo{margin:0 auto 3rem auto;width:auto;}footer .footer-copyright{max-width:80%;text-align:center;margin-left:auto;margin-right:auto;-webkit-flex-direction:column-reverse;-ms-flex-direction:column-reverse;flex-direction:column-reverse;}footer .footer-copyright .footer-copyright-eclipse-logo{width:7.6rem;margin-bottom:1rem;}}</style><style id="__jsx-4280303685">.page-content{margin-top:6em;margin-bottom:8rem;}.docs .docs-content .docs-content-wrapper{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}.docs .docs-content .docs-content-wrapper aside{-webkit-flex:0 0 17rem;-ms-flex:0 0 17rem;flex:0 0 17rem;}.docs .docs-content .docs-content-wrapper aside .docs-content-wrapper-sidebar{position:-webkit-sticky;position:sticky;top:7em;}.docs .docs-content .docs-content-wrapper aside .search-panel{margin-top:1rem;width:100%;}.docs .docs-content .docs-content-wrapper aside .search-panel .search-results{max-height:calc(100vh - 10rem - 1px);}.docs .docs-content .docs-content-wrapper aside .docs-content-toc{margin-top:1rem;overflow-y:auto;max-height:calc(100vh - 10rem - 3px);}.docs .docs-content .docs-content-wrapper aside .docs-content-toc #toctitle{display:none;}.docs .docs-content .docs-content-wrapper aside .docs-content-toc ul{margin-top:0;padding-left:0;list-style-type:none;}.docs .docs-content .docs-content-wrapper aside .docs-content-toc ul.sectlevel2{display:none;}.docs .docs-content .docs-content-wrapper aside .docs-content-toc ul li{padding:0.3333333333rem 0;}.docs .docs-content .docs-content-wrapper aside.docs-has-search-results .docs-content-toc{display:none;}@media (max-width:1250px){.docs .docs-content .docs-content-wrapper aside{-webkit-flex:0 0 15rem;-ms-flex:0 0 15rem;flex:0 0 15rem;}}@media (max-width:1000px){.docs .docs-content .docs-content-wrapper aside{z-index:1;position:fixed;top:0;right:0;width:25rem;height:100vh;max-width:100%;padding-top:6rem;padding-left:2rem;padding-right:2rem;background-color:#fff;border-left:1px solid #dee2e6;-webkit-transform:translateX(100%);-ms-transform:translateX(100%);transform:translateX(100%);-webkit-transition:-webkit-transform 200ms ease-in-out;-webkit-transition:transform 200ms ease-in-out;transition:transform 200ms ease-in-out;will-change:transform;}.docs .docs-content .docs-content-wrapper aside.collapse{-webkit-transform:translateX(0%);-ms-transform:translateX(0%);transform:translateX(0%);}}@media (max-width:640px){.docs .docs-content .docs-content-wrapper aside{min-width:100%;border-left:none;}}.docs .docs-content .docs-content-wrapper .docs-content-sidebar-toggle{z-index:1000;cursor:pointer;display:none;position:fixed;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;right:2rem;bottom:2rem;color:#fff;background-color:#4d4d4d;padding:0.5rem;border-radius:0.8rem;-webkit-transition:background-color 0.15s ease-in-out;transition:background-color 0.15s ease-in-out;}.docs .docs-content .docs-content-wrapper .docs-content-sidebar-toggle .feather-list,.docs .docs-content .docs-content-wrapper .docs-content-sidebar-toggle .feather-x{display:block;}.docs .docs-content .docs-content-wrapper .docs-content-sidebar-toggle .feather-x{position:absolute;left:0;top:0;opacity:0;-webkit-transition:opacity 0.15s ease-in-out;transition:opacity 0.15s ease-in-out;}.docs .docs-content .docs-content-wrapper .docs-content-sidebar-toggle:hover{background-color:#3c3c3b;}.docs .docs-content .docs-content-wrapper .docs-content-sidebar-toggle.collapse .feather-list{opacity:0;}.docs .docs-content .docs-content-wrapper .docs-content-sidebar-toggle.collapse .feather-x{opacity:1;}@media (max-width:1000px){.docs .docs-content .docs-content-wrapper .docs-content-sidebar-toggle{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}@media (max-width:640px){.docs .docs-content .docs-content-wrapper .docs-content-sidebar-toggle{right:1rem;bottom:1rem;}}.docs .docs-content .docs-content-inner{max-width:calc(100% - 19.5rem);overflow:hidden;}.docs .docs-content .docs-content-inner .docs-content-metadata{margin-top:1.2rem;margin-bottom:1.2rem;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-align-items:baseline;-webkit-box-align:baseline;-ms-flex-align:baseline;align-items:baseline;}@media (max-width:1000px){.docs .docs-content .docs-content-inner .docs-content-metadata{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-repo{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-left{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex:1;-ms-flex:1;flex:1;}.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-left>*{margin-right:2rem;}.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-left>*:last-child{margin-right:0;}.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-left a{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:#6f6970;white-space:nowrap;}.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-left a:hover{color:#782b90;}.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-left a .feather{margin-right:0.25em;height:1rem;}@media (max-width:1000px){.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-left{-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-bottom:1rem;}}.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-version{-webkit-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}@media (min-width:1000px){.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-version{-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;}}.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-version svg{height:16px;margin-bottom:-2px;}@media (max-width:1000px){.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-version svg{height:1rem;margin-bottom:-1px;}}.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-version .dropdown-menu a{-webkit-text-decoration:none;text-decoration:none;}.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-version .dropdown-menu a:hover{color:#6f6970;}.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-label{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin-left:2rem;}.docs .docs-content .docs-content-inner h1{padding-top:0;margin-top:0.6rem;line-height:1.2;}.docs .docs-content .docs-content-inner h1::after{content:"";width:30%;display:block;border:2px solid #782b90;border-radius:2px;margin-top:1.1rem;}.docs .docs-content .docs-content-inner .ulist>ul{padding-left:1.1rem;}.docs .docs-content .docs-content-inner h2{border-top:1px solid #dee2e6;margin-top:5rem;padding-top:2rem;}.docs .docs-content .docs-content-inner h3,.docs .docs-content .docs-content-inner h4{margin-top:3rem;}@media (max-width:1250px){.docs .docs-content .docs-content-inner{max-width:calc(100% - 17.5rem);}}@media (max-width:1000px){.docs .docs-content .docs-content-inner{max-width:100%;}}.docs .docs-content .admonitionblock{border-top-right-radius:0.8rem;border-bottom-right-radius:0.8rem;background-color:#f8f9fa;padding:1rem;margin:1.5rem 0;border-left:9px solid transparent;}.docs .docs-content .admonitionblock.note,.docs .docs-content .admonitionblock.tip{border-color:#6cb9f0;}.docs .docs-content .admonitionblock.important,.docs .docs-content .admonitionblock.warning,.docs .docs-content .admonitionblock.caution{border-color:#f0a46c;}.docs .docs-content .admonitionblock tr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}.docs .docs-content .admonitionblock .title{font-weight:400;}.docs .docs-content .admonitionblock .title::after{content:":";}.docs .docs-content dt{font-weight:400;}.docs .docs-content .anchor{opacity:0;-webkit-align-self:flex-start;-ms-flex-item-align:start;align-self:flex-start;outline:none;}.docs .docs-content .anchor::after{content:"#";position:absolute;margin-left:-1.5rem;color:#ced4da;padding-right:0.45rem;}.docs .docs-content .anchor:hover{opacity:1;}.docs .docs-content h2:hover .anchor,.docs .docs-content h3:hover .anchor,.docs .docs-content h4:hover .anchor,.docs .docs-content h5:hover .anchor,.docs .docs-content h6:hover .anchor{opacity:1;}.docs .docs-content h1 .anchor{display:none;}.docs .docs-content h4 .anchor::after,.docs .docs-content h5 .anchor::after,.docs .docs-content h6 .anchor::after{padding-right:0.6rem;}</style><style id="__jsx-3977862379">{/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */}html{line-height:1.15;-webkit-text-size-adjust:100%;}body{margin:0;}main{display:block;}h1{font-size:2em;margin:0.67em 0;}hr{box-sizing:content-box;height:0;overflow:visible;}pre{font-family:monospace,monospace;font-size:1em;}a{background-color:transparent;}abbr[title]{border-bottom:none;-webkit-text-decoration:underline;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted;}b,strong{font-weight:bolder;}code,kbd,samp{font-family:monospace,monospace;font-size:1em;}small{font-size:80%;}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline;}sub{bottom:-0.25em;}sup{top:-0.5em;}img{border-style:none;}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0;}button,input{overflow:visible;}button,select{text-transform:none;}button,[type=button],[type=reset],[type=submit]{-webkit-appearance:button;}button::-moz-focus-inner,[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner{border-style:none;padding:0;}button:-moz-focusring,[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring{outline:1px dotted ButtonText;}fieldset{padding:0.35em 0.75em 0.625em;}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal;}progress{vertical-align:baseline;}textarea{overflow:auto;}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0;}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto;}[type=search]{-webkit-appearance:textfield;outline-offset:-2px;}[type=search]::-webkit-search-decoration{-webkit-appearance:none;}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit;}details{display:block;}summary{display:list-item;}template{display:none;}[hidden]{display:none;}.hljs,pre{display:block;overflow-x:auto;padding:0.5em;background:#3a2840;color:#fff;}.hljs.language-shell:not(.bash)+.bash,pre.language-shell:not(.bash)+.bash,.hljs.language-better-shell:not(.bash)+.bash,pre.language-better-shell:not(.bash)+.bash{color:#d2a8e0;}pre{border-radius:0.8rem;padding:1rem;font-size:0.875rem;margin:1.5rem 0;}.hljs-keyword,.hljs-selector-tag,.hljs-tag{color:#d2a8e0;}.hljs-template-tag{color:#f00;}.hljs-number{color:#6cb9f0;}.hljs-variable,.hljs-template-variable,.hljs-attribute,.hljs-literal{color:#c9e5f9;}.hljs-subst{color:#f00;}.hljs-title,.hljs-name,.hljs-selector-id,.hljs-selector-class,.hljs-section,.hljs-type{color:#f0a46c;}.hljs-symbol,.hljs-bullet,.hljs-link{color:#d2a8e0;}.hljs-deletion,.hljs-string,.hljs-built_in,.hljs-builtin-name{color:#6cb9f0;}.hljs-addition,.hljs-comment,.hljs-quote,.hljs-meta{color:#adb5bd;}.hljs-emphasis{font-style:italic;}.hljs-strong{font-weight:bold;}#nprogress{pointer-events:none;}#nprogress .bar{background:#29d;position:fixed;z-index:1031;top:0;left:0;width:100%;height:2px;}#nprogress .peg{display:block;position:absolute;right:0px;width:100px;height:100%;box-shadow:0 0 10px #29d,0 0 5px #29d;opacity:1;-webkit-transform:rotate(3deg) translate(0px,-4px);-ms-transform:rotate(3deg) translate(0px,-4px);-webkit-transform:rotate(3deg) translate(0px,-4px);-ms-transform:rotate(3deg) translate(0px,-4px);transform:rotate(3deg) translate(0px,-4px);}#nprogress .spinner{display:block;position:fixed;z-index:1031;top:15px;right:15px;}#nprogress .spinner-icon{width:18px;height:18px;box-sizing:border-box;border:solid 2px transparent;border-top-color:#29d;border-left-color:#29d;border-radius:50%;-webkit-animation:nprogress-spinner 400ms linear infinite;-webkit-animation:nprogress-spinner 400ms linear infinite;animation:nprogress-spinner 400ms linear infinite;}.nprogress-custom-parent{overflow:hidden;position:relative;}.nprogress-custom-parent #nprogress .spinner,.nprogress-custom-parent #nprogress .bar{position:absolute;}@-webkit-keyframes nprogress-spinner{0%{-webkit-transform:rotate(0deg);}100%{-webkit-transform:rotate(360deg);}}@-webkit-keyframes nprogress-spinner{0%{-webkit-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);}100%{-webkit-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg);}}@keyframes nprogress-spinner{0%{-webkit-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);}100%{-webkit-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg);}}#nprogress .bar{background:#782b90;}#nprogress .peg{box-shadow:0 0 10px #782b90,0 0 5px #782b90;}#nprogress .spinner-icon{border-top-color:#782b90;border-left-color:#782b90;}html{box-sizing:border-box;}*,*::before,*::after{box-sizing:inherit;}:root{font-size:18px;}@media (max-width:1000px){:root{font-size:17.1px;}}@media (max-width:768px){:root{font-size:16.2px;}}@media (max-width:640px){:root{font-size:15.3px;}}body,input{font-family:"Roboto",sans-serif;font-weight:300;line-height:1.7;color:#3c3c3b;}input{outline:none;}h1,h2,h3,h4,h5,h6{font-weight:400;}h1{font-size:2.5rem;}h2{font-size:2rem;}h3{font-size:1.75rem;}h4{font-size:1.5rem;}h5{font-size:1.25rem;}h6{font-size:1.1rem;}.container{width:100%;padding-right:0.8rem;padding-left:0.8rem;margin-right:auto;margin-left:auto;}@media (min-width:640px){.container{max-width:620px;}}@media (min-width:768px){.container{max-width:738px;}}@media (min-width:1000px){.container{max-width:950px;}}@media (min-width:1250px){.container{max-width:1180px;}}@media (min-width:1250px){.container-narrow{max-width:950px;}}.img-fluid{max-width:100%;}a{-webkit-text-decoration:none;text-decoration:none;color:#782b90;}a:hover{-webkit-text-decoration:underline;text-decoration:underline;color:#571f69;}img{vertical-align:middle;}svg{overflow:hidden;vertical-align:middle;}code,pre{font-family:"Roboto Mono",SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;}p code{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;max-width:100%;overflow:auto;}.heading-anchor{opacity:0;-webkit-align-self:flex-start;-ms-flex-item-align:start;align-self:flex-start;outline:none;}.heading-anchor::after{content:"#";position:absolute;margin-left:-1.5rem;color:#ced4da;padding-right:0.45rem;}.heading-anchor:hover{opacity:1;}h2:hover .heading-anchor,h3:hover .heading-anchor,h4:hover .heading-anchor,h5:hover .heading-anchor,h6:hover .heading-anchor{opacity:1;}h1 .heading-anchor{display:none;}h4 .heading-anchor::after,h5 .heading-anchor::after,h6 .heading-anchor::after{padding-right:0.6rem;}</style><style data-href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500&display=swap">@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5vAA.woff) format('woff')}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Me5g.woff) format('woff')}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmEU9vAA.woff) format('woff')}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5fCRc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5fABc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5fCBc4AMP6lbBP.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5fBxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5fCxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5fChc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5fBBc4AMP6lQ.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Mu72xKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Mu5mxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Mu7mxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Mu4WxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Mu7WxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Mu7GxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Mu4mxKKTU1Kg.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmEU9fCRc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmEU9fABc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmEU9fCBc4AMP6lbBP.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmEU9fBxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmEU9fCxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmEU9fChc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmEU9fBBc4AMP6lQ.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style><style data-href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@300;400&display=swap">@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZKCA.woff) format('woff')}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVl2ZhZI2eCN5jzbjEETS9weq8-59Y.woff) format('woff')}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCkYb9lecyVC4A.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCAYb9lecyVC4A.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCgYb9lecyVC4A.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCcYb9lecyVC4A.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCsYb9lecyVC4A.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCoYb9lecyVC4A.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCQYb9lecyU.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVl2ZhZI2eCN5jzbjEETS9weq8-19-7DQk6YvNkeg.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVl2ZhZI2eCN5jzbjEETS9weq8-19a7DQk6YvNkeg.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVl2ZhZI2eCN5jzbjEETS9weq8-1967DQk6YvNkeg.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVl2ZhZI2eCN5jzbjEETS9weq8-19G7DQk6YvNkeg.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVl2ZhZI2eCN5jzbjEETS9weq8-1927DQk6YvNkeg.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVl2ZhZI2eCN5jzbjEETS9weq8-19y7DQk6YvNkeg.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVl2ZhZI2eCN5jzbjEETS9weq8-19K7DQk6YvM.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style><style data-href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400&display=swap">@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vqPQA.woff) format('woff')}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vq_SeW-AJi8SJQtQ4Y.woff) format('woff');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vq_QOW-AJi8SJQtQ4Y.woff) format('woff');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vq_R-W-AJi8SJQtQ4Y.woff) format('woff');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vq_S-W-AJi8SJQtQ4Y.woff) format('woff');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vq_SuW-AJi8SJQtQ4Y.woff) format('woff');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vq_ROW-AJi8SJQt.woff) format('woff');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><body data-build-time="2021-11-04T01:36:11.567Z" data-build-commit-id="7a764a0e64d2e76c27ecbd6f1bf24d41058dbce9" data-build-run-id="1419442121"><div id="__next"><main class="jsx-4280303685 page docs"><header><div class="jsx-3537117450 navbar"><div class="jsx-3537117450 navbar-content container"><div class="jsx-3537117450 navbar-logo"><a class="jsx-3537117450" href="/"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAxMjMyLjYgMzE1LjIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDEyMzIuNiAzMTUuMiIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHN0eWxlPi5zdDB7ZmlsbDojNzgyYTkxfTwvc3R5bGU+PHBhdGggZD0iTTEyMC45IDIxNC4yIDE5MC41IDBoNTIuM2wtOTguNSAyNzMuOEg5OC4yTDAgMGg1Mi4xbDY4LjggMjE0LjJ6bTI5MS4yLTYyLjZIMjk5LjZ2ODQuMkg0MzF2MzhIMjUyVjBoMTc3Ljd2MzguNEgyOTkuNlYxMTRoMTEyLjV2MzcuNnptODMuNy0xMTMuMkg1NDZjMTYuNS4zIDI5IDQuNCAzNy4zIDEyLjQgOC4zIDggMTIuNSAxOS40IDEyLjUgMzQgMCAxNC00LjUgMjUuMS0xMy41IDMzLjItOSA4LjEtMjEuNiAxMi4xLTM3LjYgMTIuMWgtMjcuMXYyNC4ybDg2LjEgMTE5LjVoNTF2LTIuNGwtNzcuMi0xMDYuN2MyNC45LTUuNSA0My4zLTIxLjcgNTIuNi0zNS45IDguMi0xMi42IDEzLjMtMjcuNyAxMy4zLTQ2IDAtMjYuOC04LjYtNDcuNC0yNS44LTYxLjVDNjAwLjUgNy4xIDU3Ni4xIDAgNTQ0LjUgMGgtOTYuM3YyNzMuOGg0Ny42Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0ibTEwNTIuMyAxNTcuNy00MS41IDYyLjcgMjkuNyA1My40aDg1LjF6Ii8+PGNpcmNsZSBjbGFzcz0ic3QwIiBjeD0iODI3LjkiIGN5PSIyNzQuNyIgcj0iNDAuNSIvPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Im0xMDM3IDAtNDcuNiA3NC4yTDk0OSAwaC04NGw4NS4zIDEzNS44LTY3LjEgMTA1LjdjNS43IDkuNSA5LjEgMjAuNSA5LjIgMzIuNGg1MC4xTDExMjEuMyAwSDEwMzd6Ii8+PHBhdGggZD0iTTc2My41IDI3My44Yy4xLTkuOSAyLjUtMTkuMiA2LjYtMjcuNVYzOC40aDg1LjRWMEg2MzguMnYzOC40aDg0LjZ2MjM1LjRoNDAuN3ptNDE0LTI2Ni45aC0xNS4zdjQyLjJoLTguNVY2LjloLTE1LjJWMGgzOXY2Ljl6TTExOTMgMGwxNC4yIDM3LjdMMTIyMS4zIDBoMTF2NDkuMWgtOC41VjMyLjlsLjgtMjEuNy0xNC41IDM3LjloLTYuMWwtMTQuNS0zNy44LjggMjEuNnYxNi4yaC04LjVWMGgxMS4yeiIvPjwvc3ZnPg==" alt="Vert.x Logo" class="jsx-3537117450"/></a></div><div class="jsx-3537117450 navbar-collapse-button"><span class="jsx-3537117450"></span><span class="jsx-3537117450"></span><span class="jsx-3537117450"></span></div><div class="jsx-3537117450 navbar-right"><div class="jsx-3537117450 navbar-menu"><span class="jsx-3537117450 navbar-menu-item with-drop-down"><div class="jsx-3534061111 dropdown"><a class="jsx-3534061111 dropdown-title">开始<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="jsx-3534061111 dropdown-menu"><a class="jsx-3537117450" href="/introduction-to-vertx-and-reactive/"><li class="jsx-1030027079 dropdown-item">简介</li></a><a class="jsx-3537117450" href="/get-started/"><li class="jsx-1030027079 dropdown-item">开始</li></a><a href="https://start.vertx.io/" target="_blank" rel="noreferrer" class="jsx-3537117450"><li class="jsx-1030027079 dropdown-item">应用生成器 <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a></ul></div></span><a class="jsx-3537117450 navbar-menu-item" href="/docs/">文档</a><span class="jsx-3537117450 navbar-menu-item with-drop-down"><div class="jsx-3534061111 dropdown"><a class="jsx-3534061111 dropdown-title">资源<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="jsx-3534061111 dropdown-menu"><a class="jsx-3537117450" href="/faq/"><li class="jsx-1030027079 dropdown-item">答疑</li></a><a class="jsx-3537117450" href="/channels/"><li class="jsx-1030027079 dropdown-item">联系渠道</li></a><a href="https://how-to.vertx.io/" target="_blank" rel="noreferrer" class="jsx-3537117450"><li class="jsx-1030027079 dropdown-item">操作指南 <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a><a href="https://github.com/vert-x3/vertx-eventbus-bridge-clients" target="_blank" rel="noreferrer" class="jsx-3537117450"><li class="jsx-1030027079 dropdown-item">EventBus Bridge Clients <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a><a href="https://github.com/vert-x3/advanced-vertx-guide" target="_blank" rel="noreferrer" class="jsx-3537117450"><li class="jsx-1030027079 dropdown-item">Advanced Vert.x Guide <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a></ul></div></span><a class="jsx-3537117450 navbar-menu-item" href="/blog/">博客</a><a class="jsx-3537117450 navbar-menu-item" href="/community/">社区</a><a class="jsx-3537117450 navbar-menu-item" href="/translation/">翻译团队</a></div><div class="jsx-3537117450 navbar-social"><a href="https://github.com/vert-x3/vertx-awesome" title="Awesome Vert.x" target="_blank" rel="noopener noreferrer" class="jsx-3537117450 navbar-social-link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="List of awesome Vert.x projects"><title>Awesome Vert.x</title><path d="M24 11.438l-6.154-5.645-.865.944 5.128 4.7H1.895l5.128-4.705-.865-.943-6.154 5.649H0v3.72c0 1.683 1.62 3.053 3.61 3.053h3.795c1.99 0 3.61-1.37 3.61-3.051v-2.446h1.97v2.446c0 1.68 1.62 3.051 3.61 3.051h3.794c1.99 0 3.61-1.37 3.61-3.051v-3.721z"></path></svg></a><a href="https://stackoverflow.com/questions/tagged/vert.x" title="Stack Overflow" target="_blank" rel="noopener noreferrer" class="jsx-3537117450 navbar-social-link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Stack Overflow questions related to Vert.x"><title>stackoverflow</title><path d="M15.725 0l-1.72 1.277 6.39 8.588 1.716-1.277L15.725 0zm-3.94 3.418l-1.369 1.644 8.225 6.85 1.369-1.644-8.225-6.85zm-3.15 4.465l-.905 1.94 9.702 4.517.904-1.94-9.701-4.517zm-1.85 4.86l-.44 2.093 10.473 2.201.44-2.092-10.473-2.203zM1.89 15.47V24h19.19v-8.53h-2.133v6.397H4.021v-6.396H1.89zm4.265 2.133v2.13h10.66v-2.13H6.154Z"></path></svg></a><a href="https://www.youtube.com/channel/UCGN6L3tRhs92Uer3c6VxOSA" title="YouTube" target="_blank" rel="noopener noreferrer" class="jsx-3537117450 navbar-social-link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="YouTube channel of Vert.x"><title>youtube</title><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"></path></svg></a><a href="https://discord.gg/KzEMwP2" title="Discord" target="_blank" rel="noopener noreferrer" class="jsx-3537117450 navbar-social-link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Eclipse Vert.x channel on Discord"><title>discord</title><path d="M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.946 2.4189-2.1568 2.4189Z"></path></svg></a><a href="https://groups.google.com/forum/?fromgroups#!forum/vertx" title="Vert.x 用户组" target="_blank" rel="noopener noreferrer" class="jsx-3537117450 navbar-social-link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="A Google group for Vert.x users"><title>Vert.x 用户组</title><path d="M.92 3.332c-.776 0-1.216.67-.692 1.383l2.537 4.403v7.86c0 2.013 1.467 3.69 3.459 3.69H20.31a3.75 3.75 0 003.69-3.69V7.043a3.723 3.723 0 00-3.668-3.71zm5.786 3.71H20.1c.587 0 1.153.357 1.153.923 0 .566-.566.922-1.153.922H6.706c-.587 0-1.153-.356-1.153-.922 0-.566.566-.923 1.153-.923zm0 3.69H20.1c.587 0 1.153.356 1.153.922 0 .566-.566.922-1.153.922H6.706c-.587 0-1.153-.356-1.153-.922 0-.566.566-.922 1.153-.922zm-.021 3.71h9.705c.587 0 1.153.356 1.153.922 0 .566-.566.923-1.153.923H6.685c-.587 0-1.153-.357-1.153-.923 0-.566.566-.922 1.153-.922Z"></path></svg></a><a href="https://shang.qq.com/wpa/qunwpa?idkey=587f58cacb9557e3291b46098e0fe09427b98a1c0f866da23c04c2762bc7e2ad" title="Vert.x中国用户组QQ群" target="_blank" rel="noopener noreferrer" class="jsx-3537117450 navbar-social-link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Vert.x中国用户组QQ群"><title>Vert.x中国用户组QQ群</title><path d="M21.395 15.035a39.548 39.548 0 0 0-.803-2.264l-1.079-2.695c.001-.032.014-.562.014-.836C19.526 4.632 17.351 0 12 0S4.474 4.632 4.474 9.241c0 .274.013.804.014.836l-1.08 2.695a38.97 38.97 0 0 0-.802 2.264c-1.021 3.283-.69 4.643-.438 4.673.54.065 2.103-2.472 2.103-2.472 0 1.469.756 3.387 2.394 4.771-.612.188-1.363.479-1.845.835-.434.32-.379.646-.301.778.343.578 5.883.369 7.482.189 1.6.18 7.14.389 7.483-.189.078-.132.132-.458-.301-.778-.483-.356-1.233-.646-1.846-.836 1.637-1.384 2.393-3.302 2.393-4.771 0 0 1.563 2.537 2.103 2.472.251-.03.581-1.39-.438-4.673zM12.662 4.846c.039-1.052.659-1.878 1.385-1.846s1.281.912 1.242 1.964c-.039 1.051-.659 1.878-1.385 1.846s-1.282-.912-1.242-1.964zM9.954 3c.725-.033 1.345.794 1.384 1.846.04 1.052-.517 1.931-1.242 1.963-.726.033-1.346-.794-1.385-1.845C8.672 3.912 9.228 3.033 9.954 3zM7.421 8.294c.194-.43 2.147-.908 4.566-.908h.026c2.418 0 4.372.479 4.566.908a.14.14 0 0 1 .014.061c0 .031-.01.059-.026.083-.163.238-2.333 1.416-4.553 1.416h-.026c-2.221 0-4.39-1.178-4.553-1.416a.136.136 0 0 1-.014-.144zm10.422 8.622c-.22 3.676-2.403 5.987-5.774 6.021h-.137c-3.37-.033-5.554-2.345-5.773-6.021-.081-1.35.001-2.496.147-3.43.318.063.638.122.958.176v3.506s1.658.334 3.318.103v-3.225c.488.027.96.04 1.406.034h.025c1.678.021 3.714-.204 5.683-.594.146.934.227 2.08.147 3.43zM10.48 5.804c.313-.041.542-.409.508-.825-.033-.415-.314-.72-.629-.679-.313.04-.541.409-.508.824.034.417.315.72.629.68zM14.479 5.156c.078.037.221.042.289-.146.035-.095.025-.165-.009-.214-.023-.033-.133-.118-.371-.176-.904-.22-1.341.384-1.405.499-.04.072-.012.176.056.227.067.051.139.037.179-.006.58-.628 1.21-.208 1.261-.184z"></path></svg></a></div></div></div></div></header><div class="jsx-4280303685 page-content docs-content"><div class="jsx-4280303685 container"><div class="jsx-4280303685 docs-content-wrapper"><aside class="jsx-4280303685 "><div class="jsx-4280303685 docs-content-wrapper-sidebar"><div class="jsx-2599647406 search-panel"><div class="jsx-2520609189 search"><input type="text" placeholder="Search..." value="" class="jsx-2520609189"/><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="search-icon"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="search-icon-delete"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg></div><ul class="jsx-4212053455 search-results"></ul><div class="jsx-4212053455 search-results-none">No results.</div></div><div class="jsx-4280303685 docs-content-toc"><div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_using_the_sql_client_api">使用Sql 客户端 API</a>
<ul class="sectlevel2">
<li><a href="#_creating_a_db_pool">创建一个数据库连接池</a></li>
<li><a href="#_retrieving_the_generated_keys">Retrieving the generated keys</a></li>
<li><a href="#_working_with_procedures_and_functions">Working with Procedures and Functions</a></li>
</ul>
</li>
<li><a href="#_legacy_jdbc_client_api">旧版JDBC客户端API</a>
<ul class="sectlevel2">
<li><a href="#_getting_a_connection">建立连接</a></li>
<li><a href="#_simple_sql_operations">简单的SQL操作</a></li>
<li><a href="#_creating_a_the_client">创建一个客户端</a></li>
<li><a href="#_closing_the_client">关闭客户端</a></li>
<li><a href="#_the_sql_connection">SQL连接</a></li>
<li><a href="#_configuration">配置项</a></li>
<li><a href="#_data_types">数据类型</a></li>
</ul>
</li>
</ul>
</div></div></div></aside><div class="jsx-4280303685 docs-content-sidebar-toggle"><div style="position:relative" class="jsx-4280303685"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-list"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-x"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></div></div><div class="jsx-4280303685 docs-content-inner"><div class="jsx-4280303685 docs-content-metadata"><div class="jsx-4280303685 docs-content-metadata-left"><div class="jsx-4280303685 docs-content-metadata-repo"><div class="jsx-1153611384 github-stars"><a href="https://github.com/vert-x3/vertx-jdbc-client" class="jsx-1153611384"><div class="jsx-1153611384 icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg></div> <!-- -->null stars</a></div></div><div class="jsx-4280303685"><a href="https://vertx.io/docs/apidocs" class="jsx-4280303685"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path></svg> API</a></div><div class="jsx-4280303685 docs-content-metadata-examples"><a href="https://github.com/vert-x3/vertx-examples/tree/4.x/jdbc-examples"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather"><path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"></path></svg> Examples</a></div><div class="jsx-4280303685 docs-content-metadata-edit"><a href="https://github.com/vertx-china/vertx-web-site/tree/master/docs/translation/vertx-jdbc-client/java"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg> 改进翻译</a></div><span class="jsx-4280303685 docs-content-metadata-version"><div class="jsx-3534061111 dropdown"><a class="jsx-3534061111 dropdown-title">v4.2.0<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="jsx-3534061111 dropdown-menu align-right"><a href="/docs/vertx-jdbc-client/java/"><li class="jsx-1030027079 dropdown-item active has-active-siblings"><span class="jsx-1030027079 dropdown-check-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg></span>Latest (v<!-- -->4.2.0<!-- -->)</li></a><a href="/docs/4.1.5/vertx-jdbc-client/java/"><li class="jsx-1030027079 dropdown-item has-active-siblings">v<!-- -->4.1.5</li></a><a href="/docs/4.0.3/vertx-jdbc-client/java/"><li class="jsx-1030027079 dropdown-item has-active-siblings">v<!-- -->4.0.3</li></a><a href="/docs/3.9.9/vertx-jdbc-client/java/"><li class="jsx-1030027079 dropdown-item has-active-siblings">v<!-- -->3.9.9</li></a></ul></div></span></div></div><div class="jsx-4280303685"><h1>Vert.x JDBC 客户端</h1>

<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Verx.x JDBC 客户端允许您使用 Vert.x 应用程序中的异步API
与任何符合JDBC协议的数据库进行交互。</p>
</div>
<div class="paragraph">
<p>JDBC 客户端 API 接口描述请参考 <code><a href="../../apidocs/io/vertx/ext/jdbc/JDBCClient.html">JDBCClient</a></code>。</p>
</div>
<div class="paragraph">
<p>如需使用Vert.x JDBC Client，请先将以下依赖添加到您的构建描述中的 <em>依赖</em> 部分 ：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Maven（在您的 <code>pom.xml</code> 文件中添加）：</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.vertx<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>vertx-jdbc-client<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.2.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Gradle（在您的 <code>build.gradle</code> 文件中添加）：</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">compile <span class="hljs-string">&#x27;io.vertx:vertx-jdbc-client:4.2.0&#x27;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_using_the_sql_client_api"><a class="anchor" href="#_using_the_sql_client_api"></a>使用Sql 客户端 API</h2>
<div class="sectionbody">
<div class="paragraph">
<p>SQL客户端是使用SQL数据库通信的vert.x响应式API，
已经实现了MySQL、PostgreSQL、MSSQL和IBM DB2等多个流行数据的异步驱动程序。
但是，由于还有许多其他数据库没有异步驱动程序，
因此JDBC客户端实现了相同的API，直接使用JDBC驱动，以实现数据库的异步支持。</p>
</div>
<div class="sect2">
<h3 id="_creating_a_db_pool"><a class="anchor" href="#_creating_a_db_pool"></a>创建一个数据库连接池</h3>
<div class="paragraph">
<p>一切始于连接池，创建一个连接池是非常简单的。最简单的例子如下：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">JDBCPool pool = JDBCPool.pool(vertx, config);</code></pre>
</div>
</div>
<div class="paragraph">
<p>在这种情况下，我们将重用JDBC client 的 API 来创建池。
该配置为自由格式，用户需要查找对应JDBC连接池所需的属性。</p>
</div>
<div class="paragraph">
<p>对于类型安全的替代方案， 存在第二种工厂方法。
第二种工厂方法可确保配置正确(因为其属性和类型已由编译器验证)，
但当前仅适用于Agroal连接池。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">JDBCPool pool = JDBCPool.pool(
  vertx,
  <span class="hljs-comment">// configure the connection</span>
  <span class="hljs-keyword">new</span> JDBCConnectOptions()
    <span class="hljs-comment">// H2 connection string</span>
    .setJdbcUrl(<span class="hljs-string">&quot;jdbc:h2:~/test&quot;</span>)
    <span class="hljs-comment">// username</span>
    .setUser(<span class="hljs-string">&quot;sa&quot;</span>)
    <span class="hljs-comment">// password</span>
    .setPassword(<span class="hljs-string">&quot;&quot;</span>),
  <span class="hljs-comment">// configure the pool</span>
  <span class="hljs-keyword">new</span> PoolOptions()
    .setMaxSize(<span class="hljs-number">16</span>)
);</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_using_the_pool"><a class="anchor" href="#_using_the_pool"></a>使用连接池</h4>
<div class="paragraph">
<p>有了链接池后，就可以开始使用数据库了，连接池以两种模式运行：</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>托管连接模式</p>
</li>
<li>
<p>手动连接方式</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>在托管连接模式下工作时，
作为用户，您无需关心获取连接和将其返回到池中。
可以直接对该链接池运行查询，并且该链接池可确保在查询终止后获取并返回连接。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">pool
  .query(<span class="hljs-string">&quot;SELECT * FROM user&quot;</span>)
  .execute()
  .onFailure(e -&gt; {
    <span class="hljs-comment">// handle the failure</span>
  })
  .onSuccess(rows -&gt; {
    <span class="hljs-keyword">for</span> (Row row : rows) {
      System.out.println(row.getString(<span class="hljs-string">&quot;FIRST_NAME&quot;</span>));
    }
  });</code></pre>
</div>
</div>
<div class="paragraph">
<p>这也适用于准备好的sql语句：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">pool
  .preparedQuery(<span class="hljs-string">&quot;SELECT * FROM user WHERE emp_id &gt; ?&quot;</span>)
  <span class="hljs-comment">// the emp id to look up</span>
  .execute(Tuple.of(<span class="hljs-number">1000</span>))
  .onFailure(e -&gt; {
    <span class="hljs-comment">// handle the failure</span>
  })
  .onSuccess(rows -&gt; {
    <span class="hljs-keyword">for</span> (Row row : rows) {
      System.out.println(row.getString(<span class="hljs-string">&quot;FIRST_NAME&quot;</span>));
    }
  });</code></pre>
</div>
</div>
<div class="paragraph">
<p>使用此模式非常方便，因为它使您可以专注于业务逻辑，而不是连接管理。
有时可能需要保留秩序和因果关系。
在这种情况下，我们需要在手动连接模式下执行查询：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">pool
  .getConnection()
  .onFailure(e -&gt; {
    <span class="hljs-comment">// failed to get a connection</span>
  })
  .onSuccess(conn -&gt; {
    conn
      .query(<span class="hljs-string">&quot;SELECT * FROM user&quot;</span>)
      .execute()
      .onFailure(e -&gt; {
        <span class="hljs-comment">// handle the failure</span>

        <span class="hljs-comment">// very important! don&#x27;t forget to return the connection</span>
        conn.close();
      })
      .onSuccess(rows -&gt; {
        <span class="hljs-keyword">for</span> (Row row : rows) {
          System.out.println(row.getString(<span class="hljs-string">&quot;FIRST_NAME&quot;</span>));
        }

        <span class="hljs-comment">// very important! don&#x27;t forget to return the connection</span>
        conn.close();
      });
  });</code></pre>
</div>
</div>
<div class="paragraph">
<p>当然，预准备的sql语句也适用于此模式：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">pool
  .getConnection()
  .onFailure(e -&gt; {
    <span class="hljs-comment">// failed to get a connection</span>
  })
  .onSuccess(conn -&gt; {
    conn
      .preparedQuery(<span class="hljs-string">&quot;SELECT * FROM user WHERE emp_id &gt; ?&quot;</span>)
      <span class="hljs-comment">// the emp_id to look up</span>
      .execute(Tuple.of(<span class="hljs-number">1000</span>))
      .onFailure(e -&gt; {
        <span class="hljs-comment">// handle the failure</span>

        <span class="hljs-comment">// very important! don&#x27;t forget to return the connection</span>
        conn.close();
      })
      .onSuccess(rows -&gt; {
        <span class="hljs-keyword">for</span> (Row row : rows) {
          System.out.println(row.getString(<span class="hljs-string">&quot;FIRST_NAME&quot;</span>));
        }

        <span class="hljs-comment">// very important! don&#x27;t forget to return the connection</span>
        conn.close();
      });
  });</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_retrieving_the_generated_keys"><a class="anchor" href="#_retrieving_the_generated_keys"></a>Retrieving the generated keys</h3>
<div class="paragraph">
<p>Generated keys is a common feature of JDBC drivers. The pool allows you to retrieve the keys using a special property:
<code>JDBCPool.GENERATED_KEYS</code>. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">String sql = <span class="hljs-string">&quot;INSERT INTO insert_table (FNAME, LNAME) VALUES (?, ?)&quot;</span>;

pool
  .preparedQuery(sql)
  .execute(Tuple.of(<span class="hljs-string">&quot;Paulo&quot;</span>, <span class="hljs-string">&quot;Lopes&quot;</span>))
  .onSuccess(rows -&gt; {
    <span class="hljs-comment">// the generated keys are returned as an extra row</span>
    Row lastInsertId = rows.property(JDBCPool.GENERATED_KEYS);
    <span class="hljs-comment">// just refer to the position as usual:</span>
    <span class="hljs-keyword">long</span> newId = lastInsertId.getLong(<span class="hljs-number">0</span>);
  });</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_working_with_procedures_and_functions"><a class="anchor" href="#_working_with_procedures_and_functions"></a>Working with Procedures and Functions</h3>
<div class="paragraph">
<p>Users that have used JDBC before are aware that in order to call either a function or a stored procedure, one must use
the interface <code>CallableStatement</code>. This abstraction is, for most database engines, synthetic as popular engines like
<code>PostgreSQL</code> or <code>MySQL</code> do not really have any special command to differentiate from callable statements from any other
regular statement.</p>
</div>
<div class="paragraph">
<p>The existing SQL client api was designed to be closed to what the reality of wire protocols shows, rather than adapt to
the JDBC spec, therefore you will not find any specific way to deal with callable statements. This design choice
introduces some complexities on the JDBC SQL client, as we need to adapt a regular call to respect the JDBC spec
requirements and be compatible with clients out there.</p>
</div>
<div class="sect3">
<h4 id="_simple_in_mapping"><a class="anchor" href="#_simple_in_mapping"></a>Simple IN mapping</h4>
<div class="paragraph">
<p>Mapping simple <code>IN</code> parameters is trivial. Consider the following procedure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-sql" data-lang="sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">procedure</span> new_customer(firstname <span class="hljs-type">varchar</span>(<span class="hljs-number">50</span>), lastname <span class="hljs-type">varchar</span>(<span class="hljs-number">50</span>))
 <span class="hljs-keyword">modifies</span> <span class="hljs-keyword">sql</span> data
 <span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> customers <span class="hljs-keyword">values</span> (<span class="hljs-keyword">default</span>, firstname, lastname, <span class="hljs-built_in">current_timestamp</span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>In order to call this procedure from the JDBC client, you would write some code as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">String sql = <span class="hljs-string">&quot;{call new_customer(?, ?)}&quot;</span>;

pool
  .preparedQuery(sql)
  <span class="hljs-comment">// by default the &quot;IN&quot; argument types are extracted from the</span>
  <span class="hljs-comment">// type of the data in the tuple, as well as the order</span>
  .execute(Tuple.of(<span class="hljs-string">&quot;Paulo&quot;</span>, <span class="hljs-string">&quot;Lopes&quot;</span>))
  .onFailure(e -&gt; {
    <span class="hljs-comment">// handle the failure</span>
  })
  .onSuccess(rows -&gt; {
    <span class="hljs-comment">// ... success handler</span>
  });</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_complex_in_out_mapping"><a class="anchor" href="#_complex_in_out_mapping"></a>Complex IN / OUT mapping</h4>
<div class="paragraph">
<p>The previous example, showed how to create simple queries. However, there are some limitations with it. It will assume
that arguments are always of type <code>IN</code> and that the argument type is the corresponding java type of the argument, which
will not always work, for example, when dealing with <code>null</code>.</p>
</div>
<div class="paragraph">
<p>In this case, the client has a helper <code><a href="../../apidocs/io/vertx/jdbcclient/SqlOutParam.html">SqlOutParam</a></code> that allows you to explicitly tag the
desired type of the argument. Not only the data type but also if it is a <code>IN</code> or a <code>OUT</code>.</p>
</div>
<div class="paragraph">
<p>Consider the following procedure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-sql" data-lang="sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">procedure</span> customer_lastname(<span class="hljs-keyword">IN</span> firstname <span class="hljs-type">varchar</span>(<span class="hljs-number">50</span>), <span class="hljs-keyword">OUT</span> lastname <span class="hljs-type">varchar</span>(<span class="hljs-number">50</span>))
 <span class="hljs-keyword">modifies</span> <span class="hljs-keyword">sql</span> data
 <span class="hljs-keyword">select</span> lastname <span class="hljs-keyword">into</span> lastname <span class="hljs-keyword">from</span> customers <span class="hljs-keyword">where</span> firstname <span class="hljs-operator">=</span> firstname</code></pre>
</div>
</div>
<div class="paragraph">
<p>This procedure will return all last names, from all customers, when looking for a first name. So we will need to map
both <code>IN</code> parameters as well as <code>OUT</code> parameters.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">String sql = <span class="hljs-string">&quot;{call customer_lastname(?, ?)}&quot;</span>;

pool
  .preparedQuery(sql)
  <span class="hljs-comment">// by default the &quot;IN&quot; argument types are extracted from the</span>
  <span class="hljs-comment">// type of the data in the tuple, as well as the order</span>
  <span class="hljs-comment">//</span>
  <span class="hljs-comment">// Note that we now also declare the output parameter and it&#x27;s</span>
  <span class="hljs-comment">// type. The type can be a &quot;String&quot;, &quot;int&quot; or &quot;JDBCType&quot; constant</span>
  .execute(Tuple.of(<span class="hljs-string">&quot;John&quot;</span>, SqlOutParam.OUT(JDBCType.VARCHAR)))
  .onFailure(e -&gt; {
    <span class="hljs-comment">// handle the failure</span>
  })
  .onSuccess(rows -&gt; {
    <span class="hljs-comment">// we can verify if there was a output received from the callable statement</span>
    <span class="hljs-keyword">if</span> (rows.property(JDBCPool.OUTPUT)) {
      <span class="hljs-comment">// and then iterate the results</span>
      <span class="hljs-keyword">for</span> (Row row : rows) {
        System.out.println(row.getString(<span class="hljs-number">0</span>));
      }
    }
  });</code></pre>
</div>
</div>
<div class="paragraph">
<p>Sometimes, you will need to map both <code>IN</code> and <code>OUT</code> parameters to the same variable. Again, it is all handled by the
<code><a href="../../apidocs/io/vertx/jdbcclient/SqlOutParam.html">SqlOutParam</a></code> helper.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">SqlOutParam param;

<span class="hljs-comment">// map IN as &quot;int&quot; as well as &quot;OUT&quot; as VARCHAR</span>
param = SqlOutParam.INOUT(<span class="hljs-number">123456</span>, JDBCType.VARCHAR);
<span class="hljs-comment">// or</span>
param = SqlOutParam.INOUT(<span class="hljs-number">123456</span>, <span class="hljs-string">&quot;VARCHAR&quot;</span>);

<span class="hljs-comment">// and then just add to the tuple as usual:</span>
Tuple.of(param);</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_legacy_jdbc_client_api"><a class="anchor" href="#_legacy_jdbc_client_api"></a>旧版JDBC客户端API</h2>
<div class="sectionbody">
<div class="paragraph">
<p>现在已弃用Vert.x 3中创建的JDBC客户端API，而应使用新的SQL客户端API。</p>
</div>
<div class="paragraph">
<p>在Vert.x 4的生命周期内仍将支持该功能，
以允许将应用程序迁移到新的SQL Client API。</p>
</div>
<div class="sect2">
<h3 id="_getting_a_connection"><a class="anchor" href="#_getting_a_connection"></a>建立连接</h3>
<div class="paragraph">
<p>创建客户端后，您可以通过 <code><a href="../../apidocs/io/vertx/ext/sql/SQLClient.html#getConnection-io.vertx.core.Handler-">getConnection</a></code>
以获取一个连接。</p>
</div>
<div class="paragraph">
<p>当池中有连接处于准备（ready）状态时，将在处理器（handler）中返回。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">client.getConnection(res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {

    SQLConnection connection = res.result();

    connection.query(<span class="hljs-string">&quot;SELECT * FROM some_table&quot;</span>, res2 -&gt; {
      <span class="hljs-keyword">if</span> (res2.succeeded()) {

        ResultSet rs = res2.result();
        <span class="hljs-comment">// Do something with results</span>
      }
    });
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// Failed to get connection - deal with it</span>
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>该连接是 <code><a href="../../apidocs/io/vertx/ext/sql/SQLConnection.html">SQLConnection</a></code> 的一个实例，
它是一个通用接口，不仅由Vert.x JDBC客户端使用。</p>
</div>
<div class="paragraph">
<p>您可以在 <a href="http://vertx.io/docs/vertx-sql-common/java/">常见的sql接口</a> 文档中学习如何使用它。</p>
</div>
</div>
<div class="sect2">
<h3 id="_simple_sql_operations"><a class="anchor" href="#_simple_sql_operations"></a>简单的SQL操作</h3>
<div class="paragraph">
<p>有时，您将需要运行单个SQL操作，
例如：单行查询或对一组行的更新，这些操作不需要成为事务的一部分，也不必依赖于上一个或下一个操作。</p>
</div>
<div class="paragraph">
<p>对于这些情况，客户端提供了无模板的API <code><a href="../../apidocs/io/vertx/ext/sql/SQLOperations.html">SQLOperations</a></code> ，
该接口将为您执行以下步骤：</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>从连接池获取连接</p>
</li>
<li>
<p>执行您的动作</p>
</li>
<li>
<p>关闭并将连接返回到连接池</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>从`USERS`表中加载用户的示例如下：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">client.query(<span class="hljs-string">&quot;SELECT * FROM USERS&quot;</span>, ar -&gt; {
  <span class="hljs-keyword">if</span> (ar.succeeded()) {
    <span class="hljs-keyword">if</span> (ar.succeeded()) {
      ResultSet result = ar.result();
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// Failed!</span>
    }
    <span class="hljs-comment">// NOTE that you don&#x27;t need to worry about</span>
    <span class="hljs-comment">// the connection management (e.g.: close)</span>
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>您可以通过一个简单的 "shot" 方法调用来执行以下操作：</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code><a href="../../apidocs/io/vertx/ext/sql/SQLClient.html#query-java.lang.String-io.vertx.core.Handler-">query</a></code></p>
</li>
<li>
<p><code><a href="../../apidocs/io/vertx/ext/sql/SQLClient.html#queryWithParams-java.lang.String-io.vertx.core.json.JsonArray-io.vertx.core.Handler-">queryWithParams</a></code></p>
</li>
<li>
<p><code><a href="../../apidocs/io/vertx/ext/sql/SQLOperations.html#querySingle-java.lang.String-io.vertx.core.Handler-">querySingle</a></code></p>
</li>
<li>
<p><code><a href="../../apidocs/io/vertx/ext/sql/SQLOperations.html#querySingleWithParams-java.lang.String-io.vertx.core.json.JsonArray-io.vertx.core.Handler-">querySingleWithParams</a></code></p>
</li>
<li>
<p><code><a href="../../apidocs/io/vertx/ext/sql/SQLClient.html#update-java.lang.String-io.vertx.core.Handler-">update</a></code></p>
</li>
<li>
<p><code><a href="../../apidocs/io/vertx/ext/sql/SQLClient.html#updateWithParams-java.lang.String-io.vertx.core.json.JsonArray-io.vertx.core.Handler-">updateWithParams</a></code></p>
</li>
<li>
<p><code><a href="../../apidocs/io/vertx/ext/sql/SQLClient.html#call-java.lang.String-io.vertx.core.Handler-">call</a></code></p>
</li>
<li>
<p><code><a href="../../apidocs/io/vertx/ext/sql/SQLClient.html#callWithParams-java.lang.String-io.vertx.core.json.JsonArray-io.vertx.core.json.JsonArray-io.vertx.core.Handler-">callWithParams</a></code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>有关这些API的更多详细信息，请参阅 <code><a href="../../apidocs/io/vertx/ext/sql/SQLOperations.html">SQLOperations</a></code> 接口。</p>
</div>
</div>
<div class="sect2">
<h3 id="_creating_a_the_client"><a class="anchor" href="#_creating_a_the_client"></a>创建一个客户端</h3>
<div class="paragraph">
<p>有几种创建客户端的方法。让我们把它们都过一遍。</p>
</div>
<div class="sect3">
<h4 id="_using_default_shared_data_source"><a class="anchor" href="#_using_default_shared_data_source"></a>使用默认的共享数据源</h4>
<div class="paragraph">
<p>在大多数情况下，您需要在不同的客户端实例之间共享数据源。</p>
</div>
<div class="paragraph">
<p>例如，您通过部署多个Verticle实例来扩展应用程序，并且希望每个Verticle实例共享相同的数据源，这样就不会有多个链接池。</p>
</div>
<div class="paragraph">
<p>您可以按照以下步骤进行操作：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">SQLClient client = JDBCClient.createShared(vertx, config);</code></pre>
</div>
</div>
<div class="paragraph">
<p>第一次调用 <code><a href="../../apidocs/io/vertx/ext/jdbc/JDBCClient.html#createShared-io.vertx.core.Vertx-io.vertx.core.json.JsonObject-">JDBCClient.createShared</a></code>
将实际创建数据源，并使用指定的配置。</p>
</div>
<div class="paragraph">
<p>随后的调用将返回使用相同数据源的新客户端实例，因此将不会使用该配置。</p>
</div>
</div>
<div class="sect3">
<h4 id="_specifying_a_data_source_name"><a class="anchor" href="#_specifying_a_data_source_name"></a>指定数据源名称</h4>
<div class="paragraph">
<p>您可以创建一个指定数据源名称的客户端，如下所示：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">SQLClient client = JDBCClient.createShared(vertx, config, <span class="hljs-string">&quot;MyDataSource&quot;</span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>如果使用相同的Vert.x实例并指定相同的数据源名称创建了不同的客户端，
则它们将共享相同的数据源。</p>
</div>
<div class="paragraph">
<p>第一次调用 <code><a href="../../apidocs/io/vertx/ext/jdbc/JDBCClient.html#createShared-io.vertx.core.Vertx-io.vertx.core.json.JsonObject-">JDBCClient.createShared</a></code>
将实际创建数据源，并使用指定的配置。</p>
</div>
<div class="paragraph">
<p>后续调用将返回使用相同数据源的新客户端实例，因此将不使用该配置。</p>
</div>
<div class="paragraph">
<p>如果您希望不同的客户端组具有不同的数据源(例如，它们与不同的数据库进行交互)，请使用这种创建方式。</p>
</div>
</div>
<div class="sect3">
<h4 id="_creating_a_client_with_a_non_shared_data_source"><a class="anchor" href="#_creating_a_client_with_a_non_shared_data_source"></a>使用非共享数据源创建客户端</h4>
<div class="paragraph">
<p>在大多数情况下，您将需要在不同的客户端实例之间共享数据源。
但是，您可能想要创建一个不与任何其他客户端共享其数据源的客户端实例。</p>
</div>
<div class="paragraph">
<p>在这种情况下，
您可以使用 <code><a href="../../apidocs/io/vertx/ext/jdbc/JDBCClient.html#create-io.vertx.core.Vertx-io.vertx.core.json.JsonObject-">JDBCClient.create</a></code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">SQLClient client = JDBCClient.create(vertx, config);</code></pre>
</div>
</div>
<div class="paragraph">
<p>这等效于 <code><a href="../../apidocs/io/vertx/ext/jdbc/JDBCClient.html#createShared-io.vertx.core.Vertx-io.vertx.core.json.JsonObject-java.lang.String-">JDBCClient.createShared</a></code>
每次使用唯一的数据源名称进行调用。</p>
</div>
</div>
<div class="sect3">
<h4 id="_specifying_a_data_source"><a class="anchor" href="#_specifying_a_data_source"></a>指定数据源</h4>
<div class="paragraph">
<p>如果您已经有一个预先存在的数据源，则还可以直接指定以下内容来创建客户端：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">SQLClient client = JDBCClient.create(vertx, dataSource);</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_closing_the_client"><a class="anchor" href="#_closing_the_client"></a>关闭客户端</h3>
<div class="paragraph">
<p>长时间保持客户端（例如，在您的verticle的生命周期内）是可以的，
但是一旦完成，就应该关闭它。</p>
</div>
<div class="paragraph">
<p>共享同一数据源的客户端将计算引用次数（reference counted）。
一旦最后一个引用的相同数据源被关闭，该数据源将被关闭。</p>
</div>
<div class="sect3">
<h4 id="_automatic_clean_up_in_verticles"><a class="anchor" href="#_automatic_clean_up_in_verticles"></a>verticles中自动清理</h4>
<div class="paragraph">
<p>如果要从verticle内部创建客户端，则取消部署verticle时将自动关闭客户端。</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_the_sql_connection"><a class="anchor" href="#_the_sql_connection"></a>SQL连接</h3>
<div class="paragraph">
<p>与数据库的连接用表示 <code><a href="../../apidocs/io/vertx/ext/sql/SQLConnection.html">SQLConnection</a></code>。</p>
</div>
<div class="sect3">
<h4 id="_auto_commit"><a class="anchor" href="#_auto_commit"></a>自动提交</h4>
<div class="paragraph">
<p>获取连接时，自动提交设置为true。
这意味着您执行的每个操作将有效地在其自己的事务中执行。</p>
</div>
<div class="paragraph">
<p>如果您希望在单个事务中执行多个操作，
则应使用 <code><a href="../../apidocs/io/vertx/ext/sql/SQLConnection.html#setAutoCommit-boolean-io.vertx.core.Handler-">setAutoCommit</a></code> 将自动提交设置为false</p>
</div>
<div class="paragraph">
<p>操作完成后，将调用处理程序：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">connection.setAutoCommit(<span class="hljs-keyword">false</span>, res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    <span class="hljs-comment">// OK!</span>
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// Failed!</span>
  }
});</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_executing_queries"><a class="anchor" href="#_executing_queries"></a>执行查询</h4>
<div class="paragraph">
<p>执行查询使用 <code><a href="../../apidocs/io/vertx/ext/sql/SQLConnection.html#query-java.lang.String-io.vertx.core.Handler-">query</a></code></p>
</div>
<div class="paragraph">
<p>查询字符串是传递给实际数据库的原始SQL。</p>
</div>
<div class="paragraph">
<p>当执行查询时，
结果通过 <code><a href="../../apidocs/io/vertx/ext/sql/ResultSet.html">ResultSet</a></code> 返回。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">connection.query(<span class="hljs-string">&quot;SELECT ID, FNAME, LNAME, SHOE_SIZE from PEOPLE&quot;</span>, res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    <span class="hljs-comment">// Get the result set</span>
    ResultSet resultSet = res.result();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// Failed!</span>
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p><code><a href="../../apidocs/io/vertx/ext/sql/ResultSet.html">ResultSet</a></code> 表示查询的结果。</p>
</div>
<div class="paragraph">
<p>列名称列表可通过 <code><a href="../../apidocs/io/vertx/ext/sql/ResultSet.html#getColumnNames--">getColumnNames</a></code> 获取，
而实际结果通过 <code><a href="../../apidocs/io/vertx/ext/sql/ResultSet.html#getResults--">getResults</a></code> 获取。</p>
</div>
<div class="paragraph">
<p>结果是 <code><a href="../../apidocs/io/vertx/core/json/JsonArray.html">JsonArray</a></code> 类型，每个元素对应一行查询结果</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">List&lt;String&gt; columnNames = resultSet.getColumnNames();

List&lt;JsonArray&gt; results = resultSet.getResults();

<span class="hljs-keyword">for</span> (JsonArray row : results) {

  String id = row.getString(<span class="hljs-number">0</span>);
  String fName = row.getString(<span class="hljs-number">1</span>);
  String lName = row.getString(<span class="hljs-number">2</span>);
  <span class="hljs-keyword">int</span> shoeSize = row.getInteger(<span class="hljs-number">3</span>);

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>您还可以使用 <code><a href="../../apidocs/io/vertx/ext/sql/ResultSet.html#getRows--">getRows</a></code>
- 作为Json对象实例的列表来检索行
- 这可以使您使用的API稍微简单一些，但是请注意，SQL结果可以包含重复的列名 - 如果是这种情况
则应改用 <code><a href="../../apidocs/io/vertx/ext/sql/ResultSet.html#getResults--">getResults</a></code></p>
</div>
<div class="paragraph">
<p>使用Json对象作为返回类型，进行迭代的示例：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">List&lt;JsonObject&gt; rows = resultSet.getRows();

<span class="hljs-keyword">for</span> (JsonObject row : rows) {

  String id = row.getString(<span class="hljs-string">&quot;ID&quot;</span>);
  String fName = row.getString(<span class="hljs-string">&quot;FNAME&quot;</span>);
  String lName = row.getString(<span class="hljs-string">&quot;LNAME&quot;</span>);
  <span class="hljs-keyword">int</span> shoeSize = row.getInteger(<span class="hljs-string">&quot;SHOE_SIZE&quot;</span>);

}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_prepared_statement_queries"><a class="anchor" href="#_prepared_statement_queries"></a>预备语句查询</h4>
<div class="paragraph">
<p>要执行准备好的语句查询，
可以使用 <code><a href="../../apidocs/io/vertx/ext/sql/SQLConnection.html#queryWithParams-java.lang.String-io.vertx.core.json.JsonArray-io.vertx.core.Handler-">queryWithParams</a></code>。</p>
</div>
<div class="paragraph">
<p>这将执行查询，其中包括参数占位符和一个 <code><a href="../../apidocs/io/vertx/core/json/JsonArray.html">JsonArray</a></code>
或参数值。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">String query = <span class="hljs-string">&quot;SELECT ID, FNAME, LNAME, SHOE_SIZE from PEOPLE WHERE LNAME=? AND SHOE_SIZE &gt; ?&quot;</span>;
JsonArray params = <span class="hljs-keyword">new</span> JsonArray().add(<span class="hljs-string">&quot;Fox&quot;</span>).add(<span class="hljs-number">9</span>);

connection.queryWithParams(query, params, res -&gt; {

  <span class="hljs-keyword">if</span> (res.succeeded()) {
    <span class="hljs-comment">// Get the result set</span>
    ResultSet resultSet = res.result();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// Failed!</span>
  }
});</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_executing_insert_update_or_delete"><a class="anchor" href="#_executing_insert_update_or_delete"></a>执行INSERT，UPDATE或DELETE</h4>
<div class="paragraph">
<p>要执行更新数据库的操作，请使用 <code><a href="../../apidocs/io/vertx/ext/sql/SQLConnection.html#update-java.lang.String-io.vertx.core.Handler-">update</a></code>.</p>
</div>
<div class="paragraph">
<p>更新字符串是原始SQL，无需更改实际数据库即可通过。</p>
</div>
<div class="paragraph">
<p>更新执行完成后，
通过回调返回 <code><a href="../../apidocs/io/vertx/ext/sql/UpdateResult.html">UpdateResult</a></code> 的结果</p>
</div>
<div class="paragraph">
<p>更新内容的行数通过 <code><a href="../../apidocs/io/vertx/ext/sql/UpdateResult.html#getUpdated--">getUpdated</a></code> 获取，
如果更新生成了键，则可以使用 <code><a href="../../apidocs/io/vertx/ext/sql/UpdateResult.html#getKeys--">getKeys</a></code> 获取</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">connection.update(<span class="hljs-string">&quot;INSERT INTO PEOPLE VALUES (null, &#x27;john&#x27;, &#x27;smith&#x27;, 9)&quot;</span>, res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {

    UpdateResult result = res.result();
    System.out.println(<span class="hljs-string">&quot;Updated no. of rows: &quot;</span> + result.getUpdated());
    System.out.println(<span class="hljs-string">&quot;Generated keys: &quot;</span> + result.getKeys());

  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// Failed!</span>
  }
});</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_prepared_statement_updates"><a class="anchor" href="#_prepared_statement_updates"></a>准备的语句更新</h4>
<div class="paragraph">
<p>要执行准备好的语句更新，
可以使用 <code><a href="../../apidocs/io/vertx/ext/sql/SQLConnection.html#updateWithParams-java.lang.String-io.vertx.core.json.JsonArray-io.vertx.core.Handler-">updateWithParams</a></code> 。</p>
</div>
<div class="paragraph">
<p>这种方式的更新语句包含参数占位符，
和JsonArray参数列表或参数值进行更新</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">String update = <span class="hljs-string">&quot;UPDATE PEOPLE SET SHOE_SIZE = 10 WHERE LNAME=?&quot;</span>;
JsonArray params = <span class="hljs-keyword">new</span> JsonArray().add(<span class="hljs-string">&quot;Fox&quot;</span>);

connection.updateWithParams(update, params, res -&gt; {

  <span class="hljs-keyword">if</span> (res.succeeded()) {

    UpdateResult updateResult = res.result();

    System.out.println(<span class="hljs-string">&quot;No. of rows updated: &quot;</span> + updateResult.getUpdated());

  } <span class="hljs-keyword">else</span> {

    <span class="hljs-comment">// Failed!</span>

  }
});</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_callable_statements"><a class="anchor" href="#_callable_statements"></a>可赎回声明</h4>
<div class="paragraph">
<p>要执行可调用语句(SQL函数或SQL过程)，可以使用
<code><a href="../../apidocs/io/vertx/ext/sql/SQLConnection.html#callWithParams-java.lang.String-io.vertx.core.json.JsonArray-io.vertx.core.json.JsonArray-io.vertx.core.Handler-">callWithParams</a></code>。</p>
</div>
<div class="paragraph">
<p>这将使用标准JDBC格式 <code>{call func_proc_name()}</code> 接受可调用语句，
还可以选择包含参数占位符，例如：<code>{call func_proc_name(?,?)}</code> ，
<code><a href="../../apidocs/io/vertx/core/json/JsonArray.html">JsonArray</a></code> 包含参数值，
最后是 <code><a href="../../apidocs/io/vertx/core/json/JsonArray.html">JsonArray</a></code> 包含输出类型，例如： <code>[null，'VARCHAR']</code> 。</p>
</div>
<div class="paragraph">
<p>请注意，输出类型的索引与params数组一样重要。
如果返回值是第二个参数，则输出数组必须包含一个空值作为第一个元素。</p>
</div>
<div class="paragraph">
<p>一个SQL函数使用return关键字返回一些输出，在这种情况下，可以这样调用它：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">String func = <span class="hljs-string">&quot;{ call one_hour_ago() }&quot;</span>;

connection.call(func, res -&gt; {

  <span class="hljs-keyword">if</span> (res.succeeded()) {
    ResultSet result = res.result();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// Failed!</span>
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>在使用Procedures时，仍然通过其参数从过程中返回值，如果不返回任何内容，
用法如下：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">String func = <span class="hljs-string">&quot;{ call new_customer(?, ?) }&quot;</span>;

connection.callWithParams(func, <span class="hljs-keyword">new</span> JsonArray().add(<span class="hljs-string">&quot;John&quot;</span>).add(<span class="hljs-string">&quot;Doe&quot;</span>), <span class="hljs-keyword">null</span>, res -&gt; {

  <span class="hljs-keyword">if</span> (res.succeeded()) {
    <span class="hljs-comment">// Success!</span>
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// Failed!</span>
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>但是，您还可以返回如下值：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">String func = <span class="hljs-string">&quot;{ call customer_lastname(?, ?) }&quot;</span>;

connection.callWithParams(func, <span class="hljs-keyword">new</span> JsonArray().add(<span class="hljs-string">&quot;John&quot;</span>), <span class="hljs-keyword">new</span> JsonArray().addNull().add(<span class="hljs-string">&quot;VARCHAR&quot;</span>), res -&gt; {

  <span class="hljs-keyword">if</span> (res.succeeded()) {
    ResultSet result = res.result();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// Failed!</span>
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>请注意，参数的索引与 <code>?</code> 的索引匹配，
并且输出参数期望是描述您要接收的类型的字符串。</p>
</div>
<div class="paragraph">
<p>为避免歧义，实现应遵循以下规则：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>当 <code>IN</code> 数组中的占位符为 <code>NOT NULL</code> 时，它将被采用</p>
</li>
<li>
<p>当 <code>IN</code> 值为 <code>NULL</code> 时，对 <code>OUT</code> 进行检查
当 <code>OUT</code> 值不为空时，它将被注册为输出参数
当 <code>OUT</code> 也为空时，预期 <code>IN</code> 值为 <code>NULL</code> 值。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>已注册的 <code>OUT</code> 参数将以数组形式出现在 <code>output</code> 属性下的结果集中。</p>
</div>
</div>
<div class="sect3">
<h4 id="_batch_operations"><a class="anchor" href="#_batch_operations"></a>批量操作</h4>
<div class="paragraph">
<p>SQL通用接口还定义了如何执行批处理操作。批处理操作分为3种类型：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>批量执行sql语句 <code><a href="../../apidocs/io/vertx/ext/sql/SQLConnection.html#batch-java.util.List-io.vertx.core.Handler-">batch</a></code></p>
</li>
<li>
<p>批量执行预处理sql语句 <code><a href="../../apidocs/io/vertx/ext/sql/SQLConnection.html#batchWithParams-java.lang.String-java.util.List-io.vertx.core.Handler-">batchWithParams</a></code></p>
</li>
<li>
<p>批量执行可调用语句 <code><a href="../../apidocs/io/vertx/ext/sql/SQLConnection.html#batchCallableWithParams-java.lang.String-java.util.List-java.util.List-io.vertx.core.Handler-">batchCallableWithParams</a></code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>批量执行sql语句示例如下：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">List&lt;String&gt; batch = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();
batch.add(<span class="hljs-string">&quot;INSERT INTO emp (NAME) VALUES (&#x27;JOE&#x27;)&quot;</span>);
batch.add(<span class="hljs-string">&quot;INSERT INTO emp (NAME) VALUES (&#x27;JANE&#x27;)&quot;</span>);

connection.batch(batch, res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    List&lt;Integer&gt; result = res.result();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// Failed!</span>
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>执行一个预处理sql语句，并且使用一个参数列表，示例如下</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">List&lt;JsonArray&gt; batch = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();
batch.add(<span class="hljs-keyword">new</span> JsonArray().add(<span class="hljs-string">&quot;joe&quot;</span>));
batch.add(<span class="hljs-keyword">new</span> JsonArray().add(<span class="hljs-string">&quot;jane&quot;</span>));

connection.batchWithParams(<span class="hljs-string">&quot;INSERT INTO emp (name) VALUES (?)&quot;</span>, batch, res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    List&lt;Integer&gt; result = res.result();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// Failed!</span>
  }
});</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_executing_other_operations"><a class="anchor" href="#_executing_other_operations"></a>执行其他操作</h4>
<div class="paragraph">
<p>要执行任何其他数据库操作，例如 <code>CREATE TABLE</code> 您可以使用
<code><a href="../../apidocs/io/vertx/ext/sql/SQLConnection.html#execute-java.lang.String-io.vertx.core.Handler-">execute</a></code> 。</p>
</div>
<div class="paragraph">
<p>sql语句将会直接在数据库中执行。操作完成后调用处理程序</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">String sql = <span class="hljs-string">&quot;CREATE TABLE PEOPLE (ID int generated by default as identity (start with 1 increment by 1) not null,&quot;</span> +
  <span class="hljs-string">&quot;FNAME varchar(255), LNAME varchar(255), SHOE_SIZE int);&quot;</span>;

connection.execute(sql, execute -&gt; {
  <span class="hljs-keyword">if</span> (execute.succeeded()) {
    System.out.println(<span class="hljs-string">&quot;Table created !&quot;</span>);
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// Failed!</span>
  }
});</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_multiple_resultset_responses"><a class="anchor" href="#_multiple_resultset_responses"></a>多个ResultSet响应</h4>
<div class="paragraph">
<p>在某些情况下，您的查询可能返回多个结果集，
在这种情况下，为了保持兼容性，当返回的结果集对象转换为纯json时，使用当前结果集的 <code>next</code> 链接到下一个结果集。
可以像这样简单地遍历所有结果集：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="hljs-keyword">while</span> (rs != <span class="hljs-keyword">null</span>) {
  <span class="hljs-comment">// do something with the result set...</span>

  <span class="hljs-comment">// next step</span>
  rs = rs.getNext();
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_streaming"><a class="anchor" href="#_streaming"></a>流式返回</h4>
<div class="paragraph">
<p>在处理大量数据返回时，建议不要使用刚刚描述的API，而是使用流式返回。
因为这样可以避免将整个响应内容填充到内存和JSON中，而是逐行处理数据，例如：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">connection.queryStream(<span class="hljs-string">&quot;SELECT * FROM large_table&quot;</span>, stream -&gt; {
  <span class="hljs-keyword">if</span> (stream.succeeded()) {
    stream.result().handler(row -&gt; {
      <span class="hljs-comment">// do something with the row...</span>
    });
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>您可以完全控制流何时暂停，恢复和结束。
对于查询返回多个结果集的情况，您应该使用结果集结束事件来获取下一个结果(如果有)。
如果有更多数据，则流处理程序将接收新数据，否则将调用结束处理程序。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">connection.queryStream(<span class="hljs-string">&quot;SELECT * FROM large_table; SELECT * FROM other_table&quot;</span>, stream -&gt; {
  <span class="hljs-keyword">if</span> (stream.succeeded()) {
    SQLRowStream sqlRowStream = stream.result();

    sqlRowStream
      .resultSetClosedHandler(v -&gt; {
        <span class="hljs-comment">// will ask to restart the stream with the new result set if any</span>
        sqlRowStream.moreResults();
      })
      .handler(row -&gt; {
        <span class="hljs-comment">// do something with the row...</span>
      })
      .endHandler(v -&gt; {
        <span class="hljs-comment">// no more data available...</span>
      });
  }
});</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_using_transactions"><a class="anchor" href="#_using_transactions"></a>使用事务</h4>
<div class="paragraph">
<p>要使用事务，请先使用 <code><a href="../../apidocs/io/vertx/ext/sql/SQLConnection.html#setAutoCommit-boolean-io.vertx.core.Handler-">setAutoCommit</a></code> 将自动提交设置为false。</p>
</div>
<div class="paragraph">
<p>然后，您可以进行事务性操作，并在要提交或回滚时使用
<code><a href="../../apidocs/io/vertx/ext/sql/SQLConnection.html#commit-io.vertx.core.Handler-">commit</a></code>
或
<code><a href="../../apidocs/io/vertx/ext/sql/SQLConnection.html#rollback-io.vertx.core.Handler-">rollback</a></code> 。</p>
</div>
<div class="paragraph">
<p>提交/回滚完成后，将调用处理程序，并且下一个事务将自动启动。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">connection.commit(res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    <span class="hljs-comment">// Committed OK!</span>
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// Failed!</span>
  }
});</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_closing_connections"><a class="anchor" href="#_closing_connections"></a>关闭连接</h4>
<div class="paragraph">
<p>完成连接后，应使用 <code><a href="../../apidocs/io/vertx/ext/sql/SQLConnection.html#close-io.vertx.core.Handler-">close</a></code> 将其返回到池中。</p>
</div>
<div class="paragraph">
<p>Unresolved directive in index.adoc - include::override/rxjava2.adoc[]</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_configuration"><a class="anchor" href="#_configuration"></a>配置项</h3>
<div class="paragraph">
<p>在创建或部署配置时，会将配置传递给客户端。</p>
</div>
<div class="paragraph">
<p>以下配置属性通常适用：</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>provider_class</code></dt>
<dd>
<p>实际用于管理数据库连接的类的类名。
默认情况下是， <code>io.vertx.ext.jdbc.spi.impl.C3P0DataSourceProvider</code> 但是如果您要使用其他提供程序，则可以覆盖此属性并提供您的实现。</p>
</dd>
<dt class="hdlist1"><code>row_stream_fetch_size</code></dt>
<dd>
<p><code>SQLRowStream</code> 内部缓存的大小，
曾经用来提高性能。默认情况下等于128</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>假设正在使用C3P0实现(默认设置)，则将应用以下额外的配置属性：</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>url</code></dt>
<dd>
<p>数据库的JDBC连接URL</p>
</dd>
<dt class="hdlist1"><code>driver_class</code></dt>
<dd>
<p>JDBC驱动程序的类</p>
</dd>
<dt class="hdlist1"><code>user</code></dt>
<dd>
<p>数据库的用户名</p>
</dd>
<dt class="hdlist1"><code>password</code></dt>
<dd>
<p>数据库的密码</p>
</dd>
<dt class="hdlist1"><code>max_pool_size</code></dt>
<dd>
<p>池的最大连接数 ， 默认为 <code>15</code></p>
</dd>
<dt class="hdlist1"><code>initial_pool_size</code></dt>
<dd>
<p>用于初始化池的连接数 ， 默认为 <code>3</code></p>
</dd>
<dt class="hdlist1"><code>min_pool_size</code></dt>
<dd>
<p>连接池的最小连接数</p>
</dd>
<dt class="hdlist1"><code>max_statements</code></dt>
<dd>
<p><code>PreparedStatement</code> 缓存的数量，默认值为 <code>0</code>。</p>
</dd>
<dt class="hdlist1"><code>max_statements_per_connection</code></dt>
<dd>
<p>每个链接 <code>PreparedStatement</code> 缓存的数量 ， 默认值为 <code>0</code>。</p>
</dd>
<dt class="hdlist1"><code>max_idle_time</code></dt>
<dd>
<p>空闲连接将关闭之前经过的秒数 ，默认值为 <code>0</code> (永不过期)。</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>其他连接池提供程序是：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Hikari</p>
</li>
<li>
<p>Agroal</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>与C3P0类似，它们可以通过在JSON配置对象上传递配置值来进行配置。
对于特殊情况，您不想将应用程序部署为 <em>fat jar</em> ，而是使用 vert.x 发行版运行，
如果您没有写权限将JDBC驱动程序添加到vert.x lib目录，
并使用 <code>-cp</code> 命令行标志传递它，则建议使用Agroal。</p>
</div>
<div class="paragraph">
<p>如果要配置任何其他C3P0属性，可以将文件 <code>c3p0.properties</code> 添加到类路径。</p>
</div>
<div class="paragraph">
<p>以下是配置服务的示例：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">JsonObject config = <span class="hljs-keyword">new</span> JsonObject()
  .put(<span class="hljs-string">&quot;url&quot;</span>, <span class="hljs-string">&quot;jdbc:hsqldb:mem:test?shutdown=true&quot;</span>)
  .put(<span class="hljs-string">&quot;driver_class&quot;</span>, <span class="hljs-string">&quot;org.hsqldb.jdbcDriver&quot;</span>)
  .put(<span class="hljs-string">&quot;max_pool_size&quot;</span>, <span class="hljs-number">30</span>);

SQLClient client = JDBCClient.createShared(vertx, config);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Hikari使用一组不同的属性：</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>jdbcUrl</code> JDBC的URL</p>
</li>
<li>
<p><code>driverClassName</code> JDBC驱动的类名</p>
</li>
<li>
<p><code>maximumPoolSize</code> 连接池的大小</p>
</li>
<li>
<p><code>username</code> 数据库用户名（<code>password</code> 数据库密码）</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>有关更多详细信息，
请参阅 <a href="https://github.com/brettwooldridge/HikariCP#configuration-knobs-baby">Hikari documentation</a> 。
另请参阅  <a href="https://agroal.github.io/">Agroal documentation</a> 以配置Agroal。</p>
</div>
<div id="_jdbc_drivers" class="paragraph">
<p>JDBC驱动程序</p>
</div>
<div class="paragraph">
<p>如果使用默认值 <code>DataSourceProvider</code>(依赖于c3p0)，则需要在类路径中复制JDBC驱动程序类。
如果您的应用程序打包为  <em>fat jar</em> ，请确保嵌入jdbc驱动程序。如果您的应用程序是通过 <code>vertx</code> 命令行启动的，请将JDBC驱动程序复制到 <code>${VERTX_HOME}/lib</code> 。</p>
</div>
<div class="paragraph">
<p>使用不同的连接池时，行为可能会有所不同。</p>
</div>
</div>
<div class="sect2">
<h3 id="_data_types"><a class="anchor" href="#_data_types"></a>数据类型</h3>
<div class="paragraph">
<p>由于Vert.x使用JSON作为其标准消息格式，因此客户端接受的数据类型会有很多限制。
您可以获取标准的：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>null</p>
</li>
<li>
<p>boolean</p>
</li>
<li>
<p>number</p>
</li>
<li>
<p>string</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>对于时态类型(时间、日期、时间戳)也有一个乐观强制转换，对于UUID也可以选择禁用。许多数据库支持uuid，但并非所有数据库都支持。
例如MySQL不支持它，所以建议使用VARCHAR(36)列。
对于其他引擎，可以使用客户端配置json启用UUID乐观强制转换，如下所示：</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{ "castUUID": true }</pre>
</div>
</div>
<div class="paragraph">
<p>当此配置存在时，uuid将作为本机类型处理。</p>
</div>
</div>
</div>
</div></div></div></div></div></div><footer class="jsx-1771812074"><div class="jsx-1771812074 container"><div class="jsx-1771812074 footer-nav-section"><div class="jsx-1771812074 footer-nav-list footer-logo"><a class="jsx-1771812074" href="/"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAxMjMyLjYgMzE1LjIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDEyMzIuNiAzMTUuMiIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHN0eWxlPi5zdDB7ZmlsbDojNzgyYTkxfTwvc3R5bGU+PHBhdGggZD0iTTEyMC45IDIxNC4yIDE5MC41IDBoNTIuM2wtOTguNSAyNzMuOEg5OC4yTDAgMGg1Mi4xbDY4LjggMjE0LjJ6bTI5MS4yLTYyLjZIMjk5LjZ2ODQuMkg0MzF2MzhIMjUyVjBoMTc3Ljd2MzguNEgyOTkuNlYxMTRoMTEyLjV2MzcuNnptODMuNy0xMTMuMkg1NDZjMTYuNS4zIDI5IDQuNCAzNy4zIDEyLjQgOC4zIDggMTIuNSAxOS40IDEyLjUgMzQgMCAxNC00LjUgMjUuMS0xMy41IDMzLjItOSA4LjEtMjEuNiAxMi4xLTM3LjYgMTIuMWgtMjcuMXYyNC4ybDg2LjEgMTE5LjVoNTF2LTIuNGwtNzcuMi0xMDYuN2MyNC45LTUuNSA0My4zLTIxLjcgNTIuNi0zNS45IDguMi0xMi42IDEzLjMtMjcuNyAxMy4zLTQ2IDAtMjYuOC04LjYtNDcuNC0yNS44LTYxLjVDNjAwLjUgNy4xIDU3Ni4xIDAgNTQ0LjUgMGgtOTYuM3YyNzMuOGg0Ny42Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0ibTEwNTIuMyAxNTcuNy00MS41IDYyLjcgMjkuNyA1My40aDg1LjF6Ii8+PGNpcmNsZSBjbGFzcz0ic3QwIiBjeD0iODI3LjkiIGN5PSIyNzQuNyIgcj0iNDAuNSIvPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Im0xMDM3IDAtNDcuNiA3NC4yTDk0OSAwaC04NGw4NS4zIDEzNS44LTY3LjEgMTA1LjdjNS43IDkuNSA5LjEgMjAuNSA5LjIgMzIuNGg1MC4xTDExMjEuMyAwSDEwMzd6Ii8+PHBhdGggZD0iTTc2My41IDI3My44Yy4xLTkuOSAyLjUtMTkuMiA2LjYtMjcuNVYzOC40aDg1LjRWMEg2MzguMnYzOC40aDg0LjZ2MjM1LjRoNDAuN3ptNDE0LTI2Ni45aC0xNS4zdjQyLjJoLTguNVY2LjloLTE1LjJWMGgzOXY2Ljl6TTExOTMgMGwxNC4yIDM3LjdMMTIyMS4zIDBoMTF2NDkuMWgtOC41VjMyLjlsLjgtMjEuNy0xNC41IDM3LjloLTYuMWwtMTQuNS0zNy44LjggMjEuNnYxNi4yaC04LjVWMGgxMS4yeiIvPjwvc3ZnPg==" alt="Vert.x Logo" class="jsx-1771812074"/></a></div><div class="jsx-1771812074 footer-nav-list"><h5 class="jsx-1771812074">Eclipse Vert.x</h5><ul class="jsx-1771812074 "><li class="jsx-1771812074"><a class="jsx-1771812074 navbar-menu-item" href="/docs/">文档</a></li><li class="jsx-1771812074"><a class="jsx-1771812074" href="/download/">下载</a></li><li class="jsx-1771812074"><a class="jsx-1771812074" href="/blog/">博客</a></li><li class="jsx-1771812074"><a class="jsx-1771812074" href="/community/">社区</a></li><li class="jsx-1771812074"><a class="jsx-1771812074" href="/translation/">翻译团队</a></li><li class="jsx-1771812074"><a href="https://github.com/eclipse-vertx/vert.x" class="jsx-1771812074">GitHub</a></li><li class="jsx-1771812074"><a href="https://github.com/vertx-china/vertx-web-site" class="jsx-1771812074">翻译GitHub</a></li></ul></div><div class="jsx-1771812074 footer-nav-list"><h5 class="jsx-1771812074">资源</h5><ul class="jsx-1771812074 "><li class="jsx-1771812074"><a class="jsx-1771812074" href="/faq/">答疑</a></li><li class="jsx-1771812074"><a class="jsx-1771812074" href="/channels/">联系渠道</a></li><li class="jsx-1771812074"><a href="https://how-to.vertx.io/" class="jsx-1771812074">操作指南</a></li><li class="jsx-1771812074"><a href="https://start.vertx.io/" class="jsx-1771812074">应用生成器</a></li></ul></div><div class="jsx-1771812074 footer-nav-list"><h5 class="jsx-1771812074">Eclipse</h5><ul class="jsx-1771812074 "><li class="jsx-1771812074"><a href="https://www.eclipse.org/" class="jsx-1771812074">Eclipse 基金会</a></li><li class="jsx-1771812074"><a href="https://www.eclipse.org/legal/privacy.php" class="jsx-1771812074">隐私政策</a></li><li class="jsx-1771812074"><a href="https://www.eclipse.org/legal/termsofuse.php" class="jsx-1771812074">使用条款</a></li><li class="jsx-1771812074"><a href="https://www.eclipse.org/legal/copyright.php" class="jsx-1771812074">版权代理</a></li><li class="jsx-1771812074"><a href="https://www.eclipse.org/legal/" class="jsx-1771812074">法律资源</a></li></ul></div></div><div class="jsx-1771812074 footer-copyright"><div class="jsx-1771812074 footer-copyright-remarks">© <!-- -->2021<!-- --> Eclipse Vert.x™<br class="jsx-1771812074"/>Eclipse Vert.x™ 是开源的，并在<a href="https://creativecommons.org/licenses/by-sa/3.0/" target="_blank" rel="noopener noreferrer" class="jsx-1771812074">Eclipse Public License 2.0</a>和<a href="https://www.apache.org/licenses/LICENSE-2.0.html" target="_blank" rel="noopener noreferrer" class="jsx-1771812074">Apache License 2.0</a>协议下获得了双重许可。<br class="jsx-1771812074 footer-copyright-break"/>网站由 <a href="https://michelkraemer.com" target="_blank" rel="noopener noreferrer" class="jsx-1771812074">Michel Krämer</a> 设计。</div><div class="jsx-1771812074 footer-copyright-eclipse-logo"><a href="https://www.eclipse.org/" target="_blank" rel="noopener noreferrer" class="jsx-1771812074"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAyODEuMyA5MS4xIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAyODEuMyA5MS4xIiB4bWw6c3BhY2U9InByZXNlcnZlIj48c3R5bGU+LnN0MHtmaWxsOiNmNzk0MjJ9LnN0MXtmaWxsOiMzZDNjM2J9PC9zdHlsZT48ZyBpZD0iTGF5ZXJfMV8xXyI+PHBhdGggY2xhc3M9InN0MCIgZD0iTTI2NS43IDg0IDI1NyA3M2gtMi43djE3LjdoMy4zdi0xMmw5LjMgMTJoMi4xVjczaC0zLjN2MTF6bS0zMi40LTguM2M0LjIgMCA1LjggMy4zIDUuOCA2LjNzLTEuNiA2LTUuOCA2LTUuNy0zLjEtNS44LTYgMS43LTYuMyA1LjgtNi4zem0wLTNjLTYuMSAwLTkuMSA0LjctOS4xIDkuMyAwIDQuNyAyLjkgOS4xIDkuMSA5LjFzOS00LjYgOS4xLTkuMi0zLTkuMi05LjEtOS4yem0tMjEuMiAxOFY3M2gtMy4zdjE3LjdoMy4zem0tMjMuNiAwaDMuM1Y3Nmg1LjZ2LTNoLTE0LjZ2M2g1LjZsLjEgMTQuN3ptLTE4LjktNi41SDE2M2wzLjMtNy42IDMuMyA3LjZ6bTIuOCA2LjVoMy42TDE2OC4yIDczaC0zLjZsLTggMTcuN2gzLjZsMS41LTMuM2g5LjNsMS40IDMuM3ptLTM4LTE0LjZoMy42YzMuOSAwIDUuNSAyLjggNS41IDUuNS4xIDIuOC0xLjUgNS44LTUuNSA1LjhoLTMuNlY3Ni4xem0zLjctMy4xaC02Ljl2MTcuN2g2LjljNi4yIDAgOC45LTQuNSA4LjktOXMtMi44LTguNy04LjktOC43em0tMjIuNCAxMUwxMDcgNzNoLTIuN3YxNy43aDMuM3YtMTJsOS4zIDEyaDIuMVY3M2gtMy4zdjExek04OC4yIDczdjEwLjJjMCAzLTEuNiA0LjktNC4zIDQuOXMtNC42LTEuNy00LjYtNC45VjczSDc2djEwLjFjMCA1LjMgMy42IDcuOSA3LjkgNy45IDQuNCAwIDcuNy0yLjcgNy43LTcuOVY3M2gtMy40em0tMzMgMi43YzQuMiAwIDUuOCAzLjMgNS44IDYuM3MtMS42IDYtNS44IDYtNS43LTMuMS01LjgtNiAxLjctNi4zIDUuOC02LjN6bTAtM2MtNi4xIDAtOS4xIDQuNy05LjEgOS4zczIuOSA5LjEgOS4xIDkuMSA5LTQuNiA5LjEtOS4yLTMtOS4yLTkuMS05LjJ6bS0yOS43IDE4di02LjVoOC45di0zLjFoLTguOXYtNC44aDkuNFY3M0gyMi4ydjE3LjZoMy4zeiIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yNjkuNCA1NC40aC0yMi4ydi04LjloMjEuNHYtNi45aC0yMS40di05LjFoMjIuMnYtNy4yaC0yOS42djM5LjVoMjkuNnYtNy40em0tNDAtMjUuNmMtMy02LjEtOS40LTcuOC0xNS41LTcuOC03LjMgMC0xNS4zIDMuNC0xNS4zIDExLjUgMCA4LjkgNy40IDExIDE1LjUgMTIgNS4yLjYgOS4xIDIuMSA5LjEgNS44IDAgNC4zLTQuNCA1LjktOS4xIDUuOXMtOS40LTEuOS0xMS4xLTYuM2wtNi4yIDMuMmMyLjkgNy4yIDkuMSA5LjcgMTcuMiA5LjcgOC44IDAgMTYuNi0zLjggMTYuNi0xMi42IDAtOS40LTcuNy0xMS42LTE1LjktMTIuNi00LjctLjYtOC44LTEuNS04LjgtNSAwLTIuOSAyLjYtNS4yIDguMi01LjIgNC4zIDAgOCAyLjIgOS40IDQuNGw1LjktM3pNMTc2IDIyLjJjLTYuMi0uMS0xMi40IDAtMTguNiAwdjM5LjVoNy40VjUwLjFIMTc2YzE5LjQgMCAxOS40LTI3LjkgMC0yNy45em0tMTEuMSA3LjFIMTc2YzkuNSAwIDkuNSAxNCAwIDE0aC0xMS4ybC4xLTE0em0tMTggMzIuNVYyMi4yaC03LjR2MzkuNWw3LjQuMXptLTQ0LTM5LjZ2MzkuNWgyNy43di02LjloLTIwLjNWMjIuMmgtNy40ek05MC43IDUxLjdjLTIuNyAyLjUtNi4yIDQtOS45IDQtOS44IDAtMTMuNS02LjgtMTMuNi0xMy40czQuMS0xMy43IDEzLjYtMTMuN2MzLjUtLjEgNyAxLjMgOS41IDMuN2w1LTQuOGMtMy44LTMuOS05LjEtNi0xNC41LTYtMTQuMyAwLTIxIDEwLjUtMjAuOSAyMC44czYuMyAyMC4zIDIwLjkgMjAuM2M1LjYuMSAxMS0yIDE1LTUuOWwtNS4xLTV6bS0zOSAyLjdIMjkuNXYtOC45aDIxLjR2LTYuOUgyOS41di05LjFoMjIuMnYtNy4ySDIyLjJ2MzkuNWgyOS42bC0uMS03LjR6Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTkuOCAxOC4yQzE4LjggNC4xIDM2LjktLjggNTIuMSA2bC0xLS43QzM1LjctNC42IDE1LjItLjEgNS4zIDE1LjNzLTUuNCAzNS45IDEwIDQ1LjhsMS4xLjZDMy44IDUwLjguOCAzMi4zIDkuOCAxOC4yeiIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yNzIuMiAyNi4xYzAtMi41IDIuMS00LjYgNC42LTQuNiAyLjUgMCA0LjYgMi4xIDQuNiA0LjYgMCAyLjUtMi4xIDQuNi00LjYgNC42LTIuNiAwLTQuNi0yLjEtNC42LTQuNnptOC42IDBjMC0yLjItMS44LTQuMS00LTQuMXMtNC4xIDEuOC00LjEgNC4xYzAgMi4yIDEuNyA0IDMuOSA0LjFoLjFjMi4zIDAgNC4xLTEuOCA0LjEtNC4xem0tNi0yLjVoMi4zYzEuMSAwIDEuOS41IDEuOSAxLjYgMCAuNy0uNCAxLjMtMS4xIDEuNWwxLjIgMS43aC0xLjRsLTEtMS41aC0uN3YxLjVoLTEuMWwtLjEtNC44em0yLjIgMi4zYy41IDAgLjgtLjMuOC0uN3MtLjMtLjctLjgtLjdoLTF2MS4zbDEgLjF6Ii8+PC9nPjwvc3ZnPg==" alt="Eclipse foundation Logo" class="jsx-1771812074"/></a></div></div></div></footer></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"slug":"vertx-jdbc-client/java","title":"Vert.x JDBC 客户端","fallbackGitHubStars":null,"toc":"\u003cdiv id=\"toc\" class=\"toc\"\u003e\n\u003cdiv id=\"toctitle\"\u003eTable of Contents\u003c/div\u003e\n\u003cul class=\"sectlevel1\"\u003e\n\u003cli\u003e\u003ca href=\"#_using_the_sql_client_api\"\u003e使用Sql 客户端 API\u003c/a\u003e\n\u003cul class=\"sectlevel2\"\u003e\n\u003cli\u003e\u003ca href=\"#_creating_a_db_pool\"\u003e创建一个数据库连接池\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_retrieving_the_generated_keys\"\u003eRetrieving the generated keys\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_working_with_procedures_and_functions\"\u003eWorking with Procedures and Functions\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_legacy_jdbc_client_api\"\u003e旧版JDBC客户端API\u003c/a\u003e\n\u003cul class=\"sectlevel2\"\u003e\n\u003cli\u003e\u003ca href=\"#_getting_a_connection\"\u003e建立连接\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_simple_sql_operations\"\u003e简单的SQL操作\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_creating_a_the_client\"\u003e创建一个客户端\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_closing_the_client\"\u003e关闭客户端\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_the_sql_connection\"\u003eSQL连接\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_configuration\"\u003e配置项\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_data_types\"\u003e数据类型\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e","contents":"\u003ch1\u003eVert.x JDBC 客户端\u003c/h1\u003e\n\n\u003cdiv id=\"preamble\"\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eVerx.x JDBC 客户端允许您使用 Vert.x 应用程序中的异步API\n与任何符合JDBC协议的数据库进行交互。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eJDBC 客户端 API 接口描述请参考 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/jdbc/JDBCClient.html\"\u003eJDBCClient\u003c/a\u003e\u003c/code\u003e。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e如需使用Vert.x JDBC Client，请先将以下依赖添加到您的构建描述中的 \u003cem\u003e依赖\u003c/em\u003e 部分 ：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eMaven（在您的 \u003ccode\u003epom.xml\u003c/code\u003e 文件中添加）：\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-xml\" data-lang=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\n \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003eio.vertx\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003evertx-jdbc-client\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e4.2.0\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eGradle（在您的 \u003ccode\u003ebuild.gradle\u003c/code\u003e 文件中添加）：\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-groovy\" data-lang=\"groovy\"\u003ecompile \u003cspan class=\"hljs-string\"\u003e\u0026#x27;io.vertx:vertx-jdbc-client:4.2.0\u0026#x27;\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_using_the_sql_client_api\"\u003e\u003ca class=\"anchor\" href=\"#_using_the_sql_client_api\"\u003e\u003c/a\u003e使用Sql 客户端 API\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eSQL客户端是使用SQL数据库通信的vert.x响应式API，\n已经实现了MySQL、PostgreSQL、MSSQL和IBM DB2等多个流行数据的异步驱动程序。\n但是，由于还有许多其他数据库没有异步驱动程序，\n因此JDBC客户端实现了相同的API，直接使用JDBC驱动，以实现数据库的异步支持。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_creating_a_db_pool\"\u003e\u003ca class=\"anchor\" href=\"#_creating_a_db_pool\"\u003e\u003c/a\u003e创建一个数据库连接池\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e一切始于连接池，创建一个连接池是非常简单的。最简单的例子如下：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eJDBCPool pool = JDBCPool.pool(vertx, config);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e在这种情况下，我们将重用JDBC client 的 API 来创建池。\n该配置为自由格式，用户需要查找对应JDBC连接池所需的属性。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e对于类型安全的替代方案， 存在第二种工厂方法。\n第二种工厂方法可确保配置正确(因为其属性和类型已由编译器验证)，\n但当前仅适用于Agroal连接池。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eJDBCPool pool = JDBCPool.pool(\n  vertx,\n  \u003cspan class=\"hljs-comment\"\u003e// configure the connection\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JDBCConnectOptions()\n    \u003cspan class=\"hljs-comment\"\u003e// H2 connection string\u003c/span\u003e\n    .setJdbcUrl(\u003cspan class=\"hljs-string\"\u003e\u0026quot;jdbc:h2:~/test\u0026quot;\u003c/span\u003e)\n    \u003cspan class=\"hljs-comment\"\u003e// username\u003c/span\u003e\n    .setUser(\u003cspan class=\"hljs-string\"\u003e\u0026quot;sa\u0026quot;\u003c/span\u003e)\n    \u003cspan class=\"hljs-comment\"\u003e// password\u003c/span\u003e\n    .setPassword(\u003cspan class=\"hljs-string\"\u003e\u0026quot;\u0026quot;\u003c/span\u003e),\n  \u003cspan class=\"hljs-comment\"\u003e// configure the pool\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e PoolOptions()\n    .setMaxSize(\u003cspan class=\"hljs-number\"\u003e16\u003c/span\u003e)\n);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect3\"\u003e\n\u003ch4 id=\"_using_the_pool\"\u003e\u003ca class=\"anchor\" href=\"#_using_the_pool\"\u003e\u003c/a\u003e使用连接池\u003c/h4\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e有了链接池后，就可以开始使用数据库了，连接池以两种模式运行：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"olist arabic\"\u003e\n\u003col class=\"arabic\"\u003e\n\u003cli\u003e\n\u003cp\u003e托管连接模式\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e手动连接方式\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e在托管连接模式下工作时，\n作为用户，您无需关心获取连接和将其返回到池中。\n可以直接对该链接池运行查询，并且该链接池可确保在查询终止后获取并返回连接。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003epool\n  .query(\u003cspan class=\"hljs-string\"\u003e\u0026quot;SELECT * FROM user\u0026quot;\u003c/span\u003e)\n  .execute()\n  .onFailure(e -\u0026gt; {\n    \u003cspan class=\"hljs-comment\"\u003e// handle the failure\u003c/span\u003e\n  })\n  .onSuccess(rows -\u0026gt; {\n    \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e (Row row : rows) {\n      System.out.println(row.getString(\u003cspan class=\"hljs-string\"\u003e\u0026quot;FIRST_NAME\u0026quot;\u003c/span\u003e));\n    }\n  });\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e这也适用于准备好的sql语句：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003epool\n  .preparedQuery(\u003cspan class=\"hljs-string\"\u003e\u0026quot;SELECT * FROM user WHERE emp_id \u0026gt; ?\u0026quot;\u003c/span\u003e)\n  \u003cspan class=\"hljs-comment\"\u003e// the emp id to look up\u003c/span\u003e\n  .execute(Tuple.of(\u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e))\n  .onFailure(e -\u0026gt; {\n    \u003cspan class=\"hljs-comment\"\u003e// handle the failure\u003c/span\u003e\n  })\n  .onSuccess(rows -\u0026gt; {\n    \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e (Row row : rows) {\n      System.out.println(row.getString(\u003cspan class=\"hljs-string\"\u003e\u0026quot;FIRST_NAME\u0026quot;\u003c/span\u003e));\n    }\n  });\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e使用此模式非常方便，因为它使您可以专注于业务逻辑，而不是连接管理。\n有时可能需要保留秩序和因果关系。\n在这种情况下，我们需要在手动连接模式下执行查询：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003epool\n  .getConnection()\n  .onFailure(e -\u0026gt; {\n    \u003cspan class=\"hljs-comment\"\u003e// failed to get a connection\u003c/span\u003e\n  })\n  .onSuccess(conn -\u0026gt; {\n    conn\n      .query(\u003cspan class=\"hljs-string\"\u003e\u0026quot;SELECT * FROM user\u0026quot;\u003c/span\u003e)\n      .execute()\n      .onFailure(e -\u0026gt; {\n        \u003cspan class=\"hljs-comment\"\u003e// handle the failure\u003c/span\u003e\n\n        \u003cspan class=\"hljs-comment\"\u003e// very important! don\u0026#x27;t forget to return the connection\u003c/span\u003e\n        conn.close();\n      })\n      .onSuccess(rows -\u0026gt; {\n        \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e (Row row : rows) {\n          System.out.println(row.getString(\u003cspan class=\"hljs-string\"\u003e\u0026quot;FIRST_NAME\u0026quot;\u003c/span\u003e));\n        }\n\n        \u003cspan class=\"hljs-comment\"\u003e// very important! don\u0026#x27;t forget to return the connection\u003c/span\u003e\n        conn.close();\n      });\n  });\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e当然，预准备的sql语句也适用于此模式：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003epool\n  .getConnection()\n  .onFailure(e -\u0026gt; {\n    \u003cspan class=\"hljs-comment\"\u003e// failed to get a connection\u003c/span\u003e\n  })\n  .onSuccess(conn -\u0026gt; {\n    conn\n      .preparedQuery(\u003cspan class=\"hljs-string\"\u003e\u0026quot;SELECT * FROM user WHERE emp_id \u0026gt; ?\u0026quot;\u003c/span\u003e)\n      \u003cspan class=\"hljs-comment\"\u003e// the emp_id to look up\u003c/span\u003e\n      .execute(Tuple.of(\u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e))\n      .onFailure(e -\u0026gt; {\n        \u003cspan class=\"hljs-comment\"\u003e// handle the failure\u003c/span\u003e\n\n        \u003cspan class=\"hljs-comment\"\u003e// very important! don\u0026#x27;t forget to return the connection\u003c/span\u003e\n        conn.close();\n      })\n      .onSuccess(rows -\u0026gt; {\n        \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e (Row row : rows) {\n          System.out.println(row.getString(\u003cspan class=\"hljs-string\"\u003e\u0026quot;FIRST_NAME\u0026quot;\u003c/span\u003e));\n        }\n\n        \u003cspan class=\"hljs-comment\"\u003e// very important! don\u0026#x27;t forget to return the connection\u003c/span\u003e\n        conn.close();\n      });\n  });\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_retrieving_the_generated_keys\"\u003e\u003ca class=\"anchor\" href=\"#_retrieving_the_generated_keys\"\u003e\u003c/a\u003eRetrieving the generated keys\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eGenerated keys is a common feature of JDBC drivers. The pool allows you to retrieve the keys using a special property:\n\u003ccode\u003eJDBCPool.GENERATED_KEYS\u003c/code\u003e. For example:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eString sql = \u003cspan class=\"hljs-string\"\u003e\u0026quot;INSERT INTO insert_table (FNAME, LNAME) VALUES (?, ?)\u0026quot;\u003c/span\u003e;\n\npool\n  .preparedQuery(sql)\n  .execute(Tuple.of(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Paulo\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;Lopes\u0026quot;\u003c/span\u003e))\n  .onSuccess(rows -\u0026gt; {\n    \u003cspan class=\"hljs-comment\"\u003e// the generated keys are returned as an extra row\u003c/span\u003e\n    Row lastInsertId = rows.property(JDBCPool.GENERATED_KEYS);\n    \u003cspan class=\"hljs-comment\"\u003e// just refer to the position as usual:\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003elong\u003c/span\u003e newId = lastInsertId.getLong(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e);\n  });\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_working_with_procedures_and_functions\"\u003e\u003ca class=\"anchor\" href=\"#_working_with_procedures_and_functions\"\u003e\u003c/a\u003eWorking with Procedures and Functions\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eUsers that have used JDBC before are aware that in order to call either a function or a stored procedure, one must use\nthe interface \u003ccode\u003eCallableStatement\u003c/code\u003e. This abstraction is, for most database engines, synthetic as popular engines like\n\u003ccode\u003ePostgreSQL\u003c/code\u003e or \u003ccode\u003eMySQL\u003c/code\u003e do not really have any special command to differentiate from callable statements from any other\nregular statement.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe existing SQL client api was designed to be closed to what the reality of wire protocols shows, rather than adapt to\nthe JDBC spec, therefore you will not find any specific way to deal with callable statements. This design choice\nintroduces some complexities on the JDBC SQL client, as we need to adapt a regular call to respect the JDBC spec\nrequirements and be compatible with clients out there.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect3\"\u003e\n\u003ch4 id=\"_simple_in_mapping\"\u003e\u003ca class=\"anchor\" href=\"#_simple_in_mapping\"\u003e\u003c/a\u003eSimple IN mapping\u003c/h4\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eMapping simple \u003ccode\u003eIN\u003c/code\u003e parameters is trivial. Consider the following procedure:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-sql\" data-lang=\"sql\"\u003e\u003cspan class=\"hljs-keyword\"\u003ecreate\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eprocedure\u003c/span\u003e new_customer(firstname \u003cspan class=\"hljs-type\"\u003evarchar\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e), lastname \u003cspan class=\"hljs-type\"\u003evarchar\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e))\n \u003cspan class=\"hljs-keyword\"\u003emodifies\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003esql\u003c/span\u003e data\n \u003cspan class=\"hljs-keyword\"\u003einsert\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003einto\u003c/span\u003e customers \u003cspan class=\"hljs-keyword\"\u003evalues\u003c/span\u003e (\u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e, firstname, lastname, \u003cspan class=\"hljs-built_in\"\u003ecurrent_timestamp\u003c/span\u003e)\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIn order to call this procedure from the JDBC client, you would write some code as:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eString sql = \u003cspan class=\"hljs-string\"\u003e\u0026quot;{call new_customer(?, ?)}\u0026quot;\u003c/span\u003e;\n\npool\n  .preparedQuery(sql)\n  \u003cspan class=\"hljs-comment\"\u003e// by default the \u0026quot;IN\u0026quot; argument types are extracted from the\u003c/span\u003e\n  \u003cspan class=\"hljs-comment\"\u003e// type of the data in the tuple, as well as the order\u003c/span\u003e\n  .execute(Tuple.of(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Paulo\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;Lopes\u0026quot;\u003c/span\u003e))\n  .onFailure(e -\u0026gt; {\n    \u003cspan class=\"hljs-comment\"\u003e// handle the failure\u003c/span\u003e\n  })\n  .onSuccess(rows -\u0026gt; {\n    \u003cspan class=\"hljs-comment\"\u003e// ... success handler\u003c/span\u003e\n  });\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect3\"\u003e\n\u003ch4 id=\"_complex_in_out_mapping\"\u003e\u003ca class=\"anchor\" href=\"#_complex_in_out_mapping\"\u003e\u003c/a\u003eComplex IN / OUT mapping\u003c/h4\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe previous example, showed how to create simple queries. However, there are some limitations with it. It will assume\nthat arguments are always of type \u003ccode\u003eIN\u003c/code\u003e and that the argument type is the corresponding java type of the argument, which\nwill not always work, for example, when dealing with \u003ccode\u003enull\u003c/code\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIn this case, the client has a helper \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/jdbcclient/SqlOutParam.html\"\u003eSqlOutParam\u003c/a\u003e\u003c/code\u003e that allows you to explicitly tag the\ndesired type of the argument. Not only the data type but also if it is a \u003ccode\u003eIN\u003c/code\u003e or a \u003ccode\u003eOUT\u003c/code\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eConsider the following procedure:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-sql\" data-lang=\"sql\"\u003e\u003cspan class=\"hljs-keyword\"\u003ecreate\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eprocedure\u003c/span\u003e customer_lastname(\u003cspan class=\"hljs-keyword\"\u003eIN\u003c/span\u003e firstname \u003cspan class=\"hljs-type\"\u003evarchar\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e), \u003cspan class=\"hljs-keyword\"\u003eOUT\u003c/span\u003e lastname \u003cspan class=\"hljs-type\"\u003evarchar\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e))\n \u003cspan class=\"hljs-keyword\"\u003emodifies\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003esql\u003c/span\u003e data\n \u003cspan class=\"hljs-keyword\"\u003eselect\u003c/span\u003e lastname \u003cspan class=\"hljs-keyword\"\u003einto\u003c/span\u003e lastname \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e customers \u003cspan class=\"hljs-keyword\"\u003ewhere\u003c/span\u003e firstname \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e firstname\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThis procedure will return all last names, from all customers, when looking for a first name. So we will need to map\nboth \u003ccode\u003eIN\u003c/code\u003e parameters as well as \u003ccode\u003eOUT\u003c/code\u003e parameters.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eString sql = \u003cspan class=\"hljs-string\"\u003e\u0026quot;{call customer_lastname(?, ?)}\u0026quot;\u003c/span\u003e;\n\npool\n  .preparedQuery(sql)\n  \u003cspan class=\"hljs-comment\"\u003e// by default the \u0026quot;IN\u0026quot; argument types are extracted from the\u003c/span\u003e\n  \u003cspan class=\"hljs-comment\"\u003e// type of the data in the tuple, as well as the order\u003c/span\u003e\n  \u003cspan class=\"hljs-comment\"\u003e//\u003c/span\u003e\n  \u003cspan class=\"hljs-comment\"\u003e// Note that we now also declare the output parameter and it\u0026#x27;s\u003c/span\u003e\n  \u003cspan class=\"hljs-comment\"\u003e// type. The type can be a \u0026quot;String\u0026quot;, \u0026quot;int\u0026quot; or \u0026quot;JDBCType\u0026quot; constant\u003c/span\u003e\n  .execute(Tuple.of(\u003cspan class=\"hljs-string\"\u003e\u0026quot;John\u0026quot;\u003c/span\u003e, SqlOutParam.OUT(JDBCType.VARCHAR)))\n  .onFailure(e -\u0026gt; {\n    \u003cspan class=\"hljs-comment\"\u003e// handle the failure\u003c/span\u003e\n  })\n  .onSuccess(rows -\u0026gt; {\n    \u003cspan class=\"hljs-comment\"\u003e// we can verify if there was a output received from the callable statement\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (rows.property(JDBCPool.OUTPUT)) {\n      \u003cspan class=\"hljs-comment\"\u003e// and then iterate the results\u003c/span\u003e\n      \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e (Row row : rows) {\n        System.out.println(row.getString(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e));\n      }\n    }\n  });\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eSometimes, you will need to map both \u003ccode\u003eIN\u003c/code\u003e and \u003ccode\u003eOUT\u003c/code\u003e parameters to the same variable. Again, it is all handled by the\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/jdbcclient/SqlOutParam.html\"\u003eSqlOutParam\u003c/a\u003e\u003c/code\u003e helper.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eSqlOutParam param;\n\n\u003cspan class=\"hljs-comment\"\u003e// map IN as \u0026quot;int\u0026quot; as well as \u0026quot;OUT\u0026quot; as VARCHAR\u003c/span\u003e\nparam = SqlOutParam.INOUT(\u003cspan class=\"hljs-number\"\u003e123456\u003c/span\u003e, JDBCType.VARCHAR);\n\u003cspan class=\"hljs-comment\"\u003e// or\u003c/span\u003e\nparam = SqlOutParam.INOUT(\u003cspan class=\"hljs-number\"\u003e123456\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;VARCHAR\u0026quot;\u003c/span\u003e);\n\n\u003cspan class=\"hljs-comment\"\u003e// and then just add to the tuple as usual:\u003c/span\u003e\nTuple.of(param);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_legacy_jdbc_client_api\"\u003e\u003ca class=\"anchor\" href=\"#_legacy_jdbc_client_api\"\u003e\u003c/a\u003e旧版JDBC客户端API\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e现在已弃用Vert.x 3中创建的JDBC客户端API，而应使用新的SQL客户端API。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e在Vert.x 4的生命周期内仍将支持该功能，\n以允许将应用程序迁移到新的SQL Client API。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_getting_a_connection\"\u003e\u003ca class=\"anchor\" href=\"#_getting_a_connection\"\u003e\u003c/a\u003e建立连接\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e创建客户端后，您可以通过 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/sql/SQLClient.html#getConnection-io.vertx.core.Handler-\"\u003egetConnection\u003c/a\u003e\u003c/code\u003e\n以获取一个连接。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e当池中有连接处于准备（ready）状态时，将在处理器（handler）中返回。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eclient.getConnection(res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n\n    SQLConnection connection = res.result();\n\n    connection.query(\u003cspan class=\"hljs-string\"\u003e\u0026quot;SELECT * FROM some_table\u0026quot;\u003c/span\u003e, res2 -\u0026gt; {\n      \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res2.succeeded()) {\n\n        ResultSet rs = res2.result();\n        \u003cspan class=\"hljs-comment\"\u003e// Do something with results\u003c/span\u003e\n      }\n    });\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    \u003cspan class=\"hljs-comment\"\u003e// Failed to get connection - deal with it\u003c/span\u003e\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e该连接是 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/sql/SQLConnection.html\"\u003eSQLConnection\u003c/a\u003e\u003c/code\u003e 的一个实例，\n它是一个通用接口，不仅由Vert.x JDBC客户端使用。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您可以在 \u003ca href=\"http://vertx.io/docs/vertx-sql-common/java/\"\u003e常见的sql接口\u003c/a\u003e 文档中学习如何使用它。\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_simple_sql_operations\"\u003e\u003ca class=\"anchor\" href=\"#_simple_sql_operations\"\u003e\u003c/a\u003e简单的SQL操作\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e有时，您将需要运行单个SQL操作，\n例如：单行查询或对一组行的更新，这些操作不需要成为事务的一部分，也不必依赖于上一个或下一个操作。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e对于这些情况，客户端提供了无模板的API \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/sql/SQLOperations.html\"\u003eSQLOperations\u003c/a\u003e\u003c/code\u003e ，\n该接口将为您执行以下步骤：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"olist arabic\"\u003e\n\u003col class=\"arabic\"\u003e\n\u003cli\u003e\n\u003cp\u003e从连接池获取连接\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e执行您的动作\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e关闭并将连接返回到连接池\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e从`USERS`表中加载用户的示例如下：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eclient.query(\u003cspan class=\"hljs-string\"\u003e\u0026quot;SELECT * FROM USERS\u0026quot;\u003c/span\u003e, ar -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.succeeded()) {\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.succeeded()) {\n      ResultSet result = ar.result();\n    } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n      \u003cspan class=\"hljs-comment\"\u003e// Failed!\u003c/span\u003e\n    }\n    \u003cspan class=\"hljs-comment\"\u003e// NOTE that you don\u0026#x27;t need to worry about\u003c/span\u003e\n    \u003cspan class=\"hljs-comment\"\u003e// the connection management (e.g.: close)\u003c/span\u003e\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您可以通过一个简单的 \"shot\" 方法调用来执行以下操作：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/sql/SQLClient.html#query-java.lang.String-io.vertx.core.Handler-\"\u003equery\u003c/a\u003e\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/sql/SQLClient.html#queryWithParams-java.lang.String-io.vertx.core.json.JsonArray-io.vertx.core.Handler-\"\u003equeryWithParams\u003c/a\u003e\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/sql/SQLOperations.html#querySingle-java.lang.String-io.vertx.core.Handler-\"\u003equerySingle\u003c/a\u003e\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/sql/SQLOperations.html#querySingleWithParams-java.lang.String-io.vertx.core.json.JsonArray-io.vertx.core.Handler-\"\u003equerySingleWithParams\u003c/a\u003e\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/sql/SQLClient.html#update-java.lang.String-io.vertx.core.Handler-\"\u003eupdate\u003c/a\u003e\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/sql/SQLClient.html#updateWithParams-java.lang.String-io.vertx.core.json.JsonArray-io.vertx.core.Handler-\"\u003eupdateWithParams\u003c/a\u003e\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/sql/SQLClient.html#call-java.lang.String-io.vertx.core.Handler-\"\u003ecall\u003c/a\u003e\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/sql/SQLClient.html#callWithParams-java.lang.String-io.vertx.core.json.JsonArray-io.vertx.core.json.JsonArray-io.vertx.core.Handler-\"\u003ecallWithParams\u003c/a\u003e\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e有关这些API的更多详细信息，请参阅 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/sql/SQLOperations.html\"\u003eSQLOperations\u003c/a\u003e\u003c/code\u003e 接口。\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_creating_a_the_client\"\u003e\u003ca class=\"anchor\" href=\"#_creating_a_the_client\"\u003e\u003c/a\u003e创建一个客户端\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e有几种创建客户端的方法。让我们把它们都过一遍。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect3\"\u003e\n\u003ch4 id=\"_using_default_shared_data_source\"\u003e\u003ca class=\"anchor\" href=\"#_using_default_shared_data_source\"\u003e\u003c/a\u003e使用默认的共享数据源\u003c/h4\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e在大多数情况下，您需要在不同的客户端实例之间共享数据源。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e例如，您通过部署多个Verticle实例来扩展应用程序，并且希望每个Verticle实例共享相同的数据源，这样就不会有多个链接池。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您可以按照以下步骤进行操作：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eSQLClient client = JDBCClient.createShared(vertx, config);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e第一次调用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/jdbc/JDBCClient.html#createShared-io.vertx.core.Vertx-io.vertx.core.json.JsonObject-\"\u003eJDBCClient.createShared\u003c/a\u003e\u003c/code\u003e\n将实际创建数据源，并使用指定的配置。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e随后的调用将返回使用相同数据源的新客户端实例，因此将不会使用该配置。\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect3\"\u003e\n\u003ch4 id=\"_specifying_a_data_source_name\"\u003e\u003ca class=\"anchor\" href=\"#_specifying_a_data_source_name\"\u003e\u003c/a\u003e指定数据源名称\u003c/h4\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您可以创建一个指定数据源名称的客户端，如下所示：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eSQLClient client = JDBCClient.createShared(vertx, config, \u003cspan class=\"hljs-string\"\u003e\u0026quot;MyDataSource\u0026quot;\u003c/span\u003e);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e如果使用相同的Vert.x实例并指定相同的数据源名称创建了不同的客户端，\n则它们将共享相同的数据源。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e第一次调用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/jdbc/JDBCClient.html#createShared-io.vertx.core.Vertx-io.vertx.core.json.JsonObject-\"\u003eJDBCClient.createShared\u003c/a\u003e\u003c/code\u003e\n将实际创建数据源，并使用指定的配置。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e后续调用将返回使用相同数据源的新客户端实例，因此将不使用该配置。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e如果您希望不同的客户端组具有不同的数据源(例如，它们与不同的数据库进行交互)，请使用这种创建方式。\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect3\"\u003e\n\u003ch4 id=\"_creating_a_client_with_a_non_shared_data_source\"\u003e\u003ca class=\"anchor\" href=\"#_creating_a_client_with_a_non_shared_data_source\"\u003e\u003c/a\u003e使用非共享数据源创建客户端\u003c/h4\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e在大多数情况下，您将需要在不同的客户端实例之间共享数据源。\n但是，您可能想要创建一个不与任何其他客户端共享其数据源的客户端实例。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e在这种情况下，\n您可以使用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/jdbc/JDBCClient.html#create-io.vertx.core.Vertx-io.vertx.core.json.JsonObject-\"\u003eJDBCClient.create\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eSQLClient client = JDBCClient.create(vertx, config);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e这等效于 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/jdbc/JDBCClient.html#createShared-io.vertx.core.Vertx-io.vertx.core.json.JsonObject-java.lang.String-\"\u003eJDBCClient.createShared\u003c/a\u003e\u003c/code\u003e\n每次使用唯一的数据源名称进行调用。\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect3\"\u003e\n\u003ch4 id=\"_specifying_a_data_source\"\u003e\u003ca class=\"anchor\" href=\"#_specifying_a_data_source\"\u003e\u003c/a\u003e指定数据源\u003c/h4\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e如果您已经有一个预先存在的数据源，则还可以直接指定以下内容来创建客户端：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eSQLClient client = JDBCClient.create(vertx, dataSource);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_closing_the_client\"\u003e\u003ca class=\"anchor\" href=\"#_closing_the_client\"\u003e\u003c/a\u003e关闭客户端\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e长时间保持客户端（例如，在您的verticle的生命周期内）是可以的，\n但是一旦完成，就应该关闭它。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e共享同一数据源的客户端将计算引用次数（reference counted）。\n一旦最后一个引用的相同数据源被关闭，该数据源将被关闭。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect3\"\u003e\n\u003ch4 id=\"_automatic_clean_up_in_verticles\"\u003e\u003ca class=\"anchor\" href=\"#_automatic_clean_up_in_verticles\"\u003e\u003c/a\u003everticles中自动清理\u003c/h4\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e如果要从verticle内部创建客户端，则取消部署verticle时将自动关闭客户端。\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_the_sql_connection\"\u003e\u003ca class=\"anchor\" href=\"#_the_sql_connection\"\u003e\u003c/a\u003eSQL连接\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e与数据库的连接用表示 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/sql/SQLConnection.html\"\u003eSQLConnection\u003c/a\u003e\u003c/code\u003e。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect3\"\u003e\n\u003ch4 id=\"_auto_commit\"\u003e\u003ca class=\"anchor\" href=\"#_auto_commit\"\u003e\u003c/a\u003e自动提交\u003c/h4\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e获取连接时，自动提交设置为true。\n这意味着您执行的每个操作将有效地在其自己的事务中执行。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e如果您希望在单个事务中执行多个操作，\n则应使用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/sql/SQLConnection.html#setAutoCommit-boolean-io.vertx.core.Handler-\"\u003esetAutoCommit\u003c/a\u003e\u003c/code\u003e 将自动提交设置为false\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e操作完成后，将调用处理程序：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003econnection.setAutoCommit(\u003cspan class=\"hljs-keyword\"\u003efalse\u003c/span\u003e, res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    \u003cspan class=\"hljs-comment\"\u003e// OK!\u003c/span\u003e\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    \u003cspan class=\"hljs-comment\"\u003e// Failed!\u003c/span\u003e\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect3\"\u003e\n\u003ch4 id=\"_executing_queries\"\u003e\u003ca class=\"anchor\" href=\"#_executing_queries\"\u003e\u003c/a\u003e执行查询\u003c/h4\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e执行查询使用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/sql/SQLConnection.html#query-java.lang.String-io.vertx.core.Handler-\"\u003equery\u003c/a\u003e\u003c/code\u003e\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e查询字符串是传递给实际数据库的原始SQL。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e当执行查询时，\n结果通过 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/sql/ResultSet.html\"\u003eResultSet\u003c/a\u003e\u003c/code\u003e 返回。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003econnection.query(\u003cspan class=\"hljs-string\"\u003e\u0026quot;SELECT ID, FNAME, LNAME, SHOE_SIZE from PEOPLE\u0026quot;\u003c/span\u003e, res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    \u003cspan class=\"hljs-comment\"\u003e// Get the result set\u003c/span\u003e\n    ResultSet resultSet = res.result();\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    \u003cspan class=\"hljs-comment\"\u003e// Failed!\u003c/span\u003e\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/sql/ResultSet.html\"\u003eResultSet\u003c/a\u003e\u003c/code\u003e 表示查询的结果。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e列名称列表可通过 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/sql/ResultSet.html#getColumnNames--\"\u003egetColumnNames\u003c/a\u003e\u003c/code\u003e 获取，\n而实际结果通过 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/sql/ResultSet.html#getResults--\"\u003egetResults\u003c/a\u003e\u003c/code\u003e 获取。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e结果是 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/json/JsonArray.html\"\u003eJsonArray\u003c/a\u003e\u003c/code\u003e 类型，每个元素对应一行查询结果\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eList\u0026lt;String\u0026gt; columnNames = resultSet.getColumnNames();\n\nList\u0026lt;JsonArray\u0026gt; results = resultSet.getResults();\n\n\u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e (JsonArray row : results) {\n\n  String id = row.getString(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e);\n  String fName = row.getString(\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e);\n  String lName = row.getString(\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e);\n  \u003cspan class=\"hljs-keyword\"\u003eint\u003c/span\u003e shoeSize = row.getInteger(\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e);\n\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您还可以使用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/sql/ResultSet.html#getRows--\"\u003egetRows\u003c/a\u003e\u003c/code\u003e\n- 作为Json对象实例的列表来检索行\n- 这可以使您使用的API稍微简单一些，但是请注意，SQL结果可以包含重复的列名 - 如果是这种情况\n则应改用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/sql/ResultSet.html#getResults--\"\u003egetResults\u003c/a\u003e\u003c/code\u003e\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e使用Json对象作为返回类型，进行迭代的示例：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eList\u0026lt;JsonObject\u0026gt; rows = resultSet.getRows();\n\n\u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e (JsonObject row : rows) {\n\n  String id = row.getString(\u003cspan class=\"hljs-string\"\u003e\u0026quot;ID\u0026quot;\u003c/span\u003e);\n  String fName = row.getString(\u003cspan class=\"hljs-string\"\u003e\u0026quot;FNAME\u0026quot;\u003c/span\u003e);\n  String lName = row.getString(\u003cspan class=\"hljs-string\"\u003e\u0026quot;LNAME\u0026quot;\u003c/span\u003e);\n  \u003cspan class=\"hljs-keyword\"\u003eint\u003c/span\u003e shoeSize = row.getInteger(\u003cspan class=\"hljs-string\"\u003e\u0026quot;SHOE_SIZE\u0026quot;\u003c/span\u003e);\n\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect3\"\u003e\n\u003ch4 id=\"_prepared_statement_queries\"\u003e\u003ca class=\"anchor\" href=\"#_prepared_statement_queries\"\u003e\u003c/a\u003e预备语句查询\u003c/h4\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e要执行准备好的语句查询，\n可以使用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/sql/SQLConnection.html#queryWithParams-java.lang.String-io.vertx.core.json.JsonArray-io.vertx.core.Handler-\"\u003equeryWithParams\u003c/a\u003e\u003c/code\u003e。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e这将执行查询，其中包括参数占位符和一个 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/json/JsonArray.html\"\u003eJsonArray\u003c/a\u003e\u003c/code\u003e\n或参数值。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eString query = \u003cspan class=\"hljs-string\"\u003e\u0026quot;SELECT ID, FNAME, LNAME, SHOE_SIZE from PEOPLE WHERE LNAME=? AND SHOE_SIZE \u0026gt; ?\u0026quot;\u003c/span\u003e;\nJsonArray params = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonArray().add(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Fox\u0026quot;\u003c/span\u003e).add(\u003cspan class=\"hljs-number\"\u003e9\u003c/span\u003e);\n\nconnection.queryWithParams(query, params, res -\u0026gt; {\n\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    \u003cspan class=\"hljs-comment\"\u003e// Get the result set\u003c/span\u003e\n    ResultSet resultSet = res.result();\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    \u003cspan class=\"hljs-comment\"\u003e// Failed!\u003c/span\u003e\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect3\"\u003e\n\u003ch4 id=\"_executing_insert_update_or_delete\"\u003e\u003ca class=\"anchor\" href=\"#_executing_insert_update_or_delete\"\u003e\u003c/a\u003e执行INSERT，UPDATE或DELETE\u003c/h4\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e要执行更新数据库的操作，请使用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/sql/SQLConnection.html#update-java.lang.String-io.vertx.core.Handler-\"\u003eupdate\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e更新字符串是原始SQL，无需更改实际数据库即可通过。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e更新执行完成后，\n通过回调返回 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/sql/UpdateResult.html\"\u003eUpdateResult\u003c/a\u003e\u003c/code\u003e 的结果\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e更新内容的行数通过 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/sql/UpdateResult.html#getUpdated--\"\u003egetUpdated\u003c/a\u003e\u003c/code\u003e 获取，\n如果更新生成了键，则可以使用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/sql/UpdateResult.html#getKeys--\"\u003egetKeys\u003c/a\u003e\u003c/code\u003e 获取\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003econnection.update(\u003cspan class=\"hljs-string\"\u003e\u0026quot;INSERT INTO PEOPLE VALUES (null, \u0026#x27;john\u0026#x27;, \u0026#x27;smith\u0026#x27;, 9)\u0026quot;\u003c/span\u003e, res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n\n    UpdateResult result = res.result();\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Updated no. of rows: \u0026quot;\u003c/span\u003e + result.getUpdated());\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Generated keys: \u0026quot;\u003c/span\u003e + result.getKeys());\n\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    \u003cspan class=\"hljs-comment\"\u003e// Failed!\u003c/span\u003e\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect3\"\u003e\n\u003ch4 id=\"_prepared_statement_updates\"\u003e\u003ca class=\"anchor\" href=\"#_prepared_statement_updates\"\u003e\u003c/a\u003e准备的语句更新\u003c/h4\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e要执行准备好的语句更新，\n可以使用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/sql/SQLConnection.html#updateWithParams-java.lang.String-io.vertx.core.json.JsonArray-io.vertx.core.Handler-\"\u003eupdateWithParams\u003c/a\u003e\u003c/code\u003e 。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e这种方式的更新语句包含参数占位符，\n和JsonArray参数列表或参数值进行更新\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eString update = \u003cspan class=\"hljs-string\"\u003e\u0026quot;UPDATE PEOPLE SET SHOE_SIZE = 10 WHERE LNAME=?\u0026quot;\u003c/span\u003e;\nJsonArray params = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonArray().add(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Fox\u0026quot;\u003c/span\u003e);\n\nconnection.updateWithParams(update, params, res -\u0026gt; {\n\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n\n    UpdateResult updateResult = res.result();\n\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;No. of rows updated: \u0026quot;\u003c/span\u003e + updateResult.getUpdated());\n\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n\n    \u003cspan class=\"hljs-comment\"\u003e// Failed!\u003c/span\u003e\n\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect3\"\u003e\n\u003ch4 id=\"_callable_statements\"\u003e\u003ca class=\"anchor\" href=\"#_callable_statements\"\u003e\u003c/a\u003e可赎回声明\u003c/h4\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e要执行可调用语句(SQL函数或SQL过程)，可以使用\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/sql/SQLConnection.html#callWithParams-java.lang.String-io.vertx.core.json.JsonArray-io.vertx.core.json.JsonArray-io.vertx.core.Handler-\"\u003ecallWithParams\u003c/a\u003e\u003c/code\u003e。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e这将使用标准JDBC格式 \u003ccode\u003e{call func_proc_name()}\u003c/code\u003e 接受可调用语句，\n还可以选择包含参数占位符，例如：\u003ccode\u003e{call func_proc_name(?,?)}\u003c/code\u003e ，\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/json/JsonArray.html\"\u003eJsonArray\u003c/a\u003e\u003c/code\u003e 包含参数值，\n最后是 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/json/JsonArray.html\"\u003eJsonArray\u003c/a\u003e\u003c/code\u003e 包含输出类型，例如： \u003ccode\u003e[null，'VARCHAR']\u003c/code\u003e 。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e请注意，输出类型的索引与params数组一样重要。\n如果返回值是第二个参数，则输出数组必须包含一个空值作为第一个元素。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e一个SQL函数使用return关键字返回一些输出，在这种情况下，可以这样调用它：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eString func = \u003cspan class=\"hljs-string\"\u003e\u0026quot;{ call one_hour_ago() }\u0026quot;\u003c/span\u003e;\n\nconnection.call(func, res -\u0026gt; {\n\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    ResultSet result = res.result();\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    \u003cspan class=\"hljs-comment\"\u003e// Failed!\u003c/span\u003e\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e在使用Procedures时，仍然通过其参数从过程中返回值，如果不返回任何内容，\n用法如下：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eString func = \u003cspan class=\"hljs-string\"\u003e\u0026quot;{ call new_customer(?, ?) }\u0026quot;\u003c/span\u003e;\n\nconnection.callWithParams(func, \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonArray().add(\u003cspan class=\"hljs-string\"\u003e\u0026quot;John\u0026quot;\u003c/span\u003e).add(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Doe\u0026quot;\u003c/span\u003e), \u003cspan class=\"hljs-keyword\"\u003enull\u003c/span\u003e, res -\u0026gt; {\n\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    \u003cspan class=\"hljs-comment\"\u003e// Success!\u003c/span\u003e\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    \u003cspan class=\"hljs-comment\"\u003e// Failed!\u003c/span\u003e\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e但是，您还可以返回如下值：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eString func = \u003cspan class=\"hljs-string\"\u003e\u0026quot;{ call customer_lastname(?, ?) }\u0026quot;\u003c/span\u003e;\n\nconnection.callWithParams(func, \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonArray().add(\u003cspan class=\"hljs-string\"\u003e\u0026quot;John\u0026quot;\u003c/span\u003e), \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonArray().addNull().add(\u003cspan class=\"hljs-string\"\u003e\u0026quot;VARCHAR\u0026quot;\u003c/span\u003e), res -\u0026gt; {\n\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    ResultSet result = res.result();\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    \u003cspan class=\"hljs-comment\"\u003e// Failed!\u003c/span\u003e\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e请注意，参数的索引与 \u003ccode\u003e?\u003c/code\u003e 的索引匹配，\n并且输出参数期望是描述您要接收的类型的字符串。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e为避免歧义，实现应遵循以下规则：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e当 \u003ccode\u003eIN\u003c/code\u003e 数组中的占位符为 \u003ccode\u003eNOT NULL\u003c/code\u003e 时，它将被采用\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e当 \u003ccode\u003eIN\u003c/code\u003e 值为 \u003ccode\u003eNULL\u003c/code\u003e 时，对 \u003ccode\u003eOUT\u003c/code\u003e 进行检查\n当 \u003ccode\u003eOUT\u003c/code\u003e 值不为空时，它将被注册为输出参数\n当 \u003ccode\u003eOUT\u003c/code\u003e 也为空时，预期 \u003ccode\u003eIN\u003c/code\u003e 值为 \u003ccode\u003eNULL\u003c/code\u003e 值。\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e已注册的 \u003ccode\u003eOUT\u003c/code\u003e 参数将以数组形式出现在 \u003ccode\u003eoutput\u003c/code\u003e 属性下的结果集中。\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect3\"\u003e\n\u003ch4 id=\"_batch_operations\"\u003e\u003ca class=\"anchor\" href=\"#_batch_operations\"\u003e\u003c/a\u003e批量操作\u003c/h4\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eSQL通用接口还定义了如何执行批处理操作。批处理操作分为3种类型：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e批量执行sql语句 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/sql/SQLConnection.html#batch-java.util.List-io.vertx.core.Handler-\"\u003ebatch\u003c/a\u003e\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e批量执行预处理sql语句 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/sql/SQLConnection.html#batchWithParams-java.lang.String-java.util.List-io.vertx.core.Handler-\"\u003ebatchWithParams\u003c/a\u003e\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e批量执行可调用语句 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/sql/SQLConnection.html#batchCallableWithParams-java.lang.String-java.util.List-java.util.List-io.vertx.core.Handler-\"\u003ebatchCallableWithParams\u003c/a\u003e\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e批量执行sql语句示例如下：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eList\u0026lt;String\u0026gt; batch = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e ArrayList\u0026lt;\u0026gt;();\nbatch.add(\u003cspan class=\"hljs-string\"\u003e\u0026quot;INSERT INTO emp (NAME) VALUES (\u0026#x27;JOE\u0026#x27;)\u0026quot;\u003c/span\u003e);\nbatch.add(\u003cspan class=\"hljs-string\"\u003e\u0026quot;INSERT INTO emp (NAME) VALUES (\u0026#x27;JANE\u0026#x27;)\u0026quot;\u003c/span\u003e);\n\nconnection.batch(batch, res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    List\u0026lt;Integer\u0026gt; result = res.result();\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    \u003cspan class=\"hljs-comment\"\u003e// Failed!\u003c/span\u003e\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e执行一个预处理sql语句，并且使用一个参数列表，示例如下\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eList\u0026lt;JsonArray\u0026gt; batch = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e ArrayList\u0026lt;\u0026gt;();\nbatch.add(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonArray().add(\u003cspan class=\"hljs-string\"\u003e\u0026quot;joe\u0026quot;\u003c/span\u003e));\nbatch.add(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonArray().add(\u003cspan class=\"hljs-string\"\u003e\u0026quot;jane\u0026quot;\u003c/span\u003e));\n\nconnection.batchWithParams(\u003cspan class=\"hljs-string\"\u003e\u0026quot;INSERT INTO emp (name) VALUES (?)\u0026quot;\u003c/span\u003e, batch, res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    List\u0026lt;Integer\u0026gt; result = res.result();\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    \u003cspan class=\"hljs-comment\"\u003e// Failed!\u003c/span\u003e\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect3\"\u003e\n\u003ch4 id=\"_executing_other_operations\"\u003e\u003ca class=\"anchor\" href=\"#_executing_other_operations\"\u003e\u003c/a\u003e执行其他操作\u003c/h4\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e要执行任何其他数据库操作，例如 \u003ccode\u003eCREATE TABLE\u003c/code\u003e 您可以使用\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/sql/SQLConnection.html#execute-java.lang.String-io.vertx.core.Handler-\"\u003eexecute\u003c/a\u003e\u003c/code\u003e 。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003esql语句将会直接在数据库中执行。操作完成后调用处理程序\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eString sql = \u003cspan class=\"hljs-string\"\u003e\u0026quot;CREATE TABLE PEOPLE (ID int generated by default as identity (start with 1 increment by 1) not null,\u0026quot;\u003c/span\u003e +\n  \u003cspan class=\"hljs-string\"\u003e\u0026quot;FNAME varchar(255), LNAME varchar(255), SHOE_SIZE int);\u0026quot;\u003c/span\u003e;\n\nconnection.execute(sql, execute -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (execute.succeeded()) {\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Table created !\u0026quot;\u003c/span\u003e);\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    \u003cspan class=\"hljs-comment\"\u003e// Failed!\u003c/span\u003e\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect3\"\u003e\n\u003ch4 id=\"_multiple_resultset_responses\"\u003e\u003ca class=\"anchor\" href=\"#_multiple_resultset_responses\"\u003e\u003c/a\u003e多个ResultSet响应\u003c/h4\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e在某些情况下，您的查询可能返回多个结果集，\n在这种情况下，为了保持兼容性，当返回的结果集对象转换为纯json时，使用当前结果集的 \u003ccode\u003enext\u003c/code\u003e 链接到下一个结果集。\n可以像这样简单地遍历所有结果集：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003e\u003cspan class=\"hljs-keyword\"\u003ewhile\u003c/span\u003e (rs != \u003cspan class=\"hljs-keyword\"\u003enull\u003c/span\u003e) {\n  \u003cspan class=\"hljs-comment\"\u003e// do something with the result set...\u003c/span\u003e\n\n  \u003cspan class=\"hljs-comment\"\u003e// next step\u003c/span\u003e\n  rs = rs.getNext();\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect3\"\u003e\n\u003ch4 id=\"_streaming\"\u003e\u003ca class=\"anchor\" href=\"#_streaming\"\u003e\u003c/a\u003e流式返回\u003c/h4\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e在处理大量数据返回时，建议不要使用刚刚描述的API，而是使用流式返回。\n因为这样可以避免将整个响应内容填充到内存和JSON中，而是逐行处理数据，例如：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003econnection.queryStream(\u003cspan class=\"hljs-string\"\u003e\u0026quot;SELECT * FROM large_table\u0026quot;\u003c/span\u003e, stream -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (stream.succeeded()) {\n    stream.result().handler(row -\u0026gt; {\n      \u003cspan class=\"hljs-comment\"\u003e// do something with the row...\u003c/span\u003e\n    });\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您可以完全控制流何时暂停，恢复和结束。\n对于查询返回多个结果集的情况，您应该使用结果集结束事件来获取下一个结果(如果有)。\n如果有更多数据，则流处理程序将接收新数据，否则将调用结束处理程序。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003econnection.queryStream(\u003cspan class=\"hljs-string\"\u003e\u0026quot;SELECT * FROM large_table; SELECT * FROM other_table\u0026quot;\u003c/span\u003e, stream -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (stream.succeeded()) {\n    SQLRowStream sqlRowStream = stream.result();\n\n    sqlRowStream\n      .resultSetClosedHandler(v -\u0026gt; {\n        \u003cspan class=\"hljs-comment\"\u003e// will ask to restart the stream with the new result set if any\u003c/span\u003e\n        sqlRowStream.moreResults();\n      })\n      .handler(row -\u0026gt; {\n        \u003cspan class=\"hljs-comment\"\u003e// do something with the row...\u003c/span\u003e\n      })\n      .endHandler(v -\u0026gt; {\n        \u003cspan class=\"hljs-comment\"\u003e// no more data available...\u003c/span\u003e\n      });\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect3\"\u003e\n\u003ch4 id=\"_using_transactions\"\u003e\u003ca class=\"anchor\" href=\"#_using_transactions\"\u003e\u003c/a\u003e使用事务\u003c/h4\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e要使用事务，请先使用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/sql/SQLConnection.html#setAutoCommit-boolean-io.vertx.core.Handler-\"\u003esetAutoCommit\u003c/a\u003e\u003c/code\u003e 将自动提交设置为false。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e然后，您可以进行事务性操作，并在要提交或回滚时使用\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/sql/SQLConnection.html#commit-io.vertx.core.Handler-\"\u003ecommit\u003c/a\u003e\u003c/code\u003e\n或\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/sql/SQLConnection.html#rollback-io.vertx.core.Handler-\"\u003erollback\u003c/a\u003e\u003c/code\u003e 。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e提交/回滚完成后，将调用处理程序，并且下一个事务将自动启动。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003econnection.commit(res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    \u003cspan class=\"hljs-comment\"\u003e// Committed OK!\u003c/span\u003e\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    \u003cspan class=\"hljs-comment\"\u003e// Failed!\u003c/span\u003e\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect3\"\u003e\n\u003ch4 id=\"_closing_connections\"\u003e\u003ca class=\"anchor\" href=\"#_closing_connections\"\u003e\u003c/a\u003e关闭连接\u003c/h4\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e完成连接后，应使用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/sql/SQLConnection.html#close-io.vertx.core.Handler-\"\u003eclose\u003c/a\u003e\u003c/code\u003e 将其返回到池中。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eUnresolved directive in index.adoc - include::override/rxjava2.adoc[]\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_configuration\"\u003e\u003ca class=\"anchor\" href=\"#_configuration\"\u003e\u003c/a\u003e配置项\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e在创建或部署配置时，会将配置传递给客户端。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e以下配置属性通常适用：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"dlist\"\u003e\n\u003cdl\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003eprovider_class\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003e实际用于管理数据库连接的类的类名。\n默认情况下是， \u003ccode\u003eio.vertx.ext.jdbc.spi.impl.C3P0DataSourceProvider\u003c/code\u003e 但是如果您要使用其他提供程序，则可以覆盖此属性并提供您的实现。\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003erow_stream_fetch_size\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003e\u003ccode\u003eSQLRowStream\u003c/code\u003e 内部缓存的大小，\n曾经用来提高性能。默认情况下等于128\u003c/p\u003e\n\u003c/dd\u003e\n\u003c/dl\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e假设正在使用C3P0实现(默认设置)，则将应用以下额外的配置属性：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"dlist\"\u003e\n\u003cdl\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003eurl\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003e数据库的JDBC连接URL\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003edriver_class\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003eJDBC驱动程序的类\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003euser\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003e数据库的用户名\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003epassword\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003e数据库的密码\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003emax_pool_size\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003e池的最大连接数 ， 默认为 \u003ccode\u003e15\u003c/code\u003e\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003einitial_pool_size\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003e用于初始化池的连接数 ， 默认为 \u003ccode\u003e3\u003c/code\u003e\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003emin_pool_size\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003e连接池的最小连接数\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003emax_statements\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003e\u003ccode\u003ePreparedStatement\u003c/code\u003e 缓存的数量，默认值为 \u003ccode\u003e0\u003c/code\u003e。\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003emax_statements_per_connection\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003e每个链接 \u003ccode\u003ePreparedStatement\u003c/code\u003e 缓存的数量 ， 默认值为 \u003ccode\u003e0\u003c/code\u003e。\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003emax_idle_time\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003e空闲连接将关闭之前经过的秒数 ，默认值为 \u003ccode\u003e0\u003c/code\u003e (永不过期)。\u003c/p\u003e\n\u003c/dd\u003e\n\u003c/dl\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e其他连接池提供程序是：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eHikari\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eAgroal\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e与C3P0类似，它们可以通过在JSON配置对象上传递配置值来进行配置。\n对于特殊情况，您不想将应用程序部署为 \u003cem\u003efat jar\u003c/em\u003e ，而是使用 vert.x 发行版运行，\n如果您没有写权限将JDBC驱动程序添加到vert.x lib目录，\n并使用 \u003ccode\u003e-cp\u003c/code\u003e 命令行标志传递它，则建议使用Agroal。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e如果要配置任何其他C3P0属性，可以将文件 \u003ccode\u003ec3p0.properties\u003c/code\u003e 添加到类路径。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e以下是配置服务的示例：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eJsonObject config = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject()\n  .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;url\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;jdbc:hsqldb:mem:test?shutdown=true\u0026quot;\u003c/span\u003e)\n  .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;driver_class\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;org.hsqldb.jdbcDriver\u0026quot;\u003c/span\u003e)\n  .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;max_pool_size\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e30\u003c/span\u003e);\n\nSQLClient client = JDBCClient.createShared(vertx, config);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eHikari使用一组不同的属性：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003ejdbcUrl\u003c/code\u003e JDBC的URL\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003edriverClassName\u003c/code\u003e JDBC驱动的类名\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003emaximumPoolSize\u003c/code\u003e 连接池的大小\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003eusername\u003c/code\u003e 数据库用户名（\u003ccode\u003epassword\u003c/code\u003e 数据库密码）\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e有关更多详细信息，\n请参阅 \u003ca href=\"https://github.com/brettwooldridge/HikariCP#configuration-knobs-baby\"\u003eHikari documentation\u003c/a\u003e 。\n另请参阅  \u003ca href=\"https://agroal.github.io/\"\u003eAgroal documentation\u003c/a\u003e 以配置Agroal。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv id=\"_jdbc_drivers\" class=\"paragraph\"\u003e\n\u003cp\u003eJDBC驱动程序\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e如果使用默认值 \u003ccode\u003eDataSourceProvider\u003c/code\u003e(依赖于c3p0)，则需要在类路径中复制JDBC驱动程序类。\n如果您的应用程序打包为  \u003cem\u003efat jar\u003c/em\u003e ，请确保嵌入jdbc驱动程序。如果您的应用程序是通过 \u003ccode\u003evertx\u003c/code\u003e 命令行启动的，请将JDBC驱动程序复制到 \u003ccode\u003e${VERTX_HOME}/lib\u003c/code\u003e 。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e使用不同的连接池时，行为可能会有所不同。\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_data_types\"\u003e\u003ca class=\"anchor\" href=\"#_data_types\"\u003e\u003c/a\u003e数据类型\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e由于Vert.x使用JSON作为其标准消息格式，因此客户端接受的数据类型会有很多限制。\n您可以获取标准的：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003enull\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eboolean\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003enumber\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003estring\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e对于时态类型(时间、日期、时间戳)也有一个乐观强制转换，对于UUID也可以选择禁用。许多数据库支持uuid，但并非所有数据库都支持。\n例如MySQL不支持它，所以建议使用VARCHAR(36)列。\n对于其他引擎，可以使用客户端配置json启用UUID乐观强制转换，如下所示：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre\u003e{ \"castUUID\": true }\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e当此配置存在时，uuid将作为本机类型处理。\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e"},"__N_SSG":true},"page":"/docs/[[...slug]]","query":{"slug":["vertx-jdbc-client","java"]},"buildId":"3iXe8BxFwtviKnGQjkri0","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>