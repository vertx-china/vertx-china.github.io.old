<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="description" content="Vert.x | Reactive applications on the JVM"/><meta name="robots" content="index,follow"/><link rel="shortcut icon" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="48x48" href="/favicons/favicon-48x48.png"/><link rel="alternate" type="application/rss+xml" href="/feed/rss.xml"/><link rel="alternate" type="application/atom+xml" href="/feed/atom.xml"/><link rel="alternate" type="application/json" href="/feed/feed.json"/><title>MySQL 客户端 | Eclipse Vert.x</title><link rel="preload" href="https://api.github.com/repos/eclipse-vertx/vertx-sql-client" as="fetch" crossorigin="anonymous" class="jsx-d38685edc31911e0"/><meta name="next-head-count" content="14"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-cb7634a8b6194820.js" defer=""></script><script src="/_next/static/chunks/framework-5f4595e5518b5600.js" defer=""></script><script src="/_next/static/chunks/main-f635b472c367d1c7.js" defer=""></script><script src="/_next/static/chunks/pages/_app-d7fe1c01d653763a.js" defer=""></script><script src="/_next/static/chunks/615-af27e2775b51966c.js" defer=""></script><script src="/_next/static/chunks/619-afdae842ceadd4b2.js" defer=""></script><script src="/_next/static/chunks/81-19fda51682297a85.js" defer=""></script><script src="/_next/static/chunks/536-a9af9dadd93f0749.js" defer=""></script><script src="/_next/static/chunks/434-02978711e0879a69.js" defer=""></script><script src="/_next/static/chunks/pages/docs/%5B%5B...slug%5D%5D-810f1ca9040e790a.js" defer=""></script><script src="/_next/static/RBMjO1hqOi6Z1JoWz1U-W/_buildManifest.js" defer=""></script><script src="/_next/static/RBMjO1hqOi6Z1JoWz1U-W/_ssgManifest.js" defer=""></script><script src="/_next/static/RBMjO1hqOi6Z1JoWz1U-W/_middlewareManifest.js" defer=""></script><style id="__jsx-400ec7965926e858">.dropdown-item.jsx-400ec7965926e858{white-space:nowrap;
line-height:2;
width:100%;
padding:0 1.5rem;
cursor:pointer}
.dropdown-item.jsx-400ec7965926e858:hover{background-color:#e9ecef}
.dropdown-item.active.jsx-400ec7965926e858{font-weight:400;
padding-left:.75rem}
.dropdown-item.has-active-siblings.jsx-400ec7965926e858:not(.active){padding-left:calc(0.75rem + 16px + 0.5em)}
.dropdown-item.jsx-400ec7965926e858 .dropdown-check-icon.jsx-400ec7965926e858{width:16px;
margin-right:.5em;
margin-top:1px}</style><style id="__jsx-6650573c8f14945d">.dropdown.jsx-6650573c8f14945d{position:relative;
display:inline-block}
.dropdown.jsx-6650573c8f14945d .dropdown-title.jsx-6650573c8f14945d{margin-right:0;
cursor:pointer;
-webkit-user-select:none;
-moz-user-select:none;
-ms-user-select:none;
user-select:none}
.dropdown.jsx-6650573c8f14945d .dropdown-menu.jsx-6650573c8f14945d{position:absolute;
background-color:#f8f9fa;
box-shadow:0 2px 5px 0 rgba(0, 0, 0, .1);
border-radius:.8rem;
list-style-type:none;
padding:.6666666667rem 0;
margin:.25rem 0 0 0;
z-index:100;
display:none;
-webkit-user-select:none;
-moz-user-select:none;
-ms-user-select:none;
user-select:none}
.dropdown.jsx-6650573c8f14945d .dropdown-menu.jsx-6650573c8f14945d a{color:#4d4d4d;
-webkit-text-decoration:none;
text-decoration:none;
font-weight:300}
.dropdown.jsx-6650573c8f14945d .dropdown-menu.align-right.jsx-6650573c8f14945d{right:0}
.dropdown.jsx-6650573c8f14945d .dropdown-menu.visible.jsx-6650573c8f14945d{display:block}
.dropdown.jsx-6650573c8f14945d .dropdown-menu.jsx-6650573c8f14945d a.jsx-6650573c8f14945d:hover{color:inherit}
.dropdown.jsx-6650573c8f14945d svg{margin-bottom:2px}</style><style id="__jsx-f705e145f931f504">.navbar{position:absolute;
top:2.75rem;
width:100%}
.navbar a{color:#3c3c3b}
.navbar a.navbar-menu-item, .navbar .dropdown-title{text-transform:uppercase}
.navbar a.navbar-menu-item:hover, .navbar .dropdown-title:hover{-webkit-text-decoration:none;
text-decoration:none;
color:#898987;
-webkit-transition:color .15s ease-in-out;
transition:color .15s ease-in-out}
.navbar .navbar-content{display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex;
-webkit-flex-direction:row;
-ms-flex-direction:row;
flex-direction:row;
-webkit-align-items:center;
-webkit-box-align:center;
-ms-flex-align:center;
align-items:center;
position:relative}
.navbar .navbar-content .navbar-logo{-webkit-flex:1;
-ms-flex:1;
flex:1}
.navbar .navbar-content .navbar-logo img{width:8.3rem}
.navbar .navbar-content .navbar-collapse-button{display:none;
cursor:pointer}
@media (max-width:1000px) {.navbar .navbar-content .navbar-collapse-button{display:inline-block}}
.navbar .navbar-content .navbar-collapse-button span{display:block;
width:33px;
height:4px;
margin-bottom:5px;
position:relative;
background:#3c3c3b;
border-radius:3px;
z-index:1;
transform-origin:4px 0;
-webkit-transition:-webkit-transform .5s cubic-bezier(0.77, 0.2, 0.05, 1), background .5s cubic-bezier(0.77, 0.2, 0.05, 1), opacity .55s ease;
transition:transform .5s cubic-bezier(0.77, 0.2, 0.05, 1), background .5s cubic-bezier(0.77, 0.2, 0.05, 1), opacity .55s ease}
.navbar .navbar-content .navbar-collapse-button span:first-child{transform-origin:0% 0%}
.navbar .navbar-content .navbar-collapse-button span:nth-last-child(2){transform-origin:0% 100%}
.navbar .navbar-content .navbar-right{display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex;
-webkit-flex-direction:row;
-ms-flex-direction:row;
flex-direction:row;
-webkit-align-items:baseline;
-webkit-box-align:baseline;
-ms-flex-align:baseline;
align-items:baseline;
margin-bottom:10px}
@media (max-width:1000px) {.navbar .navbar-content .navbar-right{max-height:0;
-webkit-transition:max-height 200ms ease-in-out;
transition:max-height 200ms ease-in-out;
box-shadow:0 2px 5px 0 rgba(0, 0, 0, .1);
-webkit-flex-direction:column;
-ms-flex-direction:column;
flex-direction:column;
position:absolute;
top:2.75rem;
left:.8rem;
right:.8rem;
background-color:#f8f9fa;
overflow-x:auto;
overflow-y:hidden}}
.navbar .navbar-content .navbar-menu .navbar-menu-item{font-weight:400;
margin-right:2.5rem}
.navbar .navbar-content .navbar-menu .navbar-menu-item.with-drop-down{margin-right:1.8rem}
@media (max-width:1250px) {.navbar .navbar-content .navbar-menu .navbar-menu-item{margin-right:1.5rem}}
@media (max-width:1000px) {.navbar .navbar-content .navbar-menu .navbar-menu-item{display:block;
margin-bottom:1rem;
font-size:1.2rem}}
.navbar .navbar-content .navbar-menu .navbar-menu-item .external-link-icon{margin-left:.25em}
@media (max-width:1000px) {.navbar .navbar-content .navbar-menu{-webkit-flex-direction:column;
-ms-flex-direction:column;
flex-direction:column;
padding:1rem}}
.navbar .navbar-content .navbar-social{margin-left:1.6rem;
font-size:.875rem}
.navbar .navbar-content .navbar-social svg{height:16px;
margin-bottom:2px}
@media (max-width:1000px) {.navbar .navbar-content .navbar-social svg{height:1rem}}
@media (max-width:1250px) {.navbar .navbar-content .navbar-social{margin-left:1rem}}
@media (max-width:1000px) {.navbar .navbar-content .navbar-social{margin-left:auto;
padding:0 1rem 1rem 0;
font-size:1rem}}
@media (max-width:768px) {.navbar{top:1rem}}
.page .navbar{top:0;
padding-top:1.5rem;
padding-bottom:1rem;
position:fixed;
background-color:#fff;
z-index:2}</style><style id="__jsx-20d862052e50feff">.search input{color:#adb5bd;
border:1px solid #dee2e6;
border-radius:.4rem;
font-size:.875rem;
padding:.25rem 1.8rem .35rem 1.8rem;
width:100%;
-webkit-transition:color .15s ease-in-out, border-color .15s ease-in-out;
transition:color .15s ease-in-out, border-color .15s ease-in-out}
.search input:focus{border-color:#adb5bd;
color:#3c3c3b}
.search .search-icon, .search .search-icon-delete{position:absolute;
top:.55rem;
height:1rem;
stroke:#adb5bd;
-webkit-transition:stroke .15s ease-in-out;
transition:stroke .15s ease-in-out}
.search .search-icon{left:.4rem}
.search input:focus+.search-icon{stroke:#6f6970}
.search .search-icon-delete{stroke:#6f6970;
right:.4rem;
height:.75rem;
top:.7rem;
opacity:0;
-webkit-transition:opacity .15s ease-in-out;
transition:opacity .15s ease-in-out;
cursor:text}
.search.has-content .search-icon-delete{opacity:1;
cursor:pointer}</style><style id="__jsx-117e429f22e394dc">.search-results, .search-results-none{font-size:.875rem;
overflow:auto;
list-style-type:none;
padding-left:0;
display:none}
.search-results.visible, .search-results-none.visible{display:block}
.search-results{list-style-type:none;
padding:0;
margin-bottom:0}
.search-results li{display:block;
padding:.5rem;
margin-bottom:1rem;
border-radius:.4rem;
border:1px solid transparent;
cursor:pointer}
.search-results li.active{background-color:#f8f9fa;
border:1px solid #e9ecef}
.search-results li h5{margin:0 0 .5rem 0;
font-size:1em}
.search-results li .search-results-highlight{background-color:#ff0}
.search-results-none{padding:1rem .5rem;
text-align:center;
width:100%}</style><style id="__jsx-d1843944f2d67b">.search-panel{display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex;
-webkit-flex-direction:column;
-ms-flex-direction:column;
flex-direction:column;
position:relative}</style><style id="__jsx-d38685edc31911e0">.github-stars.jsx-d38685edc31911e0{display:inline-block}
.github-stars.jsx-d38685edc31911e0 .icon.jsx-d38685edc31911e0{margin-right:.25em}
.github-stars.jsx-d38685edc31911e0 .icon.jsx-d38685edc31911e0 svg{height:1rem}</style><style id="__jsx-aeedcf66895f49d7">footer{font-size:.875rem;
padding-top:3rem;
padding-bottom:4rem;
background-color:#f8f9fa;
border-top:1px solid #dee2e6;
margin-top:1rem;
color:#6f6970}
footer h5{font-size:1rem;
margin-top:0;
margin-bottom:1rem;
color:#3c3c3b;
text-transform:uppercase}
footer ul{padding:0;
list-style:none;
line-height:2}
footer a{color:#6f6970}
footer .footer-logo img, footer .footer-copyright-eclipse-logo img{-webkit-filter:grayscale(100);
filter:grayscale(100);
opacity:.5;
-webkit-transition:all .15s ease-in-out;
transition:all .15s ease-in-out}
footer .footer-logo img:hover, footer .footer-copyright-eclipse-logo img:hover{-webkit-filter:grayscale(0);
filter:grayscale(0);
opacity:1}
footer .footer-nav-section{display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex;
-webkit-flex-direction:row;
-ms-flex-direction:row;
flex-direction:row;
margin-bottom:6rem}
footer .footer-nav-section .footer-logo{margin-top:.4rem}
footer .footer-nav-section .footer-logo img{width:8.3rem}
footer .footer-nav-section .footer-nav-list{width:20%}
footer .footer-copyright{display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex;
-webkit-flex-direction:row;
-ms-flex-direction:row;
flex-direction:row;
-webkit-box-pack:justify;
-webkit-justify-content:space-between;
justify-content:space-between;
-webkit-align-items:center;
-webkit-box-align:center;
-ms-flex-align:center;
align-items:center}
footer .footer-copyright a{white-space:nowrap}
footer .footer-copyright .footer-copyright-eclipse-logo{width:17%;
margin-bottom:.5rem}
@media (max-width:1250px) {footer .footer-copyright .footer-copyright-break{display:none}
footer .footer-copyright .footer-copyright-eclipse-logo{width:30%}}
@media (max-width:1000px) {footer .footer-nav-section .footer-nav-list{width:25%}
footer .footer-copyright .footer-copyright-break{display:inline-block}
footer .footer-copyright .footer-copyright-eclipse-logo{width:40%}}
@media (max-width:768px) {footer .footer-nav-section{max-width:100%;
margin-left:auto;
margin-right:auto}}
@media (max-width:640px) {footer .footer-nav-section{max-width:80%;
margin-bottom:3rem;
-webkit-flex-direction:column;
-ms-flex-direction:column;
flex-direction:column}
footer .footer-nav-section h5{cursor:pointer}
footer .footer-nav-section h5::after{display:inline-block;
content:"";
border-top:.4em solid;
border-right:.4em solid transparent;
border-bottom:0;
border-left:.4em solid transparent;
position:absolute;
top:.75rem;
right:0}
footer .footer-nav-section .footer-nav-list{width:100%;
position:relative}
footer .footer-nav-section .footer-nav-list ul{overflow-y:hidden;
max-height:0;
-webkit-transition:all 200ms ease-in-out;
transition:all 200ms ease-in-out}
footer .footer-nav-section .footer-nav-list ul.visible{margin-bottom:2rem}
footer .footer-nav-section .footer-logo{margin:0 auto 3rem auto;
width:auto}
footer .footer-copyright{max-width:80%;
text-align:center;
margin-left:auto;
margin-right:auto;
-webkit-flex-direction:column-reverse;
-ms-flex-direction:column-reverse;
flex-direction:column-reverse}
footer .footer-copyright .footer-copyright-eclipse-logo{width:7.6rem;
margin-bottom:1rem}}</style><style id="__jsx-efcc50be384cabc7">.page-content{margin-top:6em;
margin-bottom:8rem}
.docs .docs-content .docs-content-wrapper{display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex;
-webkit-box-pack:justify;
-webkit-justify-content:space-between;
justify-content:space-between}
.docs .docs-content .docs-content-wrapper aside{-webkit-flex:0 0 17rem;
-ms-flex:0 0 17rem;
flex:0 0 17rem}
.docs .docs-content .docs-content-wrapper aside .docs-content-wrapper-sidebar{position:-webkit-sticky;
position:sticky;
top:7em}
.docs .docs-content .docs-content-wrapper aside .search-panel{margin-top:1rem;
width:100%}
.docs .docs-content .docs-content-wrapper aside .search-panel .search-results{max-height:calc(100vh - 10rem - 1px)}
.docs .docs-content .docs-content-wrapper aside .docs-content-toc{margin-top:1rem;
overflow-y:auto;
max-height:calc(100vh - 10rem - 3px)}
.docs .docs-content .docs-content-wrapper aside .docs-content-toc #toctitle{display:none}
.docs .docs-content .docs-content-wrapper aside .docs-content-toc ul{margin-top:0;
padding-left:0;
list-style-type:none}
.docs .docs-content .docs-content-wrapper aside .docs-content-toc ul.sectlevel2{display:none}
.docs .docs-content .docs-content-wrapper aside .docs-content-toc ul li{padding:.3333333333rem 0}
.docs .docs-content .docs-content-wrapper aside.docs-has-search-results .docs-content-toc{display:none}
@media (max-width:1250px) {.docs .docs-content .docs-content-wrapper aside{-webkit-flex:0 0 15rem;
-ms-flex:0 0 15rem;
flex:0 0 15rem}}
@media (max-width:1000px) {.docs .docs-content .docs-content-wrapper aside{z-index:1;
position:fixed;
top:0;
right:0;
width:25rem;
height:100vh;
max-width:100%;
padding-top:6rem;
padding-left:2rem;
padding-right:2rem;
background-color:#fff;
border-left:1px solid #dee2e6;
-webkit-transform:translateX(100%);
-moz-transform:translateX(100%);
-ms-transform:translateX(100%);
transform:translateX(100%);
-webkit-transition:-webkit-transform 200ms ease-in-out;
transition:transform 200ms ease-in-out;
will-change:transform}
.docs .docs-content .docs-content-wrapper aside.collapse{-webkit-transform:translateX(0%);
-moz-transform:translateX(0%);
-ms-transform:translateX(0%);
transform:translateX(0%)}}
@media (max-width:640px) {.docs .docs-content .docs-content-wrapper aside{min-width:100%;
border-left:none}}
.docs .docs-content .docs-content-wrapper .docs-content-sidebar-toggle{z-index:1000;
cursor:pointer;
display:none;
position:fixed;
-webkit-justify-content:center;
justify-content:center;
-webkit-align-items:center;
-webkit-box-align:center;
-ms-flex-align:center;
align-items:center;
right:2rem;
bottom:2rem;
color:#fff;
background-color:#4d4d4d;
padding:.5rem;
border-radius:.8rem;
-webkit-transition:background-color .15s ease-in-out;
transition:background-color .15s ease-in-out}
.docs .docs-content .docs-content-wrapper .docs-content-sidebar-toggle .feather-list, .docs .docs-content .docs-content-wrapper .docs-content-sidebar-toggle .feather-x{display:block}
.docs .docs-content .docs-content-wrapper .docs-content-sidebar-toggle .feather-x{position:absolute;
left:0;
top:0;
opacity:0;
-webkit-transition:opacity .15s ease-in-out;
transition:opacity .15s ease-in-out}
.docs .docs-content .docs-content-wrapper .docs-content-sidebar-toggle:hover{background-color:#3c3c3b}
.docs .docs-content .docs-content-wrapper .docs-content-sidebar-toggle.collapse .feather-list{opacity:0}
.docs .docs-content .docs-content-wrapper .docs-content-sidebar-toggle.collapse .feather-x{opacity:1}
@media (max-width:1000px) {.docs .docs-content .docs-content-wrapper .docs-content-sidebar-toggle{display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex}}
@media (max-width:640px) {.docs .docs-content .docs-content-wrapper .docs-content-sidebar-toggle{right:1rem;
bottom:1rem}}
.docs .docs-content .docs-content-inner{max-width:calc(100% - 19.5rem);
overflow:hidden}
.docs .docs-content .docs-content-inner .docs-content-metadata{margin-top:1.2rem;
margin-bottom:1.2rem;
display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex;
flex-wrap:wrap;
-webkit-align-items:baseline;
-webkit-box-align:baseline;
-ms-flex-align:baseline;
align-items:baseline}
@media (max-width:1000px) {.docs .docs-content .docs-content-inner .docs-content-metadata{-webkit-flex-direction:column;
-ms-flex-direction:column;
flex-direction:column}}
.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-repo{display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex}
.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-left{display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex;
-webkit-align-items:center;
-webkit-box-align:center;
-ms-flex-align:center;
align-items:center;
-webkit-flex:1;
-ms-flex:1;
flex:1}
.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-left>*{margin-right:2rem}
.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-left>*:last-child{margin-right:0}
.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-left a{display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex;
-webkit-align-items:center;
-webkit-box-align:center;
-ms-flex-align:center;
align-items:center;
color:#6f6970;
white-space:nowrap}
.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-left a:hover{color:#782b90}
.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-left a .feather{margin-right:.25em;
height:1rem}
@media (max-width:1000px) {.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-left{flex-wrap:wrap;
margin-bottom:1rem}}
.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-version{-webkit-flex:1;
-ms-flex:1;
flex:1;
display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex}
@media (min-width:1000px) {.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-version{-webkit-box-pack:end;
-ms-flex-pack:end;
-webkit-justify-content:flex-end;
justify-content:flex-end}}
.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-version svg{height:16px;
margin-bottom:-2px}
@media (max-width:1000px) {.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-version svg{height:1rem;
margin-bottom:-1px}}
.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-version .dropdown-menu a{-webkit-text-decoration:none;
text-decoration:none}
.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-version .dropdown-menu a:hover{color:#6f6970}
.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-label{display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex;
margin-left:2rem}
.docs .docs-content .docs-content-inner h1{padding-top:0;
margin-top:.6rem;
line-height:1.2}
.docs .docs-content .docs-content-inner h1::after{content:"";
width:30%;
display:block;
border:2px solid #782b90;
border-radius:2px;
margin-top:1.1rem}
.docs .docs-content .docs-content-inner .ulist>ul{padding-left:1.1rem}
.docs .docs-content .docs-content-inner h2{border-top:1px solid #dee2e6;
margin-top:5rem;
padding-top:2rem}
.docs .docs-content .docs-content-inner h3, .docs .docs-content .docs-content-inner h4{margin-top:3rem}
@media (max-width:1250px) {.docs .docs-content .docs-content-inner{max-width:calc(100% - 17.5rem)}}
@media (max-width:1000px) {.docs .docs-content .docs-content-inner{max-width:100%}}
.docs .docs-content .admonitionblock{border-top-right-radius:.8rem;
border-bottom-right-radius:.8rem;
background-color:#f8f9fa;
padding:1rem;
margin:1.5rem 0;
border-left:9px solid transparent}
.docs .docs-content .admonitionblock.note, .docs .docs-content .admonitionblock.tip{border-color:#6cb9f0}
.docs .docs-content .admonitionblock.important, .docs .docs-content .admonitionblock.warning, .docs .docs-content .admonitionblock.caution{border-color:#f0a46c}
.docs .docs-content .admonitionblock tr{display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex;
-webkit-flex-direction:column;
-ms-flex-direction:column;
flex-direction:column}
.docs .docs-content .admonitionblock .title{font-weight:400}
.docs .docs-content .admonitionblock .title::after{content:":"}
.docs .docs-content dt{font-weight:400}
.docs .docs-content .anchor{opacity:0;
-webkit-align-self:flex-start;
-ms-flex-item-align:flex-start;
align-self:flex-start;
outline:none}
.docs .docs-content .anchor::after{content:"#";
position:absolute;
margin-left:-1.5rem;
color:#ced4da;
padding-right:.45rem}
.docs .docs-content .anchor:hover{opacity:1}
.docs .docs-content h2:hover .anchor, .docs .docs-content h3:hover .anchor, .docs .docs-content h4:hover .anchor, .docs .docs-content h5:hover .anchor, .docs .docs-content h6:hover .anchor{opacity:1}
.docs .docs-content h1 .anchor{display:none}
.docs .docs-content h4 .anchor::after, .docs .docs-content h5 .anchor::after, .docs .docs-content h6 .anchor::after{padding-right:.6rem}</style><style id="__jsx-7824b3ad3820c879">html{line-height:1.15;
-webkit-text-size-adjust:100%}
body{margin:0}
main{display:block}
h1{font-size:2em;
margin:.67em 0}
hr{box-sizing:content-box;
height:0;
overflow:visible}
pre{font-family:monospace, monospace;
font-size:1em}
a{background-color:transparent}
abbr[title]{border-bottom:none;
text-decoration:underline;
text-decoration:underline dotted}
b, strong{font-weight:bolder}
code, kbd, samp{font-family:monospace, monospace;
font-size:1em}
small{font-size:80%}
sub, sup{font-size:75%;
line-height:0;
position:relative;
vertical-align:baseline}
sub{bottom:-0.25em}
sup{top:-0.5em}
img{border-style:none}
button, input, optgroup, select, textarea{font-family:inherit;
font-size:100%;
line-height:1.15;
margin:0}
button, input{overflow:visible}
button, select{text-transform:none}
button, [type=button], [type=reset], [type=submit]{-webkit-appearance:button}
button::-moz-focus-inner, [type=button]::-moz-focus-inner, [type=reset]::-moz-focus-inner, [type=submit]::-moz-focus-inner{border-style:none;
padding:0}
button:-moz-focusring, [type=button]:-moz-focusring, [type=reset]:-moz-focusring, [type=submit]:-moz-focusring{outline:1px dotted ButtonText}
fieldset{padding:.35em .75em .625em}
legend{box-sizing:border-box;
color:inherit;
display:table;
max-width:100%;
padding:0;
white-space:normal}
progress{vertical-align:baseline}
textarea{overflow:auto}
[type=checkbox], [type=radio]{box-sizing:border-box;
padding:0}
[type=number]::-webkit-inner-spin-button, [type=number]::-webkit-outer-spin-button{height:auto}
[type=search]{-webkit-appearance:textfield;
outline-offset:-2px}
[type=search]::-webkit-search-decoration{-webkit-appearance:none}
::-webkit-file-upload-button{-webkit-appearance:button;
font:inherit}
details{display:block}
summary{display:list-item}
template{display:none}
[hidden]{display:none}
.hljs, pre{display:block;
overflow-x:auto;
padding:.5em;
background:#3a2840;
color:#fff}
.hljs.language-shell :not(.bash)+.bash, .hljs.language-better-shell :not(.bash)+.bash, pre.language-shell :not(.bash)+.bash, pre.language-better-shell :not(.bash)+.bash{color:#d2a8e0}
pre{border-radius:.8rem;
padding:1rem;
font-size:.875rem;
margin:1.5rem 0}
.hljs-keyword, .hljs-selector-tag, .hljs-tag{color:#d2a8e0}
.hljs-template-tag{color:red}
.hljs-number{color:#6cb9f0}
.hljs-variable, .hljs-template-variable, .hljs-attribute, .hljs-literal{color:#c9e5f9}
.hljs-subst{color:red}
.hljs-title, .hljs-name, .hljs-selector-id, .hljs-selector-class, .hljs-section, .hljs-type{color:#f0a46c}
.hljs-symbol, .hljs-bullet, .hljs-link{color:#d2a8e0}
.hljs-deletion, .hljs-string, .hljs-built_in, .hljs-builtin-name{color:#6cb9f0}
.hljs-addition, .hljs-comment, .hljs-quote, .hljs-meta{color:#adb5bd}
.hljs-emphasis{font-style:italic}
.hljs-strong{font-weight:bold}
#nprogress{pointer-events:none}
#nprogress .bar{background:#29d;
position:fixed;
z-index:1031;
top:0;
left:0;
width:100%;
height:2px}
#nprogress .peg{display:block;
position:absolute;
right:0px;
width:100px;
height:100%;
box-shadow:0 0 10px #29d, 0 0 5px #29d;
opacity:1;
-webkit-transform:rotate(3deg) translate(0px, -4px);
-ms-transform:rotate(3deg) translate(0px, -4px);
-webkit-transform:rotate(3deg) translate(0px, -4px);
-moz-transform:rotate(3deg) translate(0px, -4px);
-ms-transform:rotate(3deg) translate(0px, -4px);
transform:rotate(3deg) translate(0px, -4px)}
#nprogress .spinner{display:block;
position:fixed;
z-index:1031;
top:15px;
right:15px}
#nprogress .spinner-icon{width:18px;
height:18px;
box-sizing:border-box;
border:solid 2px transparent;
border-top-color:#29d;
border-left-color:#29d;
border-radius:50%;
-webkit-animation:nprogress-spinner 400ms linear infinite;
-webkit-animation:nprogress-spinner 400ms linear infinite;
animation:nprogress-spinner 400ms linear infinite}
.nprogress-custom-parent{overflow:hidden;
position:relative}
.nprogress-custom-parent #nprogress .spinner, .nprogress-custom-parent #nprogress .bar{position:absolute}
@keyframes nprogress-spinner {0% {-webkit-transform:rotate(0deg)}100% {-webkit-transform:rotate(360deg)}}
@keyframes nprogress-spinner {0% {transform:rotate(0deg)}100% {transform:rotate(360deg)}}
#nprogress .bar{background:#782b90}
#nprogress .peg{box-shadow:0 0 10px #782b90, 0 0 5px #782b90}
#nprogress .spinner-icon{border-top-color:#782b90;
border-left-color:#782b90}
html{box-sizing:border-box}
*, *::before, *::after{box-sizing:inherit}
:root{font-size:18px}
@media (max-width:1000px) {:root{font-size:17.1px}}
@media (max-width:768px) {:root{font-size:16.2px}}
@media (max-width:640px) {:root{font-size:15.3px}}
body, input{font-family:Roboto, sans-serif;
font-weight:300;
line-height:1.7;
color:#3c3c3b}
input{outline:none}
h1, h2, h3, h4, h5, h6{font-weight:400}
h1{font-size:2.5rem}
h2{font-size:2rem}
h3{font-size:1.75rem}
h4{font-size:1.5rem}
h5{font-size:1.25rem}
h6{font-size:1.1rem}
.container{width:100%;
padding-right:.8rem;
padding-left:.8rem;
margin-right:auto;
margin-left:auto}
@media (min-width:640px) {.container{max-width:620px}}
@media (min-width:768px) {.container{max-width:738px}}
@media (min-width:1000px) {.container{max-width:950px}}
@media (min-width:1250px) {.container{max-width:1180px}}
@media (min-width:1250px) {.container-narrow{max-width:950px}}
.img-fluid{max-width:100%}
a{-webkit-text-decoration:none;
text-decoration:none;
color:#782b90}
a:hover{text-decoration:underline;
color:#571f69}
img{vertical-align:middle}
svg{overflow:hidden;
vertical-align:middle}
code, pre{font-family:"Roboto Mono", SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace}
p code{display:-webkit-inline-box;
display:-webkit-inline-flex;
display:-ms-inline-flexbox;
display:inline-flex;
max-width:100%;
overflow:auto}
.heading-anchor{opacity:0;
-webkit-align-self:flex-start;
-ms-flex-item-align:flex-start;
align-self:flex-start;
outline:none}
.heading-anchor::after{content:"#";
position:absolute;
margin-left:-1.5rem;
color:#ced4da;
padding-right:.45rem}
.heading-anchor:hover{opacity:1}
h2:hover .heading-anchor, h3:hover .heading-anchor, h4:hover .heading-anchor, h5:hover .heading-anchor, h6:hover .heading-anchor{opacity:1}
h1 .heading-anchor{display:none}
h4 .heading-anchor::after, h5 .heading-anchor::after, h6 .heading-anchor::after{padding-right:.6rem}</style><style data-href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500&display=swap">@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5vAA.woff) format('woff')}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Me5g.woff) format('woff')}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmEU9vAA.woff) format('woff')}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5fCRc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5fABc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5fCBc4AMP6lbBP.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5fBxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5fCxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5fChc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5fBBc4AMP6lQ.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Mu72xKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Mu5mxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Mu7mxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Mu4WxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Mu7WxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Mu7GxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Mu4mxKKTU1Kg.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmEU9fCRc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmEU9fABc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmEU9fCBc4AMP6lbBP.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmEU9fBxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmEU9fCxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmEU9fChc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmEU9fBBc4AMP6lQ.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style><style data-href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@300;400&display=swap">@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZKCA.woff) format('woff')}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVl2ZhZI2eCN5jzbjEETS9weq8-59Y.woff) format('woff')}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCkYb9lecyVC4A.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCAYb9lecyVC4A.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCgYb9lecyVC4A.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCcYb9lecyVC4A.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCsYb9lecyVC4A.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCoYb9lecyVC4A.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCQYb9lecyU.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVl2ZhZI2eCN5jzbjEETS9weq8-19-7DQk6YvNkeg.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVl2ZhZI2eCN5jzbjEETS9weq8-19a7DQk6YvNkeg.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVl2ZhZI2eCN5jzbjEETS9weq8-1967DQk6YvNkeg.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVl2ZhZI2eCN5jzbjEETS9weq8-19G7DQk6YvNkeg.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVl2ZhZI2eCN5jzbjEETS9weq8-1927DQk6YvNkeg.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVl2ZhZI2eCN5jzbjEETS9weq8-19y7DQk6YvNkeg.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVl2ZhZI2eCN5jzbjEETS9weq8-19K7DQk6YvM.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style><style data-href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400&display=swap">@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vqPQA.woff) format('woff')}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vq_SeW-AJi8SJQtQ4Y.woff) format('woff');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vq_QOW-AJi8SJQtQ4Y.woff) format('woff');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vq_R-W-AJi8SJQtQ4Y.woff) format('woff');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vq_S-W-AJi8SJQtQ4Y.woff) format('woff');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vq_SuW-AJi8SJQtQ4Y.woff) format('woff');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vq_ROW-AJi8SJQt.woff) format('woff');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><body data-build-time="2022-02-24T02:37:13.496Z" data-build-commit-id="fdcb26ad43d60aa9722ee97de813703159085b39" data-build-run-id="1890855432"><div id="__next" data-reactroot=""><main class="jsx-efcc50be384cabc7 page docs"><header><div class="jsx-f705e145f931f504 navbar"><div class="jsx-f705e145f931f504 navbar-content container"><div class="jsx-f705e145f931f504 navbar-logo"><a class="jsx-f705e145f931f504" href="/"><img src="data:image/svg+xml,%3csvg version=&#x27;1.1&#x27; id=&#x27;Layer_1&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27; x=&#x27;0&#x27; y=&#x27;0&#x27; viewBox=&#x27;0 0 1232.6 315.2&#x27; style=&#x27;enable-background:new 0 0 1232.6 315.2&#x27; xml:space=&#x27;preserve&#x27;%3e%3cstyle%3e.st0%7bfill:%23782a91%7d%3c/style%3e%3cpath d=&#x27;M120.9 214.2 190.5 0h52.3l-98.5 273.8H98.2L0 0h52.1l68.8 214.2zm291.2-62.6H299.6v84.2H431v38H252V0h177.7v38.4H299.6V114h112.5v37.6zm83.7-113.2H546c16.5.3 29 4.4 37.3 12.4 8.3 8 12.5 19.4 12.5 34 0 14-4.5 25.1-13.5 33.2-9 8.1-21.6 12.1-37.6 12.1h-27.1v24.2l86.1 119.5h51v-2.4l-77.2-106.7c24.9-5.5 43.3-21.7 52.6-35.9 8.2-12.6 13.3-27.7 13.3-46 0-26.8-8.6-47.4-25.8-61.5C600.5 7.1 576.1 0 544.5 0h-96.3v273.8h47.6&#x27;/%3e%3cpath class=&#x27;st0&#x27; d=&#x27;m1052.3 157.7-41.5 62.7 29.7 53.4h85.1z&#x27;/%3e%3ccircle class=&#x27;st0&#x27; cx=&#x27;827.9&#x27; cy=&#x27;274.7&#x27; r=&#x27;40.5&#x27;/%3e%3cpath class=&#x27;st0&#x27; d=&#x27;m1037 0-47.6 74.2L949 0h-84l85.3 135.8-67.1 105.7c5.7 9.5 9.1 20.5 9.2 32.4h50.1L1121.3 0H1037z&#x27;/%3e%3cpath d=&#x27;M763.5 273.8c.1-9.9 2.5-19.2 6.6-27.5V38.4h85.4V0H638.2v38.4h84.6v235.4h40.7zm414-266.9h-15.3v42.2h-8.5V6.9h-15.2V0h39v6.9zM1193 0l14.2 37.7L1221.3 0h11v49.1h-8.5V32.9l.8-21.7-14.5 37.9h-6.1l-14.5-37.8.8 21.6v16.2h-8.5V0h11.2z&#x27;/%3e%3c/svg%3e" alt="Vert.x Logo" class="jsx-f705e145f931f504"/></a></div><div class="jsx-f705e145f931f504 navbar-collapse-button"><span class="jsx-f705e145f931f504"></span><span class="jsx-f705e145f931f504"></span><span class="jsx-f705e145f931f504"></span></div><div class="jsx-f705e145f931f504 navbar-right"><div class="jsx-f705e145f931f504 navbar-menu"><span class="jsx-f705e145f931f504 navbar-menu-item with-drop-down"><div class="jsx-6650573c8f14945d dropdown"><a class="jsx-6650573c8f14945d dropdown-title">开始<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="jsx-6650573c8f14945d dropdown-menu"><a class="jsx-f705e145f931f504" href="/introduction-to-vertx-and-reactive/"><li class="jsx-400ec7965926e858 dropdown-item">简介</li></a><a class="jsx-f705e145f931f504" href="/get-started/"><li class="jsx-400ec7965926e858 dropdown-item">开始</li></a><a href="https://start.vertx.io/" target="_blank" rel="noreferrer" class="jsx-f705e145f931f504"><li class="jsx-400ec7965926e858 dropdown-item">应用生成器 <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a></ul></div></span><a class="jsx-f705e145f931f504 navbar-menu-item" href="/docs/">文档</a><span class="jsx-f705e145f931f504 navbar-menu-item with-drop-down"><div class="jsx-6650573c8f14945d dropdown"><a class="jsx-6650573c8f14945d dropdown-title">资源<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="jsx-6650573c8f14945d dropdown-menu"><a class="jsx-f705e145f931f504" href="/faq/"><li class="jsx-400ec7965926e858 dropdown-item">答疑</li></a><a class="jsx-f705e145f931f504" href="/channels/"><li class="jsx-400ec7965926e858 dropdown-item">联系渠道</li></a><a href="https://how-to.vertx.io/" target="_blank" rel="noreferrer" class="jsx-f705e145f931f504"><li class="jsx-400ec7965926e858 dropdown-item">操作指南 <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a><a href="https://github.com/vert-x3/vertx-eventbus-bridge-clients" target="_blank" rel="noreferrer" class="jsx-f705e145f931f504"><li class="jsx-400ec7965926e858 dropdown-item">EventBus Bridge Clients <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a><a href="https://github.com/vert-x3/advanced-vertx-guide" target="_blank" rel="noreferrer" class="jsx-f705e145f931f504"><li class="jsx-400ec7965926e858 dropdown-item">Advanced Vert.x Guide <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a></ul></div></span><a class="jsx-f705e145f931f504 navbar-menu-item" href="/blog/">博客</a><a class="jsx-f705e145f931f504 navbar-menu-item" href="/community/">社区</a><a class="jsx-f705e145f931f504 navbar-menu-item" href="/translation/">翻译团队</a></div><div class="jsx-f705e145f931f504 navbar-social"><a href="https://github.com/vert-x3/vertx-awesome" title="Awesome Vert.x" target="_blank" rel="noopener noreferrer" class="jsx-f705e145f931f504 navbar-social-link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="List of awesome Vert.x projects"><title>Awesome Vert.x</title><path d="M24 11.438l-6.154-5.645-.865.944 5.128 4.7H1.895l5.128-4.705-.865-.943-6.154 5.649H0v3.72c0 1.683 1.62 3.053 3.61 3.053h3.795c1.99 0 3.61-1.37 3.61-3.051v-2.446h1.97v2.446c0 1.68 1.62 3.051 3.61 3.051h3.794c1.99 0 3.61-1.37 3.61-3.051v-3.721z"></path></svg></a><a href="https://stackoverflow.com/questions/tagged/vert.x" title="Stack Overflow" target="_blank" rel="noopener noreferrer" class="jsx-f705e145f931f504 navbar-social-link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Stack Overflow questions related to Vert.x"><title>stackoverflow</title><path d="M15.725 0l-1.72 1.277 6.39 8.588 1.716-1.277L15.725 0zm-3.94 3.418l-1.369 1.644 8.225 6.85 1.369-1.644-8.225-6.85zm-3.15 4.465l-.905 1.94 9.702 4.517.904-1.94-9.701-4.517zm-1.85 4.86l-.44 2.093 10.473 2.201.44-2.092-10.473-2.203zM1.89 15.47V24h19.19v-8.53h-2.133v6.397H4.021v-6.396H1.89zm4.265 2.133v2.13h10.66v-2.13H6.154Z"></path></svg></a><a href="https://www.youtube.com/channel/UCGN6L3tRhs92Uer3c6VxOSA" title="YouTube" target="_blank" rel="noopener noreferrer" class="jsx-f705e145f931f504 navbar-social-link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="YouTube channel of Vert.x"><title>youtube</title><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"></path></svg></a><a href="https://discord.gg/KzEMwP2" title="Discord" target="_blank" rel="noopener noreferrer" class="jsx-f705e145f931f504 navbar-social-link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Eclipse Vert.x channel on Discord"><title>discord</title><path d="M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.946 2.4189-2.1568 2.4189Z"></path></svg></a><a href="https://groups.google.com/forum/?fromgroups#!forum/vertx" title="Vert.x 用户组" target="_blank" rel="noopener noreferrer" class="jsx-f705e145f931f504 navbar-social-link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="A Google group for Vert.x users"><title>Vert.x 用户组</title><path d="M.92 3.332c-.776 0-1.216.67-.692 1.383l2.537 4.403v7.86c0 2.013 1.467 3.69 3.459 3.69H20.31a3.75 3.75 0 003.69-3.69V7.043a3.723 3.723 0 00-3.668-3.71zm5.786 3.71H20.1c.587 0 1.153.357 1.153.923 0 .566-.566.922-1.153.922H6.706c-.587 0-1.153-.356-1.153-.922 0-.566.566-.923 1.153-.923zm0 3.69H20.1c.587 0 1.153.356 1.153.922 0 .566-.566.922-1.153.922H6.706c-.587 0-1.153-.356-1.153-.922 0-.566.566-.922 1.153-.922zm-.021 3.71h9.705c.587 0 1.153.356 1.153.922 0 .566-.566.923-1.153.923H6.685c-.587 0-1.153-.357-1.153-.923 0-.566.566-.922 1.153-.922Z"></path></svg></a><a href="https://qm.qq.com/cgi-bin/qm/qr?k=QFrKfwIVTuShDdh7puvfJWjqOx4C014c&amp;jump_from=webapi" title="Vert.x中国用户组QQ群" target="_blank" rel="noopener noreferrer" class="jsx-f705e145f931f504 navbar-social-link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Vert.x中国用户组QQ群"><title>Vert.x中国用户组QQ群</title><path d="M21.395 15.035a39.548 39.548 0 0 0-.803-2.264l-1.079-2.695c.001-.032.014-.562.014-.836C19.526 4.632 17.351 0 12 0S4.474 4.632 4.474 9.241c0 .274.013.804.014.836l-1.08 2.695a38.97 38.97 0 0 0-.802 2.264c-1.021 3.283-.69 4.643-.438 4.673.54.065 2.103-2.472 2.103-2.472 0 1.469.756 3.387 2.394 4.771-.612.188-1.363.479-1.845.835-.434.32-.379.646-.301.778.343.578 5.883.369 7.482.189 1.6.18 7.14.389 7.483-.189.078-.132.132-.458-.301-.778-.483-.356-1.233-.646-1.846-.836 1.637-1.384 2.393-3.302 2.393-4.771 0 0 1.563 2.537 2.103 2.472.251-.03.581-1.39-.438-4.673zM12.662 4.846c.039-1.052.659-1.878 1.385-1.846s1.281.912 1.242 1.964c-.039 1.051-.659 1.878-1.385 1.846s-1.282-.912-1.242-1.964zM9.954 3c.725-.033 1.345.794 1.384 1.846.04 1.052-.517 1.931-1.242 1.963-.726.033-1.346-.794-1.385-1.845C8.672 3.912 9.228 3.033 9.954 3zM7.421 8.294c.194-.43 2.147-.908 4.566-.908h.026c2.418 0 4.372.479 4.566.908a.14.14 0 0 1 .014.061c0 .031-.01.059-.026.083-.163.238-2.333 1.416-4.553 1.416h-.026c-2.221 0-4.39-1.178-4.553-1.416a.136.136 0 0 1-.014-.144zm10.422 8.622c-.22 3.676-2.403 5.987-5.774 6.021h-.137c-3.37-.033-5.554-2.345-5.773-6.021-.081-1.35.001-2.496.147-3.43.318.063.638.122.958.176v3.506s1.658.334 3.318.103v-3.225c.488.027.96.04 1.406.034h.025c1.678.021 3.714-.204 5.683-.594.146.934.227 2.08.147 3.43zM10.48 5.804c.313-.041.542-.409.508-.825-.033-.415-.314-.72-.629-.679-.313.04-.541.409-.508.824.034.417.315.72.629.68zM14.479 5.156c.078.037.221.042.289-.146.035-.095.025-.165-.009-.214-.023-.033-.133-.118-.371-.176-.904-.22-1.341.384-1.405.499-.04.072-.012.176.056.227.067.051.139.037.179-.006.58-.628 1.21-.208 1.261-.184z"></path></svg></a><a href="https://qun.qq.com/qqweb/qunpro/share?_wv=3&amp;_wwv=128&amp;inviteCode=1reLvB&amp;from=246610&amp;biz=ka" title="Vert.x中国用户组QQ群" target="_blank" rel="noopener noreferrer" class="jsx-f705e145f931f504 navbar-social-link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 200 200" aria-label="Vert.x中国用户组QQ群"><title>Vert.x中国用户组QQ群</title><path d="M13 73L16 49L52 49L58 14L82 14L77 49L135 49L141 14L166 14L160 49L195 49L192 73L157 73L148 124L184 124L181 149L144 149L137 193L90 149L61 149L55 185L31 185L36 149L0 149L6 124L100 124L120 144L131 75L72 75L64 124L40 124L48 73Z"></path></svg></a></div></div></div></div></header><div class="jsx-efcc50be384cabc7 page-content docs-content"><div class="jsx-efcc50be384cabc7 container"><div class="jsx-efcc50be384cabc7 docs-content-wrapper"><aside class="jsx-efcc50be384cabc7 "><div class="jsx-efcc50be384cabc7 docs-content-wrapper-sidebar"><div class="jsx-d1843944f2d67b search-panel"><div class="jsx-20d862052e50feff search"><input type="text" placeholder="Search..." value="" class="jsx-20d862052e50feff"/><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="search-icon"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="search-icon-delete"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg></div><ul class="jsx-117e429f22e394dc search-results"></ul><div class="jsx-117e429f22e394dc search-results-none">No results.</div></div><div class="jsx-efcc50be384cabc7 docs-content-toc"><div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_usage">使用方法</a></li>
<li><a href="#_getting_started">开始</a></li>
<li><a href="#_connecting_to_mysql">连接到 MySQL</a>
<ul class="sectlevel2">
<li><a href="#_unix_domain_socket">Unix 域套接字</a></li>
</ul>
</li>
<li><a href="#_configuration">配置</a>
<ul class="sectlevel2">
<li><a href="#_data_object">数据对象</a></li>
<li><a href="#_connection_uri">连接 URI</a></li>
</ul>
</li>
<li><a href="#_connect_retries">连接重试</a></li>
<li><a href="#_running_queries">运行查询</a>
<ul class="sectlevel2">
<li><a href="#_prepared_queries">预处理查询</a></li>
<li><a href="#_batches">批处理</a></li>
</ul>
</li>
<li><a href="#_mysql_last_insert_id">MySQL LAST_INSERT_ID</a></li>
<li><a href="#_using_connections">使用连接</a>
<ul class="sectlevel2">
<li><a href="#_getting_a_connection">获取连接</a></li>
<li><a href="#_simplified_connection_api">简单连接 API</a></li>
</ul>
</li>
<li><a href="#_using_transactions">使用事务</a>
<ul class="sectlevel2">
<li><a href="#_transactions_with_connections">带事务的连接</a></li>
<li><a href="#_simplified_transaction_api_2">简单事务 API</a></li>
</ul>
</li>
<li><a href="#_cursors_and_streaming">游标和流</a></li>
<li><a href="#_tracing_queries">追踪查询</a></li>
<li><a href="#_mysql_type_mapping">MySQL 类型映射</a>
<ul class="sectlevel2">
<li><a href="#_implicit_type_conversion">隐式类型转换</a></li>
<li><a href="#_handling_boolean">处理布尔值</a></li>
<li><a href="#_handling_json">处理 JSON</a></li>
<li><a href="#_handling_bit">处理 BIT</a></li>
<li><a href="#_handling_time">处理 TIME</a></li>
<li><a href="#_handling_numeric">处理 NUMERIC</a></li>
<li><a href="#_handling_enum">处理 ENUM</a></li>
<li><a href="#_handling_geometry">处理 GEOMETRY</a></li>
</ul>
</li>
<li><a href="#_collector_queries">集合类查询</a></li>
<li><a href="#_mysql_stored_procedure">MySQL 存储过程</a></li>
<li><a href="#_mysql_local_infile">MySQL 导入本地文件</a></li>
<li><a href="#_authentication">认证</a>
<ul class="sectlevel2">
<li><a href="#_default_authentication_plugin">默认身份验证插件</a></li>
<li><a href="#_new_authentication_method_introduced_in_mysql_8">MySQL 8 中引入的新身份验证方法</a></li>
</ul>
</li>
<li><a href="#_using_ssltls">使用 SSL/TLS</a></li>
<li><a href="#_mysql_utility_command">MySQL 实用程序命令</a>
<ul class="sectlevel2">
<li><a href="#_com_ping">COM_PING</a></li>
<li><a href="#_com_reset_connection">COM_RESET_CONNECTION</a></li>
<li><a href="#_com_change_user">COM_CHANGE_USER</a></li>
<li><a href="#_com_init_db">COM_INIT_DB</a></li>
<li><a href="#_com_statistics">COM_STATISTICS</a></li>
<li><a href="#_com_debug">COM_DEBUG</a></li>
<li><a href="#_com_set_option">COM_SET_OPTION</a></li>
</ul>
</li>
<li><a href="#_mysql_and_mariadb_version_support_matrix">MySQL 和 MariaDB 版本支持情况</a></li>
<li><a href="#_pitfalls_good_practices">陷阱和最佳实践</a>
<ul class="sectlevel2">
<li><a href="#_prepared_statement_count_limit">预处理语句的计数限制</a></li>
<li><a href="#_demystifying_prepared_batch">揭开批量预处理神秘面纱</a></li>
<li><a href="#_tricky_date_time_data_types">棘手的日期和时间数据类型</a></li>
</ul>
</li>
<li><a href="#_advanced_pool_configuration">高级连接池配置</a>
<ul class="sectlevel2">
<li><a href="#_server_load_balancing">数据库服务负载均衡</a></li>
<li><a href="#_pool_connection_initialization">连接初始化</a></li>
</ul>
</li>
</ul>
</div></div></div></aside><div class="jsx-efcc50be384cabc7 docs-content-sidebar-toggle"><div style="position:relative" class="jsx-efcc50be384cabc7"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-list"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-x"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></div></div><div class="jsx-efcc50be384cabc7 docs-content-inner"><div class="jsx-efcc50be384cabc7 docs-content-metadata"><div class="jsx-efcc50be384cabc7 docs-content-metadata-left"><div class="jsx-efcc50be384cabc7 docs-content-metadata-repo"><div class="jsx-d38685edc31911e0 github-stars"><a href="https://github.com/eclipse-vertx/vertx-sql-client" class="jsx-d38685edc31911e0"><div class="jsx-d38685edc31911e0 icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg></div> <!-- -->null stars</a></div></div><div class="jsx-efcc50be384cabc7"><a href="https://vertx.io/docs/apidocs" class="jsx-efcc50be384cabc7"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path></svg> API</a></div><div class="jsx-efcc50be384cabc7 docs-content-metadata-examples"><a href="https://github.com/vert-x3/vertx-examples/tree/4.x/sql-client-examples"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather"><path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"></path></svg> Examples</a></div><div class="jsx-efcc50be384cabc7 docs-content-metadata-edit"><a href="https://github.com/vertx-china/vertx-web-site/tree/master/docs/translation/vertx-mysql-client/java"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg> 改进翻译</a></div><span class="jsx-efcc50be384cabc7 docs-content-metadata-version"><div class="jsx-6650573c8f14945d dropdown"><a class="jsx-6650573c8f14945d dropdown-title">v4.2.5<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="jsx-6650573c8f14945d dropdown-menu align-right"><a href="/docs/vertx-mysql-client/java/"><li class="jsx-400ec7965926e858 dropdown-item active has-active-siblings"><span class="jsx-400ec7965926e858 dropdown-check-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg></span>Latest (v<!-- -->4.2.5<!-- -->)</li></a><a href="/docs/4.1.8/vertx-mysql-client/java/"><li class="jsx-400ec7965926e858 dropdown-item has-active-siblings">v<!-- -->4.1.8</li></a><a href="/docs/4.0.3/vertx-mysql-client/java/"><li class="jsx-400ec7965926e858 dropdown-item has-active-siblings">v<!-- -->4.0.3</li></a><a href="/docs/3.9.12/vertx-mysql-client/java/"><li class="jsx-400ec7965926e858 dropdown-item has-active-siblings">v<!-- -->3.9.12</li></a></ul></div></span></div></div><div class="jsx-efcc50be384cabc7"><h1>响应式 MySQL 客户端</h1>

<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>响应式 MySQL 客户端具有简单易懂的 API，专注于可扩展性和低开销。</p>
</div>
<div class="paragraph">
<p><strong>特性</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>事件驱动</p>
</li>
<li>
<p>轻量级</p>
</li>
<li>
<p>内置连接池</p>
</li>
<li>
<p>预处理查询缓存</p>
</li>
<li>
<p>支持游标</p>
</li>
<li>
<p>流式行处理</p>
</li>
<li>
<p>RxJava API</p>
</li>
<li>
<p>支持内存直接映射到对象，避免了不必要的复制</p>
</li>
<li>
<p>完整的数据类型支持</p>
</li>
<li>
<p>支持存储过程</p>
</li>
<li>
<p>支持 TLS/SSL</p>
</li>
<li>
<p>MySQL 实用程序命令支持</p>
</li>
<li>
<p>支持 MySQL 和 MariaDB</p>
</li>
<li>
<p>丰富的字符排序（collation）和字符集支持</p>
</li>
<li>
<p>Unix 域套接字</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_usage"><a class="anchor" href="#_usage"></a>使用方法</h2>
<div class="sectionbody">
<div class="paragraph">
<p>使用响应式 MySQL 客户端，需要将以下依赖项添加到项目构建工具的 <em>依赖</em> 配置中：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Maven (在您的 <code>pom.xml</code>):</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.vertx<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>vertx-mysql-client<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.1.8<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Gradle (在您的 <code>build.gradle</code> 文件中):</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">dependencies {
 compile <span class="hljs-string">&#x27;io.vertx:vertx-mysql-client:4.1.8&#x27;</span>
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_getting_started"><a class="anchor" href="#_getting_started"></a>开始</h2>
<div class="sectionbody">
<div class="paragraph">
<p>以下是最简单的连接，查询和断开连接方法</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">MySQLConnectOptions connectOptions = <span class="hljs-keyword">new</span> MySQLConnectOptions()
  .setPort(<span class="hljs-number">3306</span>)
  .setHost(<span class="hljs-string">&quot;the-host&quot;</span>)
  .setDatabase(<span class="hljs-string">&quot;the-db&quot;</span>)
  .setUser(<span class="hljs-string">&quot;user&quot;</span>)
  .setPassword(<span class="hljs-string">&quot;secret&quot;</span>);

<span class="hljs-comment">// 连接池选项</span>
PoolOptions poolOptions = <span class="hljs-keyword">new</span> PoolOptions()
  .setMaxSize(<span class="hljs-number">5</span>);

<span class="hljs-comment">// 创建客户端池</span>
MySQLPool client = MySQLPool.pool(connectOptions, poolOptions);

<span class="hljs-comment">// 一个简单的查询</span>
client
  .query(<span class="hljs-string">&quot;SELECT * FROM users WHERE id=&#x27;julien&#x27;&quot;</span>)
  .execute(ar -&gt; {
  <span class="hljs-keyword">if</span> (ar.succeeded()) {
    RowSet&lt;Row&gt; result = ar.result();
    System.out.println(<span class="hljs-string">&quot;Got &quot;</span> + result.size() + <span class="hljs-string">&quot; rows &quot;</span>);
  } <span class="hljs-keyword">else</span> {
    System.out.println(<span class="hljs-string">&quot;Failure: &quot;</span> + ar.cause().getMessage());
  }

  <span class="hljs-comment">// 现在关闭客户端池</span>
  client.close();
});</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_connecting_to_mysql"><a class="anchor" href="#_connecting_to_mysql"></a>连接到 MySQL</h2>
<div class="sectionbody">
<div class="paragraph">
<p>大多数时间，您将使用连接池连接到 MySQL：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">MySQLConnectOptions connectOptions = <span class="hljs-keyword">new</span> MySQLConnectOptions()
  .setPort(<span class="hljs-number">3306</span>)
  .setHost(<span class="hljs-string">&quot;the-host&quot;</span>)
  .setDatabase(<span class="hljs-string">&quot;the-db&quot;</span>)
  .setUser(<span class="hljs-string">&quot;user&quot;</span>)
  .setPassword(<span class="hljs-string">&quot;secret&quot;</span>);

<span class="hljs-comment">// 连接池选项</span>
PoolOptions poolOptions = <span class="hljs-keyword">new</span> PoolOptions()
  .setMaxSize(<span class="hljs-number">5</span>);

<span class="hljs-comment">// 创建带连接池的客户端</span>
MySQLPool client = MySQLPool.pool(connectOptions, poolOptions);</code></pre>
</div>
</div>
<div class="paragraph">
<p>带连接池的客户端使用连接池，任何操作都将借用连接池中的连接来执行该操作，
并将连接释放回连接池中。</p>
</div>
<div class="paragraph">
<p>如果您使用 Vert.x 运行，您可以将 Vertx 实例传递给它：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">MySQLConnectOptions connectOptions = <span class="hljs-keyword">new</span> MySQLConnectOptions()
  .setPort(<span class="hljs-number">3306</span>)
  .setHost(<span class="hljs-string">&quot;the-host&quot;</span>)
  .setDatabase(<span class="hljs-string">&quot;the-db&quot;</span>)
  .setUser(<span class="hljs-string">&quot;user&quot;</span>)
  .setPassword(<span class="hljs-string">&quot;secret&quot;</span>);

<span class="hljs-comment">// 连接池选项</span>
PoolOptions poolOptions = <span class="hljs-keyword">new</span> PoolOptions()
  .setMaxSize(<span class="hljs-number">5</span>);
<span class="hljs-comment">// 创建带连接池的客户端</span>
MySQLPool client = MySQLPool.pool(vertx, connectOptions, poolOptions);</code></pre>
</div>
</div>
<div class="paragraph">
<p>当您不再需要连接池时，您需要释放它：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">pool.close();</code></pre>
</div>
</div>
<div class="paragraph">
<p>当您需要在同一连接上执行多个操作时，您需要使用
<code><a href="../../apidocs/io/vertx/mysqlclient/MySQLConnection.html">connection</a></code> 客户端 。</p>
</div>
<div class="paragraph">
<p>您可以轻松地从连接池中获取一个：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">MySQLConnectOptions connectOptions = <span class="hljs-keyword">new</span> MySQLConnectOptions()
  .setPort(<span class="hljs-number">3306</span>)
  .setHost(<span class="hljs-string">&quot;the-host&quot;</span>)
  .setDatabase(<span class="hljs-string">&quot;the-db&quot;</span>)
  .setUser(<span class="hljs-string">&quot;user&quot;</span>)
  .setPassword(<span class="hljs-string">&quot;secret&quot;</span>);

<span class="hljs-comment">// 连接池选项</span>
PoolOptions poolOptions = <span class="hljs-keyword">new</span> PoolOptions()
  .setMaxSize(<span class="hljs-number">5</span>);

<span class="hljs-comment">// 创建带连接池的客户端</span>
MySQLPool client = MySQLPool.pool(vertx, connectOptions, poolOptions);

<span class="hljs-comment">// 从连接池获得连接</span>
client.getConnection().compose(conn -&gt; {
  System.out.println(<span class="hljs-string">&quot;Got a connection from the pool&quot;</span>);

  <span class="hljs-comment">// 所有操作都在同一连接上执行</span>
  <span class="hljs-keyword">return</span> conn
    .query(<span class="hljs-string">&quot;SELECT * FROM users WHERE id=&#x27;julien&#x27;&quot;</span>)
    .execute()
    .compose(res -&gt; conn
      .query(<span class="hljs-string">&quot;SELECT * FROM users WHERE id=&#x27;emad&#x27;&quot;</span>)
      .execute())
    .onComplete(ar -&gt; {
      <span class="hljs-comment">// 释放连接池的连接</span>
      conn.close();
    });
}).onComplete(ar -&gt; {
  <span class="hljs-keyword">if</span> (ar.succeeded()) {

    System.out.println(<span class="hljs-string">&quot;Done&quot;</span>);
  } <span class="hljs-keyword">else</span> {
    System.out.println(<span class="hljs-string">&quot;Something went wrong &quot;</span> + ar.cause().getMessage());
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>连接完成后，您必须关闭它以释放到连接池中，以便可以重复使用。</p>
</div>
<div class="sect2">
<h3 id="_unix_domain_socket"><a class="anchor" href="#_unix_domain_socket"></a>Unix 域套接字</h3>
<div class="paragraph">
<p>有时为了简单，安全或性能原因，需要通过 <a href="https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_socket">Unix 域套接字</a> 进行连接。</p>
</div>
<div class="paragraph">
<p>由于 JVM 不支持域套接字，因此首先必须向项目添加本地传输（native transport）扩展。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Maven (在您的 <code>pom.xml</code>):</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.netty<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>netty-transport-native-epoll<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${netty.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">classifier</span>&gt;</span>linux-x86_64<span class="hljs-tag">&lt;/<span class="hljs-name">classifier</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Gradle (在您的 <code>build.gradle</code> 文件中):</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">dependencies {
 compile <span class="hljs-string">&#x27;io.netty:netty-transport-native-epoll:${netty.version}:linux-x86_64&#x27;</span>
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">注意</div>
</td>
<td class="content">
ARM64 的原生 <code>epoll</code> 支持也可以与分类器（classifier） <code>linux-aarch64</code> 一起添加。
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">注意</div>
</td>
<td class="content">
如果您的团队中有 Mac 用户，在 <code>osx-x86_64</code> 上添加 <code>netty-transport-native-kqueue</code> 分类器（classifier）。
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>然后通过 <code><a href="../../apidocs/io/vertx/mysqlclient/MySQLConnectOptions.html#setHost-java.lang.String-">MySQLConnectOptions#setHost</a></code> 设置域套接字的路径：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">MySQLConnectOptions connectOptions = <span class="hljs-keyword">new</span> MySQLConnectOptions()
  .setHost(<span class="hljs-string">&quot;/var/run/mysqld/mysqld.sock&quot;</span>)
  .setDatabase(<span class="hljs-string">&quot;the-db&quot;</span>);

<span class="hljs-comment">// 连接池选项</span>
PoolOptions poolOptions = <span class="hljs-keyword">new</span> PoolOptions()
  .setMaxSize(<span class="hljs-number">5</span>);

<span class="hljs-comment">// 创建带连接池的客户端</span>
MySQLPool client = MySQLPool.pool(connectOptions, poolOptions);

<span class="hljs-comment">// 使用vertx实例创建带连接池的客户端</span>
<span class="hljs-comment">// 确保vertx实例已启用native transports</span>
<span class="hljs-comment">// vertxOptions.setPreferNativeTransport(true);</span>
MySQLPool client2 = MySQLPool.pool(vertx, connectOptions, poolOptions);</code></pre>
</div>
</div>
<div class="paragraph">
<p>有关 native transport 的详细信息，请参阅 <a href="https://vertx.io/docs/vertx-core/java/#_native_transports">Vert.x 文档</a> 。</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuration"><a class="anchor" href="#_configuration"></a>配置</h2>
<div class="sectionbody">
<div class="paragraph">
<p>有几个选项供您配置客户端。</p>
</div>
<div class="sect2">
<h3 id="_data_object"><a class="anchor" href="#_data_object"></a>数据对象</h3>
<div class="paragraph">
<p>配置客户端的简单方法就是指定 <code>MySQLConnectOptions</code> 数据对象。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">MySQLConnectOptions connectOptions = <span class="hljs-keyword">new</span> MySQLConnectOptions()
  .setPort(<span class="hljs-number">3306</span>)
  .setHost(<span class="hljs-string">&quot;the-host&quot;</span>)
  .setDatabase(<span class="hljs-string">&quot;the-db&quot;</span>)
  .setUser(<span class="hljs-string">&quot;user&quot;</span>)
  .setPassword(<span class="hljs-string">&quot;secret&quot;</span>);

<span class="hljs-comment">// 连接池选项</span>
PoolOptions poolOptions = <span class="hljs-keyword">new</span> PoolOptions().setMaxSize(<span class="hljs-number">5</span>);

<span class="hljs-comment">// 从数据对象创建连接池</span>
MySQLPool pool = MySQLPool.pool(vertx, connectOptions, poolOptions);

pool.getConnection(ar -&gt; {
  <span class="hljs-comment">// 处理您的连接</span>
});</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_collations_and_character_sets"><a class="anchor" href="#_collations_and_character_sets"></a>字符序（collations）和字符集（character sets）</h4>
<div class="paragraph">
<p>响应式 MySQL 客户端支持配置字符序或字符集，并将它们映射到一个相关的 <code>java.nio.charset.Charset</code> 。
您可以为数据库连接指定字符集，例如</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">MySQLConnectOptions connectOptions = <span class="hljs-keyword">new</span> MySQLConnectOptions();

<span class="hljs-comment">// 将连接的字符集设置为utf8而不是默认的字符集utf8mb4</span>
connectOptions.setCharset(<span class="hljs-string">&quot;utf8&quot;</span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>响应式 MySQL 客户端的默认字符集是 <code>utf8mb4</code> 。字符串值，如密码和错误消息等，总是使用 <code>UTF-8</code> 字符集解码。</p>
</div>
<div class="paragraph">
<p><code>characterEncoding</code> 选项用于设置字符串（例如查询字符串和参数值）使用的 Java 字符集，默认使用 <code>UTF-8</code> 字符集；如果设置为 <code>null</code> ，则客户端将使用 Java 的默认字符集。</p>
</div>
<div class="paragraph">
<p>您还可以为连接指定字符序，例如</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">MySQLConnectOptions connectOptions = <span class="hljs-keyword">new</span> MySQLConnectOptions();

<span class="hljs-comment">// 将连接的字符序设置为 utf8_general_ci 来代替默认字符序 utf8mb4_general_ci</span>
<span class="hljs-comment">// 设置字符序将覆盖charset选项</span>
connectOptions.setCharset(<span class="hljs-string">&quot;gbk&quot;</span>);
connectOptions.setCollation(<span class="hljs-string">&quot;utf8_general_ci&quot;</span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>请注意，在数据对象上设置字符序将覆盖 <strong>charset</strong> 和 <strong>characterEncoding</strong> 选项。</p>
</div>
<div class="paragraph">
<p>您可以执行 SQL <code>SHOW COLLATION;</code> 或 <code>SHOW CHARACTER SET;</code> 获取服务器支持的字符序和字符集。</p>
</div>
<div class="paragraph">
<p>有关 MySQL 字符集和字符序的更多信息，请参阅 <a href="https://dev.mysql.com/doc/refman/8.0/en/charset.html">MySQL 参考手册</a>。</p>
</div>
</div>
<div class="sect3">
<h4 id="_connection_attributes"><a class="anchor" href="#_connection_attributes"></a>连接属性</h4>
<div class="paragraph">
<p>还可以使用 <code>setProperties</code> 或 <code>addProperty</code> 方法配置连接属性。注意 <code>setProperties</code> 将覆盖客户端的默认属性。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">MySQLConnectOptions connectOptions = <span class="hljs-keyword">new</span> MySQLConnectOptions();

<span class="hljs-comment">// 添加连接属性</span>
connectOptions.addProperty(<span class="hljs-string">&quot;_java_version&quot;</span>, <span class="hljs-string">&quot;1.8.0_212&quot;</span>);

<span class="hljs-comment">// 覆盖属性</span>
Map&lt;String, String&gt; attributes = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();
attributes.put(<span class="hljs-string">&quot;_client_name&quot;</span>, <span class="hljs-string">&quot;myapp&quot;</span>);
attributes.put(<span class="hljs-string">&quot;_client_version&quot;</span>, <span class="hljs-string">&quot;1.0.0&quot;</span>);
connectOptions.setProperties(attributes);</code></pre>
</div>
</div>
<div class="paragraph">
<p>有关连接属性的更多信息，请参阅 <a href="https://dev.mysql.com/doc/refman/8.0/en/performance-schema-connection-attribute-tables.html">MySQL 参考手册</a>。</p>
</div>
</div>
<div class="sect3">
<h4 id="_useaffectedrows"><a class="anchor" href="#_useaffectedrows"></a>配置 <code>useAffectedRows</code></h4>
<div class="paragraph">
<p>您可以 <code>useAffectedRows</code> 选项以决定是否在连接到服务器时设置标志 <code>CLIENT_FOUND_ROWS</code>。如果指定了 <code>CLIENT_FOUND_ROWS</code> 标志，则受影响的行计数（返回的）是查找到的行数，而不是受影响的行数。</p>
</div>
<div class="paragraph">
<p>更多有关信息，请参阅 <a href="https://dev.mysql.com/doc/refman/8.0/en/mysql-affected-rows.html">MySQL 参考手册</a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_connection_uri"><a class="anchor" href="#_connection_uri"></a>连接 URI</h3>
<div class="paragraph">
<p>除了使用 <code>MySQLConnectOptions</code> 数据对象进行配置外，我们还为您提供了另外一种使用连接URI进行配置的方法：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">String connectionUri = <span class="hljs-string">&quot;mysql://dbuser:secretpassword@database.server.com:3211/mydb&quot;</span>;

<span class="hljs-comment">// 从连接URI创建连接池</span>
MySQLPool pool = MySQLPool.pool(connectionUri);

<span class="hljs-comment">// 从连接URI创建连接</span>
MySQLConnection.connect(vertx, connectionUri, res -&gt; {
  <span class="hljs-comment">// 处理您的连接</span>
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>有关连接字符串格式的有关更多信息，请参阅 <a href="https://dev.mysql.com/doc/refman/8.0/en/connecting-using-uri-or-key-value-pairs.html#connecting-using-uri">MySQL 参考手册</a>。</p>
</div>
<div class="paragraph">
<p>目前，客户端支持以下的连接 uri 参数关键字（不区分大小写）：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>host</p>
</li>
<li>
<p>port</p>
</li>
<li>
<p>user</p>
</li>
<li>
<p>password</p>
</li>
<li>
<p>schema</p>
</li>
<li>
<p>socket</p>
</li>
<li>
<p>useAffectedRows</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_connect_retries"><a class="anchor" href="#_connect_retries"></a>连接重试</h2>
<div class="sectionbody">
<div class="paragraph">
<p>您可以将客户端配置为在连接无法建立时重试。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">options
  .setReconnectAttempts(<span class="hljs-number">2</span>)
  .setReconnectInterval(<span class="hljs-number">1000</span>);</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_running_queries"><a class="anchor" href="#_running_queries"></a>运行查询</h2>
<div class="sectionbody">
<div class="paragraph">
<p>当您不需要事务或运行单个查询时，您可以直接在连接池上运行查询。连接池将使用其中一个连接来运行查询并将结果返回给您。</p>
</div>
<div class="paragraph">
<p>这是运行简单查询的方法：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">client
  .query(<span class="hljs-string">&quot;SELECT * FROM users WHERE id=&#x27;julien&#x27;&quot;</span>)
  .execute(ar -&gt; {
  <span class="hljs-keyword">if</span> (ar.succeeded()) {
    RowSet&lt;Row&gt; result = ar.result();
    System.out.println(<span class="hljs-string">&quot;Got &quot;</span> + result.size() + <span class="hljs-string">&quot; rows &quot;</span>);
  } <span class="hljs-keyword">else</span> {
    System.out.println(<span class="hljs-string">&quot;Failure: &quot;</span> + ar.cause().getMessage());
  }
});</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_prepared_queries"><a class="anchor" href="#_prepared_queries"></a>预处理查询</h3>
<div class="paragraph">
<p>您可以对预处理查询执行相同的操作。</p>
</div>
<div class="paragraph">
<p>SQL字符串可以使用数据库语法 `?` 按位置引用参数</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">client
  .preparedQuery(<span class="hljs-string">&quot;SELECT * FROM users WHERE id=?&quot;</span>)
  .execute(Tuple.of(<span class="hljs-string">&quot;julien&quot;</span>), ar -&gt; {
  <span class="hljs-keyword">if</span> (ar.succeeded()) {
    RowSet&lt;Row&gt; rows = ar.result();
    System.out.println(<span class="hljs-string">&quot;Got &quot;</span> + rows.size() + <span class="hljs-string">&quot; rows &quot;</span>);
  } <span class="hljs-keyword">else</span> {
    System.out.println(<span class="hljs-string">&quot;Failure: &quot;</span> + ar.cause().getMessage());
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>查询方法提供异步 <code><a href="../../apidocs/io/vertx/sqlclient/RowSet.html">RowSet</a></code> 实例，它适用于 <em>SELECT</em> 查询。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">client
  .preparedQuery(<span class="hljs-string">&quot;SELECT first_name, last_name FROM users&quot;</span>)
  .execute(ar -&gt; {
  <span class="hljs-keyword">if</span> (ar.succeeded()) {
    RowSet&lt;Row&gt; rows = ar.result();
    <span class="hljs-keyword">for</span> (Row row : rows) {
      System.out.println(<span class="hljs-string">&quot;User &quot;</span> + row.getString(<span class="hljs-number">0</span>) + <span class="hljs-string">&quot; &quot;</span> + row.getString(<span class="hljs-number">1</span>));
    }
  } <span class="hljs-keyword">else</span> {
    System.out.println(<span class="hljs-string">&quot;Failure: &quot;</span> + ar.cause().getMessage());
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>或 <em>UPDATE</em>/<em>INSERT</em> 查询:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">client
  .preparedQuery(<span class="hljs-string">&quot;INSERT INTO users (first_name, last_name) VALUES (?, ?)&quot;</span>)
  .execute(Tuple.of(<span class="hljs-string">&quot;Julien&quot;</span>, <span class="hljs-string">&quot;Viet&quot;</span>), ar -&gt; {
  <span class="hljs-keyword">if</span> (ar.succeeded()) {
    RowSet&lt;Row&gt; rows = ar.result();
    System.out.println(rows.rowCount());
  } <span class="hljs-keyword">else</span> {
    System.out.println(<span class="hljs-string">&quot;Failure: &quot;</span> + ar.cause().getMessage());
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p><code><a href="../../apidocs/io/vertx/sqlclient/Row.html">Row</a></code> 使您可以按索引访问数据</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">System.out.println(<span class="hljs-string">&quot;User &quot;</span> + row.getString(<span class="hljs-number">0</span>) + <span class="hljs-string">&quot; &quot;</span> + row.getString(<span class="hljs-number">1</span>));</code></pre>
</div>
</div>
<div class="paragraph">
<p>或按名字</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">System.out.println(<span class="hljs-string">&quot;User &quot;</span> + row.getString(<span class="hljs-string">&quot;first_name&quot;</span>) + <span class="hljs-string">&quot; &quot;</span> + row.getString(<span class="hljs-string">&quot;last_name&quot;</span>));</code></pre>
</div>
</div>
<div class="paragraph">
<p>客户端在这里不会使用任何魔术，并且无论您的SQL文本如何，列名都将用表中的名称标识。</p>
</div>
<div class="paragraph">
<p>您可以访问多样的类型</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">String firstName = row.getString(<span class="hljs-string">&quot;first_name&quot;</span>);
Boolean male = row.getBoolean(<span class="hljs-string">&quot;male&quot;</span>);
Integer age = row.getInteger(<span class="hljs-string">&quot;age&quot;</span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>您可以使用缓存的预处理语句执行一次性的预处理查询：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">connectOptions.setCachePreparedStatements(<span class="hljs-keyword">true</span>);
client
  .preparedQuery(<span class="hljs-string">&quot;SELECT * FROM users WHERE id = ?&quot;</span>)
  .execute(Tuple.of(<span class="hljs-string">&quot;julien&quot;</span>), ar -&gt; {
    <span class="hljs-keyword">if</span> (ar.succeeded()) {
      RowSet&lt;Row&gt; rows = ar.result();
      System.out.println(<span class="hljs-string">&quot;Got &quot;</span> + rows.size() + <span class="hljs-string">&quot; rows &quot;</span>);
    } <span class="hljs-keyword">else</span> {
      System.out.println(<span class="hljs-string">&quot;Failure: &quot;</span> + ar.cause().getMessage());
    }
  });</code></pre>
</div>
</div>
<div class="paragraph">
<p>您可以创建一个 <code>PreparedStatement</code> 并自己管理生命周期。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">sqlConnection
  .prepare(<span class="hljs-string">&quot;SELECT * FROM users WHERE id = ?&quot;</span>, ar -&gt; {
    <span class="hljs-keyword">if</span> (ar.succeeded()) {
      PreparedStatement preparedStatement = ar.result();
      preparedStatement.query()
        .execute(Tuple.of(<span class="hljs-string">&quot;julien&quot;</span>), ar2 -&gt; {
          <span class="hljs-keyword">if</span> (ar2.succeeded()) {
            RowSet&lt;Row&gt; rows = ar2.result();
            System.out.println(<span class="hljs-string">&quot;Got &quot;</span> + rows.size() + <span class="hljs-string">&quot; rows &quot;</span>);
            preparedStatement.close();
          } <span class="hljs-keyword">else</span> {
            System.out.println(<span class="hljs-string">&quot;Failure: &quot;</span> + ar2.cause().getMessage());
          }
        });
    } <span class="hljs-keyword">else</span> {
      System.out.println(<span class="hljs-string">&quot;Failure: &quot;</span> + ar.cause().getMessage());
    }
  });</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_batches"><a class="anchor" href="#_batches"></a>批处理</h3>
<div class="paragraph">
<p>您可以执行预处理的批处理</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">List&lt;Tuple&gt; batch = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();
batch.add(Tuple.of(<span class="hljs-string">&quot;julien&quot;</span>, <span class="hljs-string">&quot;Julien Viet&quot;</span>));
batch.add(Tuple.of(<span class="hljs-string">&quot;emad&quot;</span>, <span class="hljs-string">&quot;Emad Alblueshi&quot;</span>));

<span class="hljs-comment">// 执行预处理的批处理</span>
client
  .preparedQuery(<span class="hljs-string">&quot;INSERT INTO USERS (id, name) VALUES (?, ?)&quot;</span>)
  .executeBatch(batch, res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {

    <span class="hljs-comment">// 处理行</span>
    RowSet&lt;Row&gt; rows = res.result();
  } <span class="hljs-keyword">else</span> {
    System.out.println(<span class="hljs-string">&quot;Batch failed &quot;</span> + res.cause());
  }
});</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_mysql_last_insert_id"><a class="anchor" href="#_mysql_last_insert_id"></a>MySQL LAST_INSERT_ID</h2>
<div class="sectionbody">
<div class="paragraph">
<p>往表中插入一条记录后，可以获得自增值。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">client
  .query(<span class="hljs-string">&quot;INSERT INTO test(val) VALUES (&#x27;v1&#x27;)&quot;</span>)
  .execute(ar -&gt; {
    <span class="hljs-keyword">if</span> (ar.succeeded()) {
      RowSet&lt;Row&gt; rows = ar.result();
      <span class="hljs-keyword">long</span> lastInsertId = rows.property(MySQLClient.LAST_INSERTED_ID);
      System.out.println(<span class="hljs-string">&quot;Last inserted id is: &quot;</span> + lastInsertId);
    } <span class="hljs-keyword">else</span> {
      System.out.println(<span class="hljs-string">&quot;Failure: &quot;</span> + ar.cause().getMessage());
    }
  });</code></pre>
</div>
</div>
<div class="paragraph">
<p>更多有关信息，请参阅 <a href="https://dev.mysql.com/doc/refman/8.0/en/getting-unique-id.html">如何获取最近一条插入记录的唯一ID</a>。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_using_connections"><a class="anchor" href="#_using_connections"></a>使用连接</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_getting_a_connection"><a class="anchor" href="#_getting_a_connection"></a>获取连接</h3>
<div class="paragraph">
<p>当需要执行顺序查询（无事务）时，可以创建一个新连接或从连接池中借用一个。
请注意在从拿到连接到将连接释放回连接池这之间的连接状态，服务端可能由于某些原因比如空闲时间超时，而关闭这条连接。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">pool
  .getConnection()
  .compose(connection -&gt;
    connection
      .preparedQuery(<span class="hljs-string">&quot;INSERT INTO Users (first_name,last_name) VALUES (?, ?)&quot;</span>)
      .executeBatch(Arrays.asList(
        Tuple.of(<span class="hljs-string">&quot;Julien&quot;</span>, <span class="hljs-string">&quot;Viet&quot;</span>),
        Tuple.of(<span class="hljs-string">&quot;Emad&quot;</span>, <span class="hljs-string">&quot;Alblueshi&quot;</span>)
      ))
      .compose(res -&gt; connection
        <span class="hljs-comment">// 对行执行一些操作</span>
        .query(<span class="hljs-string">&quot;SELECT COUNT(*) FROM Users&quot;</span>)
        .execute()
        .map(rows -&gt; rows.iterator().next().getInteger(<span class="hljs-number">0</span>)))
      <span class="hljs-comment">// 将连接返回到连接池中</span>
      .eventually(v -&gt; connection.close())
  ).onSuccess(count -&gt; {
  System.out.println(<span class="hljs-string">&quot;Insert users, now the number of users is &quot;</span> + count);
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>可以创建预处理查询语句：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">connection
  .prepare(<span class="hljs-string">&quot;SELECT * FROM users WHERE first_name LIKE ?&quot;</span>)
  .compose(pq -&gt;
    pq.query()
      .execute(Tuple.of(<span class="hljs-string">&quot;Julien&quot;</span>))
      .eventually(v -&gt; pq.close())
  ).onSuccess(rows -&gt; {
  <span class="hljs-comment">// 所有的行</span>
});</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_simplified_connection_api"><a class="anchor" href="#_simplified_connection_api"></a>简单连接 API</h3>
<div class="paragraph">
<p>当您创建了一个连接池, 您可以调用 <code><a href="../../apidocs/io/vertx/sqlclient/Pool.html#withConnection-java.util.function.Function-io.vertx.core.Handler-">withConnection</a></code> 并传入一个使用连接进行处理的函数。</p>
</div>
<div class="paragraph">
<p>它从连接池中借用一个连接，并使用该连接调用函数。</p>
</div>
<div class="paragraph">
<p>该函数必须返回一个任意结果的 Future。</p>
</div>
<div class="paragraph">
<p>Future 完成后, 连接将归还至连接池，并提供全部的结果。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">pool.withConnection(connection -&gt;
  connection
    .preparedQuery(<span class="hljs-string">&quot;INSERT INTO Users (first_name,last_name) VALUES (?, ?)&quot;</span>)
    .executeBatch(Arrays.asList(
      Tuple.of(<span class="hljs-string">&quot;Julien&quot;</span>, <span class="hljs-string">&quot;Viet&quot;</span>),
      Tuple.of(<span class="hljs-string">&quot;Emad&quot;</span>, <span class="hljs-string">&quot;Alblueshi&quot;</span>)
    ))
    .compose(res -&gt; connection
      <span class="hljs-comment">// Do something with rows</span>
      .query(<span class="hljs-string">&quot;SELECT COUNT(*) FROM Users&quot;</span>)
      .execute()
      .map(rows -&gt; rows.iterator().next().getInteger(<span class="hljs-number">0</span>)))
).onSuccess(count -&gt; {
  System.out.println(<span class="hljs-string">&quot;Insert users, now the number of users is &quot;</span> + count);
});</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_using_transactions"><a class="anchor" href="#_using_transactions"></a>使用事务</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_transactions_with_connections"><a class="anchor" href="#_transactions_with_connections"></a>带事务的连接</h3>
<div class="paragraph">
<p>您可以使用SQL <code>BEGIN</code>/<code>COMMIT</code>/<code>ROLLBACK</code> 执行事务，如果您必须这么做，就必须使用 <code><a href="../../apidocs/io/vertx/sqlclient/SqlConnection.html">SqlConnection</a></code> 自己管理事务。</p>
</div>
<div class="paragraph">
<p>或者您使用 <code><a href="../../apidocs/io/vertx/sqlclient/SqlConnection.html">SqlConnection</a></code> 的事务API：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">pool.getConnection()
  <span class="hljs-comment">// 事务必须使用一个连接</span>
  .onSuccess(conn -&gt; {
    <span class="hljs-comment">// 开始事务</span>
    conn.begin()
      .compose(tx -&gt; conn
        <span class="hljs-comment">// 各种语句</span>
        .query(<span class="hljs-string">&quot;INSERT INTO Users (first_name,last_name) VALUES (&#x27;Julien&#x27;,&#x27;Viet&#x27;)&quot;</span>)
        .execute()
        .compose(res2 -&gt; conn
          .query(<span class="hljs-string">&quot;INSERT INTO Users (first_name,last_name) VALUES (&#x27;Emad&#x27;,&#x27;Alblueshi&#x27;)&quot;</span>)
          .execute())
        <span class="hljs-comment">// 提交事务</span>
        .compose(res3 -&gt; tx.commit()))
      <span class="hljs-comment">// 将连接返回到连接池</span>
      .eventually(v -&gt; conn.close())
      .onSuccess(v -&gt; System.out.println(<span class="hljs-string">&quot;Transaction succeeded&quot;</span>))
      .onFailure(err -&gt; System.out.println(<span class="hljs-string">&quot;Transaction failed: &quot;</span> + err.getMessage()));
  });</code></pre>
</div>
</div>
<div class="paragraph">
<p>当数据库服务器报告当前事务失败时（例如，臭名昭著的 <em>current transaction is aborted, commands ignored until end of transaction block</em>），
事务被回滚，此时 <code><a href="../../apidocs/io/vertx/sqlclient/Transaction.html#completion--">completion</a></code> Future 会失败，
并返回 <code><a href="../../apidocs/io/vertx/sqlclient/TransactionRollbackException.html">TransactionRollbackException</a></code> 异常：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">tx.completion()
  .onFailure(err -&gt; {
    System.out.println(<span class="hljs-string">&quot;Transaction failed =&gt; rolled back&quot;</span>);
  });</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_simplified_transaction_api_2"><a class="anchor" href="#_simplified_transaction_api_2"></a>简单事务 API</h3>
<div class="paragraph">
<p>当您创建了一个连接池, 您可以调用 <code><a href="../../apidocs/io/vertx/sqlclient/Pool.html#withConnection-java.util.function.Function-io.vertx.core.Handler-">withConnection</a></code> 并传入一个使用连接进行处理的函数。</p>
</div>
<div class="paragraph">
<p>它从连接池中借用一个连接，开始事务，并且，在此事务范围内所有执行操作的客户端调用该函数。</p>
</div>
<div class="paragraph">
<p>该函数必须返回一个任意结果的Future。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>当Future成功，客户端提交这个事务</p>
</li>
<li>
<p>当Future失败，客户端回滚这个事务</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>事务完成后, 连接将返回到连接池中，并提供全部的结果。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">pool.withTransaction(client -&gt; client
  .query(<span class="hljs-string">&quot;INSERT INTO Users (first_name,last_name) VALUES (&#x27;Julien&#x27;,&#x27;Viet&#x27;)&quot;</span>)
  .execute()
  .flatMap(res -&gt; client
    .query(<span class="hljs-string">&quot;INSERT INTO Users (first_name,last_name) VALUES (&#x27;Emad&#x27;,&#x27;Alblueshi&#x27;)&quot;</span>)
    .execute()
    <span class="hljs-comment">// 映射一个消息结果</span>
    .map(<span class="hljs-string">&quot;Users inserted&quot;</span>)))
  .onSuccess(v -&gt; System.out.println(<span class="hljs-string">&quot;Transaction succeeded&quot;</span>))
  .onFailure(err -&gt; System.out.println(<span class="hljs-string">&quot;Transaction failed: &quot;</span> + err.getMessage()));</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_cursors_and_streaming"><a class="anchor" href="#_cursors_and_streaming"></a>游标和流</h2>
<div class="sectionbody">
<div class="paragraph">
<p>默认情况下，执行预处理查询将获取所有行，您可以使用 <code><a href="../../apidocs/io/vertx/sqlclient/Cursor.html">Cursor</a></code> 控制想读取的行数：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">connection.prepare(<span class="hljs-string">&quot;SELECT * FROM users WHERE age &gt; ?&quot;</span>, ar1 -&gt; {
  <span class="hljs-keyword">if</span> (ar1.succeeded()) {
    PreparedStatement pq = ar1.result();

    <span class="hljs-comment">// 创建游标</span>
    Cursor cursor = pq.cursor(Tuple.of(<span class="hljs-number">18</span>));

    <span class="hljs-comment">// 读取50行</span>
    cursor.read(<span class="hljs-number">50</span>, ar2 -&gt; {
      <span class="hljs-keyword">if</span> (ar2.succeeded()) {
        RowSet&lt;Row&gt; rows = ar2.result();

        <span class="hljs-comment">// 检查更多 ?</span>
        <span class="hljs-keyword">if</span> (cursor.hasMore()) {
          <span class="hljs-comment">// 重复这个过程...</span>
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-comment">// 没有更多行-关闭游标</span>
          cursor.close();
        }
      }
    });
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>游标提前释放时应将其关闭：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">cursor.read(<span class="hljs-number">50</span>, ar2 -&gt; {
  <span class="hljs-keyword">if</span> (ar2.succeeded()) {
    <span class="hljs-comment">// 关闭游标</span>
    cursor.close();
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>游标还可以使用流式API，这可以更加方便，尤其是在Rx化的版本中。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">connection.prepare(<span class="hljs-string">&quot;SELECT * FROM users WHERE age &gt; ?&quot;</span>, ar1 -&gt; {
  <span class="hljs-keyword">if</span> (ar1.succeeded()) {
    PreparedStatement pq = ar1.result();

    <span class="hljs-comment">// 一次获取50行</span>
    RowStream&lt;Row&gt; stream = pq.createStream(<span class="hljs-number">50</span>, Tuple.of(<span class="hljs-number">18</span>));

    <span class="hljs-comment">// 使用流</span>
    stream.exceptionHandler(err -&gt; {
      System.out.println(<span class="hljs-string">&quot;Error: &quot;</span> + err.getMessage());
    });
    stream.endHandler(v -&gt; {
      System.out.println(<span class="hljs-string">&quot;End of stream&quot;</span>);
    });
    stream.handler(row -&gt; {
      System.out.println(<span class="hljs-string">&quot;User: &quot;</span> + row.getString(<span class="hljs-string">&quot;last_name&quot;</span>));
    });
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>当这些行已传递给处理程序时，该流将批量读取 <code>50</code> 行并将其流化。
然后读取新一批的 <code>50</code> 行数据，依此类推。</p>
</div>
<div class="paragraph">
<p>流可以恢复或暂停，已加载的行将保留在内存中，直到被送达，游标将停止迭代。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tracing_queries"><a class="anchor" href="#_tracing_queries"></a>追踪查询</h2>
<div class="sectionbody">
<div class="paragraph">
<p>当Vert.x启用了跟踪时，SQL客户端可以跟踪查询执行。</p>
</div>
<div class="paragraph">
<p>客户端报告以下 <em>client</em> 跨度（spans）：</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Query</code> operation name</p>
</li>
<li>
<p>tags</p>
</li>
<li>
<p><code>db.user</code>: the database username</p>
</li>
<li>
<p><code>db.instance</code>: the database instance</p>
</li>
<li>
<p><code>db.statement</code>: the SQL query</p>
</li>
<li>
<p><code>db.type</code>: <em>sql</em></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>默认的跟踪策略是 <code><a href="../../apidocs/io/vertx/core/tracing/TracingPolicy.html#PROPAGATE">PROPAGATE</a></code> ，客户端仅当涉及活动跟踪时才创建跨度（span）。</p>
</div>
<div class="paragraph">
<p>您可以使用 <code><a href="../../apidocs/io/vertx/sqlclient/SqlConnectOptions.html#setTracingPolicy-io.vertx.core.tracing.TracingPolicy-">setTracingPolicy</a></code> 更改客户策略，例如 您可以设置  <code><a href="../../apidocs/io/vertx/core/tracing/TracingPolicy.html#ALWAYS">ALWAYS</a></code> 总是报告跨度（span）：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">options.setTracingPolicy(TracingPolicy.ALWAYS);</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_mysql_type_mapping"><a class="anchor" href="#_mysql_type_mapping"></a>MySQL 类型映射</h2>
<div class="sectionbody">
<div class="paragraph">
<p>当前客户端支持以下 MySQL 类型</p>
</div>
<div class="ulist">
<ul>
<li>
<p>BOOL,BOOLEAN (<code>java.lang.Byte</code>)</p>
</li>
<li>
<p>TINYINT (<code>java.lang.Byte</code>)</p>
</li>
<li>
<p>TINYINT UNSIGNED(<code>java.lang.Short</code>)</p>
</li>
<li>
<p>SMALLINT (<code>java.lang.Short</code>)</p>
</li>
<li>
<p>SMALLINT UNSIGNED(<code>java.lang.Integer</code>)</p>
</li>
<li>
<p>MEDIUMINT (<code>java.lang.Integer</code>)</p>
</li>
<li>
<p>MEDIUMINT UNSIGNED(<code>java.lang.Integer</code>)</p>
</li>
<li>
<p>INT,INTEGER (<code>java.lang.Integer</code>)</p>
</li>
<li>
<p>INTEGER UNSIGNED(<code>java.lang.Long</code>)</p>
</li>
<li>
<p>BIGINT (<code>java.lang.Long</code>)</p>
</li>
<li>
<p>BIGINT UNSIGNED(<code>io.vertx.sqlclient.data.Numeric</code>)</p>
</li>
<li>
<p>FLOAT (<code>java.lang.Float</code>)</p>
</li>
<li>
<p>FLOAT UNSIGNED(<code>java.lang.Float</code>)</p>
</li>
<li>
<p>DOUBLE (<code>java.lang.Double</code>)</p>
</li>
<li>
<p>DOUBLE UNSIGNED(<code>java.lang.Double</code>)</p>
</li>
<li>
<p>BIT (<code>java.lang.Long</code>)</p>
</li>
<li>
<p>NUMERIC (<code>io.vertx.sqlclient.data.Numeric</code>)</p>
</li>
<li>
<p>NUMERIC UNSIGNED(<code>io.vertx.sqlclient.data.Numeric</code>)</p>
</li>
<li>
<p>DATE (<code>java.time.LocalDate</code>)</p>
</li>
<li>
<p>DATETIME (<code>java.time.LocalDateTime</code>)</p>
</li>
<li>
<p>TIME (<code>java.time.Duration</code>)</p>
</li>
<li>
<p>TIMESTAMP (<code>java.time.LocalDateTime</code>)</p>
</li>
<li>
<p>YEAR (<code>java.lang.Short</code>)</p>
</li>
<li>
<p>CHAR (<code>java.lang.String</code>)</p>
</li>
<li>
<p>VARCHAR (<code>java.lang.String</code>)</p>
</li>
<li>
<p>BINARY (<code>io.vertx.core.buffer.Buffer</code>)</p>
</li>
<li>
<p>VARBINARY (<code>io.vertx.core.buffer.Buffer</code>)</p>
</li>
<li>
<p>TINYBLOB (<code>io.vertx.core.buffer.Buffer</code>)</p>
</li>
<li>
<p>TINYTEXT (<code>java.lang.String</code>)</p>
</li>
<li>
<p>BLOB (<code>io.vertx.core.buffer.Buffer</code>)</p>
</li>
<li>
<p>TEXT (<code>java.lang.String</code>)</p>
</li>
<li>
<p>MEDIUMBLOB (<code>io.vertx.core.buffer.Buffer</code>)</p>
</li>
<li>
<p>MEDIUMTEXT (<code>java.lang.String</code>)</p>
</li>
<li>
<p>LONGBLOB (<code>io.vertx.core.buffer.Buffer</code>)</p>
</li>
<li>
<p>LONGTEXT (<code>java.lang.String</code>)</p>
</li>
<li>
<p>ENUM (<code>java.lang.String</code>)</p>
</li>
<li>
<p>SET (<code>java.lang.String</code>)</p>
</li>
<li>
<p>JSON (<code>io.vertx.core.json.JsonObject</code>, <code>io.vertx.core.json.JsonArray</code>, <code>Number</code>, <code>Boolean</code>, <code>String</code>, <code>io.vertx.sqlclient.Tuple#JSON_NULL</code>)</p>
</li>
<li>
<p>GEOMETRY(<code>io.vertx.mysqlclient.data.spatial.*</code>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>元组解码在存储值时使用上述类型</p>
</div>
<div class="paragraph">
<p>请注意：在Java中，没有无符号数字值的具体表示形式，因此客户端会将无符号值转换为相关的Java类型。</p>
</div>
<div class="sect2">
<h3 id="_implicit_type_conversion"><a class="anchor" href="#_implicit_type_conversion"></a>隐式类型转换</h3>
<div class="paragraph">
<p>当执行预处理语句时，响应式 MySQL 客户端支持隐式类型转换。
假设您的表中有一个 <code>TIME</code> 列，下面的两个示例都是有效的。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">client
  .preparedQuery(<span class="hljs-string">&quot;SELECT * FROM students WHERE updated_time = ?&quot;</span>)
  .execute(Tuple.of(LocalTime.of(<span class="hljs-number">19</span>, <span class="hljs-number">10</span>, <span class="hljs-number">25</span>)), ar -&gt; {
  <span class="hljs-comment">// 处理结果</span>
});
<span class="hljs-comment">// 这个也适用于隐式类型转换</span>
client
  .preparedQuery(<span class="hljs-string">&quot;SELECT * FROM students WHERE updated_time = ?&quot;</span>)
  .execute(Tuple.of(<span class="hljs-string">&quot;19:10:25&quot;</span>), ar -&gt; {
  <span class="hljs-comment">// 处理结果</span>
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>MySQL 数据类型编码是根据参数值推断的。下面是具体的类型映射：</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">参数值</th>
<th class="tableblock halign-left valign-top">MySQL 类型编码</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">null</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MYSQL_TYPE_NULL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">java.lang.Byte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MYSQL_TYPE_TINY</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">java.lang.Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MYSQL_TYPE_TINY</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">java.lang.Short</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MYSQL_TYPE_SHORT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">java.lang.Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MYSQL_TYPE_LONG</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">java.lang.Long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MYSQL_TYPE_LONGLONG</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">java.lang.Double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MYSQL_TYPE_DOUBLE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">java.lang.Float</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MYSQL_TYPE_FLOAT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">java.time.LocalDate</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MYSQL_TYPE_DATE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">java.time.Duration</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MYSQL_TYPE_TIME</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">java.time.LocalTime</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MYSQL_TYPE_TIME</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">io.vertx.core.buffer.Buffer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MYSQL_TYPE_BLOB</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">java.time.LocalDateTime</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MYSQL_TYPE_DATETIME</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">io.vertx.mysqlclient.data.spatial.*</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MYSQL_TYPE_BLOB</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">default</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MYSQL_TYPE_STRING</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_handling_boolean"><a class="anchor" href="#_handling_boolean"></a>处理布尔值</h3>
<div class="paragraph">
<p>在 MySQL 中 <code>BOOLEAN</code> 和 <code>BOOL</code> 数据类型是 <code>TINYINT(1)</code> 的同义词。零值视为 false，非零值视为 true。
<code>BOOLEAN</code> 数据类型值以 <code>java.lang.Byte</code> 类型存储在 <code>Row</code> 或 <code>Tuple</code> 中，调用 <code>Row#getValue</code> 可以获取到 <code>java.lang.Byte</code> 类型的值，
也可以调用 <code>Row#getBoolean</code> 获取 <code>java.lang.Boolean</code> 类型的值。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">client
  .query(<span class="hljs-string">&quot;SELECT graduated FROM students WHERE id = 0&quot;</span>)
  .execute(ar -&gt; {
  <span class="hljs-keyword">if</span> (ar.succeeded()) {
    RowSet&lt;Row&gt; rowSet = ar.result();
    <span class="hljs-keyword">for</span> (Row row : rowSet) {
      <span class="hljs-keyword">int</span> pos = row.getColumnIndex(<span class="hljs-string">&quot;graduated&quot;</span>);
      Byte value = row.get(Byte.class, pos);
      Boolean graduated = row.getBoolean(<span class="hljs-string">&quot;graduated&quot;</span>);
    }
  } <span class="hljs-keyword">else</span> {
    System.out.println(<span class="hljs-string">&quot;Failure: &quot;</span> + ar.cause().getMessage());
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>当您想要使用一个 <code>BOOLEAN</code> 参数值执行预处理语句时，只要简单地在参数列表中添加  <code>java.lang.Boolean</code> 值即可。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">client
  .preparedQuery(<span class="hljs-string">&quot;UPDATE students SET graduated = ? WHERE id = 0&quot;</span>)
  .execute(Tuple.of(<span class="hljs-keyword">true</span>), ar -&gt; {
  <span class="hljs-keyword">if</span> (ar.succeeded()) {
    System.out.println(<span class="hljs-string">&quot;Updated with the boolean value&quot;</span>);
  } <span class="hljs-keyword">else</span> {
    System.out.println(<span class="hljs-string">&quot;Failure: &quot;</span> + ar.cause().getMessage());
  }
});</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_handling_json"><a class="anchor" href="#_handling_json"></a>处理 JSON</h3>
<div class="paragraph">
<p>MySQL <code>JSON</code> 数据类型由以下Java类型表示：</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>String</code></p>
</li>
<li>
<p><code>Number</code></p>
</li>
<li>
<p><code>Boolean</code></p>
</li>
<li>
<p><code>io.vertx.core.json.JsonObject</code></p>
</li>
<li>
<p><code>io.vertx.core.json.JsonArray</code></p>
</li>
<li>
<p><code>io.vertx.sqlclient.Tuple#JSON_NULL</code> 表示 JSON null 字面量</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">Tuple tuple = Tuple.of(
  Tuple.JSON_NULL,
  <span class="hljs-keyword">new</span> JsonObject().put(<span class="hljs-string">&quot;foo&quot;</span>, <span class="hljs-string">&quot;bar&quot;</span>),
  <span class="hljs-number">3</span>);

<span class="hljs-comment">// 获取 json</span>
Object value = tuple.getValue(<span class="hljs-number">0</span>); <span class="hljs-comment">// 期望得到 JSON_NULL</span>

<span class="hljs-comment">//</span>
value = tuple.get(JsonObject.class, <span class="hljs-number">1</span>); <span class="hljs-comment">// 期望得到 JSON object</span>

<span class="hljs-comment">//</span>
value = tuple.get(Integer.class, <span class="hljs-number">2</span>); <span class="hljs-comment">// 期望得到 3</span>
value = tuple.getInteger(<span class="hljs-number">2</span>); <span class="hljs-comment">// 期望得到 3</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_handling_bit"><a class="anchor" href="#_handling_bit"></a>处理 BIT</h3>
<div class="paragraph">
<p><code>BIT</code> 是 <code>java.lang.Long</code> 类型的映射, 但是Java没有无符号数值的概念, 因此，如果您要插入或更新一条记录为 <code>BIT(64)</code> 的最大值 , 可以将参数设置为 <code>-1L</code> 。</p>
</div>
</div>
<div class="sect2">
<h3 id="_handling_time"><a class="anchor" href="#_handling_time"></a>处理 TIME</h3>
<div class="paragraph">
<p>MySQL <code>TIME</code> 数据类型可用于表示一天中的时间或范围为 <code>-838:59:59</code> 到 <code>838:59:59</code> 的时间间隔。在响应式MySQL客户端， <code>TIME</code> 数据类型自然的被映射为 <code>java.time.Duration</code>，您也可以调用 <code>Row#getLocalTime</code> 获取到 <code>java.time.LocalTime</code> 类型的值。</p>
</div>
</div>
<div class="sect2">
<h3 id="_handling_numeric"><a class="anchor" href="#_handling_numeric"></a>处理 NUMERIC</h3>
<div class="paragraph">
<p><code><a href="../../apidocs/io/vertx/sqlclient/data/Numeric.html">Numeric</a></code> Java类型用于表示MySQL的 <code>NUMERIC</code> 类型。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">Numeric numeric = row.get(Numeric.class, <span class="hljs-number">0</span>);
<span class="hljs-keyword">if</span> (numeric.isNaN()) {
  <span class="hljs-comment">// 处理 NaN</span>
} <span class="hljs-keyword">else</span> {
  BigDecimal value = numeric.bigDecimalValue();
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_handling_enum"><a class="anchor" href="#_handling_enum"></a>处理 ENUM</h3>
<div class="paragraph">
<p>MySQL支持ENUM数据类型，客户端将这些类型检索为String数据类型。</p>
</div>
<div class="paragraph">
<p>您可以像这样将Java枚举编码为String：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">client
  .preparedQuery(<span class="hljs-string">&quot;INSERT INTO colors VALUES (?)&quot;</span>)
  .execute(Tuple.of(Color.red),  res -&gt; {
    <span class="hljs-comment">// ...</span>
  });</code></pre>
</div>
</div>
<div class="paragraph">
<p>您可以将 ENUM 类型的列读取为 Java 的枚举，如以下代码：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">client
  .preparedQuery(<span class="hljs-string">&quot;SELECT color FROM colors&quot;</span>)
  .execute()
  .onComplete(res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    RowSet&lt;Row&gt; rows = res.result();
    <span class="hljs-keyword">for</span> (Row row : rows) {
      System.out.println(row.get(Color.class, <span class="hljs-string">&quot;color&quot;</span>));
    }
  }
});</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_handling_geometry"><a class="anchor" href="#_handling_geometry"></a>处理 GEOMETRY</h3>
<div class="paragraph">
<p>MYSQL 还支持 <code>GEOMETRY</code>  数据类型，下面是一些示例展示您可以使用 Well-Known Text（WKT）格式或 Well-Known Binary（WKB）格式处理几何数据，数据被解码为MySQL TEXT 或 BLOB 数据类型。有很多很棒的第三方库可以处理这种格式的数据。</p>
</div>
<div class="paragraph">
<p>您可以以 WKT 格式获取空间数据：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">client
  .query(<span class="hljs-string">&quot;SELECT ST_AsText(g) FROM geom;&quot;</span>)
  .execute(ar -&gt; {
  <span class="hljs-keyword">if</span> (ar.succeeded()) {
    <span class="hljs-comment">// 以WKT格式获取空间数据</span>
    RowSet&lt;Row&gt; result = ar.result();
    <span class="hljs-keyword">for</span> (Row row : result) {
      String wktString = row.getString(<span class="hljs-number">0</span>);
    }
  } <span class="hljs-keyword">else</span> {
    System.out.println(<span class="hljs-string">&quot;Failure: &quot;</span> + ar.cause().getMessage());
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>或者，您可以以WKB格式获取空间数据：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">client
  .query(<span class="hljs-string">&quot;SELECT ST_AsBinary(g) FROM geom;&quot;</span>)
  .execute(ar -&gt; {
  <span class="hljs-keyword">if</span> (ar.succeeded()) {
    <span class="hljs-comment">// 以WKB格式获取空间数据</span>
    RowSet&lt;Row&gt; result = ar.result();
    <span class="hljs-keyword">for</span> (Row row : result) {
      Buffer wkbValue = row.getBuffer(<span class="hljs-number">0</span>);
    }
  } <span class="hljs-keyword">else</span> {
    System.out.println(<span class="hljs-string">&quot;Failure: &quot;</span> + ar.cause().getMessage());
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>在响应式 MySQL 客户端中，我们还提供了一种处理几何数据类型的简单方法。</p>
</div>
<div class="paragraph">
<p>您可以将几何数据作为Vert.x数据对象检索：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">client
  .query(<span class="hljs-string">&quot;SELECT g FROM geom;&quot;</span>)
  .execute(ar -&gt; {
  <span class="hljs-keyword">if</span> (ar.succeeded()) {
    <span class="hljs-comment">// 以Vert.x数据对象获取空间数据</span>
    RowSet&lt;Row&gt; result = ar.result();
    <span class="hljs-keyword">for</span> (Row row : result) {
      Point point = row.get(Point.class, <span class="hljs-number">0</span>);
      System.out.println(<span class="hljs-string">&quot;Point x: &quot;</span> + point.getX());
      System.out.println(<span class="hljs-string">&quot;Point y: &quot;</span> + point.getY());
    }
  } <span class="hljs-keyword">else</span> {
    System.out.println(<span class="hljs-string">&quot;Failure: &quot;</span> + ar.cause().getMessage());
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>您也可以将WKB描述用作预处理语句参数。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">Point point = <span class="hljs-keyword">new</span> Point(<span class="hljs-number">0</span>, <span class="hljs-number">1.5</span>, <span class="hljs-number">1.5</span>);
<span class="hljs-comment">// 以 WKB 描述发送</span>
client
  .preparedQuery(<span class="hljs-string">&quot;INSERT INTO geom VALUES (ST_GeomFromWKB(?))&quot;</span>)
  .execute(Tuple.of(point), ar -&gt; {
  <span class="hljs-keyword">if</span> (ar.succeeded()) {
    System.out.println(<span class="hljs-string">&quot;Success&quot;</span>);
  } <span class="hljs-keyword">else</span> {
    System.out.println(<span class="hljs-string">&quot;Failure: &quot;</span> + ar.cause().getMessage());
  }
});</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_collector_queries"><a class="anchor" href="#_collector_queries"></a>集合类查询</h2>
<div class="sectionbody">
<div class="paragraph">
<p>您可以将查询API与Java集合类结合使用：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">Collector&lt;Row, ?, Map&lt;Long, String&gt;&gt; collector = Collectors.toMap(
  row -&gt; row.getLong(<span class="hljs-string">&quot;id&quot;</span>),
  row -&gt; row.getString(<span class="hljs-string">&quot;last_name&quot;</span>));

<span class="hljs-comment">// 运行查询使用集合类</span>
client.query(<span class="hljs-string">&quot;SELECT * FROM users&quot;</span>).collecting(collector).execute(ar -&gt; {
    <span class="hljs-keyword">if</span> (ar.succeeded()) {
      SqlResult&lt;Map&lt;Long, String&gt;&gt; result = ar.result();

      <span class="hljs-comment">// 获取用集合类创建的map</span>
      Map&lt;Long, String&gt; map = result.value();
      System.out.println(<span class="hljs-string">&quot;Got &quot;</span> + map);
    } <span class="hljs-keyword">else</span> {
      System.out.println(<span class="hljs-string">&quot;Failure: &quot;</span> + ar.cause().getMessage());
    }
  });</code></pre>
</div>
</div>
<div class="paragraph">
<p>集合类处理不能保留 <code><a href="../../apidocs/io/vertx/sqlclient/Row.html">Row</a></code>
的引用，因为只有一个 Row 对象用于处理整个集合。</p>
</div>
<div class="paragraph">
<p>Java <code>Collectors</code> 提供了许多有趣的预定义集合类，例如，
您可以直接用 Row 中的集合轻松拼接成一个字符串：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">Collector&lt;Row, ?, String&gt; collector = Collectors.mapping(
  row -&gt; row.getString(<span class="hljs-string">&quot;last_name&quot;</span>),
  Collectors.joining(<span class="hljs-string">&quot;,&quot;</span>, <span class="hljs-string">&quot;(&quot;</span>, <span class="hljs-string">&quot;)&quot;</span>)
);

<span class="hljs-comment">// 运行查询使用集合类</span>
client.query(<span class="hljs-string">&quot;SELECT * FROM users&quot;</span>).collecting(collector).execute(ar -&gt; {
    <span class="hljs-keyword">if</span> (ar.succeeded()) {
      SqlResult&lt;String&gt; result = ar.result();

      <span class="hljs-comment">// 获取用集合类创建的String</span>
      String list = result.value();
      System.out.println(<span class="hljs-string">&quot;Got &quot;</span> + list);
    } <span class="hljs-keyword">else</span> {
      System.out.println(<span class="hljs-string">&quot;Failure: &quot;</span> + ar.cause().getMessage());
    }
  });</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_mysql_stored_procedure"><a class="anchor" href="#_mysql_stored_procedure"></a>MySQL 存储过程</h2>
<div class="sectionbody">
<div class="paragraph">
<p>您可以在查询中运行存储过程。结果将按照 <a href="https://dev.mysql.com/doc/dev/mysql-server/8.0.12/page_protocol_command_phase_sp.html">MySQL 协议</a> 从服务器获取，无需任何魔法。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">client.query(<span class="hljs-string">&quot;CREATE PROCEDURE multi() BEGIN\n&quot;</span> +
  <span class="hljs-string">&quot;  SELECT 1;\n&quot;</span> +
  <span class="hljs-string">&quot;  SELECT 1;\n&quot;</span> +
  <span class="hljs-string">&quot;  INSERT INTO ins VALUES (1);\n&quot;</span> +
  <span class="hljs-string">&quot;  INSERT INTO ins VALUES (2);\n&quot;</span> +
  <span class="hljs-string">&quot;END;&quot;</span>).execute(ar1 -&gt; {
  <span class="hljs-keyword">if</span> (ar1.succeeded()) {
    <span class="hljs-comment">// 创建存储过程成功</span>
    client
      .query(<span class="hljs-string">&quot;CALL multi();&quot;</span>)
      .execute(ar2 -&gt; {
      <span class="hljs-keyword">if</span> (ar2.succeeded()) {
        <span class="hljs-comment">// 处理结果</span>
        RowSet&lt;Row&gt; result1 = ar2.result();
        Row row1 = result1.iterator().next();
        System.out.println(<span class="hljs-string">&quot;First result: &quot;</span> + row1.getInteger(<span class="hljs-number">0</span>));

        RowSet&lt;Row&gt; result2 = result1.next();
        Row row2 = result2.iterator().next();
        System.out.println(<span class="hljs-string">&quot;Second result: &quot;</span> + row2.getInteger(<span class="hljs-number">0</span>));

        RowSet&lt;Row&gt; result3 = result2.next();
        System.out.println(<span class="hljs-string">&quot;Affected rows: &quot;</span> + result3.rowCount());
      } <span class="hljs-keyword">else</span> {
        System.out.println(<span class="hljs-string">&quot;Failure: &quot;</span> + ar2.cause().getMessage());
      }
    });
  } <span class="hljs-keyword">else</span> {
    System.out.println(<span class="hljs-string">&quot;Failure: &quot;</span> + ar1.cause().getMessage());
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note: 目前尚不支持绑定OUT参数的预处理语句。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_mysql_local_infile"><a class="anchor" href="#_mysql_local_infile"></a>MySQL 导入本地文件</h2>
<div class="sectionbody">
<div class="paragraph">
<p>该客户端支持处理 LOCAL INFILE 请求, 如果要将数据从本地文件加载到服务器，则可以使用语句
<code>LOAD DATA LOCAL INFILE '&lt;filename&gt;' INTO TABLE &lt;table&gt;;</code>。 更多有关信息，请参阅 <a href="https://dev.mysql.com/doc/refman/8.0/en/load-data.html">MySQL 参考手册</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_authentication"><a class="anchor" href="#_authentication"></a>认证</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_default_authentication_plugin"><a class="anchor" href="#_default_authentication_plugin"></a>默认身份验证插件</h3>
<div class="paragraph">
<p>该客户端支持指定在连接开始时使用缺省的身份验证插件。
当前支持以下插件：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>mysql_native_password</p>
</li>
<li>
<p>caching_sha2_password</p>
</li>
<li>
<p>mysql_clear_password</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">MySQLConnectOptions options = <span class="hljs-keyword">new</span> MySQLConnectOptions()
  .setPort(<span class="hljs-number">3306</span>)
  .setHost(<span class="hljs-string">&quot;the-host&quot;</span>)
  .setDatabase(<span class="hljs-string">&quot;the-db&quot;</span>)
  .setUser(<span class="hljs-string">&quot;user&quot;</span>)
  .setPassword(<span class="hljs-string">&quot;secret&quot;</span>)
  .setAuthenticationPlugin(MySQLAuthenticationPlugin.MYSQL_NATIVE_PASSWORD); <span class="hljs-comment">// 设定默认身份验证插件</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_new_authentication_method_introduced_in_mysql_8"><a class="anchor" href="#_new_authentication_method_introduced_in_mysql_8"></a>MySQL 8 中引入的新身份验证方法</h3>
<div class="paragraph">
<p>MySQL 8.0 引入了一种名为 <code>caching_sha2_password</code> 的身份验证方法，它是默认的身份验证方法。
为了使用此新的身份验证方法连接到服务器，您需要使用安全连接（例如 启用 TLS/SSL）或使用 RSA 密钥对交换加密密码，以避免密码泄漏。RSA 密钥对在通信过程中会自动交换，但服务器 RSA 公钥可能会在这个过程中被黑客攻击，因为它通过不安全的连接传输。
因此，如果您使用不安全的连接，并且希望避免暴露服务器 RSA 公钥的风险，可以这样设置服务器 RSA 公钥：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">MySQLConnectOptions options1 = <span class="hljs-keyword">new</span> MySQLConnectOptions()
  .setPort(<span class="hljs-number">3306</span>)
  .setHost(<span class="hljs-string">&quot;the-host&quot;</span>)
  .setDatabase(<span class="hljs-string">&quot;the-db&quot;</span>)
  .setUser(<span class="hljs-string">&quot;user&quot;</span>)
  .setPassword(<span class="hljs-string">&quot;secret&quot;</span>)
  .setServerRsaPublicKeyPath(<span class="hljs-string">&quot;tls/files/public_key.pem&quot;</span>); <span class="hljs-comment">// 配置公钥路径</span>

MySQLConnectOptions options2 = <span class="hljs-keyword">new</span> MySQLConnectOptions()
  .setPort(<span class="hljs-number">3306</span>)
  .setHost(<span class="hljs-string">&quot;the-host&quot;</span>)
  .setDatabase(<span class="hljs-string">&quot;the-db&quot;</span>)
  .setUser(<span class="hljs-string">&quot;user&quot;</span>)
  .setPassword(<span class="hljs-string">&quot;secret&quot;</span>)
  .setServerRsaPublicKeyValue(Buffer.buffer(<span class="hljs-string">&quot;-----BEGIN PUBLIC KEY-----\n&quot;</span> +
    <span class="hljs-string">&quot;MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA3yvG5s0qrV7jxVlp0sMj\n&quot;</span> +
    <span class="hljs-string">&quot;xP0a6BuLKCMjb0o88hDsJ3xz7PpHNKazuEAfPxiRFVAV3edqfSiXoQw+lJf4haEG\n&quot;</span> +
    <span class="hljs-string">&quot;HQe12Nfhs+UhcAeTKXRlZP/JNmI+BGoBduQ1rCId9bKYbXn4pvyS/a1ft7SwFkhx\n&quot;</span> +
    <span class="hljs-string">&quot;aogCur7iIB0WUWvwkQ0fEj/Mlhw93lLVyx7hcGFq4FOAKFYr3A0xrHP1IdgnD8QZ\n&quot;</span> +
    <span class="hljs-string">&quot;0fUbgGLWWLOossKrbUP5HWko1ghLPIbfmU6o890oj1ZWQewj1Rs9Er92/UDj/JXx\n&quot;</span> +
    <span class="hljs-string">&quot;7ha1P+ZOgPBlV037KDQMS6cUh9vTablEHsMLhDZanymXzzjBkL+wH/b9cdL16LkQ\n&quot;</span> +
    <span class="hljs-string">&quot;5QIDAQAB\n&quot;</span> +
    <span class="hljs-string">&quot;-----END PUBLIC KEY-----\n&quot;</span>)); <span class="hljs-comment">// 配置公钥缓冲</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>有关 <code>caching_sha2_password</code> 身份验证方法的更多信息，请参见 <a href="https://dev.mysql.com/doc/refman/8.0/en/caching-sha2-pluggable-authentication.html">MySQL 参考手册</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_using_ssltls"><a class="anchor" href="#_using_ssltls"></a>使用 SSL/TLS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>配置客户端使用SSL连接, 您可以像 Vert.x <code>NetClient</code> 一样配置
<code><a href="../../apidocs/io/vertx/mysqlclient/MySQLConnectOptions.html">MySQLConnectOptions</a></code> 。
响应式 MySQL 客户端 支持所有 <a href="https://dev.mysql.com/doc/refman/8.0/en/connection-options.html#option_general_ssl-mode">SSL 模式</a> ，而且您能够配置 <code>sslmode</code>. 客户端默认设置为 <code>DISABLED</code> SSL 模式。
<code>ssl</code> 参数仅作为设置 <code>sslmode</code> 的快捷方式存在。<code>setSsl(true)</code> 等价于 <code>setSslMode(VERIFY_CA)</code> ， <code>setSsl(false)</code> 等价于 <code>setSslMode(DISABLED)</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">MySQLConnectOptions options = <span class="hljs-keyword">new</span> MySQLConnectOptions()
  .setPort(<span class="hljs-number">3306</span>)
  .setHost(<span class="hljs-string">&quot;the-host&quot;</span>)
  .setDatabase(<span class="hljs-string">&quot;the-db&quot;</span>)
  .setUser(<span class="hljs-string">&quot;user&quot;</span>)
  .setPassword(<span class="hljs-string">&quot;secret&quot;</span>)
  .setSslMode(SslMode.VERIFY_CA)
  .setPemTrustOptions(<span class="hljs-keyword">new</span> PemTrustOptions().addCertPath(<span class="hljs-string">&quot;/path/to/cert.pem&quot;</span>));

MySQLConnection.connect(vertx, options, res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    <span class="hljs-comment">// 用SSL连接</span>
  } <span class="hljs-keyword">else</span> {
    System.out.println(<span class="hljs-string">&quot;Could not connect &quot;</span> + res.cause());
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>更多详细信息，请参阅 <a href="http://vertx.io/docs/vertx-core/java/#ssl">Vert.x 文档</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_mysql_utility_command"><a class="anchor" href="#_mysql_utility_command"></a>MySQL 实用程序命令</h2>
<div class="sectionbody">
<div class="paragraph">
<p>有时您希望使用 MySQL 实用程序命令，我们为此提供支持。有关更多信息，请参阅 <a href="https://dev.mysql.com/doc/dev/mysql-server/8.0.12/page_protocol_command_phase_utility.html">MySQL 实用程序命令</a>.</p>
</div>
<div class="sect2">
<h3 id="_com_ping"><a class="anchor" href="#_com_ping"></a>COM_PING</h3>
<div class="paragraph">
<p>您可以使用 <code>COM_PING</code> 命令检查服务器是否处于活动状态。如果服务器响应 PING，将通知处理程序，否则将永远不会调用处理程序。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">connection.ping(ar -&gt; {
  System.out.println(<span class="hljs-string">&quot;The server has responded to the PING&quot;</span>);
});</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_com_reset_connection"><a class="anchor" href="#_com_reset_connection"></a>COM_RESET_CONNECTION</h3>
<div class="paragraph">
<p>您可以使用 <code>COM_RESET_CONNECTION</code> 命令重置会话状态，这将重置连接状态，如：
- user variables
- temporary tables
- prepared statements</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">connection.resetConnection(ar -&gt; {
  <span class="hljs-keyword">if</span> (ar.succeeded()) {
    System.out.println(<span class="hljs-string">&quot;Connection has been reset now&quot;</span>);
  } <span class="hljs-keyword">else</span> {
    System.out.println(<span class="hljs-string">&quot;Failure: &quot;</span> + ar.cause().getMessage());
  }
});</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_com_change_user"><a class="anchor" href="#_com_change_user"></a>COM_CHANGE_USER</h3>
<div class="paragraph">
<p>您可以更改当前连接的用户，这将执行re-authentication并重置连接状态，如 <code>COM_RESET_CONNECTION</code> 。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">MySQLAuthOptions authenticationOptions = <span class="hljs-keyword">new</span> MySQLAuthOptions()
  .setUser(<span class="hljs-string">&quot;newuser&quot;</span>)
  .setPassword(<span class="hljs-string">&quot;newpassword&quot;</span>)
  .setDatabase(<span class="hljs-string">&quot;newdatabase&quot;</span>);
connection.changeUser(authenticationOptions, ar -&gt; {
  <span class="hljs-keyword">if</span> (ar.succeeded()) {
    System.out.println(<span class="hljs-string">&quot;User of current connection has been changed.&quot;</span>);
  } <span class="hljs-keyword">else</span> {
    System.out.println(<span class="hljs-string">&quot;Failure: &quot;</span> + ar.cause().getMessage());
  }
});</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_com_init_db"><a class="anchor" href="#_com_init_db"></a>COM_INIT_DB</h3>
<div class="paragraph">
<p>您可以使用 <code>COM_INIT_DB</code> 命令更改连接的默认schema。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">connection.specifySchema(<span class="hljs-string">&quot;newschema&quot;</span>, ar -&gt; {
  <span class="hljs-keyword">if</span> (ar.succeeded()) {
    System.out.println(<span class="hljs-string">&quot;Default schema changed to newschema&quot;</span>);
  } <span class="hljs-keyword">else</span> {
    System.out.println(<span class="hljs-string">&quot;Failure: &quot;</span> + ar.cause().getMessage());
  }
});</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_com_statistics"><a class="anchor" href="#_com_statistics"></a>COM_STATISTICS</h3>
<div class="paragraph">
<p>您可以使用 <code>COM_STATISTICS</code> 命令获取某些内部状态变量的可读字符串。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">connection.getInternalStatistics(ar -&gt; {
  <span class="hljs-keyword">if</span> (ar.succeeded()) {
    System.out.println(<span class="hljs-string">&quot;Statistics: &quot;</span> + ar.result());
  } <span class="hljs-keyword">else</span> {
    System.out.println(<span class="hljs-string">&quot;Failure: &quot;</span> + ar.cause().getMessage());
  }
});</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_com_debug"><a class="anchor" href="#_com_debug"></a>COM_DEBUG</h3>
<div class="paragraph">
<p>您可以使用 <code>COM_DEBUG</code> 命令将调试信息转储到MySQL服务器的STDOUT。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">connection.debug(ar -&gt; {
  <span class="hljs-keyword">if</span> (ar.succeeded()) {
    System.out.println(<span class="hljs-string">&quot;Debug info dumped to server&#x27;s STDOUT&quot;</span>);
  } <span class="hljs-keyword">else</span> {
    System.out.println(<span class="hljs-string">&quot;Failure: &quot;</span> + ar.cause().getMessage());
  }
});</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_com_set_option"><a class="anchor" href="#_com_set_option"></a>COM_SET_OPTION</h3>
<div class="paragraph">
<p>您可以使用 <code>COM_SET_OPTION</code> 命令设置当前连接的选项。目前只能设置 <code>CLIENT_MULTI_STATEMENTS</code>。</p>
</div>
<div class="paragraph">
<p>例如，您可以使用此命令禁用 <code>CLIENT_MULTI_STATEMENTS</code> 。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">connection.setOption(MySQLSetOption.MYSQL_OPTION_MULTI_STATEMENTS_OFF, ar -&gt; {
  <span class="hljs-keyword">if</span> (ar.succeeded()) {
    System.out.println(<span class="hljs-string">&quot;CLIENT_MULTI_STATEMENTS is off now&quot;</span>);
  } <span class="hljs-keyword">else</span> {
    System.out.println(<span class="hljs-string">&quot;Failure: &quot;</span> + ar.cause().getMessage());
  }
});</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_mysql_and_mariadb_version_support_matrix"><a class="anchor" href="#_mysql_and_mariadb_version_support_matrix"></a>MySQL 和 MariaDB 版本支持情况</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top" colspan="2">MySQL</th>
<th class="tableblock halign-center valign-top" colspan="2">MariaDB</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">版本</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">是否支持</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">版本</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">是否支持</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>5.5</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">&#10004;</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>10.1</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">&#10004;</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>5.6</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">&#10004;</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>10.2</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">&#10004;</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>5.7</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">&#10004;</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>10.3</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">&#10004;</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>8.0</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">&#10004;</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>10.4</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">&#10004;</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>已知问题：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>重置连接实用程序命令在 MySQL 5.5、5.6 和 MariaDB 10.1 中不可用</p>
</li>
<li>
<p>MariaDB 10.2 和 10.3 不支持更改用户实用程序命令</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_pitfalls_good_practices"><a class="anchor" href="#_pitfalls_good_practices"></a>陷阱和最佳实践</h2>
<div class="sectionbody">
<div class="paragraph">
<p>以下是使用响应式 MySQL 客户端时避免常见陷阱的一些最佳实践。</p>
</div>
<div class="sect2">
<h3 id="_prepared_statement_count_limit"><a class="anchor" href="#_prepared_statement_count_limit"></a>预处理语句的计数限制</h3>
<div class="paragraph">
<p>有时您可能会遇到臭名昭著的错误 <code>Can&#8217;t create more than max_prepared_stmt_count statements (current value: 16382)</code> ，这是因为服务器已达到预处理语句的总数限制。</p>
</div>
<div class="paragraph">
<p>您可以调整服务器系统变量  <code>max_prepared_stmt_count</code> ，但它具有上限值，因此您无法以这种方式摆脱错误。</p>
</div>
<div class="paragraph">
<p>缓解这种情况的最佳方法是启用预处理语句缓存，因此可以重用具有相同 SQL 字符串的预处理语句，并且客户端不必为每个请求创建全新的预处理语句。
执行语句后，预处理语句将自动关闭。
这样，虽然无法完全消除错误，但达到极限的机会可以大大减少。</p>
</div>
<div class="paragraph">
<p>还可以通过接口 <code>SqlConnection#prepare</code> 创建 <code>PreparedStatement</code> 对象来手动管理预处理语句的生命周期，以便可以选择何时释放语句句柄，甚至使用 <a href="https://dev.mysql.com/doc/refman/8.0/en/sql-prepared-statements.html">SQL syntax prepared statement</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_demystifying_prepared_batch"><a class="anchor" href="#_demystifying_prepared_batch"></a>揭开批量预处理神秘面纱</h3>
<div class="paragraph">
<p>当您要将数据批量插入到数据库中时，您可以使用 <code>PreparedQuery#executeBatch</code> ，它提供了一个简单的 API 来处理此问题。
请记住，MySQL 原生不支持批处理协议，因此 API 只是语法糖，一个接一个执行预处理语句，这意味着比执行一个预处理语句插入多条带有值列表的记录，需要更多的网络往返耗时。</p>
</div>
</div>
<div class="sect2">
<h3 id="_tricky_date_time_data_types"><a class="anchor" href="#_tricky_date_time_data_types"></a>棘手的日期和时间数据类型</h3>
<div class="paragraph">
<p>处理 MYSQL 日期和时间数据类型（尤其是时区）是棘手的，因此响应式 MySQL 客户端不会为这些值进行魔法转换。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>MySQL DATETIME 数据类型不包含时区信息，因此无论当前会话中的时区是什么，您获取的内容都与您设置的内容相同</p>
</li>
<li>
<p>MySQL TIMESTAMP 数据类型包含时区信息，因此当您设置或获取值时，服务器总是通过当前会话中设置的时区来转换该值。</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_advanced_pool_configuration"><a class="anchor" href="#_advanced_pool_configuration"></a>高级连接池配置</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_server_load_balancing"><a class="anchor" href="#_server_load_balancing"></a>数据库服务负载均衡</h3>
<div class="paragraph">
<p>您可以使用包含多个数据库服务的列表来配置连接池而不是单个数据库服务。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">MySQLPool pool = MySQLPool.pool(Arrays.asList(server1, server2, server3), options);</code></pre>
</div>
</div>
<div class="paragraph">
<p>当一个连接创建时，连接池使用(round-robin)轮询调度算法做负载均衡以选择不同的数据库服务</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">注意</div>
</td>
<td class="content">
负载均衡是在创建连接时提供的，而不是在从连接池中获取连接时提供
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_pool_connection_initialization"><a class="anchor" href="#_pool_connection_initialization"></a>连接初始化</h3>
<div class="paragraph">
<p>您可以使用 <code><a href="../../apidocs/io/vertx/sqlclient/Pool.html#connectHandler-io.vertx.core.Handler-">connectHandler</a></code>
方法在连接创建后和连接释放回连接池之前来与数据库连接交互</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">pool.connectHandler(conn -&gt; {
  conn.query(sql).execute().onSuccess(res -&gt; {
    <span class="hljs-comment">//  将连接释放回连接池，以被该应用程序复用</span>
    conn.close();
  });
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>连接完成后，您应该释放该连接以通知连接池该数据库连接可以被使用</p>
</div>
</div>
</div>
</div></div></div></div></div></div><footer class="jsx-aeedcf66895f49d7"><div class="jsx-aeedcf66895f49d7 container"><div class="jsx-aeedcf66895f49d7 footer-nav-section"><div class="jsx-aeedcf66895f49d7 footer-nav-list footer-logo"><a class="jsx-aeedcf66895f49d7" href="/"><img src="data:image/svg+xml,%3csvg version=&#x27;1.1&#x27; id=&#x27;Layer_1&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27; x=&#x27;0&#x27; y=&#x27;0&#x27; viewBox=&#x27;0 0 1232.6 315.2&#x27; style=&#x27;enable-background:new 0 0 1232.6 315.2&#x27; xml:space=&#x27;preserve&#x27;%3e%3cstyle%3e.st0%7bfill:%23782a91%7d%3c/style%3e%3cpath d=&#x27;M120.9 214.2 190.5 0h52.3l-98.5 273.8H98.2L0 0h52.1l68.8 214.2zm291.2-62.6H299.6v84.2H431v38H252V0h177.7v38.4H299.6V114h112.5v37.6zm83.7-113.2H546c16.5.3 29 4.4 37.3 12.4 8.3 8 12.5 19.4 12.5 34 0 14-4.5 25.1-13.5 33.2-9 8.1-21.6 12.1-37.6 12.1h-27.1v24.2l86.1 119.5h51v-2.4l-77.2-106.7c24.9-5.5 43.3-21.7 52.6-35.9 8.2-12.6 13.3-27.7 13.3-46 0-26.8-8.6-47.4-25.8-61.5C600.5 7.1 576.1 0 544.5 0h-96.3v273.8h47.6&#x27;/%3e%3cpath class=&#x27;st0&#x27; d=&#x27;m1052.3 157.7-41.5 62.7 29.7 53.4h85.1z&#x27;/%3e%3ccircle class=&#x27;st0&#x27; cx=&#x27;827.9&#x27; cy=&#x27;274.7&#x27; r=&#x27;40.5&#x27;/%3e%3cpath class=&#x27;st0&#x27; d=&#x27;m1037 0-47.6 74.2L949 0h-84l85.3 135.8-67.1 105.7c5.7 9.5 9.1 20.5 9.2 32.4h50.1L1121.3 0H1037z&#x27;/%3e%3cpath d=&#x27;M763.5 273.8c.1-9.9 2.5-19.2 6.6-27.5V38.4h85.4V0H638.2v38.4h84.6v235.4h40.7zm414-266.9h-15.3v42.2h-8.5V6.9h-15.2V0h39v6.9zM1193 0l14.2 37.7L1221.3 0h11v49.1h-8.5V32.9l.8-21.7-14.5 37.9h-6.1l-14.5-37.8.8 21.6v16.2h-8.5V0h11.2z&#x27;/%3e%3c/svg%3e" alt="Vert.x Logo" class="jsx-aeedcf66895f49d7"/></a></div><div class="jsx-aeedcf66895f49d7 footer-nav-list"><h5 class="jsx-aeedcf66895f49d7">Eclipse Vert.x</h5><ul class="jsx-aeedcf66895f49d7 "><li class="jsx-aeedcf66895f49d7"><a class="jsx-aeedcf66895f49d7 navbar-menu-item" href="/docs/">文档</a></li><li class="jsx-aeedcf66895f49d7"><a class="jsx-aeedcf66895f49d7" href="/download/">下载</a></li><li class="jsx-aeedcf66895f49d7"><a class="jsx-aeedcf66895f49d7" href="/blog/">博客</a></li><li class="jsx-aeedcf66895f49d7"><a class="jsx-aeedcf66895f49d7" href="/community/">社区</a></li><li class="jsx-aeedcf66895f49d7"><a class="jsx-aeedcf66895f49d7" href="/translation/">翻译团队</a></li><li class="jsx-aeedcf66895f49d7"><a href="https://github.com/eclipse-vertx/vert.x" class="jsx-aeedcf66895f49d7">GitHub</a></li><li class="jsx-aeedcf66895f49d7"><a href="https://github.com/vertx-china/vertx-web-site" class="jsx-aeedcf66895f49d7">翻译GitHub</a></li></ul></div><div class="jsx-aeedcf66895f49d7 footer-nav-list"><h5 class="jsx-aeedcf66895f49d7">资源</h5><ul class="jsx-aeedcf66895f49d7 "><li class="jsx-aeedcf66895f49d7"><a class="jsx-aeedcf66895f49d7" href="/faq/">答疑</a></li><li class="jsx-aeedcf66895f49d7"><a class="jsx-aeedcf66895f49d7" href="/channels/">联系渠道</a></li><li class="jsx-aeedcf66895f49d7"><a href="https://how-to.vertx.io/" class="jsx-aeedcf66895f49d7">操作指南</a></li><li class="jsx-aeedcf66895f49d7"><a href="https://start.vertx.io/" class="jsx-aeedcf66895f49d7">应用生成器</a></li><li class="jsx-aeedcf66895f49d7"><a href="/.well-known/security.txt" class="jsx-aeedcf66895f49d7">security.txt</a></li></ul></div><div class="jsx-aeedcf66895f49d7 footer-nav-list"><h5 class="jsx-aeedcf66895f49d7">Eclipse</h5><ul class="jsx-aeedcf66895f49d7 "><li class="jsx-aeedcf66895f49d7"><a href="https://www.eclipse.org/" class="jsx-aeedcf66895f49d7">Eclipse 基金会</a></li><li class="jsx-aeedcf66895f49d7"><a href="https://www.eclipse.org/legal/privacy.php" class="jsx-aeedcf66895f49d7">隐私政策</a></li><li class="jsx-aeedcf66895f49d7"><a href="https://www.eclipse.org/legal/termsofuse.php" class="jsx-aeedcf66895f49d7">使用条款</a></li><li class="jsx-aeedcf66895f49d7"><a href="https://www.eclipse.org/legal/copyright.php" class="jsx-aeedcf66895f49d7">版权代理</a></li><li class="jsx-aeedcf66895f49d7"><a href="https://www.eclipse.org/legal/" class="jsx-aeedcf66895f49d7">法律资源</a></li></ul></div></div><div class="jsx-aeedcf66895f49d7 footer-copyright"><div class="jsx-aeedcf66895f49d7 footer-copyright-remarks">© <!-- -->2022<!-- --> Eclipse Vert.x™<br class="jsx-aeedcf66895f49d7"/>Eclipse Vert.x™ 是开源的，并在<a href="https://creativecommons.org/licenses/by-sa/3.0/" target="_blank" rel="noopener noreferrer" class="jsx-aeedcf66895f49d7">Eclipse Public License 2.0</a>和<a href="https://www.apache.org/licenses/LICENSE-2.0.html" target="_blank" rel="noopener noreferrer" class="jsx-aeedcf66895f49d7">Apache License 2.0</a>协议下获得了双重许可。<br class="jsx-aeedcf66895f49d7 footer-copyright-break"/>网站由 <a href="https://michelkraemer.com" target="_blank" rel="noopener noreferrer" class="jsx-aeedcf66895f49d7">Michel Krämer</a> 设计。</div><div class="jsx-aeedcf66895f49d7 footer-copyright-eclipse-logo"><a href="https://www.eclipse.org/" target="_blank" rel="noopener noreferrer" class="jsx-aeedcf66895f49d7"><img src="data:image/svg+xml,%3csvg version=&#x27;1.1&#x27; id=&#x27;Layer_1&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27; x=&#x27;0&#x27; y=&#x27;0&#x27; viewBox=&#x27;0 0 281.3 91.1&#x27; style=&#x27;enable-background:new 0 0 281.3 91.1&#x27; xml:space=&#x27;preserve&#x27;%3e%3cstyle%3e.st0%7bfill:%23f79422%7d.st1%7bfill:%233d3c3b%7d%3c/style%3e%3cg id=&#x27;Layer_1_1_&#x27;%3e%3cpath class=&#x27;st0&#x27; d=&#x27;M265.7 84 257 73h-2.7v17.7h3.3v-12l9.3 12h2.1V73h-3.3v11zm-32.4-8.3c4.2 0 5.8 3.3 5.8 6.3s-1.6 6-5.8 6-5.7-3.1-5.8-6 1.7-6.3 5.8-6.3zm0-3c-6.1 0-9.1 4.7-9.1 9.3 0 4.7 2.9 9.1 9.1 9.1s9-4.6 9.1-9.2-3-9.2-9.1-9.2zm-21.2 18V73h-3.3v17.7h3.3zm-23.6 0h3.3V76h5.6v-3h-14.6v3h5.6l.1 14.7zm-18.9-6.5H163l3.3-7.6 3.3 7.6zm2.8 6.5h3.6L168.2 73h-3.6l-8 17.7h3.6l1.5-3.3h9.3l1.4 3.3zm-38-14.6h3.6c3.9 0 5.5 2.8 5.5 5.5.1 2.8-1.5 5.8-5.5 5.8h-3.6V76.1zm3.7-3.1h-6.9v17.7h6.9c6.2 0 8.9-4.5 8.9-9s-2.8-8.7-8.9-8.7zm-22.4 11L107 73h-2.7v17.7h3.3v-12l9.3 12h2.1V73h-3.3v11zM88.2 73v10.2c0 3-1.6 4.9-4.3 4.9s-4.6-1.7-4.6-4.9V73H76v10.1c0 5.3 3.6 7.9 7.9 7.9 4.4 0 7.7-2.7 7.7-7.9V73h-3.4zm-33 2.7c4.2 0 5.8 3.3 5.8 6.3s-1.6 6-5.8 6-5.7-3.1-5.8-6 1.7-6.3 5.8-6.3zm0-3c-6.1 0-9.1 4.7-9.1 9.3s2.9 9.1 9.1 9.1 9-4.6 9.1-9.2-3-9.2-9.1-9.2zm-29.7 18v-6.5h8.9v-3.1h-8.9v-4.8h9.4V73H22.2v17.6h3.3z&#x27;/%3e%3cpath class=&#x27;st1&#x27; d=&#x27;M269.4 54.4h-22.2v-8.9h21.4v-6.9h-21.4v-9.1h22.2v-7.2h-29.6v39.5h29.6v-7.4zm-40-25.6c-3-6.1-9.4-7.8-15.5-7.8-7.3 0-15.3 3.4-15.3 11.5 0 8.9 7.4 11 15.5 12 5.2.6 9.1 2.1 9.1 5.8 0 4.3-4.4 5.9-9.1 5.9s-9.4-1.9-11.1-6.3l-6.2 3.2c2.9 7.2 9.1 9.7 17.2 9.7 8.8 0 16.6-3.8 16.6-12.6 0-9.4-7.7-11.6-15.9-12.6-4.7-.6-8.8-1.5-8.8-5 0-2.9 2.6-5.2 8.2-5.2 4.3 0 8 2.2 9.4 4.4l5.9-3zM176 22.2c-6.2-.1-12.4 0-18.6 0v39.5h7.4V50.1H176c19.4 0 19.4-27.9 0-27.9zm-11.1 7.1H176c9.5 0 9.5 14 0 14h-11.2l.1-14zm-18 32.5V22.2h-7.4v39.5l7.4.1zm-44-39.6v39.5h27.7v-6.9h-20.3V22.2h-7.4zM90.7 51.7c-2.7 2.5-6.2 4-9.9 4-9.8 0-13.5-6.8-13.6-13.4s4.1-13.7 13.6-13.7c3.5-.1 7 1.3 9.5 3.7l5-4.8c-3.8-3.9-9.1-6-14.5-6-14.3 0-21 10.5-20.9 20.8s6.3 20.3 20.9 20.3c5.6.1 11-2 15-5.9l-5.1-5zm-39 2.7H29.5v-8.9h21.4v-6.9H29.5v-9.1h22.2v-7.2H22.2v39.5h29.6l-.1-7.4z&#x27;/%3e%3cpath class=&#x27;st0&#x27; d=&#x27;M9.8 18.2C18.8 4.1 36.9-.8 52.1 6l-1-.7C35.7-4.6 15.2-.1 5.3 15.3s-5.4 35.9 10 45.8l1.1.6C3.8 50.8.8 32.3 9.8 18.2z&#x27;/%3e%3cpath class=&#x27;st1&#x27; d=&#x27;M272.2 26.1c0-2.5 2.1-4.6 4.6-4.6 2.5 0 4.6 2.1 4.6 4.6 0 2.5-2.1 4.6-4.6 4.6-2.6 0-4.6-2.1-4.6-4.6zm8.6 0c0-2.2-1.8-4.1-4-4.1s-4.1 1.8-4.1 4.1c0 2.2 1.7 4 3.9 4.1h.1c2.3 0 4.1-1.8 4.1-4.1zm-6-2.5h2.3c1.1 0 1.9.5 1.9 1.6 0 .7-.4 1.3-1.1 1.5l1.2 1.7h-1.4l-1-1.5h-.7v1.5h-1.1l-.1-4.8zm2.2 2.3c.5 0 .8-.3.8-.7s-.3-.7-.8-.7h-1v1.3l1 .1z&#x27;/%3e%3c/g%3e%3c/svg%3e" alt="Eclipse foundation Logo" class="jsx-aeedcf66895f49d7"/></a></div></div></div></footer></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"slug":"4.1.8/vertx-mysql-client/java","title":"响应式 MySQL 客户端","fallbackGitHubStars":null,"toc":"\u003cdiv id=\"toc\" class=\"toc\"\u003e\n\u003cdiv id=\"toctitle\"\u003eTable of Contents\u003c/div\u003e\n\u003cul class=\"sectlevel1\"\u003e\n\u003cli\u003e\u003ca href=\"#_usage\"\u003e使用方法\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_getting_started\"\u003e开始\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_connecting_to_mysql\"\u003e连接到 MySQL\u003c/a\u003e\n\u003cul class=\"sectlevel2\"\u003e\n\u003cli\u003e\u003ca href=\"#_unix_domain_socket\"\u003eUnix 域套接字\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_configuration\"\u003e配置\u003c/a\u003e\n\u003cul class=\"sectlevel2\"\u003e\n\u003cli\u003e\u003ca href=\"#_data_object\"\u003e数据对象\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_connection_uri\"\u003e连接 URI\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_connect_retries\"\u003e连接重试\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_running_queries\"\u003e运行查询\u003c/a\u003e\n\u003cul class=\"sectlevel2\"\u003e\n\u003cli\u003e\u003ca href=\"#_prepared_queries\"\u003e预处理查询\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_batches\"\u003e批处理\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_mysql_last_insert_id\"\u003eMySQL LAST_INSERT_ID\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_using_connections\"\u003e使用连接\u003c/a\u003e\n\u003cul class=\"sectlevel2\"\u003e\n\u003cli\u003e\u003ca href=\"#_getting_a_connection\"\u003e获取连接\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_simplified_connection_api\"\u003e简单连接 API\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_using_transactions\"\u003e使用事务\u003c/a\u003e\n\u003cul class=\"sectlevel2\"\u003e\n\u003cli\u003e\u003ca href=\"#_transactions_with_connections\"\u003e带事务的连接\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_simplified_transaction_api_2\"\u003e简单事务 API\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_cursors_and_streaming\"\u003e游标和流\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_tracing_queries\"\u003e追踪查询\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_mysql_type_mapping\"\u003eMySQL 类型映射\u003c/a\u003e\n\u003cul class=\"sectlevel2\"\u003e\n\u003cli\u003e\u003ca href=\"#_implicit_type_conversion\"\u003e隐式类型转换\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_handling_boolean\"\u003e处理布尔值\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_handling_json\"\u003e处理 JSON\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_handling_bit\"\u003e处理 BIT\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_handling_time\"\u003e处理 TIME\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_handling_numeric\"\u003e处理 NUMERIC\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_handling_enum\"\u003e处理 ENUM\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_handling_geometry\"\u003e处理 GEOMETRY\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_collector_queries\"\u003e集合类查询\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_mysql_stored_procedure\"\u003eMySQL 存储过程\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_mysql_local_infile\"\u003eMySQL 导入本地文件\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_authentication\"\u003e认证\u003c/a\u003e\n\u003cul class=\"sectlevel2\"\u003e\n\u003cli\u003e\u003ca href=\"#_default_authentication_plugin\"\u003e默认身份验证插件\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_new_authentication_method_introduced_in_mysql_8\"\u003eMySQL 8 中引入的新身份验证方法\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_using_ssltls\"\u003e使用 SSL/TLS\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_mysql_utility_command\"\u003eMySQL 实用程序命令\u003c/a\u003e\n\u003cul class=\"sectlevel2\"\u003e\n\u003cli\u003e\u003ca href=\"#_com_ping\"\u003eCOM_PING\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_com_reset_connection\"\u003eCOM_RESET_CONNECTION\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_com_change_user\"\u003eCOM_CHANGE_USER\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_com_init_db\"\u003eCOM_INIT_DB\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_com_statistics\"\u003eCOM_STATISTICS\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_com_debug\"\u003eCOM_DEBUG\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_com_set_option\"\u003eCOM_SET_OPTION\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_mysql_and_mariadb_version_support_matrix\"\u003eMySQL 和 MariaDB 版本支持情况\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_pitfalls_good_practices\"\u003e陷阱和最佳实践\u003c/a\u003e\n\u003cul class=\"sectlevel2\"\u003e\n\u003cli\u003e\u003ca href=\"#_prepared_statement_count_limit\"\u003e预处理语句的计数限制\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_demystifying_prepared_batch\"\u003e揭开批量预处理神秘面纱\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_tricky_date_time_data_types\"\u003e棘手的日期和时间数据类型\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_advanced_pool_configuration\"\u003e高级连接池配置\u003c/a\u003e\n\u003cul class=\"sectlevel2\"\u003e\n\u003cli\u003e\u003ca href=\"#_server_load_balancing\"\u003e数据库服务负载均衡\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_pool_connection_initialization\"\u003e连接初始化\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e","contents":"\u003ch1\u003e响应式 MySQL 客户端\u003c/h1\u003e\n\n\u003cdiv id=\"preamble\"\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e响应式 MySQL 客户端具有简单易懂的 API，专注于可扩展性和低开销。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e\u003cstrong\u003e特性\u003c/strong\u003e\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e事件驱动\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e轻量级\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e内置连接池\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e预处理查询缓存\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e支持游标\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e流式行处理\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eRxJava API\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e支持内存直接映射到对象，避免了不必要的复制\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e完整的数据类型支持\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e支持存储过程\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e支持 TLS/SSL\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eMySQL 实用程序命令支持\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e支持 MySQL 和 MariaDB\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e丰富的字符排序（collation）和字符集支持\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eUnix 域套接字\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_usage\"\u003e\u003ca class=\"anchor\" href=\"#_usage\"\u003e\u003c/a\u003e使用方法\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e使用响应式 MySQL 客户端，需要将以下依赖项添加到项目构建工具的 \u003cem\u003e依赖\u003c/em\u003e 配置中：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eMaven (在您的 \u003ccode\u003epom.xml\u003c/code\u003e):\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-xml\" data-lang=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\n \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003eio.vertx\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003evertx-mysql-client\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e4.1.8\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eGradle (在您的 \u003ccode\u003ebuild.gradle\u003c/code\u003e 文件中):\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-groovy\" data-lang=\"groovy\"\u003edependencies {\n compile \u003cspan class=\"hljs-string\"\u003e\u0026#x27;io.vertx:vertx-mysql-client:4.1.8\u0026#x27;\u003c/span\u003e\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_getting_started\"\u003e\u003ca class=\"anchor\" href=\"#_getting_started\"\u003e\u003c/a\u003e开始\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e以下是最简单的连接，查询和断开连接方法\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eMySQLConnectOptions connectOptions = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e MySQLConnectOptions()\n  .setPort(\u003cspan class=\"hljs-number\"\u003e3306\u003c/span\u003e)\n  .setHost(\u003cspan class=\"hljs-string\"\u003e\u0026quot;the-host\u0026quot;\u003c/span\u003e)\n  .setDatabase(\u003cspan class=\"hljs-string\"\u003e\u0026quot;the-db\u0026quot;\u003c/span\u003e)\n  .setUser(\u003cspan class=\"hljs-string\"\u003e\u0026quot;user\u0026quot;\u003c/span\u003e)\n  .setPassword(\u003cspan class=\"hljs-string\"\u003e\u0026quot;secret\u0026quot;\u003c/span\u003e);\n\n\u003cspan class=\"hljs-comment\"\u003e// 连接池选项\u003c/span\u003e\nPoolOptions poolOptions = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e PoolOptions()\n  .setMaxSize(\u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e);\n\n\u003cspan class=\"hljs-comment\"\u003e// 创建客户端池\u003c/span\u003e\nMySQLPool client = MySQLPool.pool(connectOptions, poolOptions);\n\n\u003cspan class=\"hljs-comment\"\u003e// 一个简单的查询\u003c/span\u003e\nclient\n  .query(\u003cspan class=\"hljs-string\"\u003e\u0026quot;SELECT * FROM users WHERE id=\u0026#x27;julien\u0026#x27;\u0026quot;\u003c/span\u003e)\n  .execute(ar -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.succeeded()) {\n    RowSet\u0026lt;Row\u0026gt; result = ar.result();\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Got \u0026quot;\u003c/span\u003e + result.size() + \u003cspan class=\"hljs-string\"\u003e\u0026quot; rows \u0026quot;\u003c/span\u003e);\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Failure: \u0026quot;\u003c/span\u003e + ar.cause().getMessage());\n  }\n\n  \u003cspan class=\"hljs-comment\"\u003e// 现在关闭客户端池\u003c/span\u003e\n  client.close();\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_connecting_to_mysql\"\u003e\u003ca class=\"anchor\" href=\"#_connecting_to_mysql\"\u003e\u003c/a\u003e连接到 MySQL\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e大多数时间，您将使用连接池连接到 MySQL：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eMySQLConnectOptions connectOptions = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e MySQLConnectOptions()\n  .setPort(\u003cspan class=\"hljs-number\"\u003e3306\u003c/span\u003e)\n  .setHost(\u003cspan class=\"hljs-string\"\u003e\u0026quot;the-host\u0026quot;\u003c/span\u003e)\n  .setDatabase(\u003cspan class=\"hljs-string\"\u003e\u0026quot;the-db\u0026quot;\u003c/span\u003e)\n  .setUser(\u003cspan class=\"hljs-string\"\u003e\u0026quot;user\u0026quot;\u003c/span\u003e)\n  .setPassword(\u003cspan class=\"hljs-string\"\u003e\u0026quot;secret\u0026quot;\u003c/span\u003e);\n\n\u003cspan class=\"hljs-comment\"\u003e// 连接池选项\u003c/span\u003e\nPoolOptions poolOptions = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e PoolOptions()\n  .setMaxSize(\u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e);\n\n\u003cspan class=\"hljs-comment\"\u003e// 创建带连接池的客户端\u003c/span\u003e\nMySQLPool client = MySQLPool.pool(connectOptions, poolOptions);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e带连接池的客户端使用连接池，任何操作都将借用连接池中的连接来执行该操作，\n并将连接释放回连接池中。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e如果您使用 Vert.x 运行，您可以将 Vertx 实例传递给它：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eMySQLConnectOptions connectOptions = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e MySQLConnectOptions()\n  .setPort(\u003cspan class=\"hljs-number\"\u003e3306\u003c/span\u003e)\n  .setHost(\u003cspan class=\"hljs-string\"\u003e\u0026quot;the-host\u0026quot;\u003c/span\u003e)\n  .setDatabase(\u003cspan class=\"hljs-string\"\u003e\u0026quot;the-db\u0026quot;\u003c/span\u003e)\n  .setUser(\u003cspan class=\"hljs-string\"\u003e\u0026quot;user\u0026quot;\u003c/span\u003e)\n  .setPassword(\u003cspan class=\"hljs-string\"\u003e\u0026quot;secret\u0026quot;\u003c/span\u003e);\n\n\u003cspan class=\"hljs-comment\"\u003e// 连接池选项\u003c/span\u003e\nPoolOptions poolOptions = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e PoolOptions()\n  .setMaxSize(\u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e);\n\u003cspan class=\"hljs-comment\"\u003e// 创建带连接池的客户端\u003c/span\u003e\nMySQLPool client = MySQLPool.pool(vertx, connectOptions, poolOptions);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e当您不再需要连接池时，您需要释放它：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003epool.close();\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e当您需要在同一连接上执行多个操作时，您需要使用\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/mysqlclient/MySQLConnection.html\"\u003econnection\u003c/a\u003e\u003c/code\u003e 客户端 。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您可以轻松地从连接池中获取一个：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eMySQLConnectOptions connectOptions = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e MySQLConnectOptions()\n  .setPort(\u003cspan class=\"hljs-number\"\u003e3306\u003c/span\u003e)\n  .setHost(\u003cspan class=\"hljs-string\"\u003e\u0026quot;the-host\u0026quot;\u003c/span\u003e)\n  .setDatabase(\u003cspan class=\"hljs-string\"\u003e\u0026quot;the-db\u0026quot;\u003c/span\u003e)\n  .setUser(\u003cspan class=\"hljs-string\"\u003e\u0026quot;user\u0026quot;\u003c/span\u003e)\n  .setPassword(\u003cspan class=\"hljs-string\"\u003e\u0026quot;secret\u0026quot;\u003c/span\u003e);\n\n\u003cspan class=\"hljs-comment\"\u003e// 连接池选项\u003c/span\u003e\nPoolOptions poolOptions = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e PoolOptions()\n  .setMaxSize(\u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e);\n\n\u003cspan class=\"hljs-comment\"\u003e// 创建带连接池的客户端\u003c/span\u003e\nMySQLPool client = MySQLPool.pool(vertx, connectOptions, poolOptions);\n\n\u003cspan class=\"hljs-comment\"\u003e// 从连接池获得连接\u003c/span\u003e\nclient.getConnection().compose(conn -\u0026gt; {\n  System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Got a connection from the pool\u0026quot;\u003c/span\u003e);\n\n  \u003cspan class=\"hljs-comment\"\u003e// 所有操作都在同一连接上执行\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e conn\n    .query(\u003cspan class=\"hljs-string\"\u003e\u0026quot;SELECT * FROM users WHERE id=\u0026#x27;julien\u0026#x27;\u0026quot;\u003c/span\u003e)\n    .execute()\n    .compose(res -\u0026gt; conn\n      .query(\u003cspan class=\"hljs-string\"\u003e\u0026quot;SELECT * FROM users WHERE id=\u0026#x27;emad\u0026#x27;\u0026quot;\u003c/span\u003e)\n      .execute())\n    .onComplete(ar -\u0026gt; {\n      \u003cspan class=\"hljs-comment\"\u003e// 释放连接池的连接\u003c/span\u003e\n      conn.close();\n    });\n}).onComplete(ar -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.succeeded()) {\n\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Done\u0026quot;\u003c/span\u003e);\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Something went wrong \u0026quot;\u003c/span\u003e + ar.cause().getMessage());\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e连接完成后，您必须关闭它以释放到连接池中，以便可以重复使用。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_unix_domain_socket\"\u003e\u003ca class=\"anchor\" href=\"#_unix_domain_socket\"\u003e\u003c/a\u003eUnix 域套接字\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e有时为了简单，安全或性能原因，需要通过 \u003ca href=\"https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_socket\"\u003eUnix 域套接字\u003c/a\u003e 进行连接。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e由于 JVM 不支持域套接字，因此首先必须向项目添加本地传输（native transport）扩展。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eMaven (在您的 \u003ccode\u003epom.xml\u003c/code\u003e):\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-xml\" data-lang=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\n \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003eio.netty\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003enetty-transport-native-epoll\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e${netty.version}\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e\n \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eclassifier\u003c/span\u003e\u0026gt;\u003c/span\u003elinux-x86_64\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eclassifier\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eGradle (在您的 \u003ccode\u003ebuild.gradle\u003c/code\u003e 文件中):\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-groovy\" data-lang=\"groovy\"\u003edependencies {\n compile \u003cspan class=\"hljs-string\"\u003e\u0026#x27;io.netty:netty-transport-native-epoll:${netty.version}:linux-x86_64\u0026#x27;\u003c/span\u003e\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"admonitionblock note\"\u003e\n\u003ctable\u003e\n\u003ctr\u003e\n\u003ctd class=\"icon\"\u003e\n\u003cdiv class=\"title\"\u003e注意\u003c/div\u003e\n\u003c/td\u003e\n\u003ctd class=\"content\"\u003e\nARM64 的原生 \u003ccode\u003eepoll\u003c/code\u003e 支持也可以与分类器（classifier） \u003ccode\u003elinux-aarch64\u003c/code\u003e 一起添加。\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\n\u003c/div\u003e\n\u003cdiv class=\"admonitionblock note\"\u003e\n\u003ctable\u003e\n\u003ctr\u003e\n\u003ctd class=\"icon\"\u003e\n\u003cdiv class=\"title\"\u003e注意\u003c/div\u003e\n\u003c/td\u003e\n\u003ctd class=\"content\"\u003e\n如果您的团队中有 Mac 用户，在 \u003ccode\u003eosx-x86_64\u003c/code\u003e 上添加 \u003ccode\u003enetty-transport-native-kqueue\u003c/code\u003e 分类器（classifier）。\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e然后通过 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/mysqlclient/MySQLConnectOptions.html#setHost-java.lang.String-\"\u003eMySQLConnectOptions#setHost\u003c/a\u003e\u003c/code\u003e 设置域套接字的路径：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eMySQLConnectOptions connectOptions = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e MySQLConnectOptions()\n  .setHost(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/var/run/mysqld/mysqld.sock\u0026quot;\u003c/span\u003e)\n  .setDatabase(\u003cspan class=\"hljs-string\"\u003e\u0026quot;the-db\u0026quot;\u003c/span\u003e);\n\n\u003cspan class=\"hljs-comment\"\u003e// 连接池选项\u003c/span\u003e\nPoolOptions poolOptions = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e PoolOptions()\n  .setMaxSize(\u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e);\n\n\u003cspan class=\"hljs-comment\"\u003e// 创建带连接池的客户端\u003c/span\u003e\nMySQLPool client = MySQLPool.pool(connectOptions, poolOptions);\n\n\u003cspan class=\"hljs-comment\"\u003e// 使用vertx实例创建带连接池的客户端\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// 确保vertx实例已启用native transports\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// vertxOptions.setPreferNativeTransport(true);\u003c/span\u003e\nMySQLPool client2 = MySQLPool.pool(vertx, connectOptions, poolOptions);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e有关 native transport 的详细信息，请参阅 \u003ca href=\"https://vertx.io/docs/vertx-core/java/#_native_transports\"\u003eVert.x 文档\u003c/a\u003e 。\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_configuration\"\u003e\u003ca class=\"anchor\" href=\"#_configuration\"\u003e\u003c/a\u003e配置\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e有几个选项供您配置客户端。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_data_object\"\u003e\u003ca class=\"anchor\" href=\"#_data_object\"\u003e\u003c/a\u003e数据对象\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e配置客户端的简单方法就是指定 \u003ccode\u003eMySQLConnectOptions\u003c/code\u003e 数据对象。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eMySQLConnectOptions connectOptions = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e MySQLConnectOptions()\n  .setPort(\u003cspan class=\"hljs-number\"\u003e3306\u003c/span\u003e)\n  .setHost(\u003cspan class=\"hljs-string\"\u003e\u0026quot;the-host\u0026quot;\u003c/span\u003e)\n  .setDatabase(\u003cspan class=\"hljs-string\"\u003e\u0026quot;the-db\u0026quot;\u003c/span\u003e)\n  .setUser(\u003cspan class=\"hljs-string\"\u003e\u0026quot;user\u0026quot;\u003c/span\u003e)\n  .setPassword(\u003cspan class=\"hljs-string\"\u003e\u0026quot;secret\u0026quot;\u003c/span\u003e);\n\n\u003cspan class=\"hljs-comment\"\u003e// 连接池选项\u003c/span\u003e\nPoolOptions poolOptions = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e PoolOptions().setMaxSize(\u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e);\n\n\u003cspan class=\"hljs-comment\"\u003e// 从数据对象创建连接池\u003c/span\u003e\nMySQLPool pool = MySQLPool.pool(vertx, connectOptions, poolOptions);\n\npool.getConnection(ar -\u0026gt; {\n  \u003cspan class=\"hljs-comment\"\u003e// 处理您的连接\u003c/span\u003e\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect3\"\u003e\n\u003ch4 id=\"_collations_and_character_sets\"\u003e\u003ca class=\"anchor\" href=\"#_collations_and_character_sets\"\u003e\u003c/a\u003e字符序（collations）和字符集（character sets）\u003c/h4\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e响应式 MySQL 客户端支持配置字符序或字符集，并将它们映射到一个相关的 \u003ccode\u003ejava.nio.charset.Charset\u003c/code\u003e 。\n您可以为数据库连接指定字符集，例如\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eMySQLConnectOptions connectOptions = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e MySQLConnectOptions();\n\n\u003cspan class=\"hljs-comment\"\u003e// 将连接的字符集设置为utf8而不是默认的字符集utf8mb4\u003c/span\u003e\nconnectOptions.setCharset(\u003cspan class=\"hljs-string\"\u003e\u0026quot;utf8\u0026quot;\u003c/span\u003e);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e响应式 MySQL 客户端的默认字符集是 \u003ccode\u003eutf8mb4\u003c/code\u003e 。字符串值，如密码和错误消息等，总是使用 \u003ccode\u003eUTF-8\u003c/code\u003e 字符集解码。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e\u003ccode\u003echaracterEncoding\u003c/code\u003e 选项用于设置字符串（例如查询字符串和参数值）使用的 Java 字符集，默认使用 \u003ccode\u003eUTF-8\u003c/code\u003e 字符集；如果设置为 \u003ccode\u003enull\u003c/code\u003e ，则客户端将使用 Java 的默认字符集。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您还可以为连接指定字符序，例如\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eMySQLConnectOptions connectOptions = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e MySQLConnectOptions();\n\n\u003cspan class=\"hljs-comment\"\u003e// 将连接的字符序设置为 utf8_general_ci 来代替默认字符序 utf8mb4_general_ci\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// 设置字符序将覆盖charset选项\u003c/span\u003e\nconnectOptions.setCharset(\u003cspan class=\"hljs-string\"\u003e\u0026quot;gbk\u0026quot;\u003c/span\u003e);\nconnectOptions.setCollation(\u003cspan class=\"hljs-string\"\u003e\u0026quot;utf8_general_ci\u0026quot;\u003c/span\u003e);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e请注意，在数据对象上设置字符序将覆盖 \u003cstrong\u003echarset\u003c/strong\u003e 和 \u003cstrong\u003echaracterEncoding\u003c/strong\u003e 选项。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您可以执行 SQL \u003ccode\u003eSHOW COLLATION;\u003c/code\u003e 或 \u003ccode\u003eSHOW CHARACTER SET;\u003c/code\u003e 获取服务器支持的字符序和字符集。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e有关 MySQL 字符集和字符序的更多信息，请参阅 \u003ca href=\"https://dev.mysql.com/doc/refman/8.0/en/charset.html\"\u003eMySQL 参考手册\u003c/a\u003e。\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect3\"\u003e\n\u003ch4 id=\"_connection_attributes\"\u003e\u003ca class=\"anchor\" href=\"#_connection_attributes\"\u003e\u003c/a\u003e连接属性\u003c/h4\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e还可以使用 \u003ccode\u003esetProperties\u003c/code\u003e 或 \u003ccode\u003eaddProperty\u003c/code\u003e 方法配置连接属性。注意 \u003ccode\u003esetProperties\u003c/code\u003e 将覆盖客户端的默认属性。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eMySQLConnectOptions connectOptions = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e MySQLConnectOptions();\n\n\u003cspan class=\"hljs-comment\"\u003e// 添加连接属性\u003c/span\u003e\nconnectOptions.addProperty(\u003cspan class=\"hljs-string\"\u003e\u0026quot;_java_version\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;1.8.0_212\u0026quot;\u003c/span\u003e);\n\n\u003cspan class=\"hljs-comment\"\u003e// 覆盖属性\u003c/span\u003e\nMap\u0026lt;String, String\u0026gt; attributes = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e HashMap\u0026lt;\u0026gt;();\nattributes.put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;_client_name\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;myapp\u0026quot;\u003c/span\u003e);\nattributes.put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;_client_version\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;1.0.0\u0026quot;\u003c/span\u003e);\nconnectOptions.setProperties(attributes);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e有关连接属性的更多信息，请参阅 \u003ca href=\"https://dev.mysql.com/doc/refman/8.0/en/performance-schema-connection-attribute-tables.html\"\u003eMySQL 参考手册\u003c/a\u003e。\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect3\"\u003e\n\u003ch4 id=\"_useaffectedrows\"\u003e\u003ca class=\"anchor\" href=\"#_useaffectedrows\"\u003e\u003c/a\u003e配置 \u003ccode\u003euseAffectedRows\u003c/code\u003e\u003c/h4\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您可以 \u003ccode\u003euseAffectedRows\u003c/code\u003e 选项以决定是否在连接到服务器时设置标志 \u003ccode\u003eCLIENT_FOUND_ROWS\u003c/code\u003e。如果指定了 \u003ccode\u003eCLIENT_FOUND_ROWS\u003c/code\u003e 标志，则受影响的行计数（返回的）是查找到的行数，而不是受影响的行数。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e更多有关信息，请参阅 \u003ca href=\"https://dev.mysql.com/doc/refman/8.0/en/mysql-affected-rows.html\"\u003eMySQL 参考手册\u003c/a\u003e\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_connection_uri\"\u003e\u003ca class=\"anchor\" href=\"#_connection_uri\"\u003e\u003c/a\u003e连接 URI\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e除了使用 \u003ccode\u003eMySQLConnectOptions\u003c/code\u003e 数据对象进行配置外，我们还为您提供了另外一种使用连接URI进行配置的方法：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eString connectionUri = \u003cspan class=\"hljs-string\"\u003e\u0026quot;mysql://dbuser:secretpassword@database.server.com:3211/mydb\u0026quot;\u003c/span\u003e;\n\n\u003cspan class=\"hljs-comment\"\u003e// 从连接URI创建连接池\u003c/span\u003e\nMySQLPool pool = MySQLPool.pool(connectionUri);\n\n\u003cspan class=\"hljs-comment\"\u003e// 从连接URI创建连接\u003c/span\u003e\nMySQLConnection.connect(vertx, connectionUri, res -\u0026gt; {\n  \u003cspan class=\"hljs-comment\"\u003e// 处理您的连接\u003c/span\u003e\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e有关连接字符串格式的有关更多信息，请参阅 \u003ca href=\"https://dev.mysql.com/doc/refman/8.0/en/connecting-using-uri-or-key-value-pairs.html#connecting-using-uri\"\u003eMySQL 参考手册\u003c/a\u003e。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e目前，客户端支持以下的连接 uri 参数关键字（不区分大小写）：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003ehost\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eport\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003euser\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003epassword\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eschema\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003esocket\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003euseAffectedRows\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_connect_retries\"\u003e\u003ca class=\"anchor\" href=\"#_connect_retries\"\u003e\u003c/a\u003e连接重试\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您可以将客户端配置为在连接无法建立时重试。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eoptions\n  .setReconnectAttempts(\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e)\n  .setReconnectInterval(\u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_running_queries\"\u003e\u003ca class=\"anchor\" href=\"#_running_queries\"\u003e\u003c/a\u003e运行查询\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e当您不需要事务或运行单个查询时，您可以直接在连接池上运行查询。连接池将使用其中一个连接来运行查询并将结果返回给您。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e这是运行简单查询的方法：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eclient\n  .query(\u003cspan class=\"hljs-string\"\u003e\u0026quot;SELECT * FROM users WHERE id=\u0026#x27;julien\u0026#x27;\u0026quot;\u003c/span\u003e)\n  .execute(ar -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.succeeded()) {\n    RowSet\u0026lt;Row\u0026gt; result = ar.result();\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Got \u0026quot;\u003c/span\u003e + result.size() + \u003cspan class=\"hljs-string\"\u003e\u0026quot; rows \u0026quot;\u003c/span\u003e);\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Failure: \u0026quot;\u003c/span\u003e + ar.cause().getMessage());\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_prepared_queries\"\u003e\u003ca class=\"anchor\" href=\"#_prepared_queries\"\u003e\u003c/a\u003e预处理查询\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您可以对预处理查询执行相同的操作。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eSQL字符串可以使用数据库语法 `?` 按位置引用参数\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eclient\n  .preparedQuery(\u003cspan class=\"hljs-string\"\u003e\u0026quot;SELECT * FROM users WHERE id=?\u0026quot;\u003c/span\u003e)\n  .execute(Tuple.of(\u003cspan class=\"hljs-string\"\u003e\u0026quot;julien\u0026quot;\u003c/span\u003e), ar -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.succeeded()) {\n    RowSet\u0026lt;Row\u0026gt; rows = ar.result();\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Got \u0026quot;\u003c/span\u003e + rows.size() + \u003cspan class=\"hljs-string\"\u003e\u0026quot; rows \u0026quot;\u003c/span\u003e);\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Failure: \u0026quot;\u003c/span\u003e + ar.cause().getMessage());\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e查询方法提供异步 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/sqlclient/RowSet.html\"\u003eRowSet\u003c/a\u003e\u003c/code\u003e 实例，它适用于 \u003cem\u003eSELECT\u003c/em\u003e 查询。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eclient\n  .preparedQuery(\u003cspan class=\"hljs-string\"\u003e\u0026quot;SELECT first_name, last_name FROM users\u0026quot;\u003c/span\u003e)\n  .execute(ar -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.succeeded()) {\n    RowSet\u0026lt;Row\u0026gt; rows = ar.result();\n    \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e (Row row : rows) {\n      System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;User \u0026quot;\u003c/span\u003e + row.getString(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e) + \u003cspan class=\"hljs-string\"\u003e\u0026quot; \u0026quot;\u003c/span\u003e + row.getString(\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e));\n    }\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Failure: \u0026quot;\u003c/span\u003e + ar.cause().getMessage());\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e或 \u003cem\u003eUPDATE\u003c/em\u003e/\u003cem\u003eINSERT\u003c/em\u003e 查询:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eclient\n  .preparedQuery(\u003cspan class=\"hljs-string\"\u003e\u0026quot;INSERT INTO users (first_name, last_name) VALUES (?, ?)\u0026quot;\u003c/span\u003e)\n  .execute(Tuple.of(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Julien\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;Viet\u0026quot;\u003c/span\u003e), ar -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.succeeded()) {\n    RowSet\u0026lt;Row\u0026gt; rows = ar.result();\n    System.out.println(rows.rowCount());\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Failure: \u0026quot;\u003c/span\u003e + ar.cause().getMessage());\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/sqlclient/Row.html\"\u003eRow\u003c/a\u003e\u003c/code\u003e 使您可以按索引访问数据\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eSystem.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;User \u0026quot;\u003c/span\u003e + row.getString(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e) + \u003cspan class=\"hljs-string\"\u003e\u0026quot; \u0026quot;\u003c/span\u003e + row.getString(\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e));\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e或按名字\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eSystem.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;User \u0026quot;\u003c/span\u003e + row.getString(\u003cspan class=\"hljs-string\"\u003e\u0026quot;first_name\u0026quot;\u003c/span\u003e) + \u003cspan class=\"hljs-string\"\u003e\u0026quot; \u0026quot;\u003c/span\u003e + row.getString(\u003cspan class=\"hljs-string\"\u003e\u0026quot;last_name\u0026quot;\u003c/span\u003e));\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e客户端在这里不会使用任何魔术，并且无论您的SQL文本如何，列名都将用表中的名称标识。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您可以访问多样的类型\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eString firstName = row.getString(\u003cspan class=\"hljs-string\"\u003e\u0026quot;first_name\u0026quot;\u003c/span\u003e);\nBoolean male = row.getBoolean(\u003cspan class=\"hljs-string\"\u003e\u0026quot;male\u0026quot;\u003c/span\u003e);\nInteger age = row.getInteger(\u003cspan class=\"hljs-string\"\u003e\u0026quot;age\u0026quot;\u003c/span\u003e);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您可以使用缓存的预处理语句执行一次性的预处理查询：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003econnectOptions.setCachePreparedStatements(\u003cspan class=\"hljs-keyword\"\u003etrue\u003c/span\u003e);\nclient\n  .preparedQuery(\u003cspan class=\"hljs-string\"\u003e\u0026quot;SELECT * FROM users WHERE id = ?\u0026quot;\u003c/span\u003e)\n  .execute(Tuple.of(\u003cspan class=\"hljs-string\"\u003e\u0026quot;julien\u0026quot;\u003c/span\u003e), ar -\u0026gt; {\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.succeeded()) {\n      RowSet\u0026lt;Row\u0026gt; rows = ar.result();\n      System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Got \u0026quot;\u003c/span\u003e + rows.size() + \u003cspan class=\"hljs-string\"\u003e\u0026quot; rows \u0026quot;\u003c/span\u003e);\n    } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n      System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Failure: \u0026quot;\u003c/span\u003e + ar.cause().getMessage());\n    }\n  });\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您可以创建一个 \u003ccode\u003ePreparedStatement\u003c/code\u003e 并自己管理生命周期。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003esqlConnection\n  .prepare(\u003cspan class=\"hljs-string\"\u003e\u0026quot;SELECT * FROM users WHERE id = ?\u0026quot;\u003c/span\u003e, ar -\u0026gt; {\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.succeeded()) {\n      PreparedStatement preparedStatement = ar.result();\n      preparedStatement.query()\n        .execute(Tuple.of(\u003cspan class=\"hljs-string\"\u003e\u0026quot;julien\u0026quot;\u003c/span\u003e), ar2 -\u0026gt; {\n          \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar2.succeeded()) {\n            RowSet\u0026lt;Row\u0026gt; rows = ar2.result();\n            System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Got \u0026quot;\u003c/span\u003e + rows.size() + \u003cspan class=\"hljs-string\"\u003e\u0026quot; rows \u0026quot;\u003c/span\u003e);\n            preparedStatement.close();\n          } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n            System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Failure: \u0026quot;\u003c/span\u003e + ar2.cause().getMessage());\n          }\n        });\n    } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n      System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Failure: \u0026quot;\u003c/span\u003e + ar.cause().getMessage());\n    }\n  });\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_batches\"\u003e\u003ca class=\"anchor\" href=\"#_batches\"\u003e\u003c/a\u003e批处理\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您可以执行预处理的批处理\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eList\u0026lt;Tuple\u0026gt; batch = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e ArrayList\u0026lt;\u0026gt;();\nbatch.add(Tuple.of(\u003cspan class=\"hljs-string\"\u003e\u0026quot;julien\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;Julien Viet\u0026quot;\u003c/span\u003e));\nbatch.add(Tuple.of(\u003cspan class=\"hljs-string\"\u003e\u0026quot;emad\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;Emad Alblueshi\u0026quot;\u003c/span\u003e));\n\n\u003cspan class=\"hljs-comment\"\u003e// 执行预处理的批处理\u003c/span\u003e\nclient\n  .preparedQuery(\u003cspan class=\"hljs-string\"\u003e\u0026quot;INSERT INTO USERS (id, name) VALUES (?, ?)\u0026quot;\u003c/span\u003e)\n  .executeBatch(batch, res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n\n    \u003cspan class=\"hljs-comment\"\u003e// 处理行\u003c/span\u003e\n    RowSet\u0026lt;Row\u0026gt; rows = res.result();\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Batch failed \u0026quot;\u003c/span\u003e + res.cause());\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_mysql_last_insert_id\"\u003e\u003ca class=\"anchor\" href=\"#_mysql_last_insert_id\"\u003e\u003c/a\u003eMySQL LAST_INSERT_ID\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e往表中插入一条记录后，可以获得自增值。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eclient\n  .query(\u003cspan class=\"hljs-string\"\u003e\u0026quot;INSERT INTO test(val) VALUES (\u0026#x27;v1\u0026#x27;)\u0026quot;\u003c/span\u003e)\n  .execute(ar -\u0026gt; {\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.succeeded()) {\n      RowSet\u0026lt;Row\u0026gt; rows = ar.result();\n      \u003cspan class=\"hljs-keyword\"\u003elong\u003c/span\u003e lastInsertId = rows.property(MySQLClient.LAST_INSERTED_ID);\n      System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Last inserted id is: \u0026quot;\u003c/span\u003e + lastInsertId);\n    } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n      System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Failure: \u0026quot;\u003c/span\u003e + ar.cause().getMessage());\n    }\n  });\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e更多有关信息，请参阅 \u003ca href=\"https://dev.mysql.com/doc/refman/8.0/en/getting-unique-id.html\"\u003e如何获取最近一条插入记录的唯一ID\u003c/a\u003e。\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_using_connections\"\u003e\u003ca class=\"anchor\" href=\"#_using_connections\"\u003e\u003c/a\u003e使用连接\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_getting_a_connection\"\u003e\u003ca class=\"anchor\" href=\"#_getting_a_connection\"\u003e\u003c/a\u003e获取连接\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e当需要执行顺序查询（无事务）时，可以创建一个新连接或从连接池中借用一个。\n请注意在从拿到连接到将连接释放回连接池这之间的连接状态，服务端可能由于某些原因比如空闲时间超时，而关闭这条连接。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003epool\n  .getConnection()\n  .compose(connection -\u0026gt;\n    connection\n      .preparedQuery(\u003cspan class=\"hljs-string\"\u003e\u0026quot;INSERT INTO Users (first_name,last_name) VALUES (?, ?)\u0026quot;\u003c/span\u003e)\n      .executeBatch(Arrays.asList(\n        Tuple.of(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Julien\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;Viet\u0026quot;\u003c/span\u003e),\n        Tuple.of(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Emad\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;Alblueshi\u0026quot;\u003c/span\u003e)\n      ))\n      .compose(res -\u0026gt; connection\n        \u003cspan class=\"hljs-comment\"\u003e// 对行执行一些操作\u003c/span\u003e\n        .query(\u003cspan class=\"hljs-string\"\u003e\u0026quot;SELECT COUNT(*) FROM Users\u0026quot;\u003c/span\u003e)\n        .execute()\n        .map(rows -\u0026gt; rows.iterator().next().getInteger(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e)))\n      \u003cspan class=\"hljs-comment\"\u003e// 将连接返回到连接池中\u003c/span\u003e\n      .eventually(v -\u0026gt; connection.close())\n  ).onSuccess(count -\u0026gt; {\n  System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Insert users, now the number of users is \u0026quot;\u003c/span\u003e + count);\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e可以创建预处理查询语句：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003econnection\n  .prepare(\u003cspan class=\"hljs-string\"\u003e\u0026quot;SELECT * FROM users WHERE first_name LIKE ?\u0026quot;\u003c/span\u003e)\n  .compose(pq -\u0026gt;\n    pq.query()\n      .execute(Tuple.of(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Julien\u0026quot;\u003c/span\u003e))\n      .eventually(v -\u0026gt; pq.close())\n  ).onSuccess(rows -\u0026gt; {\n  \u003cspan class=\"hljs-comment\"\u003e// 所有的行\u003c/span\u003e\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_simplified_connection_api\"\u003e\u003ca class=\"anchor\" href=\"#_simplified_connection_api\"\u003e\u003c/a\u003e简单连接 API\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e当您创建了一个连接池, 您可以调用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/sqlclient/Pool.html#withConnection-java.util.function.Function-io.vertx.core.Handler-\"\u003ewithConnection\u003c/a\u003e\u003c/code\u003e 并传入一个使用连接进行处理的函数。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e它从连接池中借用一个连接，并使用该连接调用函数。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e该函数必须返回一个任意结果的 Future。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eFuture 完成后, 连接将归还至连接池，并提供全部的结果。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003epool.withConnection(connection -\u0026gt;\n  connection\n    .preparedQuery(\u003cspan class=\"hljs-string\"\u003e\u0026quot;INSERT INTO Users (first_name,last_name) VALUES (?, ?)\u0026quot;\u003c/span\u003e)\n    .executeBatch(Arrays.asList(\n      Tuple.of(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Julien\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;Viet\u0026quot;\u003c/span\u003e),\n      Tuple.of(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Emad\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;Alblueshi\u0026quot;\u003c/span\u003e)\n    ))\n    .compose(res -\u0026gt; connection\n      \u003cspan class=\"hljs-comment\"\u003e// Do something with rows\u003c/span\u003e\n      .query(\u003cspan class=\"hljs-string\"\u003e\u0026quot;SELECT COUNT(*) FROM Users\u0026quot;\u003c/span\u003e)\n      .execute()\n      .map(rows -\u0026gt; rows.iterator().next().getInteger(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e)))\n).onSuccess(count -\u0026gt; {\n  System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Insert users, now the number of users is \u0026quot;\u003c/span\u003e + count);\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_using_transactions\"\u003e\u003ca class=\"anchor\" href=\"#_using_transactions\"\u003e\u003c/a\u003e使用事务\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_transactions_with_connections\"\u003e\u003ca class=\"anchor\" href=\"#_transactions_with_connections\"\u003e\u003c/a\u003e带事务的连接\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您可以使用SQL \u003ccode\u003eBEGIN\u003c/code\u003e/\u003ccode\u003eCOMMIT\u003c/code\u003e/\u003ccode\u003eROLLBACK\u003c/code\u003e 执行事务，如果您必须这么做，就必须使用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/sqlclient/SqlConnection.html\"\u003eSqlConnection\u003c/a\u003e\u003c/code\u003e 自己管理事务。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e或者您使用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/sqlclient/SqlConnection.html\"\u003eSqlConnection\u003c/a\u003e\u003c/code\u003e 的事务API：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003epool.getConnection()\n  \u003cspan class=\"hljs-comment\"\u003e// 事务必须使用一个连接\u003c/span\u003e\n  .onSuccess(conn -\u0026gt; {\n    \u003cspan class=\"hljs-comment\"\u003e// 开始事务\u003c/span\u003e\n    conn.begin()\n      .compose(tx -\u0026gt; conn\n        \u003cspan class=\"hljs-comment\"\u003e// 各种语句\u003c/span\u003e\n        .query(\u003cspan class=\"hljs-string\"\u003e\u0026quot;INSERT INTO Users (first_name,last_name) VALUES (\u0026#x27;Julien\u0026#x27;,\u0026#x27;Viet\u0026#x27;)\u0026quot;\u003c/span\u003e)\n        .execute()\n        .compose(res2 -\u0026gt; conn\n          .query(\u003cspan class=\"hljs-string\"\u003e\u0026quot;INSERT INTO Users (first_name,last_name) VALUES (\u0026#x27;Emad\u0026#x27;,\u0026#x27;Alblueshi\u0026#x27;)\u0026quot;\u003c/span\u003e)\n          .execute())\n        \u003cspan class=\"hljs-comment\"\u003e// 提交事务\u003c/span\u003e\n        .compose(res3 -\u0026gt; tx.commit()))\n      \u003cspan class=\"hljs-comment\"\u003e// 将连接返回到连接池\u003c/span\u003e\n      .eventually(v -\u0026gt; conn.close())\n      .onSuccess(v -\u0026gt; System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Transaction succeeded\u0026quot;\u003c/span\u003e))\n      .onFailure(err -\u0026gt; System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Transaction failed: \u0026quot;\u003c/span\u003e + err.getMessage()));\n  });\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e当数据库服务器报告当前事务失败时（例如，臭名昭著的 \u003cem\u003ecurrent transaction is aborted, commands ignored until end of transaction block\u003c/em\u003e），\n事务被回滚，此时 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/sqlclient/Transaction.html#completion--\"\u003ecompletion\u003c/a\u003e\u003c/code\u003e Future 会失败，\n并返回 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/sqlclient/TransactionRollbackException.html\"\u003eTransactionRollbackException\u003c/a\u003e\u003c/code\u003e 异常：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003etx.completion()\n  .onFailure(err -\u0026gt; {\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Transaction failed =\u0026gt; rolled back\u0026quot;\u003c/span\u003e);\n  });\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_simplified_transaction_api_2\"\u003e\u003ca class=\"anchor\" href=\"#_simplified_transaction_api_2\"\u003e\u003c/a\u003e简单事务 API\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e当您创建了一个连接池, 您可以调用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/sqlclient/Pool.html#withConnection-java.util.function.Function-io.vertx.core.Handler-\"\u003ewithConnection\u003c/a\u003e\u003c/code\u003e 并传入一个使用连接进行处理的函数。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e它从连接池中借用一个连接，开始事务，并且，在此事务范围内所有执行操作的客户端调用该函数。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e该函数必须返回一个任意结果的Future。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e当Future成功，客户端提交这个事务\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e当Future失败，客户端回滚这个事务\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e事务完成后, 连接将返回到连接池中，并提供全部的结果。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003epool.withTransaction(client -\u0026gt; client\n  .query(\u003cspan class=\"hljs-string\"\u003e\u0026quot;INSERT INTO Users (first_name,last_name) VALUES (\u0026#x27;Julien\u0026#x27;,\u0026#x27;Viet\u0026#x27;)\u0026quot;\u003c/span\u003e)\n  .execute()\n  .flatMap(res -\u0026gt; client\n    .query(\u003cspan class=\"hljs-string\"\u003e\u0026quot;INSERT INTO Users (first_name,last_name) VALUES (\u0026#x27;Emad\u0026#x27;,\u0026#x27;Alblueshi\u0026#x27;)\u0026quot;\u003c/span\u003e)\n    .execute()\n    \u003cspan class=\"hljs-comment\"\u003e// 映射一个消息结果\u003c/span\u003e\n    .map(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Users inserted\u0026quot;\u003c/span\u003e)))\n  .onSuccess(v -\u0026gt; System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Transaction succeeded\u0026quot;\u003c/span\u003e))\n  .onFailure(err -\u0026gt; System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Transaction failed: \u0026quot;\u003c/span\u003e + err.getMessage()));\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_cursors_and_streaming\"\u003e\u003ca class=\"anchor\" href=\"#_cursors_and_streaming\"\u003e\u003c/a\u003e游标和流\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e默认情况下，执行预处理查询将获取所有行，您可以使用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/sqlclient/Cursor.html\"\u003eCursor\u003c/a\u003e\u003c/code\u003e 控制想读取的行数：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003econnection.prepare(\u003cspan class=\"hljs-string\"\u003e\u0026quot;SELECT * FROM users WHERE age \u0026gt; ?\u0026quot;\u003c/span\u003e, ar1 -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar1.succeeded()) {\n    PreparedStatement pq = ar1.result();\n\n    \u003cspan class=\"hljs-comment\"\u003e// 创建游标\u003c/span\u003e\n    Cursor cursor = pq.cursor(Tuple.of(\u003cspan class=\"hljs-number\"\u003e18\u003c/span\u003e));\n\n    \u003cspan class=\"hljs-comment\"\u003e// 读取50行\u003c/span\u003e\n    cursor.read(\u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e, ar2 -\u0026gt; {\n      \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar2.succeeded()) {\n        RowSet\u0026lt;Row\u0026gt; rows = ar2.result();\n\n        \u003cspan class=\"hljs-comment\"\u003e// 检查更多 ?\u003c/span\u003e\n        \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (cursor.hasMore()) {\n          \u003cspan class=\"hljs-comment\"\u003e// 重复这个过程...\u003c/span\u003e\n        } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n          \u003cspan class=\"hljs-comment\"\u003e// 没有更多行-关闭游标\u003c/span\u003e\n          cursor.close();\n        }\n      }\n    });\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e游标提前释放时应将其关闭：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003ecursor.read(\u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e, ar2 -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar2.succeeded()) {\n    \u003cspan class=\"hljs-comment\"\u003e// 关闭游标\u003c/span\u003e\n    cursor.close();\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e游标还可以使用流式API，这可以更加方便，尤其是在Rx化的版本中。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003econnection.prepare(\u003cspan class=\"hljs-string\"\u003e\u0026quot;SELECT * FROM users WHERE age \u0026gt; ?\u0026quot;\u003c/span\u003e, ar1 -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar1.succeeded()) {\n    PreparedStatement pq = ar1.result();\n\n    \u003cspan class=\"hljs-comment\"\u003e// 一次获取50行\u003c/span\u003e\n    RowStream\u0026lt;Row\u0026gt; stream = pq.createStream(\u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e, Tuple.of(\u003cspan class=\"hljs-number\"\u003e18\u003c/span\u003e));\n\n    \u003cspan class=\"hljs-comment\"\u003e// 使用流\u003c/span\u003e\n    stream.exceptionHandler(err -\u0026gt; {\n      System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Error: \u0026quot;\u003c/span\u003e + err.getMessage());\n    });\n    stream.endHandler(v -\u0026gt; {\n      System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;End of stream\u0026quot;\u003c/span\u003e);\n    });\n    stream.handler(row -\u0026gt; {\n      System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;User: \u0026quot;\u003c/span\u003e + row.getString(\u003cspan class=\"hljs-string\"\u003e\u0026quot;last_name\u0026quot;\u003c/span\u003e));\n    });\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e当这些行已传递给处理程序时，该流将批量读取 \u003ccode\u003e50\u003c/code\u003e 行并将其流化。\n然后读取新一批的 \u003ccode\u003e50\u003c/code\u003e 行数据，依此类推。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e流可以恢复或暂停，已加载的行将保留在内存中，直到被送达，游标将停止迭代。\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_tracing_queries\"\u003e\u003ca class=\"anchor\" href=\"#_tracing_queries\"\u003e\u003c/a\u003e追踪查询\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e当Vert.x启用了跟踪时，SQL客户端可以跟踪查询执行。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e客户端报告以下 \u003cem\u003eclient\u003c/em\u003e 跨度（spans）：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003eQuery\u003c/code\u003e operation name\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003etags\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003edb.user\u003c/code\u003e: the database username\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003edb.instance\u003c/code\u003e: the database instance\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003edb.statement\u003c/code\u003e: the SQL query\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003edb.type\u003c/code\u003e: \u003cem\u003esql\u003c/em\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e默认的跟踪策略是 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/tracing/TracingPolicy.html#PROPAGATE\"\u003ePROPAGATE\u003c/a\u003e\u003c/code\u003e ，客户端仅当涉及活动跟踪时才创建跨度（span）。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您可以使用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/sqlclient/SqlConnectOptions.html#setTracingPolicy-io.vertx.core.tracing.TracingPolicy-\"\u003esetTracingPolicy\u003c/a\u003e\u003c/code\u003e 更改客户策略，例如 您可以设置  \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/tracing/TracingPolicy.html#ALWAYS\"\u003eALWAYS\u003c/a\u003e\u003c/code\u003e 总是报告跨度（span）：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eoptions.setTracingPolicy(TracingPolicy.ALWAYS);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_mysql_type_mapping\"\u003e\u003ca class=\"anchor\" href=\"#_mysql_type_mapping\"\u003e\u003c/a\u003eMySQL 类型映射\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e当前客户端支持以下 MySQL 类型\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eBOOL,BOOLEAN (\u003ccode\u003ejava.lang.Byte\u003c/code\u003e)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eTINYINT (\u003ccode\u003ejava.lang.Byte\u003c/code\u003e)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eTINYINT UNSIGNED(\u003ccode\u003ejava.lang.Short\u003c/code\u003e)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eSMALLINT (\u003ccode\u003ejava.lang.Short\u003c/code\u003e)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eSMALLINT UNSIGNED(\u003ccode\u003ejava.lang.Integer\u003c/code\u003e)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eMEDIUMINT (\u003ccode\u003ejava.lang.Integer\u003c/code\u003e)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eMEDIUMINT UNSIGNED(\u003ccode\u003ejava.lang.Integer\u003c/code\u003e)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eINT,INTEGER (\u003ccode\u003ejava.lang.Integer\u003c/code\u003e)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eINTEGER UNSIGNED(\u003ccode\u003ejava.lang.Long\u003c/code\u003e)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eBIGINT (\u003ccode\u003ejava.lang.Long\u003c/code\u003e)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eBIGINT UNSIGNED(\u003ccode\u003eio.vertx.sqlclient.data.Numeric\u003c/code\u003e)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eFLOAT (\u003ccode\u003ejava.lang.Float\u003c/code\u003e)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eFLOAT UNSIGNED(\u003ccode\u003ejava.lang.Float\u003c/code\u003e)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eDOUBLE (\u003ccode\u003ejava.lang.Double\u003c/code\u003e)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eDOUBLE UNSIGNED(\u003ccode\u003ejava.lang.Double\u003c/code\u003e)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eBIT (\u003ccode\u003ejava.lang.Long\u003c/code\u003e)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eNUMERIC (\u003ccode\u003eio.vertx.sqlclient.data.Numeric\u003c/code\u003e)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eNUMERIC UNSIGNED(\u003ccode\u003eio.vertx.sqlclient.data.Numeric\u003c/code\u003e)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eDATE (\u003ccode\u003ejava.time.LocalDate\u003c/code\u003e)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eDATETIME (\u003ccode\u003ejava.time.LocalDateTime\u003c/code\u003e)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eTIME (\u003ccode\u003ejava.time.Duration\u003c/code\u003e)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eTIMESTAMP (\u003ccode\u003ejava.time.LocalDateTime\u003c/code\u003e)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eYEAR (\u003ccode\u003ejava.lang.Short\u003c/code\u003e)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eCHAR (\u003ccode\u003ejava.lang.String\u003c/code\u003e)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eVARCHAR (\u003ccode\u003ejava.lang.String\u003c/code\u003e)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eBINARY (\u003ccode\u003eio.vertx.core.buffer.Buffer\u003c/code\u003e)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eVARBINARY (\u003ccode\u003eio.vertx.core.buffer.Buffer\u003c/code\u003e)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eTINYBLOB (\u003ccode\u003eio.vertx.core.buffer.Buffer\u003c/code\u003e)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eTINYTEXT (\u003ccode\u003ejava.lang.String\u003c/code\u003e)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eBLOB (\u003ccode\u003eio.vertx.core.buffer.Buffer\u003c/code\u003e)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eTEXT (\u003ccode\u003ejava.lang.String\u003c/code\u003e)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eMEDIUMBLOB (\u003ccode\u003eio.vertx.core.buffer.Buffer\u003c/code\u003e)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eMEDIUMTEXT (\u003ccode\u003ejava.lang.String\u003c/code\u003e)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eLONGBLOB (\u003ccode\u003eio.vertx.core.buffer.Buffer\u003c/code\u003e)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eLONGTEXT (\u003ccode\u003ejava.lang.String\u003c/code\u003e)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eENUM (\u003ccode\u003ejava.lang.String\u003c/code\u003e)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eSET (\u003ccode\u003ejava.lang.String\u003c/code\u003e)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eJSON (\u003ccode\u003eio.vertx.core.json.JsonObject\u003c/code\u003e, \u003ccode\u003eio.vertx.core.json.JsonArray\u003c/code\u003e, \u003ccode\u003eNumber\u003c/code\u003e, \u003ccode\u003eBoolean\u003c/code\u003e, \u003ccode\u003eString\u003c/code\u003e, \u003ccode\u003eio.vertx.sqlclient.Tuple#JSON_NULL\u003c/code\u003e)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eGEOMETRY(\u003ccode\u003eio.vertx.mysqlclient.data.spatial.*\u003c/code\u003e)\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e元组解码在存储值时使用上述类型\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e请注意：在Java中，没有无符号数字值的具体表示形式，因此客户端会将无符号值转换为相关的Java类型。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_implicit_type_conversion\"\u003e\u003ca class=\"anchor\" href=\"#_implicit_type_conversion\"\u003e\u003c/a\u003e隐式类型转换\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e当执行预处理语句时，响应式 MySQL 客户端支持隐式类型转换。\n假设您的表中有一个 \u003ccode\u003eTIME\u003c/code\u003e 列，下面的两个示例都是有效的。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eclient\n  .preparedQuery(\u003cspan class=\"hljs-string\"\u003e\u0026quot;SELECT * FROM students WHERE updated_time = ?\u0026quot;\u003c/span\u003e)\n  .execute(Tuple.of(LocalTime.of(\u003cspan class=\"hljs-number\"\u003e19\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e25\u003c/span\u003e)), ar -\u0026gt; {\n  \u003cspan class=\"hljs-comment\"\u003e// 处理结果\u003c/span\u003e\n});\n\u003cspan class=\"hljs-comment\"\u003e// 这个也适用于隐式类型转换\u003c/span\u003e\nclient\n  .preparedQuery(\u003cspan class=\"hljs-string\"\u003e\u0026quot;SELECT * FROM students WHERE updated_time = ?\u0026quot;\u003c/span\u003e)\n  .execute(Tuple.of(\u003cspan class=\"hljs-string\"\u003e\u0026quot;19:10:25\u0026quot;\u003c/span\u003e), ar -\u0026gt; {\n  \u003cspan class=\"hljs-comment\"\u003e// 处理结果\u003c/span\u003e\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eMySQL 数据类型编码是根据参数值推断的。下面是具体的类型映射：\u003c/p\u003e\n\u003c/div\u003e\n\u003ctable class=\"tableblock frame-all grid-all stretch\"\u003e\n\u003ccolgroup\u003e\n\u003ccol style=\"width: 50%;\"\u003e\n\u003ccol style=\"width: 50%;\"\u003e\n\u003c/colgroup\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth class=\"tableblock halign-left valign-top\"\u003e参数值\u003c/th\u003e\n\u003cth class=\"tableblock halign-left valign-top\"\u003eMySQL 类型编码\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd class=\"tableblock halign-left valign-top\"\u003e\u003cp class=\"tableblock\"\u003enull\u003c/p\u003e\u003c/td\u003e\n\u003ctd class=\"tableblock halign-left valign-top\"\u003e\u003cp class=\"tableblock\"\u003eMYSQL_TYPE_NULL\u003c/p\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd class=\"tableblock halign-left valign-top\"\u003e\u003cp class=\"tableblock\"\u003ejava.lang.Byte\u003c/p\u003e\u003c/td\u003e\n\u003ctd class=\"tableblock halign-left valign-top\"\u003e\u003cp class=\"tableblock\"\u003eMYSQL_TYPE_TINY\u003c/p\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd class=\"tableblock halign-left valign-top\"\u003e\u003cp class=\"tableblock\"\u003ejava.lang.Boolean\u003c/p\u003e\u003c/td\u003e\n\u003ctd class=\"tableblock halign-left valign-top\"\u003e\u003cp class=\"tableblock\"\u003eMYSQL_TYPE_TINY\u003c/p\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd class=\"tableblock halign-left valign-top\"\u003e\u003cp class=\"tableblock\"\u003ejava.lang.Short\u003c/p\u003e\u003c/td\u003e\n\u003ctd class=\"tableblock halign-left valign-top\"\u003e\u003cp class=\"tableblock\"\u003eMYSQL_TYPE_SHORT\u003c/p\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd class=\"tableblock halign-left valign-top\"\u003e\u003cp class=\"tableblock\"\u003ejava.lang.Integer\u003c/p\u003e\u003c/td\u003e\n\u003ctd class=\"tableblock halign-left valign-top\"\u003e\u003cp class=\"tableblock\"\u003eMYSQL_TYPE_LONG\u003c/p\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd class=\"tableblock halign-left valign-top\"\u003e\u003cp class=\"tableblock\"\u003ejava.lang.Long\u003c/p\u003e\u003c/td\u003e\n\u003ctd class=\"tableblock halign-left valign-top\"\u003e\u003cp class=\"tableblock\"\u003eMYSQL_TYPE_LONGLONG\u003c/p\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd class=\"tableblock halign-left valign-top\"\u003e\u003cp class=\"tableblock\"\u003ejava.lang.Double\u003c/p\u003e\u003c/td\u003e\n\u003ctd class=\"tableblock halign-left valign-top\"\u003e\u003cp class=\"tableblock\"\u003eMYSQL_TYPE_DOUBLE\u003c/p\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd class=\"tableblock halign-left valign-top\"\u003e\u003cp class=\"tableblock\"\u003ejava.lang.Float\u003c/p\u003e\u003c/td\u003e\n\u003ctd class=\"tableblock halign-left valign-top\"\u003e\u003cp class=\"tableblock\"\u003eMYSQL_TYPE_FLOAT\u003c/p\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd class=\"tableblock halign-left valign-top\"\u003e\u003cp class=\"tableblock\"\u003ejava.time.LocalDate\u003c/p\u003e\u003c/td\u003e\n\u003ctd class=\"tableblock halign-left valign-top\"\u003e\u003cp class=\"tableblock\"\u003eMYSQL_TYPE_DATE\u003c/p\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd class=\"tableblock halign-left valign-top\"\u003e\u003cp class=\"tableblock\"\u003ejava.time.Duration\u003c/p\u003e\u003c/td\u003e\n\u003ctd class=\"tableblock halign-left valign-top\"\u003e\u003cp class=\"tableblock\"\u003eMYSQL_TYPE_TIME\u003c/p\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd class=\"tableblock halign-left valign-top\"\u003e\u003cp class=\"tableblock\"\u003ejava.time.LocalTime\u003c/p\u003e\u003c/td\u003e\n\u003ctd class=\"tableblock halign-left valign-top\"\u003e\u003cp class=\"tableblock\"\u003eMYSQL_TYPE_TIME\u003c/p\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd class=\"tableblock halign-left valign-top\"\u003e\u003cp class=\"tableblock\"\u003eio.vertx.core.buffer.Buffer\u003c/p\u003e\u003c/td\u003e\n\u003ctd class=\"tableblock halign-left valign-top\"\u003e\u003cp class=\"tableblock\"\u003eMYSQL_TYPE_BLOB\u003c/p\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd class=\"tableblock halign-left valign-top\"\u003e\u003cp class=\"tableblock\"\u003ejava.time.LocalDateTime\u003c/p\u003e\u003c/td\u003e\n\u003ctd class=\"tableblock halign-left valign-top\"\u003e\u003cp class=\"tableblock\"\u003eMYSQL_TYPE_DATETIME\u003c/p\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd class=\"tableblock halign-left valign-top\"\u003e\u003cp class=\"tableblock\"\u003eio.vertx.mysqlclient.data.spatial.*\u003c/p\u003e\u003c/td\u003e\n\u003ctd class=\"tableblock halign-left valign-top\"\u003e\u003cp class=\"tableblock\"\u003eMYSQL_TYPE_BLOB\u003c/p\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd class=\"tableblock halign-left valign-top\"\u003e\u003cp class=\"tableblock\"\u003edefault\u003c/p\u003e\u003c/td\u003e\n\u003ctd class=\"tableblock halign-left valign-top\"\u003e\u003cp class=\"tableblock\"\u003eMYSQL_TYPE_STRING\u003c/p\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_handling_boolean\"\u003e\u003ca class=\"anchor\" href=\"#_handling_boolean\"\u003e\u003c/a\u003e处理布尔值\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e在 MySQL 中 \u003ccode\u003eBOOLEAN\u003c/code\u003e 和 \u003ccode\u003eBOOL\u003c/code\u003e 数据类型是 \u003ccode\u003eTINYINT(1)\u003c/code\u003e 的同义词。零值视为 false，非零值视为 true。\n\u003ccode\u003eBOOLEAN\u003c/code\u003e 数据类型值以 \u003ccode\u003ejava.lang.Byte\u003c/code\u003e 类型存储在 \u003ccode\u003eRow\u003c/code\u003e 或 \u003ccode\u003eTuple\u003c/code\u003e 中，调用 \u003ccode\u003eRow#getValue\u003c/code\u003e 可以获取到 \u003ccode\u003ejava.lang.Byte\u003c/code\u003e 类型的值，\n也可以调用 \u003ccode\u003eRow#getBoolean\u003c/code\u003e 获取 \u003ccode\u003ejava.lang.Boolean\u003c/code\u003e 类型的值。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eclient\n  .query(\u003cspan class=\"hljs-string\"\u003e\u0026quot;SELECT graduated FROM students WHERE id = 0\u0026quot;\u003c/span\u003e)\n  .execute(ar -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.succeeded()) {\n    RowSet\u0026lt;Row\u0026gt; rowSet = ar.result();\n    \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e (Row row : rowSet) {\n      \u003cspan class=\"hljs-keyword\"\u003eint\u003c/span\u003e pos = row.getColumnIndex(\u003cspan class=\"hljs-string\"\u003e\u0026quot;graduated\u0026quot;\u003c/span\u003e);\n      Byte value = row.get(Byte.class, pos);\n      Boolean graduated = row.getBoolean(\u003cspan class=\"hljs-string\"\u003e\u0026quot;graduated\u0026quot;\u003c/span\u003e);\n    }\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Failure: \u0026quot;\u003c/span\u003e + ar.cause().getMessage());\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e当您想要使用一个 \u003ccode\u003eBOOLEAN\u003c/code\u003e 参数值执行预处理语句时，只要简单地在参数列表中添加  \u003ccode\u003ejava.lang.Boolean\u003c/code\u003e 值即可。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eclient\n  .preparedQuery(\u003cspan class=\"hljs-string\"\u003e\u0026quot;UPDATE students SET graduated = ? WHERE id = 0\u0026quot;\u003c/span\u003e)\n  .execute(Tuple.of(\u003cspan class=\"hljs-keyword\"\u003etrue\u003c/span\u003e), ar -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.succeeded()) {\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Updated with the boolean value\u0026quot;\u003c/span\u003e);\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Failure: \u0026quot;\u003c/span\u003e + ar.cause().getMessage());\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_handling_json\"\u003e\u003ca class=\"anchor\" href=\"#_handling_json\"\u003e\u003c/a\u003e处理 JSON\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eMySQL \u003ccode\u003eJSON\u003c/code\u003e 数据类型由以下Java类型表示：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003eString\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003eNumber\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003eBoolean\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003eio.vertx.core.json.JsonObject\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003eio.vertx.core.json.JsonArray\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003eio.vertx.sqlclient.Tuple#JSON_NULL\u003c/code\u003e 表示 JSON null 字面量\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eTuple tuple = Tuple.of(\n  Tuple.JSON_NULL,\n  \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;foo\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;bar\u0026quot;\u003c/span\u003e),\n  \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e);\n\n\u003cspan class=\"hljs-comment\"\u003e// 获取 json\u003c/span\u003e\nObject value = tuple.getValue(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e); \u003cspan class=\"hljs-comment\"\u003e// 期望得到 JSON_NULL\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e//\u003c/span\u003e\nvalue = tuple.get(JsonObject.class, \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e); \u003cspan class=\"hljs-comment\"\u003e// 期望得到 JSON object\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e//\u003c/span\u003e\nvalue = tuple.get(Integer.class, \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e); \u003cspan class=\"hljs-comment\"\u003e// 期望得到 3\u003c/span\u003e\nvalue = tuple.getInteger(\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e); \u003cspan class=\"hljs-comment\"\u003e// 期望得到 3\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_handling_bit\"\u003e\u003ca class=\"anchor\" href=\"#_handling_bit\"\u003e\u003c/a\u003e处理 BIT\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e\u003ccode\u003eBIT\u003c/code\u003e 是 \u003ccode\u003ejava.lang.Long\u003c/code\u003e 类型的映射, 但是Java没有无符号数值的概念, 因此，如果您要插入或更新一条记录为 \u003ccode\u003eBIT(64)\u003c/code\u003e 的最大值 , 可以将参数设置为 \u003ccode\u003e-1L\u003c/code\u003e 。\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_handling_time\"\u003e\u003ca class=\"anchor\" href=\"#_handling_time\"\u003e\u003c/a\u003e处理 TIME\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eMySQL \u003ccode\u003eTIME\u003c/code\u003e 数据类型可用于表示一天中的时间或范围为 \u003ccode\u003e-838:59:59\u003c/code\u003e 到 \u003ccode\u003e838:59:59\u003c/code\u003e 的时间间隔。在响应式MySQL客户端， \u003ccode\u003eTIME\u003c/code\u003e 数据类型自然的被映射为 \u003ccode\u003ejava.time.Duration\u003c/code\u003e，您也可以调用 \u003ccode\u003eRow#getLocalTime\u003c/code\u003e 获取到 \u003ccode\u003ejava.time.LocalTime\u003c/code\u003e 类型的值。\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_handling_numeric\"\u003e\u003ca class=\"anchor\" href=\"#_handling_numeric\"\u003e\u003c/a\u003e处理 NUMERIC\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/sqlclient/data/Numeric.html\"\u003eNumeric\u003c/a\u003e\u003c/code\u003e Java类型用于表示MySQL的 \u003ccode\u003eNUMERIC\u003c/code\u003e 类型。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eNumeric numeric = row.get(Numeric.class, \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e);\n\u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (numeric.isNaN()) {\n  \u003cspan class=\"hljs-comment\"\u003e// 处理 NaN\u003c/span\u003e\n} \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n  BigDecimal value = numeric.bigDecimalValue();\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_handling_enum\"\u003e\u003ca class=\"anchor\" href=\"#_handling_enum\"\u003e\u003c/a\u003e处理 ENUM\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eMySQL支持ENUM数据类型，客户端将这些类型检索为String数据类型。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您可以像这样将Java枚举编码为String：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eclient\n  .preparedQuery(\u003cspan class=\"hljs-string\"\u003e\u0026quot;INSERT INTO colors VALUES (?)\u0026quot;\u003c/span\u003e)\n  .execute(Tuple.of(Color.red),  res -\u0026gt; {\n    \u003cspan class=\"hljs-comment\"\u003e// ...\u003c/span\u003e\n  });\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您可以将 ENUM 类型的列读取为 Java 的枚举，如以下代码：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eclient\n  .preparedQuery(\u003cspan class=\"hljs-string\"\u003e\u0026quot;SELECT color FROM colors\u0026quot;\u003c/span\u003e)\n  .execute()\n  .onComplete(res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    RowSet\u0026lt;Row\u0026gt; rows = res.result();\n    \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e (Row row : rows) {\n      System.out.println(row.get(Color.class, \u003cspan class=\"hljs-string\"\u003e\u0026quot;color\u0026quot;\u003c/span\u003e));\n    }\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_handling_geometry\"\u003e\u003ca class=\"anchor\" href=\"#_handling_geometry\"\u003e\u003c/a\u003e处理 GEOMETRY\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eMYSQL 还支持 \u003ccode\u003eGEOMETRY\u003c/code\u003e  数据类型，下面是一些示例展示您可以使用 Well-Known Text（WKT）格式或 Well-Known Binary（WKB）格式处理几何数据，数据被解码为MySQL TEXT 或 BLOB 数据类型。有很多很棒的第三方库可以处理这种格式的数据。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您可以以 WKT 格式获取空间数据：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eclient\n  .query(\u003cspan class=\"hljs-string\"\u003e\u0026quot;SELECT ST_AsText(g) FROM geom;\u0026quot;\u003c/span\u003e)\n  .execute(ar -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.succeeded()) {\n    \u003cspan class=\"hljs-comment\"\u003e// 以WKT格式获取空间数据\u003c/span\u003e\n    RowSet\u0026lt;Row\u0026gt; result = ar.result();\n    \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e (Row row : result) {\n      String wktString = row.getString(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e);\n    }\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Failure: \u0026quot;\u003c/span\u003e + ar.cause().getMessage());\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e或者，您可以以WKB格式获取空间数据：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eclient\n  .query(\u003cspan class=\"hljs-string\"\u003e\u0026quot;SELECT ST_AsBinary(g) FROM geom;\u0026quot;\u003c/span\u003e)\n  .execute(ar -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.succeeded()) {\n    \u003cspan class=\"hljs-comment\"\u003e// 以WKB格式获取空间数据\u003c/span\u003e\n    RowSet\u0026lt;Row\u0026gt; result = ar.result();\n    \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e (Row row : result) {\n      Buffer wkbValue = row.getBuffer(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e);\n    }\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Failure: \u0026quot;\u003c/span\u003e + ar.cause().getMessage());\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e在响应式 MySQL 客户端中，我们还提供了一种处理几何数据类型的简单方法。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您可以将几何数据作为Vert.x数据对象检索：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eclient\n  .query(\u003cspan class=\"hljs-string\"\u003e\u0026quot;SELECT g FROM geom;\u0026quot;\u003c/span\u003e)\n  .execute(ar -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.succeeded()) {\n    \u003cspan class=\"hljs-comment\"\u003e// 以Vert.x数据对象获取空间数据\u003c/span\u003e\n    RowSet\u0026lt;Row\u0026gt; result = ar.result();\n    \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e (Row row : result) {\n      Point point = row.get(Point.class, \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e);\n      System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Point x: \u0026quot;\u003c/span\u003e + point.getX());\n      System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Point y: \u0026quot;\u003c/span\u003e + point.getY());\n    }\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Failure: \u0026quot;\u003c/span\u003e + ar.cause().getMessage());\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您也可以将WKB描述用作预处理语句参数。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003ePoint point = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e Point(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e1.5\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e1.5\u003c/span\u003e);\n\u003cspan class=\"hljs-comment\"\u003e// 以 WKB 描述发送\u003c/span\u003e\nclient\n  .preparedQuery(\u003cspan class=\"hljs-string\"\u003e\u0026quot;INSERT INTO geom VALUES (ST_GeomFromWKB(?))\u0026quot;\u003c/span\u003e)\n  .execute(Tuple.of(point), ar -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.succeeded()) {\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Success\u0026quot;\u003c/span\u003e);\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Failure: \u0026quot;\u003c/span\u003e + ar.cause().getMessage());\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_collector_queries\"\u003e\u003ca class=\"anchor\" href=\"#_collector_queries\"\u003e\u003c/a\u003e集合类查询\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您可以将查询API与Java集合类结合使用：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eCollector\u0026lt;Row, ?, Map\u0026lt;Long, String\u0026gt;\u0026gt; collector = Collectors.toMap(\n  row -\u0026gt; row.getLong(\u003cspan class=\"hljs-string\"\u003e\u0026quot;id\u0026quot;\u003c/span\u003e),\n  row -\u0026gt; row.getString(\u003cspan class=\"hljs-string\"\u003e\u0026quot;last_name\u0026quot;\u003c/span\u003e));\n\n\u003cspan class=\"hljs-comment\"\u003e// 运行查询使用集合类\u003c/span\u003e\nclient.query(\u003cspan class=\"hljs-string\"\u003e\u0026quot;SELECT * FROM users\u0026quot;\u003c/span\u003e).collecting(collector).execute(ar -\u0026gt; {\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.succeeded()) {\n      SqlResult\u0026lt;Map\u0026lt;Long, String\u0026gt;\u0026gt; result = ar.result();\n\n      \u003cspan class=\"hljs-comment\"\u003e// 获取用集合类创建的map\u003c/span\u003e\n      Map\u0026lt;Long, String\u0026gt; map = result.value();\n      System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Got \u0026quot;\u003c/span\u003e + map);\n    } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n      System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Failure: \u0026quot;\u003c/span\u003e + ar.cause().getMessage());\n    }\n  });\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e集合类处理不能保留 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/sqlclient/Row.html\"\u003eRow\u003c/a\u003e\u003c/code\u003e\n的引用，因为只有一个 Row 对象用于处理整个集合。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eJava \u003ccode\u003eCollectors\u003c/code\u003e 提供了许多有趣的预定义集合类，例如，\n您可以直接用 Row 中的集合轻松拼接成一个字符串：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eCollector\u0026lt;Row, ?, String\u0026gt; collector = Collectors.mapping(\n  row -\u0026gt; row.getString(\u003cspan class=\"hljs-string\"\u003e\u0026quot;last_name\u0026quot;\u003c/span\u003e),\n  Collectors.joining(\u003cspan class=\"hljs-string\"\u003e\u0026quot;,\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;(\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;)\u0026quot;\u003c/span\u003e)\n);\n\n\u003cspan class=\"hljs-comment\"\u003e// 运行查询使用集合类\u003c/span\u003e\nclient.query(\u003cspan class=\"hljs-string\"\u003e\u0026quot;SELECT * FROM users\u0026quot;\u003c/span\u003e).collecting(collector).execute(ar -\u0026gt; {\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.succeeded()) {\n      SqlResult\u0026lt;String\u0026gt; result = ar.result();\n\n      \u003cspan class=\"hljs-comment\"\u003e// 获取用集合类创建的String\u003c/span\u003e\n      String list = result.value();\n      System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Got \u0026quot;\u003c/span\u003e + list);\n    } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n      System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Failure: \u0026quot;\u003c/span\u003e + ar.cause().getMessage());\n    }\n  });\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_mysql_stored_procedure\"\u003e\u003ca class=\"anchor\" href=\"#_mysql_stored_procedure\"\u003e\u003c/a\u003eMySQL 存储过程\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您可以在查询中运行存储过程。结果将按照 \u003ca href=\"https://dev.mysql.com/doc/dev/mysql-server/8.0.12/page_protocol_command_phase_sp.html\"\u003eMySQL 协议\u003c/a\u003e 从服务器获取，无需任何魔法。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eclient.query(\u003cspan class=\"hljs-string\"\u003e\u0026quot;CREATE PROCEDURE multi() BEGIN\\n\u0026quot;\u003c/span\u003e +\n  \u003cspan class=\"hljs-string\"\u003e\u0026quot;  SELECT 1;\\n\u0026quot;\u003c/span\u003e +\n  \u003cspan class=\"hljs-string\"\u003e\u0026quot;  SELECT 1;\\n\u0026quot;\u003c/span\u003e +\n  \u003cspan class=\"hljs-string\"\u003e\u0026quot;  INSERT INTO ins VALUES (1);\\n\u0026quot;\u003c/span\u003e +\n  \u003cspan class=\"hljs-string\"\u003e\u0026quot;  INSERT INTO ins VALUES (2);\\n\u0026quot;\u003c/span\u003e +\n  \u003cspan class=\"hljs-string\"\u003e\u0026quot;END;\u0026quot;\u003c/span\u003e).execute(ar1 -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar1.succeeded()) {\n    \u003cspan class=\"hljs-comment\"\u003e// 创建存储过程成功\u003c/span\u003e\n    client\n      .query(\u003cspan class=\"hljs-string\"\u003e\u0026quot;CALL multi();\u0026quot;\u003c/span\u003e)\n      .execute(ar2 -\u0026gt; {\n      \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar2.succeeded()) {\n        \u003cspan class=\"hljs-comment\"\u003e// 处理结果\u003c/span\u003e\n        RowSet\u0026lt;Row\u0026gt; result1 = ar2.result();\n        Row row1 = result1.iterator().next();\n        System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;First result: \u0026quot;\u003c/span\u003e + row1.getInteger(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e));\n\n        RowSet\u0026lt;Row\u0026gt; result2 = result1.next();\n        Row row2 = result2.iterator().next();\n        System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Second result: \u0026quot;\u003c/span\u003e + row2.getInteger(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e));\n\n        RowSet\u0026lt;Row\u0026gt; result3 = result2.next();\n        System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Affected rows: \u0026quot;\u003c/span\u003e + result3.rowCount());\n      } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n        System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Failure: \u0026quot;\u003c/span\u003e + ar2.cause().getMessage());\n      }\n    });\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Failure: \u0026quot;\u003c/span\u003e + ar1.cause().getMessage());\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eNote: 目前尚不支持绑定OUT参数的预处理语句。\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_mysql_local_infile\"\u003e\u003ca class=\"anchor\" href=\"#_mysql_local_infile\"\u003e\u003c/a\u003eMySQL 导入本地文件\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e该客户端支持处理 LOCAL INFILE 请求, 如果要将数据从本地文件加载到服务器，则可以使用语句\n\u003ccode\u003eLOAD DATA LOCAL INFILE '\u0026lt;filename\u0026gt;' INTO TABLE \u0026lt;table\u0026gt;;\u003c/code\u003e。 更多有关信息，请参阅 \u003ca href=\"https://dev.mysql.com/doc/refman/8.0/en/load-data.html\"\u003eMySQL 参考手册\u003c/a\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_authentication\"\u003e\u003ca class=\"anchor\" href=\"#_authentication\"\u003e\u003c/a\u003e认证\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_default_authentication_plugin\"\u003e\u003ca class=\"anchor\" href=\"#_default_authentication_plugin\"\u003e\u003c/a\u003e默认身份验证插件\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e该客户端支持指定在连接开始时使用缺省的身份验证插件。\n当前支持以下插件：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003emysql_native_password\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003ecaching_sha2_password\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003emysql_clear_password\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eMySQLConnectOptions options = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e MySQLConnectOptions()\n  .setPort(\u003cspan class=\"hljs-number\"\u003e3306\u003c/span\u003e)\n  .setHost(\u003cspan class=\"hljs-string\"\u003e\u0026quot;the-host\u0026quot;\u003c/span\u003e)\n  .setDatabase(\u003cspan class=\"hljs-string\"\u003e\u0026quot;the-db\u0026quot;\u003c/span\u003e)\n  .setUser(\u003cspan class=\"hljs-string\"\u003e\u0026quot;user\u0026quot;\u003c/span\u003e)\n  .setPassword(\u003cspan class=\"hljs-string\"\u003e\u0026quot;secret\u0026quot;\u003c/span\u003e)\n  .setAuthenticationPlugin(MySQLAuthenticationPlugin.MYSQL_NATIVE_PASSWORD); \u003cspan class=\"hljs-comment\"\u003e// 设定默认身份验证插件\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_new_authentication_method_introduced_in_mysql_8\"\u003e\u003ca class=\"anchor\" href=\"#_new_authentication_method_introduced_in_mysql_8\"\u003e\u003c/a\u003eMySQL 8 中引入的新身份验证方法\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eMySQL 8.0 引入了一种名为 \u003ccode\u003ecaching_sha2_password\u003c/code\u003e 的身份验证方法，它是默认的身份验证方法。\n为了使用此新的身份验证方法连接到服务器，您需要使用安全连接（例如 启用 TLS/SSL）或使用 RSA 密钥对交换加密密码，以避免密码泄漏。RSA 密钥对在通信过程中会自动交换，但服务器 RSA 公钥可能会在这个过程中被黑客攻击，因为它通过不安全的连接传输。\n因此，如果您使用不安全的连接，并且希望避免暴露服务器 RSA 公钥的风险，可以这样设置服务器 RSA 公钥：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eMySQLConnectOptions options1 = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e MySQLConnectOptions()\n  .setPort(\u003cspan class=\"hljs-number\"\u003e3306\u003c/span\u003e)\n  .setHost(\u003cspan class=\"hljs-string\"\u003e\u0026quot;the-host\u0026quot;\u003c/span\u003e)\n  .setDatabase(\u003cspan class=\"hljs-string\"\u003e\u0026quot;the-db\u0026quot;\u003c/span\u003e)\n  .setUser(\u003cspan class=\"hljs-string\"\u003e\u0026quot;user\u0026quot;\u003c/span\u003e)\n  .setPassword(\u003cspan class=\"hljs-string\"\u003e\u0026quot;secret\u0026quot;\u003c/span\u003e)\n  .setServerRsaPublicKeyPath(\u003cspan class=\"hljs-string\"\u003e\u0026quot;tls/files/public_key.pem\u0026quot;\u003c/span\u003e); \u003cspan class=\"hljs-comment\"\u003e// 配置公钥路径\u003c/span\u003e\n\nMySQLConnectOptions options2 = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e MySQLConnectOptions()\n  .setPort(\u003cspan class=\"hljs-number\"\u003e3306\u003c/span\u003e)\n  .setHost(\u003cspan class=\"hljs-string\"\u003e\u0026quot;the-host\u0026quot;\u003c/span\u003e)\n  .setDatabase(\u003cspan class=\"hljs-string\"\u003e\u0026quot;the-db\u0026quot;\u003c/span\u003e)\n  .setUser(\u003cspan class=\"hljs-string\"\u003e\u0026quot;user\u0026quot;\u003c/span\u003e)\n  .setPassword(\u003cspan class=\"hljs-string\"\u003e\u0026quot;secret\u0026quot;\u003c/span\u003e)\n  .setServerRsaPublicKeyValue(Buffer.buffer(\u003cspan class=\"hljs-string\"\u003e\u0026quot;-----BEGIN PUBLIC KEY-----\\n\u0026quot;\u003c/span\u003e +\n    \u003cspan class=\"hljs-string\"\u003e\u0026quot;MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA3yvG5s0qrV7jxVlp0sMj\\n\u0026quot;\u003c/span\u003e +\n    \u003cspan class=\"hljs-string\"\u003e\u0026quot;xP0a6BuLKCMjb0o88hDsJ3xz7PpHNKazuEAfPxiRFVAV3edqfSiXoQw+lJf4haEG\\n\u0026quot;\u003c/span\u003e +\n    \u003cspan class=\"hljs-string\"\u003e\u0026quot;HQe12Nfhs+UhcAeTKXRlZP/JNmI+BGoBduQ1rCId9bKYbXn4pvyS/a1ft7SwFkhx\\n\u0026quot;\u003c/span\u003e +\n    \u003cspan class=\"hljs-string\"\u003e\u0026quot;aogCur7iIB0WUWvwkQ0fEj/Mlhw93lLVyx7hcGFq4FOAKFYr3A0xrHP1IdgnD8QZ\\n\u0026quot;\u003c/span\u003e +\n    \u003cspan class=\"hljs-string\"\u003e\u0026quot;0fUbgGLWWLOossKrbUP5HWko1ghLPIbfmU6o890oj1ZWQewj1Rs9Er92/UDj/JXx\\n\u0026quot;\u003c/span\u003e +\n    \u003cspan class=\"hljs-string\"\u003e\u0026quot;7ha1P+ZOgPBlV037KDQMS6cUh9vTablEHsMLhDZanymXzzjBkL+wH/b9cdL16LkQ\\n\u0026quot;\u003c/span\u003e +\n    \u003cspan class=\"hljs-string\"\u003e\u0026quot;5QIDAQAB\\n\u0026quot;\u003c/span\u003e +\n    \u003cspan class=\"hljs-string\"\u003e\u0026quot;-----END PUBLIC KEY-----\\n\u0026quot;\u003c/span\u003e)); \u003cspan class=\"hljs-comment\"\u003e// 配置公钥缓冲\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e有关 \u003ccode\u003ecaching_sha2_password\u003c/code\u003e 身份验证方法的更多信息，请参见 \u003ca href=\"https://dev.mysql.com/doc/refman/8.0/en/caching-sha2-pluggable-authentication.html\"\u003eMySQL 参考手册\u003c/a\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_using_ssltls\"\u003e\u003ca class=\"anchor\" href=\"#_using_ssltls\"\u003e\u003c/a\u003e使用 SSL/TLS\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e配置客户端使用SSL连接, 您可以像 Vert.x \u003ccode\u003eNetClient\u003c/code\u003e 一样配置\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/mysqlclient/MySQLConnectOptions.html\"\u003eMySQLConnectOptions\u003c/a\u003e\u003c/code\u003e 。\n响应式 MySQL 客户端 支持所有 \u003ca href=\"https://dev.mysql.com/doc/refman/8.0/en/connection-options.html#option_general_ssl-mode\"\u003eSSL 模式\u003c/a\u003e ，而且您能够配置 \u003ccode\u003esslmode\u003c/code\u003e. 客户端默认设置为 \u003ccode\u003eDISABLED\u003c/code\u003e SSL 模式。\n\u003ccode\u003essl\u003c/code\u003e 参数仅作为设置 \u003ccode\u003esslmode\u003c/code\u003e 的快捷方式存在。\u003ccode\u003esetSsl(true)\u003c/code\u003e 等价于 \u003ccode\u003esetSslMode(VERIFY_CA)\u003c/code\u003e ， \u003ccode\u003esetSsl(false)\u003c/code\u003e 等价于 \u003ccode\u003esetSslMode(DISABLED)\u003c/code\u003e\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eMySQLConnectOptions options = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e MySQLConnectOptions()\n  .setPort(\u003cspan class=\"hljs-number\"\u003e3306\u003c/span\u003e)\n  .setHost(\u003cspan class=\"hljs-string\"\u003e\u0026quot;the-host\u0026quot;\u003c/span\u003e)\n  .setDatabase(\u003cspan class=\"hljs-string\"\u003e\u0026quot;the-db\u0026quot;\u003c/span\u003e)\n  .setUser(\u003cspan class=\"hljs-string\"\u003e\u0026quot;user\u0026quot;\u003c/span\u003e)\n  .setPassword(\u003cspan class=\"hljs-string\"\u003e\u0026quot;secret\u0026quot;\u003c/span\u003e)\n  .setSslMode(SslMode.VERIFY_CA)\n  .setPemTrustOptions(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e PemTrustOptions().addCertPath(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/path/to/cert.pem\u0026quot;\u003c/span\u003e));\n\nMySQLConnection.connect(vertx, options, res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    \u003cspan class=\"hljs-comment\"\u003e// 用SSL连接\u003c/span\u003e\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Could not connect \u0026quot;\u003c/span\u003e + res.cause());\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e更多详细信息，请参阅 \u003ca href=\"http://vertx.io/docs/vertx-core/java/#ssl\"\u003eVert.x 文档\u003c/a\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_mysql_utility_command\"\u003e\u003ca class=\"anchor\" href=\"#_mysql_utility_command\"\u003e\u003c/a\u003eMySQL 实用程序命令\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e有时您希望使用 MySQL 实用程序命令，我们为此提供支持。有关更多信息，请参阅 \u003ca href=\"https://dev.mysql.com/doc/dev/mysql-server/8.0.12/page_protocol_command_phase_utility.html\"\u003eMySQL 实用程序命令\u003c/a\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_com_ping\"\u003e\u003ca class=\"anchor\" href=\"#_com_ping\"\u003e\u003c/a\u003eCOM_PING\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您可以使用 \u003ccode\u003eCOM_PING\u003c/code\u003e 命令检查服务器是否处于活动状态。如果服务器响应 PING，将通知处理程序，否则将永远不会调用处理程序。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003econnection.ping(ar -\u0026gt; {\n  System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;The server has responded to the PING\u0026quot;\u003c/span\u003e);\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_com_reset_connection\"\u003e\u003ca class=\"anchor\" href=\"#_com_reset_connection\"\u003e\u003c/a\u003eCOM_RESET_CONNECTION\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您可以使用 \u003ccode\u003eCOM_RESET_CONNECTION\u003c/code\u003e 命令重置会话状态，这将重置连接状态，如：\n- user variables\n- temporary tables\n- prepared statements\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003econnection.resetConnection(ar -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.succeeded()) {\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Connection has been reset now\u0026quot;\u003c/span\u003e);\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Failure: \u0026quot;\u003c/span\u003e + ar.cause().getMessage());\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_com_change_user\"\u003e\u003ca class=\"anchor\" href=\"#_com_change_user\"\u003e\u003c/a\u003eCOM_CHANGE_USER\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您可以更改当前连接的用户，这将执行re-authentication并重置连接状态，如 \u003ccode\u003eCOM_RESET_CONNECTION\u003c/code\u003e 。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eMySQLAuthOptions authenticationOptions = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e MySQLAuthOptions()\n  .setUser(\u003cspan class=\"hljs-string\"\u003e\u0026quot;newuser\u0026quot;\u003c/span\u003e)\n  .setPassword(\u003cspan class=\"hljs-string\"\u003e\u0026quot;newpassword\u0026quot;\u003c/span\u003e)\n  .setDatabase(\u003cspan class=\"hljs-string\"\u003e\u0026quot;newdatabase\u0026quot;\u003c/span\u003e);\nconnection.changeUser(authenticationOptions, ar -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.succeeded()) {\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;User of current connection has been changed.\u0026quot;\u003c/span\u003e);\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Failure: \u0026quot;\u003c/span\u003e + ar.cause().getMessage());\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_com_init_db\"\u003e\u003ca class=\"anchor\" href=\"#_com_init_db\"\u003e\u003c/a\u003eCOM_INIT_DB\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您可以使用 \u003ccode\u003eCOM_INIT_DB\u003c/code\u003e 命令更改连接的默认schema。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003econnection.specifySchema(\u003cspan class=\"hljs-string\"\u003e\u0026quot;newschema\u0026quot;\u003c/span\u003e, ar -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.succeeded()) {\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Default schema changed to newschema\u0026quot;\u003c/span\u003e);\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Failure: \u0026quot;\u003c/span\u003e + ar.cause().getMessage());\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_com_statistics\"\u003e\u003ca class=\"anchor\" href=\"#_com_statistics\"\u003e\u003c/a\u003eCOM_STATISTICS\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您可以使用 \u003ccode\u003eCOM_STATISTICS\u003c/code\u003e 命令获取某些内部状态变量的可读字符串。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003econnection.getInternalStatistics(ar -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.succeeded()) {\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Statistics: \u0026quot;\u003c/span\u003e + ar.result());\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Failure: \u0026quot;\u003c/span\u003e + ar.cause().getMessage());\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_com_debug\"\u003e\u003ca class=\"anchor\" href=\"#_com_debug\"\u003e\u003c/a\u003eCOM_DEBUG\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您可以使用 \u003ccode\u003eCOM_DEBUG\u003c/code\u003e 命令将调试信息转储到MySQL服务器的STDOUT。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003econnection.debug(ar -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.succeeded()) {\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Debug info dumped to server\u0026#x27;s STDOUT\u0026quot;\u003c/span\u003e);\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Failure: \u0026quot;\u003c/span\u003e + ar.cause().getMessage());\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_com_set_option\"\u003e\u003ca class=\"anchor\" href=\"#_com_set_option\"\u003e\u003c/a\u003eCOM_SET_OPTION\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您可以使用 \u003ccode\u003eCOM_SET_OPTION\u003c/code\u003e 命令设置当前连接的选项。目前只能设置 \u003ccode\u003eCLIENT_MULTI_STATEMENTS\u003c/code\u003e。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e例如，您可以使用此命令禁用 \u003ccode\u003eCLIENT_MULTI_STATEMENTS\u003c/code\u003e 。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003econnection.setOption(MySQLSetOption.MYSQL_OPTION_MULTI_STATEMENTS_OFF, ar -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.succeeded()) {\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;CLIENT_MULTI_STATEMENTS is off now\u0026quot;\u003c/span\u003e);\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Failure: \u0026quot;\u003c/span\u003e + ar.cause().getMessage());\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_mysql_and_mariadb_version_support_matrix\"\u003e\u003ca class=\"anchor\" href=\"#_mysql_and_mariadb_version_support_matrix\"\u003e\u003c/a\u003eMySQL 和 MariaDB 版本支持情况\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003ctable class=\"tableblock frame-all grid-all stretch\"\u003e\n\u003ccolgroup\u003e\n\u003ccol style=\"width: 25%;\"\u003e\n\u003ccol style=\"width: 25%;\"\u003e\n\u003ccol style=\"width: 25%;\"\u003e\n\u003ccol style=\"width: 25%;\"\u003e\n\u003c/colgroup\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth class=\"tableblock halign-center valign-top\" colspan=\"2\"\u003eMySQL\u003c/th\u003e\n\u003cth class=\"tableblock halign-center valign-top\" colspan=\"2\"\u003eMariaDB\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd class=\"tableblock halign-center valign-top\"\u003e\u003cp class=\"tableblock\"\u003e版本\u003c/p\u003e\u003c/td\u003e\n\u003ctd class=\"tableblock halign-center valign-top\"\u003e\u003cp class=\"tableblock\"\u003e是否支持\u003c/p\u003e\u003c/td\u003e\n\u003ctd class=\"tableblock halign-center valign-top\"\u003e\u003cp class=\"tableblock\"\u003e版本\u003c/p\u003e\u003c/td\u003e\n\u003ctd class=\"tableblock halign-center valign-top\"\u003e\u003cp class=\"tableblock\"\u003e是否支持\u003c/p\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd class=\"tableblock halign-center valign-top\"\u003e\u003cp class=\"tableblock\"\u003e\u003ccode\u003e5.5\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\n\u003ctd class=\"tableblock halign-center valign-top\"\u003e\u003cp class=\"tableblock\"\u003e\u0026#10004;\u003c/p\u003e\u003c/td\u003e\n\u003ctd class=\"tableblock halign-center valign-top\"\u003e\u003cp class=\"tableblock\"\u003e\u003ccode\u003e10.1\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\n\u003ctd class=\"tableblock halign-center valign-top\"\u003e\u003cp class=\"tableblock\"\u003e\u0026#10004;\u003c/p\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd class=\"tableblock halign-center valign-top\"\u003e\u003cp class=\"tableblock\"\u003e\u003ccode\u003e5.6\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\n\u003ctd class=\"tableblock halign-center valign-top\"\u003e\u003cp class=\"tableblock\"\u003e\u0026#10004;\u003c/p\u003e\u003c/td\u003e\n\u003ctd class=\"tableblock halign-center valign-top\"\u003e\u003cp class=\"tableblock\"\u003e\u003ccode\u003e10.2\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\n\u003ctd class=\"tableblock halign-center valign-top\"\u003e\u003cp class=\"tableblock\"\u003e\u0026#10004;\u003c/p\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd class=\"tableblock halign-center valign-top\"\u003e\u003cp class=\"tableblock\"\u003e\u003ccode\u003e5.7\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\n\u003ctd class=\"tableblock halign-center valign-top\"\u003e\u003cp class=\"tableblock\"\u003e\u0026#10004;\u003c/p\u003e\u003c/td\u003e\n\u003ctd class=\"tableblock halign-center valign-top\"\u003e\u003cp class=\"tableblock\"\u003e\u003ccode\u003e10.3\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\n\u003ctd class=\"tableblock halign-center valign-top\"\u003e\u003cp class=\"tableblock\"\u003e\u0026#10004;\u003c/p\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd class=\"tableblock halign-center valign-top\"\u003e\u003cp class=\"tableblock\"\u003e\u003ccode\u003e8.0\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\n\u003ctd class=\"tableblock halign-center valign-top\"\u003e\u003cp class=\"tableblock\"\u003e\u0026#10004;\u003c/p\u003e\u003c/td\u003e\n\u003ctd class=\"tableblock halign-center valign-top\"\u003e\u003cp class=\"tableblock\"\u003e\u003ccode\u003e10.4\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\n\u003ctd class=\"tableblock halign-center valign-top\"\u003e\u003cp class=\"tableblock\"\u003e\u0026#10004;\u003c/p\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e已知问题：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e重置连接实用程序命令在 MySQL 5.5、5.6 和 MariaDB 10.1 中不可用\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eMariaDB 10.2 和 10.3 不支持更改用户实用程序命令\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_pitfalls_good_practices\"\u003e\u003ca class=\"anchor\" href=\"#_pitfalls_good_practices\"\u003e\u003c/a\u003e陷阱和最佳实践\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e以下是使用响应式 MySQL 客户端时避免常见陷阱的一些最佳实践。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_prepared_statement_count_limit\"\u003e\u003ca class=\"anchor\" href=\"#_prepared_statement_count_limit\"\u003e\u003c/a\u003e预处理语句的计数限制\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e有时您可能会遇到臭名昭著的错误 \u003ccode\u003eCan\u0026#8217;t create more than max_prepared_stmt_count statements (current value: 16382)\u003c/code\u003e ，这是因为服务器已达到预处理语句的总数限制。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您可以调整服务器系统变量  \u003ccode\u003emax_prepared_stmt_count\u003c/code\u003e ，但它具有上限值，因此您无法以这种方式摆脱错误。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e缓解这种情况的最佳方法是启用预处理语句缓存，因此可以重用具有相同 SQL 字符串的预处理语句，并且客户端不必为每个请求创建全新的预处理语句。\n执行语句后，预处理语句将自动关闭。\n这样，虽然无法完全消除错误，但达到极限的机会可以大大减少。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e还可以通过接口 \u003ccode\u003eSqlConnection#prepare\u003c/code\u003e 创建 \u003ccode\u003ePreparedStatement\u003c/code\u003e 对象来手动管理预处理语句的生命周期，以便可以选择何时释放语句句柄，甚至使用 \u003ca href=\"https://dev.mysql.com/doc/refman/8.0/en/sql-prepared-statements.html\"\u003eSQL syntax prepared statement\u003c/a\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_demystifying_prepared_batch\"\u003e\u003ca class=\"anchor\" href=\"#_demystifying_prepared_batch\"\u003e\u003c/a\u003e揭开批量预处理神秘面纱\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e当您要将数据批量插入到数据库中时，您可以使用 \u003ccode\u003ePreparedQuery#executeBatch\u003c/code\u003e ，它提供了一个简单的 API 来处理此问题。\n请记住，MySQL 原生不支持批处理协议，因此 API 只是语法糖，一个接一个执行预处理语句，这意味着比执行一个预处理语句插入多条带有值列表的记录，需要更多的网络往返耗时。\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_tricky_date_time_data_types\"\u003e\u003ca class=\"anchor\" href=\"#_tricky_date_time_data_types\"\u003e\u003c/a\u003e棘手的日期和时间数据类型\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e处理 MYSQL 日期和时间数据类型（尤其是时区）是棘手的，因此响应式 MySQL 客户端不会为这些值进行魔法转换。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eMySQL DATETIME 数据类型不包含时区信息，因此无论当前会话中的时区是什么，您获取的内容都与您设置的内容相同\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eMySQL TIMESTAMP 数据类型包含时区信息，因此当您设置或获取值时，服务器总是通过当前会话中设置的时区来转换该值。\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_advanced_pool_configuration\"\u003e\u003ca class=\"anchor\" href=\"#_advanced_pool_configuration\"\u003e\u003c/a\u003e高级连接池配置\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_server_load_balancing\"\u003e\u003ca class=\"anchor\" href=\"#_server_load_balancing\"\u003e\u003c/a\u003e数据库服务负载均衡\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您可以使用包含多个数据库服务的列表来配置连接池而不是单个数据库服务。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eMySQLPool pool = MySQLPool.pool(Arrays.asList(server1, server2, server3), options);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e当一个连接创建时，连接池使用(round-robin)轮询调度算法做负载均衡以选择不同的数据库服务\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"admonitionblock note\"\u003e\n\u003ctable\u003e\n\u003ctr\u003e\n\u003ctd class=\"icon\"\u003e\n\u003cdiv class=\"title\"\u003e注意\u003c/div\u003e\n\u003c/td\u003e\n\u003ctd class=\"content\"\u003e\n负载均衡是在创建连接时提供的，而不是在从连接池中获取连接时提供\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_pool_connection_initialization\"\u003e\u003ca class=\"anchor\" href=\"#_pool_connection_initialization\"\u003e\u003c/a\u003e连接初始化\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您可以使用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/sqlclient/Pool.html#connectHandler-io.vertx.core.Handler-\"\u003econnectHandler\u003c/a\u003e\u003c/code\u003e\n方法在连接创建后和连接释放回连接池之前来与数据库连接交互\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003epool.connectHandler(conn -\u0026gt; {\n  conn.query(sql).execute().onSuccess(res -\u0026gt; {\n    \u003cspan class=\"hljs-comment\"\u003e//  将连接释放回连接池，以被该应用程序复用\u003c/span\u003e\n    conn.close();\n  });\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e连接完成后，您应该释放该连接以通知连接池该数据库连接可以被使用\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e","version":"4.1.8"},"__N_SSG":true},"page":"/docs/[[...slug]]","query":{"slug":["4.1.8","vertx-mysql-client","java"]},"buildId":"RBMjO1hqOi6Z1JoWz1U-W","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>