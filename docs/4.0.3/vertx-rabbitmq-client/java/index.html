<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="description" content="Vert.x | Reactive applications on the JVM"/><meta name="robots" content="index,follow"/><link rel="stylesheet" data-href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" data-optimized-fonts="true"/><link rel="stylesheet" data-href="https://fonts.googleapis.com/css?family=Roboto+Condensed:300,400" data-optimized-fonts="true"/><link rel="stylesheet" data-href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400&amp;display=swap" data-optimized-fonts="true"/><link rel="shortcut icon" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="48x48" href="/favicons/favicon-48x48.png"/><link rel="alternate" type="application/rss+xml" href="/feed/rss.xml"/><link rel="alternate" type="application/atom+xml" href="/feed/atom.xml"/><link rel="alternate" type="application/json" href="/feed/feed.json"/><title>RabbitMQ 客户端 | Eclipse Vert.x</title><link rel="preload" href="https://api.github.com/repos/vert-x3/vertx-rabbitmq-client" as="fetch" crossorigin="anonymous"/><meta name="next-head-count" content="17"/><link rel="preload" href="/_next/static/css/styles.e1237c95.chunk.css" as="style"/><link rel="stylesheet" href="/_next/static/css/styles.e1237c95.chunk.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/webpack-147ea3ada7109f6dc0bb.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.2d0daf90a2fa7e03281a.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.58af5f72dd3f80f51ddc.js" as="script"/><link rel="preload" href="/_next/static/chunks/main-78880972fb4b65194263.js" as="script"/><link rel="preload" href="/_next/static/chunks/styles.eb11bd7b649b32af6115.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-e598384803edc4a6782d.js" as="script"/><link rel="preload" href="/_next/static/chunks/5df0631eea625b022d3730b3f1bf573e1b8deb37.0b8151d407694e31e2a2.js" as="script"/><link rel="preload" href="/_next/static/chunks/31acfd8439b7c9eee4abe9f59c7500d6c943ee0d.74b85118e963a61f1bf8.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/docs/%5B%5B...slug%5D%5D-de110bc5466c276a0759.js" as="script"/><style data-href="https://fonts.googleapis.com/css?family=Roboto:300,400,500">@font-face{font-family:'Roboto';font-style:normal;font-weight:300;src:url(https://fonts.gstatic.com/s/roboto/v27/KFOlCnqEu92Fr1MmSU5fBBc-.woff) format('woff')}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/roboto/v27/KFOmCnqEu92Fr1Mu4mxM.woff) format('woff')}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;src:url(https://fonts.gstatic.com/s/roboto/v27/KFOlCnqEu92Fr1MmEU9fBBc-.woff) format('woff')}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;src:url(https://fonts.gstatic.com/s/roboto/v27/KFOlCnqEu92Fr1MmSU5fCRc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;src:url(https://fonts.gstatic.com/s/roboto/v27/KFOlCnqEu92Fr1MmSU5fABc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;src:url(https://fonts.gstatic.com/s/roboto/v27/KFOlCnqEu92Fr1MmSU5fCBc4AMP6lbBP.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;src:url(https://fonts.gstatic.com/s/roboto/v27/KFOlCnqEu92Fr1MmSU5fBxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;src:url(https://fonts.gstatic.com/s/roboto/v27/KFOlCnqEu92Fr1MmSU5fCxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;src:url(https://fonts.gstatic.com/s/roboto/v27/KFOlCnqEu92Fr1MmSU5fChc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;src:url(https://fonts.gstatic.com/s/roboto/v27/KFOlCnqEu92Fr1MmSU5fBBc4AMP6lQ.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/roboto/v27/KFOmCnqEu92Fr1Mu72xKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/roboto/v27/KFOmCnqEu92Fr1Mu5mxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/roboto/v27/KFOmCnqEu92Fr1Mu7mxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/roboto/v27/KFOmCnqEu92Fr1Mu4WxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/roboto/v27/KFOmCnqEu92Fr1Mu7WxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/roboto/v27/KFOmCnqEu92Fr1Mu7GxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/roboto/v27/KFOmCnqEu92Fr1Mu4mxKKTU1Kg.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;src:url(https://fonts.gstatic.com/s/roboto/v27/KFOlCnqEu92Fr1MmEU9fCRc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;src:url(https://fonts.gstatic.com/s/roboto/v27/KFOlCnqEu92Fr1MmEU9fABc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;src:url(https://fonts.gstatic.com/s/roboto/v27/KFOlCnqEu92Fr1MmEU9fCBc4AMP6lbBP.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;src:url(https://fonts.gstatic.com/s/roboto/v27/KFOlCnqEu92Fr1MmEU9fBxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;src:url(https://fonts.gstatic.com/s/roboto/v27/KFOlCnqEu92Fr1MmEU9fCxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;src:url(https://fonts.gstatic.com/s/roboto/v27/KFOlCnqEu92Fr1MmEU9fChc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;src:url(https://fonts.gstatic.com/s/roboto/v27/KFOlCnqEu92Fr1MmEU9fBBc4AMP6lQ.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style><style data-href="https://fonts.googleapis.com/css?family=Roboto+Condensed:300,400">@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCQYaQ.woff) format('woff')}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVl2ZhZI2eCN5jzbjEETS9weq8-19K7Cw.woff) format('woff')}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCkYb9lecyVC4A.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCAYb9lecyVC4A.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCgYb9lecyVC4A.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCcYb9lecyVC4A.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCsYb9lecyVC4A.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCoYb9lecyVC4A.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCQYb9lecyU.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVl2ZhZI2eCN5jzbjEETS9weq8-19-7DQk6YvNkeg.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVl2ZhZI2eCN5jzbjEETS9weq8-19a7DQk6YvNkeg.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVl2ZhZI2eCN5jzbjEETS9weq8-1967DQk6YvNkeg.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVl2ZhZI2eCN5jzbjEETS9weq8-19G7DQk6YvNkeg.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVl2ZhZI2eCN5jzbjEETS9weq8-1927DQk6YvNkeg.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVl2ZhZI2eCN5jzbjEETS9weq8-19y7DQk6YvNkeg.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVl2ZhZI2eCN5jzbjEETS9weq8-19K7DQk6YvM.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style><style data-href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400&display=swap">@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vqPQA.woff) format('woff')}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vq_SeW-AJi8SJQtQ4Y.woff) format('woff');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vq_QOW-AJi8SJQtQ4Y.woff) format('woff');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vq_R-W-AJi8SJQtQ4Y.woff) format('woff');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vq_S-W-AJi8SJQtQ4Y.woff) format('woff');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vq_SuW-AJi8SJQtQ4Y.woff) format('woff');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vq_ROW-AJi8SJQt.woff) format('woff');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><body data-build-time="2021-07-08T00:23:01.636Z" data-build-commit-id="05a3dcfc125bcfc3d8f349d267b74b9a8c9006a0" data-build-run-id="1009896482"><div id="__next"><main class="page docs"><header><div class="navbar"><div class="navbar-content container"><div class="navbar-logo"><a href="/"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAxMjMyLjYgMzE1LjIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDEyMzIuNiAzMTUuMiIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHN0eWxlPi5zdDB7ZmlsbDojNzgyYTkxfTwvc3R5bGU+PHBhdGggZD0iTTEyMC45IDIxNC4yIDE5MC41IDBoNTIuM2wtOTguNSAyNzMuOEg5OC4yTDAgMGg1Mi4xbDY4LjggMjE0LjJ6bTI5MS4yLTYyLjZIMjk5LjZ2ODQuMkg0MzF2MzhIMjUyVjBoMTc3Ljd2MzguNEgyOTkuNlYxMTRoMTEyLjV2MzcuNnptODMuNy0xMTMuMkg1NDZjMTYuNS4zIDI5IDQuNCAzNy4zIDEyLjQgOC4zIDggMTIuNSAxOS40IDEyLjUgMzQgMCAxNC00LjUgMjUuMS0xMy41IDMzLjItOSA4LjEtMjEuNiAxMi4xLTM3LjYgMTIuMWgtMjcuMXYyNC4ybDg2LjEgMTE5LjVoNTF2LTIuNGwtNzcuMi0xMDYuN2MyNC45LTUuNSA0My4zLTIxLjcgNTIuNi0zNS45IDguMi0xMi42IDEzLjMtMjcuNyAxMy4zLTQ2IDAtMjYuOC04LjYtNDcuNC0yNS44LTYxLjVDNjAwLjUgNy4xIDU3Ni4xIDAgNTQ0LjUgMGgtOTYuM3YyNzMuOGg0Ny42Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0ibTEwNTIuMyAxNTcuNy00MS41IDYyLjcgMjkuNyA1My40aDg1LjF6Ii8+PGNpcmNsZSBjbGFzcz0ic3QwIiBjeD0iODI3LjkiIGN5PSIyNzQuNyIgcj0iNDAuNSIvPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Im0xMDM3IDAtNDcuNiA3NC4yTDk0OSAwaC04NGw4NS4zIDEzNS44LTY3LjEgMTA1LjdjNS43IDkuNSA5LjEgMjAuNSA5LjIgMzIuNGg1MC4xTDExMjEuMyAwSDEwMzd6Ii8+PHBhdGggZD0iTTc2My41IDI3My44Yy4xLTkuOSAyLjUtMTkuMiA2LjYtMjcuNVYzOC40aDg1LjRWMEg2MzguMnYzOC40aDg0LjZ2MjM1LjRoNDAuN3ptNDE0LTI2Ni45aC0xNS4zdjQyLjJoLTguNVY2LjloLTE1LjJWMGgzOXY2Ljl6TTExOTMgMGwxNC4yIDM3LjdMMTIyMS4zIDBoMTF2NDkuMWgtOC41VjMyLjlsLjgtMjEuNy0xNC41IDM3LjloLTYuMWwtMTQuNS0zNy44LjggMjEuNnYxNi4yaC04LjVWMGgxMS4yeiIvPjwvc3ZnPg==" alt="Vert.x Logo"/></a></div><div class="navbar-collapse-button"><span></span><span></span><span></span></div><div class="navbar-right"><div class="navbar-menu"><span class="navbar-menu-item with-drop-down"><div class="dropdown"><a class="dropdown-title">开始<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="dropdown-menu"><a href="/introduction-to-vertx-and-reactive/"><li class="dropdown-item">简介</li></a><a href="/get-started/"><li class="dropdown-item">开始</li></a><a href="https://start.vertx.io/" target="_blank" rel="noreferrer"><li class="dropdown-item">应用生成器 <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a></ul></div></span><a class="navbar-menu-item" href="/docs/">文档</a><span class="navbar-menu-item with-drop-down"><div class="dropdown"><a class="dropdown-title">资源<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="dropdown-menu"><a href="/faq/"><li class="dropdown-item">答疑</li></a><a href="/channels/"><li class="dropdown-item">联系渠道</li></a><a href="https://how-to.vertx.io/" target="_blank" rel="noreferrer"><li class="dropdown-item">操作指南 <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a><a href="https://github.com/vert-x3/vertx-eventbus-bridge-clients" target="_blank" rel="noreferrer"><li class="dropdown-item">EventBus Bridge Clients <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a></ul></div></span><a class="navbar-menu-item" href="/blog/">博客</a><a class="navbar-menu-item" href="/community/">社区</a><a class="navbar-menu-item" href="/translation/">翻译团队</a></div><div class="navbar-social"><a href="https://github.com/vert-x3/vertx-awesome" class="navbar-social-link" title="Awesome Vert.x" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="List of awesome Vert.x projects"><title>Awesome Vert.x</title><path d="M24 11.438l-6.154-5.645-.865.944 5.128 4.7H1.895l5.128-4.705-.865-.943-6.154 5.649H0v3.72c0 1.683 1.62 3.053 3.61 3.053h3.795c1.99 0 3.61-1.37 3.61-3.051v-2.446h1.97v2.446c0 1.68 1.62 3.051 3.61 3.051h3.794c1.99 0 3.61-1.37 3.61-3.051v-3.721z"></path></svg></a><a href="https://stackoverflow.com/questions/tagged/vert.x" class="navbar-social-link" title="Stack Overflow" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Stack Overflow questions related to Vert.x"><title>Stack Overflow</title><path d="M15.725 0l-1.72 1.277 6.39 8.588 1.716-1.277L15.725 0zm-3.94 3.418l-1.369 1.644 8.225 6.85 1.369-1.644-8.225-6.85zm-3.15 4.465l-.905 1.94 9.702 4.517.904-1.94-9.701-4.517zm-1.85 4.86l-.44 2.093 10.473 2.201.44-2.092-10.473-2.203zM1.89 15.47V24h19.19v-8.53h-2.133v6.397H4.021v-6.396H1.89zm4.265 2.133v2.13h10.66v-2.13H6.154Z"></path></svg></a><a href="https://www.youtube.com/channel/UCGN6L3tRhs92Uer3c6VxOSA" class="navbar-social-link" title="YouTube" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="YouTube channel of Vert.x"><title>YouTube</title><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"></path></svg></a><a href="https://discord.gg/KzEMwP2" class="navbar-social-link" title="Discord" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Eclipse Vert.x channel on Discord"><title>Discord</title><path d="M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.946 2.4189-2.1568 2.4189Z"></path></svg></a><a href="https://groups.google.com/forum/?fromgroups#!forum/vertx" class="navbar-social-link" title="Vert.x 用户组" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="A Google group for Vert.x users"><title>Vert.x 用户组</title><path d="M.92 3.332c-.776 0-1.216.67-.692 1.383l2.537 4.403v7.86c0 2.013 1.467 3.69 3.459 3.69H20.31a3.75 3.75 0 003.69-3.69V7.043a3.723 3.723 0 00-3.668-3.71zm5.786 3.71H20.1c.587 0 1.153.357 1.153.923 0 .566-.566.922-1.153.922H6.706c-.587 0-1.153-.356-1.153-.922 0-.566.566-.923 1.153-.923zm0 3.69H20.1c.587 0 1.153.356 1.153.922 0 .566-.566.922-1.153.922H6.706c-.587 0-1.153-.356-1.153-.922 0-.566.566-.922 1.153-.922zm-.021 3.71h9.705c.587 0 1.153.356 1.153.922 0 .566-.566.923-1.153.923H6.685c-.587 0-1.153-.357-1.153-.923 0-.566.566-.922 1.153-.922Z"></path></svg></a><a href="https://shang.qq.com/wpa/qunwpa?idkey=587f58cacb9557e3291b46098e0fe09427b98a1c0f866da23c04c2762bc7e2ad" class="navbar-social-link" title="Vert.x中国用户组QQ群" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Vert.x中国用户组QQ群"><title>Vert.x中国用户组QQ群</title><path d="M21.395 15.035a39.548 39.548 0 0 0-.803-2.264l-1.079-2.695c.001-.032.014-.562.014-.836C19.526 4.632 17.351 0 12 0S4.474 4.632 4.474 9.241c0 .274.013.804.014.836l-1.08 2.695a38.97 38.97 0 0 0-.802 2.264c-1.021 3.283-.69 4.643-.438 4.673.54.065 2.103-2.472 2.103-2.472 0 1.469.756 3.387 2.394 4.771-.612.188-1.363.479-1.845.835-.434.32-.379.646-.301.778.343.578 5.883.369 7.482.189 1.6.18 7.14.389 7.483-.189.078-.132.132-.458-.301-.778-.483-.356-1.233-.646-1.846-.836 1.637-1.384 2.393-3.302 2.393-4.771 0 0 1.563 2.537 2.103 2.472.251-.03.581-1.39-.438-4.673zM12.662 4.846c.039-1.052.659-1.878 1.385-1.846s1.281.912 1.242 1.964c-.039 1.051-.659 1.878-1.385 1.846s-1.282-.912-1.242-1.964zM9.954 3c.725-.033 1.345.794 1.384 1.846.04 1.052-.517 1.931-1.242 1.963-.726.033-1.346-.794-1.385-1.845C8.672 3.912 9.228 3.033 9.954 3zM7.421 8.294c.194-.43 2.147-.908 4.566-.908h.026c2.418 0 4.372.479 4.566.908a.14.14 0 0 1 .014.061c0 .031-.01.059-.026.083-.163.238-2.333 1.416-4.553 1.416h-.026c-2.221 0-4.39-1.178-4.553-1.416a.136.136 0 0 1-.014-.144zm10.422 8.622c-.22 3.676-2.403 5.987-5.774 6.021h-.137c-3.37-.033-5.554-2.345-5.773-6.021-.081-1.35.001-2.496.147-3.43.318.063.638.122.958.176v3.506s1.658.334 3.318.103v-3.225c.488.027.96.04 1.406.034h.025c1.678.021 3.714-.204 5.683-.594.146.934.227 2.08.147 3.43zM10.48 5.804c.313-.041.542-.409.508-.825-.033-.415-.314-.72-.629-.679-.313.04-.541.409-.508.824.034.417.315.72.629.68zM14.479 5.156c.078.037.221.042.289-.146.035-.095.025-.165-.009-.214-.023-.033-.133-.118-.371-.176-.904-.22-1.341.384-1.405.499-.04.072-.012.176.056.227.067.051.139.037.179-.006.58-.628 1.21-.208 1.261-.184z"></path></svg></a></div></div></div></div></header><div class="page-content docs-content"><div class="container"><div class="docs-content-wrapper"><aside class=""><div class="docs-content-wrapper-sidebar"><div class="search-panel"><div class="search"><input type="text" placeholder="Search..." value=""/><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="search-icon"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="search-icon-delete"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg></div><ul class="search-results"></ul><div class="search-results-none">No results.</div></div><div class="docs-content-toc"><div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_getting_started">Getting Started</a>
<ul class="sectlevel2">
<li><a href="#_maven">Maven</a></li>
<li><a href="#_gradle">Gradle</a></li>
<li><a href="#_create_a_client">Create a client</a></li>
<li><a href="#_recovery_and_reconnections">Recovery and Reconnections</a></li>
<li><a href="#_declare_exchange_with_additional_config">Declare exchange with additional config</a></li>
<li><a href="#_declare_queue_with_additional_config">Declare queue with additional config</a></li>
</ul>
</li>
<li><a href="#_operations">Operations</a>
<ul class="sectlevel2">
<li><a href="#_publish">Publish</a></li>
<li><a href="#_publish_with_confirm">Publish with confirm</a></li>
<li><a href="#_reliable_message_publishing">Reliable Message Publishing</a></li>
<li><a href="#_consume">Consume</a></li>
<li><a href="#_get">Get</a></li>
<li><a href="#_consume_messages_without_auto_ack">Consume messages without auto-ack</a></li>
</ul>
</li>
<li><a href="#_running_the_tests">Running the tests</a></li>
</ul>
</div></div></div></aside><div class="docs-content-sidebar-toggle"><div style="position:relative"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-list"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-x"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></div></div><div class="docs-content-inner"><div class="docs-content-metadata"><div class="docs-content-metadata-left"><div class="docs-content-metadata-repo"><div class="github-stars"><a href="https://github.com/vert-x3/vertx-rabbitmq-client"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg>null stars</a></div></div><div><a href="https://vertx.io/docs/apidocs"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path></svg> API</a></div><div class="docs-content-metadata-edit"><a href="https://github.com/vertx-china/vertx-web-site/tree/master/docs/translation/vertx-rabbitmq-client/java"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg> 改进翻译</a></div><span class="docs-content-metadata-version"><div class="dropdown"><a class="dropdown-title">v4.1.1<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="dropdown-menu align-right"><a href="/docs/vertx-rabbitmq-client/java/"><li class="dropdown-item active has-active-siblings"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="dropdown-check-icon"><polyline points="20 6 9 17 4 12"></polyline></svg>Latest (v<!-- -->4.1.1<!-- -->)</li></a><a href="/docs/4.0.3/vertx-rabbitmq-client/java/"><li class="dropdown-item has-active-siblings">v<!-- -->4.0.3</li></a><a href="/docs/3.9.8/vertx-rabbitmq-client/java/"><li class="dropdown-item has-active-siblings">v<!-- -->3.9.8</li></a></ul></div></span></div></div><div><h1>RabbitMQ Client for Vert.x</h1>

<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>A Vert.x client allowing applications to interact with a RabbitMQ broker (AMQP 0.9.1)</p>
</div>
<div class="paragraph">
<p><strong>This service is experimental and the APIs are likely to change before settling down.</strong></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_getting_started"><a class="anchor" href="#_getting_started"></a>Getting Started</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_maven"><a class="anchor" href="#_maven"></a>Maven</h3>
<div class="paragraph">
<p>Add the following dependency to your maven project</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.vertx<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>vertx-rabbitmq-client<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.0.3<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_gradle"><a class="anchor" href="#_gradle"></a>Gradle</h3>
<div class="paragraph">
<p>Add the following dependency to your gradle project</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">dependencies {
 compile <span class="hljs-string">&#x27;io.vertx:vertx-rabbitmq-client:4.0.3&#x27;</span>
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_create_a_client"><a class="anchor" href="#_create_a_client"></a>Create a client</h3>
<div class="paragraph">
<p>You can create a client instance as follows using a full amqp uri:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">RabbitMQOptions config = <span class="hljs-keyword">new</span> RabbitMQOptions();
<span class="hljs-comment">// full amqp uri</span>
config.setUri(<span class="hljs-string">&quot;amqp://xvjvsrrc:VbuL1atClKt7zVNQha0bnnScbNvGiqgb@moose.rmq.cloudamqp.com/xvjvsrrc&quot;</span>);
RabbitMQClient client = RabbitMQClient.create(vertx, config);

<span class="hljs-comment">// Connect</span>
client.start(asyncResult -&gt; {
  <span class="hljs-keyword">if</span> (asyncResult.succeeded()) {
    System.out.println(<span class="hljs-string">&quot;RabbitMQ successfully connected!&quot;</span>);
  } <span class="hljs-keyword">else</span> {
    System.out.println(<span class="hljs-string">&quot;Fail to connect to RabbitMQ &quot;</span> + asyncResult.cause().getMessage());
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Or you can also specify individual parameters manually:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">RabbitMQOptions config = <span class="hljs-keyword">new</span> RabbitMQOptions();
<span class="hljs-comment">// Each parameter is optional</span>
<span class="hljs-comment">// The default parameter with be used if the parameter is not set</span>
config.setUser(<span class="hljs-string">&quot;user1&quot;</span>);
config.setPassword(<span class="hljs-string">&quot;password1&quot;</span>);
config.setHost(<span class="hljs-string">&quot;localhost&quot;</span>);
config.setPort(<span class="hljs-number">5672</span>);
config.setVirtualHost(<span class="hljs-string">&quot;vhost1&quot;</span>);
config.setConnectionTimeout(<span class="hljs-number">6000</span>); <span class="hljs-comment">// in milliseconds</span>
config.setRequestedHeartbeat(<span class="hljs-number">60</span>); <span class="hljs-comment">// in seconds</span>
config.setHandshakeTimeout(<span class="hljs-number">6000</span>); <span class="hljs-comment">// in milliseconds</span>
config.setRequestedChannelMax(<span class="hljs-number">5</span>);
config.setNetworkRecoveryInterval(<span class="hljs-number">500</span>); <span class="hljs-comment">// in milliseconds</span>
config.setAutomaticRecoveryEnabled(<span class="hljs-keyword">true</span>);

RabbitMQClient client = RabbitMQClient.create(vertx, config);

<span class="hljs-comment">// Connect</span>
client.start(asyncResult -&gt; {
  <span class="hljs-keyword">if</span> (asyncResult.succeeded()) {
    System.out.println(<span class="hljs-string">&quot;RabbitMQ successfully connected!&quot;</span>);
  } <span class="hljs-keyword">else</span> {
    System.out.println(<span class="hljs-string">&quot;Fail to connect to RabbitMQ &quot;</span> + asyncResult.cause().getMessage());
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can set multiples addresses to connect to a cluster;</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">RabbitMQOptions config = <span class="hljs-keyword">new</span> RabbitMQOptions();
config.setUser(<span class="hljs-string">&quot;user1&quot;</span>);
config.setPassword(<span class="hljs-string">&quot;password1&quot;</span>);
config.setVirtualHost(<span class="hljs-string">&quot;vhost1&quot;</span>);

config.setAddresses(Arrays.asList(Address.parseAddresses(<span class="hljs-string">&quot;firstHost,secondHost:5672&quot;</span>)));

RabbitMQClient client = RabbitMQClient.create(vertx, config);

<span class="hljs-comment">// Connect</span>
client.start(asyncResult -&gt; {
  <span class="hljs-keyword">if</span> (asyncResult.succeeded()) {
    System.out.println(<span class="hljs-string">&quot;RabbitMQ successfully connected!&quot;</span>);
  } <span class="hljs-keyword">else</span> {
    System.out.println(<span class="hljs-string">&quot;Fail to connect to RabbitMQ &quot;</span> + asyncResult.cause().getMessage());
  }
});</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_recovery_and_reconnections"><a class="anchor" href="#_recovery_and_reconnections"></a>Recovery and Reconnections</h3>
<div class="paragraph">
<p>There are two, separate and incompatible, mechanisms for handling reconnections in the RabbitMQClient:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Java RabbitMQ client library auto recovery;</p>
</li>
<li>
<p>RabbitMQClient restarts.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Neither mechanism is enabled by default.</p>
</div>
<div class="paragraph">
<p>The reconnections provided by the Java RabbitMQ client library do not work in all situations (if the connection to the server disconnects nicely the client will shut down and not recover).</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[source, java]
In order to use the Java RabbitMQ client library auto recovery it is necessary to both enable it and disable the RabbitMQClient library reconnect attempts:
RabbitMQOptions options = new RabbitMQOptions();
options.setAutomaticRecoveryEnabled(true);
options.setReconnectAttempts(0);</pre>
</div>
</div>
<div class="paragraph">
<p>The client library will also attempt topology recovery as detailed in its documentation (this is enabled by default in the library and is not exposed in the RabbitMQClientOptions).</p>
</div>
<div class="paragraph">
<p>Alternatively the RabbitMQClient may be configured to retry connecting to the RabbitMQ server whenever there is a connection problem.
The failure of a connection could be caused by a transient network failure (where the client would probably connect back to the same RabbitMQ server) or it could be caused by a failover scenario.
This approach is more brutal than that followed by the client library - the RabbitMQClient restarts work by closing the connections when the client library reports a problem and then repeatedly trying to reconnect from scratch.</p>
</div>
<div class="paragraph">
<p>The reconnection policy can be configured by setting the <code><a href="../../apidocs/io/vertx/core/net/NetClientOptions.html#setReconnectInterval-long-">setReconnectInterval</a></code> and
<code><a href="../../apidocs/io/vertx/core/net/NetClientOptions.html#setReconnectAttempts-int-">setReconnectAttempts</a></code> properties in the configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">RabbitMQOptions options = <span class="hljs-keyword">new</span> RabbitMQOptions();
options.setAutomaticRecoveryEnabled(<span class="hljs-keyword">false</span>);
options.setReconnectAttempts(Integer.MAX_VALUE);
options.setReconnectInterval(<span class="hljs-number">500</span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The RabbitMQClient reconnections do not feature any form of <em>automatic</em> topology recovery.
This can lead to a race condition where messages are sent before the topology on the server is ready (i.e. before exchanges and queues have been created/bound).
To provide an opportunity to create these objects before the connection is considered ready the RabbitMQClient provides the ConnectionEstablishedCallback.
The ConnectionEstablishedCallback can be used to carry out any operations on the RabbitMQClient before other users (including the RabbitMQConsumer and RabbitMQPublisher) are able to access it.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">RabbitMQClient client = RabbitMQClient.create(vertx, config);
client.addConnectionEstablishedCallback(promise -&gt; {
            client.exchangeDeclare(<span class="hljs-string">&quot;exchange&quot;</span>, <span class="hljs-string">&quot;fanout&quot;</span>, <span class="hljs-keyword">true</span>, <span class="hljs-keyword">false</span>)
                .compose(v -&gt; {
                  <span class="hljs-keyword">return</span> client.queueDeclare(<span class="hljs-string">&quot;queue&quot;</span>, <span class="hljs-keyword">false</span>, <span class="hljs-keyword">true</span>, <span class="hljs-keyword">true</span>);
                })
                .compose(declareOk -&gt; {
                  <span class="hljs-keyword">return</span> client.queueBind(declareOk.getQueue(), <span class="hljs-string">&quot;exchange&quot;</span>, <span class="hljs-string">&quot;&quot;</span>);
                })
                .onComplete(promise);
});

<span class="hljs-comment">// At this point the exchange, queue and binding will have been declared even if the client connects to a new server</span>
client.basicConsumer(<span class="hljs-string">&quot;queue&quot;</span>, rabbitMQConsumerAsyncResult -&gt; {
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>If a RabbitMQConsumer is listening for messages on an auto-delete server-named queue and the broker restarts the queue will have been removed by the time the client reconnects.
In this instance it is necessary to both recreate the queue and set the new queue name on the RabbitMQConsumer.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">RabbitMQClient client = RabbitMQClient.create(vertx, config);
AtomicReference&lt;RabbitMQConsumer&gt; consumer = <span class="hljs-keyword">new</span> AtomicReference&lt;&gt;();
AtomicReference&lt;String&gt; queueName = <span class="hljs-keyword">new</span> AtomicReference&lt;&gt;();
client.addConnectionEstablishedCallback(promise -&gt; {
      client.exchangeDeclare(<span class="hljs-string">&quot;exchange&quot;</span>, <span class="hljs-string">&quot;fanout&quot;</span>, <span class="hljs-keyword">true</span>, <span class="hljs-keyword">false</span>)
              .compose(v -&gt; client.queueDeclare(<span class="hljs-string">&quot;&quot;</span>, <span class="hljs-keyword">false</span>, <span class="hljs-keyword">true</span>, <span class="hljs-keyword">true</span>))
              .compose(dok -&gt; {
                  queueName.set(dok.getQueue());
                  <span class="hljs-comment">// The first time this runs there will be no existing consumer</span>
                  <span class="hljs-comment">// on subsequent connections the consumer needs to be update with the new queue name</span>
                  RabbitMQConsumer currentConsumer = consumer.get();
                  <span class="hljs-keyword">if</span> (currentConsumer != <span class="hljs-keyword">null</span>) {
                    currentConsumer.setQueueName(queueName.get());
                  }
                  <span class="hljs-keyword">return</span> client.queueBind(queueName.get(), <span class="hljs-string">&quot;exchange&quot;</span>, <span class="hljs-string">&quot;&quot;</span>);
              })
              .onComplete(promise);
});

client.start()
        .onSuccess(v -&gt; {
            <span class="hljs-comment">// At this point the exchange, queue and binding will have been declared even if the client connects to a new server</span>
            client.basicConsumer(queueName.get(), rabbitMQConsumerAsyncResult -&gt; {
                <span class="hljs-keyword">if</span> (rabbitMQConsumerAsyncResult.succeeded()) {
                    consumer.set(rabbitMQConsumerAsyncResult.result());
                }
            });
        })
        .onFailure(ex -&gt; {
            System.out.println(<span class="hljs-string">&quot;It went wrong: &quot;</span> + ex.getMessage());
        });</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_enabling_ssltls_on_the_client"><a class="anchor" href="#_enabling_ssltls_on_the_client"></a>Enabling SSL/TLS on the client</h4>
<div class="paragraph">
<p>The RabbitMQClient can easily configured to use SSL.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">RabbitMQOptions options = <span class="hljs-keyword">new</span> RabbitMQOptions()
 .setSsl(<span class="hljs-keyword">true</span>);</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="_client_trust_configuration"><a class="anchor" href="#_client_trust_configuration"></a>Client trust configuration</h5>
<div class="paragraph">
<p>If <code><a href="../../apidocs/io/vertx/core/net/ClientOptionsBase.html#setTrustAll-boolean-">trustAll</a></code> is set to true, the client will trust all server certificates.
The connection will still be encrypted but is then vulnerable to 'man in the middle' attacks.
<strong>Greatbadness</strong>, Do not use this option in production! Default value is false.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">RabbitMQOptions options = <span class="hljs-keyword">new</span> RabbitMQOptions()
 .setSsl(<span class="hljs-keyword">true</span>)
 .setTrustAll(<span class="hljs-keyword">true</span>));</code></pre>
</div>
</div>
<div class="paragraph">
<p>If <code><a href="../../apidocs/io/vertx/core/net/ClientOptionsBase.html#setTrustAll-boolean-">trustAll</a></code> is set to false, proper server authentication will takes place. Three main options are available.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Your default truststore already "trusts" the server, in which case all is fine<br></p>
</li>
<li>
<p>You start the java process with -Djavax.net.ssl.trustStore=xxx.jks specifying the custom trust store<br></p>
</li>
<li>
<p>You supply a custom trust store via RabbitMQOptions</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_jks_trust_store_option"><a class="anchor" href="#_jks_trust_store_option"></a>JKS trust store option</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">RabbitMQOptions options = <span class="hljs-keyword">new</span> RabbitMQOptions()
 .setSsl(<span class="hljs-keyword">true</span>)
 .setTrustOptions(<span class="hljs-keyword">new</span> JksOptions()
   .setPath(<span class="hljs-string">&quot;/path/myKeyStore.jks&quot;</span>)
   .setPassword(<span class="hljs-string">&quot;myKeyStorePassword&quot;</span>));</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_p12pfx_trust_store_option"><a class="anchor" href="#_p12pfx_trust_store_option"></a>p12/pfx trust store option</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">RabbitMQOptions options = <span class="hljs-keyword">new</span> RabbitMQOptions()
 .setSsl(<span class="hljs-keyword">true</span>)
 .setPfxTrustOptions(
   <span class="hljs-keyword">new</span> PfxOptions().
     setPath(<span class="hljs-string">&quot;/path/myKeyStore.p12&quot;</span>).
     setPassword(<span class="hljs-string">&quot;myKeyStorePassword&quot;</span>));</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_pem_trust_option"><a class="anchor" href="#_pem_trust_option"></a>PEM trust option</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">RabbitMQOptions options = <span class="hljs-keyword">new</span> RabbitMQOptions()
 .setSsl(<span class="hljs-keyword">true</span>)
 .setPemTrustOptions(
   <span class="hljs-keyword">new</span> PemTrustOptions().
     addCertPath(<span class="hljs-string">&quot;/path/ca-cert.pem&quot;</span>));</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_declare_exchange_with_additional_config"><a class="anchor" href="#_declare_exchange_with_additional_config"></a>Declare exchange with additional config</h3>
<div class="paragraph">
<p>You can pass additional config parameters to RabbitMQ&#8217;s exchangeDeclare method</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">JsonObject config = <span class="hljs-keyword">new</span> JsonObject();

config.put(<span class="hljs-string">&quot;x-dead-letter-exchange&quot;</span>, <span class="hljs-string">&quot;my.deadletter.exchange&quot;</span>);
config.put(<span class="hljs-string">&quot;alternate-exchange&quot;</span>, <span class="hljs-string">&quot;my.alternate.exchange&quot;</span>);
<span class="hljs-comment">// ...</span>
client.exchangeDeclare(<span class="hljs-string">&quot;my.exchange&quot;</span>, <span class="hljs-string">&quot;fanout&quot;</span>, <span class="hljs-keyword">true</span>, <span class="hljs-keyword">false</span>, config, onResult -&gt; {
  <span class="hljs-keyword">if</span> (onResult.succeeded()) {
    System.out.println(<span class="hljs-string">&quot;Exchange successfully declared with config&quot;</span>);
  } <span class="hljs-keyword">else</span> {
    onResult.cause().printStackTrace();
  }
});</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_declare_queue_with_additional_config"><a class="anchor" href="#_declare_queue_with_additional_config"></a>Declare queue with additional config</h3>
<div class="paragraph">
<p>You can pass additional config parameters to RabbitMQs queueDeclare method</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">JsonObject config = <span class="hljs-keyword">new</span> JsonObject();
config.put(<span class="hljs-string">&quot;x-message-ttl&quot;</span>, <span class="hljs-number">10_000L</span>);

client.queueDeclare(<span class="hljs-string">&quot;my-queue&quot;</span>, <span class="hljs-keyword">true</span>, <span class="hljs-keyword">false</span>, <span class="hljs-keyword">true</span>, config, queueResult -&gt; {
  <span class="hljs-keyword">if</span> (queueResult.succeeded()) {
    System.out.println(<span class="hljs-string">&quot;Queue declared!&quot;</span>);
  } <span class="hljs-keyword">else</span> {
    System.err.println(<span class="hljs-string">&quot;Queue failed to be declared!&quot;</span>);
    queueResult.cause().printStackTrace();
  }
});</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_operations"><a class="anchor" href="#_operations"></a>Operations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following are some examples of the operations supported by the RabbitMQService API.
Consult the javadoc/documentation for detailed information on all API methods.</p>
</div>
<div class="sect2">
<h3 id="_publish"><a class="anchor" href="#_publish"></a>Publish</h3>
<div class="paragraph">
<p>Publish a message to a queue</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">Buffer message = Buffer.buffer(<span class="hljs-string">&quot;body&quot;</span>, <span class="hljs-string">&quot;Hello RabbitMQ, from Vert.x !&quot;</span>);
client.basicPublish(<span class="hljs-string">&quot;&quot;</span>, <span class="hljs-string">&quot;my.queue&quot;</span>, message, pubResult -&gt; {
  <span class="hljs-keyword">if</span> (pubResult.succeeded()) {
    System.out.println(<span class="hljs-string">&quot;Message published !&quot;</span>);
  } <span class="hljs-keyword">else</span> {
    pubResult.cause().printStackTrace();
  }
});</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_publish_with_confirm"><a class="anchor" href="#_publish_with_confirm"></a>Publish with confirm</h3>
<div class="paragraph">
<p>Publish a message to a queue and confirm the broker acknowledged it.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">Buffer message = Buffer.buffer(<span class="hljs-string">&quot;body&quot;</span>, <span class="hljs-string">&quot;Hello RabbitMQ, from Vert.x !&quot;</span>);

<span class="hljs-comment">// Put the channel in confirm mode. This can be done once at init.</span>
client.confirmSelect(confirmResult -&gt; {
  <span class="hljs-keyword">if</span>(confirmResult.succeeded()) {
    client.basicPublish(<span class="hljs-string">&quot;&quot;</span>, <span class="hljs-string">&quot;my.queue&quot;</span>, message, pubResult -&gt; {
      <span class="hljs-keyword">if</span> (pubResult.succeeded()) {
        <span class="hljs-comment">// Check the message got confirmed by the broker.</span>
        client.waitForConfirms(waitResult -&gt; {
          <span class="hljs-keyword">if</span>(waitResult.succeeded())
            System.out.println(<span class="hljs-string">&quot;Message published !&quot;</span>);
          <span class="hljs-keyword">else</span>
            waitResult.cause().printStackTrace();
        });
      } <span class="hljs-keyword">else</span> {
        pubResult.cause().printStackTrace();
      }
    });
  } <span class="hljs-keyword">else</span> {
    confirmResult.cause().printStackTrace();
  }
});</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_reliable_message_publishing"><a class="anchor" href="#_reliable_message_publishing"></a>Reliable Message Publishing</h3>
<div class="paragraph">
<p>In order to reliably publish messages to RabbitMQ it is necessary to handle confirmations that each message has been accepted by the server.
The simplest approach to confirmations is to use the basicPublishWithConfirm approach, above, which synchronously confirms each message when it is sent - blocking the publishing channel until the confirmation is received.</p>
</div>
<div class="paragraph">
<p>In order to achieve greater throughput RabbitMQ provides asynchronous confirmations.
The asynchronous confirmations can confirm multiple messages in one go, so it is necessary for the client to track all messages in the order that they were published.
Also, until messages are confirmed by the server it may be necessary to resend them, so they must be retained by the client.</p>
</div>
<div class="paragraph">
<p>The RabbitMQPublisher class implements a standard approach to handling asynchronous confirmations, avoiding much of the boiler plate code that would otherwise be required.</p>
</div>
<div class="paragraph">
<p>The RabbitMQPublisher works by:
* Adding all sent messages to an internal queue.
* Sending messages from the queue when it is able, keeping track of these messages pending acknowledgement in a separate queue.
* Handling asynchronous confirmations from RabbitMQ, removing messages from the pendingAck queue once they are confirmed.
* Notifying the caller for each message that is confirmed (this is always a single message at a time, not the bulk confirmation used by RabbitMQ).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">RabbitMQPublisher publisher = RabbitMQPublisher.create(vertx, client, options);

messages.forEach((k,v) -&gt; {
  com.rabbitmq.client.BasicProperties properties = <span class="hljs-keyword">new</span> AMQP.BasicProperties.Builder()
          .messageId(k)
          .build();
  publisher.publish(<span class="hljs-string">&quot;exchange&quot;</span>, <span class="hljs-string">&quot;routingKey&quot;</span>, properties, v.toBuffer());
});

publisher.getConfirmationStream().handler(conf -&gt; {
  <span class="hljs-keyword">if</span> (conf.isSucceeded()) {
    messages.remove(conf.getMessageId());
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Delivery Tags</p>
</div>
<div class="paragraph">
<p>This section is an implementation detail that is useful for anyone that wants to implement their own alternative to RabbitMQPublisher.</p>
</div>
<div class="paragraph">
<p>For the RabbitMQPublisher to work it has to know the delivery tag that RabbitMQ will use for each message published.
The confirmations from RabbitMQ can arrive at the client before the call to basicPublish has completed, so it is not possible to identify the delivery tag via anything returned by basicPublish if asynchronous confirmations are being used.
For this reason it is necessary for the RabbitMQClient to tell the RabbitMQPublisher the delivery tag of each message via a separate callback that occurs in the call to RabbitMQClient::basicPublish before the message is actually sent on the network.
It is also possible for the delivery tag of a single message to change (delivery tags are per-channel, so if the message is resent following a reconnection it will have a new delivery tag) - this means that we cannot use a Future to inform the client of the delivery tag.
If the deliveryTagHandler is called more than once for a given message it is always safe to ignore the previous value - there can be only one valid delivery tag for a message at any time.</p>
</div>
<div class="paragraph">
<p>To capture the delivery tag one of the RabbitMqClient::basicPublishWithDeliveryTag methods should be used.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"> <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">basicPublishWithDeliveryTag</span><span class="hljs-params">(String exchange, String routingKey, BasicProperties properties, Buffer body, Handler&lt;Long&gt; deliveryTagHandler, Handler&lt;AsyncResult&lt;Void&gt;&gt; resultHandler)</span></span>;
 <span class="hljs-function">Future&lt;Void&gt; <span class="hljs-title">basicPublishWithDeliveryTag</span><span class="hljs-params">(String exchange, String routingKey, BasicProperties properties, Buffer body, <span class="hljs-meta">@Nullable</span> Handler&lt;Long&gt; deliveryTagHandler)</span></span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>These methods</p>
</div>
</div>
<div class="sect2">
<h3 id="_consume"><a class="anchor" href="#_consume"></a>Consume</h3>
<div class="paragraph">
<p>Consume messages from a queue.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="hljs-comment">// Create a stream of messages from a queue</span>
client.basicConsumer(<span class="hljs-string">&quot;my.queue&quot;</span>, rabbitMQConsumerAsyncResult -&gt; {
  <span class="hljs-keyword">if</span> (rabbitMQConsumerAsyncResult.succeeded()) {
    System.out.println(<span class="hljs-string">&quot;RabbitMQ consumer created !&quot;</span>);
    RabbitMQConsumer mqConsumer = rabbitMQConsumerAsyncResult.result();
    mqConsumer.handler(message -&gt; {
      System.out.println(<span class="hljs-string">&quot;Got message: &quot;</span> + message.body().toString());
    });
  } <span class="hljs-keyword">else</span> {
    rabbitMQConsumerAsyncResult.cause().printStackTrace();
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>At any moment of time you can pause or resume the stream. When stream is paused you won&#8217;t receive any message.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">consumer.pause();
consumer.resume();</code></pre>
</div>
</div>
<div class="paragraph">
<p>There are actually a set of options to specify when creating a consumption stream.</p>
</div>
<div class="paragraph">
<p>The <code>QueueOptions</code> lets you specify:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The size of internal queue with <code>setMaxInternalQueueSize</code></p>
</li>
<li>
<p>Should the stream keep more recent messages when queue size is exceed with <code>setKeepMostRecent</code></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">QueueOptions options = <span class="hljs-keyword">new</span> QueueOptions()
  .setMaxInternalQueueSize(<span class="hljs-number">1000</span>)
  .setKeepMostRecent(<span class="hljs-keyword">true</span>);

client.basicConsumer(<span class="hljs-string">&quot;my.queue&quot;</span>, options, rabbitMQConsumerAsyncResult -&gt; {
  <span class="hljs-keyword">if</span> (rabbitMQConsumerAsyncResult.succeeded()) {
    System.out.println(<span class="hljs-string">&quot;RabbitMQ consumer created !&quot;</span>);
  } <span class="hljs-keyword">else</span> {
    rabbitMQConsumerAsyncResult.cause().printStackTrace();
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>When you want to stop consuming message from a queue, you can do:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">rabbitMQConsumer.cancel(cancelResult -&gt; {
  <span class="hljs-keyword">if</span> (cancelResult.succeeded()) {
    System.out.println(<span class="hljs-string">&quot;Consumption successfully stopped&quot;</span>);
  } <span class="hljs-keyword">else</span> {
    System.out.println(<span class="hljs-string">&quot;Tired in attempt to stop consumption&quot;</span>);
    cancelResult.cause().printStackTrace();
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can get notified by the end handler when the queue won&#8217;t process any more messages:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">rabbitMQConsumer.endHandler(v -&gt; {
  System.out.println(<span class="hljs-string">&quot;It is the end of the stream&quot;</span>);
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can set the exception handler to be notified of any error that may occur when a message is processed:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">consumer.exceptionHandler(e -&gt; {
  System.out.println(<span class="hljs-string">&quot;An exception occurred in the process of message handling&quot;</span>);
  e.printStackTrace();
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>And finally, you may want to retrive a related to the consumer tag:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">String consumerTag = consumer.consumerTag();
System.out.println(<span class="hljs-string">&quot;Consumer tag is: &quot;</span> + consumerTag);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_get"><a class="anchor" href="#_get"></a>Get</h3>
<div class="paragraph">
<p>Will get a message from a queue</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">client.basicGet(<span class="hljs-string">&quot;my.queue&quot;</span>, <span class="hljs-keyword">true</span>, getResult -&gt; {
  <span class="hljs-keyword">if</span> (getResult.succeeded()) {
    RabbitMQMessage msg = getResult.result();
    System.out.println(<span class="hljs-string">&quot;Got message: &quot;</span> + msg.body());
  } <span class="hljs-keyword">else</span> {
    getResult.cause().printStackTrace();
  }
});</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_consume_messages_without_auto_ack"><a class="anchor" href="#_consume_messages_without_auto_ack"></a>Consume messages without auto-ack</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">client.basicConsumer(<span class="hljs-string">&quot;my.queue&quot;</span>, <span class="hljs-keyword">new</span> QueueOptions().setAutoAck(<span class="hljs-keyword">false</span>), consumeResult -&gt; {
  <span class="hljs-keyword">if</span> (consumeResult.succeeded()) {
    System.out.println(<span class="hljs-string">&quot;RabbitMQ consumer created !&quot;</span>);
    RabbitMQConsumer consumer = consumeResult.result();

    <span class="hljs-comment">// Set the handler which messages will be sent to</span>
    consumer.handler(msg -&gt; {
      JsonObject json = (JsonObject) msg.body();
      System.out.println(<span class="hljs-string">&quot;Got message: &quot;</span> + json.getString(<span class="hljs-string">&quot;body&quot;</span>));
      <span class="hljs-comment">// ack</span>
      client.basicAck(json.getLong(<span class="hljs-string">&quot;deliveryTag&quot;</span>), <span class="hljs-keyword">false</span>, asyncResult -&gt; {
      });
    });
  } <span class="hljs-keyword">else</span> {
    consumeResult.cause().printStackTrace();
  }
});</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_running_the_tests"><a class="anchor" href="#_running_the_tests"></a>Running the tests</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You will need to have RabbitMQ installed and running with default ports on localhost for this to work.</p>
</div>
</div>
</div></div></div></div></div></div><footer><div class="container"><div class="footer-nav-section"><div class="footer-nav-list footer-logo"><a href="/"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAxMjMyLjYgMzE1LjIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDEyMzIuNiAzMTUuMiIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHN0eWxlPi5zdDB7ZmlsbDojNzgyYTkxfTwvc3R5bGU+PHBhdGggZD0iTTEyMC45IDIxNC4yIDE5MC41IDBoNTIuM2wtOTguNSAyNzMuOEg5OC4yTDAgMGg1Mi4xbDY4LjggMjE0LjJ6bTI5MS4yLTYyLjZIMjk5LjZ2ODQuMkg0MzF2MzhIMjUyVjBoMTc3Ljd2MzguNEgyOTkuNlYxMTRoMTEyLjV2MzcuNnptODMuNy0xMTMuMkg1NDZjMTYuNS4zIDI5IDQuNCAzNy4zIDEyLjQgOC4zIDggMTIuNSAxOS40IDEyLjUgMzQgMCAxNC00LjUgMjUuMS0xMy41IDMzLjItOSA4LjEtMjEuNiAxMi4xLTM3LjYgMTIuMWgtMjcuMXYyNC4ybDg2LjEgMTE5LjVoNTF2LTIuNGwtNzcuMi0xMDYuN2MyNC45LTUuNSA0My4zLTIxLjcgNTIuNi0zNS45IDguMi0xMi42IDEzLjMtMjcuNyAxMy4zLTQ2IDAtMjYuOC04LjYtNDcuNC0yNS44LTYxLjVDNjAwLjUgNy4xIDU3Ni4xIDAgNTQ0LjUgMGgtOTYuM3YyNzMuOGg0Ny42Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0ibTEwNTIuMyAxNTcuNy00MS41IDYyLjcgMjkuNyA1My40aDg1LjF6Ii8+PGNpcmNsZSBjbGFzcz0ic3QwIiBjeD0iODI3LjkiIGN5PSIyNzQuNyIgcj0iNDAuNSIvPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Im0xMDM3IDAtNDcuNiA3NC4yTDk0OSAwaC04NGw4NS4zIDEzNS44LTY3LjEgMTA1LjdjNS43IDkuNSA5LjEgMjAuNSA5LjIgMzIuNGg1MC4xTDExMjEuMyAwSDEwMzd6Ii8+PHBhdGggZD0iTTc2My41IDI3My44Yy4xLTkuOSAyLjUtMTkuMiA2LjYtMjcuNVYzOC40aDg1LjRWMEg2MzguMnYzOC40aDg0LjZ2MjM1LjRoNDAuN3ptNDE0LTI2Ni45aC0xNS4zdjQyLjJoLTguNVY2LjloLTE1LjJWMGgzOXY2Ljl6TTExOTMgMGwxNC4yIDM3LjdMMTIyMS4zIDBoMTF2NDkuMWgtOC41VjMyLjlsLjgtMjEuNy0xNC41IDM3LjloLTYuMWwtMTQuNS0zNy44LjggMjEuNnYxNi4yaC04LjVWMGgxMS4yeiIvPjwvc3ZnPg==" alt="Vert.x Logo"/></a></div><div class="footer-nav-list"><h5>Eclipse Vert.x</h5><ul class=""><li><a class="navbar-menu-item" href="/docs/">文档</a></li><li><a href="/download/">下载</a></li><li><a href="/blog/">博客</a></li><li><a href="/community/">社区</a></li><li><a href="/translation/">翻译团队</a></li><li><a href="https://github.com/eclipse-vertx/vert.x">GitHub</a></li><li><a href="https://github.com/vertx-china/vertx-web-site">翻译GitHub</a></li></ul></div><div class="footer-nav-list"><h5>资源</h5><ul class=""><li><a href="/faq/">答疑</a></li><li><a href="/channels/">联系渠道</a></li><li><a href="https://how-to.vertx.io/">操作指南</a></li><li><a href="https://start.vertx.io/">应用生成器</a></li></ul></div><div class="footer-nav-list"><h5>Eclipse</h5><ul class=""><li><a href="https://www.eclipse.org/">Eclipse 基金会</a></li><li><a href="https://www.eclipse.org/legal/privacy.php">隐私政策</a></li><li><a href="https://www.eclipse.org/legal/termsofuse.php">使用条款</a></li><li><a href="https://www.eclipse.org/legal/copyright.php">版权代理</a></li><li><a href="https://www.eclipse.org/legal/">法律资源</a></li></ul></div></div><div class="footer-copyright"><div class="footer-copyright-remarks">© <!-- -->2021<!-- --> Eclipse Vert.x™<br/>Eclipse Vert.x™ 是开源的，并在<a href="https://creativecommons.org/licenses/by-sa/3.0/" target="_blank" rel="noopener noreferrer">Eclipse Public License 2.0</a>和<a href="https://www.apache.org/licenses/LICENSE-2.0.html" target="_blank" rel="noopener noreferrer">Apache License 2.0</a>协议下获得了双重许可。<br class="footer-copyright-break"/>网站由 <a href="https://michelkraemer.com" target="_blank" rel="noopener noreferrer">Michel Krämer</a> 设计。</div><div class="footer-copyright-eclipse-logo"><a href="https://www.eclipse.org/" target="_blank" rel="noopener noreferrer"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAyODEuMyA5MS4xIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAyODEuMyA5MS4xIiB4bWw6c3BhY2U9InByZXNlcnZlIj48c3R5bGU+LnN0MHtmaWxsOiNmNzk0MjJ9LnN0MXtmaWxsOiMzZDNjM2J9PC9zdHlsZT48ZyBpZD0iTGF5ZXJfMV8xXyI+PHBhdGggY2xhc3M9InN0MCIgZD0iTTI2NS43IDg0IDI1NyA3M2gtMi43djE3LjdoMy4zdi0xMmw5LjMgMTJoMi4xVjczaC0zLjN2MTF6bS0zMi40LTguM2M0LjIgMCA1LjggMy4zIDUuOCA2LjNzLTEuNiA2LTUuOCA2LTUuNy0zLjEtNS44LTYgMS43LTYuMyA1LjgtNi4zem0wLTNjLTYuMSAwLTkuMSA0LjctOS4xIDkuMyAwIDQuNyAyLjkgOS4xIDkuMSA5LjFzOS00LjYgOS4xLTkuMi0zLTkuMi05LjEtOS4yem0tMjEuMiAxOFY3M2gtMy4zdjE3LjdoMy4zem0tMjMuNiAwaDMuM1Y3Nmg1LjZ2LTNoLTE0LjZ2M2g1LjZsLjEgMTQuN3ptLTE4LjktNi41SDE2M2wzLjMtNy42IDMuMyA3LjZ6bTIuOCA2LjVoMy42TDE2OC4yIDczaC0zLjZsLTggMTcuN2gzLjZsMS41LTMuM2g5LjNsMS40IDMuM3ptLTM4LTE0LjZoMy42YzMuOSAwIDUuNSAyLjggNS41IDUuNS4xIDIuOC0xLjUgNS44LTUuNSA1LjhoLTMuNlY3Ni4xem0zLjctMy4xaC02Ljl2MTcuN2g2LjljNi4yIDAgOC45LTQuNSA4LjktOXMtMi44LTguNy04LjktOC43em0tMjIuNCAxMUwxMDcgNzNoLTIuN3YxNy43aDMuM3YtMTJsOS4zIDEyaDIuMVY3M2gtMy4zdjExek04OC4yIDczdjEwLjJjMCAzLTEuNiA0LjktNC4zIDQuOXMtNC42LTEuNy00LjYtNC45VjczSDc2djEwLjFjMCA1LjMgMy42IDcuOSA3LjkgNy45IDQuNCAwIDcuNy0yLjcgNy43LTcuOVY3M2gtMy40em0tMzMgMi43YzQuMiAwIDUuOCAzLjMgNS44IDYuM3MtMS42IDYtNS44IDYtNS43LTMuMS01LjgtNiAxLjctNi4zIDUuOC02LjN6bTAtM2MtNi4xIDAtOS4xIDQuNy05LjEgOS4zczIuOSA5LjEgOS4xIDkuMSA5LTQuNiA5LjEtOS4yLTMtOS4yLTkuMS05LjJ6bS0yOS43IDE4di02LjVoOC45di0zLjFoLTguOXYtNC44aDkuNFY3M0gyMi4ydjE3LjZoMy4zeiIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yNjkuNCA1NC40aC0yMi4ydi04LjloMjEuNHYtNi45aC0yMS40di05LjFoMjIuMnYtNy4yaC0yOS42djM5LjVoMjkuNnYtNy40em0tNDAtMjUuNmMtMy02LjEtOS40LTcuOC0xNS41LTcuOC03LjMgMC0xNS4zIDMuNC0xNS4zIDExLjUgMCA4LjkgNy40IDExIDE1LjUgMTIgNS4yLjYgOS4xIDIuMSA5LjEgNS44IDAgNC4zLTQuNCA1LjktOS4xIDUuOXMtOS40LTEuOS0xMS4xLTYuM2wtNi4yIDMuMmMyLjkgNy4yIDkuMSA5LjcgMTcuMiA5LjcgOC44IDAgMTYuNi0zLjggMTYuNi0xMi42IDAtOS40LTcuNy0xMS42LTE1LjktMTIuNi00LjctLjYtOC44LTEuNS04LjgtNSAwLTIuOSAyLjYtNS4yIDguMi01LjIgNC4zIDAgOCAyLjIgOS40IDQuNGw1LjktM3pNMTc2IDIyLjJjLTYuMi0uMS0xMi40IDAtMTguNiAwdjM5LjVoNy40VjUwLjFIMTc2YzE5LjQgMCAxOS40LTI3LjkgMC0yNy45em0tMTEuMSA3LjFIMTc2YzkuNSAwIDkuNSAxNCAwIDE0aC0xMS4ybC4xLTE0em0tMTggMzIuNVYyMi4yaC03LjR2MzkuNWw3LjQuMXptLTQ0LTM5LjZ2MzkuNWgyNy43di02LjloLTIwLjNWMjIuMmgtNy40ek05MC43IDUxLjdjLTIuNyAyLjUtNi4yIDQtOS45IDQtOS44IDAtMTMuNS02LjgtMTMuNi0xMy40czQuMS0xMy43IDEzLjYtMTMuN2MzLjUtLjEgNyAxLjMgOS41IDMuN2w1LTQuOGMtMy44LTMuOS05LjEtNi0xNC41LTYtMTQuMyAwLTIxIDEwLjUtMjAuOSAyMC44czYuMyAyMC4zIDIwLjkgMjAuM2M1LjYuMSAxMS0yIDE1LTUuOWwtNS4xLTV6bS0zOSAyLjdIMjkuNXYtOC45aDIxLjR2LTYuOUgyOS41di05LjFoMjIuMnYtNy4ySDIyLjJ2MzkuNWgyOS42bC0uMS03LjR6Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTkuOCAxOC4yQzE4LjggNC4xIDM2LjktLjggNTIuMSA2bC0xLS43QzM1LjctNC42IDE1LjItLjEgNS4zIDE1LjNzLTUuNCAzNS45IDEwIDQ1LjhsMS4xLjZDMy44IDUwLjguOCAzMi4zIDkuOCAxOC4yeiIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yNzIuMiAyNi4xYzAtMi41IDIuMS00LjYgNC42LTQuNiAyLjUgMCA0LjYgMi4xIDQuNiA0LjYgMCAyLjUtMi4xIDQuNi00LjYgNC42LTIuNiAwLTQuNi0yLjEtNC42LTQuNnptOC42IDBjMC0yLjItMS44LTQuMS00LTQuMXMtNC4xIDEuOC00LjEgNC4xYzAgMi4yIDEuNyA0IDMuOSA0LjFoLjFjMi4zIDAgNC4xLTEuOCA0LjEtNC4xem0tNi0yLjVoMi4zYzEuMSAwIDEuOS41IDEuOSAxLjYgMCAuNy0uNCAxLjMtMS4xIDEuNWwxLjIgMS43aC0xLjRsLTEtMS41aC0uN3YxLjVoLTEuMWwtLjEtNC44em0yLjIgMi4zYy41IDAgLjgtLjMuOC0uN3MtLjMtLjctLjgtLjdoLTF2MS4zbDEgLjF6Ii8+PC9nPjwvc3ZnPg==" alt="Eclipse foundation Logo"/></a></div></div></div></footer></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"slug":"4.0.3/vertx-rabbitmq-client/java","title":"RabbitMQ Client for Vert.x","fallbackGitHubStars":null,"toc":"\u003cdiv id=\"toc\" class=\"toc\"\u003e\n\u003cdiv id=\"toctitle\"\u003eTable of Contents\u003c/div\u003e\n\u003cul class=\"sectlevel1\"\u003e\n\u003cli\u003e\u003ca href=\"#_getting_started\"\u003eGetting Started\u003c/a\u003e\n\u003cul class=\"sectlevel2\"\u003e\n\u003cli\u003e\u003ca href=\"#_maven\"\u003eMaven\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_gradle\"\u003eGradle\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_create_a_client\"\u003eCreate a client\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_recovery_and_reconnections\"\u003eRecovery and Reconnections\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_declare_exchange_with_additional_config\"\u003eDeclare exchange with additional config\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_declare_queue_with_additional_config\"\u003eDeclare queue with additional config\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_operations\"\u003eOperations\u003c/a\u003e\n\u003cul class=\"sectlevel2\"\u003e\n\u003cli\u003e\u003ca href=\"#_publish\"\u003ePublish\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_publish_with_confirm\"\u003ePublish with confirm\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_reliable_message_publishing\"\u003eReliable Message Publishing\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_consume\"\u003eConsume\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_get\"\u003eGet\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_consume_messages_without_auto_ack\"\u003eConsume messages without auto-ack\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_running_the_tests\"\u003eRunning the tests\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e","contents":"\u003ch1\u003eRabbitMQ Client for Vert.x\u003c/h1\u003e\n\n\u003cdiv id=\"preamble\"\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eA Vert.x client allowing applications to interact with a RabbitMQ broker (AMQP 0.9.1)\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e\u003cstrong\u003eThis service is experimental and the APIs are likely to change before settling down.\u003c/strong\u003e\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_getting_started\"\u003e\u003ca class=\"anchor\" href=\"#_getting_started\"\u003e\u003c/a\u003eGetting Started\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_maven\"\u003e\u003ca class=\"anchor\" href=\"#_maven\"\u003e\u003c/a\u003eMaven\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eAdd the following dependency to your maven project\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-xml\" data-lang=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\n \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003eio.vertx\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003evertx-rabbitmq-client\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e4.0.3\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_gradle\"\u003e\u003ca class=\"anchor\" href=\"#_gradle\"\u003e\u003c/a\u003eGradle\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eAdd the following dependency to your gradle project\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-groovy\" data-lang=\"groovy\"\u003edependencies {\n compile \u003cspan class=\"hljs-string\"\u003e\u0026#x27;io.vertx:vertx-rabbitmq-client:4.0.3\u0026#x27;\u003c/span\u003e\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_create_a_client\"\u003e\u003ca class=\"anchor\" href=\"#_create_a_client\"\u003e\u003c/a\u003eCreate a client\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eYou can create a client instance as follows using a full amqp uri:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eRabbitMQOptions config = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e RabbitMQOptions();\n\u003cspan class=\"hljs-comment\"\u003e// full amqp uri\u003c/span\u003e\nconfig.setUri(\u003cspan class=\"hljs-string\"\u003e\u0026quot;amqp://xvjvsrrc:VbuL1atClKt7zVNQha0bnnScbNvGiqgb@moose.rmq.cloudamqp.com/xvjvsrrc\u0026quot;\u003c/span\u003e);\nRabbitMQClient client = RabbitMQClient.create(vertx, config);\n\n\u003cspan class=\"hljs-comment\"\u003e// Connect\u003c/span\u003e\nclient.start(asyncResult -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (asyncResult.succeeded()) {\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;RabbitMQ successfully connected!\u0026quot;\u003c/span\u003e);\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Fail to connect to RabbitMQ \u0026quot;\u003c/span\u003e + asyncResult.cause().getMessage());\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eOr you can also specify individual parameters manually:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eRabbitMQOptions config = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e RabbitMQOptions();\n\u003cspan class=\"hljs-comment\"\u003e// Each parameter is optional\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// The default parameter with be used if the parameter is not set\u003c/span\u003e\nconfig.setUser(\u003cspan class=\"hljs-string\"\u003e\u0026quot;user1\u0026quot;\u003c/span\u003e);\nconfig.setPassword(\u003cspan class=\"hljs-string\"\u003e\u0026quot;password1\u0026quot;\u003c/span\u003e);\nconfig.setHost(\u003cspan class=\"hljs-string\"\u003e\u0026quot;localhost\u0026quot;\u003c/span\u003e);\nconfig.setPort(\u003cspan class=\"hljs-number\"\u003e5672\u003c/span\u003e);\nconfig.setVirtualHost(\u003cspan class=\"hljs-string\"\u003e\u0026quot;vhost1\u0026quot;\u003c/span\u003e);\nconfig.setConnectionTimeout(\u003cspan class=\"hljs-number\"\u003e6000\u003c/span\u003e); \u003cspan class=\"hljs-comment\"\u003e// in milliseconds\u003c/span\u003e\nconfig.setRequestedHeartbeat(\u003cspan class=\"hljs-number\"\u003e60\u003c/span\u003e); \u003cspan class=\"hljs-comment\"\u003e// in seconds\u003c/span\u003e\nconfig.setHandshakeTimeout(\u003cspan class=\"hljs-number\"\u003e6000\u003c/span\u003e); \u003cspan class=\"hljs-comment\"\u003e// in milliseconds\u003c/span\u003e\nconfig.setRequestedChannelMax(\u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e);\nconfig.setNetworkRecoveryInterval(\u003cspan class=\"hljs-number\"\u003e500\u003c/span\u003e); \u003cspan class=\"hljs-comment\"\u003e// in milliseconds\u003c/span\u003e\nconfig.setAutomaticRecoveryEnabled(\u003cspan class=\"hljs-keyword\"\u003etrue\u003c/span\u003e);\n\nRabbitMQClient client = RabbitMQClient.create(vertx, config);\n\n\u003cspan class=\"hljs-comment\"\u003e// Connect\u003c/span\u003e\nclient.start(asyncResult -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (asyncResult.succeeded()) {\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;RabbitMQ successfully connected!\u0026quot;\u003c/span\u003e);\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Fail to connect to RabbitMQ \u0026quot;\u003c/span\u003e + asyncResult.cause().getMessage());\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eYou can set multiples addresses to connect to a cluster;\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eRabbitMQOptions config = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e RabbitMQOptions();\nconfig.setUser(\u003cspan class=\"hljs-string\"\u003e\u0026quot;user1\u0026quot;\u003c/span\u003e);\nconfig.setPassword(\u003cspan class=\"hljs-string\"\u003e\u0026quot;password1\u0026quot;\u003c/span\u003e);\nconfig.setVirtualHost(\u003cspan class=\"hljs-string\"\u003e\u0026quot;vhost1\u0026quot;\u003c/span\u003e);\n\nconfig.setAddresses(Arrays.asList(Address.parseAddresses(\u003cspan class=\"hljs-string\"\u003e\u0026quot;firstHost,secondHost:5672\u0026quot;\u003c/span\u003e)));\n\nRabbitMQClient client = RabbitMQClient.create(vertx, config);\n\n\u003cspan class=\"hljs-comment\"\u003e// Connect\u003c/span\u003e\nclient.start(asyncResult -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (asyncResult.succeeded()) {\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;RabbitMQ successfully connected!\u0026quot;\u003c/span\u003e);\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Fail to connect to RabbitMQ \u0026quot;\u003c/span\u003e + asyncResult.cause().getMessage());\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_recovery_and_reconnections\"\u003e\u003ca class=\"anchor\" href=\"#_recovery_and_reconnections\"\u003e\u003c/a\u003eRecovery and Reconnections\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThere are two, separate and incompatible, mechanisms for handling reconnections in the RabbitMQClient:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eJava RabbitMQ client library auto recovery;\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eRabbitMQClient restarts.\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eNeither mechanism is enabled by default.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe reconnections provided by the Java RabbitMQ client library do not work in all situations (if the connection to the server disconnects nicely the client will shut down and not recover).\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre\u003e[source, java]\nIn order to use the Java RabbitMQ client library auto recovery it is necessary to both enable it and disable the RabbitMQClient library reconnect attempts:\nRabbitMQOptions options = new RabbitMQOptions();\noptions.setAutomaticRecoveryEnabled(true);\noptions.setReconnectAttempts(0);\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe client library will also attempt topology recovery as detailed in its documentation (this is enabled by default in the library and is not exposed in the RabbitMQClientOptions).\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eAlternatively the RabbitMQClient may be configured to retry connecting to the RabbitMQ server whenever there is a connection problem.\nThe failure of a connection could be caused by a transient network failure (where the client would probably connect back to the same RabbitMQ server) or it could be caused by a failover scenario.\nThis approach is more brutal than that followed by the client library - the RabbitMQClient restarts work by closing the connections when the client library reports a problem and then repeatedly trying to reconnect from scratch.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe reconnection policy can be configured by setting the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/NetClientOptions.html#setReconnectInterval-long-\"\u003esetReconnectInterval\u003c/a\u003e\u003c/code\u003e and\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/NetClientOptions.html#setReconnectAttempts-int-\"\u003esetReconnectAttempts\u003c/a\u003e\u003c/code\u003e properties in the configuration:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eRabbitMQOptions options = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e RabbitMQOptions();\noptions.setAutomaticRecoveryEnabled(\u003cspan class=\"hljs-keyword\"\u003efalse\u003c/span\u003e);\noptions.setReconnectAttempts(Integer.MAX_VALUE);\noptions.setReconnectInterval(\u003cspan class=\"hljs-number\"\u003e500\u003c/span\u003e);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe RabbitMQClient reconnections do not feature any form of \u003cem\u003eautomatic\u003c/em\u003e topology recovery.\nThis can lead to a race condition where messages are sent before the topology on the server is ready (i.e. before exchanges and queues have been created/bound).\nTo provide an opportunity to create these objects before the connection is considered ready the RabbitMQClient provides the ConnectionEstablishedCallback.\nThe ConnectionEstablishedCallback can be used to carry out any operations on the RabbitMQClient before other users (including the RabbitMQConsumer and RabbitMQPublisher) are able to access it.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eRabbitMQClient client = RabbitMQClient.create(vertx, config);\nclient.addConnectionEstablishedCallback(promise -\u0026gt; {\n            client.exchangeDeclare(\u003cspan class=\"hljs-string\"\u003e\u0026quot;exchange\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;fanout\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003etrue\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003efalse\u003c/span\u003e)\n                .compose(v -\u0026gt; {\n                  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e client.queueDeclare(\u003cspan class=\"hljs-string\"\u003e\u0026quot;queue\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003efalse\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003etrue\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003etrue\u003c/span\u003e);\n                })\n                .compose(declareOk -\u0026gt; {\n                  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e client.queueBind(declareOk.getQueue(), \u003cspan class=\"hljs-string\"\u003e\u0026quot;exchange\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;\u0026quot;\u003c/span\u003e);\n                })\n                .onComplete(promise);\n});\n\n\u003cspan class=\"hljs-comment\"\u003e// At this point the exchange, queue and binding will have been declared even if the client connects to a new server\u003c/span\u003e\nclient.basicConsumer(\u003cspan class=\"hljs-string\"\u003e\u0026quot;queue\u0026quot;\u003c/span\u003e, rabbitMQConsumerAsyncResult -\u0026gt; {\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIf a RabbitMQConsumer is listening for messages on an auto-delete server-named queue and the broker restarts the queue will have been removed by the time the client reconnects.\nIn this instance it is necessary to both recreate the queue and set the new queue name on the RabbitMQConsumer.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eRabbitMQClient client = RabbitMQClient.create(vertx, config);\nAtomicReference\u0026lt;RabbitMQConsumer\u0026gt; consumer = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e AtomicReference\u0026lt;\u0026gt;();\nAtomicReference\u0026lt;String\u0026gt; queueName = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e AtomicReference\u0026lt;\u0026gt;();\nclient.addConnectionEstablishedCallback(promise -\u0026gt; {\n      client.exchangeDeclare(\u003cspan class=\"hljs-string\"\u003e\u0026quot;exchange\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;fanout\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003etrue\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003efalse\u003c/span\u003e)\n              .compose(v -\u0026gt; client.queueDeclare(\u003cspan class=\"hljs-string\"\u003e\u0026quot;\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003efalse\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003etrue\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003etrue\u003c/span\u003e))\n              .compose(dok -\u0026gt; {\n                  queueName.set(dok.getQueue());\n                  \u003cspan class=\"hljs-comment\"\u003e// The first time this runs there will be no existing consumer\u003c/span\u003e\n                  \u003cspan class=\"hljs-comment\"\u003e// on subsequent connections the consumer needs to be update with the new queue name\u003c/span\u003e\n                  RabbitMQConsumer currentConsumer = consumer.get();\n                  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (currentConsumer != \u003cspan class=\"hljs-keyword\"\u003enull\u003c/span\u003e) {\n                    currentConsumer.setQueueName(queueName.get());\n                  }\n                  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e client.queueBind(queueName.get(), \u003cspan class=\"hljs-string\"\u003e\u0026quot;exchange\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;\u0026quot;\u003c/span\u003e);\n              })\n              .onComplete(promise);\n});\n\nclient.start()\n        .onSuccess(v -\u0026gt; {\n            \u003cspan class=\"hljs-comment\"\u003e// At this point the exchange, queue and binding will have been declared even if the client connects to a new server\u003c/span\u003e\n            client.basicConsumer(queueName.get(), rabbitMQConsumerAsyncResult -\u0026gt; {\n                \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (rabbitMQConsumerAsyncResult.succeeded()) {\n                    consumer.set(rabbitMQConsumerAsyncResult.result());\n                }\n            });\n        })\n        .onFailure(ex -\u0026gt; {\n            System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;It went wrong: \u0026quot;\u003c/span\u003e + ex.getMessage());\n        });\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect3\"\u003e\n\u003ch4 id=\"_enabling_ssltls_on_the_client\"\u003e\u003ca class=\"anchor\" href=\"#_enabling_ssltls_on_the_client\"\u003e\u003c/a\u003eEnabling SSL/TLS on the client\u003c/h4\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe RabbitMQClient can easily configured to use SSL.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eRabbitMQOptions options = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e RabbitMQOptions()\n .setSsl(\u003cspan class=\"hljs-keyword\"\u003etrue\u003c/span\u003e);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect4\"\u003e\n\u003ch5 id=\"_client_trust_configuration\"\u003e\u003ca class=\"anchor\" href=\"#_client_trust_configuration\"\u003e\u003c/a\u003eClient trust configuration\u003c/h5\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIf \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/ClientOptionsBase.html#setTrustAll-boolean-\"\u003etrustAll\u003c/a\u003e\u003c/code\u003e is set to true, the client will trust all server certificates.\nThe connection will still be encrypted but is then vulnerable to 'man in the middle' attacks.\n\u003cstrong\u003eGreatbadness\u003c/strong\u003e, Do not use this option in production! Default value is false.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eRabbitMQOptions options = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e RabbitMQOptions()\n .setSsl(\u003cspan class=\"hljs-keyword\"\u003etrue\u003c/span\u003e)\n .setTrustAll(\u003cspan class=\"hljs-keyword\"\u003etrue\u003c/span\u003e));\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIf \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/ClientOptionsBase.html#setTrustAll-boolean-\"\u003etrustAll\u003c/a\u003e\u003c/code\u003e is set to false, proper server authentication will takes place. Three main options are available.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eYour default truststore already \"trusts\" the server, in which case all is fine\u003cbr\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eYou start the java process with -Djavax.net.ssl.trustStore=xxx.jks specifying the custom trust store\u003cbr\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eYou supply a custom trust store via RabbitMQOptions\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect4\"\u003e\n\u003ch5 id=\"_jks_trust_store_option\"\u003e\u003ca class=\"anchor\" href=\"#_jks_trust_store_option\"\u003e\u003c/a\u003eJKS trust store option\u003c/h5\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eRabbitMQOptions options = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e RabbitMQOptions()\n .setSsl(\u003cspan class=\"hljs-keyword\"\u003etrue\u003c/span\u003e)\n .setTrustOptions(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JksOptions()\n   .setPath(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/path/myKeyStore.jks\u0026quot;\u003c/span\u003e)\n   .setPassword(\u003cspan class=\"hljs-string\"\u003e\u0026quot;myKeyStorePassword\u0026quot;\u003c/span\u003e));\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect4\"\u003e\n\u003ch5 id=\"_p12pfx_trust_store_option\"\u003e\u003ca class=\"anchor\" href=\"#_p12pfx_trust_store_option\"\u003e\u003c/a\u003ep12/pfx trust store option\u003c/h5\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eRabbitMQOptions options = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e RabbitMQOptions()\n .setSsl(\u003cspan class=\"hljs-keyword\"\u003etrue\u003c/span\u003e)\n .setPfxTrustOptions(\n   \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e PfxOptions().\n     setPath(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/path/myKeyStore.p12\u0026quot;\u003c/span\u003e).\n     setPassword(\u003cspan class=\"hljs-string\"\u003e\u0026quot;myKeyStorePassword\u0026quot;\u003c/span\u003e));\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect4\"\u003e\n\u003ch5 id=\"_pem_trust_option\"\u003e\u003ca class=\"anchor\" href=\"#_pem_trust_option\"\u003e\u003c/a\u003ePEM trust option\u003c/h5\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eRabbitMQOptions options = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e RabbitMQOptions()\n .setSsl(\u003cspan class=\"hljs-keyword\"\u003etrue\u003c/span\u003e)\n .setPemTrustOptions(\n   \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e PemTrustOptions().\n     addCertPath(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/path/ca-cert.pem\u0026quot;\u003c/span\u003e));\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_declare_exchange_with_additional_config\"\u003e\u003ca class=\"anchor\" href=\"#_declare_exchange_with_additional_config\"\u003e\u003c/a\u003eDeclare exchange with additional config\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eYou can pass additional config parameters to RabbitMQ\u0026#8217;s exchangeDeclare method\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eJsonObject config = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject();\n\nconfig.put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;x-dead-letter-exchange\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;my.deadletter.exchange\u0026quot;\u003c/span\u003e);\nconfig.put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;alternate-exchange\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;my.alternate.exchange\u0026quot;\u003c/span\u003e);\n\u003cspan class=\"hljs-comment\"\u003e// ...\u003c/span\u003e\nclient.exchangeDeclare(\u003cspan class=\"hljs-string\"\u003e\u0026quot;my.exchange\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;fanout\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003etrue\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003efalse\u003c/span\u003e, config, onResult -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (onResult.succeeded()) {\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Exchange successfully declared with config\u0026quot;\u003c/span\u003e);\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    onResult.cause().printStackTrace();\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_declare_queue_with_additional_config\"\u003e\u003ca class=\"anchor\" href=\"#_declare_queue_with_additional_config\"\u003e\u003c/a\u003eDeclare queue with additional config\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eYou can pass additional config parameters to RabbitMQs queueDeclare method\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eJsonObject config = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject();\nconfig.put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;x-message-ttl\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e10_000L\u003c/span\u003e);\n\nclient.queueDeclare(\u003cspan class=\"hljs-string\"\u003e\u0026quot;my-queue\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003etrue\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003efalse\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003etrue\u003c/span\u003e, config, queueResult -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (queueResult.succeeded()) {\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Queue declared!\u0026quot;\u003c/span\u003e);\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    System.err.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Queue failed to be declared!\u0026quot;\u003c/span\u003e);\n    queueResult.cause().printStackTrace();\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_operations\"\u003e\u003ca class=\"anchor\" href=\"#_operations\"\u003e\u003c/a\u003eOperations\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe following are some examples of the operations supported by the RabbitMQService API.\nConsult the javadoc/documentation for detailed information on all API methods.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_publish\"\u003e\u003ca class=\"anchor\" href=\"#_publish\"\u003e\u003c/a\u003ePublish\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003ePublish a message to a queue\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eBuffer message = Buffer.buffer(\u003cspan class=\"hljs-string\"\u003e\u0026quot;body\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;Hello RabbitMQ, from Vert.x !\u0026quot;\u003c/span\u003e);\nclient.basicPublish(\u003cspan class=\"hljs-string\"\u003e\u0026quot;\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;my.queue\u0026quot;\u003c/span\u003e, message, pubResult -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (pubResult.succeeded()) {\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Message published !\u0026quot;\u003c/span\u003e);\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    pubResult.cause().printStackTrace();\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_publish_with_confirm\"\u003e\u003ca class=\"anchor\" href=\"#_publish_with_confirm\"\u003e\u003c/a\u003ePublish with confirm\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003ePublish a message to a queue and confirm the broker acknowledged it.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eBuffer message = Buffer.buffer(\u003cspan class=\"hljs-string\"\u003e\u0026quot;body\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;Hello RabbitMQ, from Vert.x !\u0026quot;\u003c/span\u003e);\n\n\u003cspan class=\"hljs-comment\"\u003e// Put the channel in confirm mode. This can be done once at init.\u003c/span\u003e\nclient.confirmSelect(confirmResult -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e(confirmResult.succeeded()) {\n    client.basicPublish(\u003cspan class=\"hljs-string\"\u003e\u0026quot;\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;my.queue\u0026quot;\u003c/span\u003e, message, pubResult -\u0026gt; {\n      \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (pubResult.succeeded()) {\n        \u003cspan class=\"hljs-comment\"\u003e// Check the message got confirmed by the broker.\u003c/span\u003e\n        client.waitForConfirms(waitResult -\u0026gt; {\n          \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e(waitResult.succeeded())\n            System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Message published !\u0026quot;\u003c/span\u003e);\n          \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e\n            waitResult.cause().printStackTrace();\n        });\n      } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n        pubResult.cause().printStackTrace();\n      }\n    });\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    confirmResult.cause().printStackTrace();\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_reliable_message_publishing\"\u003e\u003ca class=\"anchor\" href=\"#_reliable_message_publishing\"\u003e\u003c/a\u003eReliable Message Publishing\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIn order to reliably publish messages to RabbitMQ it is necessary to handle confirmations that each message has been accepted by the server.\nThe simplest approach to confirmations is to use the basicPublishWithConfirm approach, above, which synchronously confirms each message when it is sent - blocking the publishing channel until the confirmation is received.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIn order to achieve greater throughput RabbitMQ provides asynchronous confirmations.\nThe asynchronous confirmations can confirm multiple messages in one go, so it is necessary for the client to track all messages in the order that they were published.\nAlso, until messages are confirmed by the server it may be necessary to resend them, so they must be retained by the client.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe RabbitMQPublisher class implements a standard approach to handling asynchronous confirmations, avoiding much of the boiler plate code that would otherwise be required.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe RabbitMQPublisher works by:\n* Adding all sent messages to an internal queue.\n* Sending messages from the queue when it is able, keeping track of these messages pending acknowledgement in a separate queue.\n* Handling asynchronous confirmations from RabbitMQ, removing messages from the pendingAck queue once they are confirmed.\n* Notifying the caller for each message that is confirmed (this is always a single message at a time, not the bulk confirmation used by RabbitMQ).\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eRabbitMQPublisher publisher = RabbitMQPublisher.create(vertx, client, options);\n\nmessages.forEach((k,v) -\u0026gt; {\n  com.rabbitmq.client.BasicProperties properties = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e AMQP.BasicProperties.Builder()\n          .messageId(k)\n          .build();\n  publisher.publish(\u003cspan class=\"hljs-string\"\u003e\u0026quot;exchange\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;routingKey\u0026quot;\u003c/span\u003e, properties, v.toBuffer());\n});\n\npublisher.getConfirmationStream().handler(conf -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (conf.isSucceeded()) {\n    messages.remove(conf.getMessageId());\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eDelivery Tags\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThis section is an implementation detail that is useful for anyone that wants to implement their own alternative to RabbitMQPublisher.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eFor the RabbitMQPublisher to work it has to know the delivery tag that RabbitMQ will use for each message published.\nThe confirmations from RabbitMQ can arrive at the client before the call to basicPublish has completed, so it is not possible to identify the delivery tag via anything returned by basicPublish if asynchronous confirmations are being used.\nFor this reason it is necessary for the RabbitMQClient to tell the RabbitMQPublisher the delivery tag of each message via a separate callback that occurs in the call to RabbitMQClient::basicPublish before the message is actually sent on the network.\nIt is also possible for the delivery tag of a single message to change (delivery tags are per-channel, so if the message is resent following a reconnection it will have a new delivery tag) - this means that we cannot use a Future to inform the client of the delivery tag.\nIf the deliveryTagHandler is called more than once for a given message it is always safe to ignore the previous value - there can be only one valid delivery tag for a message at any time.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eTo capture the delivery tag one of the RabbitMqClient::basicPublishWithDeliveryTag methods should be used.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003e \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003ebasicPublishWithDeliveryTag\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(String exchange, String routingKey, BasicProperties properties, Buffer body, Handler\u0026lt;Long\u0026gt; deliveryTagHandler, Handler\u0026lt;AsyncResult\u0026lt;Void\u0026gt;\u0026gt; resultHandler)\u003c/span\u003e\u003c/span\u003e;\n \u003cspan class=\"hljs-function\"\u003eFuture\u0026lt;Void\u0026gt; \u003cspan class=\"hljs-title\"\u003ebasicPublishWithDeliveryTag\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(String exchange, String routingKey, BasicProperties properties, Buffer body, \u003cspan class=\"hljs-meta\"\u003e@Nullable\u003c/span\u003e Handler\u0026lt;Long\u0026gt; deliveryTagHandler)\u003c/span\u003e\u003c/span\u003e;\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThese methods\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_consume\"\u003e\u003ca class=\"anchor\" href=\"#_consume\"\u003e\u003c/a\u003eConsume\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eConsume messages from a queue.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003e\u003cspan class=\"hljs-comment\"\u003e// Create a stream of messages from a queue\u003c/span\u003e\nclient.basicConsumer(\u003cspan class=\"hljs-string\"\u003e\u0026quot;my.queue\u0026quot;\u003c/span\u003e, rabbitMQConsumerAsyncResult -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (rabbitMQConsumerAsyncResult.succeeded()) {\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;RabbitMQ consumer created !\u0026quot;\u003c/span\u003e);\n    RabbitMQConsumer mqConsumer = rabbitMQConsumerAsyncResult.result();\n    mqConsumer.handler(message -\u0026gt; {\n      System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Got message: \u0026quot;\u003c/span\u003e + message.body().toString());\n    });\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    rabbitMQConsumerAsyncResult.cause().printStackTrace();\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eAt any moment of time you can pause or resume the stream. When stream is paused you won\u0026#8217;t receive any message.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003econsumer.pause();\nconsumer.resume();\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThere are actually a set of options to specify when creating a consumption stream.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe \u003ccode\u003eQueueOptions\u003c/code\u003e lets you specify:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eThe size of internal queue with \u003ccode\u003esetMaxInternalQueueSize\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eShould the stream keep more recent messages when queue size is exceed with \u003ccode\u003esetKeepMostRecent\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eQueueOptions options = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e QueueOptions()\n  .setMaxInternalQueueSize(\u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e)\n  .setKeepMostRecent(\u003cspan class=\"hljs-keyword\"\u003etrue\u003c/span\u003e);\n\nclient.basicConsumer(\u003cspan class=\"hljs-string\"\u003e\u0026quot;my.queue\u0026quot;\u003c/span\u003e, options, rabbitMQConsumerAsyncResult -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (rabbitMQConsumerAsyncResult.succeeded()) {\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;RabbitMQ consumer created !\u0026quot;\u003c/span\u003e);\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    rabbitMQConsumerAsyncResult.cause().printStackTrace();\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eWhen you want to stop consuming message from a queue, you can do:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003erabbitMQConsumer.cancel(cancelResult -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (cancelResult.succeeded()) {\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Consumption successfully stopped\u0026quot;\u003c/span\u003e);\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Tired in attempt to stop consumption\u0026quot;\u003c/span\u003e);\n    cancelResult.cause().printStackTrace();\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eYou can get notified by the end handler when the queue won\u0026#8217;t process any more messages:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003erabbitMQConsumer.endHandler(v -\u0026gt; {\n  System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;It is the end of the stream\u0026quot;\u003c/span\u003e);\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eYou can set the exception handler to be notified of any error that may occur when a message is processed:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003econsumer.exceptionHandler(e -\u0026gt; {\n  System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;An exception occurred in the process of message handling\u0026quot;\u003c/span\u003e);\n  e.printStackTrace();\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eAnd finally, you may want to retrive a related to the consumer tag:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eString consumerTag = consumer.consumerTag();\nSystem.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Consumer tag is: \u0026quot;\u003c/span\u003e + consumerTag);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_get\"\u003e\u003ca class=\"anchor\" href=\"#_get\"\u003e\u003c/a\u003eGet\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eWill get a message from a queue\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eclient.basicGet(\u003cspan class=\"hljs-string\"\u003e\u0026quot;my.queue\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003etrue\u003c/span\u003e, getResult -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (getResult.succeeded()) {\n    RabbitMQMessage msg = getResult.result();\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Got message: \u0026quot;\u003c/span\u003e + msg.body());\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    getResult.cause().printStackTrace();\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_consume_messages_without_auto_ack\"\u003e\u003ca class=\"anchor\" href=\"#_consume_messages_without_auto_ack\"\u003e\u003c/a\u003eConsume messages without auto-ack\u003c/h3\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eclient.basicConsumer(\u003cspan class=\"hljs-string\"\u003e\u0026quot;my.queue\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e QueueOptions().setAutoAck(\u003cspan class=\"hljs-keyword\"\u003efalse\u003c/span\u003e), consumeResult -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (consumeResult.succeeded()) {\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;RabbitMQ consumer created !\u0026quot;\u003c/span\u003e);\n    RabbitMQConsumer consumer = consumeResult.result();\n\n    \u003cspan class=\"hljs-comment\"\u003e// Set the handler which messages will be sent to\u003c/span\u003e\n    consumer.handler(msg -\u0026gt; {\n      JsonObject json = (JsonObject) msg.body();\n      System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Got message: \u0026quot;\u003c/span\u003e + json.getString(\u003cspan class=\"hljs-string\"\u003e\u0026quot;body\u0026quot;\u003c/span\u003e));\n      \u003cspan class=\"hljs-comment\"\u003e// ack\u003c/span\u003e\n      client.basicAck(json.getLong(\u003cspan class=\"hljs-string\"\u003e\u0026quot;deliveryTag\u0026quot;\u003c/span\u003e), \u003cspan class=\"hljs-keyword\"\u003efalse\u003c/span\u003e, asyncResult -\u0026gt; {\n      });\n    });\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    consumeResult.cause().printStackTrace();\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_running_the_tests\"\u003e\u003ca class=\"anchor\" href=\"#_running_the_tests\"\u003e\u003c/a\u003eRunning the tests\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eYou will need to have RabbitMQ installed and running with default ports on localhost for this to work.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e","version":"4.0.3"},"__N_SSG":true},"page":"/docs/[[...slug]]","query":{"slug":["4.0.3","vertx-rabbitmq-client","java"]},"buildId":"6JO3cW_S9gttmYgOgxhLp","isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-ad30d1320810fa304e64.js"></script><script src="/_next/static/chunks/webpack-147ea3ada7109f6dc0bb.js" async=""></script><script src="/_next/static/chunks/framework.2d0daf90a2fa7e03281a.js" async=""></script><script src="/_next/static/chunks/commons.58af5f72dd3f80f51ddc.js" async=""></script><script src="/_next/static/chunks/main-78880972fb4b65194263.js" async=""></script><script src="/_next/static/chunks/styles.eb11bd7b649b32af6115.js" async=""></script><script src="/_next/static/chunks/pages/_app-e598384803edc4a6782d.js" async=""></script><script src="/_next/static/chunks/5df0631eea625b022d3730b3f1bf573e1b8deb37.0b8151d407694e31e2a2.js" async=""></script><script src="/_next/static/chunks/31acfd8439b7c9eee4abe9f59c7500d6c943ee0d.74b85118e963a61f1bf8.js" async=""></script><script src="/_next/static/chunks/pages/docs/%5B%5B...slug%5D%5D-de110bc5466c276a0759.js" async=""></script><script src="/_next/static/6JO3cW_S9gttmYgOgxhLp/_buildManifest.js" async=""></script><script src="/_next/static/6JO3cW_S9gttmYgOgxhLp/_ssgManifest.js" async=""></script></body></html>