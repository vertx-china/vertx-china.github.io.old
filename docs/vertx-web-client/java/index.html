<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="description" content="Vert.x | Reactive applications on the JVM"/><meta name="robots" content="index,follow"/><link rel="shortcut icon" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="48x48" href="/favicons/favicon-48x48.png"/><link rel="alternate" type="application/rss+xml" href="/feed/rss.xml"/><link rel="alternate" type="application/atom+xml" href="/feed/atom.xml"/><link rel="alternate" type="application/json" href="/feed/feed.json"/><title>Web 客户端 | Eclipse Vert.x</title><link rel="preload" href="https://api.github.com/repos/vert-x3/vertx-web" as="fetch" crossorigin="anonymous" class="jsx-d38685edc31911e0"/><meta name="next-head-count" content="14"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-cb7634a8b6194820.js" defer=""></script><script src="/_next/static/chunks/framework-5f4595e5518b5600.js" defer=""></script><script src="/_next/static/chunks/main-f635b472c367d1c7.js" defer=""></script><script src="/_next/static/chunks/pages/_app-d7fe1c01d653763a.js" defer=""></script><script src="/_next/static/chunks/615-af27e2775b51966c.js" defer=""></script><script src="/_next/static/chunks/619-afdae842ceadd4b2.js" defer=""></script><script src="/_next/static/chunks/81-19fda51682297a85.js" defer=""></script><script src="/_next/static/chunks/536-a9af9dadd93f0749.js" defer=""></script><script src="/_next/static/chunks/434-02978711e0879a69.js" defer=""></script><script src="/_next/static/chunks/pages/docs/%5B%5B...slug%5D%5D-810f1ca9040e790a.js" defer=""></script><script src="/_next/static/RBMjO1hqOi6Z1JoWz1U-W/_buildManifest.js" defer=""></script><script src="/_next/static/RBMjO1hqOi6Z1JoWz1U-W/_ssgManifest.js" defer=""></script><script src="/_next/static/RBMjO1hqOi6Z1JoWz1U-W/_middlewareManifest.js" defer=""></script><style id="__jsx-400ec7965926e858">.dropdown-item.jsx-400ec7965926e858{white-space:nowrap;
line-height:2;
width:100%;
padding:0 1.5rem;
cursor:pointer}
.dropdown-item.jsx-400ec7965926e858:hover{background-color:#e9ecef}
.dropdown-item.active.jsx-400ec7965926e858{font-weight:400;
padding-left:.75rem}
.dropdown-item.has-active-siblings.jsx-400ec7965926e858:not(.active){padding-left:calc(0.75rem + 16px + 0.5em)}
.dropdown-item.jsx-400ec7965926e858 .dropdown-check-icon.jsx-400ec7965926e858{width:16px;
margin-right:.5em;
margin-top:1px}</style><style id="__jsx-6650573c8f14945d">.dropdown.jsx-6650573c8f14945d{position:relative;
display:inline-block}
.dropdown.jsx-6650573c8f14945d .dropdown-title.jsx-6650573c8f14945d{margin-right:0;
cursor:pointer;
-webkit-user-select:none;
-moz-user-select:none;
-ms-user-select:none;
user-select:none}
.dropdown.jsx-6650573c8f14945d .dropdown-menu.jsx-6650573c8f14945d{position:absolute;
background-color:#f8f9fa;
box-shadow:0 2px 5px 0 rgba(0, 0, 0, .1);
border-radius:.8rem;
list-style-type:none;
padding:.6666666667rem 0;
margin:.25rem 0 0 0;
z-index:100;
display:none;
-webkit-user-select:none;
-moz-user-select:none;
-ms-user-select:none;
user-select:none}
.dropdown.jsx-6650573c8f14945d .dropdown-menu.jsx-6650573c8f14945d a{color:#4d4d4d;
-webkit-text-decoration:none;
text-decoration:none;
font-weight:300}
.dropdown.jsx-6650573c8f14945d .dropdown-menu.align-right.jsx-6650573c8f14945d{right:0}
.dropdown.jsx-6650573c8f14945d .dropdown-menu.visible.jsx-6650573c8f14945d{display:block}
.dropdown.jsx-6650573c8f14945d .dropdown-menu.jsx-6650573c8f14945d a.jsx-6650573c8f14945d:hover{color:inherit}
.dropdown.jsx-6650573c8f14945d svg{margin-bottom:2px}</style><style id="__jsx-f705e145f931f504">.navbar{position:absolute;
top:2.75rem;
width:100%}
.navbar a{color:#3c3c3b}
.navbar a.navbar-menu-item, .navbar .dropdown-title{text-transform:uppercase}
.navbar a.navbar-menu-item:hover, .navbar .dropdown-title:hover{-webkit-text-decoration:none;
text-decoration:none;
color:#898987;
-webkit-transition:color .15s ease-in-out;
transition:color .15s ease-in-out}
.navbar .navbar-content{display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex;
-webkit-flex-direction:row;
-ms-flex-direction:row;
flex-direction:row;
-webkit-align-items:center;
-webkit-box-align:center;
-ms-flex-align:center;
align-items:center;
position:relative}
.navbar .navbar-content .navbar-logo{-webkit-flex:1;
-ms-flex:1;
flex:1}
.navbar .navbar-content .navbar-logo img{width:8.3rem}
.navbar .navbar-content .navbar-collapse-button{display:none;
cursor:pointer}
@media (max-width:1000px) {.navbar .navbar-content .navbar-collapse-button{display:inline-block}}
.navbar .navbar-content .navbar-collapse-button span{display:block;
width:33px;
height:4px;
margin-bottom:5px;
position:relative;
background:#3c3c3b;
border-radius:3px;
z-index:1;
transform-origin:4px 0;
-webkit-transition:-webkit-transform .5s cubic-bezier(0.77, 0.2, 0.05, 1), background .5s cubic-bezier(0.77, 0.2, 0.05, 1), opacity .55s ease;
transition:transform .5s cubic-bezier(0.77, 0.2, 0.05, 1), background .5s cubic-bezier(0.77, 0.2, 0.05, 1), opacity .55s ease}
.navbar .navbar-content .navbar-collapse-button span:first-child{transform-origin:0% 0%}
.navbar .navbar-content .navbar-collapse-button span:nth-last-child(2){transform-origin:0% 100%}
.navbar .navbar-content .navbar-right{display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex;
-webkit-flex-direction:row;
-ms-flex-direction:row;
flex-direction:row;
-webkit-align-items:baseline;
-webkit-box-align:baseline;
-ms-flex-align:baseline;
align-items:baseline;
margin-bottom:10px}
@media (max-width:1000px) {.navbar .navbar-content .navbar-right{max-height:0;
-webkit-transition:max-height 200ms ease-in-out;
transition:max-height 200ms ease-in-out;
box-shadow:0 2px 5px 0 rgba(0, 0, 0, .1);
-webkit-flex-direction:column;
-ms-flex-direction:column;
flex-direction:column;
position:absolute;
top:2.75rem;
left:.8rem;
right:.8rem;
background-color:#f8f9fa;
overflow-x:auto;
overflow-y:hidden}}
.navbar .navbar-content .navbar-menu .navbar-menu-item{font-weight:400;
margin-right:2.5rem}
.navbar .navbar-content .navbar-menu .navbar-menu-item.with-drop-down{margin-right:1.8rem}
@media (max-width:1250px) {.navbar .navbar-content .navbar-menu .navbar-menu-item{margin-right:1.5rem}}
@media (max-width:1000px) {.navbar .navbar-content .navbar-menu .navbar-menu-item{display:block;
margin-bottom:1rem;
font-size:1.2rem}}
.navbar .navbar-content .navbar-menu .navbar-menu-item .external-link-icon{margin-left:.25em}
@media (max-width:1000px) {.navbar .navbar-content .navbar-menu{-webkit-flex-direction:column;
-ms-flex-direction:column;
flex-direction:column;
padding:1rem}}
.navbar .navbar-content .navbar-social{margin-left:1.6rem;
font-size:.875rem}
.navbar .navbar-content .navbar-social svg{height:16px;
margin-bottom:2px}
@media (max-width:1000px) {.navbar .navbar-content .navbar-social svg{height:1rem}}
@media (max-width:1250px) {.navbar .navbar-content .navbar-social{margin-left:1rem}}
@media (max-width:1000px) {.navbar .navbar-content .navbar-social{margin-left:auto;
padding:0 1rem 1rem 0;
font-size:1rem}}
@media (max-width:768px) {.navbar{top:1rem}}
.page .navbar{top:0;
padding-top:1.5rem;
padding-bottom:1rem;
position:fixed;
background-color:#fff;
z-index:2}</style><style id="__jsx-20d862052e50feff">.search input{color:#adb5bd;
border:1px solid #dee2e6;
border-radius:.4rem;
font-size:.875rem;
padding:.25rem 1.8rem .35rem 1.8rem;
width:100%;
-webkit-transition:color .15s ease-in-out, border-color .15s ease-in-out;
transition:color .15s ease-in-out, border-color .15s ease-in-out}
.search input:focus{border-color:#adb5bd;
color:#3c3c3b}
.search .search-icon, .search .search-icon-delete{position:absolute;
top:.55rem;
height:1rem;
stroke:#adb5bd;
-webkit-transition:stroke .15s ease-in-out;
transition:stroke .15s ease-in-out}
.search .search-icon{left:.4rem}
.search input:focus+.search-icon{stroke:#6f6970}
.search .search-icon-delete{stroke:#6f6970;
right:.4rem;
height:.75rem;
top:.7rem;
opacity:0;
-webkit-transition:opacity .15s ease-in-out;
transition:opacity .15s ease-in-out;
cursor:text}
.search.has-content .search-icon-delete{opacity:1;
cursor:pointer}</style><style id="__jsx-117e429f22e394dc">.search-results, .search-results-none{font-size:.875rem;
overflow:auto;
list-style-type:none;
padding-left:0;
display:none}
.search-results.visible, .search-results-none.visible{display:block}
.search-results{list-style-type:none;
padding:0;
margin-bottom:0}
.search-results li{display:block;
padding:.5rem;
margin-bottom:1rem;
border-radius:.4rem;
border:1px solid transparent;
cursor:pointer}
.search-results li.active{background-color:#f8f9fa;
border:1px solid #e9ecef}
.search-results li h5{margin:0 0 .5rem 0;
font-size:1em}
.search-results li .search-results-highlight{background-color:#ff0}
.search-results-none{padding:1rem .5rem;
text-align:center;
width:100%}</style><style id="__jsx-d1843944f2d67b">.search-panel{display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex;
-webkit-flex-direction:column;
-ms-flex-direction:column;
flex-direction:column;
position:relative}</style><style id="__jsx-d38685edc31911e0">.github-stars.jsx-d38685edc31911e0{display:inline-block}
.github-stars.jsx-d38685edc31911e0 .icon.jsx-d38685edc31911e0{margin-right:.25em}
.github-stars.jsx-d38685edc31911e0 .icon.jsx-d38685edc31911e0 svg{height:1rem}</style><style id="__jsx-aeedcf66895f49d7">footer{font-size:.875rem;
padding-top:3rem;
padding-bottom:4rem;
background-color:#f8f9fa;
border-top:1px solid #dee2e6;
margin-top:1rem;
color:#6f6970}
footer h5{font-size:1rem;
margin-top:0;
margin-bottom:1rem;
color:#3c3c3b;
text-transform:uppercase}
footer ul{padding:0;
list-style:none;
line-height:2}
footer a{color:#6f6970}
footer .footer-logo img, footer .footer-copyright-eclipse-logo img{-webkit-filter:grayscale(100);
filter:grayscale(100);
opacity:.5;
-webkit-transition:all .15s ease-in-out;
transition:all .15s ease-in-out}
footer .footer-logo img:hover, footer .footer-copyright-eclipse-logo img:hover{-webkit-filter:grayscale(0);
filter:grayscale(0);
opacity:1}
footer .footer-nav-section{display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex;
-webkit-flex-direction:row;
-ms-flex-direction:row;
flex-direction:row;
margin-bottom:6rem}
footer .footer-nav-section .footer-logo{margin-top:.4rem}
footer .footer-nav-section .footer-logo img{width:8.3rem}
footer .footer-nav-section .footer-nav-list{width:20%}
footer .footer-copyright{display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex;
-webkit-flex-direction:row;
-ms-flex-direction:row;
flex-direction:row;
-webkit-box-pack:justify;
-webkit-justify-content:space-between;
justify-content:space-between;
-webkit-align-items:center;
-webkit-box-align:center;
-ms-flex-align:center;
align-items:center}
footer .footer-copyright a{white-space:nowrap}
footer .footer-copyright .footer-copyright-eclipse-logo{width:17%;
margin-bottom:.5rem}
@media (max-width:1250px) {footer .footer-copyright .footer-copyright-break{display:none}
footer .footer-copyright .footer-copyright-eclipse-logo{width:30%}}
@media (max-width:1000px) {footer .footer-nav-section .footer-nav-list{width:25%}
footer .footer-copyright .footer-copyright-break{display:inline-block}
footer .footer-copyright .footer-copyright-eclipse-logo{width:40%}}
@media (max-width:768px) {footer .footer-nav-section{max-width:100%;
margin-left:auto;
margin-right:auto}}
@media (max-width:640px) {footer .footer-nav-section{max-width:80%;
margin-bottom:3rem;
-webkit-flex-direction:column;
-ms-flex-direction:column;
flex-direction:column}
footer .footer-nav-section h5{cursor:pointer}
footer .footer-nav-section h5::after{display:inline-block;
content:"";
border-top:.4em solid;
border-right:.4em solid transparent;
border-bottom:0;
border-left:.4em solid transparent;
position:absolute;
top:.75rem;
right:0}
footer .footer-nav-section .footer-nav-list{width:100%;
position:relative}
footer .footer-nav-section .footer-nav-list ul{overflow-y:hidden;
max-height:0;
-webkit-transition:all 200ms ease-in-out;
transition:all 200ms ease-in-out}
footer .footer-nav-section .footer-nav-list ul.visible{margin-bottom:2rem}
footer .footer-nav-section .footer-logo{margin:0 auto 3rem auto;
width:auto}
footer .footer-copyright{max-width:80%;
text-align:center;
margin-left:auto;
margin-right:auto;
-webkit-flex-direction:column-reverse;
-ms-flex-direction:column-reverse;
flex-direction:column-reverse}
footer .footer-copyright .footer-copyright-eclipse-logo{width:7.6rem;
margin-bottom:1rem}}</style><style id="__jsx-efcc50be384cabc7">.page-content{margin-top:6em;
margin-bottom:8rem}
.docs .docs-content .docs-content-wrapper{display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex;
-webkit-box-pack:justify;
-webkit-justify-content:space-between;
justify-content:space-between}
.docs .docs-content .docs-content-wrapper aside{-webkit-flex:0 0 17rem;
-ms-flex:0 0 17rem;
flex:0 0 17rem}
.docs .docs-content .docs-content-wrapper aside .docs-content-wrapper-sidebar{position:-webkit-sticky;
position:sticky;
top:7em}
.docs .docs-content .docs-content-wrapper aside .search-panel{margin-top:1rem;
width:100%}
.docs .docs-content .docs-content-wrapper aside .search-panel .search-results{max-height:calc(100vh - 10rem - 1px)}
.docs .docs-content .docs-content-wrapper aside .docs-content-toc{margin-top:1rem;
overflow-y:auto;
max-height:calc(100vh - 10rem - 3px)}
.docs .docs-content .docs-content-wrapper aside .docs-content-toc #toctitle{display:none}
.docs .docs-content .docs-content-wrapper aside .docs-content-toc ul{margin-top:0;
padding-left:0;
list-style-type:none}
.docs .docs-content .docs-content-wrapper aside .docs-content-toc ul.sectlevel2{display:none}
.docs .docs-content .docs-content-wrapper aside .docs-content-toc ul li{padding:.3333333333rem 0}
.docs .docs-content .docs-content-wrapper aside.docs-has-search-results .docs-content-toc{display:none}
@media (max-width:1250px) {.docs .docs-content .docs-content-wrapper aside{-webkit-flex:0 0 15rem;
-ms-flex:0 0 15rem;
flex:0 0 15rem}}
@media (max-width:1000px) {.docs .docs-content .docs-content-wrapper aside{z-index:1;
position:fixed;
top:0;
right:0;
width:25rem;
height:100vh;
max-width:100%;
padding-top:6rem;
padding-left:2rem;
padding-right:2rem;
background-color:#fff;
border-left:1px solid #dee2e6;
-webkit-transform:translateX(100%);
-moz-transform:translateX(100%);
-ms-transform:translateX(100%);
transform:translateX(100%);
-webkit-transition:-webkit-transform 200ms ease-in-out;
transition:transform 200ms ease-in-out;
will-change:transform}
.docs .docs-content .docs-content-wrapper aside.collapse{-webkit-transform:translateX(0%);
-moz-transform:translateX(0%);
-ms-transform:translateX(0%);
transform:translateX(0%)}}
@media (max-width:640px) {.docs .docs-content .docs-content-wrapper aside{min-width:100%;
border-left:none}}
.docs .docs-content .docs-content-wrapper .docs-content-sidebar-toggle{z-index:1000;
cursor:pointer;
display:none;
position:fixed;
-webkit-justify-content:center;
justify-content:center;
-webkit-align-items:center;
-webkit-box-align:center;
-ms-flex-align:center;
align-items:center;
right:2rem;
bottom:2rem;
color:#fff;
background-color:#4d4d4d;
padding:.5rem;
border-radius:.8rem;
-webkit-transition:background-color .15s ease-in-out;
transition:background-color .15s ease-in-out}
.docs .docs-content .docs-content-wrapper .docs-content-sidebar-toggle .feather-list, .docs .docs-content .docs-content-wrapper .docs-content-sidebar-toggle .feather-x{display:block}
.docs .docs-content .docs-content-wrapper .docs-content-sidebar-toggle .feather-x{position:absolute;
left:0;
top:0;
opacity:0;
-webkit-transition:opacity .15s ease-in-out;
transition:opacity .15s ease-in-out}
.docs .docs-content .docs-content-wrapper .docs-content-sidebar-toggle:hover{background-color:#3c3c3b}
.docs .docs-content .docs-content-wrapper .docs-content-sidebar-toggle.collapse .feather-list{opacity:0}
.docs .docs-content .docs-content-wrapper .docs-content-sidebar-toggle.collapse .feather-x{opacity:1}
@media (max-width:1000px) {.docs .docs-content .docs-content-wrapper .docs-content-sidebar-toggle{display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex}}
@media (max-width:640px) {.docs .docs-content .docs-content-wrapper .docs-content-sidebar-toggle{right:1rem;
bottom:1rem}}
.docs .docs-content .docs-content-inner{max-width:calc(100% - 19.5rem);
overflow:hidden}
.docs .docs-content .docs-content-inner .docs-content-metadata{margin-top:1.2rem;
margin-bottom:1.2rem;
display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex;
flex-wrap:wrap;
-webkit-align-items:baseline;
-webkit-box-align:baseline;
-ms-flex-align:baseline;
align-items:baseline}
@media (max-width:1000px) {.docs .docs-content .docs-content-inner .docs-content-metadata{-webkit-flex-direction:column;
-ms-flex-direction:column;
flex-direction:column}}
.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-repo{display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex}
.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-left{display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex;
-webkit-align-items:center;
-webkit-box-align:center;
-ms-flex-align:center;
align-items:center;
-webkit-flex:1;
-ms-flex:1;
flex:1}
.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-left>*{margin-right:2rem}
.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-left>*:last-child{margin-right:0}
.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-left a{display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex;
-webkit-align-items:center;
-webkit-box-align:center;
-ms-flex-align:center;
align-items:center;
color:#6f6970;
white-space:nowrap}
.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-left a:hover{color:#782b90}
.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-left a .feather{margin-right:.25em;
height:1rem}
@media (max-width:1000px) {.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-left{flex-wrap:wrap;
margin-bottom:1rem}}
.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-version{-webkit-flex:1;
-ms-flex:1;
flex:1;
display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex}
@media (min-width:1000px) {.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-version{-webkit-box-pack:end;
-ms-flex-pack:end;
-webkit-justify-content:flex-end;
justify-content:flex-end}}
.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-version svg{height:16px;
margin-bottom:-2px}
@media (max-width:1000px) {.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-version svg{height:1rem;
margin-bottom:-1px}}
.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-version .dropdown-menu a{-webkit-text-decoration:none;
text-decoration:none}
.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-version .dropdown-menu a:hover{color:#6f6970}
.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-label{display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex;
margin-left:2rem}
.docs .docs-content .docs-content-inner h1{padding-top:0;
margin-top:.6rem;
line-height:1.2}
.docs .docs-content .docs-content-inner h1::after{content:"";
width:30%;
display:block;
border:2px solid #782b90;
border-radius:2px;
margin-top:1.1rem}
.docs .docs-content .docs-content-inner .ulist>ul{padding-left:1.1rem}
.docs .docs-content .docs-content-inner h2{border-top:1px solid #dee2e6;
margin-top:5rem;
padding-top:2rem}
.docs .docs-content .docs-content-inner h3, .docs .docs-content .docs-content-inner h4{margin-top:3rem}
@media (max-width:1250px) {.docs .docs-content .docs-content-inner{max-width:calc(100% - 17.5rem)}}
@media (max-width:1000px) {.docs .docs-content .docs-content-inner{max-width:100%}}
.docs .docs-content .admonitionblock{border-top-right-radius:.8rem;
border-bottom-right-radius:.8rem;
background-color:#f8f9fa;
padding:1rem;
margin:1.5rem 0;
border-left:9px solid transparent}
.docs .docs-content .admonitionblock.note, .docs .docs-content .admonitionblock.tip{border-color:#6cb9f0}
.docs .docs-content .admonitionblock.important, .docs .docs-content .admonitionblock.warning, .docs .docs-content .admonitionblock.caution{border-color:#f0a46c}
.docs .docs-content .admonitionblock tr{display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex;
-webkit-flex-direction:column;
-ms-flex-direction:column;
flex-direction:column}
.docs .docs-content .admonitionblock .title{font-weight:400}
.docs .docs-content .admonitionblock .title::after{content:":"}
.docs .docs-content dt{font-weight:400}
.docs .docs-content .anchor{opacity:0;
-webkit-align-self:flex-start;
-ms-flex-item-align:flex-start;
align-self:flex-start;
outline:none}
.docs .docs-content .anchor::after{content:"#";
position:absolute;
margin-left:-1.5rem;
color:#ced4da;
padding-right:.45rem}
.docs .docs-content .anchor:hover{opacity:1}
.docs .docs-content h2:hover .anchor, .docs .docs-content h3:hover .anchor, .docs .docs-content h4:hover .anchor, .docs .docs-content h5:hover .anchor, .docs .docs-content h6:hover .anchor{opacity:1}
.docs .docs-content h1 .anchor{display:none}
.docs .docs-content h4 .anchor::after, .docs .docs-content h5 .anchor::after, .docs .docs-content h6 .anchor::after{padding-right:.6rem}</style><style id="__jsx-7824b3ad3820c879">html{line-height:1.15;
-webkit-text-size-adjust:100%}
body{margin:0}
main{display:block}
h1{font-size:2em;
margin:.67em 0}
hr{box-sizing:content-box;
height:0;
overflow:visible}
pre{font-family:monospace, monospace;
font-size:1em}
a{background-color:transparent}
abbr[title]{border-bottom:none;
text-decoration:underline;
text-decoration:underline dotted}
b, strong{font-weight:bolder}
code, kbd, samp{font-family:monospace, monospace;
font-size:1em}
small{font-size:80%}
sub, sup{font-size:75%;
line-height:0;
position:relative;
vertical-align:baseline}
sub{bottom:-0.25em}
sup{top:-0.5em}
img{border-style:none}
button, input, optgroup, select, textarea{font-family:inherit;
font-size:100%;
line-height:1.15;
margin:0}
button, input{overflow:visible}
button, select{text-transform:none}
button, [type=button], [type=reset], [type=submit]{-webkit-appearance:button}
button::-moz-focus-inner, [type=button]::-moz-focus-inner, [type=reset]::-moz-focus-inner, [type=submit]::-moz-focus-inner{border-style:none;
padding:0}
button:-moz-focusring, [type=button]:-moz-focusring, [type=reset]:-moz-focusring, [type=submit]:-moz-focusring{outline:1px dotted ButtonText}
fieldset{padding:.35em .75em .625em}
legend{box-sizing:border-box;
color:inherit;
display:table;
max-width:100%;
padding:0;
white-space:normal}
progress{vertical-align:baseline}
textarea{overflow:auto}
[type=checkbox], [type=radio]{box-sizing:border-box;
padding:0}
[type=number]::-webkit-inner-spin-button, [type=number]::-webkit-outer-spin-button{height:auto}
[type=search]{-webkit-appearance:textfield;
outline-offset:-2px}
[type=search]::-webkit-search-decoration{-webkit-appearance:none}
::-webkit-file-upload-button{-webkit-appearance:button;
font:inherit}
details{display:block}
summary{display:list-item}
template{display:none}
[hidden]{display:none}
.hljs, pre{display:block;
overflow-x:auto;
padding:.5em;
background:#3a2840;
color:#fff}
.hljs.language-shell :not(.bash)+.bash, .hljs.language-better-shell :not(.bash)+.bash, pre.language-shell :not(.bash)+.bash, pre.language-better-shell :not(.bash)+.bash{color:#d2a8e0}
pre{border-radius:.8rem;
padding:1rem;
font-size:.875rem;
margin:1.5rem 0}
.hljs-keyword, .hljs-selector-tag, .hljs-tag{color:#d2a8e0}
.hljs-template-tag{color:red}
.hljs-number{color:#6cb9f0}
.hljs-variable, .hljs-template-variable, .hljs-attribute, .hljs-literal{color:#c9e5f9}
.hljs-subst{color:red}
.hljs-title, .hljs-name, .hljs-selector-id, .hljs-selector-class, .hljs-section, .hljs-type{color:#f0a46c}
.hljs-symbol, .hljs-bullet, .hljs-link{color:#d2a8e0}
.hljs-deletion, .hljs-string, .hljs-built_in, .hljs-builtin-name{color:#6cb9f0}
.hljs-addition, .hljs-comment, .hljs-quote, .hljs-meta{color:#adb5bd}
.hljs-emphasis{font-style:italic}
.hljs-strong{font-weight:bold}
#nprogress{pointer-events:none}
#nprogress .bar{background:#29d;
position:fixed;
z-index:1031;
top:0;
left:0;
width:100%;
height:2px}
#nprogress .peg{display:block;
position:absolute;
right:0px;
width:100px;
height:100%;
box-shadow:0 0 10px #29d, 0 0 5px #29d;
opacity:1;
-webkit-transform:rotate(3deg) translate(0px, -4px);
-ms-transform:rotate(3deg) translate(0px, -4px);
-webkit-transform:rotate(3deg) translate(0px, -4px);
-moz-transform:rotate(3deg) translate(0px, -4px);
-ms-transform:rotate(3deg) translate(0px, -4px);
transform:rotate(3deg) translate(0px, -4px)}
#nprogress .spinner{display:block;
position:fixed;
z-index:1031;
top:15px;
right:15px}
#nprogress .spinner-icon{width:18px;
height:18px;
box-sizing:border-box;
border:solid 2px transparent;
border-top-color:#29d;
border-left-color:#29d;
border-radius:50%;
-webkit-animation:nprogress-spinner 400ms linear infinite;
-webkit-animation:nprogress-spinner 400ms linear infinite;
animation:nprogress-spinner 400ms linear infinite}
.nprogress-custom-parent{overflow:hidden;
position:relative}
.nprogress-custom-parent #nprogress .spinner, .nprogress-custom-parent #nprogress .bar{position:absolute}
@keyframes nprogress-spinner {0% {-webkit-transform:rotate(0deg)}100% {-webkit-transform:rotate(360deg)}}
@keyframes nprogress-spinner {0% {transform:rotate(0deg)}100% {transform:rotate(360deg)}}
#nprogress .bar{background:#782b90}
#nprogress .peg{box-shadow:0 0 10px #782b90, 0 0 5px #782b90}
#nprogress .spinner-icon{border-top-color:#782b90;
border-left-color:#782b90}
html{box-sizing:border-box}
*, *::before, *::after{box-sizing:inherit}
:root{font-size:18px}
@media (max-width:1000px) {:root{font-size:17.1px}}
@media (max-width:768px) {:root{font-size:16.2px}}
@media (max-width:640px) {:root{font-size:15.3px}}
body, input{font-family:Roboto, sans-serif;
font-weight:300;
line-height:1.7;
color:#3c3c3b}
input{outline:none}
h1, h2, h3, h4, h5, h6{font-weight:400}
h1{font-size:2.5rem}
h2{font-size:2rem}
h3{font-size:1.75rem}
h4{font-size:1.5rem}
h5{font-size:1.25rem}
h6{font-size:1.1rem}
.container{width:100%;
padding-right:.8rem;
padding-left:.8rem;
margin-right:auto;
margin-left:auto}
@media (min-width:640px) {.container{max-width:620px}}
@media (min-width:768px) {.container{max-width:738px}}
@media (min-width:1000px) {.container{max-width:950px}}
@media (min-width:1250px) {.container{max-width:1180px}}
@media (min-width:1250px) {.container-narrow{max-width:950px}}
.img-fluid{max-width:100%}
a{-webkit-text-decoration:none;
text-decoration:none;
color:#782b90}
a:hover{text-decoration:underline;
color:#571f69}
img{vertical-align:middle}
svg{overflow:hidden;
vertical-align:middle}
code, pre{font-family:"Roboto Mono", SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace}
p code{display:-webkit-inline-box;
display:-webkit-inline-flex;
display:-ms-inline-flexbox;
display:inline-flex;
max-width:100%;
overflow:auto}
.heading-anchor{opacity:0;
-webkit-align-self:flex-start;
-ms-flex-item-align:flex-start;
align-self:flex-start;
outline:none}
.heading-anchor::after{content:"#";
position:absolute;
margin-left:-1.5rem;
color:#ced4da;
padding-right:.45rem}
.heading-anchor:hover{opacity:1}
h2:hover .heading-anchor, h3:hover .heading-anchor, h4:hover .heading-anchor, h5:hover .heading-anchor, h6:hover .heading-anchor{opacity:1}
h1 .heading-anchor{display:none}
h4 .heading-anchor::after, h5 .heading-anchor::after, h6 .heading-anchor::after{padding-right:.6rem}</style><style data-href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500&display=swap">@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5vAA.woff) format('woff')}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Me5g.woff) format('woff')}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmEU9vAA.woff) format('woff')}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5fCRc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5fABc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5fCBc4AMP6lbBP.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5fBxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5fCxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5fChc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5fBBc4AMP6lQ.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Mu72xKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Mu5mxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Mu7mxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Mu4WxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Mu7WxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Mu7GxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Mu4mxKKTU1Kg.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmEU9fCRc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmEU9fABc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmEU9fCBc4AMP6lbBP.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmEU9fBxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmEU9fCxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmEU9fChc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmEU9fBBc4AMP6lQ.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style><style data-href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@300;400&display=swap">@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZKCA.woff) format('woff')}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVl2ZhZI2eCN5jzbjEETS9weq8-59Y.woff) format('woff')}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCkYb9lecyVC4A.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCAYb9lecyVC4A.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCgYb9lecyVC4A.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCcYb9lecyVC4A.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCsYb9lecyVC4A.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCoYb9lecyVC4A.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCQYb9lecyU.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVl2ZhZI2eCN5jzbjEETS9weq8-19-7DQk6YvNkeg.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVl2ZhZI2eCN5jzbjEETS9weq8-19a7DQk6YvNkeg.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVl2ZhZI2eCN5jzbjEETS9weq8-1967DQk6YvNkeg.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVl2ZhZI2eCN5jzbjEETS9weq8-19G7DQk6YvNkeg.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVl2ZhZI2eCN5jzbjEETS9weq8-1927DQk6YvNkeg.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVl2ZhZI2eCN5jzbjEETS9weq8-19y7DQk6YvNkeg.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVl2ZhZI2eCN5jzbjEETS9weq8-19K7DQk6YvM.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style><style data-href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400&display=swap">@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vqPQA.woff) format('woff')}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vq_SeW-AJi8SJQtQ4Y.woff) format('woff');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vq_QOW-AJi8SJQtQ4Y.woff) format('woff');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vq_R-W-AJi8SJQtQ4Y.woff) format('woff');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vq_S-W-AJi8SJQtQ4Y.woff) format('woff');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vq_SuW-AJi8SJQtQ4Y.woff) format('woff');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vq_ROW-AJi8SJQt.woff) format('woff');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><body data-build-time="2022-02-24T02:37:13.496Z" data-build-commit-id="fdcb26ad43d60aa9722ee97de813703159085b39" data-build-run-id="1890855432"><div id="__next" data-reactroot=""><main class="jsx-efcc50be384cabc7 page docs"><header><div class="jsx-f705e145f931f504 navbar"><div class="jsx-f705e145f931f504 navbar-content container"><div class="jsx-f705e145f931f504 navbar-logo"><a class="jsx-f705e145f931f504" href="/"><img src="data:image/svg+xml,%3csvg version=&#x27;1.1&#x27; id=&#x27;Layer_1&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27; x=&#x27;0&#x27; y=&#x27;0&#x27; viewBox=&#x27;0 0 1232.6 315.2&#x27; style=&#x27;enable-background:new 0 0 1232.6 315.2&#x27; xml:space=&#x27;preserve&#x27;%3e%3cstyle%3e.st0%7bfill:%23782a91%7d%3c/style%3e%3cpath d=&#x27;M120.9 214.2 190.5 0h52.3l-98.5 273.8H98.2L0 0h52.1l68.8 214.2zm291.2-62.6H299.6v84.2H431v38H252V0h177.7v38.4H299.6V114h112.5v37.6zm83.7-113.2H546c16.5.3 29 4.4 37.3 12.4 8.3 8 12.5 19.4 12.5 34 0 14-4.5 25.1-13.5 33.2-9 8.1-21.6 12.1-37.6 12.1h-27.1v24.2l86.1 119.5h51v-2.4l-77.2-106.7c24.9-5.5 43.3-21.7 52.6-35.9 8.2-12.6 13.3-27.7 13.3-46 0-26.8-8.6-47.4-25.8-61.5C600.5 7.1 576.1 0 544.5 0h-96.3v273.8h47.6&#x27;/%3e%3cpath class=&#x27;st0&#x27; d=&#x27;m1052.3 157.7-41.5 62.7 29.7 53.4h85.1z&#x27;/%3e%3ccircle class=&#x27;st0&#x27; cx=&#x27;827.9&#x27; cy=&#x27;274.7&#x27; r=&#x27;40.5&#x27;/%3e%3cpath class=&#x27;st0&#x27; d=&#x27;m1037 0-47.6 74.2L949 0h-84l85.3 135.8-67.1 105.7c5.7 9.5 9.1 20.5 9.2 32.4h50.1L1121.3 0H1037z&#x27;/%3e%3cpath d=&#x27;M763.5 273.8c.1-9.9 2.5-19.2 6.6-27.5V38.4h85.4V0H638.2v38.4h84.6v235.4h40.7zm414-266.9h-15.3v42.2h-8.5V6.9h-15.2V0h39v6.9zM1193 0l14.2 37.7L1221.3 0h11v49.1h-8.5V32.9l.8-21.7-14.5 37.9h-6.1l-14.5-37.8.8 21.6v16.2h-8.5V0h11.2z&#x27;/%3e%3c/svg%3e" alt="Vert.x Logo" class="jsx-f705e145f931f504"/></a></div><div class="jsx-f705e145f931f504 navbar-collapse-button"><span class="jsx-f705e145f931f504"></span><span class="jsx-f705e145f931f504"></span><span class="jsx-f705e145f931f504"></span></div><div class="jsx-f705e145f931f504 navbar-right"><div class="jsx-f705e145f931f504 navbar-menu"><span class="jsx-f705e145f931f504 navbar-menu-item with-drop-down"><div class="jsx-6650573c8f14945d dropdown"><a class="jsx-6650573c8f14945d dropdown-title">开始<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="jsx-6650573c8f14945d dropdown-menu"><a class="jsx-f705e145f931f504" href="/introduction-to-vertx-and-reactive/"><li class="jsx-400ec7965926e858 dropdown-item">简介</li></a><a class="jsx-f705e145f931f504" href="/get-started/"><li class="jsx-400ec7965926e858 dropdown-item">开始</li></a><a href="https://start.vertx.io/" target="_blank" rel="noreferrer" class="jsx-f705e145f931f504"><li class="jsx-400ec7965926e858 dropdown-item">应用生成器 <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a></ul></div></span><a class="jsx-f705e145f931f504 navbar-menu-item" href="/docs/">文档</a><span class="jsx-f705e145f931f504 navbar-menu-item with-drop-down"><div class="jsx-6650573c8f14945d dropdown"><a class="jsx-6650573c8f14945d dropdown-title">资源<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="jsx-6650573c8f14945d dropdown-menu"><a class="jsx-f705e145f931f504" href="/faq/"><li class="jsx-400ec7965926e858 dropdown-item">答疑</li></a><a class="jsx-f705e145f931f504" href="/channels/"><li class="jsx-400ec7965926e858 dropdown-item">联系渠道</li></a><a href="https://how-to.vertx.io/" target="_blank" rel="noreferrer" class="jsx-f705e145f931f504"><li class="jsx-400ec7965926e858 dropdown-item">操作指南 <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a><a href="https://github.com/vert-x3/vertx-eventbus-bridge-clients" target="_blank" rel="noreferrer" class="jsx-f705e145f931f504"><li class="jsx-400ec7965926e858 dropdown-item">EventBus Bridge Clients <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a><a href="https://github.com/vert-x3/advanced-vertx-guide" target="_blank" rel="noreferrer" class="jsx-f705e145f931f504"><li class="jsx-400ec7965926e858 dropdown-item">Advanced Vert.x Guide <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a></ul></div></span><a class="jsx-f705e145f931f504 navbar-menu-item" href="/blog/">博客</a><a class="jsx-f705e145f931f504 navbar-menu-item" href="/community/">社区</a><a class="jsx-f705e145f931f504 navbar-menu-item" href="/translation/">翻译团队</a></div><div class="jsx-f705e145f931f504 navbar-social"><a href="https://github.com/vert-x3/vertx-awesome" title="Awesome Vert.x" target="_blank" rel="noopener noreferrer" class="jsx-f705e145f931f504 navbar-social-link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="List of awesome Vert.x projects"><title>Awesome Vert.x</title><path d="M24 11.438l-6.154-5.645-.865.944 5.128 4.7H1.895l5.128-4.705-.865-.943-6.154 5.649H0v3.72c0 1.683 1.62 3.053 3.61 3.053h3.795c1.99 0 3.61-1.37 3.61-3.051v-2.446h1.97v2.446c0 1.68 1.62 3.051 3.61 3.051h3.794c1.99 0 3.61-1.37 3.61-3.051v-3.721z"></path></svg></a><a href="https://stackoverflow.com/questions/tagged/vert.x" title="Stack Overflow" target="_blank" rel="noopener noreferrer" class="jsx-f705e145f931f504 navbar-social-link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Stack Overflow questions related to Vert.x"><title>stackoverflow</title><path d="M15.725 0l-1.72 1.277 6.39 8.588 1.716-1.277L15.725 0zm-3.94 3.418l-1.369 1.644 8.225 6.85 1.369-1.644-8.225-6.85zm-3.15 4.465l-.905 1.94 9.702 4.517.904-1.94-9.701-4.517zm-1.85 4.86l-.44 2.093 10.473 2.201.44-2.092-10.473-2.203zM1.89 15.47V24h19.19v-8.53h-2.133v6.397H4.021v-6.396H1.89zm4.265 2.133v2.13h10.66v-2.13H6.154Z"></path></svg></a><a href="https://www.youtube.com/channel/UCGN6L3tRhs92Uer3c6VxOSA" title="YouTube" target="_blank" rel="noopener noreferrer" class="jsx-f705e145f931f504 navbar-social-link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="YouTube channel of Vert.x"><title>youtube</title><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"></path></svg></a><a href="https://discord.gg/KzEMwP2" title="Discord" target="_blank" rel="noopener noreferrer" class="jsx-f705e145f931f504 navbar-social-link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Eclipse Vert.x channel on Discord"><title>discord</title><path d="M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.946 2.4189-2.1568 2.4189Z"></path></svg></a><a href="https://groups.google.com/forum/?fromgroups#!forum/vertx" title="Vert.x 用户组" target="_blank" rel="noopener noreferrer" class="jsx-f705e145f931f504 navbar-social-link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="A Google group for Vert.x users"><title>Vert.x 用户组</title><path d="M.92 3.332c-.776 0-1.216.67-.692 1.383l2.537 4.403v7.86c0 2.013 1.467 3.69 3.459 3.69H20.31a3.75 3.75 0 003.69-3.69V7.043a3.723 3.723 0 00-3.668-3.71zm5.786 3.71H20.1c.587 0 1.153.357 1.153.923 0 .566-.566.922-1.153.922H6.706c-.587 0-1.153-.356-1.153-.922 0-.566.566-.923 1.153-.923zm0 3.69H20.1c.587 0 1.153.356 1.153.922 0 .566-.566.922-1.153.922H6.706c-.587 0-1.153-.356-1.153-.922 0-.566.566-.922 1.153-.922zm-.021 3.71h9.705c.587 0 1.153.356 1.153.922 0 .566-.566.923-1.153.923H6.685c-.587 0-1.153-.357-1.153-.923 0-.566.566-.922 1.153-.922Z"></path></svg></a><a href="https://qm.qq.com/cgi-bin/qm/qr?k=QFrKfwIVTuShDdh7puvfJWjqOx4C014c&amp;jump_from=webapi" title="Vert.x中国用户组QQ群" target="_blank" rel="noopener noreferrer" class="jsx-f705e145f931f504 navbar-social-link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Vert.x中国用户组QQ群"><title>Vert.x中国用户组QQ群</title><path d="M21.395 15.035a39.548 39.548 0 0 0-.803-2.264l-1.079-2.695c.001-.032.014-.562.014-.836C19.526 4.632 17.351 0 12 0S4.474 4.632 4.474 9.241c0 .274.013.804.014.836l-1.08 2.695a38.97 38.97 0 0 0-.802 2.264c-1.021 3.283-.69 4.643-.438 4.673.54.065 2.103-2.472 2.103-2.472 0 1.469.756 3.387 2.394 4.771-.612.188-1.363.479-1.845.835-.434.32-.379.646-.301.778.343.578 5.883.369 7.482.189 1.6.18 7.14.389 7.483-.189.078-.132.132-.458-.301-.778-.483-.356-1.233-.646-1.846-.836 1.637-1.384 2.393-3.302 2.393-4.771 0 0 1.563 2.537 2.103 2.472.251-.03.581-1.39-.438-4.673zM12.662 4.846c.039-1.052.659-1.878 1.385-1.846s1.281.912 1.242 1.964c-.039 1.051-.659 1.878-1.385 1.846s-1.282-.912-1.242-1.964zM9.954 3c.725-.033 1.345.794 1.384 1.846.04 1.052-.517 1.931-1.242 1.963-.726.033-1.346-.794-1.385-1.845C8.672 3.912 9.228 3.033 9.954 3zM7.421 8.294c.194-.43 2.147-.908 4.566-.908h.026c2.418 0 4.372.479 4.566.908a.14.14 0 0 1 .014.061c0 .031-.01.059-.026.083-.163.238-2.333 1.416-4.553 1.416h-.026c-2.221 0-4.39-1.178-4.553-1.416a.136.136 0 0 1-.014-.144zm10.422 8.622c-.22 3.676-2.403 5.987-5.774 6.021h-.137c-3.37-.033-5.554-2.345-5.773-6.021-.081-1.35.001-2.496.147-3.43.318.063.638.122.958.176v3.506s1.658.334 3.318.103v-3.225c.488.027.96.04 1.406.034h.025c1.678.021 3.714-.204 5.683-.594.146.934.227 2.08.147 3.43zM10.48 5.804c.313-.041.542-.409.508-.825-.033-.415-.314-.72-.629-.679-.313.04-.541.409-.508.824.034.417.315.72.629.68zM14.479 5.156c.078.037.221.042.289-.146.035-.095.025-.165-.009-.214-.023-.033-.133-.118-.371-.176-.904-.22-1.341.384-1.405.499-.04.072-.012.176.056.227.067.051.139.037.179-.006.58-.628 1.21-.208 1.261-.184z"></path></svg></a><a href="https://qun.qq.com/qqweb/qunpro/share?_wv=3&amp;_wwv=128&amp;inviteCode=1reLvB&amp;from=246610&amp;biz=ka" title="Vert.x中国用户组QQ群" target="_blank" rel="noopener noreferrer" class="jsx-f705e145f931f504 navbar-social-link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 200 200" aria-label="Vert.x中国用户组QQ群"><title>Vert.x中国用户组QQ群</title><path d="M13 73L16 49L52 49L58 14L82 14L77 49L135 49L141 14L166 14L160 49L195 49L192 73L157 73L148 124L184 124L181 149L144 149L137 193L90 149L61 149L55 185L31 185L36 149L0 149L6 124L100 124L120 144L131 75L72 75L64 124L40 124L48 73Z"></path></svg></a></div></div></div></div></header><div class="jsx-efcc50be384cabc7 page-content docs-content"><div class="jsx-efcc50be384cabc7 container"><div class="jsx-efcc50be384cabc7 docs-content-wrapper"><aside class="jsx-efcc50be384cabc7 "><div class="jsx-efcc50be384cabc7 docs-content-wrapper-sidebar"><div class="jsx-d1843944f2d67b search-panel"><div class="jsx-20d862052e50feff search"><input type="text" placeholder="Search..." value="" class="jsx-20d862052e50feff"/><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="search-icon"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="search-icon-delete"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg></div><ul class="jsx-117e429f22e394dc search-results"></ul><div class="jsx-117e429f22e394dc search-results-none">No results.</div></div><div class="jsx-efcc50be384cabc7 docs-content-toc"><div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_using_the_web_client">使用Web Client</a></li>
<li><a href="#_re_cap_on_vert_x_core_http_client">回顾 Vert.x Core的 HTTP Client</a></li>
<li><a href="#_creating_a_web_client">创建Web Client</a></li>
<li><a href="#_making_requests">发送请求</a>
<ul class="sectlevel2">
<li><a href="#_simple_requests_with_no_body">无请求体的简单请求</a></li>
<li><a href="#_writing_request_bodies">填充请求体</a></li>
<li><a href="#_writing_request_headers">填充请求头</a></li>
<li><a href="#_configure_the_request_to_add_authentication">配置请求以添加身份验证</a></li>
<li><a href="#_reusing_requests">重用请求</a></li>
<li><a href="#_timeouts">超时</a></li>
</ul>
</li>
<li><a href="#_handling_http_responses">处理HTTP响应</a>
<ul class="sectlevel2">
<li><a href="#_decoding_responses">响应解码</a></li>
<li><a href="#response-predicates">响应谓词</a></li>
<li><a href="#_handling_30x_redirections">处理 30x 重定向</a></li>
</ul>
</li>
<li><a href="#_http_response_caching">HTTP 响应缓存</a>
<ul class="sectlevel2">
<li><a href="#_creating_a_caching_web_client">创建一个带缓存的 web client</a></li>
<li><a href="#_configuring_what_is_cached">配置缓存内容</a></li>
<li><a href="#_providing_an_external_store">使用别的储存实现</a></li>
<li><a href="#_handling_private_responses">处理私有响应</a></li>
</ul>
</li>
<li><a href="#_using_https">使用 HTTPS</a></li>
<li><a href="#_sessions_management">会话管理</a>
<ul class="sectlevel2">
<li><a href="#_creating_a_webclientsession">创建一个 WebClientSession</a></li>
<li><a href="#_making_requests_2">发出请求</a></li>
<li><a href="#_setting_session_level_headers">设置会话级别headers</a></li>
</ul>
</li>
<li><a href="#_oauth2_security">OAuth2 安全</a>
<ul class="sectlevel2">
<li><a href="#_creating_an_oauth2_client">创建一个 Oauth2 客户端</a></li>
<li><a href="#_making_requests_3">发送请求</a></li>
<li><a href="#_avoid_expired_tokens">避免过期的 token</a></li>
</ul>
</li>
<li><a href="#_rxjava_3_api">RxJava 3 API</a></li>
<li><a href="#_domain_sockets">域套接字</a></li>
</ul>
</div></div></div></aside><div class="jsx-efcc50be384cabc7 docs-content-sidebar-toggle"><div style="position:relative" class="jsx-efcc50be384cabc7"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-list"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-x"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></div></div><div class="jsx-efcc50be384cabc7 docs-content-inner"><div class="jsx-efcc50be384cabc7 docs-content-metadata"><div class="jsx-efcc50be384cabc7 docs-content-metadata-left"><div class="jsx-efcc50be384cabc7 docs-content-metadata-repo"><div class="jsx-d38685edc31911e0 github-stars"><a href="https://github.com/vert-x3/vertx-web" class="jsx-d38685edc31911e0"><div class="jsx-d38685edc31911e0 icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg></div> <!-- -->null stars</a></div></div><div class="jsx-efcc50be384cabc7"><a href="https://vertx.io/docs/apidocs" class="jsx-efcc50be384cabc7"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path></svg> API</a></div><div class="jsx-efcc50be384cabc7 docs-content-metadata-examples"><a href="https://github.com/vert-x3/vertx-examples/tree/4.x/web-client-examples"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather"><path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"></path></svg> Examples</a></div><div class="jsx-efcc50be384cabc7 docs-content-metadata-edit"><a href="https://github.com/vertx-china/vertx-web-site/tree/master/docs/translation/vertx-web-client/java"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg> 改进翻译</a></div><span class="jsx-efcc50be384cabc7 docs-content-metadata-version"><div class="jsx-6650573c8f14945d dropdown"><a class="jsx-6650573c8f14945d dropdown-title">v4.2.5<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="jsx-6650573c8f14945d dropdown-menu align-right"><a href="/docs/vertx-web-client/java/"><li class="jsx-400ec7965926e858 dropdown-item active has-active-siblings"><span class="jsx-400ec7965926e858 dropdown-check-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg></span>Latest (v<!-- -->4.2.5<!-- -->)</li></a><a href="/docs/4.1.8/vertx-web-client/java/"><li class="jsx-400ec7965926e858 dropdown-item has-active-siblings">v<!-- -->4.1.8</li></a><a href="/docs/4.0.3/vertx-web-client/java/"><li class="jsx-400ec7965926e858 dropdown-item has-active-siblings">v<!-- -->4.0.3</li></a><a href="/docs/3.9.12/vertx-web-client/java/"><li class="jsx-400ec7965926e858 dropdown-item has-active-siblings">v<!-- -->3.9.12</li></a></ul></div></span></div></div><div class="jsx-efcc50be384cabc7"><h1>Vert.x Web Client</h1>

<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Vert.x Web Client 是一个异步的 HTTP 和 HTTP/2 客户端。</p>
</div>
<div class="paragraph">
<p>Web Client使得发送 HTTP 请求以及从 Web 服务器接收 HTTP 响应变得更加便捷，同时提供了额外的高级功能，
例如：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Json body的编码和解码</p>
</li>
<li>
<p>请求和响应泵</p>
</li>
<li>
<p>请求参数的处理</p>
</li>
<li>
<p>统一的错误处理</p>
</li>
<li>
<p>提交表单</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>制作Web Client的目的并非为了替换Vert.x Core中的 <code><a href="../../apidocs/io/vertx/core/http/HttpClient.html">HttpClient</a></code> ，而是基于该客户端，
继承其配置和强大的功能，例如请求连接池（Pooling），HTTP/2的支持，流水线／管线的支持等。
当您需要对 HTTP 请求和响应做细微粒度控制时，
您应当使用 <code><a href="../../apidocs/io/vertx/core/http/HttpClient.html">HttpClient</a></code> 。</p>
</div>
<div class="paragraph">
<p>另外Web Client并未提供 WebSocket API，此时您应当使用 Vert.x Core的 <code><a href="../../apidocs/io/vertx/core/http/HttpClient.html">HttpClient</a></code> 。
目前还无法处理cookies。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_using_the_web_client"><a class="anchor" href="#_using_the_web_client"></a>使用Web Client</h2>
<div class="sectionbody">
<div class="paragraph">
<p>如需使用Vert.x Web Client，请先加入以下依赖，到您的build描述 <em>dependencies</em> 部分 ：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Maven （在您的 <code>pom.xml</code> 文件内）：</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.vertx<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>vertx-web-client<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.2.5<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Gradle （在您的 <code>build.gradle</code> 文件内）：</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">dependencies {
 compile <span class="hljs-string">&#x27;io.vertx:vertx-web-client:4.2.5&#x27;</span>
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_re_cap_on_vert_x_core_http_client"><a class="anchor" href="#_re_cap_on_vert_x_core_http_client"></a>回顾 Vert.x Core的 HTTP Client</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Vert.x Web Client使用Vert.x core的API，如果您对此还不熟悉，熟悉基于 Vert.x core的
<code><a href="../../apidocs/io/vertx/core/http/HttpClient.html">HttpClient</a></code> 基本概念是很有价值的。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creating_a_web_client"><a class="anchor" href="#_creating_a_web_client"></a>创建Web Client</h2>
<div class="sectionbody">
<div class="paragraph">
<p>您可以创建一个缺省 <code><a href="../../apidocs/io/vertx/ext/web/client/WebClient.html">WebClient</a></code> 实例：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">WebClient client = WebClient.create(vertx);</code></pre>
</div>
</div>
<div class="paragraph">
<p>您还可以使用配置项来创建客户端：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">WebClientOptions options = <span class="hljs-keyword">new</span> WebClientOptions()
  .setUserAgent(<span class="hljs-string">&quot;My-App/1.2.3&quot;</span>);
options.setKeepAlive(<span class="hljs-keyword">false</span>);
WebClient client = WebClient.create(vertx, options);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Web Client配置项继承自 <code>HttpClient</code> 配置项，您可以设置其中任何一个项。</p>
</div>
<div class="paragraph">
<p>如果已在程序中创建 <code>HttpClient</code>，可用以下方式复用：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">WebClient client = WebClient.wrap(httpClient);</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">重要</div>
</td>
<td class="content">
在大多数情况下，一个Web Client 应该在应用程序启动时创建，并重用它。
否则，您将失去很多好处，例如连接池。如果实例未正确关闭，则可能会资源泄漏。
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_making_requests"><a class="anchor" href="#_making_requests"></a>发送请求</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_simple_requests_with_no_body"><a class="anchor" href="#_simple_requests_with_no_body"></a>无请求体的简单请求</h3>
<div class="paragraph">
<p>通常，您想发送一个无请求体的HTTP请求。以下是一般情况下的 HTTP GET，
OPTIONS和HEAD 请求</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">WebClient client = WebClient.create(vertx);

<span class="hljs-comment">// 发送GET请求</span>
client
  .get(<span class="hljs-number">8080</span>, <span class="hljs-string">&quot;myserver.mycompany.com&quot;</span>, <span class="hljs-string">&quot;/some-uri&quot;</span>)
  .send()
  .onSuccess(response -&gt; System.out
    .println(<span class="hljs-string">&quot;Received response with status code&quot;</span> + response.statusCode()))
  .onFailure(err -&gt;
    System.out.println(<span class="hljs-string">&quot;Something went wrong &quot;</span> + err.getMessage()));

<span class="hljs-comment">// 发送HEAD请求</span>
client
  .head(<span class="hljs-number">8080</span>, <span class="hljs-string">&quot;myserver.mycompany.com&quot;</span>, <span class="hljs-string">&quot;/some-uri&quot;</span>)
  .send()
  .onSuccess(response -&gt; System.out
    .println(<span class="hljs-string">&quot;Received response with status code&quot;</span> + response.statusCode()))
  .onFailure(err -&gt;
    System.out.println(<span class="hljs-string">&quot;Something went wrong &quot;</span> + err.getMessage()));</code></pre>
</div>
</div>
<div class="paragraph">
<p>您可用以下链式方式向请求URI添加查询参数</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">client
  .get(<span class="hljs-number">8080</span>, <span class="hljs-string">&quot;myserver.mycompany.com&quot;</span>, <span class="hljs-string">&quot;/some-uri&quot;</span>)
  .addQueryParam(<span class="hljs-string">&quot;param&quot;</span>, <span class="hljs-string">&quot;param_value&quot;</span>)
  .send()
  .onSuccess(response -&gt; System.out
    .println(<span class="hljs-string">&quot;Received response with status code&quot;</span> + response.statusCode()))
  .onFailure(err -&gt;
    System.out.println(<span class="hljs-string">&quot;Something went wrong &quot;</span> + err.getMessage()));</code></pre>
</div>
</div>
<div class="paragraph">
<p>在请求URI中的参数将会被预填充</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">HttpRequest&lt;Buffer&gt; request = client
  .get(
    <span class="hljs-number">8080</span>,
    <span class="hljs-string">&quot;myserver.mycompany.com&quot;</span>,
    <span class="hljs-string">&quot;/some-uri?param1=param1_value&amp;param2=param2_value&quot;</span>);

<span class="hljs-comment">// 添加 param3</span>
request.addQueryParam(<span class="hljs-string">&quot;param3&quot;</span>, <span class="hljs-string">&quot;param3_value&quot;</span>);

<span class="hljs-comment">// 覆盖 param2</span>
request.setQueryParam(<span class="hljs-string">&quot;param2&quot;</span>, <span class="hljs-string">&quot;another_param2_value&quot;</span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>设置请求URI将会自动清除已有的查询参数</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">HttpRequest&lt;Buffer&gt; request = client
  .get(<span class="hljs-number">8080</span>, <span class="hljs-string">&quot;myserver.mycompany.com&quot;</span>, <span class="hljs-string">&quot;/some-uri&quot;</span>);

<span class="hljs-comment">// 添加 param1</span>
request.addQueryParam(<span class="hljs-string">&quot;param1&quot;</span>, <span class="hljs-string">&quot;param1_value&quot;</span>);

<span class="hljs-comment">// 覆盖 param1 并添加 param2</span>
request.uri(<span class="hljs-string">&quot;/some-uri?param1=param1_value&amp;param2=param2_value&quot;</span>);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_writing_request_bodies"><a class="anchor" href="#_writing_request_bodies"></a>填充请求体</h3>
<div class="paragraph">
<p>如需要发送请求体，可使用相同的API，并在最后加上 <code>sendXXX</code> 方法，
发送相应的请求体。</p>
</div>
<div class="paragraph">
<p>使用 <code><a href="../../apidocs/io/vertx/ext/web/client/HttpRequest.html#sendBuffer-io.vertx.core.buffer.Buffer-io.vertx.core.Handler-">sendBuffer</a></code> 发送一个buffer body</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">client
  .post(<span class="hljs-number">8080</span>, <span class="hljs-string">&quot;myserver.mycompany.com&quot;</span>, <span class="hljs-string">&quot;/some-uri&quot;</span>)
  .sendBuffer(buffer)
  .onSuccess(res -&gt; {
    <span class="hljs-comment">// OK</span>
  });</code></pre>
</div>
</div>
<div class="paragraph">
<p>发送single buffer很有用，但是通常您不想完全将内容加载到内存中，
因为它可能太大，或者您想同时处理多个请求，或者每个请求只想使用最小的（消耗）。
为此，Web Client可以使用 <code>ReadStream&lt;Buffer&gt;</code> 的（例如
<code><a href="../../apidocs/io/vertx/core/file/AsyncFile.html">AsyncFile</a></code> 是一个ReadStream&lt;Buffer&gt;） <code><a href="../../apidocs/io/vertx/ext/web/client/HttpRequest.html#sendStream-io.vertx.core.streams.ReadStream-io.vertx.core.Handler-">sendStream</a></code> 方法发送。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">client
  .post(<span class="hljs-number">8080</span>, <span class="hljs-string">&quot;myserver.mycompany.com&quot;</span>, <span class="hljs-string">&quot;/some-uri&quot;</span>)
  .sendStream(stream)
  .onSuccess(res -&gt; {
    <span class="hljs-comment">// OK</span>
  });</code></pre>
</div>
</div>
<div class="paragraph">
<p>Web Client负责为您设置泵传输（transfer pump）。
如果流长度未知则使用分块传输（chunked transfer）编码。</p>
</div>
<div class="paragraph">
<p>当您知道流的大小，您应该在HTTP header中设置 <code>content-length</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">fs.open(<span class="hljs-string">&quot;content.txt&quot;</span>, <span class="hljs-keyword">new</span> OpenOptions(), fileRes -&gt; {
  <span class="hljs-keyword">if</span> (fileRes.succeeded()) {
    ReadStream&lt;Buffer&gt; fileStream = fileRes.result();

    String fileLen = <span class="hljs-string">&quot;1024&quot;</span>;

    <span class="hljs-comment">// 用POST方法发送文件</span>
    client
      .post(<span class="hljs-number">8080</span>, <span class="hljs-string">&quot;myserver.mycompany.com&quot;</span>, <span class="hljs-string">&quot;/some-uri&quot;</span>)
      .putHeader(<span class="hljs-string">&quot;content-length&quot;</span>, fileLen)
      .sendStream(fileStream)
      .onSuccess(res -&gt; {
        <span class="hljs-comment">// OK</span>
      })
    ;
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>这个POST方法不会被分块传输。</p>
</div>
<div class="sect3">
<h4 id="_json_bodies"><a class="anchor" href="#_json_bodies"></a>JSON bodies</h4>
<div class="paragraph">
<p>有时您需要发送JSON body请求， 可使用 <code><a href="../../apidocs/io/vertx/ext/web/client/HttpRequest.html#sendJsonObject-io.vertx.core.json.JsonObject-io.vertx.core.Handler-">sendJsonObject</a></code>
发送一个 <code><a href="../../apidocs/io/vertx/core/json/JsonObject.html">JsonObject</a></code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">client
  .post(<span class="hljs-number">8080</span>, <span class="hljs-string">&quot;myserver.mycompany.com&quot;</span>, <span class="hljs-string">&quot;/some-uri&quot;</span>)
  .sendJsonObject(
    <span class="hljs-keyword">new</span> JsonObject()
      .put(<span class="hljs-string">&quot;firstName&quot;</span>, <span class="hljs-string">&quot;Dale&quot;</span>)
      .put(<span class="hljs-string">&quot;lastName&quot;</span>, <span class="hljs-string">&quot;Cooper&quot;</span>))
  .onSuccess(res -&gt; {
    <span class="hljs-comment">// OK</span>
  });</code></pre>
</div>
</div>
<div class="paragraph">
<p>在Java，Groovy以及Kotlin中，您可以使用 <code><a href="../../apidocs/io/vertx/ext/web/client/HttpRequest.html#sendJson-java.lang.Object-io.vertx.core.Handler-">sendJson</a></code> 方法，
它使用 <code><a href="../../apidocs/io/vertx/core/json/Json.html#encode-java.lang.Object-">Json.encode</a></code> 方法映射一个 POJO（Plain Old Java Object）
到一个 Json 对象</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">client
  .post(<span class="hljs-number">8080</span>, <span class="hljs-string">&quot;myserver.mycompany.com&quot;</span>, <span class="hljs-string">&quot;/some-uri&quot;</span>)
  .sendJson(<span class="hljs-keyword">new</span> User(<span class="hljs-string">&quot;Dale&quot;</span>, <span class="hljs-string">&quot;Cooper&quot;</span>))
  .onSuccess(res -&gt; {
    <span class="hljs-comment">// OK</span>
  });</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">注意</div>
</td>
<td class="content">
<code><a href="../../apidocs/io/vertx/core/json/Json.html#encode-java.lang.Object-">Json.encode</a></code> 方法使用Jackson mapper将 POJO 编码成
JSON。
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_form_submissions"><a class="anchor" href="#_form_submissions"></a>表单提交</h4>
<div class="paragraph">
<p>您可以使用 <code><a href="../../apidocs/io/vertx/ext/web/client/HttpRequest.html#sendForm-io.vertx.core.MultiMap-io.vertx.core.Handler-">sendForm</a></code>
的变体发送http表单提交。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">MultiMap form = MultiMap.caseInsensitiveMultiMap();
form.set(<span class="hljs-string">&quot;firstName&quot;</span>, <span class="hljs-string">&quot;Dale&quot;</span>);
form.set(<span class="hljs-string">&quot;lastName&quot;</span>, <span class="hljs-string">&quot;Cooper&quot;</span>);

<span class="hljs-comment">// 用URL编码方式提交表单</span>
client
  .post(<span class="hljs-number">8080</span>, <span class="hljs-string">&quot;myserver.mycompany.com&quot;</span>, <span class="hljs-string">&quot;/some-uri&quot;</span>)
  .sendForm(form)
  .onSuccess(res -&gt; {
    <span class="hljs-comment">// OK</span>
  });</code></pre>
</div>
</div>
<div class="paragraph">
<p>默认情况下，提交表单header中的 <code>content-type</code> 属性值为 <code>application/x-www-form-urlencoded</code>，
您还可将其替换为 <code>multipart/form-data</code>：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">MultiMap form = MultiMap.caseInsensitiveMultiMap();
form.set(<span class="hljs-string">&quot;firstName&quot;</span>, <span class="hljs-string">&quot;Dale&quot;</span>);
form.set(<span class="hljs-string">&quot;lastName&quot;</span>, <span class="hljs-string">&quot;Cooper&quot;</span>);

<span class="hljs-comment">// 提交multipart form表单</span>
client
  .post(<span class="hljs-number">8080</span>, <span class="hljs-string">&quot;myserver.mycompany.com&quot;</span>, <span class="hljs-string">&quot;/some-uri&quot;</span>)
  .putHeader(<span class="hljs-string">&quot;content-type&quot;</span>, <span class="hljs-string">&quot;multipart/form-data&quot;</span>)
  .sendForm(form)
  .onSuccess(res -&gt; {
    <span class="hljs-comment">// OK</span>
  });</code></pre>
</div>
</div>
<div class="paragraph">
<p>如果您想上传文件的同时发送属性，您可以创建一个 <code><a href="../../apidocs/io/vertx/ext/web/multipart/MultipartForm.html">MultipartForm</a></code> ，然后使用
<code><a href="../../apidocs/io/vertx/ext/web/client/HttpRequest.html#sendMultipartForm-io.vertx.ext.web.multipart.MultipartForm-io.vertx.core.Handler-">sendMultipartForm</a></code> 。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">MultipartForm form = MultipartForm.create()
  .attribute(<span class="hljs-string">&quot;imageDescription&quot;</span>, <span class="hljs-string">&quot;a very nice image&quot;</span>)
  .binaryFileUpload(
    <span class="hljs-string">&quot;imageFile&quot;</span>,
    <span class="hljs-string">&quot;image.jpg&quot;</span>,
    <span class="hljs-string">&quot;/path/to/image&quot;</span>,
    <span class="hljs-string">&quot;image/jpeg&quot;</span>);

<span class="hljs-comment">// 提交multipart form表单</span>
client
  .post(<span class="hljs-number">8080</span>, <span class="hljs-string">&quot;myserver.mycompany.com&quot;</span>, <span class="hljs-string">&quot;/some-uri&quot;</span>)
  .sendMultipartForm(form)
  .onSuccess(res -&gt; {
    <span class="hljs-comment">// OK</span>
  });</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_writing_request_headers"><a class="anchor" href="#_writing_request_headers"></a>填充请求头</h3>
<div class="paragraph">
<p>您可使用headers的multi-map 填充请求头：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">HttpRequest&lt;Buffer&gt; request = client
  .get(<span class="hljs-number">8080</span>, <span class="hljs-string">&quot;myserver.mycompany.com&quot;</span>, <span class="hljs-string">&quot;/some-uri&quot;</span>);

MultiMap headers = request.headers();
headers.set(<span class="hljs-string">&quot;content-type&quot;</span>, <span class="hljs-string">&quot;application/json&quot;</span>);
headers.set(<span class="hljs-string">&quot;other-header&quot;</span>, <span class="hljs-string">&quot;foo&quot;</span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>此处 Headers 是一个 <code><a href="../../apidocs/io/vertx/core/MultiMap.html">MultiMap</a></code> 实例，提供了添加、
设置以及删除头属性操作的入口。HTTP headers允许某个特定的key有多个值。</p>
</div>
<div class="paragraph">
<p>您还可使用 putHeader 写入headers属性：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">HttpRequest&lt;Buffer&gt; request = client
  .get(<span class="hljs-number">8080</span>, <span class="hljs-string">&quot;myserver.mycompany.com&quot;</span>, <span class="hljs-string">&quot;/some-uri&quot;</span>);

request.putHeader(<span class="hljs-string">&quot;content-type&quot;</span>, <span class="hljs-string">&quot;application/json&quot;</span>);
request.putHeader(<span class="hljs-string">&quot;other-header&quot;</span>, <span class="hljs-string">&quot;foo&quot;</span>);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_configure_the_request_to_add_authentication"><a class="anchor" href="#_configure_the_request_to_add_authentication"></a>配置请求以添加身份验证</h3>
<div class="paragraph">
<p>可以通过设置正确的 headers 来手动执行身份验证，或我们的预定义方法
（我们强烈建议启用HTTPS，尤其是对于经过身份验证的请求）：</p>
</div>
<div class="paragraph">
<p>在基本的HTTP身份验证中，请求包含以下形式的表单header字段 <code>Authorization: Basic &lt;credentials&gt;</code> ，
credentials是base64编码的，由冒号连接的id和密码。</p>
</div>
<div class="paragraph">
<p>您可以像下面这样配置请求以添加基本访问验证：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">HttpRequest&lt;Buffer&gt; request = client
  .get(<span class="hljs-number">8080</span>, <span class="hljs-string">&quot;myserver.mycompany.com&quot;</span>, <span class="hljs-string">&quot;/some-uri&quot;</span>)
  .authentication(<span class="hljs-keyword">new</span> UsernamePasswordCredentials(<span class="hljs-string">&quot;myid&quot;</span>, <span class="hljs-string">&quot;mypassword&quot;</span>));</code></pre>
</div>
</div>
<div class="paragraph">
<p>在OAuth 2.0种，请求包含以下形式的表单header字段 <code>Authorization: Bearer &lt;bearerToken&gt;</code> ，bearerToken是授权服务器发布的，
用于访问受保护资源的不记名令牌。</p>
</div>
<div class="paragraph">
<p>您可以像下面这样配置请求，以添加bearer token访问验证：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">HttpRequest&lt;Buffer&gt; request = client
  .get(<span class="hljs-number">8080</span>, <span class="hljs-string">&quot;myserver.mycompany.com&quot;</span>, <span class="hljs-string">&quot;/some-uri&quot;</span>)
  .authentication(<span class="hljs-keyword">new</span> TokenCredentials(<span class="hljs-string">&quot;myBearerToken&quot;</span>));</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_reusing_requests"><a class="anchor" href="#_reusing_requests"></a>重用请求</h3>
<div class="paragraph">
<p><code><a href="../../apidocs/io/vertx/ext/web/client/HttpRequest.html#send-io.vertx.core.Handler-">send</a></code> 方法可被安全的重复多次调用，
这使得它可以很容易的配置以及重用 <code><a href="../../apidocs/io/vertx/ext/web/client/HttpRequest.html">HttpRequest</a></code> 对象</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">HttpRequest&lt;Buffer&gt; get = client
  .get(<span class="hljs-number">8080</span>, <span class="hljs-string">&quot;myserver.mycompany.com&quot;</span>, <span class="hljs-string">&quot;/some-uri&quot;</span>);

get
  .send()
  .onSuccess(res -&gt; {
    <span class="hljs-comment">// OK</span>
  });

<span class="hljs-comment">// 又一些请求</span>
get
  .send()
  .onSuccess(res -&gt; {
    <span class="hljs-comment">// OK</span>
  });</code></pre>
</div>
</div>
<div class="paragraph">
<p>不过要当心 <code><a href="../../apidocs/io/vertx/ext/web/client/HttpRequest.html">HttpRequest</a></code> 实例是可变的（mutable）.
因此，您应该在修改已被缓存了的实例之前，使用 <code><a href="../../apidocs/io/vertx/ext/web/client/HttpRequest.html#copy--">copy</a></code> 方法。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">HttpRequest&lt;Buffer&gt; get = client
  .get(<span class="hljs-number">8080</span>, <span class="hljs-string">&quot;myserver.mycompany.com&quot;</span>, <span class="hljs-string">&quot;/some-uri&quot;</span>);

get
  .send()
  .onSuccess(res -&gt; {
    <span class="hljs-comment">// OK</span>
  });

<span class="hljs-comment">// &quot;get&quot; 请求实例保持未修改</span>
get
  .copy()
  .putHeader(<span class="hljs-string">&quot;a-header&quot;</span>, <span class="hljs-string">&quot;with-some-value&quot;</span>)
  .send()
  .onSuccess(res -&gt; {
    <span class="hljs-comment">// OK</span>
  });</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_timeouts"><a class="anchor" href="#_timeouts"></a>超时</h3>
<div class="paragraph">
<p>您可通过 <code><a href="../../apidocs/io/vertx/ext/web/client/HttpRequest.html#timeout-long-">timeout</a></code> 。方法设置超时时间。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">client
  .get(<span class="hljs-number">8080</span>, <span class="hljs-string">&quot;myserver.mycompany.com&quot;</span>, <span class="hljs-string">&quot;/some-uri&quot;</span>)
  .timeout(<span class="hljs-number">5000</span>)
  .send()
  .onSuccess(res -&gt; {
    <span class="hljs-comment">// OK</span>
  })
  .onFailure(err -&gt; {
    <span class="hljs-comment">// 当是由java.util.concurrent.TimeoutException导致时，或许是一个超时</span>
  });</code></pre>
</div>
</div>
<div class="paragraph">
<p>若请求在设定时间内没有返回任何数据，
则一个异常将会传递给响应处理器。</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_handling_http_responses"><a class="anchor" href="#_handling_http_responses"></a>处理HTTP响应</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Web Client 请求发送之后，您总是在单个 <code><a href="../../apidocs/io/vertx/ext/web/client/HttpResponse.html">HttpResponse</a></code> 中处理单个异步结果 。</p>
</div>
<div class="paragraph">
<p>当响应被成功接收到之后，相应的回调函数将会被调用。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">client
  .get(<span class="hljs-number">8080</span>, <span class="hljs-string">&quot;myserver.mycompany.com&quot;</span>, <span class="hljs-string">&quot;/some-uri&quot;</span>)
  .send()
  .onSuccess(res -&gt;
    System.out.println(<span class="hljs-string">&quot;Received response with status code&quot;</span> + res.statusCode()))
  .onFailure(err -&gt;
    System.out.println(<span class="hljs-string">&quot;Something went wrong &quot;</span> + err.getMessage()));</code></pre>
</div>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<div class="title">小心</div>
</td>
<td class="content">
<div class="paragraph">
<p>默认状况下，仅当在网络级别发生错误时，Vert.x Web Client 请求才以错误结尾。
换言之，<code>404 Not Found</code> 响应或错误 content type 的响应，<strong>不</strong> 被视为失败。
如果您想要 Web Client 自动进行合理性检，可以使用 <a href="#response-predicates">响应谓词</a> 。</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">警告</div>
</td>
<td class="content">
响应会被完全缓冲，请使用 <code><a href="../../apidocs/io/vertx/ext/web/codec/BodyCodec.html#pipe-io.vertx.core.streams.WriteStream-">BodyCodec.pipe</a></code>
将响应接入写入流。
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_decoding_responses"><a class="anchor" href="#_decoding_responses"></a>响应解码</h3>
<div class="paragraph">
<p>缺省状况下，Web Client提供一个response body作为 <code>Buffer</code> ，
并且未运用任何解码器。</p>
</div>
<div class="paragraph">
<p>可以使用 <code><a href="../../apidocs/io/vertx/ext/web/codec/BodyCodec.html">BodyCodec</a></code> 实现以下自定义response body解码：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>文本字符串</p>
</li>
<li>
<p>Json 对象</p>
</li>
<li>
<p>Json 映射的 POJO</p>
</li>
<li>
<p><code><a href="../../apidocs/io/vertx/core/streams/WriteStream.html">WriteStream</a></code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>一个body解码器可以将任意二进制数据流解码为特定的对象实例，
从而节省了您自己在响应处理器里解码的步骤。</p>
</div>
<div class="paragraph">
<p>使用 <code><a href="../../apidocs/io/vertx/ext/web/codec/BodyCodec.html#jsonObject--">BodyCodec.jsonObject</a></code> 解码一个 Json 对象：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">client
  .get(<span class="hljs-number">8080</span>, <span class="hljs-string">&quot;myserver.mycompany.com&quot;</span>, <span class="hljs-string">&quot;/some-uri&quot;</span>)
  .as(BodyCodec.jsonObject())
  .send()
  .onSuccess(res -&gt; {
    JsonObject body = res.body();

    System.out.println(
      <span class="hljs-string">&quot;Received response with status code&quot;</span> +
        res.statusCode() +
        <span class="hljs-string">&quot; with body &quot;</span> +
        body);
  })
  .onFailure(err -&gt;
    System.out.println(<span class="hljs-string">&quot;Something went wrong &quot;</span> + err.getMessage()));</code></pre>
</div>
</div>
<div class="paragraph">
<p>在Java，Groovy以及Kotlin中，可以自定义Json映射POJO解码：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">client
  .get(<span class="hljs-number">8080</span>, <span class="hljs-string">&quot;myserver.mycompany.com&quot;</span>, <span class="hljs-string">&quot;/some-uri&quot;</span>)
  .as(BodyCodec.json(User.class))
  .send()
  .onSuccess(res -&gt; {
    User user = res.body();

    System.out.println(
      <span class="hljs-string">&quot;Received response with status code&quot;</span> +
        res.statusCode() +
        <span class="hljs-string">&quot; with body &quot;</span> +
        user.getFirstName() +
        <span class="hljs-string">&quot; &quot;</span> +
        user.getLastName());
  })
  .onFailure(err -&gt;
    System.out.println(<span class="hljs-string">&quot;Something went wrong &quot;</span> + err.getMessage()));</code></pre>
</div>
</div>
<div class="paragraph">
<p>如果返回数据非常大，则应该使用 <code><a href="../../apidocs/io/vertx/ext/web/codec/BodyCodec.html#pipe-io.vertx.core.streams.WriteStream-">BodyCodec.pipe</a></code> 方法。
这个编码器将响应缓存泵入到  <code><a href="../../apidocs/io/vertx/core/streams/WriteStream.html">WriteStream</a></code> 中，
并且在异步结果响应中，发出操作成功或失败的信号。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">client
  .get(<span class="hljs-number">8080</span>, <span class="hljs-string">&quot;myserver.mycompany.com&quot;</span>, <span class="hljs-string">&quot;/some-uri&quot;</span>)
  .as(BodyCodec.pipe(writeStream))
  .send()
  .onSuccess(res -&gt;
    System.out.println(<span class="hljs-string">&quot;Received response with status code&quot;</span> + res.statusCode()))
  .onFailure(err -&gt;
    System.out.println(<span class="hljs-string">&quot;Something went wrong &quot;</span> + err.getMessage()));</code></pre>
</div>
</div>
<div class="paragraph">
<p>经常会看到API返回一个JSON对象流。例如，Twitter API可以提供一个推文回馈。
处理这个情况，您可以使用 <code><a href="../../apidocs/io/vertx/ext/web/codec/BodyCodec.html#jsonStream-io.vertx.core.parsetools.JsonParser-">BodyCodec.jsonStream</a></code>。
传递一个JSON解析器，该解析器从HTTP响应中开始读取JSON流。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">JsonParser parser = JsonParser.newParser().objectValueMode();
parser.handler(event -&gt; {
  JsonObject object = event.objectValue();
  System.out.println(<span class="hljs-string">&quot;Got &quot;</span> + object.encode());
});
client
  .get(<span class="hljs-number">8080</span>, <span class="hljs-string">&quot;myserver.mycompany.com&quot;</span>, <span class="hljs-string">&quot;/some-uri&quot;</span>)
  .as(BodyCodec.jsonStream(parser))
  .send()
  .onSuccess(res -&gt;
    System.out.println(<span class="hljs-string">&quot;Received response with status code&quot;</span> + res.statusCode()))
  .onFailure(err -&gt;
    System.out.println(<span class="hljs-string">&quot;Something went wrong &quot;</span> + err.getMessage()));</code></pre>
</div>
</div>
<div class="paragraph">
<p>最后，如您对响应结果不感兴趣，可用 <code><a href="../../apidocs/io/vertx/ext/web/codec/BodyCodec.html#none--">BodyCodec.none</a></code>
简单的丢弃响应体。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">client
  .get(<span class="hljs-number">8080</span>, <span class="hljs-string">&quot;myserver.mycompany.com&quot;</span>, <span class="hljs-string">&quot;/some-uri&quot;</span>)
  .as(BodyCodec.none())
  .send()
  .onSuccess(res -&gt;
    System.out.println(<span class="hljs-string">&quot;Received response with status code&quot;</span> + res.statusCode()))
  .onFailure(err -&gt;
    System.out.println(<span class="hljs-string">&quot;Something went wrong &quot;</span> + err.getMessage()));</code></pre>
</div>
</div>
<div class="paragraph">
<p>若无法预知响应内容类型，您依旧可以在获取结果之后，用 <code>bodyAsXXX()</code>
方法将其转换成指定的类型</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">client
  .get(<span class="hljs-number">8080</span>, <span class="hljs-string">&quot;myserver.mycompany.com&quot;</span>, <span class="hljs-string">&quot;/some-uri&quot;</span>)
  .send()
  .onSuccess(res -&gt; {
    <span class="hljs-comment">// 将结果解码为Json对象</span>
    JsonObject body = res.bodyAsJsonObject();

    System.out.println(
      <span class="hljs-string">&quot;Received response with status code&quot;</span> +
        res.statusCode() +
        <span class="hljs-string">&quot; with body &quot;</span> +
        body);
  })
  .onFailure(err -&gt;
    System.out.println(<span class="hljs-string">&quot;Something went wrong &quot;</span> + err.getMessage()));</code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">警告</div>
</td>
<td class="content">
这种方式仅对响应结果为buffer有效。
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="response-predicates"><a class="anchor" href="#response-predicates"></a>响应谓词</h3>
<div class="paragraph">
<p>默认的，仅当在网络级别发生错误时，Vert.x Web Client请求才以错误结尾。</p>
</div>
<div class="paragraph">
<p>换言之， 您必须在收到响应后手动执行健全性检查：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">client
  .get(<span class="hljs-number">8080</span>, <span class="hljs-string">&quot;myserver.mycompany.com&quot;</span>, <span class="hljs-string">&quot;/some-uri&quot;</span>)
  .send()
  .onSuccess(res -&gt; {
    <span class="hljs-keyword">if</span> (
      res.statusCode() == <span class="hljs-number">200</span> &amp;&amp;
        res.getHeader(<span class="hljs-string">&quot;content-type&quot;</span>).equals(<span class="hljs-string">&quot;application/json&quot;</span>)) {
      <span class="hljs-comment">// 将结果解码为Json对象</span>
      JsonObject body = res.bodyAsJsonObject();

      System.out.println(
        <span class="hljs-string">&quot;Received response with status code&quot;</span> +
          res.statusCode() +
          <span class="hljs-string">&quot; with body &quot;</span> +
          body);
    } <span class="hljs-keyword">else</span> {
      System.out.println(<span class="hljs-string">&quot;Something went wrong &quot;</span> + res.statusCode());
    }
  })
  .onFailure(err -&gt;
    System.out.println(<span class="hljs-string">&quot;Something went wrong &quot;</span> + err.getMessage()));</code></pre>
</div>
</div>
<div class="paragraph">
<p>您可以灵活的替换成清晰简明的 <em>response predicates</em> 。</p>
</div>
<div class="paragraph">
<p><code><a href="../../apidocs/io/vertx/ext/web/client/predicate/ResponsePredicate.html">Response predicates</a></code>
当响应不符合条件会使请求失败。</p>
</div>
<div class="paragraph">
<p>Web Client附带了一组开箱即用的谓词，可供使用：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">client
  .get(<span class="hljs-number">8080</span>, <span class="hljs-string">&quot;myserver.mycompany.com&quot;</span>, <span class="hljs-string">&quot;/some-uri&quot;</span>)
  .expect(ResponsePredicate.SC_SUCCESS)
  .expect(ResponsePredicate.JSON)
  .send()
  .onSuccess(res -&gt; {
    <span class="hljs-comment">// 安全地将body解码为json对象</span>
    JsonObject body = res.bodyAsJsonObject();
    System.out.println(
      <span class="hljs-string">&quot;Received response with status code&quot;</span> +
        res.statusCode() +
        <span class="hljs-string">&quot; with body &quot;</span> +
        body);
  })
  .onFailure(err -&gt;
    System.out.println(<span class="hljs-string">&quot;Something went wrong &quot;</span> + err.getMessage()));</code></pre>
</div>
</div>
<div class="paragraph">
<p>当现有谓词不满足您的需求时，您还可以创建自定义谓词：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">Function&lt;HttpResponse&lt;Void&gt;, ResponsePredicateResult&gt; methodsPredicate =
  resp -&gt; {
    String methods = resp.getHeader(<span class="hljs-string">&quot;Access-Control-Allow-Methods&quot;</span>);
    <span class="hljs-keyword">if</span> (methods != <span class="hljs-keyword">null</span>) {
      <span class="hljs-keyword">if</span> (methods.contains(<span class="hljs-string">&quot;POST&quot;</span>)) {
        <span class="hljs-keyword">return</span> ResponsePredicateResult.success();
      }
    }
    <span class="hljs-keyword">return</span> ResponsePredicateResult.failure(<span class="hljs-string">&quot;Does not work&quot;</span>);
  };

<span class="hljs-comment">// 发送预检CORS请求</span>
client
  .request(
    HttpMethod.OPTIONS,
    <span class="hljs-number">8080</span>,
    <span class="hljs-string">&quot;myserver.mycompany.com&quot;</span>,
    <span class="hljs-string">&quot;/some-uri&quot;</span>)
  .putHeader(<span class="hljs-string">&quot;Origin&quot;</span>, <span class="hljs-string">&quot;Server-b.com&quot;</span>)
  .putHeader(<span class="hljs-string">&quot;Access-Control-Request-Method&quot;</span>, <span class="hljs-string">&quot;POST&quot;</span>)
  .expect(methodsPredicate)
  .send()
  .onSuccess(res -&gt; {
    <span class="hljs-comment">// 立即处理POST请求</span>
  })
  .onFailure(err -&gt;
    System.out.println(<span class="hljs-string">&quot;Something went wrong &quot;</span> + err.getMessage()));</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">提示</div>
</td>
<td class="content">
响应谓词是在收到响应体 <em>之前</em> 对其进行评估。 因此，
您无法在谓词测试函数中检查response body。
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_predefined_predicates"><a class="anchor" href="#_predefined_predicates"></a>预定义谓词</h4>
<div class="paragraph">
<p>为了方便起见，Web Client附带了一些常见用例的谓词。</p>
</div>
<div class="paragraph">
<p>对于状态码，例如 <code><a href="../../apidocs/io/vertx/ext/web/client/predicate/ResponsePredicate.html#SC_SUCCESS">ResponsePredicate.SC_SUCCESS</a></code> ，
验证响应具有 <code>2xx</code> 代码，您也可以自定义创建一个</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">client
  .get(<span class="hljs-number">8080</span>, <span class="hljs-string">&quot;myserver.mycompany.com&quot;</span>, <span class="hljs-string">&quot;/some-uri&quot;</span>)
  .expect(ResponsePredicate.status(<span class="hljs-number">200</span>, <span class="hljs-number">202</span>))
  .send()
  .onSuccess(res -&gt; {
    <span class="hljs-comment">// ....</span>
  });</code></pre>
</div>
</div>
<div class="paragraph">
<p>对于content types，例如 <code><a href="../../apidocs/io/vertx/ext/web/client/predicate/ResponsePredicate.html#JSON">ResponsePredicate.JSON</a></code> ，
验证响应具有JSON数据，您也可以自定义创建一个</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">client
  .get(<span class="hljs-number">8080</span>, <span class="hljs-string">&quot;myserver.mycompany.com&quot;</span>, <span class="hljs-string">&quot;/some-uri&quot;</span>)
  .expect(ResponsePredicate.contentType(<span class="hljs-string">&quot;some/content-type&quot;</span>))
  .send()
  .onSuccess(res -&gt; {
    <span class="hljs-comment">// ....</span>
  });</code></pre>
</div>
</div>
<div class="paragraph">
<p>请参考 <code><a href="../../apidocs/io/vertx/ext/web/client/predicate/ResponsePredicate.html">ResponsePredicate</a></code> 文档获取预定义谓词的完整列表。</p>
</div>
</div>
<div class="sect3">
<h4 id="_creating_custom_failures"><a class="anchor" href="#_creating_custom_failures"></a>创建自定义失败</h4>
<div class="paragraph">
<p>默认情况下，响应谓词（包括预定义的）使用默认的错误转换器，
它将丢弃body并传递一条简单消息。您可以通过自定义异常类来替换错误转换器：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">ResponsePredicate predicate = ResponsePredicate.create(
  ResponsePredicate.SC_SUCCESS,
  result -&gt; <span class="hljs-keyword">new</span> MyCustomException(result.message()));</code></pre>
</div>
</div>
<div class="paragraph">
<p>许多Web API在错误响应中提供了详细信息。
例如， <a href="https://developer.marvel.com/docs">Marvel API</a> 使用此JSON对象格式：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">{
 <span class="hljs-string">&quot;code&quot;</span>: <span class="hljs-string">&quot;InvalidCredentials&quot;</span>,
 <span class="hljs-string">&quot;message&quot;</span>: <span class="hljs-string">&quot;The passed API key is invalid.&quot;</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>为避免丢失此信息，在错误发生之前，
可以在转换器被调用之前等待响应body被完全接收：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">ErrorConverter converter = ErrorConverter.createFullBody(result -&gt; {

  <span class="hljs-comment">// 响应body被完全接收之后调用</span>
  HttpResponse&lt;Buffer&gt; response = result.response();

  <span class="hljs-keyword">if</span> (response
    .getHeader(<span class="hljs-string">&quot;content-type&quot;</span>)
    .equals(<span class="hljs-string">&quot;application/json&quot;</span>)) {

    <span class="hljs-comment">// 错误body是JSON数据</span>
    JsonObject body = response.bodyAsJsonObject();

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> MyCustomException(
      body.getString(<span class="hljs-string">&quot;code&quot;</span>),
      body.getString(<span class="hljs-string">&quot;message&quot;</span>));
  }

  <span class="hljs-comment">// 返回自定义的消息</span>
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> MyCustomException(result.message());
});

ResponsePredicate predicate = ResponsePredicate
  .create(ResponsePredicate.SC_SUCCESS, converter);</code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">警告</div>
</td>
<td class="content">
在Java中，当捕获了stack trace，
创建异常可能会带来性能开销，所以您可能想要创建不捕获stack trace的异常。默认情况下，
报告异常使用不捕获stack trace的异常。
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_handling_30x_redirections"><a class="anchor" href="#_handling_30x_redirections"></a>处理 30x 重定向</h3>
<div class="paragraph">
<p>默认情况下，客户端跟随着重定向，您可以在 <code><a href="../../apidocs/io/vertx/ext/web/client/WebClientOptions.html">WebClientOptions</a></code> 配置默认行为：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">WebClient client = WebClient
  .create(vertx, <span class="hljs-keyword">new</span> WebClientOptions().setFollowRedirects(<span class="hljs-keyword">false</span>));</code></pre>
</div>
</div>
<div class="paragraph">
<p>客户端最多可以跟随 <code>16</code> 个请求重定向，可以在相同的配置中进行更改：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">WebClient client = WebClient
  .create(vertx, <span class="hljs-keyword">new</span> WebClientOptions().setMaxRedirects(<span class="hljs-number">5</span>));</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">注意</div>
</td>
<td class="content">
出于安全原因，客户端不会使用除了GET或HEAD的方法来跟随着重定向请求
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_http_response_caching"><a class="anchor" href="#_http_response_caching"></a>HTTP 响应缓存</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Vert.x web 提供了一个可以缓存 HTTP 响应的实现， 您可以创建一个 <code><a href="../../apidocs/io/vertx/ext/web/client/CachingWebClient.html">CachingWebClient</a></code> 实例。</p>
</div>
<div class="sect2">
<h3 id="_creating_a_caching_web_client"><a class="anchor" href="#_creating_a_caching_web_client"></a>创建一个带缓存的 web client</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">WebClient client = WebClient.create(vertx);
WebClient cachingWebClient = CachingWebClient.create(client);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_configuring_what_is_cached"><a class="anchor" href="#_configuring_what_is_cached"></a>配置缓存内容</h3>
<div class="paragraph">
<p>默认情况下，带缓存的 web client 只会缓存通过 <code>GET</code> 方法返回的状态值为 <code>200</code>, <code>301</code>, 或 <code>404</code> 的响应内容。
带有 <code>Vary</code> 头部的响应默认情况下也不会被缓存。</p>
</div>
<div class="paragraph">
<p>您可以在创建客户端时，通过传入一个 <code><a href="../../apidocs/io/vertx/ext/web/client/CachingWebClientOptions.html">CachingWebClientOptions</a></code> 实例来配置缓存策略。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">CachingWebClientOptions options = <span class="hljs-keyword">new</span> CachingWebClientOptions()
  .addCachedMethod(HttpMethod.HEAD)
  .removeCachedStatusCode(<span class="hljs-number">301</span>)
  .setEnableVaryCaching(<span class="hljs-keyword">true</span>);

WebClient client = WebClient.create(vertx);
WebClient cachingWebClient = CachingWebClient.create(client, options);</code></pre>
</div>
</div>
<div class="paragraph">
<p>如果响应的 <code>Cache-Control</code> 头部内容为 <code>private</code> 策略，那么该响应不会被缓存，除非
该 web client 是一个 <code><a href="../../apidocs/io/vertx/ext/web/client/WebClientSession.html">WebClientSession</a></code> 的实例。 请参阅 <a href="#_handling_private_responses">处理私有响应</a> 。</p>
</div>
</div>
<div class="sect2">
<h3 id="_providing_an_external_store"><a class="anchor" href="#_providing_an_external_store"></a>使用别的储存实现</h3>
<div class="paragraph">
<p>默认情况下， 带缓存的客户端使用一个本地的 <code>Map</code> 来保存响应。 您也可以使用您自己的储存实现类来保存响应内容。
您需要自己实现 <code><a href="../../apidocs/io/vertx/ext/web/client/spi/CacheStore.html">CacheStore</a></code> 接口，并且在创建客户端时指定使用您的实现类。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">WebClient client = WebClient.create(vertx);
CacheStore store = <span class="hljs-keyword">new</span> NoOpCacheStore(); <span class="hljs-comment">// or any store you like</span>
WebClient cachingWebClient = CachingWebClient.create(client, store);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_handling_private_responses"><a class="anchor" href="#_handling_private_responses"></a>处理私有响应</h3>
<div class="paragraph">
<p>为了缓存私有响应， <code><a href="../../apidocs/io/vertx/ext/web/client/CachingWebClient.html">CachingWebClient</a></code> 可以与
<code><a href="../../apidocs/io/vertx/ext/web/client/WebClientSession.html">WebClientSession</a></code> 结合。执行以下代码，那些在 <code>Cache-Control</code> 头部中指定为 <code>public</code> 缓存策略的
响应，会被缓存到和 web client 一起创建的 <code><a href="../../apidocs/io/vertx/ext/web/client/spi/CacheStore.html">CacheStore</a></code>
中。 私有响应，也就是 <code>Cache-Control</code> 头部中指定为 <code>private</code> 缓存策略的响应，会被缓存到
会话中，以确保缓存的响应不会被泄露给其他用户（会话）。</p>
</div>
<div class="paragraph">
<p>要创建一个可以缓存私有响应的客户端，需要传入一个 <code><a href="../../apidocs/io/vertx/ext/web/client/CachingWebClient.html">CachingWebClient</a></code>
给 <code><a href="../../apidocs/io/vertx/ext/web/client/WebClientSession.html">WebClientSession</a></code>。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">WebClient client = WebClient.create(vertx);
WebClient cachingWebClient = CachingWebClient.create(client);
WebClient sessionClient = WebClientSession.create(cachingWebClient);</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_using_https"><a class="anchor" href="#_using_https"></a>使用 HTTPS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Vert.x Web Client 可以用跟 Vert.x <code><a href="../../apidocs/io/vertx/core/http/HttpClient.html">HttpClient</a></code> 完全一样的方式配置使用HTTPS。</p>
</div>
<div class="paragraph">
<p>您可以指定每个请求的行为</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">client
  .get(<span class="hljs-number">443</span>, <span class="hljs-string">&quot;myserver.mycompany.com&quot;</span>, <span class="hljs-string">&quot;/some-uri&quot;</span>)
  .ssl(<span class="hljs-keyword">true</span>)
  .send()
  .onSuccess(res -&gt;
    System.out.println(<span class="hljs-string">&quot;Received response with status code&quot;</span> + res.statusCode()))
  .onFailure(err -&gt;
    System.out.println(<span class="hljs-string">&quot;Something went wrong &quot;</span> + err.getMessage()));</code></pre>
</div>
</div>
<div class="paragraph">
<p>或使用带有绝对URI参数的创建方法</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">client
  .getAbs(<span class="hljs-string">&quot;https://myserver.mycompany.com:4043/some-uri&quot;</span>)
  .send()
  .onSuccess(res -&gt;
    System.out.println(<span class="hljs-string">&quot;Received response with status code&quot;</span> + res.statusCode()))
  .onFailure(err -&gt;
    System.out.println(<span class="hljs-string">&quot;Something went wrong &quot;</span> + err.getMessage()));</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_sessions_management"><a class="anchor" href="#_sessions_management"></a>会话管理</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Vert.x Web提供了Web会话管理设施；使用它，您需要对于每个用户（会话）创建一个
<code><a href="../../apidocs/io/vertx/ext/web/client/WebClientSession.html">WebClientSession</a></code> ，并使用它来代替
<code><a href="../../apidocs/io/vertx/ext/web/client/WebClient.html">WebClient</a></code> 。</p>
</div>
<div class="sect2">
<h3 id="_creating_a_webclientsession"><a class="anchor" href="#_creating_a_webclientsession"></a>创建一个 WebClientSession</h3>
<div class="paragraph">
<p>您像下面一样创建一个 <code><a href="../../apidocs/io/vertx/ext/web/client/WebClientSession.html">WebClientSession</a></code> 实例</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">WebClient client = WebClient.create(vertx);
WebClientSession session = WebClientSession.create(client);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_making_requests_2"><a class="anchor" href="#_making_requests_2"></a>发出请求</h3>
<div class="paragraph">
<p>一旦创建， <code><a href="../../apidocs/io/vertx/ext/web/client/WebClientSession.html">WebClientSession</a></code> 就可以代替
<code><a href="../../apidocs/io/vertx/ext/web/client/WebClient.html">WebClient</a></code> 去做 HTTP(s) 请求并且自动管理从您正在调用的
服务器收到的所有cookie。</p>
</div>
</div>
<div class="sect2">
<h3 id="_setting_session_level_headers"><a class="anchor" href="#_setting_session_level_headers"></a>设置会话级别headers</h3>
<div class="paragraph">
<p>您可以按以下步骤设置任何会话级别的headers到要添加的每个请求：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">WebClientSession session = WebClientSession.create(client);
session.addHeader(<span class="hljs-string">&quot;my-jwt-token&quot;</span>, jwtToken);</code></pre>
</div>
</div>
<div class="paragraph">
<p>然后 headers 将被添加到每个请求中； 注意 这些 headers 将发送给所有主机；
如果您需要发送不同的 headers 到不同的主机， 您必须将它们手动添加到每个单个请求中，并且不能添加到
<code><a href="../../apidocs/io/vertx/ext/web/client/WebClientSession.html">WebClientSession</a></code> 。</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_oauth2_security"><a class="anchor" href="#_oauth2_security"></a>OAuth2 安全</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Vert.x web 提供了 web 会话管理的功能； 您可以给每个用户（会话）创建一个
<code><a href="../../apidocs/io/vertx/ext/web/client/OAuth2WebClient.html">OAuth2WebClient</a></code>，并且用其来替代
<code><a href="../../apidocs/io/vertx/ext/web/client/WebClient.html">WebClient</a></code>。</p>
</div>
<div class="sect2">
<h3 id="_creating_an_oauth2_client"><a class="anchor" href="#_creating_an_oauth2_client"></a>创建一个 Oauth2 客户端</h3>
<div class="paragraph">
<p>您可以用以下代码创建一个 <code><a href="../../apidocs/io/vertx/ext/web/client/OAuth2WebClient.html">OAuth2WebClient</a></code> 的实例：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">WebClient client = WebClient.create(vertx);
OAuth2WebClient oauth2 = OAuth2WebClient.create(
    client,
    OAuth2Auth.create(vertx, <span class="hljs-keyword">new</span> OAuth2Options(<span class="hljs-comment">/* enter IdP config */</span>)))

  <span class="hljs-comment">// configure the initial credentials (needed to fetch if needed</span>
  <span class="hljs-comment">// the access_token</span>
  .withCredentials(<span class="hljs-keyword">new</span> TokenCredentials(<span class="hljs-string">&quot;some.jwt.token&quot;</span>));</code></pre>
</div>
</div>
<div class="paragraph">
<p>客户端也可以使用 OpenId 服务发现来进行配置，例如通过以下操作来
连接一个 keycloak 服务器：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">KeycloakAuth.discover(
    vertx,
    <span class="hljs-keyword">new</span> OAuth2Options().setSite(<span class="hljs-string">&quot;https://keycloakserver.com&quot;</span>))
  .onSuccess(oauth -&gt; {
    OAuth2WebClient client = OAuth2WebClient.create(
        WebClient.create(vertx),
        oauth)
      <span class="hljs-comment">// if your keycloak is configured for password_credentials_flow</span>
      .withCredentials(
        <span class="hljs-keyword">new</span> UsernamePasswordCredentials(<span class="hljs-string">&quot;bob&quot;</span>, <span class="hljs-string">&quot;s3cret&quot;</span>));
  });</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_making_requests_3"><a class="anchor" href="#_making_requests_3"></a>发送请求</h3>
<div class="paragraph">
<p>客户端创建完毕后， 就可以使用 <code><a href="../../apidocs/io/vertx/ext/web/client/OAuth2WebClient.html">OAuth2WebClient</a></code> 来代替
<code><a href="../../apidocs/io/vertx/ext/web/client/WebClient.html">WebClient</a></code> 发送 HTTP(s) 请求，并且自动管理从正在请求的服务器接收
到的所有 cookie。</p>
</div>
</div>
<div class="sect2">
<h3 id="_avoid_expired_tokens"><a class="anchor" href="#_avoid_expired_tokens"></a>避免过期的 token</h3>
<div class="paragraph">
<p>您可以使用以下代码来给每个请求设置 token 的过期时间：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">OAuth2WebClient client = OAuth2WebClient.create(
    baseClient,
    oAuth2Auth,
    <span class="hljs-keyword">new</span> OAuth2WebClientOptions()
      .setLeeway(<span class="hljs-number">5</span>));</code></pre>
</div>
</div>
<div class="paragraph">
<p>如果要发送一个请求，那么当前正在使用的用户对象会被检查是否到达了设置的过期时间。
如果需要的话，客户端会刷新 token，否则中止请求并抛出异常。</p>
</div>
<div class="paragraph">
<p>请求仍然可能因为 token 过期而失败，这是因为服务端也会验证一遍 token 是否
过期。 为了减少用户端的工作， 客户端可以配置为当返回的状态码为 <strong>401</strong> （禁止访问）时
只进行 <strong>单次</strong> 重试。 当 <code>refreshTokenOnForbidden</code> 被设置为 <code>true</code> 时， 客户端会
用一个新的 token 重试一次，再给用户返回
handler/promise 。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">OAuth2WebClient client = OAuth2WebClient.create(
  baseClient,
  oAuth2Auth,
  <span class="hljs-keyword">new</span> OAuth2WebClientOptions()
    <span class="hljs-comment">// the client will attempt a single token request, if the request</span>
    <span class="hljs-comment">// if the status code of the response is 401</span>
    <span class="hljs-comment">// there will be only 1 attempt, so the second consecutive 401</span>
    <span class="hljs-comment">// will be passed down to your handler/promise</span>
    .setRenewTokenOnForbidden(<span class="hljs-keyword">true</span>));</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_rxjava_3_api"><a class="anchor" href="#_rxjava_3_api"></a>RxJava 3 API</h2>
<div class="sectionbody">
<div class="paragraph">
<p>RxJava <code><a href="../../apidocs/io/vertx/rxjava3/ext/web/client/HttpRequest.html">HttpRequest</a></code> 提供了RX化的原始版本API，
<code><a href="../../apidocs/io/vertx/rxjava3/ext/web/client/HttpRequest.html#rxSend--">rxSend</a></code> 方法返回一个能够订阅到HTTP请求的 <code>Single&lt;HttpResponse&lt;Buffer&gt;&gt;</code> ，因此，<code>Single</code> 能被订阅多次。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">Single&lt;HttpResponse&lt;Buffer&gt;&gt; single = client
  .get(<span class="hljs-number">8080</span>, <span class="hljs-string">&quot;myserver.mycompany.com&quot;</span>, <span class="hljs-string">&quot;/some-uri&quot;</span>)
  .rxSend();

<span class="hljs-comment">// Single订阅后，发送请求</span>
single.subscribe(response -&gt; System.out.println(<span class="hljs-string">&quot;Received 1st response with status code&quot;</span> + response.statusCode()), error -&gt; System.out.println(<span class="hljs-string">&quot;Something went wrong &quot;</span> + error.getMessage()));

<span class="hljs-comment">// 发送另一个请求</span>
single.subscribe(response -&gt; System.out.println(<span class="hljs-string">&quot;Received 2nd response with status code&quot;</span> + response.statusCode()), error -&gt; System.out.println(<span class="hljs-string">&quot;Something went wrong &quot;</span> + error.getMessage()));</code></pre>
</div>
</div>
<div class="paragraph">
<p>获得的 <code>Single</code> 可以与RxJava API自然地组合和链式调用</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">Single&lt;String&gt; url = client
  .get(<span class="hljs-number">8080</span>, <span class="hljs-string">&quot;myserver.mycompany.com&quot;</span>, <span class="hljs-string">&quot;/some-uri&quot;</span>)
  .rxSend()
  .map(HttpResponse::bodyAsString);

<span class="hljs-comment">// 使用flatMap操作，向Single的URL上发出请求</span>
url
  .flatMap(u -&gt; client.getAbs(u).rxSend())
  .subscribe(response -&gt; System.out.println(<span class="hljs-string">&quot;Received response with status code&quot;</span> + response.statusCode()), error -&gt; System.out.println(<span class="hljs-string">&quot;Something went wrong &quot;</span> + error.getMessage()));</code></pre>
</div>
</div>
<div class="paragraph">
<p>同样的API们是可用的</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">Single&lt;HttpResponse&lt;JsonObject&gt;&gt; single = client
  .get(<span class="hljs-number">8080</span>, <span class="hljs-string">&quot;myserver.mycompany.com&quot;</span>, <span class="hljs-string">&quot;/some-uri&quot;</span>)
  .putHeader(<span class="hljs-string">&quot;some-header&quot;</span>, <span class="hljs-string">&quot;header-value&quot;</span>)
  .addQueryParam(<span class="hljs-string">&quot;some-param&quot;</span>, <span class="hljs-string">&quot;param value&quot;</span>)
  .as(BodyCodec.jsonObject())
  .rxSend();
single.subscribe(resp -&gt; {
  System.out.println(resp.statusCode());
  System.out.println(resp.body());
});</code></pre>
</div>
</div>
<div class="paragraph">
<p><code><a href="../../apidocs/io/vertx/rxjava3/ext/web/client/HttpRequest.html#rxSendStream-io.reactivex.rxjava3.core.Flowable-">rxSendStream</a></code>
应首选发送 <code>Flowable&lt;Buffer&gt;</code> body。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">Flowable&lt;Buffer&gt; body = getPayload();

Single&lt;HttpResponse&lt;Buffer&gt;&gt; single = client
  .post(<span class="hljs-number">8080</span>, <span class="hljs-string">&quot;myserver.mycompany.com&quot;</span>, <span class="hljs-string">&quot;/some-uri&quot;</span>)
  .rxSendStream(body);
single.subscribe(resp -&gt; {
  System.out.println(resp.statusCode());
  System.out.println(resp.body());
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>订阅后， <code>body</code> 将被订阅，其内容被用于请求。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_domain_sockets"><a class="anchor" href="#_domain_sockets"></a>域套接字</h2>
<div class="sectionbody">
<div class="paragraph">
<p>自3.7.1后， Web Client 支持domain sockets， 例如，您可以跟 <a href="https://docs.docker.com/engine/reference/commandline/dockerd/">local Docker daemon</a> 交流。</p>
</div>
<div class="paragraph">
<p>为了达成这个目的， <code><a href="../../apidocs/io/vertx/core/Vertx.html">Vertx</a></code> 实例必须使用native transport创建，
您可以阅读 Vert.x 核心文档，它清楚地说明了这一点。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">SocketAddress serverAddress = SocketAddress
  .domainSocketAddress(<span class="hljs-string">&quot;/var/run/docker.sock&quot;</span>);

<span class="hljs-comment">// 我们仍然需要指定主机和端口，</span>
<span class="hljs-comment">// 因此请求的HTTP header 是 localhost:8080</span>
<span class="hljs-comment">// 否则将是错误格式的HTTP请求</span>
<span class="hljs-comment">// 在此示例中，实际值并不重要</span>
client
  .request(
    HttpMethod.GET,
    serverAddress,
    <span class="hljs-number">8080</span>,
    <span class="hljs-string">&quot;localhost&quot;</span>,
    <span class="hljs-string">&quot;/images/json&quot;</span>)
  .expect(ResponsePredicate.SC_ACCEPTED)
  .as(BodyCodec.jsonObject())
  .send()
  .onSuccess(res -&gt;
    System.out.println(<span class="hljs-string">&quot;Current Docker images&quot;</span> + res.body()))
  .onFailure(err -&gt;
    System.out.println(<span class="hljs-string">&quot;Something went wrong &quot;</span> + err.getMessage()));</code></pre>
</div>
</div>
</div>
</div></div></div></div></div></div><footer class="jsx-aeedcf66895f49d7"><div class="jsx-aeedcf66895f49d7 container"><div class="jsx-aeedcf66895f49d7 footer-nav-section"><div class="jsx-aeedcf66895f49d7 footer-nav-list footer-logo"><a class="jsx-aeedcf66895f49d7" href="/"><img src="data:image/svg+xml,%3csvg version=&#x27;1.1&#x27; id=&#x27;Layer_1&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27; x=&#x27;0&#x27; y=&#x27;0&#x27; viewBox=&#x27;0 0 1232.6 315.2&#x27; style=&#x27;enable-background:new 0 0 1232.6 315.2&#x27; xml:space=&#x27;preserve&#x27;%3e%3cstyle%3e.st0%7bfill:%23782a91%7d%3c/style%3e%3cpath d=&#x27;M120.9 214.2 190.5 0h52.3l-98.5 273.8H98.2L0 0h52.1l68.8 214.2zm291.2-62.6H299.6v84.2H431v38H252V0h177.7v38.4H299.6V114h112.5v37.6zm83.7-113.2H546c16.5.3 29 4.4 37.3 12.4 8.3 8 12.5 19.4 12.5 34 0 14-4.5 25.1-13.5 33.2-9 8.1-21.6 12.1-37.6 12.1h-27.1v24.2l86.1 119.5h51v-2.4l-77.2-106.7c24.9-5.5 43.3-21.7 52.6-35.9 8.2-12.6 13.3-27.7 13.3-46 0-26.8-8.6-47.4-25.8-61.5C600.5 7.1 576.1 0 544.5 0h-96.3v273.8h47.6&#x27;/%3e%3cpath class=&#x27;st0&#x27; d=&#x27;m1052.3 157.7-41.5 62.7 29.7 53.4h85.1z&#x27;/%3e%3ccircle class=&#x27;st0&#x27; cx=&#x27;827.9&#x27; cy=&#x27;274.7&#x27; r=&#x27;40.5&#x27;/%3e%3cpath class=&#x27;st0&#x27; d=&#x27;m1037 0-47.6 74.2L949 0h-84l85.3 135.8-67.1 105.7c5.7 9.5 9.1 20.5 9.2 32.4h50.1L1121.3 0H1037z&#x27;/%3e%3cpath d=&#x27;M763.5 273.8c.1-9.9 2.5-19.2 6.6-27.5V38.4h85.4V0H638.2v38.4h84.6v235.4h40.7zm414-266.9h-15.3v42.2h-8.5V6.9h-15.2V0h39v6.9zM1193 0l14.2 37.7L1221.3 0h11v49.1h-8.5V32.9l.8-21.7-14.5 37.9h-6.1l-14.5-37.8.8 21.6v16.2h-8.5V0h11.2z&#x27;/%3e%3c/svg%3e" alt="Vert.x Logo" class="jsx-aeedcf66895f49d7"/></a></div><div class="jsx-aeedcf66895f49d7 footer-nav-list"><h5 class="jsx-aeedcf66895f49d7">Eclipse Vert.x</h5><ul class="jsx-aeedcf66895f49d7 "><li class="jsx-aeedcf66895f49d7"><a class="jsx-aeedcf66895f49d7 navbar-menu-item" href="/docs/">文档</a></li><li class="jsx-aeedcf66895f49d7"><a class="jsx-aeedcf66895f49d7" href="/download/">下载</a></li><li class="jsx-aeedcf66895f49d7"><a class="jsx-aeedcf66895f49d7" href="/blog/">博客</a></li><li class="jsx-aeedcf66895f49d7"><a class="jsx-aeedcf66895f49d7" href="/community/">社区</a></li><li class="jsx-aeedcf66895f49d7"><a class="jsx-aeedcf66895f49d7" href="/translation/">翻译团队</a></li><li class="jsx-aeedcf66895f49d7"><a href="https://github.com/eclipse-vertx/vert.x" class="jsx-aeedcf66895f49d7">GitHub</a></li><li class="jsx-aeedcf66895f49d7"><a href="https://github.com/vertx-china/vertx-web-site" class="jsx-aeedcf66895f49d7">翻译GitHub</a></li></ul></div><div class="jsx-aeedcf66895f49d7 footer-nav-list"><h5 class="jsx-aeedcf66895f49d7">资源</h5><ul class="jsx-aeedcf66895f49d7 "><li class="jsx-aeedcf66895f49d7"><a class="jsx-aeedcf66895f49d7" href="/faq/">答疑</a></li><li class="jsx-aeedcf66895f49d7"><a class="jsx-aeedcf66895f49d7" href="/channels/">联系渠道</a></li><li class="jsx-aeedcf66895f49d7"><a href="https://how-to.vertx.io/" class="jsx-aeedcf66895f49d7">操作指南</a></li><li class="jsx-aeedcf66895f49d7"><a href="https://start.vertx.io/" class="jsx-aeedcf66895f49d7">应用生成器</a></li><li class="jsx-aeedcf66895f49d7"><a href="/.well-known/security.txt" class="jsx-aeedcf66895f49d7">security.txt</a></li></ul></div><div class="jsx-aeedcf66895f49d7 footer-nav-list"><h5 class="jsx-aeedcf66895f49d7">Eclipse</h5><ul class="jsx-aeedcf66895f49d7 "><li class="jsx-aeedcf66895f49d7"><a href="https://www.eclipse.org/" class="jsx-aeedcf66895f49d7">Eclipse 基金会</a></li><li class="jsx-aeedcf66895f49d7"><a href="https://www.eclipse.org/legal/privacy.php" class="jsx-aeedcf66895f49d7">隐私政策</a></li><li class="jsx-aeedcf66895f49d7"><a href="https://www.eclipse.org/legal/termsofuse.php" class="jsx-aeedcf66895f49d7">使用条款</a></li><li class="jsx-aeedcf66895f49d7"><a href="https://www.eclipse.org/legal/copyright.php" class="jsx-aeedcf66895f49d7">版权代理</a></li><li class="jsx-aeedcf66895f49d7"><a href="https://www.eclipse.org/legal/" class="jsx-aeedcf66895f49d7">法律资源</a></li></ul></div></div><div class="jsx-aeedcf66895f49d7 footer-copyright"><div class="jsx-aeedcf66895f49d7 footer-copyright-remarks">© <!-- -->2022<!-- --> Eclipse Vert.x™<br class="jsx-aeedcf66895f49d7"/>Eclipse Vert.x™ 是开源的，并在<a href="https://creativecommons.org/licenses/by-sa/3.0/" target="_blank" rel="noopener noreferrer" class="jsx-aeedcf66895f49d7">Eclipse Public License 2.0</a>和<a href="https://www.apache.org/licenses/LICENSE-2.0.html" target="_blank" rel="noopener noreferrer" class="jsx-aeedcf66895f49d7">Apache License 2.0</a>协议下获得了双重许可。<br class="jsx-aeedcf66895f49d7 footer-copyright-break"/>网站由 <a href="https://michelkraemer.com" target="_blank" rel="noopener noreferrer" class="jsx-aeedcf66895f49d7">Michel Krämer</a> 设计。</div><div class="jsx-aeedcf66895f49d7 footer-copyright-eclipse-logo"><a href="https://www.eclipse.org/" target="_blank" rel="noopener noreferrer" class="jsx-aeedcf66895f49d7"><img src="data:image/svg+xml,%3csvg version=&#x27;1.1&#x27; id=&#x27;Layer_1&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27; x=&#x27;0&#x27; y=&#x27;0&#x27; viewBox=&#x27;0 0 281.3 91.1&#x27; style=&#x27;enable-background:new 0 0 281.3 91.1&#x27; xml:space=&#x27;preserve&#x27;%3e%3cstyle%3e.st0%7bfill:%23f79422%7d.st1%7bfill:%233d3c3b%7d%3c/style%3e%3cg id=&#x27;Layer_1_1_&#x27;%3e%3cpath class=&#x27;st0&#x27; d=&#x27;M265.7 84 257 73h-2.7v17.7h3.3v-12l9.3 12h2.1V73h-3.3v11zm-32.4-8.3c4.2 0 5.8 3.3 5.8 6.3s-1.6 6-5.8 6-5.7-3.1-5.8-6 1.7-6.3 5.8-6.3zm0-3c-6.1 0-9.1 4.7-9.1 9.3 0 4.7 2.9 9.1 9.1 9.1s9-4.6 9.1-9.2-3-9.2-9.1-9.2zm-21.2 18V73h-3.3v17.7h3.3zm-23.6 0h3.3V76h5.6v-3h-14.6v3h5.6l.1 14.7zm-18.9-6.5H163l3.3-7.6 3.3 7.6zm2.8 6.5h3.6L168.2 73h-3.6l-8 17.7h3.6l1.5-3.3h9.3l1.4 3.3zm-38-14.6h3.6c3.9 0 5.5 2.8 5.5 5.5.1 2.8-1.5 5.8-5.5 5.8h-3.6V76.1zm3.7-3.1h-6.9v17.7h6.9c6.2 0 8.9-4.5 8.9-9s-2.8-8.7-8.9-8.7zm-22.4 11L107 73h-2.7v17.7h3.3v-12l9.3 12h2.1V73h-3.3v11zM88.2 73v10.2c0 3-1.6 4.9-4.3 4.9s-4.6-1.7-4.6-4.9V73H76v10.1c0 5.3 3.6 7.9 7.9 7.9 4.4 0 7.7-2.7 7.7-7.9V73h-3.4zm-33 2.7c4.2 0 5.8 3.3 5.8 6.3s-1.6 6-5.8 6-5.7-3.1-5.8-6 1.7-6.3 5.8-6.3zm0-3c-6.1 0-9.1 4.7-9.1 9.3s2.9 9.1 9.1 9.1 9-4.6 9.1-9.2-3-9.2-9.1-9.2zm-29.7 18v-6.5h8.9v-3.1h-8.9v-4.8h9.4V73H22.2v17.6h3.3z&#x27;/%3e%3cpath class=&#x27;st1&#x27; d=&#x27;M269.4 54.4h-22.2v-8.9h21.4v-6.9h-21.4v-9.1h22.2v-7.2h-29.6v39.5h29.6v-7.4zm-40-25.6c-3-6.1-9.4-7.8-15.5-7.8-7.3 0-15.3 3.4-15.3 11.5 0 8.9 7.4 11 15.5 12 5.2.6 9.1 2.1 9.1 5.8 0 4.3-4.4 5.9-9.1 5.9s-9.4-1.9-11.1-6.3l-6.2 3.2c2.9 7.2 9.1 9.7 17.2 9.7 8.8 0 16.6-3.8 16.6-12.6 0-9.4-7.7-11.6-15.9-12.6-4.7-.6-8.8-1.5-8.8-5 0-2.9 2.6-5.2 8.2-5.2 4.3 0 8 2.2 9.4 4.4l5.9-3zM176 22.2c-6.2-.1-12.4 0-18.6 0v39.5h7.4V50.1H176c19.4 0 19.4-27.9 0-27.9zm-11.1 7.1H176c9.5 0 9.5 14 0 14h-11.2l.1-14zm-18 32.5V22.2h-7.4v39.5l7.4.1zm-44-39.6v39.5h27.7v-6.9h-20.3V22.2h-7.4zM90.7 51.7c-2.7 2.5-6.2 4-9.9 4-9.8 0-13.5-6.8-13.6-13.4s4.1-13.7 13.6-13.7c3.5-.1 7 1.3 9.5 3.7l5-4.8c-3.8-3.9-9.1-6-14.5-6-14.3 0-21 10.5-20.9 20.8s6.3 20.3 20.9 20.3c5.6.1 11-2 15-5.9l-5.1-5zm-39 2.7H29.5v-8.9h21.4v-6.9H29.5v-9.1h22.2v-7.2H22.2v39.5h29.6l-.1-7.4z&#x27;/%3e%3cpath class=&#x27;st0&#x27; d=&#x27;M9.8 18.2C18.8 4.1 36.9-.8 52.1 6l-1-.7C35.7-4.6 15.2-.1 5.3 15.3s-5.4 35.9 10 45.8l1.1.6C3.8 50.8.8 32.3 9.8 18.2z&#x27;/%3e%3cpath class=&#x27;st1&#x27; d=&#x27;M272.2 26.1c0-2.5 2.1-4.6 4.6-4.6 2.5 0 4.6 2.1 4.6 4.6 0 2.5-2.1 4.6-4.6 4.6-2.6 0-4.6-2.1-4.6-4.6zm8.6 0c0-2.2-1.8-4.1-4-4.1s-4.1 1.8-4.1 4.1c0 2.2 1.7 4 3.9 4.1h.1c2.3 0 4.1-1.8 4.1-4.1zm-6-2.5h2.3c1.1 0 1.9.5 1.9 1.6 0 .7-.4 1.3-1.1 1.5l1.2 1.7h-1.4l-1-1.5h-.7v1.5h-1.1l-.1-4.8zm2.2 2.3c.5 0 .8-.3.8-.7s-.3-.7-.8-.7h-1v1.3l1 .1z&#x27;/%3e%3c/g%3e%3c/svg%3e" alt="Eclipse foundation Logo" class="jsx-aeedcf66895f49d7"/></a></div></div></div></footer></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"slug":"vertx-web-client/java","title":"Vert.x Web Client","fallbackGitHubStars":null,"toc":"\u003cdiv id=\"toc\" class=\"toc\"\u003e\n\u003cdiv id=\"toctitle\"\u003eTable of Contents\u003c/div\u003e\n\u003cul class=\"sectlevel1\"\u003e\n\u003cli\u003e\u003ca href=\"#_using_the_web_client\"\u003e使用Web Client\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_re_cap_on_vert_x_core_http_client\"\u003e回顾 Vert.x Core的 HTTP Client\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_creating_a_web_client\"\u003e创建Web Client\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_making_requests\"\u003e发送请求\u003c/a\u003e\n\u003cul class=\"sectlevel2\"\u003e\n\u003cli\u003e\u003ca href=\"#_simple_requests_with_no_body\"\u003e无请求体的简单请求\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_writing_request_bodies\"\u003e填充请求体\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_writing_request_headers\"\u003e填充请求头\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_configure_the_request_to_add_authentication\"\u003e配置请求以添加身份验证\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_reusing_requests\"\u003e重用请求\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_timeouts\"\u003e超时\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_handling_http_responses\"\u003e处理HTTP响应\u003c/a\u003e\n\u003cul class=\"sectlevel2\"\u003e\n\u003cli\u003e\u003ca href=\"#_decoding_responses\"\u003e响应解码\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#response-predicates\"\u003e响应谓词\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_handling_30x_redirections\"\u003e处理 30x 重定向\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_http_response_caching\"\u003eHTTP 响应缓存\u003c/a\u003e\n\u003cul class=\"sectlevel2\"\u003e\n\u003cli\u003e\u003ca href=\"#_creating_a_caching_web_client\"\u003e创建一个带缓存的 web client\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_configuring_what_is_cached\"\u003e配置缓存内容\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_providing_an_external_store\"\u003e使用别的储存实现\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_handling_private_responses\"\u003e处理私有响应\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_using_https\"\u003e使用 HTTPS\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_sessions_management\"\u003e会话管理\u003c/a\u003e\n\u003cul class=\"sectlevel2\"\u003e\n\u003cli\u003e\u003ca href=\"#_creating_a_webclientsession\"\u003e创建一个 WebClientSession\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_making_requests_2\"\u003e发出请求\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_setting_session_level_headers\"\u003e设置会话级别headers\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_oauth2_security\"\u003eOAuth2 安全\u003c/a\u003e\n\u003cul class=\"sectlevel2\"\u003e\n\u003cli\u003e\u003ca href=\"#_creating_an_oauth2_client\"\u003e创建一个 Oauth2 客户端\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_making_requests_3\"\u003e发送请求\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_avoid_expired_tokens\"\u003e避免过期的 token\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_rxjava_3_api\"\u003eRxJava 3 API\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_domain_sockets\"\u003e域套接字\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e","contents":"\u003ch1\u003eVert.x Web Client\u003c/h1\u003e\n\n\u003cdiv id=\"preamble\"\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eVert.x Web Client 是一个异步的 HTTP 和 HTTP/2 客户端。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eWeb Client使得发送 HTTP 请求以及从 Web 服务器接收 HTTP 响应变得更加便捷，同时提供了额外的高级功能，\n例如：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eJson body的编码和解码\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e请求和响应泵\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e请求参数的处理\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e统一的错误处理\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e提交表单\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e制作Web Client的目的并非为了替换Vert.x Core中的 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpClient.html\"\u003eHttpClient\u003c/a\u003e\u003c/code\u003e ，而是基于该客户端，\n继承其配置和强大的功能，例如请求连接池（Pooling），HTTP/2的支持，流水线／管线的支持等。\n当您需要对 HTTP 请求和响应做细微粒度控制时，\n您应当使用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpClient.html\"\u003eHttpClient\u003c/a\u003e\u003c/code\u003e 。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e另外Web Client并未提供 WebSocket API，此时您应当使用 Vert.x Core的 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpClient.html\"\u003eHttpClient\u003c/a\u003e\u003c/code\u003e 。\n目前还无法处理cookies。\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_using_the_web_client\"\u003e\u003ca class=\"anchor\" href=\"#_using_the_web_client\"\u003e\u003c/a\u003e使用Web Client\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e如需使用Vert.x Web Client，请先加入以下依赖，到您的build描述 \u003cem\u003edependencies\u003c/em\u003e 部分 ：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eMaven （在您的 \u003ccode\u003epom.xml\u003c/code\u003e 文件内）：\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-xml\" data-lang=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\n \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003eio.vertx\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003evertx-web-client\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e4.2.5\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eGradle （在您的 \u003ccode\u003ebuild.gradle\u003c/code\u003e 文件内）：\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-groovy\" data-lang=\"groovy\"\u003edependencies {\n compile \u003cspan class=\"hljs-string\"\u003e\u0026#x27;io.vertx:vertx-web-client:4.2.5\u0026#x27;\u003c/span\u003e\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_re_cap_on_vert_x_core_http_client\"\u003e\u003ca class=\"anchor\" href=\"#_re_cap_on_vert_x_core_http_client\"\u003e\u003c/a\u003e回顾 Vert.x Core的 HTTP Client\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eVert.x Web Client使用Vert.x core的API，如果您对此还不熟悉，熟悉基于 Vert.x core的\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpClient.html\"\u003eHttpClient\u003c/a\u003e\u003c/code\u003e 基本概念是很有价值的。\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_creating_a_web_client\"\u003e\u003ca class=\"anchor\" href=\"#_creating_a_web_client\"\u003e\u003c/a\u003e创建Web Client\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您可以创建一个缺省 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/web/client/WebClient.html\"\u003eWebClient\u003c/a\u003e\u003c/code\u003e 实例：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eWebClient client = WebClient.create(vertx);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您还可以使用配置项来创建客户端：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eWebClientOptions options = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e WebClientOptions()\n  .setUserAgent(\u003cspan class=\"hljs-string\"\u003e\u0026quot;My-App/1.2.3\u0026quot;\u003c/span\u003e);\noptions.setKeepAlive(\u003cspan class=\"hljs-keyword\"\u003efalse\u003c/span\u003e);\nWebClient client = WebClient.create(vertx, options);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eWeb Client配置项继承自 \u003ccode\u003eHttpClient\u003c/code\u003e 配置项，您可以设置其中任何一个项。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e如果已在程序中创建 \u003ccode\u003eHttpClient\u003c/code\u003e，可用以下方式复用：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eWebClient client = WebClient.wrap(httpClient);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"admonitionblock important\"\u003e\n\u003ctable\u003e\n\u003ctr\u003e\n\u003ctd class=\"icon\"\u003e\n\u003cdiv class=\"title\"\u003e重要\u003c/div\u003e\n\u003c/td\u003e\n\u003ctd class=\"content\"\u003e\n在大多数情况下，一个Web Client 应该在应用程序启动时创建，并重用它。\n否则，您将失去很多好处，例如连接池。如果实例未正确关闭，则可能会资源泄漏。\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_making_requests\"\u003e\u003ca class=\"anchor\" href=\"#_making_requests\"\u003e\u003c/a\u003e发送请求\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_simple_requests_with_no_body\"\u003e\u003ca class=\"anchor\" href=\"#_simple_requests_with_no_body\"\u003e\u003c/a\u003e无请求体的简单请求\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e通常，您想发送一个无请求体的HTTP请求。以下是一般情况下的 HTTP GET，\nOPTIONS和HEAD 请求\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eWebClient client = WebClient.create(vertx);\n\n\u003cspan class=\"hljs-comment\"\u003e// 发送GET请求\u003c/span\u003e\nclient\n  .get(\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;myserver.mycompany.com\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;/some-uri\u0026quot;\u003c/span\u003e)\n  .send()\n  .onSuccess(response -\u0026gt; System.out\n    .println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Received response with status code\u0026quot;\u003c/span\u003e + response.statusCode()))\n  .onFailure(err -\u0026gt;\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Something went wrong \u0026quot;\u003c/span\u003e + err.getMessage()));\n\n\u003cspan class=\"hljs-comment\"\u003e// 发送HEAD请求\u003c/span\u003e\nclient\n  .head(\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;myserver.mycompany.com\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;/some-uri\u0026quot;\u003c/span\u003e)\n  .send()\n  .onSuccess(response -\u0026gt; System.out\n    .println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Received response with status code\u0026quot;\u003c/span\u003e + response.statusCode()))\n  .onFailure(err -\u0026gt;\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Something went wrong \u0026quot;\u003c/span\u003e + err.getMessage()));\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您可用以下链式方式向请求URI添加查询参数\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eclient\n  .get(\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;myserver.mycompany.com\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;/some-uri\u0026quot;\u003c/span\u003e)\n  .addQueryParam(\u003cspan class=\"hljs-string\"\u003e\u0026quot;param\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;param_value\u0026quot;\u003c/span\u003e)\n  .send()\n  .onSuccess(response -\u0026gt; System.out\n    .println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Received response with status code\u0026quot;\u003c/span\u003e + response.statusCode()))\n  .onFailure(err -\u0026gt;\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Something went wrong \u0026quot;\u003c/span\u003e + err.getMessage()));\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e在请求URI中的参数将会被预填充\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eHttpRequest\u0026lt;Buffer\u0026gt; request = client\n  .get(\n    \u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e,\n    \u003cspan class=\"hljs-string\"\u003e\u0026quot;myserver.mycompany.com\u0026quot;\u003c/span\u003e,\n    \u003cspan class=\"hljs-string\"\u003e\u0026quot;/some-uri?param1=param1_value\u0026amp;param2=param2_value\u0026quot;\u003c/span\u003e);\n\n\u003cspan class=\"hljs-comment\"\u003e// 添加 param3\u003c/span\u003e\nrequest.addQueryParam(\u003cspan class=\"hljs-string\"\u003e\u0026quot;param3\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;param3_value\u0026quot;\u003c/span\u003e);\n\n\u003cspan class=\"hljs-comment\"\u003e// 覆盖 param2\u003c/span\u003e\nrequest.setQueryParam(\u003cspan class=\"hljs-string\"\u003e\u0026quot;param2\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;another_param2_value\u0026quot;\u003c/span\u003e);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e设置请求URI将会自动清除已有的查询参数\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eHttpRequest\u0026lt;Buffer\u0026gt; request = client\n  .get(\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;myserver.mycompany.com\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;/some-uri\u0026quot;\u003c/span\u003e);\n\n\u003cspan class=\"hljs-comment\"\u003e// 添加 param1\u003c/span\u003e\nrequest.addQueryParam(\u003cspan class=\"hljs-string\"\u003e\u0026quot;param1\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;param1_value\u0026quot;\u003c/span\u003e);\n\n\u003cspan class=\"hljs-comment\"\u003e// 覆盖 param1 并添加 param2\u003c/span\u003e\nrequest.uri(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/some-uri?param1=param1_value\u0026amp;param2=param2_value\u0026quot;\u003c/span\u003e);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_writing_request_bodies\"\u003e\u003ca class=\"anchor\" href=\"#_writing_request_bodies\"\u003e\u003c/a\u003e填充请求体\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e如需要发送请求体，可使用相同的API，并在最后加上 \u003ccode\u003esendXXX\u003c/code\u003e 方法，\n发送相应的请求体。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e使用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/web/client/HttpRequest.html#sendBuffer-io.vertx.core.buffer.Buffer-io.vertx.core.Handler-\"\u003esendBuffer\u003c/a\u003e\u003c/code\u003e 发送一个buffer body\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eclient\n  .post(\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;myserver.mycompany.com\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;/some-uri\u0026quot;\u003c/span\u003e)\n  .sendBuffer(buffer)\n  .onSuccess(res -\u0026gt; {\n    \u003cspan class=\"hljs-comment\"\u003e// OK\u003c/span\u003e\n  });\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e发送single buffer很有用，但是通常您不想完全将内容加载到内存中，\n因为它可能太大，或者您想同时处理多个请求，或者每个请求只想使用最小的（消耗）。\n为此，Web Client可以使用 \u003ccode\u003eReadStream\u0026lt;Buffer\u0026gt;\u003c/code\u003e 的（例如\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/file/AsyncFile.html\"\u003eAsyncFile\u003c/a\u003e\u003c/code\u003e 是一个ReadStream\u0026lt;Buffer\u0026gt;） \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/web/client/HttpRequest.html#sendStream-io.vertx.core.streams.ReadStream-io.vertx.core.Handler-\"\u003esendStream\u003c/a\u003e\u003c/code\u003e 方法发送。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eclient\n  .post(\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;myserver.mycompany.com\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;/some-uri\u0026quot;\u003c/span\u003e)\n  .sendStream(stream)\n  .onSuccess(res -\u0026gt; {\n    \u003cspan class=\"hljs-comment\"\u003e// OK\u003c/span\u003e\n  });\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eWeb Client负责为您设置泵传输（transfer pump）。\n如果流长度未知则使用分块传输（chunked transfer）编码。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e当您知道流的大小，您应该在HTTP header中设置 \u003ccode\u003econtent-length\u003c/code\u003e\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003efs.open(\u003cspan class=\"hljs-string\"\u003e\u0026quot;content.txt\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e OpenOptions(), fileRes -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (fileRes.succeeded()) {\n    ReadStream\u0026lt;Buffer\u0026gt; fileStream = fileRes.result();\n\n    String fileLen = \u003cspan class=\"hljs-string\"\u003e\u0026quot;1024\u0026quot;\u003c/span\u003e;\n\n    \u003cspan class=\"hljs-comment\"\u003e// 用POST方法发送文件\u003c/span\u003e\n    client\n      .post(\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;myserver.mycompany.com\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;/some-uri\u0026quot;\u003c/span\u003e)\n      .putHeader(\u003cspan class=\"hljs-string\"\u003e\u0026quot;content-length\u0026quot;\u003c/span\u003e, fileLen)\n      .sendStream(fileStream)\n      .onSuccess(res -\u0026gt; {\n        \u003cspan class=\"hljs-comment\"\u003e// OK\u003c/span\u003e\n      })\n    ;\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e这个POST方法不会被分块传输。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect3\"\u003e\n\u003ch4 id=\"_json_bodies\"\u003e\u003ca class=\"anchor\" href=\"#_json_bodies\"\u003e\u003c/a\u003eJSON bodies\u003c/h4\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e有时您需要发送JSON body请求， 可使用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/web/client/HttpRequest.html#sendJsonObject-io.vertx.core.json.JsonObject-io.vertx.core.Handler-\"\u003esendJsonObject\u003c/a\u003e\u003c/code\u003e\n发送一个 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/json/JsonObject.html\"\u003eJsonObject\u003c/a\u003e\u003c/code\u003e\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eclient\n  .post(\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;myserver.mycompany.com\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;/some-uri\u0026quot;\u003c/span\u003e)\n  .sendJsonObject(\n    \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject()\n      .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;firstName\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;Dale\u0026quot;\u003c/span\u003e)\n      .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;lastName\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;Cooper\u0026quot;\u003c/span\u003e))\n  .onSuccess(res -\u0026gt; {\n    \u003cspan class=\"hljs-comment\"\u003e// OK\u003c/span\u003e\n  });\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e在Java，Groovy以及Kotlin中，您可以使用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/web/client/HttpRequest.html#sendJson-java.lang.Object-io.vertx.core.Handler-\"\u003esendJson\u003c/a\u003e\u003c/code\u003e 方法，\n它使用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/json/Json.html#encode-java.lang.Object-\"\u003eJson.encode\u003c/a\u003e\u003c/code\u003e 方法映射一个 POJO（Plain Old Java Object）\n到一个 Json 对象\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eclient\n  .post(\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;myserver.mycompany.com\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;/some-uri\u0026quot;\u003c/span\u003e)\n  .sendJson(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e User(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Dale\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;Cooper\u0026quot;\u003c/span\u003e))\n  .onSuccess(res -\u0026gt; {\n    \u003cspan class=\"hljs-comment\"\u003e// OK\u003c/span\u003e\n  });\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"admonitionblock note\"\u003e\n\u003ctable\u003e\n\u003ctr\u003e\n\u003ctd class=\"icon\"\u003e\n\u003cdiv class=\"title\"\u003e注意\u003c/div\u003e\n\u003c/td\u003e\n\u003ctd class=\"content\"\u003e\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/json/Json.html#encode-java.lang.Object-\"\u003eJson.encode\u003c/a\u003e\u003c/code\u003e 方法使用Jackson mapper将 POJO 编码成\nJSON。\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect3\"\u003e\n\u003ch4 id=\"_form_submissions\"\u003e\u003ca class=\"anchor\" href=\"#_form_submissions\"\u003e\u003c/a\u003e表单提交\u003c/h4\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您可以使用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/web/client/HttpRequest.html#sendForm-io.vertx.core.MultiMap-io.vertx.core.Handler-\"\u003esendForm\u003c/a\u003e\u003c/code\u003e\n的变体发送http表单提交。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eMultiMap form = MultiMap.caseInsensitiveMultiMap();\nform.set(\u003cspan class=\"hljs-string\"\u003e\u0026quot;firstName\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;Dale\u0026quot;\u003c/span\u003e);\nform.set(\u003cspan class=\"hljs-string\"\u003e\u0026quot;lastName\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;Cooper\u0026quot;\u003c/span\u003e);\n\n\u003cspan class=\"hljs-comment\"\u003e// 用URL编码方式提交表单\u003c/span\u003e\nclient\n  .post(\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;myserver.mycompany.com\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;/some-uri\u0026quot;\u003c/span\u003e)\n  .sendForm(form)\n  .onSuccess(res -\u0026gt; {\n    \u003cspan class=\"hljs-comment\"\u003e// OK\u003c/span\u003e\n  });\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e默认情况下，提交表单header中的 \u003ccode\u003econtent-type\u003c/code\u003e 属性值为 \u003ccode\u003eapplication/x-www-form-urlencoded\u003c/code\u003e，\n您还可将其替换为 \u003ccode\u003emultipart/form-data\u003c/code\u003e：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eMultiMap form = MultiMap.caseInsensitiveMultiMap();\nform.set(\u003cspan class=\"hljs-string\"\u003e\u0026quot;firstName\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;Dale\u0026quot;\u003c/span\u003e);\nform.set(\u003cspan class=\"hljs-string\"\u003e\u0026quot;lastName\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;Cooper\u0026quot;\u003c/span\u003e);\n\n\u003cspan class=\"hljs-comment\"\u003e// 提交multipart form表单\u003c/span\u003e\nclient\n  .post(\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;myserver.mycompany.com\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;/some-uri\u0026quot;\u003c/span\u003e)\n  .putHeader(\u003cspan class=\"hljs-string\"\u003e\u0026quot;content-type\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;multipart/form-data\u0026quot;\u003c/span\u003e)\n  .sendForm(form)\n  .onSuccess(res -\u0026gt; {\n    \u003cspan class=\"hljs-comment\"\u003e// OK\u003c/span\u003e\n  });\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e如果您想上传文件的同时发送属性，您可以创建一个 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/web/multipart/MultipartForm.html\"\u003eMultipartForm\u003c/a\u003e\u003c/code\u003e ，然后使用\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/web/client/HttpRequest.html#sendMultipartForm-io.vertx.ext.web.multipart.MultipartForm-io.vertx.core.Handler-\"\u003esendMultipartForm\u003c/a\u003e\u003c/code\u003e 。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eMultipartForm form = MultipartForm.create()\n  .attribute(\u003cspan class=\"hljs-string\"\u003e\u0026quot;imageDescription\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;a very nice image\u0026quot;\u003c/span\u003e)\n  .binaryFileUpload(\n    \u003cspan class=\"hljs-string\"\u003e\u0026quot;imageFile\u0026quot;\u003c/span\u003e,\n    \u003cspan class=\"hljs-string\"\u003e\u0026quot;image.jpg\u0026quot;\u003c/span\u003e,\n    \u003cspan class=\"hljs-string\"\u003e\u0026quot;/path/to/image\u0026quot;\u003c/span\u003e,\n    \u003cspan class=\"hljs-string\"\u003e\u0026quot;image/jpeg\u0026quot;\u003c/span\u003e);\n\n\u003cspan class=\"hljs-comment\"\u003e// 提交multipart form表单\u003c/span\u003e\nclient\n  .post(\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;myserver.mycompany.com\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;/some-uri\u0026quot;\u003c/span\u003e)\n  .sendMultipartForm(form)\n  .onSuccess(res -\u0026gt; {\n    \u003cspan class=\"hljs-comment\"\u003e// OK\u003c/span\u003e\n  });\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_writing_request_headers\"\u003e\u003ca class=\"anchor\" href=\"#_writing_request_headers\"\u003e\u003c/a\u003e填充请求头\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您可使用headers的multi-map 填充请求头：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eHttpRequest\u0026lt;Buffer\u0026gt; request = client\n  .get(\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;myserver.mycompany.com\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;/some-uri\u0026quot;\u003c/span\u003e);\n\nMultiMap headers = request.headers();\nheaders.set(\u003cspan class=\"hljs-string\"\u003e\u0026quot;content-type\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;application/json\u0026quot;\u003c/span\u003e);\nheaders.set(\u003cspan class=\"hljs-string\"\u003e\u0026quot;other-header\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;foo\u0026quot;\u003c/span\u003e);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e此处 Headers 是一个 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/MultiMap.html\"\u003eMultiMap\u003c/a\u003e\u003c/code\u003e 实例，提供了添加、\n设置以及删除头属性操作的入口。HTTP headers允许某个特定的key有多个值。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您还可使用 putHeader 写入headers属性：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eHttpRequest\u0026lt;Buffer\u0026gt; request = client\n  .get(\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;myserver.mycompany.com\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;/some-uri\u0026quot;\u003c/span\u003e);\n\nrequest.putHeader(\u003cspan class=\"hljs-string\"\u003e\u0026quot;content-type\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;application/json\u0026quot;\u003c/span\u003e);\nrequest.putHeader(\u003cspan class=\"hljs-string\"\u003e\u0026quot;other-header\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;foo\u0026quot;\u003c/span\u003e);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_configure_the_request_to_add_authentication\"\u003e\u003ca class=\"anchor\" href=\"#_configure_the_request_to_add_authentication\"\u003e\u003c/a\u003e配置请求以添加身份验证\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e可以通过设置正确的 headers 来手动执行身份验证，或我们的预定义方法\n（我们强烈建议启用HTTPS，尤其是对于经过身份验证的请求）：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e在基本的HTTP身份验证中，请求包含以下形式的表单header字段 \u003ccode\u003eAuthorization: Basic \u0026lt;credentials\u0026gt;\u003c/code\u003e ，\ncredentials是base64编码的，由冒号连接的id和密码。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您可以像下面这样配置请求以添加基本访问验证：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eHttpRequest\u0026lt;Buffer\u0026gt; request = client\n  .get(\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;myserver.mycompany.com\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;/some-uri\u0026quot;\u003c/span\u003e)\n  .authentication(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e UsernamePasswordCredentials(\u003cspan class=\"hljs-string\"\u003e\u0026quot;myid\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;mypassword\u0026quot;\u003c/span\u003e));\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e在OAuth 2.0种，请求包含以下形式的表单header字段 \u003ccode\u003eAuthorization: Bearer \u0026lt;bearerToken\u0026gt;\u003c/code\u003e ，bearerToken是授权服务器发布的，\n用于访问受保护资源的不记名令牌。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您可以像下面这样配置请求，以添加bearer token访问验证：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eHttpRequest\u0026lt;Buffer\u0026gt; request = client\n  .get(\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;myserver.mycompany.com\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;/some-uri\u0026quot;\u003c/span\u003e)\n  .authentication(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e TokenCredentials(\u003cspan class=\"hljs-string\"\u003e\u0026quot;myBearerToken\u0026quot;\u003c/span\u003e));\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_reusing_requests\"\u003e\u003ca class=\"anchor\" href=\"#_reusing_requests\"\u003e\u003c/a\u003e重用请求\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/web/client/HttpRequest.html#send-io.vertx.core.Handler-\"\u003esend\u003c/a\u003e\u003c/code\u003e 方法可被安全的重复多次调用，\n这使得它可以很容易的配置以及重用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/web/client/HttpRequest.html\"\u003eHttpRequest\u003c/a\u003e\u003c/code\u003e 对象\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eHttpRequest\u0026lt;Buffer\u0026gt; get = client\n  .get(\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;myserver.mycompany.com\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;/some-uri\u0026quot;\u003c/span\u003e);\n\nget\n  .send()\n  .onSuccess(res -\u0026gt; {\n    \u003cspan class=\"hljs-comment\"\u003e// OK\u003c/span\u003e\n  });\n\n\u003cspan class=\"hljs-comment\"\u003e// 又一些请求\u003c/span\u003e\nget\n  .send()\n  .onSuccess(res -\u0026gt; {\n    \u003cspan class=\"hljs-comment\"\u003e// OK\u003c/span\u003e\n  });\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e不过要当心 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/web/client/HttpRequest.html\"\u003eHttpRequest\u003c/a\u003e\u003c/code\u003e 实例是可变的（mutable）.\n因此，您应该在修改已被缓存了的实例之前，使用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/web/client/HttpRequest.html#copy--\"\u003ecopy\u003c/a\u003e\u003c/code\u003e 方法。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eHttpRequest\u0026lt;Buffer\u0026gt; get = client\n  .get(\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;myserver.mycompany.com\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;/some-uri\u0026quot;\u003c/span\u003e);\n\nget\n  .send()\n  .onSuccess(res -\u0026gt; {\n    \u003cspan class=\"hljs-comment\"\u003e// OK\u003c/span\u003e\n  });\n\n\u003cspan class=\"hljs-comment\"\u003e// \u0026quot;get\u0026quot; 请求实例保持未修改\u003c/span\u003e\nget\n  .copy()\n  .putHeader(\u003cspan class=\"hljs-string\"\u003e\u0026quot;a-header\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;with-some-value\u0026quot;\u003c/span\u003e)\n  .send()\n  .onSuccess(res -\u0026gt; {\n    \u003cspan class=\"hljs-comment\"\u003e// OK\u003c/span\u003e\n  });\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_timeouts\"\u003e\u003ca class=\"anchor\" href=\"#_timeouts\"\u003e\u003c/a\u003e超时\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您可通过 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/web/client/HttpRequest.html#timeout-long-\"\u003etimeout\u003c/a\u003e\u003c/code\u003e 。方法设置超时时间。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eclient\n  .get(\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;myserver.mycompany.com\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;/some-uri\u0026quot;\u003c/span\u003e)\n  .timeout(\u003cspan class=\"hljs-number\"\u003e5000\u003c/span\u003e)\n  .send()\n  .onSuccess(res -\u0026gt; {\n    \u003cspan class=\"hljs-comment\"\u003e// OK\u003c/span\u003e\n  })\n  .onFailure(err -\u0026gt; {\n    \u003cspan class=\"hljs-comment\"\u003e// 当是由java.util.concurrent.TimeoutException导致时，或许是一个超时\u003c/span\u003e\n  });\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e若请求在设定时间内没有返回任何数据，\n则一个异常将会传递给响应处理器。\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_handling_http_responses\"\u003e\u003ca class=\"anchor\" href=\"#_handling_http_responses\"\u003e\u003c/a\u003e处理HTTP响应\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eWeb Client 请求发送之后，您总是在单个 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/web/client/HttpResponse.html\"\u003eHttpResponse\u003c/a\u003e\u003c/code\u003e 中处理单个异步结果 。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e当响应被成功接收到之后，相应的回调函数将会被调用。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eclient\n  .get(\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;myserver.mycompany.com\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;/some-uri\u0026quot;\u003c/span\u003e)\n  .send()\n  .onSuccess(res -\u0026gt;\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Received response with status code\u0026quot;\u003c/span\u003e + res.statusCode()))\n  .onFailure(err -\u0026gt;\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Something went wrong \u0026quot;\u003c/span\u003e + err.getMessage()));\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"admonitionblock caution\"\u003e\n\u003ctable\u003e\n\u003ctr\u003e\n\u003ctd class=\"icon\"\u003e\n\u003cdiv class=\"title\"\u003e小心\u003c/div\u003e\n\u003c/td\u003e\n\u003ctd class=\"content\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e默认状况下，仅当在网络级别发生错误时，Vert.x Web Client 请求才以错误结尾。\n换言之，\u003ccode\u003e404 Not Found\u003c/code\u003e 响应或错误 content type 的响应，\u003cstrong\u003e不\u003c/strong\u003e 被视为失败。\n如果您想要 Web Client 自动进行合理性检，可以使用 \u003ca href=\"#response-predicates\"\u003e响应谓词\u003c/a\u003e 。\u003c/p\u003e\n\u003c/div\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\n\u003c/div\u003e\n\u003cdiv class=\"admonitionblock warning\"\u003e\n\u003ctable\u003e\n\u003ctr\u003e\n\u003ctd class=\"icon\"\u003e\n\u003cdiv class=\"title\"\u003e警告\u003c/div\u003e\n\u003c/td\u003e\n\u003ctd class=\"content\"\u003e\n响应会被完全缓冲，请使用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/web/codec/BodyCodec.html#pipe-io.vertx.core.streams.WriteStream-\"\u003eBodyCodec.pipe\u003c/a\u003e\u003c/code\u003e\n将响应接入写入流。\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_decoding_responses\"\u003e\u003ca class=\"anchor\" href=\"#_decoding_responses\"\u003e\u003c/a\u003e响应解码\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e缺省状况下，Web Client提供一个response body作为 \u003ccode\u003eBuffer\u003c/code\u003e ，\n并且未运用任何解码器。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e可以使用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/web/codec/BodyCodec.html\"\u003eBodyCodec\u003c/a\u003e\u003c/code\u003e 实现以下自定义response body解码：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e文本字符串\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eJson 对象\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eJson 映射的 POJO\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/streams/WriteStream.html\"\u003eWriteStream\u003c/a\u003e\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e一个body解码器可以将任意二进制数据流解码为特定的对象实例，\n从而节省了您自己在响应处理器里解码的步骤。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e使用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/web/codec/BodyCodec.html#jsonObject--\"\u003eBodyCodec.jsonObject\u003c/a\u003e\u003c/code\u003e 解码一个 Json 对象：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eclient\n  .get(\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;myserver.mycompany.com\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;/some-uri\u0026quot;\u003c/span\u003e)\n  .as(BodyCodec.jsonObject())\n  .send()\n  .onSuccess(res -\u0026gt; {\n    JsonObject body = res.body();\n\n    System.out.println(\n      \u003cspan class=\"hljs-string\"\u003e\u0026quot;Received response with status code\u0026quot;\u003c/span\u003e +\n        res.statusCode() +\n        \u003cspan class=\"hljs-string\"\u003e\u0026quot; with body \u0026quot;\u003c/span\u003e +\n        body);\n  })\n  .onFailure(err -\u0026gt;\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Something went wrong \u0026quot;\u003c/span\u003e + err.getMessage()));\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e在Java，Groovy以及Kotlin中，可以自定义Json映射POJO解码：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eclient\n  .get(\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;myserver.mycompany.com\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;/some-uri\u0026quot;\u003c/span\u003e)\n  .as(BodyCodec.json(User.class))\n  .send()\n  .onSuccess(res -\u0026gt; {\n    User user = res.body();\n\n    System.out.println(\n      \u003cspan class=\"hljs-string\"\u003e\u0026quot;Received response with status code\u0026quot;\u003c/span\u003e +\n        res.statusCode() +\n        \u003cspan class=\"hljs-string\"\u003e\u0026quot; with body \u0026quot;\u003c/span\u003e +\n        user.getFirstName() +\n        \u003cspan class=\"hljs-string\"\u003e\u0026quot; \u0026quot;\u003c/span\u003e +\n        user.getLastName());\n  })\n  .onFailure(err -\u0026gt;\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Something went wrong \u0026quot;\u003c/span\u003e + err.getMessage()));\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e如果返回数据非常大，则应该使用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/web/codec/BodyCodec.html#pipe-io.vertx.core.streams.WriteStream-\"\u003eBodyCodec.pipe\u003c/a\u003e\u003c/code\u003e 方法。\n这个编码器将响应缓存泵入到  \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/streams/WriteStream.html\"\u003eWriteStream\u003c/a\u003e\u003c/code\u003e 中，\n并且在异步结果响应中，发出操作成功或失败的信号。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eclient\n  .get(\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;myserver.mycompany.com\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;/some-uri\u0026quot;\u003c/span\u003e)\n  .as(BodyCodec.pipe(writeStream))\n  .send()\n  .onSuccess(res -\u0026gt;\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Received response with status code\u0026quot;\u003c/span\u003e + res.statusCode()))\n  .onFailure(err -\u0026gt;\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Something went wrong \u0026quot;\u003c/span\u003e + err.getMessage()));\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e经常会看到API返回一个JSON对象流。例如，Twitter API可以提供一个推文回馈。\n处理这个情况，您可以使用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/web/codec/BodyCodec.html#jsonStream-io.vertx.core.parsetools.JsonParser-\"\u003eBodyCodec.jsonStream\u003c/a\u003e\u003c/code\u003e。\n传递一个JSON解析器，该解析器从HTTP响应中开始读取JSON流。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eJsonParser parser = JsonParser.newParser().objectValueMode();\nparser.handler(event -\u0026gt; {\n  JsonObject object = event.objectValue();\n  System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Got \u0026quot;\u003c/span\u003e + object.encode());\n});\nclient\n  .get(\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;myserver.mycompany.com\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;/some-uri\u0026quot;\u003c/span\u003e)\n  .as(BodyCodec.jsonStream(parser))\n  .send()\n  .onSuccess(res -\u0026gt;\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Received response with status code\u0026quot;\u003c/span\u003e + res.statusCode()))\n  .onFailure(err -\u0026gt;\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Something went wrong \u0026quot;\u003c/span\u003e + err.getMessage()));\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e最后，如您对响应结果不感兴趣，可用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/web/codec/BodyCodec.html#none--\"\u003eBodyCodec.none\u003c/a\u003e\u003c/code\u003e\n简单的丢弃响应体。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eclient\n  .get(\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;myserver.mycompany.com\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;/some-uri\u0026quot;\u003c/span\u003e)\n  .as(BodyCodec.none())\n  .send()\n  .onSuccess(res -\u0026gt;\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Received response with status code\u0026quot;\u003c/span\u003e + res.statusCode()))\n  .onFailure(err -\u0026gt;\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Something went wrong \u0026quot;\u003c/span\u003e + err.getMessage()));\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e若无法预知响应内容类型，您依旧可以在获取结果之后，用 \u003ccode\u003ebodyAsXXX()\u003c/code\u003e\n方法将其转换成指定的类型\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eclient\n  .get(\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;myserver.mycompany.com\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;/some-uri\u0026quot;\u003c/span\u003e)\n  .send()\n  .onSuccess(res -\u0026gt; {\n    \u003cspan class=\"hljs-comment\"\u003e// 将结果解码为Json对象\u003c/span\u003e\n    JsonObject body = res.bodyAsJsonObject();\n\n    System.out.println(\n      \u003cspan class=\"hljs-string\"\u003e\u0026quot;Received response with status code\u0026quot;\u003c/span\u003e +\n        res.statusCode() +\n        \u003cspan class=\"hljs-string\"\u003e\u0026quot; with body \u0026quot;\u003c/span\u003e +\n        body);\n  })\n  .onFailure(err -\u0026gt;\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Something went wrong \u0026quot;\u003c/span\u003e + err.getMessage()));\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"admonitionblock warning\"\u003e\n\u003ctable\u003e\n\u003ctr\u003e\n\u003ctd class=\"icon\"\u003e\n\u003cdiv class=\"title\"\u003e警告\u003c/div\u003e\n\u003c/td\u003e\n\u003ctd class=\"content\"\u003e\n这种方式仅对响应结果为buffer有效。\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"response-predicates\"\u003e\u003ca class=\"anchor\" href=\"#response-predicates\"\u003e\u003c/a\u003e响应谓词\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e默认的，仅当在网络级别发生错误时，Vert.x Web Client请求才以错误结尾。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e换言之， 您必须在收到响应后手动执行健全性检查：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eclient\n  .get(\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;myserver.mycompany.com\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;/some-uri\u0026quot;\u003c/span\u003e)\n  .send()\n  .onSuccess(res -\u0026gt; {\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (\n      res.statusCode() == \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e \u0026amp;\u0026amp;\n        res.getHeader(\u003cspan class=\"hljs-string\"\u003e\u0026quot;content-type\u0026quot;\u003c/span\u003e).equals(\u003cspan class=\"hljs-string\"\u003e\u0026quot;application/json\u0026quot;\u003c/span\u003e)) {\n      \u003cspan class=\"hljs-comment\"\u003e// 将结果解码为Json对象\u003c/span\u003e\n      JsonObject body = res.bodyAsJsonObject();\n\n      System.out.println(\n        \u003cspan class=\"hljs-string\"\u003e\u0026quot;Received response with status code\u0026quot;\u003c/span\u003e +\n          res.statusCode() +\n          \u003cspan class=\"hljs-string\"\u003e\u0026quot; with body \u0026quot;\u003c/span\u003e +\n          body);\n    } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n      System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Something went wrong \u0026quot;\u003c/span\u003e + res.statusCode());\n    }\n  })\n  .onFailure(err -\u0026gt;\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Something went wrong \u0026quot;\u003c/span\u003e + err.getMessage()));\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您可以灵活的替换成清晰简明的 \u003cem\u003eresponse predicates\u003c/em\u003e 。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/web/client/predicate/ResponsePredicate.html\"\u003eResponse predicates\u003c/a\u003e\u003c/code\u003e\n当响应不符合条件会使请求失败。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eWeb Client附带了一组开箱即用的谓词，可供使用：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eclient\n  .get(\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;myserver.mycompany.com\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;/some-uri\u0026quot;\u003c/span\u003e)\n  .expect(ResponsePredicate.SC_SUCCESS)\n  .expect(ResponsePredicate.JSON)\n  .send()\n  .onSuccess(res -\u0026gt; {\n    \u003cspan class=\"hljs-comment\"\u003e// 安全地将body解码为json对象\u003c/span\u003e\n    JsonObject body = res.bodyAsJsonObject();\n    System.out.println(\n      \u003cspan class=\"hljs-string\"\u003e\u0026quot;Received response with status code\u0026quot;\u003c/span\u003e +\n        res.statusCode() +\n        \u003cspan class=\"hljs-string\"\u003e\u0026quot; with body \u0026quot;\u003c/span\u003e +\n        body);\n  })\n  .onFailure(err -\u0026gt;\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Something went wrong \u0026quot;\u003c/span\u003e + err.getMessage()));\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e当现有谓词不满足您的需求时，您还可以创建自定义谓词：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eFunction\u0026lt;HttpResponse\u0026lt;Void\u0026gt;, ResponsePredicateResult\u0026gt; methodsPredicate =\n  resp -\u0026gt; {\n    String methods = resp.getHeader(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Access-Control-Allow-Methods\u0026quot;\u003c/span\u003e);\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (methods != \u003cspan class=\"hljs-keyword\"\u003enull\u003c/span\u003e) {\n      \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (methods.contains(\u003cspan class=\"hljs-string\"\u003e\u0026quot;POST\u0026quot;\u003c/span\u003e)) {\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e ResponsePredicateResult.success();\n      }\n    }\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e ResponsePredicateResult.failure(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Does not work\u0026quot;\u003c/span\u003e);\n  };\n\n\u003cspan class=\"hljs-comment\"\u003e// 发送预检CORS请求\u003c/span\u003e\nclient\n  .request(\n    HttpMethod.OPTIONS,\n    \u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e,\n    \u003cspan class=\"hljs-string\"\u003e\u0026quot;myserver.mycompany.com\u0026quot;\u003c/span\u003e,\n    \u003cspan class=\"hljs-string\"\u003e\u0026quot;/some-uri\u0026quot;\u003c/span\u003e)\n  .putHeader(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Origin\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;Server-b.com\u0026quot;\u003c/span\u003e)\n  .putHeader(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Access-Control-Request-Method\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;POST\u0026quot;\u003c/span\u003e)\n  .expect(methodsPredicate)\n  .send()\n  .onSuccess(res -\u0026gt; {\n    \u003cspan class=\"hljs-comment\"\u003e// 立即处理POST请求\u003c/span\u003e\n  })\n  .onFailure(err -\u0026gt;\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Something went wrong \u0026quot;\u003c/span\u003e + err.getMessage()));\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"admonitionblock tip\"\u003e\n\u003ctable\u003e\n\u003ctr\u003e\n\u003ctd class=\"icon\"\u003e\n\u003cdiv class=\"title\"\u003e提示\u003c/div\u003e\n\u003c/td\u003e\n\u003ctd class=\"content\"\u003e\n响应谓词是在收到响应体 \u003cem\u003e之前\u003c/em\u003e 对其进行评估。 因此，\n您无法在谓词测试函数中检查response body。\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect3\"\u003e\n\u003ch4 id=\"_predefined_predicates\"\u003e\u003ca class=\"anchor\" href=\"#_predefined_predicates\"\u003e\u003c/a\u003e预定义谓词\u003c/h4\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e为了方便起见，Web Client附带了一些常见用例的谓词。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e对于状态码，例如 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/web/client/predicate/ResponsePredicate.html#SC_SUCCESS\"\u003eResponsePredicate.SC_SUCCESS\u003c/a\u003e\u003c/code\u003e ，\n验证响应具有 \u003ccode\u003e2xx\u003c/code\u003e 代码，您也可以自定义创建一个\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eclient\n  .get(\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;myserver.mycompany.com\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;/some-uri\u0026quot;\u003c/span\u003e)\n  .expect(ResponsePredicate.status(\u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e202\u003c/span\u003e))\n  .send()\n  .onSuccess(res -\u0026gt; {\n    \u003cspan class=\"hljs-comment\"\u003e// ....\u003c/span\u003e\n  });\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e对于content types，例如 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/web/client/predicate/ResponsePredicate.html#JSON\"\u003eResponsePredicate.JSON\u003c/a\u003e\u003c/code\u003e ，\n验证响应具有JSON数据，您也可以自定义创建一个\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eclient\n  .get(\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;myserver.mycompany.com\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;/some-uri\u0026quot;\u003c/span\u003e)\n  .expect(ResponsePredicate.contentType(\u003cspan class=\"hljs-string\"\u003e\u0026quot;some/content-type\u0026quot;\u003c/span\u003e))\n  .send()\n  .onSuccess(res -\u0026gt; {\n    \u003cspan class=\"hljs-comment\"\u003e// ....\u003c/span\u003e\n  });\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e请参考 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/web/client/predicate/ResponsePredicate.html\"\u003eResponsePredicate\u003c/a\u003e\u003c/code\u003e 文档获取预定义谓词的完整列表。\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect3\"\u003e\n\u003ch4 id=\"_creating_custom_failures\"\u003e\u003ca class=\"anchor\" href=\"#_creating_custom_failures\"\u003e\u003c/a\u003e创建自定义失败\u003c/h4\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e默认情况下，响应谓词（包括预定义的）使用默认的错误转换器，\n它将丢弃body并传递一条简单消息。您可以通过自定义异常类来替换错误转换器：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eResponsePredicate predicate = ResponsePredicate.create(\n  ResponsePredicate.SC_SUCCESS,\n  result -\u0026gt; \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e MyCustomException(result.message()));\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e许多Web API在错误响应中提供了详细信息。\n例如， \u003ca href=\"https://developer.marvel.com/docs\"\u003eMarvel API\u003c/a\u003e 使用此JSON对象格式：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-javascript\" data-lang=\"javascript\"\u003e{\n \u003cspan class=\"hljs-string\"\u003e\u0026quot;code\u0026quot;\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;InvalidCredentials\u0026quot;\u003c/span\u003e,\n \u003cspan class=\"hljs-string\"\u003e\u0026quot;message\u0026quot;\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;The passed API key is invalid.\u0026quot;\u003c/span\u003e\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e为避免丢失此信息，在错误发生之前，\n可以在转换器被调用之前等待响应body被完全接收：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eErrorConverter converter = ErrorConverter.createFullBody(result -\u0026gt; {\n\n  \u003cspan class=\"hljs-comment\"\u003e// 响应body被完全接收之后调用\u003c/span\u003e\n  HttpResponse\u0026lt;Buffer\u0026gt; response = result.response();\n\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (response\n    .getHeader(\u003cspan class=\"hljs-string\"\u003e\u0026quot;content-type\u0026quot;\u003c/span\u003e)\n    .equals(\u003cspan class=\"hljs-string\"\u003e\u0026quot;application/json\u0026quot;\u003c/span\u003e)) {\n\n    \u003cspan class=\"hljs-comment\"\u003e// 错误body是JSON数据\u003c/span\u003e\n    JsonObject body = response.bodyAsJsonObject();\n\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e MyCustomException(\n      body.getString(\u003cspan class=\"hljs-string\"\u003e\u0026quot;code\u0026quot;\u003c/span\u003e),\n      body.getString(\u003cspan class=\"hljs-string\"\u003e\u0026quot;message\u0026quot;\u003c/span\u003e));\n  }\n\n  \u003cspan class=\"hljs-comment\"\u003e// 返回自定义的消息\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e MyCustomException(result.message());\n});\n\nResponsePredicate predicate = ResponsePredicate\n  .create(ResponsePredicate.SC_SUCCESS, converter);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"admonitionblock warning\"\u003e\n\u003ctable\u003e\n\u003ctr\u003e\n\u003ctd class=\"icon\"\u003e\n\u003cdiv class=\"title\"\u003e警告\u003c/div\u003e\n\u003c/td\u003e\n\u003ctd class=\"content\"\u003e\n在Java中，当捕获了stack trace，\n创建异常可能会带来性能开销，所以您可能想要创建不捕获stack trace的异常。默认情况下，\n报告异常使用不捕获stack trace的异常。\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_handling_30x_redirections\"\u003e\u003ca class=\"anchor\" href=\"#_handling_30x_redirections\"\u003e\u003c/a\u003e处理 30x 重定向\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e默认情况下，客户端跟随着重定向，您可以在 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/web/client/WebClientOptions.html\"\u003eWebClientOptions\u003c/a\u003e\u003c/code\u003e 配置默认行为：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eWebClient client = WebClient\n  .create(vertx, \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e WebClientOptions().setFollowRedirects(\u003cspan class=\"hljs-keyword\"\u003efalse\u003c/span\u003e));\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e客户端最多可以跟随 \u003ccode\u003e16\u003c/code\u003e 个请求重定向，可以在相同的配置中进行更改：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eWebClient client = WebClient\n  .create(vertx, \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e WebClientOptions().setMaxRedirects(\u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e));\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"admonitionblock note\"\u003e\n\u003ctable\u003e\n\u003ctr\u003e\n\u003ctd class=\"icon\"\u003e\n\u003cdiv class=\"title\"\u003e注意\u003c/div\u003e\n\u003c/td\u003e\n\u003ctd class=\"content\"\u003e\n出于安全原因，客户端不会使用除了GET或HEAD的方法来跟随着重定向请求\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_http_response_caching\"\u003e\u003ca class=\"anchor\" href=\"#_http_response_caching\"\u003e\u003c/a\u003eHTTP 响应缓存\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eVert.x web 提供了一个可以缓存 HTTP 响应的实现， 您可以创建一个 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/web/client/CachingWebClient.html\"\u003eCachingWebClient\u003c/a\u003e\u003c/code\u003e 实例。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_creating_a_caching_web_client\"\u003e\u003ca class=\"anchor\" href=\"#_creating_a_caching_web_client\"\u003e\u003c/a\u003e创建一个带缓存的 web client\u003c/h3\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eWebClient client = WebClient.create(vertx);\nWebClient cachingWebClient = CachingWebClient.create(client);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_configuring_what_is_cached\"\u003e\u003ca class=\"anchor\" href=\"#_configuring_what_is_cached\"\u003e\u003c/a\u003e配置缓存内容\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e默认情况下，带缓存的 web client 只会缓存通过 \u003ccode\u003eGET\u003c/code\u003e 方法返回的状态值为 \u003ccode\u003e200\u003c/code\u003e, \u003ccode\u003e301\u003c/code\u003e, 或 \u003ccode\u003e404\u003c/code\u003e 的响应内容。\n带有 \u003ccode\u003eVary\u003c/code\u003e 头部的响应默认情况下也不会被缓存。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您可以在创建客户端时，通过传入一个 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/web/client/CachingWebClientOptions.html\"\u003eCachingWebClientOptions\u003c/a\u003e\u003c/code\u003e 实例来配置缓存策略。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eCachingWebClientOptions options = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e CachingWebClientOptions()\n  .addCachedMethod(HttpMethod.HEAD)\n  .removeCachedStatusCode(\u003cspan class=\"hljs-number\"\u003e301\u003c/span\u003e)\n  .setEnableVaryCaching(\u003cspan class=\"hljs-keyword\"\u003etrue\u003c/span\u003e);\n\nWebClient client = WebClient.create(vertx);\nWebClient cachingWebClient = CachingWebClient.create(client, options);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e如果响应的 \u003ccode\u003eCache-Control\u003c/code\u003e 头部内容为 \u003ccode\u003eprivate\u003c/code\u003e 策略，那么该响应不会被缓存，除非\n该 web client 是一个 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/web/client/WebClientSession.html\"\u003eWebClientSession\u003c/a\u003e\u003c/code\u003e 的实例。 请参阅 \u003ca href=\"#_handling_private_responses\"\u003e处理私有响应\u003c/a\u003e 。\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_providing_an_external_store\"\u003e\u003ca class=\"anchor\" href=\"#_providing_an_external_store\"\u003e\u003c/a\u003e使用别的储存实现\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e默认情况下， 带缓存的客户端使用一个本地的 \u003ccode\u003eMap\u003c/code\u003e 来保存响应。 您也可以使用您自己的储存实现类来保存响应内容。\n您需要自己实现 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/web/client/spi/CacheStore.html\"\u003eCacheStore\u003c/a\u003e\u003c/code\u003e 接口，并且在创建客户端时指定使用您的实现类。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eWebClient client = WebClient.create(vertx);\nCacheStore store = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e NoOpCacheStore(); \u003cspan class=\"hljs-comment\"\u003e// or any store you like\u003c/span\u003e\nWebClient cachingWebClient = CachingWebClient.create(client, store);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_handling_private_responses\"\u003e\u003ca class=\"anchor\" href=\"#_handling_private_responses\"\u003e\u003c/a\u003e处理私有响应\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e为了缓存私有响应， \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/web/client/CachingWebClient.html\"\u003eCachingWebClient\u003c/a\u003e\u003c/code\u003e 可以与\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/web/client/WebClientSession.html\"\u003eWebClientSession\u003c/a\u003e\u003c/code\u003e 结合。执行以下代码，那些在 \u003ccode\u003eCache-Control\u003c/code\u003e 头部中指定为 \u003ccode\u003epublic\u003c/code\u003e 缓存策略的\n响应，会被缓存到和 web client 一起创建的 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/web/client/spi/CacheStore.html\"\u003eCacheStore\u003c/a\u003e\u003c/code\u003e\n中。 私有响应，也就是 \u003ccode\u003eCache-Control\u003c/code\u003e 头部中指定为 \u003ccode\u003eprivate\u003c/code\u003e 缓存策略的响应，会被缓存到\n会话中，以确保缓存的响应不会被泄露给其他用户（会话）。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e要创建一个可以缓存私有响应的客户端，需要传入一个 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/web/client/CachingWebClient.html\"\u003eCachingWebClient\u003c/a\u003e\u003c/code\u003e\n给 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/web/client/WebClientSession.html\"\u003eWebClientSession\u003c/a\u003e\u003c/code\u003e。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eWebClient client = WebClient.create(vertx);\nWebClient cachingWebClient = CachingWebClient.create(client);\nWebClient sessionClient = WebClientSession.create(cachingWebClient);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_using_https\"\u003e\u003ca class=\"anchor\" href=\"#_using_https\"\u003e\u003c/a\u003e使用 HTTPS\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eVert.x Web Client 可以用跟 Vert.x \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpClient.html\"\u003eHttpClient\u003c/a\u003e\u003c/code\u003e 完全一样的方式配置使用HTTPS。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您可以指定每个请求的行为\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eclient\n  .get(\u003cspan class=\"hljs-number\"\u003e443\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;myserver.mycompany.com\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;/some-uri\u0026quot;\u003c/span\u003e)\n  .ssl(\u003cspan class=\"hljs-keyword\"\u003etrue\u003c/span\u003e)\n  .send()\n  .onSuccess(res -\u0026gt;\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Received response with status code\u0026quot;\u003c/span\u003e + res.statusCode()))\n  .onFailure(err -\u0026gt;\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Something went wrong \u0026quot;\u003c/span\u003e + err.getMessage()));\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e或使用带有绝对URI参数的创建方法\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eclient\n  .getAbs(\u003cspan class=\"hljs-string\"\u003e\u0026quot;https://myserver.mycompany.com:4043/some-uri\u0026quot;\u003c/span\u003e)\n  .send()\n  .onSuccess(res -\u0026gt;\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Received response with status code\u0026quot;\u003c/span\u003e + res.statusCode()))\n  .onFailure(err -\u0026gt;\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Something went wrong \u0026quot;\u003c/span\u003e + err.getMessage()));\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_sessions_management\"\u003e\u003ca class=\"anchor\" href=\"#_sessions_management\"\u003e\u003c/a\u003e会话管理\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eVert.x Web提供了Web会话管理设施；使用它，您需要对于每个用户（会话）创建一个\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/web/client/WebClientSession.html\"\u003eWebClientSession\u003c/a\u003e\u003c/code\u003e ，并使用它来代替\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/web/client/WebClient.html\"\u003eWebClient\u003c/a\u003e\u003c/code\u003e 。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_creating_a_webclientsession\"\u003e\u003ca class=\"anchor\" href=\"#_creating_a_webclientsession\"\u003e\u003c/a\u003e创建一个 WebClientSession\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您像下面一样创建一个 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/web/client/WebClientSession.html\"\u003eWebClientSession\u003c/a\u003e\u003c/code\u003e 实例\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eWebClient client = WebClient.create(vertx);\nWebClientSession session = WebClientSession.create(client);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_making_requests_2\"\u003e\u003ca class=\"anchor\" href=\"#_making_requests_2\"\u003e\u003c/a\u003e发出请求\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e一旦创建， \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/web/client/WebClientSession.html\"\u003eWebClientSession\u003c/a\u003e\u003c/code\u003e 就可以代替\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/web/client/WebClient.html\"\u003eWebClient\u003c/a\u003e\u003c/code\u003e 去做 HTTP(s) 请求并且自动管理从您正在调用的\n服务器收到的所有cookie。\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_setting_session_level_headers\"\u003e\u003ca class=\"anchor\" href=\"#_setting_session_level_headers\"\u003e\u003c/a\u003e设置会话级别headers\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您可以按以下步骤设置任何会话级别的headers到要添加的每个请求：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eWebClientSession session = WebClientSession.create(client);\nsession.addHeader(\u003cspan class=\"hljs-string\"\u003e\u0026quot;my-jwt-token\u0026quot;\u003c/span\u003e, jwtToken);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e然后 headers 将被添加到每个请求中； 注意 这些 headers 将发送给所有主机；\n如果您需要发送不同的 headers 到不同的主机， 您必须将它们手动添加到每个单个请求中，并且不能添加到\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/web/client/WebClientSession.html\"\u003eWebClientSession\u003c/a\u003e\u003c/code\u003e 。\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_oauth2_security\"\u003e\u003ca class=\"anchor\" href=\"#_oauth2_security\"\u003e\u003c/a\u003eOAuth2 安全\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eVert.x web 提供了 web 会话管理的功能； 您可以给每个用户（会话）创建一个\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/web/client/OAuth2WebClient.html\"\u003eOAuth2WebClient\u003c/a\u003e\u003c/code\u003e，并且用其来替代\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/web/client/WebClient.html\"\u003eWebClient\u003c/a\u003e\u003c/code\u003e。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_creating_an_oauth2_client\"\u003e\u003ca class=\"anchor\" href=\"#_creating_an_oauth2_client\"\u003e\u003c/a\u003e创建一个 Oauth2 客户端\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您可以用以下代码创建一个 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/web/client/OAuth2WebClient.html\"\u003eOAuth2WebClient\u003c/a\u003e\u003c/code\u003e 的实例：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eWebClient client = WebClient.create(vertx);\nOAuth2WebClient oauth2 = OAuth2WebClient.create(\n    client,\n    OAuth2Auth.create(vertx, \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e OAuth2Options(\u003cspan class=\"hljs-comment\"\u003e/* enter IdP config */\u003c/span\u003e)))\n\n  \u003cspan class=\"hljs-comment\"\u003e// configure the initial credentials (needed to fetch if needed\u003c/span\u003e\n  \u003cspan class=\"hljs-comment\"\u003e// the access_token\u003c/span\u003e\n  .withCredentials(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e TokenCredentials(\u003cspan class=\"hljs-string\"\u003e\u0026quot;some.jwt.token\u0026quot;\u003c/span\u003e));\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e客户端也可以使用 OpenId 服务发现来进行配置，例如通过以下操作来\n连接一个 keycloak 服务器：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eKeycloakAuth.discover(\n    vertx,\n    \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e OAuth2Options().setSite(\u003cspan class=\"hljs-string\"\u003e\u0026quot;https://keycloakserver.com\u0026quot;\u003c/span\u003e))\n  .onSuccess(oauth -\u0026gt; {\n    OAuth2WebClient client = OAuth2WebClient.create(\n        WebClient.create(vertx),\n        oauth)\n      \u003cspan class=\"hljs-comment\"\u003e// if your keycloak is configured for password_credentials_flow\u003c/span\u003e\n      .withCredentials(\n        \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e UsernamePasswordCredentials(\u003cspan class=\"hljs-string\"\u003e\u0026quot;bob\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;s3cret\u0026quot;\u003c/span\u003e));\n  });\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_making_requests_3\"\u003e\u003ca class=\"anchor\" href=\"#_making_requests_3\"\u003e\u003c/a\u003e发送请求\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e客户端创建完毕后， 就可以使用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/web/client/OAuth2WebClient.html\"\u003eOAuth2WebClient\u003c/a\u003e\u003c/code\u003e 来代替\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/web/client/WebClient.html\"\u003eWebClient\u003c/a\u003e\u003c/code\u003e 发送 HTTP(s) 请求，并且自动管理从正在请求的服务器接收\n到的所有 cookie。\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_avoid_expired_tokens\"\u003e\u003ca class=\"anchor\" href=\"#_avoid_expired_tokens\"\u003e\u003c/a\u003e避免过期的 token\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您可以使用以下代码来给每个请求设置 token 的过期时间：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eOAuth2WebClient client = OAuth2WebClient.create(\n    baseClient,\n    oAuth2Auth,\n    \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e OAuth2WebClientOptions()\n      .setLeeway(\u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e));\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e如果要发送一个请求，那么当前正在使用的用户对象会被检查是否到达了设置的过期时间。\n如果需要的话，客户端会刷新 token，否则中止请求并抛出异常。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e请求仍然可能因为 token 过期而失败，这是因为服务端也会验证一遍 token 是否\n过期。 为了减少用户端的工作， 客户端可以配置为当返回的状态码为 \u003cstrong\u003e401\u003c/strong\u003e （禁止访问）时\n只进行 \u003cstrong\u003e单次\u003c/strong\u003e 重试。 当 \u003ccode\u003erefreshTokenOnForbidden\u003c/code\u003e 被设置为 \u003ccode\u003etrue\u003c/code\u003e 时， 客户端会\n用一个新的 token 重试一次，再给用户返回\nhandler/promise 。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eOAuth2WebClient client = OAuth2WebClient.create(\n  baseClient,\n  oAuth2Auth,\n  \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e OAuth2WebClientOptions()\n    \u003cspan class=\"hljs-comment\"\u003e// the client will attempt a single token request, if the request\u003c/span\u003e\n    \u003cspan class=\"hljs-comment\"\u003e// if the status code of the response is 401\u003c/span\u003e\n    \u003cspan class=\"hljs-comment\"\u003e// there will be only 1 attempt, so the second consecutive 401\u003c/span\u003e\n    \u003cspan class=\"hljs-comment\"\u003e// will be passed down to your handler/promise\u003c/span\u003e\n    .setRenewTokenOnForbidden(\u003cspan class=\"hljs-keyword\"\u003etrue\u003c/span\u003e));\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_rxjava_3_api\"\u003e\u003ca class=\"anchor\" href=\"#_rxjava_3_api\"\u003e\u003c/a\u003eRxJava 3 API\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eRxJava \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/rxjava3/ext/web/client/HttpRequest.html\"\u003eHttpRequest\u003c/a\u003e\u003c/code\u003e 提供了RX化的原始版本API，\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/rxjava3/ext/web/client/HttpRequest.html#rxSend--\"\u003erxSend\u003c/a\u003e\u003c/code\u003e 方法返回一个能够订阅到HTTP请求的 \u003ccode\u003eSingle\u0026lt;HttpResponse\u0026lt;Buffer\u0026gt;\u0026gt;\u003c/code\u003e ，因此，\u003ccode\u003eSingle\u003c/code\u003e 能被订阅多次。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eSingle\u0026lt;HttpResponse\u0026lt;Buffer\u0026gt;\u0026gt; single = client\n  .get(\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;myserver.mycompany.com\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;/some-uri\u0026quot;\u003c/span\u003e)\n  .rxSend();\n\n\u003cspan class=\"hljs-comment\"\u003e// Single订阅后，发送请求\u003c/span\u003e\nsingle.subscribe(response -\u0026gt; System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Received 1st response with status code\u0026quot;\u003c/span\u003e + response.statusCode()), error -\u0026gt; System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Something went wrong \u0026quot;\u003c/span\u003e + error.getMessage()));\n\n\u003cspan class=\"hljs-comment\"\u003e// 发送另一个请求\u003c/span\u003e\nsingle.subscribe(response -\u0026gt; System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Received 2nd response with status code\u0026quot;\u003c/span\u003e + response.statusCode()), error -\u0026gt; System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Something went wrong \u0026quot;\u003c/span\u003e + error.getMessage()));\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e获得的 \u003ccode\u003eSingle\u003c/code\u003e 可以与RxJava API自然地组合和链式调用\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eSingle\u0026lt;String\u0026gt; url = client\n  .get(\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;myserver.mycompany.com\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;/some-uri\u0026quot;\u003c/span\u003e)\n  .rxSend()\n  .map(HttpResponse::bodyAsString);\n\n\u003cspan class=\"hljs-comment\"\u003e// 使用flatMap操作，向Single的URL上发出请求\u003c/span\u003e\nurl\n  .flatMap(u -\u0026gt; client.getAbs(u).rxSend())\n  .subscribe(response -\u0026gt; System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Received response with status code\u0026quot;\u003c/span\u003e + response.statusCode()), error -\u0026gt; System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Something went wrong \u0026quot;\u003c/span\u003e + error.getMessage()));\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e同样的API们是可用的\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eSingle\u0026lt;HttpResponse\u0026lt;JsonObject\u0026gt;\u0026gt; single = client\n  .get(\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;myserver.mycompany.com\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;/some-uri\u0026quot;\u003c/span\u003e)\n  .putHeader(\u003cspan class=\"hljs-string\"\u003e\u0026quot;some-header\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;header-value\u0026quot;\u003c/span\u003e)\n  .addQueryParam(\u003cspan class=\"hljs-string\"\u003e\u0026quot;some-param\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;param value\u0026quot;\u003c/span\u003e)\n  .as(BodyCodec.jsonObject())\n  .rxSend();\nsingle.subscribe(resp -\u0026gt; {\n  System.out.println(resp.statusCode());\n  System.out.println(resp.body());\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/rxjava3/ext/web/client/HttpRequest.html#rxSendStream-io.reactivex.rxjava3.core.Flowable-\"\u003erxSendStream\u003c/a\u003e\u003c/code\u003e\n应首选发送 \u003ccode\u003eFlowable\u0026lt;Buffer\u0026gt;\u003c/code\u003e body。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eFlowable\u0026lt;Buffer\u0026gt; body = getPayload();\n\nSingle\u0026lt;HttpResponse\u0026lt;Buffer\u0026gt;\u0026gt; single = client\n  .post(\u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;myserver.mycompany.com\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;/some-uri\u0026quot;\u003c/span\u003e)\n  .rxSendStream(body);\nsingle.subscribe(resp -\u0026gt; {\n  System.out.println(resp.statusCode());\n  System.out.println(resp.body());\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e订阅后， \u003ccode\u003ebody\u003c/code\u003e 将被订阅，其内容被用于请求。\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_domain_sockets\"\u003e\u003ca class=\"anchor\" href=\"#_domain_sockets\"\u003e\u003c/a\u003e域套接字\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e自3.7.1后， Web Client 支持domain sockets， 例如，您可以跟 \u003ca href=\"https://docs.docker.com/engine/reference/commandline/dockerd/\"\u003elocal Docker daemon\u003c/a\u003e 交流。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e为了达成这个目的， \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/Vertx.html\"\u003eVertx\u003c/a\u003e\u003c/code\u003e 实例必须使用native transport创建，\n您可以阅读 Vert.x 核心文档，它清楚地说明了这一点。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eSocketAddress serverAddress = SocketAddress\n  .domainSocketAddress(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/var/run/docker.sock\u0026quot;\u003c/span\u003e);\n\n\u003cspan class=\"hljs-comment\"\u003e// 我们仍然需要指定主机和端口，\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// 因此请求的HTTP header 是 localhost:8080\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// 否则将是错误格式的HTTP请求\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// 在此示例中，实际值并不重要\u003c/span\u003e\nclient\n  .request(\n    HttpMethod.GET,\n    serverAddress,\n    \u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e,\n    \u003cspan class=\"hljs-string\"\u003e\u0026quot;localhost\u0026quot;\u003c/span\u003e,\n    \u003cspan class=\"hljs-string\"\u003e\u0026quot;/images/json\u0026quot;\u003c/span\u003e)\n  .expect(ResponsePredicate.SC_ACCEPTED)\n  .as(BodyCodec.jsonObject())\n  .send()\n  .onSuccess(res -\u0026gt;\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Current Docker images\u0026quot;\u003c/span\u003e + res.body()))\n  .onFailure(err -\u0026gt;\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Something went wrong \u0026quot;\u003c/span\u003e + err.getMessage()));\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e"},"__N_SSG":true},"page":"/docs/[[...slug]]","query":{"slug":["vertx-web-client","java"]},"buildId":"RBMjO1hqOi6Z1JoWz1U-W","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>