<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="description" content="Vert.x | Reactive applications on the JVM"/><meta name="robots" content="index,follow"/><link rel="shortcut icon" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="48x48" href="/favicons/favicon-48x48.png"/><link rel="alternate" type="application/rss+xml" href="/feed/rss.xml"/><link rel="alternate" type="application/atom+xml" href="/feed/atom.xml"/><link rel="alternate" type="application/json" href="/feed/feed.json"/><title>Kotlin coroutines | Eclipse Vert.x</title><link rel="preload" href="https://api.github.com/repos/vert-x3/vertx-lang-kotlin" as="fetch" crossorigin="anonymous" class="jsx-d38685edc31911e0"/><meta name="next-head-count" content="14"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-6853d859ade043b9.js" defer=""></script><script src="/_next/static/chunks/framework-01395af778c6fb71.js" defer=""></script><script src="/_next/static/chunks/main-2ea7ab41ab691905.js" defer=""></script><script src="/_next/static/chunks/pages/_app-155bbedc7d6c4b74.js" defer=""></script><script src="/_next/static/chunks/778-5eaf13e353ab0b06.js" defer=""></script><script src="/_next/static/chunks/619-34d9218a66d5b123.js" defer=""></script><script src="/_next/static/chunks/629-5a87bb724d19315e.js" defer=""></script><script src="/_next/static/chunks/923-422a567a930c92a9.js" defer=""></script><script src="/_next/static/chunks/434-be9324d6e5b718aa.js" defer=""></script><script src="/_next/static/chunks/pages/docs/%5B%5B...slug%5D%5D-b6a025bc5d4ae207.js" defer=""></script><script src="/_next/static/Zim9h1gpFCKXkIGuQr_Ne/_buildManifest.js" defer=""></script><script src="/_next/static/Zim9h1gpFCKXkIGuQr_Ne/_ssgManifest.js" defer=""></script><script src="/_next/static/Zim9h1gpFCKXkIGuQr_Ne/_middlewareManifest.js" defer=""></script><style id="__jsx-400ec7965926e858">.dropdown-item.jsx-400ec7965926e858{white-space:nowrap;
line-height:2;
width:100%;
padding:0 1.5rem;
cursor:pointer}
.dropdown-item.jsx-400ec7965926e858:hover{background-color:#e9ecef}
.dropdown-item.active.jsx-400ec7965926e858{font-weight:400;
padding-left:.75rem}
.dropdown-item.has-active-siblings.jsx-400ec7965926e858:not(.active){padding-left:calc(0.75rem + 16px + 0.5em)}
.dropdown-item.jsx-400ec7965926e858 .dropdown-check-icon.jsx-400ec7965926e858{width:16px;
margin-right:.5em;
margin-top:1px}</style><style id="__jsx-6650573c8f14945d">.dropdown.jsx-6650573c8f14945d{position:relative;
display:inline-block}
.dropdown.jsx-6650573c8f14945d .dropdown-title.jsx-6650573c8f14945d{margin-right:0;
cursor:pointer;
-webkit-user-select:none;
-moz-user-select:none;
-ms-user-select:none;
user-select:none}
.dropdown.jsx-6650573c8f14945d .dropdown-menu.jsx-6650573c8f14945d{position:absolute;
background-color:#f8f9fa;
box-shadow:0 2px 5px 0 rgba(0, 0, 0, .1);
border-radius:.8rem;
list-style-type:none;
padding:.6666666667rem 0;
margin:.25rem 0 0 0;
z-index:100;
display:none;
-webkit-user-select:none;
-moz-user-select:none;
-ms-user-select:none;
user-select:none}
.dropdown.jsx-6650573c8f14945d .dropdown-menu.jsx-6650573c8f14945d a{color:#4d4d4d;
-webkit-text-decoration:none;
text-decoration:none;
font-weight:300}
.dropdown.jsx-6650573c8f14945d .dropdown-menu.align-right.jsx-6650573c8f14945d{right:0}
.dropdown.jsx-6650573c8f14945d .dropdown-menu.visible.jsx-6650573c8f14945d{display:block}
.dropdown.jsx-6650573c8f14945d .dropdown-menu.jsx-6650573c8f14945d a.jsx-6650573c8f14945d:hover{color:inherit}
.dropdown.jsx-6650573c8f14945d svg{margin-bottom:2px}</style><style id="__jsx-75cbc16d79a176fb">.tooltip.jsx-75cbc16d79a176fb{font-size:.75rem;
color:#4d4d4d;
background-color:#f8f9fa;
border-radius:.4rem;
padding:0 .4rem;
box-shadow:0 0 5px rgba(0, 0, 0, .3);
display:none;
white-space:nowrap;
-webkit-user-select:none;
-moz-user-select:none;
-ms-user-select:none;
user-select:none}
.tooltip.visible.jsx-75cbc16d79a176fb{display:block}
.tooltip.jsx-75cbc16d79a176fb .tooltip-arrow.jsx-75cbc16d79a176fb, .tooltip.jsx-75cbc16d79a176fb .tooltip-arrow.jsx-75cbc16d79a176fb::before{position:absolute;
width:8px;
height:8px;
z-index:-1}
.tooltip.jsx-75cbc16d79a176fb .tooltip-arrow.jsx-75cbc16d79a176fb::before{content:"";
-webkit-transform:rotate(45deg);
-moz-transform:rotate(45deg);
-ms-transform:rotate(45deg);
transform:rotate(45deg);
background:#f8f9fa;
box-shadow:-2px -2px 2px rgba(0, 0, 0, .1)}
.tooltip[data-popper-placement^=top].jsx-75cbc16d79a176fb>.tooltip-arrow.jsx-75cbc16d79a176fb{bottom:-4px}
.tooltip[data-popper-placement^=top].jsx-75cbc16d79a176fb>.tooltip-arrow.jsx-75cbc16d79a176fb::before{-webkit-transform:rotate(225deg);
-moz-transform:rotate(225deg);
-ms-transform:rotate(225deg);
transform:rotate(225deg)}
.tooltip[data-popper-placement^=bottom].jsx-75cbc16d79a176fb>.tooltip-arrow.jsx-75cbc16d79a176fb{top:-4px}
.tooltip[data-popper-placement^=left].jsx-75cbc16d79a176fb>.tooltip-arrow.jsx-75cbc16d79a176fb{right:-4px}
.tooltip[data-popper-placement^=left].jsx-75cbc16d79a176fb>.tooltip-arrow.jsx-75cbc16d79a176fb::before{-webkit-transform:rotate(135deg);
-moz-transform:rotate(135deg);
-ms-transform:rotate(135deg);
transform:rotate(135deg)}
.tooltip[data-popper-placement^=right].jsx-75cbc16d79a176fb>.tooltip-arrow.jsx-75cbc16d79a176fb{left:-4px}
.tooltip[data-popper-placement^=right].jsx-75cbc16d79a176fb>.tooltip-arrow.jsx-75cbc16d79a176fb::before{-webkit-transform:rotate(315deg);
-moz-transform:rotate(315deg);
-ms-transform:rotate(315deg);
transform:rotate(315deg)}</style><style id="__jsx-f705e145f931f504">.navbar{position:absolute;
top:2.75rem;
width:100%}
.navbar a{color:#3c3c3b}
.navbar a.navbar-menu-item, .navbar .dropdown-title{text-transform:uppercase}
.navbar a.navbar-menu-item:hover, .navbar .dropdown-title:hover{-webkit-text-decoration:none;
text-decoration:none;
color:#898987;
-webkit-transition:color .15s ease-in-out;
transition:color .15s ease-in-out}
.navbar .navbar-content{display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex;
-webkit-flex-direction:row;
-ms-flex-direction:row;
flex-direction:row;
-webkit-align-items:center;
-webkit-box-align:center;
-ms-flex-align:center;
align-items:center;
position:relative}
.navbar .navbar-content .navbar-logo{-webkit-flex:1;
-ms-flex:1;
flex:1}
.navbar .navbar-content .navbar-logo img{width:8.3rem}
.navbar .navbar-content .navbar-collapse-button{display:none;
cursor:pointer}
@media (max-width:1000px) {.navbar .navbar-content .navbar-collapse-button{display:inline-block}}
.navbar .navbar-content .navbar-collapse-button span{display:block;
width:33px;
height:4px;
margin-bottom:5px;
position:relative;
background:#3c3c3b;
border-radius:3px;
z-index:1;
transform-origin:4px 0;
-webkit-transition:-webkit-transform .5s cubic-bezier(0.77, 0.2, 0.05, 1), background .5s cubic-bezier(0.77, 0.2, 0.05, 1), opacity .55s ease;
transition:transform .5s cubic-bezier(0.77, 0.2, 0.05, 1), background .5s cubic-bezier(0.77, 0.2, 0.05, 1), opacity .55s ease}
.navbar .navbar-content .navbar-collapse-button span:first-child{transform-origin:0% 0%}
.navbar .navbar-content .navbar-collapse-button span:nth-last-child(2){transform-origin:0% 100%}
.navbar .navbar-content .navbar-right{display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex;
-webkit-flex-direction:row;
-ms-flex-direction:row;
flex-direction:row;
-webkit-align-items:baseline;
-webkit-box-align:baseline;
-ms-flex-align:baseline;
align-items:baseline;
margin-bottom:10px}
@media (max-width:1000px) {.navbar .navbar-content .navbar-right{max-height:0;
-webkit-transition:max-height 200ms ease-in-out;
transition:max-height 200ms ease-in-out;
box-shadow:0 2px 5px 0 rgba(0, 0, 0, .1);
-webkit-flex-direction:column;
-ms-flex-direction:column;
flex-direction:column;
position:absolute;
top:2.75rem;
left:.8rem;
right:.8rem;
background-color:#f8f9fa;
overflow-x:auto;
overflow-y:hidden}}
.navbar .navbar-content .navbar-menu .navbar-menu-item{font-weight:400;
margin-right:2.5rem}
.navbar .navbar-content .navbar-menu .navbar-menu-item.with-drop-down{margin-right:1.8rem}
@media (max-width:1250px) {.navbar .navbar-content .navbar-menu .navbar-menu-item{margin-right:1.5rem}}
@media (max-width:1000px) {.navbar .navbar-content .navbar-menu .navbar-menu-item{display:block;
margin-bottom:1rem;
font-size:1.2rem}}
.navbar .navbar-content .navbar-menu .navbar-menu-item .external-link-icon{margin-left:.25em}
@media (max-width:1000px) {.navbar .navbar-content .navbar-menu{-webkit-flex-direction:column;
-ms-flex-direction:column;
flex-direction:column;
padding:1rem}}
.navbar .navbar-content .navbar-social{margin-left:1.6rem;
font-size:.875rem}
.navbar .navbar-content .navbar-social svg{height:16px;
margin-bottom:2px}
@media (max-width:1000px) {.navbar .navbar-content .navbar-social svg{height:1rem}}
@media (max-width:1250px) {.navbar .navbar-content .navbar-social{margin-left:1rem}}
@media (max-width:1000px) {.navbar .navbar-content .navbar-social{margin-left:auto;
padding:0 1rem 1rem 0;
font-size:1rem}}
@media (max-width:768px) {.navbar{top:1rem}}
.page .navbar{top:0;
padding-top:1.5rem;
padding-bottom:1rem;
position:fixed;
background-color:#fff;
z-index:2}</style><style id="__jsx-bf3edc7191e82cb">.search{position:relative}
.search input{color:#adb5bd;
border:1px solid #dee2e6;
border-radius:.4rem;
font-size:.875rem;
padding:.25rem 1.8rem .35rem 1.8rem;
width:100%;
-webkit-transition:color .15s ease-in-out, border-color .15s ease-in-out;
transition:color .15s ease-in-out, border-color .15s ease-in-out;
background-color:transparent}
.search input:focus{border-color:#adb5bd;
color:#3c3c3b}
.search .autosuggest{position:absolute;
top:0;
-webkit-user-select:none;
-moz-user-select:none;
-ms-user-select:none;
user-select:none;
z-index:-100;
opacity:.5}
.search .search-icon, .search .search-icon-delete{position:absolute;
top:.55rem;
height:1rem;
stroke:#adb5bd;
-webkit-transition:stroke .15s ease-in-out;
transition:stroke .15s ease-in-out}
.search .search-icon{left:.4rem}
.search input:focus+.search-icon{stroke:#6f6970}
.search .search-icon-delete{stroke:#6f6970;
right:.4rem;
height:.75rem;
top:.7rem;
opacity:0;
-webkit-transition:opacity .15s ease-in-out;
transition:opacity .15s ease-in-out;
cursor:text}
.search.has-content .search-icon-delete{opacity:1;
cursor:pointer}</style><style id="__jsx-9ece789f808ef724">.search-results, .search-results-none{font-size:.875rem;
overflow:auto;
list-style-type:none;
padding-left:0;
display:none}
.search-results.visible, .search-results-none.visible{display:block}
.search-results{list-style-type:none;
padding:0;
margin-bottom:0}
.search-results li{display:block;
padding:.5rem;
margin-bottom:1rem;
border-radius:.4rem;
border:1px solid transparent;
cursor:pointer;
max-width:17rem;
overflow-x:hidden}
.search-results li.active{background-color:#f8f9fa;
border:1px solid #e9ecef}
.search-results li h5{margin:0 0 .5rem 0;
font-size:1em}
.search-results li .search-results-highlight{background-color:#ff0}
.search-results-none{padding:1rem .5rem;
text-align:center;
width:100%}</style><style id="__jsx-d1843944f2d67b">.search-panel{display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex;
-webkit-flex-direction:column;
-ms-flex-direction:column;
flex-direction:column;
position:relative}</style><style id="__jsx-d38685edc31911e0">.github-stars.jsx-d38685edc31911e0{display:inline-block}
.github-stars.jsx-d38685edc31911e0 .icon.jsx-d38685edc31911e0{margin-right:.25em}
.github-stars.jsx-d38685edc31911e0 .icon.jsx-d38685edc31911e0 svg{height:1rem}</style><style id="__jsx-aeedcf66895f49d7">footer{font-size:.875rem;
padding-top:3rem;
padding-bottom:4rem;
background-color:#f8f9fa;
border-top:1px solid #dee2e6;
margin-top:1rem;
color:#6f6970}
footer h5{font-size:1rem;
margin-top:0;
margin-bottom:1rem;
color:#3c3c3b;
text-transform:uppercase}
footer ul{padding:0;
list-style:none;
line-height:2}
footer a{color:#6f6970}
footer .footer-logo img, footer .footer-copyright-eclipse-logo img{-webkit-filter:grayscale(100);
filter:grayscale(100);
opacity:.5;
-webkit-transition:all .15s ease-in-out;
transition:all .15s ease-in-out}
footer .footer-logo img:hover, footer .footer-copyright-eclipse-logo img:hover{-webkit-filter:grayscale(0);
filter:grayscale(0);
opacity:1}
footer .footer-nav-section{display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex;
-webkit-flex-direction:row;
-ms-flex-direction:row;
flex-direction:row;
margin-bottom:6rem}
footer .footer-nav-section .footer-logo{margin-top:.4rem}
footer .footer-nav-section .footer-logo img{width:8.3rem}
footer .footer-nav-section .footer-nav-list{width:20%}
footer .footer-copyright{display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex;
-webkit-flex-direction:row;
-ms-flex-direction:row;
flex-direction:row;
-webkit-box-pack:justify;
-webkit-justify-content:space-between;
justify-content:space-between;
-webkit-align-items:center;
-webkit-box-align:center;
-ms-flex-align:center;
align-items:center}
footer .footer-copyright a{white-space:nowrap}
footer .footer-copyright .footer-copyright-eclipse-logo{width:17%;
margin-bottom:.5rem}
@media (max-width:1250px) {footer .footer-copyright .footer-copyright-break{display:none}
footer .footer-copyright .footer-copyright-eclipse-logo{width:30%}}
@media (max-width:1000px) {footer .footer-nav-section .footer-nav-list{width:25%}
footer .footer-copyright .footer-copyright-break{display:inline-block}
footer .footer-copyright .footer-copyright-eclipse-logo{width:40%}}
@media (max-width:768px) {footer .footer-nav-section{max-width:100%;
margin-left:auto;
margin-right:auto}}
@media (max-width:640px) {footer .footer-nav-section{max-width:80%;
margin-bottom:3rem;
-webkit-flex-direction:column;
-ms-flex-direction:column;
flex-direction:column}
footer .footer-nav-section h5{cursor:pointer}
footer .footer-nav-section h5::after{display:inline-block;
content:"";
border-top:.4em solid;
border-right:.4em solid transparent;
border-bottom:0;
border-left:.4em solid transparent;
position:absolute;
top:.75rem;
right:0}
footer .footer-nav-section .footer-nav-list{width:100%;
position:relative}
footer .footer-nav-section .footer-nav-list ul{overflow-y:hidden;
max-height:0;
-webkit-transition:all 200ms ease-in-out;
transition:all 200ms ease-in-out}
footer .footer-nav-section .footer-nav-list ul.visible{margin-bottom:2rem}
footer .footer-nav-section .footer-logo{margin:0 auto 3rem auto;
width:auto}
footer .footer-copyright{max-width:80%;
text-align:center;
margin-left:auto;
margin-right:auto;
-webkit-flex-direction:column-reverse;
-ms-flex-direction:column-reverse;
flex-direction:column-reverse}
footer .footer-copyright .footer-copyright-eclipse-logo{width:7.6rem;
margin-bottom:1rem}}</style><style id="__jsx-efcc50be384cabc7">.page-content{margin-top:6em;
margin-bottom:8rem}
.docs .docs-content .docs-content-wrapper{display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex;
-webkit-box-pack:justify;
-webkit-justify-content:space-between;
justify-content:space-between}
.docs .docs-content .docs-content-wrapper aside{-webkit-flex:0 0 17rem;
-ms-flex:0 0 17rem;
flex:0 0 17rem}
.docs .docs-content .docs-content-wrapper aside .docs-content-wrapper-sidebar{position:-webkit-sticky;
position:sticky;
top:7em}
.docs .docs-content .docs-content-wrapper aside .search-panel{margin-top:1rem;
width:100%}
.docs .docs-content .docs-content-wrapper aside .search-panel .search-results{max-height:calc(100vh - 10rem - 1px)}
.docs .docs-content .docs-content-wrapper aside .docs-content-toc{margin-top:1rem;
overflow-y:auto;
max-height:calc(100vh - 10rem - 3px)}
.docs .docs-content .docs-content-wrapper aside .docs-content-toc #toctitle{display:none}
.docs .docs-content .docs-content-wrapper aside .docs-content-toc ul{margin-top:0;
padding-left:0;
list-style-type:none}
.docs .docs-content .docs-content-wrapper aside .docs-content-toc ul.sectlevel2{display:none}
.docs .docs-content .docs-content-wrapper aside .docs-content-toc ul li{padding:.3333333333rem 0}
.docs .docs-content .docs-content-wrapper aside.docs-has-search-results .docs-content-toc{display:none}
@media (max-width:1250px) {.docs .docs-content .docs-content-wrapper aside{-webkit-flex:0 0 15rem;
-ms-flex:0 0 15rem;
flex:0 0 15rem}}
@media (max-width:1000px) {.docs .docs-content .docs-content-wrapper aside{z-index:1;
position:fixed;
top:0;
right:0;
width:25rem;
height:100vh;
max-width:100%;
padding-top:6rem;
padding-left:2rem;
padding-right:2rem;
background-color:#fff;
border-left:1px solid #dee2e6;
-webkit-transform:translateX(100%);
-moz-transform:translateX(100%);
-ms-transform:translateX(100%);
transform:translateX(100%);
-webkit-transition:-webkit-transform 200ms ease-in-out;
transition:transform 200ms ease-in-out;
will-change:transform}
.docs .docs-content .docs-content-wrapper aside.collapse{-webkit-transform:translateX(0%);
-moz-transform:translateX(0%);
-ms-transform:translateX(0%);
transform:translateX(0%)}}
@media (max-width:640px) {.docs .docs-content .docs-content-wrapper aside{min-width:100%;
border-left:none}}
.docs .docs-content .docs-content-wrapper .docs-content-sidebar-toggle{z-index:1000;
cursor:pointer;
display:none;
position:fixed;
-webkit-justify-content:center;
justify-content:center;
-webkit-align-items:center;
-webkit-box-align:center;
-ms-flex-align:center;
align-items:center;
right:2rem;
bottom:2rem;
color:#fff;
background-color:#4d4d4d;
padding:.5rem;
border-radius:.8rem;
-webkit-transition:background-color .15s ease-in-out;
transition:background-color .15s ease-in-out}
.docs .docs-content .docs-content-wrapper .docs-content-sidebar-toggle .feather-list, .docs .docs-content .docs-content-wrapper .docs-content-sidebar-toggle .feather-x{display:block}
.docs .docs-content .docs-content-wrapper .docs-content-sidebar-toggle .feather-x{position:absolute;
left:0;
top:0;
opacity:0;
-webkit-transition:opacity .15s ease-in-out;
transition:opacity .15s ease-in-out}
.docs .docs-content .docs-content-wrapper .docs-content-sidebar-toggle:hover{background-color:#3c3c3b}
.docs .docs-content .docs-content-wrapper .docs-content-sidebar-toggle.collapse .feather-list{opacity:0}
.docs .docs-content .docs-content-wrapper .docs-content-sidebar-toggle.collapse .feather-x{opacity:1}
@media (max-width:1000px) {.docs .docs-content .docs-content-wrapper .docs-content-sidebar-toggle{display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex}}
@media (max-width:640px) {.docs .docs-content .docs-content-wrapper .docs-content-sidebar-toggle{right:1rem;
bottom:1rem}}
.docs .docs-content .docs-content-inner{max-width:calc(100% - 19.5rem);
overflow:hidden}
.docs .docs-content .docs-content-inner .docs-content-metadata{margin-top:1.2rem;
margin-bottom:1.2rem;
display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex;
flex-wrap:wrap;
-webkit-align-items:baseline;
-webkit-box-align:baseline;
-ms-flex-align:baseline;
align-items:baseline}
@media (max-width:1000px) {.docs .docs-content .docs-content-inner .docs-content-metadata{-webkit-flex-direction:column;
-ms-flex-direction:column;
flex-direction:column}}
.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-repo{display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex}
.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-left{display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex;
-webkit-align-items:center;
-webkit-box-align:center;
-ms-flex-align:center;
align-items:center;
-webkit-flex:1;
-ms-flex:1;
flex:1}
.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-left>*{margin-right:2rem}
.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-left>*:last-child{margin-right:0}
.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-left a{display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex;
-webkit-align-items:center;
-webkit-box-align:center;
-ms-flex-align:center;
align-items:center;
color:#6f6970;
white-space:nowrap}
.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-left a:hover{color:#782b90}
.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-left a .feather{margin-right:.25em;
height:1rem}
@media (max-width:1000px) {.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-left{flex-wrap:wrap;
margin-bottom:1rem}}
.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-version{-webkit-flex:1;
-ms-flex:1;
flex:1;
display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex}
@media (min-width:1000px) {.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-version{-webkit-box-pack:end;
-ms-flex-pack:end;
-webkit-justify-content:flex-end;
justify-content:flex-end}}
.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-version svg{height:16px;
margin-bottom:-2px}
@media (max-width:1000px) {.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-version svg{height:1rem;
margin-bottom:-1px}}
.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-version .dropdown-menu a{-webkit-text-decoration:none;
text-decoration:none}
.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-version .dropdown-menu a:hover{color:#6f6970}
.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-label{display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex;
margin-left:2rem}
.docs .docs-content .docs-content-inner h1{padding-top:0;
margin-top:.6rem;
line-height:1.2}
.docs .docs-content .docs-content-inner h1::after{content:"";
width:30%;
display:block;
border:2px solid #782b90;
border-radius:2px;
margin-top:1.1rem}
.docs .docs-content .docs-content-inner .ulist>ul{padding-left:1.1rem}
.docs .docs-content .docs-content-inner h2{border-top:1px solid #dee2e6;
margin-top:5rem;
padding-top:2rem}
.docs .docs-content .docs-content-inner h3, .docs .docs-content .docs-content-inner h4{margin-top:3rem}
@media (max-width:1250px) {.docs .docs-content .docs-content-inner{max-width:calc(100% - 17.5rem)}}
@media (max-width:1000px) {.docs .docs-content .docs-content-inner{max-width:100%}}
.docs .docs-content .admonitionblock{border-top-right-radius:.8rem;
border-bottom-right-radius:.8rem;
background-color:#f8f9fa;
padding:1rem;
margin:1.5rem 0;
border-left:9px solid transparent}
.docs .docs-content .admonitionblock.note, .docs .docs-content .admonitionblock.tip{border-color:#6cb9f0}
.docs .docs-content .admonitionblock.important, .docs .docs-content .admonitionblock.warning, .docs .docs-content .admonitionblock.caution{border-color:#f0a46c}
.docs .docs-content .admonitionblock tr{display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex;
-webkit-flex-direction:column;
-ms-flex-direction:column;
flex-direction:column}
.docs .docs-content .admonitionblock .title{font-weight:400}
.docs .docs-content .admonitionblock .title::after{content:":"}
.docs .docs-content dt{font-weight:400}
.docs .docs-content .anchor{opacity:0;
-webkit-align-self:flex-start;
-ms-flex-item-align:flex-start;
align-self:flex-start;
outline:none}
.docs .docs-content .anchor::after{content:"#";
position:absolute;
margin-left:-1.5rem;
color:#ced4da;
padding-right:.45rem}
.docs .docs-content .anchor:hover{opacity:1}
.docs .docs-content h2:hover .anchor, .docs .docs-content h3:hover .anchor, .docs .docs-content h4:hover .anchor, .docs .docs-content h5:hover .anchor, .docs .docs-content h6:hover .anchor{opacity:1}
.docs .docs-content h1 .anchor{display:none}
.docs .docs-content h4 .anchor::after, .docs .docs-content h5 .anchor::after, .docs .docs-content h6 .anchor::after{padding-right:.6rem}</style><style id="__jsx-7824b3ad3820c879">html{line-height:1.15;
-webkit-text-size-adjust:100%}
body{margin:0}
main{display:block}
h1{font-size:2em;
margin:.67em 0}
hr{box-sizing:content-box;
height:0;
overflow:visible}
pre{font-family:monospace, monospace;
font-size:1em}
a{background-color:transparent}
abbr[title]{border-bottom:none;
text-decoration:underline;
text-decoration:underline dotted}
b, strong{font-weight:bolder}
code, kbd, samp{font-family:monospace, monospace;
font-size:1em}
small{font-size:80%}
sub, sup{font-size:75%;
line-height:0;
position:relative;
vertical-align:baseline}
sub{bottom:-0.25em}
sup{top:-0.5em}
img{border-style:none}
button, input, optgroup, select, textarea{font-family:inherit;
font-size:100%;
line-height:1.15;
margin:0}
button, input{overflow:visible}
button, select{text-transform:none}
button, [type=button], [type=reset], [type=submit]{-webkit-appearance:button}
button::-moz-focus-inner, [type=button]::-moz-focus-inner, [type=reset]::-moz-focus-inner, [type=submit]::-moz-focus-inner{border-style:none;
padding:0}
button:-moz-focusring, [type=button]:-moz-focusring, [type=reset]:-moz-focusring, [type=submit]:-moz-focusring{outline:1px dotted ButtonText}
fieldset{padding:.35em .75em .625em}
legend{box-sizing:border-box;
color:inherit;
display:table;
max-width:100%;
padding:0;
white-space:normal}
progress{vertical-align:baseline}
textarea{overflow:auto}
[type=checkbox], [type=radio]{box-sizing:border-box;
padding:0}
[type=number]::-webkit-inner-spin-button, [type=number]::-webkit-outer-spin-button{height:auto}
[type=search]{-webkit-appearance:textfield;
outline-offset:-2px}
[type=search]::-webkit-search-decoration{-webkit-appearance:none}
::-webkit-file-upload-button{-webkit-appearance:button;
font:inherit}
details{display:block}
summary{display:list-item}
template{display:none}
[hidden]{display:none}
.hljs, pre{display:block;
overflow-x:auto;
padding:.5em;
background:#3a2840;
color:#fff}
.hljs.language-shell :not(.bash)+.bash, .hljs.language-better-shell :not(.bash)+.bash, pre.language-shell :not(.bash)+.bash, pre.language-better-shell :not(.bash)+.bash{color:#d2a8e0}
pre{border-radius:.8rem;
padding:1rem;
font-size:.875rem;
margin:1.5rem 0}
.hljs-keyword, .hljs-selector-tag, .hljs-tag{color:#d2a8e0}
.hljs-template-tag{color:red}
.hljs-number{color:#6cb9f0}
.hljs-variable, .hljs-template-variable, .hljs-attribute, .hljs-literal{color:#c9e5f9}
.hljs-subst{color:red}
.hljs-title, .hljs-name, .hljs-selector-id, .hljs-selector-class, .hljs-section, .hljs-type{color:#f0a46c}
.hljs-symbol, .hljs-bullet, .hljs-link{color:#d2a8e0}
.hljs-deletion, .hljs-string, .hljs-built_in, .hljs-builtin-name{color:#6cb9f0}
.hljs-addition, .hljs-comment, .hljs-quote, .hljs-meta{color:#adb5bd}
.hljs-emphasis{font-style:italic}
.hljs-strong{font-weight:bold}
#nprogress{pointer-events:none}
#nprogress .bar{background:#29d;
position:fixed;
z-index:1031;
top:0;
left:0;
width:100%;
height:2px}
#nprogress .peg{display:block;
position:absolute;
right:0px;
width:100px;
height:100%;
box-shadow:0 0 10px #29d, 0 0 5px #29d;
opacity:1;
-webkit-transform:rotate(3deg) translate(0px, -4px);
-ms-transform:rotate(3deg) translate(0px, -4px);
-webkit-transform:rotate(3deg) translate(0px, -4px);
-moz-transform:rotate(3deg) translate(0px, -4px);
-ms-transform:rotate(3deg) translate(0px, -4px);
transform:rotate(3deg) translate(0px, -4px)}
#nprogress .spinner{display:block;
position:fixed;
z-index:1031;
top:15px;
right:15px}
#nprogress .spinner-icon{width:18px;
height:18px;
box-sizing:border-box;
border:solid 2px transparent;
border-top-color:#29d;
border-left-color:#29d;
border-radius:50%;
-webkit-animation:nprogress-spinner 400ms linear infinite;
-webkit-animation:nprogress-spinner 400ms linear infinite;
animation:nprogress-spinner 400ms linear infinite}
.nprogress-custom-parent{overflow:hidden;
position:relative}
.nprogress-custom-parent #nprogress .spinner, .nprogress-custom-parent #nprogress .bar{position:absolute}
@keyframes nprogress-spinner {0% {-webkit-transform:rotate(0deg)}100% {-webkit-transform:rotate(360deg)}}
@keyframes nprogress-spinner {0% {transform:rotate(0deg)}100% {transform:rotate(360deg)}}
#nprogress .bar{background:#782b90}
#nprogress .peg{box-shadow:0 0 10px #782b90, 0 0 5px #782b90}
#nprogress .spinner-icon{border-top-color:#782b90;
border-left-color:#782b90}
html{box-sizing:border-box}
*, *::before, *::after{box-sizing:inherit}
:root{font-size:18px}
@media (max-width:1000px) {:root{font-size:17.1px}}
@media (max-width:768px) {:root{font-size:16.2px}}
@media (max-width:640px) {:root{font-size:15.3px}}
body, input{font-family:Roboto, sans-serif;
font-weight:300;
line-height:1.7;
color:#3c3c3b}
input{outline:none}
h1, h2, h3, h4, h5, h6{font-weight:400}
h1{font-size:2.5rem}
h2{font-size:2rem}
h3{font-size:1.75rem}
h4{font-size:1.5rem}
h5{font-size:1.25rem}
h6{font-size:1.1rem}
.container{width:100%;
padding-right:.8rem;
padding-left:.8rem;
margin-right:auto;
margin-left:auto}
@media (min-width:640px) {.container{max-width:620px}}
@media (min-width:768px) {.container{max-width:738px}}
@media (min-width:1000px) {.container{max-width:950px}}
@media (min-width:1250px) {.container{max-width:1180px}}
@media (min-width:1250px) {.container-narrow{max-width:950px}}
.img-fluid{max-width:100%}
a{-webkit-text-decoration:none;
text-decoration:none;
color:#782b90}
a:hover{text-decoration:underline;
color:#571f69}
img{vertical-align:middle}
svg{overflow:hidden;
vertical-align:middle}
code, pre{font-family:"Roboto Mono", SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace}
p code{display:-webkit-inline-box;
display:-webkit-inline-flex;
display:-ms-inline-flexbox;
display:inline-flex;
max-width:100%;
overflow:auto}
.heading-anchor{opacity:0;
-webkit-align-self:flex-start;
-ms-flex-item-align:flex-start;
align-self:flex-start;
outline:none}
.heading-anchor::after{content:"#";
position:absolute;
margin-left:-1.5rem;
color:#ced4da;
padding-right:.45rem}
.heading-anchor:hover{opacity:1}
h2:hover .heading-anchor, h3:hover .heading-anchor, h4:hover .heading-anchor, h5:hover .heading-anchor, h6:hover .heading-anchor{opacity:1}
h1 .heading-anchor{display:none}
h4 .heading-anchor::after, h5 .heading-anchor::after, h6 .heading-anchor::after{padding-right:.6rem}</style><style data-href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500&display=swap">@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5vAA.woff) format('woff')}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Me5g.woff) format('woff')}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmEU9vAA.woff) format('woff')}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5fCRc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5fABc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5fCBc4AMP6lbBP.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5fBxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5fCxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5fChc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5fBBc4AMP6lQ.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Mu72xKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Mu5mxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Mu7mxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Mu4WxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Mu7WxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Mu7GxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Mu4mxKKTU1Kg.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmEU9fCRc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmEU9fABc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmEU9fCBc4AMP6lbBP.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmEU9fBxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmEU9fCxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmEU9fChc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmEU9fBBc4AMP6lQ.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style><style data-href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@300;400&display=swap">@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZKCA.woff) format('woff')}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVl2ZhZI2eCN5jzbjEETS9weq8-59Y.woff) format('woff')}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCkYb9lecyVC4A.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCAYb9lecyVC4A.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCgYb9lecyVC4A.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCcYb9lecyVC4A.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCsYb9lecyVC4A.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCoYb9lecyVC4A.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCQYb9lecyU.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVl2ZhZI2eCN5jzbjEETS9weq8-19-7DQk6YvNkeg.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVl2ZhZI2eCN5jzbjEETS9weq8-19a7DQk6YvNkeg.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVl2ZhZI2eCN5jzbjEETS9weq8-1967DQk6YvNkeg.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVl2ZhZI2eCN5jzbjEETS9weq8-19G7DQk6YvNkeg.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVl2ZhZI2eCN5jzbjEETS9weq8-1927DQk6YvNkeg.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVl2ZhZI2eCN5jzbjEETS9weq8-19y7DQk6YvNkeg.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVl2ZhZI2eCN5jzbjEETS9weq8-19K7DQk6YvM.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style><style data-href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400&display=swap">@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vqPQA.woff) format('woff')}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vq_SeW-AJi8SJQtQ4Y.woff) format('woff');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vq_QOW-AJi8SJQtQ4Y.woff) format('woff');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vq_R-W-AJi8SJQtQ4Y.woff) format('woff');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vq_S-W-AJi8SJQtQ4Y.woff) format('woff');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vq_SuW-AJi8SJQtQ4Y.woff) format('woff');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vq_ROW-AJi8SJQt.woff) format('woff');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><body data-build-time="2022-04-20T03:59:07.988Z" data-build-commit-id="b100e8eeb88359ace62f5887b8d557d62f8d4754" data-build-run-id="2193491479"><div id="__next" data-reactroot=""><main class="jsx-efcc50be384cabc7 page docs"><header><div class="jsx-f705e145f931f504 navbar"><div class="jsx-f705e145f931f504 navbar-content container"><div class="jsx-f705e145f931f504 navbar-logo"><a class="jsx-f705e145f931f504" href="/"><img src="data:image/svg+xml,%3csvg version=&#x27;1.1&#x27; id=&#x27;Layer_1&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27; x=&#x27;0&#x27; y=&#x27;0&#x27; viewBox=&#x27;0 0 1232.6 315.2&#x27; style=&#x27;enable-background:new 0 0 1232.6 315.2&#x27; xml:space=&#x27;preserve&#x27;%3e%3cstyle%3e.st0%7bfill:%23782a91%7d%3c/style%3e%3cpath d=&#x27;M120.9 214.2 190.5 0h52.3l-98.5 273.8H98.2L0 0h52.1l68.8 214.2zm291.2-62.6H299.6v84.2H431v38H252V0h177.7v38.4H299.6V114h112.5v37.6zm83.7-113.2H546c16.5.3 29 4.4 37.3 12.4 8.3 8 12.5 19.4 12.5 34 0 14-4.5 25.1-13.5 33.2-9 8.1-21.6 12.1-37.6 12.1h-27.1v24.2l86.1 119.5h51v-2.4l-77.2-106.7c24.9-5.5 43.3-21.7 52.6-35.9 8.2-12.6 13.3-27.7 13.3-46 0-26.8-8.6-47.4-25.8-61.5C600.5 7.1 576.1 0 544.5 0h-96.3v273.8h47.6&#x27;/%3e%3cpath class=&#x27;st0&#x27; d=&#x27;m1052.3 157.7-41.5 62.7 29.7 53.4h85.1z&#x27;/%3e%3ccircle class=&#x27;st0&#x27; cx=&#x27;827.9&#x27; cy=&#x27;274.7&#x27; r=&#x27;40.5&#x27;/%3e%3cpath class=&#x27;st0&#x27; d=&#x27;m1037 0-47.6 74.2L949 0h-84l85.3 135.8-67.1 105.7c5.7 9.5 9.1 20.5 9.2 32.4h50.1L1121.3 0H1037z&#x27;/%3e%3cpath d=&#x27;M763.5 273.8c.1-9.9 2.5-19.2 6.6-27.5V38.4h85.4V0H638.2v38.4h84.6v235.4h40.7zm414-266.9h-15.3v42.2h-8.5V6.9h-15.2V0h39v6.9zM1193 0l14.2 37.7L1221.3 0h11v49.1h-8.5V32.9l.8-21.7-14.5 37.9h-6.1l-14.5-37.8.8 21.6v16.2h-8.5V0h11.2z&#x27;/%3e%3c/svg%3e" alt="Vert.x Logo" class="jsx-f705e145f931f504"/></a></div><div class="jsx-f705e145f931f504 navbar-collapse-button"><span class="jsx-f705e145f931f504"></span><span class="jsx-f705e145f931f504"></span><span class="jsx-f705e145f931f504"></span></div><div class="jsx-f705e145f931f504 navbar-right"><div class="jsx-f705e145f931f504 navbar-menu"><span class="jsx-f705e145f931f504 navbar-menu-item with-drop-down"><div class="jsx-6650573c8f14945d dropdown"><a class="jsx-6650573c8f14945d dropdown-title">开始<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="jsx-6650573c8f14945d dropdown-menu"><a class="jsx-f705e145f931f504" href="/introduction-to-vertx-and-reactive/"><li class="jsx-400ec7965926e858 dropdown-item">简介</li></a><a class="jsx-f705e145f931f504" href="/get-started/"><li class="jsx-400ec7965926e858 dropdown-item">开始</li></a><a href="https://start.vertx.io/" target="_blank" rel="noreferrer" class="jsx-f705e145f931f504"><li class="jsx-400ec7965926e858 dropdown-item">应用生成器 <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a></ul></div></span><a class="jsx-f705e145f931f504 navbar-menu-item" href="/docs/">文档</a><span class="jsx-f705e145f931f504 navbar-menu-item with-drop-down"><div class="jsx-6650573c8f14945d dropdown"><a class="jsx-6650573c8f14945d dropdown-title">资源<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="jsx-6650573c8f14945d dropdown-menu"><a class="jsx-f705e145f931f504" href="/faq/"><li class="jsx-400ec7965926e858 dropdown-item">答疑</li></a><a class="jsx-f705e145f931f504" href="/channels/"><li class="jsx-400ec7965926e858 dropdown-item">联系渠道</li></a><a href="https://how-to.vertx.io/" target="_blank" rel="noreferrer" class="jsx-f705e145f931f504"><li class="jsx-400ec7965926e858 dropdown-item">操作指南 <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a><a href="https://github.com/vert-x3/vertx-eventbus-bridge-clients" target="_blank" rel="noreferrer" class="jsx-f705e145f931f504"><li class="jsx-400ec7965926e858 dropdown-item">EventBus Bridge Clients <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a><a href="https://github.com/vert-x3/advanced-vertx-guide" target="_blank" rel="noreferrer" class="jsx-f705e145f931f504"><li class="jsx-400ec7965926e858 dropdown-item">Advanced Vert.x Guide <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a></ul></div></span><a class="jsx-f705e145f931f504 navbar-menu-item" href="/blog/">博客</a><a class="jsx-f705e145f931f504 navbar-menu-item" href="/community/">社区</a><a class="jsx-f705e145f931f504 navbar-menu-item" href="/translation/">翻译团队</a></div><div class="jsx-f705e145f931f504 navbar-social"><span class="jsx-75cbc16d79a176fb "><a href="https://github.com/vert-x3/vertx-awesome" target="_blank" rel="noopener noreferrer" class="jsx-f705e145f931f504 navbar-social-link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="List of awesome Vert.x projects"><title></title><path d="M24 11.438l-6.154-5.645-.865.944 5.128 4.7H1.895l5.128-4.705-.865-.943-6.154 5.649H0v3.72c0 1.683 1.62 3.053 3.61 3.053h3.795c1.99 0 3.61-1.37 3.61-3.051v-2.446h1.97v2.446c0 1.68 1.62 3.051 3.61 3.051h3.794c1.99 0 3.61-1.37 3.61-3.051v-3.721z"></path></svg></a></span><div class="jsx-75cbc16d79a176fb tooltip">Awesome Vert.x<div data-popper-arrow="true" class="jsx-75cbc16d79a176fb tooltip-arrow"></div></div><span class="jsx-75cbc16d79a176fb "><a href="https://stackoverflow.com/questions/tagged/vert.x" target="_blank" rel="noopener noreferrer" class="jsx-f705e145f931f504 navbar-social-link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Stack Overflow questions related to Vert.x"><title></title><path d="M15.725 0l-1.72 1.277 6.39 8.588 1.716-1.277L15.725 0zm-3.94 3.418l-1.369 1.644 8.225 6.85 1.369-1.644-8.225-6.85zm-3.15 4.465l-.905 1.94 9.702 4.517.904-1.94-9.701-4.517zm-1.85 4.86l-.44 2.093 10.473 2.201.44-2.092-10.473-2.203zM1.89 15.47V24h19.19v-8.53h-2.133v6.397H4.021v-6.396H1.89zm4.265 2.133v2.13h10.66v-2.13H6.154Z"></path></svg></a></span><div class="jsx-75cbc16d79a176fb tooltip">Stack Overflow<div data-popper-arrow="true" class="jsx-75cbc16d79a176fb tooltip-arrow"></div></div><span class="jsx-75cbc16d79a176fb "><a href="https://www.youtube.com/channel/UCGN6L3tRhs92Uer3c6VxOSA" target="_blank" rel="noopener noreferrer" class="jsx-f705e145f931f504 navbar-social-link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="YouTube channel of Vert.x"><title></title><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"></path></svg></a></span><div class="jsx-75cbc16d79a176fb tooltip">YouTube<div data-popper-arrow="true" class="jsx-75cbc16d79a176fb tooltip-arrow"></div></div><span class="jsx-75cbc16d79a176fb "><a href="https://discord.gg/KzEMwP2" target="_blank" rel="noopener noreferrer" class="jsx-f705e145f931f504 navbar-social-link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Eclipse Vert.x channel on Discord"><title></title><path d="M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.946 2.4189-2.1568 2.4189Z"></path></svg></a></span><div class="jsx-75cbc16d79a176fb tooltip">Discord<div data-popper-arrow="true" class="jsx-75cbc16d79a176fb tooltip-arrow"></div></div><span class="jsx-75cbc16d79a176fb "><a href="https://groups.google.com/forum/?fromgroups#!forum/vertx" target="_blank" rel="noopener noreferrer" class="jsx-f705e145f931f504 navbar-social-link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="A Google group for Vert.x users"><title></title><path d="M.92 3.332c-.776 0-1.216.67-.692 1.383l2.537 4.403v7.86c0 2.013 1.467 3.69 3.459 3.69H20.31a3.75 3.75 0 003.69-3.69V7.043a3.723 3.723 0 00-3.668-3.71zm5.786 3.71H20.1c.587 0 1.153.357 1.153.923 0 .566-.566.922-1.153.922H6.706c-.587 0-1.153-.356-1.153-.922 0-.566.566-.923 1.153-.923zm0 3.69H20.1c.587 0 1.153.356 1.153.922 0 .566-.566.922-1.153.922H6.706c-.587 0-1.153-.356-1.153-.922 0-.566.566-.922 1.153-.922zm-.021 3.71h9.705c.587 0 1.153.356 1.153.922 0 .566-.566.923-1.153.923H6.685c-.587 0-1.153-.357-1.153-.923 0-.566.566-.922 1.153-.922Z"></path></svg></a></span><div class="jsx-75cbc16d79a176fb tooltip">Vert.x User Group<div data-popper-arrow="true" class="jsx-75cbc16d79a176fb tooltip-arrow"></div></div><span class="jsx-75cbc16d79a176fb "><a href="https://qm.qq.com/cgi-bin/qm/qr?k=7dYiBUbpsVbTduCUQEWmj5qijKTBEhJa&amp;jump_from=webapi" target="_blank" rel="noopener noreferrer" class="jsx-f705e145f931f504 navbar-social-link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Vert.x中国用户组QQ群"><title></title><path d="M21.395 15.035a39.548 39.548 0 0 0-.803-2.264l-1.079-2.695c.001-.032.014-.562.014-.836C19.526 4.632 17.351 0 12 0S4.474 4.632 4.474 9.241c0 .274.013.804.014.836l-1.08 2.695a38.97 38.97 0 0 0-.802 2.264c-1.021 3.283-.69 4.643-.438 4.673.54.065 2.103-2.472 2.103-2.472 0 1.469.756 3.387 2.394 4.771-.612.188-1.363.479-1.845.835-.434.32-.379.646-.301.778.343.578 5.883.369 7.482.189 1.6.18 7.14.389 7.483-.189.078-.132.132-.458-.301-.778-.483-.356-1.233-.646-1.846-.836 1.637-1.384 2.393-3.302 2.393-4.771 0 0 1.563 2.537 2.103 2.472.251-.03.581-1.39-.438-4.673zM12.662 4.846c.039-1.052.659-1.878 1.385-1.846s1.281.912 1.242 1.964c-.039 1.051-.659 1.878-1.385 1.846s-1.282-.912-1.242-1.964zM9.954 3c.725-.033 1.345.794 1.384 1.846.04 1.052-.517 1.931-1.242 1.963-.726.033-1.346-.794-1.385-1.845C8.672 3.912 9.228 3.033 9.954 3zM7.421 8.294c.194-.43 2.147-.908 4.566-.908h.026c2.418 0 4.372.479 4.566.908a.14.14 0 0 1 .014.061c0 .031-.01.059-.026.083-.163.238-2.333 1.416-4.553 1.416h-.026c-2.221 0-4.39-1.178-4.553-1.416a.136.136 0 0 1-.014-.144zm10.422 8.622c-.22 3.676-2.403 5.987-5.774 6.021h-.137c-3.37-.033-5.554-2.345-5.773-6.021-.081-1.35.001-2.496.147-3.43.318.063.638.122.958.176v3.506s1.658.334 3.318.103v-3.225c.488.027.96.04 1.406.034h.025c1.678.021 3.714-.204 5.683-.594.146.934.227 2.08.147 3.43zM10.48 5.804c.313-.041.542-.409.508-.825-.033-.415-.314-.72-.629-.679-.313.04-.541.409-.508.824.034.417.315.72.629.68zM14.479 5.156c.078.037.221.042.289-.146.035-.095.025-.165-.009-.214-.023-.033-.133-.118-.371-.176-.904-.22-1.341.384-1.405.499-.04.072-.012.176.056.227.067.051.139.037.179-.006.58-.628 1.21-.208 1.261-.184z"></path></svg></a></span><div class="jsx-75cbc16d79a176fb tooltip">Vert.x中国用户组QQ群<div data-popper-arrow="true" class="jsx-75cbc16d79a176fb tooltip-arrow"></div></div><span class="jsx-75cbc16d79a176fb "><a href="https://qun.qq.com/qqweb/qunpro/share?_wv=3&amp;_wwv=128&amp;inviteCode=1reLvB&amp;from=246610&amp;biz=ka" target="_blank" rel="noopener noreferrer" class="jsx-f705e145f931f504 navbar-social-link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 200 200" aria-label=""><path d="M13 73L16 49L52 49L58 14L82 14L77 49L135 49L141 14L166 14L160 49L195 49L192 73L157 73L148 124L184 124L181 149L144 149L137 193L90 149L61 149L55 185L31 185L36 149L0 149L6 124L100 124L120 144L131 75L72 75L64 124L40 124L48 73Z"></path></svg></a></span><div class="jsx-75cbc16d79a176fb tooltip">Vert.x中国用户组QQ频道<div data-popper-arrow="true" class="jsx-75cbc16d79a176fb tooltip-arrow"></div></div></div></div></div></div></header><div class="jsx-efcc50be384cabc7 page-content docs-content"><div class="jsx-efcc50be384cabc7 container"><div class="jsx-efcc50be384cabc7 docs-content-wrapper"><aside class="jsx-efcc50be384cabc7 "><div class="jsx-efcc50be384cabc7 docs-content-wrapper-sidebar"><div class="jsx-d1843944f2d67b search-panel"><div class="jsx-bf3edc7191e82cb search"><input type="text" disabled="" class="jsx-bf3edc7191e82cb autosuggest"/><input type="text" placeholder="Search..." value="" class="jsx-bf3edc7191e82cb"/><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="search-icon"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="search-icon-delete"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg></div><ul class="jsx-9ece789f808ef724 search-results"></ul><div class="jsx-9ece789f808ef724 search-results-none">No results.</div></div><div class="jsx-efcc50be384cabc7 docs-content-toc"><div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_introduction">Introduction</a></li>
<li><a href="#_running_a_coroutine_from_a_vert_x_context">Running a coroutine from a Vert.x context</a></li>
<li><a href="#_extending_coroutineverticle">Extending CoroutineVerticle</a></li>
<li><a href="#_getting_one_shot_asynchronous_results">Getting one-shot asynchronous results</a></li>
<li><a href="#_getting_one_shot_events">Getting one-shot events</a></li>
<li><a href="#_getting_one_shot_worker_results">Getting one-shot worker results</a></li>
<li><a href="#_streams_of_events">Streams of events</a></li>
<li><a href="#_awaiting_the_completion_of_vert_x_asynchronous_results">Awaiting the completion of Vert.x asynchronous results</a></li>
<li><a href="#_suspending_extension_methods">Suspending extension methods</a></li>
<li><a href="#_channels">Channels</a>
<ul class="sectlevel2">
<li><a href="#_receiving_data">Receiving data</a></li>
<li><a href="#_sending_data">Sending data</a></li>
</ul>
</li>
<li><a href="#_delay_cancellation_and_timeouts">Delay, cancellation and timeouts</a></li>
<li><a href="#_coroutine_builders">Coroutine builders</a></li>
<li><a href="#_coroutine_interoperability">Coroutine interoperability</a></li>
<li><a href="#_rxjava_interoperability">RxJava interoperability</a></li>
</ul>
</div></div></div></aside><div class="jsx-efcc50be384cabc7 docs-content-sidebar-toggle"><div style="position:relative" class="jsx-efcc50be384cabc7"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-list"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-x"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></div></div><div class="jsx-efcc50be384cabc7 docs-content-inner"><div class="jsx-efcc50be384cabc7 docs-content-metadata"><div class="jsx-efcc50be384cabc7 docs-content-metadata-left"><div class="jsx-efcc50be384cabc7 docs-content-metadata-repo"><div class="jsx-d38685edc31911e0 github-stars"><a href="https://github.com/vert-x3/vertx-lang-kotlin" class="jsx-d38685edc31911e0"><div class="jsx-d38685edc31911e0 icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg></div> <!-- -->null stars</a></div></div><div class="jsx-efcc50be384cabc7"><a href="https://vertx.io/docs/apidocs" class="jsx-efcc50be384cabc7"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path></svg> API</a></div><div class="jsx-efcc50be384cabc7 docs-content-metadata-examples"><a href="https://github.com/vert-x3/vertx-examples/tree/3.x/kotlin-examples/coroutines"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather"><path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"></path></svg> Examples</a></div><div class="jsx-efcc50be384cabc7 docs-content-metadata-edit"><a href="https://github.com/vert-x3/vertx-lang-kotlin/tree/master/vertx-lang-kotlin/src/main/asciidoc"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg> 改进翻译</a></div><span class="jsx-efcc50be384cabc7 docs-content-metadata-version"><div class="jsx-6650573c8f14945d dropdown"><a class="jsx-6650573c8f14945d dropdown-title">v4.2.7<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="jsx-6650573c8f14945d dropdown-menu align-right"><a href="/docs/vertx-lang-kotlin-coroutines/kotlin/"><li class="jsx-400ec7965926e858 dropdown-item active has-active-siblings"><span class="jsx-400ec7965926e858 dropdown-check-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg></span>Latest (v<!-- -->4.2.7<!-- -->)</li></a><a href="/docs/4.1.8/vertx-lang-kotlin-coroutines/kotlin/"><li class="jsx-400ec7965926e858 dropdown-item has-active-siblings">v<!-- -->4.1.8</li></a><a href="/docs/4.0.3/vertx-lang-kotlin-coroutines/kotlin/"><li class="jsx-400ec7965926e858 dropdown-item has-active-siblings">v<!-- -->4.0.3</li></a><a href="/docs/3.9.13/vertx-lang-kotlin-coroutines/kotlin/"><li class="jsx-400ec7965926e858 dropdown-item has-active-siblings">v<!-- -->3.9.13</li></a></ul></div></span></div></div><div class="jsx-efcc50be384cabc7"><h1>vertx-lang-kotlin-coroutines</h1>

<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>The <code>vertx-lang-kotlin-coroutines</code> integrates Kotlin <em>coroutines</em> for performing asynchronous operations and processing events.
This results in using a programming model that looks like sequential code, yet it does not block kernel threads.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction"><a class="anchor" href="#_introduction"></a>Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>One of the key advantages of Vert.x over many legacy application platforms is that it is almost entirely non-blocking
(of kernel threads).
This allows Vert.x-based applications to handle a lot of concurrency (e.g., many connections and messages) using a very
small number of kernel threads, which in turns unlocks great scalability.</p>
</div>
<div class="paragraph">
<p>The non-blocking nature of Vert.x leads to asynchronous APIs. Asynchronous APIs can take various forms including
callbacks, promises, fibers or reactive extensions. Vert.x uses the callback style for the core APIs but it
also supports other models like RxJava 1 and 2.</p>
</div>
<div class="paragraph">
<p>In some cases, programming using asynchronous APIs can be more challenging than using a classic / sequential style
of code, in particular with several operations need to be done in sequence. Also, error propagation is often more
complex when using asynchronous APIs.</p>
</div>
<div class="paragraph">
<p><code>vertx-lang-kotlin-coroutines</code> uses <em>coroutines</em>. Coroutines are very lightweight threads that do not correspond
to underlying kernel threads, so that when a <em>coroutine</em> needs to <em>"block</em>" it gets <em>suspended</em> and frees
its current kernel thread so that another coroutine can process events.</p>
</div>
<div class="paragraph">
<p><code>vertx-lang-kotlin-coroutines</code> uses <a href="https://github.com/Kotlin/kotlinx.coroutines">kotlinx.coroutines</a> to implement the Coroutines.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">注意</div>
</td>
<td class="content">
<code>vertx-lang-kotlin-coroutines</code> currently only works with Kotlin and will be out of the <a href="https://kotlinlang.org/docs/reference/coroutines.html#experimental-status-of-coroutines">experimental</a> status
in Kotlin 1.3
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_running_a_coroutine_from_a_vert_x_context"><a class="anchor" href="#_running_a_coroutine_from_a_vert_x_context"></a>Running a coroutine from a Vert.x context</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Having imported <code>io.vertx.kotlin.coroutines.VertxCoroutine</code>, the <code>GlobalScope.launch</code> method allows to run a block of code as a
coroutine in the "Global" application scope (bounded on the lifetime of the application):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" data-lang="kotlin"><span class="hljs-keyword">val</span> vertx = Vertx.vertx()

GlobalScope.launch(vertx.dispatcher()) {
  <span class="hljs-keyword">val</span> timerId = awaitEvent&lt;<span class="hljs-built_in">Long</span>&gt; { handler -&gt;
    vertx.setTimer(<span class="hljs-number">1000</span>, handler)
  }
  println(<span class="hljs-string">&quot;Event fired from timer with id <span class="hljs-variable">$timerId</span>&quot;</span>)
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>vertx.dispatcher()</code> returns a coroutine dispatcher that execute coroutines using the Vert.x event loop.</p>
</div>
<div class="paragraph">
<p>The <code>awaitEvent</code> function suspends the execution of the coroutine until the timer fires and resumes the coroutines
 with the value that was given to the handler.</p>
</div>
<div class="paragraph">
<p>More details are given in the next sections on handlers, events and stream of events.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_extending_coroutineverticle"><a class="anchor" href="#_extending_coroutineverticle"></a>Extending CoroutineVerticle</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can deploy your code as instances of <code>io.vertx.kotlin.coroutines.CoroutineVerticle</code>, a specialized type of verticle
for Kotlin coroutines. The <code>CoroutineVerticle</code> class implements the <code>kotlinx.coroutines.experimental.CoroutineScope</code> interface,
making all coroutines builder methods bounded by default to the verticle context. You should override the suspending <code>start()</code>
and (optionally) the suspending <code>stop()</code> methods of the verticle:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" data-lang="kotlin"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyVerticle</span> : <span class="hljs-type">CoroutineVerticle</span></span>() {
  <span class="hljs-keyword">override</span> <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">start</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// ...</span>
  }

  <span class="hljs-keyword">override</span> <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">stop</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// ...</span>
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>All code examples below assume to be run inside a <code>CoroutineVerticle</code> implementation, but you can replace all <code>&lt;builder&gt; { .. }</code>
calls with <code>GlobalScope.&lt;builder&gt; { .. }</code> to use the application scope instead.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_getting_one_shot_asynchronous_results"><a class="anchor" href="#_getting_one_shot_asynchronous_results"></a>Getting one-shot asynchronous results</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Many asynchronous operations in Vert.x take a <code>Handler&lt;AsyncResult&lt;T&gt;&gt;</code> as the last argument.
An example would be executing an object retrieval using the Vert.x Mongo client, or sending an event bus message then
awaiting for a reply.</p>
</div>
<div class="paragraph">
<p>This is achieved by using the <code>awaitResult</code> method which returns the value or throws an exception.</p>
</div>
<div class="paragraph">
<p>The coroutine is being suspended until the event is being processed, and no kernel thread is being blocked.</p>
</div>
<div class="paragraph">
<p>The method is executed by specifying the asynchronous operation that needs to be executed in the form of a block that
is passed to the handler at run-time.</p>
</div>
<div class="paragraph">
<p>Here is an example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" data-lang="kotlin"><span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">awaitResultExample</span><span class="hljs-params">()</span></span> {
  <span class="hljs-keyword">val</span> consumer = vertx.eventBus().localConsumer&lt;String&gt;(<span class="hljs-string">&quot;a.b.c&quot;</span>)
  consumer.handler { message -&gt;
    println(<span class="hljs-string">&quot;Consumer received: <span class="hljs-subst">${message.body()}</span>&quot;</span>)
    message.reply(<span class="hljs-string">&quot;pong&quot;</span>)
  }

  <span class="hljs-comment">// Send a message and wait for a reply</span>
  <span class="hljs-keyword">val</span> reply = awaitResult&lt;Message&lt;String&gt;&gt; { h -&gt;
    vertx.eventBus().send(<span class="hljs-string">&quot;a.b.c&quot;</span>, <span class="hljs-string">&quot;ping&quot;</span>, h)
  }
  println(<span class="hljs-string">&quot;Reply received: <span class="hljs-subst">${reply.body()}</span>&quot;</span>)
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>When the block produces a failure, the caller can handle it as an exception using the usual exception
<code>try</code>/<code>catch</code> constructs:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" data-lang="kotlin"><span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">awaitResultFailureExample</span><span class="hljs-params">()</span></span> {
  <span class="hljs-keyword">val</span> consumer = vertx.eventBus().localConsumer&lt;String&gt;(<span class="hljs-string">&quot;a.b.c&quot;</span>)
  consumer.handler { message -&gt;
    <span class="hljs-comment">// The consumer will get a failure</span>
    message.fail(<span class="hljs-number">0</span>, <span class="hljs-string">&quot;it failed!!!&quot;</span>)
  }

  <span class="hljs-comment">// Send a message and wait for a reply</span>
  <span class="hljs-keyword">try</span> {
    awaitResult&lt;Message&lt;String&gt;&gt; { h -&gt;
      vertx.eventBus().send(<span class="hljs-string">&quot;a.b.c&quot;</span>, <span class="hljs-string">&quot;ping&quot;</span>, h)
    }
  } <span class="hljs-keyword">catch</span> (e: ReplyException) {
    <span class="hljs-comment">// Handle specific reply exception here</span>
    println(<span class="hljs-string">&quot;Reply failure: <span class="hljs-subst">${e.message}</span>&quot;</span>)
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_getting_one_shot_events"><a class="anchor" href="#_getting_one_shot_events"></a>Getting one-shot events</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Processing a one-shot event (and not the next occurrences, if any) is achieved using the <code>awaitEvent</code> function:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" data-lang="kotlin"><span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">awaitEventExample</span><span class="hljs-params">()</span></span> {
  <span class="hljs-keyword">val</span> id = awaitEvent&lt;<span class="hljs-built_in">Long</span>&gt; { h -&gt; vertx.setTimer(<span class="hljs-number">2000L</span>, h) }
  println(<span class="hljs-string">&quot;This should be fired in 2s by some time with id=<span class="hljs-variable">$id</span>&quot;</span>)
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_getting_one_shot_worker_results"><a class="anchor" href="#_getting_one_shot_worker_results"></a>Getting one-shot worker results</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Processing a blocking computation is achieved using the <code>awaitBlocking</code> function:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" data-lang="kotlin"><span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">awaitBlockingExample</span><span class="hljs-params">()</span></span> {
  awaitBlocking {
    Thread.sleep(<span class="hljs-number">1000</span>)
    <span class="hljs-string">&quot;some-string&quot;</span>
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_streams_of_events"><a class="anchor" href="#_streams_of_events"></a>Streams of events</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In many places in Vert.x APIs, streams of events are processed through handlers.
Examples include event bus message consumers and HTTP server requests.</p>
</div>
<div class="paragraph">
<p>The <code>ReceiveChannelHandler</code> class allows receiving events through the (suspendable) <code>receive</code> method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" data-lang="kotlin"><span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">streamExample</span><span class="hljs-params">()</span></span> {
  <span class="hljs-keyword">val</span> adapter = vertx.receiveChannelHandler&lt;Message&lt;<span class="hljs-built_in">Int</span>&gt;&gt;()
  vertx.eventBus().localConsumer&lt;<span class="hljs-built_in">Int</span>&gt;(<span class="hljs-string">&quot;a.b.c&quot;</span>).handler(adapter)

  <span class="hljs-comment">// Send 15 messages</span>
  <span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> <span class="hljs-number">0.</span><span class="hljs-number">.15</span>) vertx.eventBus().send(<span class="hljs-string">&quot;a.b.c&quot;</span>, i)

  <span class="hljs-comment">// Receive the first 10 messages</span>
  <span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> <span class="hljs-number">0.</span><span class="hljs-number">.10</span>) {
    <span class="hljs-keyword">val</span> message = adapter.receive()
    println(<span class="hljs-string">&quot;Received: <span class="hljs-subst">${message.body()}</span>&quot;</span>)
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_awaiting_the_completion_of_vert_x_asynchronous_results"><a class="anchor" href="#_awaiting_the_completion_of_vert_x_asynchronous_results"></a>Awaiting the completion of Vert.x asynchronous results</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>await</code> extension method on instances of Vert.x asynchronous results suspend coroutines until they have completed, in
which case the method returns the corresponding <code>AsyncResult&lt;T&gt;</code> object.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" data-lang="kotlin"><span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">awaitingFuture</span><span class="hljs-params">()</span></span> {
  <span class="hljs-keyword">val</span> httpServerFuture = Future.future&lt;HttpServer&gt;()
  vertx.createHttpServer()
    .requestHandler { req -&gt; req.response().end(<span class="hljs-string">&quot;Hello!&quot;</span>) }
    .listen(<span class="hljs-number">8000</span>, httpServerFuture)

  <span class="hljs-keyword">val</span> httpServer = httpServerFuture.await()
  println(<span class="hljs-string">&quot;HTTP server port: <span class="hljs-subst">${httpServer.actualPort()}</span>&quot;</span>)

  <span class="hljs-keyword">val</span> result = CompositeFuture.all(httpServerFuture, httpServerFuture).await()
  <span class="hljs-keyword">if</span> (result.succeeded()) {
    println(<span class="hljs-string">&quot;The server is now running!&quot;</span>)
  } <span class="hljs-keyword">else</span> {
    result.cause().printStackTrace()
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_suspending_extension_methods"><a class="anchor" href="#_suspending_extension_methods"></a>Suspending extension methods</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Since <code>3.6.0</code>, Vert.x generates suspending extension methods for all its asynchronous methods.</p>
</div>
<div class="paragraph">
<p>It relieves the user from using the idiomatic <code>awaitResult</code> and makes the code more natural and readable.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" data-lang="kotlin"><span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">generatedSuspendingExtensionMethod</span><span class="hljs-params">()</span></span> {
  <span class="hljs-comment">// Suspending extension method</span>
  <span class="hljs-comment">// This function has been automatically generated from the [io.vertx.core.net.NetClient original] using Vert.x codegen.</span>
  <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> NetClient.<span class="hljs-title">connectAwait</span><span class="hljs-params">(port : <span class="hljs-type">Int</span>, host : <span class="hljs-type">String</span>)</span></span> : NetSocket {
    <span class="hljs-keyword">return</span> awaitResult{
      <span class="hljs-keyword">this</span>.connect(port, host, it)
    }
  }

  <span class="hljs-comment">// Use the extension instead of wrapping with awaitResult</span>
  <span class="hljs-keyword">val</span> client = vertx.createNetClient();
  <span class="hljs-keyword">val</span> socket = client.connectAwait(<span class="hljs-number">1234</span>, <span class="hljs-string">&quot;localhost&quot;</span>);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Each asynchronous method has a suspending counterpart, e.g <code>xyz(1, 2, handler)</code> &#8658; <code>xyzAwait(1, 2)</code>.</p>
</div>
<div class="paragraph">
<p>Such extensions are provided by the <code>io.vertx:vertx-lang-kotlin</code> dependency and covers the Vert.x stack:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>vertx-web</p>
</li>
<li>
<p>vertx-jdbc-client</p>
</li>
<li>
<p>vertx-cassandra-client</p>
</li>
<li>
<p>etc&#8230;&#8203;</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_channels"><a class="anchor" href="#_channels"></a>Channels</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Channels are similar to Java <code>BlockingQueue</code> except that they do not block and instead suspend the coroutine
instead of blocking:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>sending a value to full channel suspends the coroutine</p>
</li>
<li>
<p>receving a value from an empty channels also suspends the coroutine</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Vert.x <code>ReadStream</code> and <code>WriteStream</code> can be adapted to channels with the <code>toChannel</code> extension method.</p>
</div>
<div class="paragraph">
<p>These adapters take care of managing the back-pressure and the stream termination</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ReadStream&lt;T&gt;</code> is adapted to a <code>ReceiveChannel&lt;T&gt;</code></p>
</li>
<li>
<p><code>WriteStream&lt;T&gt;</code> is adapted to a <code>SendChannel&lt;T&gt;</code></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_receiving_data"><a class="anchor" href="#_receiving_data"></a>Receiving data</h3>
<div class="paragraph">
<p>Channel can be really useful when you need to handle a stream of correlated values:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" data-lang="kotlin"><span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">handleTemperatureStream</span><span class="hljs-params">()</span></span> {
  <span class="hljs-keyword">val</span> stream = vertx.eventBus().consumer&lt;<span class="hljs-built_in">Double</span>&gt;(<span class="hljs-string">&quot;temperature&quot;</span>)
  <span class="hljs-keyword">val</span> channel = stream.toChannel(vertx)

  <span class="hljs-keyword">var</span> min = <span class="hljs-built_in">Double</span>.MAX_VALUE
  <span class="hljs-keyword">var</span> max = <span class="hljs-built_in">Double</span>.MIN_VALUE

  <span class="hljs-comment">// Iterate until the stream is closed</span>
  <span class="hljs-comment">// Non-blocking</span>
  <span class="hljs-keyword">for</span> (msg <span class="hljs-keyword">in</span> channel) {
    <span class="hljs-keyword">val</span> temperature = msg.body()
    min = Math.min(min, temperature)
    max = Math.max(max, temperature)
  }

  <span class="hljs-comment">// The stream is now closed</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>It can also be useful for parsing protocols. We will build a non blocking HTTP request parser to show
the power of channels.</p>
</div>
<div class="paragraph">
<p>We will rely on the <a href="http://vertx.io/docs/apidocs/io/vertx/core/parsetools/RecordParser.html"><code>RecordParser</code></a>
to slice the stream of buffer to a stream of buffer delimited by <code>\r\n</code>.</p>
</div>
<div class="paragraph">
<p>Here is the initial version of the parser, that handles only the HTTP request-line</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" data-lang="kotlin">vertx.createNetServer().connectHandler { socket -&gt;

  <span class="hljs-comment">// The record parser provides a stream of buffers delimited by \r\n</span>
  <span class="hljs-keyword">val</span> stream = RecordParser.newDelimited(<span class="hljs-string">&quot;\r\n&quot;</span>, socket)

  <span class="hljs-comment">// Convert the stream to a Kotlin channel</span>
  <span class="hljs-keyword">val</span> channel = stream.toChannel(vertx)

  <span class="hljs-comment">// Run the coroutine</span>
  launch {

    <span class="hljs-comment">// Receive the request-line</span>
    <span class="hljs-comment">// Non-blocking</span>
    <span class="hljs-keyword">val</span> line = channel.receive().toString().split(<span class="hljs-string">&quot; &quot;</span>)
    <span class="hljs-keyword">val</span> method = line[<span class="hljs-number">0</span>]
    <span class="hljs-keyword">val</span> uri = line[<span class="hljs-number">1</span>]

    println(<span class="hljs-string">&quot;Received HTTP request (<span class="hljs-variable">$method</span>, <span class="hljs-variable">$uri</span>)&quot;</span>)

    <span class="hljs-comment">// Still need to parse headers and body...</span>
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Parsing the request-line is as simple as calling <code>receive</code> on the channel.</p>
</div>
<div class="paragraph">
<p>The next step parses HTTP headers by receiving chunks until we get an empty one</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" data-lang="kotlin"><span class="hljs-comment">// Receive HTTP headers</span>
<span class="hljs-keyword">val</span> headers = HashMap&lt;String, String&gt;()
<span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {

  <span class="hljs-comment">// Non-blocking</span>
  <span class="hljs-keyword">val</span> header = channel.receive().toString()

  <span class="hljs-comment">// Done with parsing headers</span>
  <span class="hljs-keyword">if</span> (header.isEmpty()) {
    <span class="hljs-keyword">break</span>
  }

  <span class="hljs-keyword">val</span> pos = header.indexOf(<span class="hljs-string">&#x27;:&#x27;</span>)
  headers[header.substring(<span class="hljs-number">0</span>, pos).toLowerCase()] = header.substring(pos + <span class="hljs-number">1</span>).trim()
}

println(<span class="hljs-string">&quot;Received HTTP request (<span class="hljs-variable">$method</span>, <span class="hljs-variable">$uri</span>) with headers <span class="hljs-subst">${headers.keys}</span>&quot;</span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally we terminate the parser by handling optional request bodies</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" data-lang="kotlin"><span class="hljs-comment">// Receive the request body</span>
<span class="hljs-keyword">val</span> transferEncoding = headers[<span class="hljs-string">&quot;transfer-encoding&quot;</span>]
<span class="hljs-keyword">val</span> contentLength = headers[<span class="hljs-string">&quot;content-length&quot;</span>]

<span class="hljs-keyword">val</span> body: Buffer?
<span class="hljs-keyword">if</span> (transferEncoding == <span class="hljs-string">&quot;chunked&quot;</span>) {

  <span class="hljs-comment">// Handle chunked encoding, e.g</span>
  <span class="hljs-comment">// 5\r\n</span>
  <span class="hljs-comment">// HELLO\r\n</span>
  <span class="hljs-comment">// 0\r\n</span>
  <span class="hljs-comment">// \r\n</span>

  body = Buffer.buffer()
  <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {

    <span class="hljs-comment">// Parse length chunk</span>
    <span class="hljs-comment">// Non-blocking</span>
    <span class="hljs-keyword">val</span> len = channel.receive().toString().toInt(<span class="hljs-number">16</span>)
    <span class="hljs-keyword">if</span> (len == <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">break</span>
    }

    <span class="hljs-comment">// The stream is flipped to parse a chunk of the exact size</span>
    stream.fixedSizeMode(len + <span class="hljs-number">2</span>)

    <span class="hljs-comment">// Receive the chunk and append it</span>
    <span class="hljs-comment">// Non-blocking</span>
    <span class="hljs-keyword">val</span> chunk = channel.receive()
    body.appendBuffer(chunk, <span class="hljs-number">0</span>, chunk.length() - <span class="hljs-number">2</span>)

    <span class="hljs-comment">// The stream is flipped back to the \r\n delimiter to parse the next chunk</span>
    stream.delimitedMode(<span class="hljs-string">&quot;\r\n&quot;</span>)
  }
} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (contentLength != <span class="hljs-literal">null</span>) {

  <span class="hljs-comment">// The stream is flipped to parse a body of the exact size</span>
  stream.fixedSizeMode(contentLength.toInt())

  <span class="hljs-comment">// Non-blocking</span>
  body = channel.receive()
} <span class="hljs-keyword">else</span> {
  body = <span class="hljs-literal">null</span>
}

<span class="hljs-keyword">val</span> bodySize = body?.length() ?: <span class="hljs-number">0</span>
println(<span class="hljs-string">&quot;Received HTTP request (<span class="hljs-variable">$method</span>, <span class="hljs-variable">$uri</span>) with headers <span class="hljs-subst">${headers.keys}</span> and body with size <span class="hljs-variable">$bodySize</span>&quot;</span>)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_sending_data"><a class="anchor" href="#_sending_data"></a>Sending data</h3>
<div class="paragraph">
<p>Using a channel to send data is quite straightforward:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" data-lang="kotlin"><span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">sendChannel</span><span class="hljs-params">()</span></span> {
  <span class="hljs-keyword">val</span> stream = vertx.eventBus().publisher&lt;<span class="hljs-built_in">Double</span>&gt;(<span class="hljs-string">&quot;temperature&quot;</span>)
  <span class="hljs-keyword">val</span> channel = stream.toChannel(vertx)

  <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
    <span class="hljs-keyword">val</span> temperature = readTemperatureSensor()

    <span class="hljs-comment">// Broadcast the temperature</span>
    <span class="hljs-comment">// Non-blocking but could be suspended</span>
    channel.send(temperature)

    <span class="hljs-comment">// Wait for one second</span>
    awaitEvent&lt;<span class="hljs-built_in">Long</span>&gt; { vertx.setTimer(<span class="hljs-number">1000</span>, it) }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Both <code>SendChannel#send</code> and <code>WriteStream#write</code> are non blocking operations, however unlike <code>SendChannel#send</code>
can suspend the execution when the channel is full, the equivalent without a channel would look like</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" data-lang="kotlin"><span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">sendChannel</span><span class="hljs-params">()</span></span> {
  <span class="hljs-keyword">val</span> stream = vertx.eventBus().publisher&lt;<span class="hljs-built_in">Double</span>&gt;(<span class="hljs-string">&quot;temperature&quot;</span>)
  <span class="hljs-keyword">val</span> channel = stream.toChannel(vertx)

  <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
    <span class="hljs-keyword">val</span> temperature = readTemperatureSensor()

    <span class="hljs-comment">// Broadcast the temperature</span>
    <span class="hljs-comment">// Non-blocking but could be suspended</span>
    channel.send(temperature)

    <span class="hljs-comment">// Wait for one second</span>
    awaitEvent&lt;<span class="hljs-built_in">Long</span>&gt; { vertx.setTimer(<span class="hljs-number">1000</span>, it) }
  }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_delay_cancellation_and_timeouts"><a class="anchor" href="#_delay_cancellation_and_timeouts"></a>Delay, cancellation and timeouts</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Vertx dispatcher fully supports coroutine <code>delay</code> function via Vert.x timers:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" data-lang="kotlin">launch {
  <span class="hljs-comment">// Set a one second Vertx timer</span>
  delay(<span class="hljs-number">1000</span>)
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Timers support cancellation</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" data-lang="kotlin"><span class="hljs-keyword">val</span> job = launch {
  <span class="hljs-comment">// Set a one second Vertx timer</span>
  <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
    delay(<span class="hljs-number">1000</span>)
    <span class="hljs-comment">// Do something periodically</span>
  }
}

<span class="hljs-comment">// Sometimes later</span>
job.cancel()</code></pre>
</div>
</div>
<div class="paragraph">
<p>cancellation is <a href="https://github.com/Kotlin/kotlinx.coroutines/blob/master/coroutines-guide.md#cancellation-is-cooperative">cooperative</a></p>
</div>
<div class="paragraph">
<p>You can also schedule timeout with the <code>withTimeout</code> function</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-kotlin" data-lang="kotlin">launch {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">val</span> id = withTimeout&lt;String&gt;(<span class="hljs-number">1000</span>) {
      awaitEvent { anAsyncMethod(it) }
    }
  } <span class="hljs-keyword">catch</span> (e: TimeoutCancellationException) {
    <span class="hljs-comment">// Cancelled</span>
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_coroutine_builders"><a class="anchor" href="#_coroutine_builders"></a>Coroutine builders</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Vert.x works will all coroutine builders, as long as an instance of <code>CoroutineScope</code> is available: <code>launch</code>, <code>async</code>,
`produce', &#8230;&#8203; . A couple of important things to remember:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>runBlocking</code> doesn&#8217;t need a <code>CoroutineScope</code> and must not be used from a Vert.x event loop thread.</p>
</li>
<li>
<p>To avoid memory leaks, always use <code>coroutineScope {..}</code> to define a child scope. In this way, if a coroutine fails
inside the scope, all the others, defined inside that scope, will be cancelled too.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_coroutine_interoperability"><a class="anchor" href="#_coroutine_interoperability"></a>Coroutine interoperability</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Vert.x integration has been designed to be fully interoperable with Kotlin coroutines</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>kotlinx.coroutines.experimental.sync.Mutex</code> are executed on the event loop thread when using the vertx dispatcher</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_rxjava_interoperability"><a class="anchor" href="#_rxjava_interoperability"></a>RxJava interoperability</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The module <code>vertx-lang-kotlin-coroutines</code> does not have specific integration with RxJava.
However, Kotlin coroutines provide integration with RxJava, which works out nicely with <code>vertx-lang-kotlin-coroutines</code>.</p>
</div>
<div class="paragraph">
<p>You can read more about it in <a href="https://github.com/Kotlin/kotlinx.coroutines/tree/master/reactive">Coroutines for reactive streams</a>.</p>
</div>
</div>
</div></div></div></div></div></div><footer class="jsx-aeedcf66895f49d7"><div class="jsx-aeedcf66895f49d7 container"><div class="jsx-aeedcf66895f49d7 footer-nav-section"><div class="jsx-aeedcf66895f49d7 footer-nav-list footer-logo"><a class="jsx-aeedcf66895f49d7" href="/"><img src="data:image/svg+xml,%3csvg version=&#x27;1.1&#x27; id=&#x27;Layer_1&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27; x=&#x27;0&#x27; y=&#x27;0&#x27; viewBox=&#x27;0 0 1232.6 315.2&#x27; style=&#x27;enable-background:new 0 0 1232.6 315.2&#x27; xml:space=&#x27;preserve&#x27;%3e%3cstyle%3e.st0%7bfill:%23782a91%7d%3c/style%3e%3cpath d=&#x27;M120.9 214.2 190.5 0h52.3l-98.5 273.8H98.2L0 0h52.1l68.8 214.2zm291.2-62.6H299.6v84.2H431v38H252V0h177.7v38.4H299.6V114h112.5v37.6zm83.7-113.2H546c16.5.3 29 4.4 37.3 12.4 8.3 8 12.5 19.4 12.5 34 0 14-4.5 25.1-13.5 33.2-9 8.1-21.6 12.1-37.6 12.1h-27.1v24.2l86.1 119.5h51v-2.4l-77.2-106.7c24.9-5.5 43.3-21.7 52.6-35.9 8.2-12.6 13.3-27.7 13.3-46 0-26.8-8.6-47.4-25.8-61.5C600.5 7.1 576.1 0 544.5 0h-96.3v273.8h47.6&#x27;/%3e%3cpath class=&#x27;st0&#x27; d=&#x27;m1052.3 157.7-41.5 62.7 29.7 53.4h85.1z&#x27;/%3e%3ccircle class=&#x27;st0&#x27; cx=&#x27;827.9&#x27; cy=&#x27;274.7&#x27; r=&#x27;40.5&#x27;/%3e%3cpath class=&#x27;st0&#x27; d=&#x27;m1037 0-47.6 74.2L949 0h-84l85.3 135.8-67.1 105.7c5.7 9.5 9.1 20.5 9.2 32.4h50.1L1121.3 0H1037z&#x27;/%3e%3cpath d=&#x27;M763.5 273.8c.1-9.9 2.5-19.2 6.6-27.5V38.4h85.4V0H638.2v38.4h84.6v235.4h40.7zm414-266.9h-15.3v42.2h-8.5V6.9h-15.2V0h39v6.9zM1193 0l14.2 37.7L1221.3 0h11v49.1h-8.5V32.9l.8-21.7-14.5 37.9h-6.1l-14.5-37.8.8 21.6v16.2h-8.5V0h11.2z&#x27;/%3e%3c/svg%3e" alt="Vert.x Logo" class="jsx-aeedcf66895f49d7"/></a></div><div class="jsx-aeedcf66895f49d7 footer-nav-list"><h5 class="jsx-aeedcf66895f49d7">Eclipse Vert.x</h5><ul class="jsx-aeedcf66895f49d7 "><li class="jsx-aeedcf66895f49d7"><a class="jsx-aeedcf66895f49d7 navbar-menu-item" href="/docs/">文档</a></li><li class="jsx-aeedcf66895f49d7"><a class="jsx-aeedcf66895f49d7" href="/download/">下载</a></li><li class="jsx-aeedcf66895f49d7"><a class="jsx-aeedcf66895f49d7" href="/blog/">博客</a></li><li class="jsx-aeedcf66895f49d7"><a class="jsx-aeedcf66895f49d7" href="/community/">社区</a></li><li class="jsx-aeedcf66895f49d7"><a class="jsx-aeedcf66895f49d7" href="/translation/">翻译团队</a></li><li class="jsx-aeedcf66895f49d7"><a href="https://github.com/eclipse-vertx/vert.x" class="jsx-aeedcf66895f49d7">GitHub</a></li><li class="jsx-aeedcf66895f49d7"><a href="https://github.com/vertx-china/vertx-web-site" class="jsx-aeedcf66895f49d7">翻译GitHub</a></li></ul></div><div class="jsx-aeedcf66895f49d7 footer-nav-list"><h5 class="jsx-aeedcf66895f49d7">资源</h5><ul class="jsx-aeedcf66895f49d7 "><li class="jsx-aeedcf66895f49d7"><a class="jsx-aeedcf66895f49d7" href="/faq/">答疑</a></li><li class="jsx-aeedcf66895f49d7"><a class="jsx-aeedcf66895f49d7" href="/channels/">联系渠道</a></li><li class="jsx-aeedcf66895f49d7"><a href="https://how-to.vertx.io/" class="jsx-aeedcf66895f49d7">操作指南</a></li><li class="jsx-aeedcf66895f49d7"><a href="https://start.vertx.io/" class="jsx-aeedcf66895f49d7">应用生成器</a></li><li class="jsx-aeedcf66895f49d7"><a href="/.well-known/security.txt" class="jsx-aeedcf66895f49d7">security.txt</a></li></ul></div><div class="jsx-aeedcf66895f49d7 footer-nav-list"><h5 class="jsx-aeedcf66895f49d7">Eclipse</h5><ul class="jsx-aeedcf66895f49d7 "><li class="jsx-aeedcf66895f49d7"><a href="https://www.eclipse.org/" class="jsx-aeedcf66895f49d7">Eclipse 基金会</a></li><li class="jsx-aeedcf66895f49d7"><a href="https://www.eclipse.org/legal/privacy.php" class="jsx-aeedcf66895f49d7">隐私政策</a></li><li class="jsx-aeedcf66895f49d7"><a href="https://www.eclipse.org/legal/termsofuse.php" class="jsx-aeedcf66895f49d7">使用条款</a></li><li class="jsx-aeedcf66895f49d7"><a href="https://www.eclipse.org/legal/copyright.php" class="jsx-aeedcf66895f49d7">版权代理</a></li><li class="jsx-aeedcf66895f49d7"><a href="https://www.eclipse.org/legal/" class="jsx-aeedcf66895f49d7">法律资源</a></li></ul></div></div><div class="jsx-aeedcf66895f49d7 footer-copyright"><div class="jsx-aeedcf66895f49d7 footer-copyright-remarks">© <!-- -->2022<!-- --> Eclipse Vert.x™<br class="jsx-aeedcf66895f49d7"/>Eclipse Vert.x™ 是开源的，并在<a href="https://creativecommons.org/licenses/by-sa/3.0/" target="_blank" rel="noopener noreferrer" class="jsx-aeedcf66895f49d7">Eclipse Public License 2.0</a>和<a href="https://www.apache.org/licenses/LICENSE-2.0.html" target="_blank" rel="noopener noreferrer" class="jsx-aeedcf66895f49d7">Apache License 2.0</a>协议下获得了双重许可。<br class="jsx-aeedcf66895f49d7 footer-copyright-break"/>网站由 <a href="https://michelkraemer.com" target="_blank" rel="noopener noreferrer" class="jsx-aeedcf66895f49d7">Michel Krämer</a> 设计。</div><div class="jsx-aeedcf66895f49d7 footer-copyright-eclipse-logo"><a href="https://www.eclipse.org/" target="_blank" rel="noopener noreferrer" class="jsx-aeedcf66895f49d7"><img src="data:image/svg+xml,%3csvg version=&#x27;1.1&#x27; id=&#x27;Layer_1&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27; x=&#x27;0&#x27; y=&#x27;0&#x27; viewBox=&#x27;0 0 281.3 91.1&#x27; style=&#x27;enable-background:new 0 0 281.3 91.1&#x27; xml:space=&#x27;preserve&#x27;%3e%3cstyle%3e.st0%7bfill:%23f79422%7d.st1%7bfill:%233d3c3b%7d%3c/style%3e%3cg id=&#x27;Layer_1_1_&#x27;%3e%3cpath class=&#x27;st0&#x27; d=&#x27;M265.7 84 257 73h-2.7v17.7h3.3v-12l9.3 12h2.1V73h-3.3v11zm-32.4-8.3c4.2 0 5.8 3.3 5.8 6.3s-1.6 6-5.8 6-5.7-3.1-5.8-6 1.7-6.3 5.8-6.3zm0-3c-6.1 0-9.1 4.7-9.1 9.3 0 4.7 2.9 9.1 9.1 9.1s9-4.6 9.1-9.2-3-9.2-9.1-9.2zm-21.2 18V73h-3.3v17.7h3.3zm-23.6 0h3.3V76h5.6v-3h-14.6v3h5.6l.1 14.7zm-18.9-6.5H163l3.3-7.6 3.3 7.6zm2.8 6.5h3.6L168.2 73h-3.6l-8 17.7h3.6l1.5-3.3h9.3l1.4 3.3zm-38-14.6h3.6c3.9 0 5.5 2.8 5.5 5.5.1 2.8-1.5 5.8-5.5 5.8h-3.6V76.1zm3.7-3.1h-6.9v17.7h6.9c6.2 0 8.9-4.5 8.9-9s-2.8-8.7-8.9-8.7zm-22.4 11L107 73h-2.7v17.7h3.3v-12l9.3 12h2.1V73h-3.3v11zM88.2 73v10.2c0 3-1.6 4.9-4.3 4.9s-4.6-1.7-4.6-4.9V73H76v10.1c0 5.3 3.6 7.9 7.9 7.9 4.4 0 7.7-2.7 7.7-7.9V73h-3.4zm-33 2.7c4.2 0 5.8 3.3 5.8 6.3s-1.6 6-5.8 6-5.7-3.1-5.8-6 1.7-6.3 5.8-6.3zm0-3c-6.1 0-9.1 4.7-9.1 9.3s2.9 9.1 9.1 9.1 9-4.6 9.1-9.2-3-9.2-9.1-9.2zm-29.7 18v-6.5h8.9v-3.1h-8.9v-4.8h9.4V73H22.2v17.6h3.3z&#x27;/%3e%3cpath class=&#x27;st1&#x27; d=&#x27;M269.4 54.4h-22.2v-8.9h21.4v-6.9h-21.4v-9.1h22.2v-7.2h-29.6v39.5h29.6v-7.4zm-40-25.6c-3-6.1-9.4-7.8-15.5-7.8-7.3 0-15.3 3.4-15.3 11.5 0 8.9 7.4 11 15.5 12 5.2.6 9.1 2.1 9.1 5.8 0 4.3-4.4 5.9-9.1 5.9s-9.4-1.9-11.1-6.3l-6.2 3.2c2.9 7.2 9.1 9.7 17.2 9.7 8.8 0 16.6-3.8 16.6-12.6 0-9.4-7.7-11.6-15.9-12.6-4.7-.6-8.8-1.5-8.8-5 0-2.9 2.6-5.2 8.2-5.2 4.3 0 8 2.2 9.4 4.4l5.9-3zM176 22.2c-6.2-.1-12.4 0-18.6 0v39.5h7.4V50.1H176c19.4 0 19.4-27.9 0-27.9zm-11.1 7.1H176c9.5 0 9.5 14 0 14h-11.2l.1-14zm-18 32.5V22.2h-7.4v39.5l7.4.1zm-44-39.6v39.5h27.7v-6.9h-20.3V22.2h-7.4zM90.7 51.7c-2.7 2.5-6.2 4-9.9 4-9.8 0-13.5-6.8-13.6-13.4s4.1-13.7 13.6-13.7c3.5-.1 7 1.3 9.5 3.7l5-4.8c-3.8-3.9-9.1-6-14.5-6-14.3 0-21 10.5-20.9 20.8s6.3 20.3 20.9 20.3c5.6.1 11-2 15-5.9l-5.1-5zm-39 2.7H29.5v-8.9h21.4v-6.9H29.5v-9.1h22.2v-7.2H22.2v39.5h29.6l-.1-7.4z&#x27;/%3e%3cpath class=&#x27;st0&#x27; d=&#x27;M9.8 18.2C18.8 4.1 36.9-.8 52.1 6l-1-.7C35.7-4.6 15.2-.1 5.3 15.3s-5.4 35.9 10 45.8l1.1.6C3.8 50.8.8 32.3 9.8 18.2z&#x27;/%3e%3cpath class=&#x27;st1&#x27; d=&#x27;M272.2 26.1c0-2.5 2.1-4.6 4.6-4.6 2.5 0 4.6 2.1 4.6 4.6 0 2.5-2.1 4.6-4.6 4.6-2.6 0-4.6-2.1-4.6-4.6zm8.6 0c0-2.2-1.8-4.1-4-4.1s-4.1 1.8-4.1 4.1c0 2.2 1.7 4 3.9 4.1h.1c2.3 0 4.1-1.8 4.1-4.1zm-6-2.5h2.3c1.1 0 1.9.5 1.9 1.6 0 .7-.4 1.3-1.1 1.5l1.2 1.7h-1.4l-1-1.5h-.7v1.5h-1.1l-.1-4.8zm2.2 2.3c.5 0 .8-.3.8-.7s-.3-.7-.8-.7h-1v1.3l1 .1z&#x27;/%3e%3c/g%3e%3c/svg%3e" alt="Eclipse foundation Logo" class="jsx-aeedcf66895f49d7"/></a></div></div></div></footer></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"slug":"3.9.8/vertx-lang-kotlin-coroutines/kotlin","title":"vertx-lang-kotlin-coroutines","fallbackGitHubStars":null,"toc":"\u003cdiv id=\"toc\" class=\"toc\"\u003e\n\u003cdiv id=\"toctitle\"\u003eTable of Contents\u003c/div\u003e\n\u003cul class=\"sectlevel1\"\u003e\n\u003cli\u003e\u003ca href=\"#_introduction\"\u003eIntroduction\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_running_a_coroutine_from_a_vert_x_context\"\u003eRunning a coroutine from a Vert.x context\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_extending_coroutineverticle\"\u003eExtending CoroutineVerticle\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_getting_one_shot_asynchronous_results\"\u003eGetting one-shot asynchronous results\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_getting_one_shot_events\"\u003eGetting one-shot events\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_getting_one_shot_worker_results\"\u003eGetting one-shot worker results\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_streams_of_events\"\u003eStreams of events\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_awaiting_the_completion_of_vert_x_asynchronous_results\"\u003eAwaiting the completion of Vert.x asynchronous results\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_suspending_extension_methods\"\u003eSuspending extension methods\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_channels\"\u003eChannels\u003c/a\u003e\n\u003cul class=\"sectlevel2\"\u003e\n\u003cli\u003e\u003ca href=\"#_receiving_data\"\u003eReceiving data\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_sending_data\"\u003eSending data\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_delay_cancellation_and_timeouts\"\u003eDelay, cancellation and timeouts\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_coroutine_builders\"\u003eCoroutine builders\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_coroutine_interoperability\"\u003eCoroutine interoperability\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_rxjava_interoperability\"\u003eRxJava interoperability\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e","contents":"\u003ch1\u003evertx-lang-kotlin-coroutines\u003c/h1\u003e\n\n\u003cdiv id=\"preamble\"\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe \u003ccode\u003evertx-lang-kotlin-coroutines\u003c/code\u003e integrates Kotlin \u003cem\u003ecoroutines\u003c/em\u003e for performing asynchronous operations and processing events.\nThis results in using a programming model that looks like sequential code, yet it does not block kernel threads.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_introduction\"\u003e\u003ca class=\"anchor\" href=\"#_introduction\"\u003e\u003c/a\u003eIntroduction\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eOne of the key advantages of Vert.x over many legacy application platforms is that it is almost entirely non-blocking\n(of kernel threads).\nThis allows Vert.x-based applications to handle a lot of concurrency (e.g., many connections and messages) using a very\nsmall number of kernel threads, which in turns unlocks great scalability.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe non-blocking nature of Vert.x leads to asynchronous APIs. Asynchronous APIs can take various forms including\ncallbacks, promises, fibers or reactive extensions. Vert.x uses the callback style for the core APIs but it\nalso supports other models like RxJava 1 and 2.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIn some cases, programming using asynchronous APIs can be more challenging than using a classic / sequential style\nof code, in particular with several operations need to be done in sequence. Also, error propagation is often more\ncomplex when using asynchronous APIs.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e\u003ccode\u003evertx-lang-kotlin-coroutines\u003c/code\u003e uses \u003cem\u003ecoroutines\u003c/em\u003e. Coroutines are very lightweight threads that do not correspond\nto underlying kernel threads, so that when a \u003cem\u003ecoroutine\u003c/em\u003e needs to \u003cem\u003e\"block\u003c/em\u003e\" it gets \u003cem\u003esuspended\u003c/em\u003e and frees\nits current kernel thread so that another coroutine can process events.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e\u003ccode\u003evertx-lang-kotlin-coroutines\u003c/code\u003e uses \u003ca href=\"https://github.com/Kotlin/kotlinx.coroutines\"\u003ekotlinx.coroutines\u003c/a\u003e to implement the Coroutines.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"admonitionblock note\"\u003e\n\u003ctable\u003e\n\u003ctr\u003e\n\u003ctd class=\"icon\"\u003e\n\u003cdiv class=\"title\"\u003e注意\u003c/div\u003e\n\u003c/td\u003e\n\u003ctd class=\"content\"\u003e\n\u003ccode\u003evertx-lang-kotlin-coroutines\u003c/code\u003e currently only works with Kotlin and will be out of the \u003ca href=\"https://kotlinlang.org/docs/reference/coroutines.html#experimental-status-of-coroutines\"\u003eexperimental\u003c/a\u003e status\nin Kotlin 1.3\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_running_a_coroutine_from_a_vert_x_context\"\u003e\u003ca class=\"anchor\" href=\"#_running_a_coroutine_from_a_vert_x_context\"\u003e\u003c/a\u003eRunning a coroutine from a Vert.x context\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eHaving imported \u003ccode\u003eio.vertx.kotlin.coroutines.VertxCoroutine\u003c/code\u003e, the \u003ccode\u003eGlobalScope.launch\u003c/code\u003e method allows to run a block of code as a\ncoroutine in the \"Global\" application scope (bounded on the lifetime of the application):\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-kotlin\" data-lang=\"kotlin\"\u003e\u003cspan class=\"hljs-keyword\"\u003eval\u003c/span\u003e vertx = Vertx.vertx()\n\nGlobalScope.launch(vertx.dispatcher()) {\n  \u003cspan class=\"hljs-keyword\"\u003eval\u003c/span\u003e timerId = awaitEvent\u0026lt;\u003cspan class=\"hljs-built_in\"\u003eLong\u003c/span\u003e\u0026gt; { handler -\u0026gt;\n    vertx.setTimer(\u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e, handler)\n  }\n  println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Event fired from timer with id \u003cspan class=\"hljs-variable\"\u003e$timerId\u003c/span\u003e\u0026quot;\u003c/span\u003e)\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe \u003ccode\u003evertx.dispatcher()\u003c/code\u003e returns a coroutine dispatcher that execute coroutines using the Vert.x event loop.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe \u003ccode\u003eawaitEvent\u003c/code\u003e function suspends the execution of the coroutine until the timer fires and resumes the coroutines\n with the value that was given to the handler.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eMore details are given in the next sections on handlers, events and stream of events.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_extending_coroutineverticle\"\u003e\u003ca class=\"anchor\" href=\"#_extending_coroutineverticle\"\u003e\u003c/a\u003eExtending CoroutineVerticle\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eYou can deploy your code as instances of \u003ccode\u003eio.vertx.kotlin.coroutines.CoroutineVerticle\u003c/code\u003e, a specialized type of verticle\nfor Kotlin coroutines. The \u003ccode\u003eCoroutineVerticle\u003c/code\u003e class implements the \u003ccode\u003ekotlinx.coroutines.experimental.CoroutineScope\u003c/code\u003e interface,\nmaking all coroutines builder methods bounded by default to the verticle context. You should override the suspending \u003ccode\u003estart()\u003c/code\u003e\nand (optionally) the suspending \u003ccode\u003estop()\u003c/code\u003e methods of the verticle:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-kotlin\" data-lang=\"kotlin\"\u003e\u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eMyVerticle\u003c/span\u003e : \u003cspan class=\"hljs-type\"\u003eCoroutineVerticle\u003c/span\u003e\u003c/span\u003e() {\n  \u003cspan class=\"hljs-keyword\"\u003eoverride\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003esuspend\u003c/span\u003e \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efun\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003estart\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e()\u003c/span\u003e\u003c/span\u003e {\n    \u003cspan class=\"hljs-comment\"\u003e// ...\u003c/span\u003e\n  }\n\n  \u003cspan class=\"hljs-keyword\"\u003eoverride\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003esuspend\u003c/span\u003e \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efun\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003estop\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e()\u003c/span\u003e\u003c/span\u003e {\n    \u003cspan class=\"hljs-comment\"\u003e// ...\u003c/span\u003e\n  }\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eAll code examples below assume to be run inside a \u003ccode\u003eCoroutineVerticle\u003c/code\u003e implementation, but you can replace all \u003ccode\u003e\u0026lt;builder\u0026gt; { .. }\u003c/code\u003e\ncalls with \u003ccode\u003eGlobalScope.\u0026lt;builder\u0026gt; { .. }\u003c/code\u003e to use the application scope instead.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_getting_one_shot_asynchronous_results\"\u003e\u003ca class=\"anchor\" href=\"#_getting_one_shot_asynchronous_results\"\u003e\u003c/a\u003eGetting one-shot asynchronous results\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eMany asynchronous operations in Vert.x take a \u003ccode\u003eHandler\u0026lt;AsyncResult\u0026lt;T\u0026gt;\u0026gt;\u003c/code\u003e as the last argument.\nAn example would be executing an object retrieval using the Vert.x Mongo client, or sending an event bus message then\nawaiting for a reply.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThis is achieved by using the \u003ccode\u003eawaitResult\u003c/code\u003e method which returns the value or throws an exception.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe coroutine is being suspended until the event is being processed, and no kernel thread is being blocked.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe method is executed by specifying the asynchronous operation that needs to be executed in the form of a block that\nis passed to the handler at run-time.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eHere is an example:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-kotlin\" data-lang=\"kotlin\"\u003e\u003cspan class=\"hljs-keyword\"\u003esuspend\u003c/span\u003e \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efun\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eawaitResultExample\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e()\u003c/span\u003e\u003c/span\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003eval\u003c/span\u003e consumer = vertx.eventBus().localConsumer\u0026lt;String\u0026gt;(\u003cspan class=\"hljs-string\"\u003e\u0026quot;a.b.c\u0026quot;\u003c/span\u003e)\n  consumer.handler { message -\u0026gt;\n    println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Consumer received: \u003cspan class=\"hljs-subst\"\u003e${message.body()}\u003c/span\u003e\u0026quot;\u003c/span\u003e)\n    message.reply(\u003cspan class=\"hljs-string\"\u003e\u0026quot;pong\u0026quot;\u003c/span\u003e)\n  }\n\n  \u003cspan class=\"hljs-comment\"\u003e// Send a message and wait for a reply\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003eval\u003c/span\u003e reply = awaitResult\u0026lt;Message\u0026lt;String\u0026gt;\u0026gt; { h -\u0026gt;\n    vertx.eventBus().send(\u003cspan class=\"hljs-string\"\u003e\u0026quot;a.b.c\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;ping\u0026quot;\u003c/span\u003e, h)\n  }\n  println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Reply received: \u003cspan class=\"hljs-subst\"\u003e${reply.body()}\u003c/span\u003e\u0026quot;\u003c/span\u003e)\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eWhen the block produces a failure, the caller can handle it as an exception using the usual exception\n\u003ccode\u003etry\u003c/code\u003e/\u003ccode\u003ecatch\u003c/code\u003e constructs:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-kotlin\" data-lang=\"kotlin\"\u003e\u003cspan class=\"hljs-keyword\"\u003esuspend\u003c/span\u003e \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efun\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eawaitResultFailureExample\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e()\u003c/span\u003e\u003c/span\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003eval\u003c/span\u003e consumer = vertx.eventBus().localConsumer\u0026lt;String\u0026gt;(\u003cspan class=\"hljs-string\"\u003e\u0026quot;a.b.c\u0026quot;\u003c/span\u003e)\n  consumer.handler { message -\u0026gt;\n    \u003cspan class=\"hljs-comment\"\u003e// The consumer will get a failure\u003c/span\u003e\n    message.fail(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;it failed!!!\u0026quot;\u003c/span\u003e)\n  }\n\n  \u003cspan class=\"hljs-comment\"\u003e// Send a message and wait for a reply\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e {\n    awaitResult\u0026lt;Message\u0026lt;String\u0026gt;\u0026gt; { h -\u0026gt;\n      vertx.eventBus().send(\u003cspan class=\"hljs-string\"\u003e\u0026quot;a.b.c\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;ping\u0026quot;\u003c/span\u003e, h)\n    }\n  } \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e (e: ReplyException) {\n    \u003cspan class=\"hljs-comment\"\u003e// Handle specific reply exception here\u003c/span\u003e\n    println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Reply failure: \u003cspan class=\"hljs-subst\"\u003e${e.message}\u003c/span\u003e\u0026quot;\u003c/span\u003e)\n  }\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_getting_one_shot_events\"\u003e\u003ca class=\"anchor\" href=\"#_getting_one_shot_events\"\u003e\u003c/a\u003eGetting one-shot events\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eProcessing a one-shot event (and not the next occurrences, if any) is achieved using the \u003ccode\u003eawaitEvent\u003c/code\u003e function:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-kotlin\" data-lang=\"kotlin\"\u003e\u003cspan class=\"hljs-keyword\"\u003esuspend\u003c/span\u003e \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efun\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eawaitEventExample\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e()\u003c/span\u003e\u003c/span\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003eval\u003c/span\u003e id = awaitEvent\u0026lt;\u003cspan class=\"hljs-built_in\"\u003eLong\u003c/span\u003e\u0026gt; { h -\u0026gt; vertx.setTimer(\u003cspan class=\"hljs-number\"\u003e2000L\u003c/span\u003e, h) }\n  println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;This should be fired in 2s by some time with id=\u003cspan class=\"hljs-variable\"\u003e$id\u003c/span\u003e\u0026quot;\u003c/span\u003e)\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_getting_one_shot_worker_results\"\u003e\u003ca class=\"anchor\" href=\"#_getting_one_shot_worker_results\"\u003e\u003c/a\u003eGetting one-shot worker results\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eProcessing a blocking computation is achieved using the \u003ccode\u003eawaitBlocking\u003c/code\u003e function:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-kotlin\" data-lang=\"kotlin\"\u003e\u003cspan class=\"hljs-keyword\"\u003esuspend\u003c/span\u003e \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efun\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eawaitBlockingExample\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e()\u003c/span\u003e\u003c/span\u003e {\n  awaitBlocking {\n    Thread.sleep(\u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e)\n    \u003cspan class=\"hljs-string\"\u003e\u0026quot;some-string\u0026quot;\u003c/span\u003e\n  }\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_streams_of_events\"\u003e\u003ca class=\"anchor\" href=\"#_streams_of_events\"\u003e\u003c/a\u003eStreams of events\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIn many places in Vert.x APIs, streams of events are processed through handlers.\nExamples include event bus message consumers and HTTP server requests.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe \u003ccode\u003eReceiveChannelHandler\u003c/code\u003e class allows receiving events through the (suspendable) \u003ccode\u003ereceive\u003c/code\u003e method:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-kotlin\" data-lang=\"kotlin\"\u003e\u003cspan class=\"hljs-keyword\"\u003esuspend\u003c/span\u003e \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efun\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003estreamExample\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e()\u003c/span\u003e\u003c/span\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003eval\u003c/span\u003e adapter = vertx.receiveChannelHandler\u0026lt;Message\u0026lt;\u003cspan class=\"hljs-built_in\"\u003eInt\u003c/span\u003e\u0026gt;\u0026gt;()\n  vertx.eventBus().localConsumer\u0026lt;\u003cspan class=\"hljs-built_in\"\u003eInt\u003c/span\u003e\u0026gt;(\u003cspan class=\"hljs-string\"\u003e\u0026quot;a.b.c\u0026quot;\u003c/span\u003e).handler(adapter)\n\n  \u003cspan class=\"hljs-comment\"\u003e// Send 15 messages\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e (i \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.15\u003c/span\u003e) vertx.eventBus().send(\u003cspan class=\"hljs-string\"\u003e\u0026quot;a.b.c\u0026quot;\u003c/span\u003e, i)\n\n  \u003cspan class=\"hljs-comment\"\u003e// Receive the first 10 messages\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e (i \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0.\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.10\u003c/span\u003e) {\n    \u003cspan class=\"hljs-keyword\"\u003eval\u003c/span\u003e message = adapter.receive()\n    println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Received: \u003cspan class=\"hljs-subst\"\u003e${message.body()}\u003c/span\u003e\u0026quot;\u003c/span\u003e)\n  }\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_awaiting_the_completion_of_vert_x_asynchronous_results\"\u003e\u003ca class=\"anchor\" href=\"#_awaiting_the_completion_of_vert_x_asynchronous_results\"\u003e\u003c/a\u003eAwaiting the completion of Vert.x asynchronous results\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe \u003ccode\u003eawait\u003c/code\u003e extension method on instances of Vert.x asynchronous results suspend coroutines until they have completed, in\nwhich case the method returns the corresponding \u003ccode\u003eAsyncResult\u0026lt;T\u0026gt;\u003c/code\u003e object.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-kotlin\" data-lang=\"kotlin\"\u003e\u003cspan class=\"hljs-keyword\"\u003esuspend\u003c/span\u003e \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efun\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eawaitingFuture\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e()\u003c/span\u003e\u003c/span\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003eval\u003c/span\u003e httpServerFuture = Future.future\u0026lt;HttpServer\u0026gt;()\n  vertx.createHttpServer()\n    .requestHandler { req -\u0026gt; req.response().end(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Hello!\u0026quot;\u003c/span\u003e) }\n    .listen(\u003cspan class=\"hljs-number\"\u003e8000\u003c/span\u003e, httpServerFuture)\n\n  \u003cspan class=\"hljs-keyword\"\u003eval\u003c/span\u003e httpServer = httpServerFuture.await()\n  println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;HTTP server port: \u003cspan class=\"hljs-subst\"\u003e${httpServer.actualPort()}\u003c/span\u003e\u0026quot;\u003c/span\u003e)\n\n  \u003cspan class=\"hljs-keyword\"\u003eval\u003c/span\u003e result = CompositeFuture.all(httpServerFuture, httpServerFuture).await()\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (result.succeeded()) {\n    println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;The server is now running!\u0026quot;\u003c/span\u003e)\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    result.cause().printStackTrace()\n  }\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_suspending_extension_methods\"\u003e\u003ca class=\"anchor\" href=\"#_suspending_extension_methods\"\u003e\u003c/a\u003eSuspending extension methods\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eSince \u003ccode\u003e3.6.0\u003c/code\u003e, Vert.x generates suspending extension methods for all its asynchronous methods.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIt relieves the user from using the idiomatic \u003ccode\u003eawaitResult\u003c/code\u003e and makes the code more natural and readable.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-kotlin\" data-lang=\"kotlin\"\u003e\u003cspan class=\"hljs-keyword\"\u003esuspend\u003c/span\u003e \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efun\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003egeneratedSuspendingExtensionMethod\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e()\u003c/span\u003e\u003c/span\u003e {\n  \u003cspan class=\"hljs-comment\"\u003e// Suspending extension method\u003c/span\u003e\n  \u003cspan class=\"hljs-comment\"\u003e// This function has been automatically generated from the [io.vertx.core.net.NetClient original] using Vert.x codegen.\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003esuspend\u003c/span\u003e \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efun\u003c/span\u003e NetClient.\u003cspan class=\"hljs-title\"\u003econnectAwait\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(port : \u003cspan class=\"hljs-type\"\u003eInt\u003c/span\u003e, host : \u003cspan class=\"hljs-type\"\u003eString\u003c/span\u003e)\u003c/span\u003e\u003c/span\u003e : NetSocket {\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e awaitResult{\n      \u003cspan class=\"hljs-keyword\"\u003ethis\u003c/span\u003e.connect(port, host, it)\n    }\n  }\n\n  \u003cspan class=\"hljs-comment\"\u003e// Use the extension instead of wrapping with awaitResult\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003eval\u003c/span\u003e client = vertx.createNetClient();\n  \u003cspan class=\"hljs-keyword\"\u003eval\u003c/span\u003e socket = client.connectAwait(\u003cspan class=\"hljs-number\"\u003e1234\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;localhost\u0026quot;\u003c/span\u003e);\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eEach asynchronous method has a suspending counterpart, e.g \u003ccode\u003exyz(1, 2, handler)\u003c/code\u003e \u0026#8658; \u003ccode\u003exyzAwait(1, 2)\u003c/code\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eSuch extensions are provided by the \u003ccode\u003eio.vertx:vertx-lang-kotlin\u003c/code\u003e dependency and covers the Vert.x stack:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003evertx-web\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003evertx-jdbc-client\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003evertx-cassandra-client\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eetc\u0026#8230;\u0026#8203;\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_channels\"\u003e\u003ca class=\"anchor\" href=\"#_channels\"\u003e\u003c/a\u003eChannels\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eChannels are similar to Java \u003ccode\u003eBlockingQueue\u003c/code\u003e except that they do not block and instead suspend the coroutine\ninstead of blocking:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003esending a value to full channel suspends the coroutine\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003ereceving a value from an empty channels also suspends the coroutine\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eVert.x \u003ccode\u003eReadStream\u003c/code\u003e and \u003ccode\u003eWriteStream\u003c/code\u003e can be adapted to channels with the \u003ccode\u003etoChannel\u003c/code\u003e extension method.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThese adapters take care of managing the back-pressure and the stream termination\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003eReadStream\u0026lt;T\u0026gt;\u003c/code\u003e is adapted to a \u003ccode\u003eReceiveChannel\u0026lt;T\u0026gt;\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003eWriteStream\u0026lt;T\u0026gt;\u003c/code\u003e is adapted to a \u003ccode\u003eSendChannel\u0026lt;T\u0026gt;\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_receiving_data\"\u003e\u003ca class=\"anchor\" href=\"#_receiving_data\"\u003e\u003c/a\u003eReceiving data\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eChannel can be really useful when you need to handle a stream of correlated values:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-kotlin\" data-lang=\"kotlin\"\u003e\u003cspan class=\"hljs-keyword\"\u003esuspend\u003c/span\u003e \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efun\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003ehandleTemperatureStream\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e()\u003c/span\u003e\u003c/span\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003eval\u003c/span\u003e stream = vertx.eventBus().consumer\u0026lt;\u003cspan class=\"hljs-built_in\"\u003eDouble\u003c/span\u003e\u0026gt;(\u003cspan class=\"hljs-string\"\u003e\u0026quot;temperature\u0026quot;\u003c/span\u003e)\n  \u003cspan class=\"hljs-keyword\"\u003eval\u003c/span\u003e channel = stream.toChannel(vertx)\n\n  \u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e min = \u003cspan class=\"hljs-built_in\"\u003eDouble\u003c/span\u003e.MAX_VALUE\n  \u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e max = \u003cspan class=\"hljs-built_in\"\u003eDouble\u003c/span\u003e.MIN_VALUE\n\n  \u003cspan class=\"hljs-comment\"\u003e// Iterate until the stream is closed\u003c/span\u003e\n  \u003cspan class=\"hljs-comment\"\u003e// Non-blocking\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e (msg \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e channel) {\n    \u003cspan class=\"hljs-keyword\"\u003eval\u003c/span\u003e temperature = msg.body()\n    min = Math.min(min, temperature)\n    max = Math.max(max, temperature)\n  }\n\n  \u003cspan class=\"hljs-comment\"\u003e// The stream is now closed\u003c/span\u003e\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIt can also be useful for parsing protocols. We will build a non blocking HTTP request parser to show\nthe power of channels.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eWe will rely on the \u003ca href=\"http://vertx.io/docs/apidocs/io/vertx/core/parsetools/RecordParser.html\"\u003e\u003ccode\u003eRecordParser\u003c/code\u003e\u003c/a\u003e\nto slice the stream of buffer to a stream of buffer delimited by \u003ccode\u003e\\r\\n\u003c/code\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eHere is the initial version of the parser, that handles only the HTTP request-line\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-kotlin\" data-lang=\"kotlin\"\u003evertx.createNetServer().connectHandler { socket -\u0026gt;\n\n  \u003cspan class=\"hljs-comment\"\u003e// The record parser provides a stream of buffers delimited by \\r\\n\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003eval\u003c/span\u003e stream = RecordParser.newDelimited(\u003cspan class=\"hljs-string\"\u003e\u0026quot;\\r\\n\u0026quot;\u003c/span\u003e, socket)\n\n  \u003cspan class=\"hljs-comment\"\u003e// Convert the stream to a Kotlin channel\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003eval\u003c/span\u003e channel = stream.toChannel(vertx)\n\n  \u003cspan class=\"hljs-comment\"\u003e// Run the coroutine\u003c/span\u003e\n  launch {\n\n    \u003cspan class=\"hljs-comment\"\u003e// Receive the request-line\u003c/span\u003e\n    \u003cspan class=\"hljs-comment\"\u003e// Non-blocking\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003eval\u003c/span\u003e line = channel.receive().toString().split(\u003cspan class=\"hljs-string\"\u003e\u0026quot; \u0026quot;\u003c/span\u003e)\n    \u003cspan class=\"hljs-keyword\"\u003eval\u003c/span\u003e method = line[\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e]\n    \u003cspan class=\"hljs-keyword\"\u003eval\u003c/span\u003e uri = line[\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e]\n\n    println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Received HTTP request (\u003cspan class=\"hljs-variable\"\u003e$method\u003c/span\u003e, \u003cspan class=\"hljs-variable\"\u003e$uri\u003c/span\u003e)\u0026quot;\u003c/span\u003e)\n\n    \u003cspan class=\"hljs-comment\"\u003e// Still need to parse headers and body...\u003c/span\u003e\n  }\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eParsing the request-line is as simple as calling \u003ccode\u003ereceive\u003c/code\u003e on the channel.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe next step parses HTTP headers by receiving chunks until we get an empty one\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-kotlin\" data-lang=\"kotlin\"\u003e\u003cspan class=\"hljs-comment\"\u003e// Receive HTTP headers\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eval\u003c/span\u003e headers = HashMap\u0026lt;String, String\u0026gt;()\n\u003cspan class=\"hljs-keyword\"\u003ewhile\u003c/span\u003e (\u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e) {\n\n  \u003cspan class=\"hljs-comment\"\u003e// Non-blocking\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003eval\u003c/span\u003e header = channel.receive().toString()\n\n  \u003cspan class=\"hljs-comment\"\u003e// Done with parsing headers\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (header.isEmpty()) {\n    \u003cspan class=\"hljs-keyword\"\u003ebreak\u003c/span\u003e\n  }\n\n  \u003cspan class=\"hljs-keyword\"\u003eval\u003c/span\u003e pos = header.indexOf(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;:\u0026#x27;\u003c/span\u003e)\n  headers[header.substring(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e, pos).toLowerCase()] = header.substring(pos + \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e).trim()\n}\n\nprintln(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Received HTTP request (\u003cspan class=\"hljs-variable\"\u003e$method\u003c/span\u003e, \u003cspan class=\"hljs-variable\"\u003e$uri\u003c/span\u003e) with headers \u003cspan class=\"hljs-subst\"\u003e${headers.keys}\u003c/span\u003e\u0026quot;\u003c/span\u003e)\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eFinally we terminate the parser by handling optional request bodies\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-kotlin\" data-lang=\"kotlin\"\u003e\u003cspan class=\"hljs-comment\"\u003e// Receive the request body\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eval\u003c/span\u003e transferEncoding = headers[\u003cspan class=\"hljs-string\"\u003e\u0026quot;transfer-encoding\u0026quot;\u003c/span\u003e]\n\u003cspan class=\"hljs-keyword\"\u003eval\u003c/span\u003e contentLength = headers[\u003cspan class=\"hljs-string\"\u003e\u0026quot;content-length\u0026quot;\u003c/span\u003e]\n\n\u003cspan class=\"hljs-keyword\"\u003eval\u003c/span\u003e body: Buffer?\n\u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (transferEncoding == \u003cspan class=\"hljs-string\"\u003e\u0026quot;chunked\u0026quot;\u003c/span\u003e) {\n\n  \u003cspan class=\"hljs-comment\"\u003e// Handle chunked encoding, e.g\u003c/span\u003e\n  \u003cspan class=\"hljs-comment\"\u003e// 5\\r\\n\u003c/span\u003e\n  \u003cspan class=\"hljs-comment\"\u003e// HELLO\\r\\n\u003c/span\u003e\n  \u003cspan class=\"hljs-comment\"\u003e// 0\\r\\n\u003c/span\u003e\n  \u003cspan class=\"hljs-comment\"\u003e// \\r\\n\u003c/span\u003e\n\n  body = Buffer.buffer()\n  \u003cspan class=\"hljs-keyword\"\u003ewhile\u003c/span\u003e (\u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e) {\n\n    \u003cspan class=\"hljs-comment\"\u003e// Parse length chunk\u003c/span\u003e\n    \u003cspan class=\"hljs-comment\"\u003e// Non-blocking\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003eval\u003c/span\u003e len = channel.receive().toString().toInt(\u003cspan class=\"hljs-number\"\u003e16\u003c/span\u003e)\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (len == \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e) {\n      \u003cspan class=\"hljs-keyword\"\u003ebreak\u003c/span\u003e\n    }\n\n    \u003cspan class=\"hljs-comment\"\u003e// The stream is flipped to parse a chunk of the exact size\u003c/span\u003e\n    stream.fixedSizeMode(len + \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e)\n\n    \u003cspan class=\"hljs-comment\"\u003e// Receive the chunk and append it\u003c/span\u003e\n    \u003cspan class=\"hljs-comment\"\u003e// Non-blocking\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003eval\u003c/span\u003e chunk = channel.receive()\n    body.appendBuffer(chunk, \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e, chunk.length() - \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e)\n\n    \u003cspan class=\"hljs-comment\"\u003e// The stream is flipped back to the \\r\\n delimiter to parse the next chunk\u003c/span\u003e\n    stream.delimitedMode(\u003cspan class=\"hljs-string\"\u003e\u0026quot;\\r\\n\u0026quot;\u003c/span\u003e)\n  }\n} \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (contentLength != \u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e) {\n\n  \u003cspan class=\"hljs-comment\"\u003e// The stream is flipped to parse a body of the exact size\u003c/span\u003e\n  stream.fixedSizeMode(contentLength.toInt())\n\n  \u003cspan class=\"hljs-comment\"\u003e// Non-blocking\u003c/span\u003e\n  body = channel.receive()\n} \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n  body = \u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e\n}\n\n\u003cspan class=\"hljs-keyword\"\u003eval\u003c/span\u003e bodySize = body?.length() ?: \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e\nprintln(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Received HTTP request (\u003cspan class=\"hljs-variable\"\u003e$method\u003c/span\u003e, \u003cspan class=\"hljs-variable\"\u003e$uri\u003c/span\u003e) with headers \u003cspan class=\"hljs-subst\"\u003e${headers.keys}\u003c/span\u003e and body with size \u003cspan class=\"hljs-variable\"\u003e$bodySize\u003c/span\u003e\u0026quot;\u003c/span\u003e)\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_sending_data\"\u003e\u003ca class=\"anchor\" href=\"#_sending_data\"\u003e\u003c/a\u003eSending data\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eUsing a channel to send data is quite straightforward:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-kotlin\" data-lang=\"kotlin\"\u003e\u003cspan class=\"hljs-keyword\"\u003esuspend\u003c/span\u003e \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efun\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003esendChannel\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e()\u003c/span\u003e\u003c/span\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003eval\u003c/span\u003e stream = vertx.eventBus().publisher\u0026lt;\u003cspan class=\"hljs-built_in\"\u003eDouble\u003c/span\u003e\u0026gt;(\u003cspan class=\"hljs-string\"\u003e\u0026quot;temperature\u0026quot;\u003c/span\u003e)\n  \u003cspan class=\"hljs-keyword\"\u003eval\u003c/span\u003e channel = stream.toChannel(vertx)\n\n  \u003cspan class=\"hljs-keyword\"\u003ewhile\u003c/span\u003e (\u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e) {\n    \u003cspan class=\"hljs-keyword\"\u003eval\u003c/span\u003e temperature = readTemperatureSensor()\n\n    \u003cspan class=\"hljs-comment\"\u003e// Broadcast the temperature\u003c/span\u003e\n    \u003cspan class=\"hljs-comment\"\u003e// Non-blocking but could be suspended\u003c/span\u003e\n    channel.send(temperature)\n\n    \u003cspan class=\"hljs-comment\"\u003e// Wait for one second\u003c/span\u003e\n    awaitEvent\u0026lt;\u003cspan class=\"hljs-built_in\"\u003eLong\u003c/span\u003e\u0026gt; { vertx.setTimer(\u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e, it) }\n  }\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eBoth \u003ccode\u003eSendChannel#send\u003c/code\u003e and \u003ccode\u003eWriteStream#write\u003c/code\u003e are non blocking operations, however unlike \u003ccode\u003eSendChannel#send\u003c/code\u003e\ncan suspend the execution when the channel is full, the equivalent without a channel would look like\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-kotlin\" data-lang=\"kotlin\"\u003e\u003cspan class=\"hljs-keyword\"\u003esuspend\u003c/span\u003e \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efun\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003esendChannel\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e()\u003c/span\u003e\u003c/span\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003eval\u003c/span\u003e stream = vertx.eventBus().publisher\u0026lt;\u003cspan class=\"hljs-built_in\"\u003eDouble\u003c/span\u003e\u0026gt;(\u003cspan class=\"hljs-string\"\u003e\u0026quot;temperature\u0026quot;\u003c/span\u003e)\n  \u003cspan class=\"hljs-keyword\"\u003eval\u003c/span\u003e channel = stream.toChannel(vertx)\n\n  \u003cspan class=\"hljs-keyword\"\u003ewhile\u003c/span\u003e (\u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e) {\n    \u003cspan class=\"hljs-keyword\"\u003eval\u003c/span\u003e temperature = readTemperatureSensor()\n\n    \u003cspan class=\"hljs-comment\"\u003e// Broadcast the temperature\u003c/span\u003e\n    \u003cspan class=\"hljs-comment\"\u003e// Non-blocking but could be suspended\u003c/span\u003e\n    channel.send(temperature)\n\n    \u003cspan class=\"hljs-comment\"\u003e// Wait for one second\u003c/span\u003e\n    awaitEvent\u0026lt;\u003cspan class=\"hljs-built_in\"\u003eLong\u003c/span\u003e\u0026gt; { vertx.setTimer(\u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e, it) }\n  }\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_delay_cancellation_and_timeouts\"\u003e\u003ca class=\"anchor\" href=\"#_delay_cancellation_and_timeouts\"\u003e\u003c/a\u003eDelay, cancellation and timeouts\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eVertx dispatcher fully supports coroutine \u003ccode\u003edelay\u003c/code\u003e function via Vert.x timers:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-kotlin\" data-lang=\"kotlin\"\u003elaunch {\n  \u003cspan class=\"hljs-comment\"\u003e// Set a one second Vertx timer\u003c/span\u003e\n  delay(\u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e)\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eTimers support cancellation\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-kotlin\" data-lang=\"kotlin\"\u003e\u003cspan class=\"hljs-keyword\"\u003eval\u003c/span\u003e job = launch {\n  \u003cspan class=\"hljs-comment\"\u003e// Set a one second Vertx timer\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003ewhile\u003c/span\u003e (\u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e) {\n    delay(\u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e)\n    \u003cspan class=\"hljs-comment\"\u003e// Do something periodically\u003c/span\u003e\n  }\n}\n\n\u003cspan class=\"hljs-comment\"\u003e// Sometimes later\u003c/span\u003e\njob.cancel()\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003ecancellation is \u003ca href=\"https://github.com/Kotlin/kotlinx.coroutines/blob/master/coroutines-guide.md#cancellation-is-cooperative\"\u003ecooperative\u003c/a\u003e\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eYou can also schedule timeout with the \u003ccode\u003ewithTimeout\u003c/code\u003e function\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-kotlin\" data-lang=\"kotlin\"\u003elaunch {\n  \u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003eval\u003c/span\u003e id = withTimeout\u0026lt;String\u0026gt;(\u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e) {\n      awaitEvent { anAsyncMethod(it) }\n    }\n  } \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e (e: TimeoutCancellationException) {\n    \u003cspan class=\"hljs-comment\"\u003e// Cancelled\u003c/span\u003e\n  }\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_coroutine_builders\"\u003e\u003ca class=\"anchor\" href=\"#_coroutine_builders\"\u003e\u003c/a\u003eCoroutine builders\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eVert.x works will all coroutine builders, as long as an instance of \u003ccode\u003eCoroutineScope\u003c/code\u003e is available: \u003ccode\u003elaunch\u003c/code\u003e, \u003ccode\u003easync\u003c/code\u003e,\n`produce', \u0026#8230;\u0026#8203; . A couple of important things to remember:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eThe \u003ccode\u003erunBlocking\u003c/code\u003e doesn\u0026#8217;t need a \u003ccode\u003eCoroutineScope\u003c/code\u003e and must not be used from a Vert.x event loop thread.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eTo avoid memory leaks, always use \u003ccode\u003ecoroutineScope {..}\u003c/code\u003e to define a child scope. In this way, if a coroutine fails\ninside the scope, all the others, defined inside that scope, will be cancelled too.\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_coroutine_interoperability\"\u003e\u003ca class=\"anchor\" href=\"#_coroutine_interoperability\"\u003e\u003c/a\u003eCoroutine interoperability\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eVert.x integration has been designed to be fully interoperable with Kotlin coroutines\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003ekotlinx.coroutines.experimental.sync.Mutex\u003c/code\u003e are executed on the event loop thread when using the vertx dispatcher\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_rxjava_interoperability\"\u003e\u003ca class=\"anchor\" href=\"#_rxjava_interoperability\"\u003e\u003c/a\u003eRxJava interoperability\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe module \u003ccode\u003evertx-lang-kotlin-coroutines\u003c/code\u003e does not have specific integration with RxJava.\nHowever, Kotlin coroutines provide integration with RxJava, which works out nicely with \u003ccode\u003evertx-lang-kotlin-coroutines\u003c/code\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eYou can read more about it in \u003ca href=\"https://github.com/Kotlin/kotlinx.coroutines/tree/master/reactive\"\u003eCoroutines for reactive streams\u003c/a\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e","version":"3.9.8"},"__N_SSG":true},"page":"/docs/[[...slug]]","query":{"slug":["3.9.8","vertx-lang-kotlin-coroutines","kotlin"]},"buildId":"Zim9h1gpFCKXkIGuQr_Ne","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>