<!DOCTYPE html><html lang="en"><head><link rel="stylesheet" data-href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500&amp;display=swap"/><link rel="stylesheet" data-href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@300;400&amp;display=swap"/><link rel="stylesheet" data-href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400&amp;display=swap"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="description" content="Vert.x | Reactive applications on the JVM"/><meta name="robots" content="index,follow"/><link rel="shortcut icon" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="48x48" href="/favicons/favicon-48x48.png"/><link rel="alternate" type="application/rss+xml" href="/feed/rss.xml"/><link rel="alternate" type="application/atom+xml" href="/feed/atom.xml"/><link rel="alternate" type="application/json" href="/feed/feed.json"/><title>服务发现 | Eclipse Vert.x</title><link rel="preload" href="https://api.github.com/repos/vert-x3/vertx-service-discovery" as="fetch" crossorigin="anonymous" class="jsx-1153611384"/><meta name="next-head-count" content="14"/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-a54b4f32bdc1ef890ddd.js"></script><script src="/_next/static/chunks/webpack-0e0f5c5c9fa5a29e0d78.js" defer=""></script><script src="/_next/static/chunks/framework-2191d16384373197bc0a.js" defer=""></script><script src="/_next/static/chunks/main-791d360c4f713077c3d6.js" defer=""></script><script src="/_next/static/chunks/pages/_app-0727c67bedbbb4c22e4a.js" defer=""></script><script src="/_next/static/chunks/615-6d6ca750e2a9fa60adea.js" defer=""></script><script src="/_next/static/chunks/619-e0ac0bb7086baf39108f.js" defer=""></script><script src="/_next/static/chunks/934-2dc74a92af3e0e391096.js" defer=""></script><script src="/_next/static/chunks/31-bb0d9e1106ba3e8c65f3.js" defer=""></script><script src="/_next/static/chunks/907-66e2ac95d5144ecb02a6.js" defer=""></script><script src="/_next/static/chunks/pages/docs/%5B%5B...slug%5D%5D-4918292890b836d7a66a.js" defer=""></script><script src="/_next/static/seJqQNiHT6NWjFwhJXP8s/_buildManifest.js" defer=""></script><script src="/_next/static/seJqQNiHT6NWjFwhJXP8s/_ssgManifest.js" defer=""></script><style id="__jsx-1030027079">.dropdown-item.jsx-1030027079{white-space:nowrap;line-height:2;width:100%;padding:0 1.5rem;cursor:pointer;}.dropdown-item.jsx-1030027079:hover{background-color:#e9ecef;}.dropdown-item.active.jsx-1030027079{font-weight:400;padding-left:0.75rem;}.dropdown-item.has-active-siblings.jsx-1030027079:not(.active){padding-left:calc(0.75rem + 16px + 0.5em);}.dropdown-item.jsx-1030027079 .dropdown-check-icon.jsx-1030027079{width:16px;margin-right:0.5em;margin-top:1px;}</style><style id="__jsx-3534061111">.dropdown.jsx-3534061111{position:relative;display:inline-block;}.dropdown.jsx-3534061111 .dropdown-title.jsx-3534061111{margin-right:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.dropdown.jsx-3534061111 .dropdown-menu.jsx-3534061111{position:absolute;background-color:#f8f9fa;box-shadow:0 2px 5px 0 rgba(0,0,0,0.1);border-radius:0.8rem;list-style-type:none;padding:0.6666666667rem 0;margin:0.25rem 0 0 0;z-index:100;display:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.dropdown.jsx-3534061111 .dropdown-menu.jsx-3534061111 a{color:#4d4d4d;-webkit-text-decoration:none;text-decoration:none;font-weight:300;}.dropdown.jsx-3534061111 .dropdown-menu.align-right.jsx-3534061111{right:0;}.dropdown.jsx-3534061111 .dropdown-menu.visible.jsx-3534061111{display:block;}.dropdown.jsx-3534061111 .dropdown-menu.jsx-3534061111 a.jsx-3534061111:hover{color:inherit;}.dropdown.jsx-3534061111 svg{margin-bottom:2px;}</style><style id="__jsx-3537117450">.navbar{position:absolute;top:2.75rem;width:100%;}.navbar a{color:#3c3c3b;}.navbar a.navbar-menu-item,.navbar .dropdown-title{text-transform:uppercase;}.navbar a.navbar-menu-item:hover,.navbar .dropdown-title:hover{-webkit-text-decoration:none;text-decoration:none;color:#898987;-webkit-transition:color 0.15s ease-in-out;transition:color 0.15s ease-in-out;}.navbar .navbar-content{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:relative;}.navbar .navbar-content .navbar-logo{-webkit-flex:1;-ms-flex:1;flex:1;}.navbar .navbar-content .navbar-logo img{width:8.3rem;}.navbar .navbar-content .navbar-collapse-button{display:none;cursor:pointer;}@media (max-width:1000px){.navbar .navbar-content .navbar-collapse-button{display:inline-block;}}.navbar .navbar-content .navbar-collapse-button span{display:block;width:33px;height:4px;margin-bottom:5px;position:relative;background:#3c3c3b;border-radius:3px;z-index:1;-webkit-transform-origin:4px 0;-ms-transform-origin:4px 0;transform-origin:4px 0;-webkit-transition:-webkit-transform 0.5s cubic-bezier(0.77,0.2,0.05,1),background 0.5s cubic-bezier(0.77,0.2,0.05,1),opacity 0.55s ease;-webkit-transition:transform 0.5s cubic-bezier(0.77,0.2,0.05,1),background 0.5s cubic-bezier(0.77,0.2,0.05,1),opacity 0.55s ease;transition:transform 0.5s cubic-bezier(0.77,0.2,0.05,1),background 0.5s cubic-bezier(0.77,0.2,0.05,1),opacity 0.55s ease;}.navbar .navbar-content .navbar-collapse-button span:first-child{-webkit-transform-origin:0% 0%;-ms-transform-origin:0% 0%;transform-origin:0% 0%;}.navbar .navbar-content .navbar-collapse-button span:nth-last-child(2){-webkit-transform-origin:0% 100%;-ms-transform-origin:0% 100%;transform-origin:0% 100%;}.navbar .navbar-content .navbar-right{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:baseline;-webkit-box-align:baseline;-ms-flex-align:baseline;align-items:baseline;margin-bottom:10px;}@media (max-width:1000px){.navbar .navbar-content .navbar-right{max-height:0;-webkit-transition:max-height 200ms ease-in-out;transition:max-height 200ms ease-in-out;box-shadow:0 2px 5px 0 rgba(0,0,0,0.1);-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;position:absolute;top:2.75rem;left:0.8rem;right:0.8rem;background-color:#f8f9fa;overflow-x:auto;overflow-y:hidden;}}.navbar .navbar-content .navbar-menu .navbar-menu-item{font-weight:400;margin-right:2.5rem;}.navbar .navbar-content .navbar-menu .navbar-menu-item.with-drop-down{margin-right:1.8rem;}@media (max-width:1250px){.navbar .navbar-content .navbar-menu .navbar-menu-item{margin-right:1.5rem;}}@media (max-width:1000px){.navbar .navbar-content .navbar-menu .navbar-menu-item{display:block;margin-bottom:1rem;font-size:1.2rem;}}.navbar .navbar-content .navbar-menu .navbar-menu-item .external-link-icon{margin-left:0.25em;}@media (max-width:1000px){.navbar .navbar-content .navbar-menu{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:1rem;}}.navbar .navbar-content .navbar-social{margin-left:1.6rem;font-size:0.875rem;}.navbar .navbar-content .navbar-social svg{height:16px;margin-bottom:2px;}@media (max-width:1000px){.navbar .navbar-content .navbar-social svg{height:1rem;}}@media (max-width:1250px){.navbar .navbar-content .navbar-social{margin-left:1rem;}}@media (max-width:1000px){.navbar .navbar-content .navbar-social{margin-left:auto;padding:0 1rem 1rem 0;font-size:1rem;}}@media (max-width:768px){.navbar{top:1rem;}}.page .navbar{top:0;padding-top:1.5rem;padding-bottom:1rem;position:fixed;background-color:#fff;z-index:2;}</style><style id="__jsx-2520609189">.search input{color:#adb5bd;border:1px solid #dee2e6;border-radius:0.4rem;font-size:0.875rem;padding:0.25rem 1.8rem 0.35rem 1.8rem;width:100%;-webkit-transition:color 0.15s ease-in-out,border-color 0.15s ease-in-out;transition:color 0.15s ease-in-out,border-color 0.15s ease-in-out;}.search input:focus{border-color:#adb5bd;color:#3c3c3b;}.search .search-icon,.search .search-icon-delete{position:absolute;top:0.55rem;height:1rem;stroke:#adb5bd;-webkit-transition:stroke 0.15s ease-in-out;transition:stroke 0.15s ease-in-out;}.search .search-icon{left:0.4rem;}.search input:focus+.search-icon{stroke:#6f6970;}.search .search-icon-delete{stroke:#6f6970;right:0.4rem;height:0.75rem;top:0.7rem;opacity:0;-webkit-transition:opacity 0.15s ease-in-out;transition:opacity 0.15s ease-in-out;cursor:text;}.search.has-content .search-icon-delete{opacity:1;cursor:pointer;}</style><style id="__jsx-4212053455">.search-results,.search-results-none{font-size:0.875rem;overflow:auto;list-style-type:none;padding-left:0;display:none;}.search-results.visible,.search-results-none.visible{display:block;}.search-results{list-style-type:none;padding:0;margin-bottom:0;}.search-results li{display:block;padding:0.5rem;margin-bottom:1rem;border-radius:0.4rem;border:1px solid transparent;cursor:pointer;}.search-results li.active{background-color:#f8f9fa;border:1px solid #e9ecef;}.search-results li h5{margin:0 0 0.5rem 0;font-size:1em;}.search-results li .search-results-highlight{background-color:yellow;}.search-results-none{padding:1rem 0.5rem;text-align:center;width:100%;}</style><style id="__jsx-2599647406">.search-panel{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;position:relative;}</style><style id="__jsx-1153611384">.github-stars.jsx-1153611384{display:inline-block;}.github-stars.jsx-1153611384 .icon.jsx-1153611384{margin-right:0.25em;}.github-stars.jsx-1153611384 .icon.jsx-1153611384 svg{height:1rem;}</style><style id="__jsx-1771812074">footer{font-size:0.875rem;padding-top:3rem;padding-bottom:4rem;background-color:#f8f9fa;border-top:1px solid #dee2e6;margin-top:1rem;color:#6f6970;}footer h5{font-size:1rem;margin-top:0;margin-bottom:1rem;color:#3c3c3b;text-transform:uppercase;}footer ul{padding:0;list-style:none;line-height:2;}footer a{color:#6f6970;}footer .footer-logo img,footer .footer-copyright-eclipse-logo img{-webkit-filter:grayscale(100);filter:grayscale(100);opacity:0.5;-webkit-transition:all 0.15s ease-in-out;transition:all 0.15s ease-in-out;}footer .footer-logo img:hover,footer .footer-copyright-eclipse-logo img:hover{-webkit-filter:grayscale(0);filter:grayscale(0);opacity:1;}footer .footer-nav-section{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;margin-bottom:6rem;}footer .footer-nav-section .footer-logo{margin-top:0.4rem;}footer .footer-nav-section .footer-logo img{width:8.3rem;}footer .footer-nav-section .footer-nav-list{width:20%;}footer .footer-copyright{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}footer .footer-copyright a{white-space:nowrap;}footer .footer-copyright .footer-copyright-eclipse-logo{width:17%;margin-bottom:0.5rem;}@media (max-width:1250px){footer .footer-copyright .footer-copyright-break{display:none;}footer .footer-copyright .footer-copyright-eclipse-logo{width:30%;}}@media (max-width:1000px){footer .footer-nav-section .footer-nav-list{width:25%;}footer .footer-copyright .footer-copyright-break{display:inline-block;}footer .footer-copyright .footer-copyright-eclipse-logo{width:40%;}}@media (max-width:768px){footer .footer-nav-section{max-width:100%;margin-left:auto;margin-right:auto;}}@media (max-width:640px){footer .footer-nav-section{max-width:80%;margin-bottom:3rem;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}footer .footer-nav-section h5{cursor:pointer;}footer .footer-nav-section h5::after{display:inline-block;content:"";border-top:0.4em solid;border-right:0.4em solid transparent;border-bottom:0;border-left:0.4em solid transparent;position:absolute;top:0.75rem;right:0;}footer .footer-nav-section .footer-nav-list{width:100%;position:relative;}footer .footer-nav-section .footer-nav-list ul{overflow-y:hidden;max-height:0;-webkit-transition:all 200ms ease-in-out;transition:all 200ms ease-in-out;}footer .footer-nav-section .footer-nav-list ul.visible{margin-bottom:2rem;}footer .footer-nav-section .footer-logo{margin:0 auto 3rem auto;width:auto;}footer .footer-copyright{max-width:80%;text-align:center;margin-left:auto;margin-right:auto;-webkit-flex-direction:column-reverse;-ms-flex-direction:column-reverse;flex-direction:column-reverse;}footer .footer-copyright .footer-copyright-eclipse-logo{width:7.6rem;margin-bottom:1rem;}}</style><style id="__jsx-4280303685">.page-content{margin-top:6em;margin-bottom:8rem;}.docs .docs-content .docs-content-wrapper{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}.docs .docs-content .docs-content-wrapper aside{-webkit-flex:0 0 17rem;-ms-flex:0 0 17rem;flex:0 0 17rem;}.docs .docs-content .docs-content-wrapper aside .docs-content-wrapper-sidebar{position:-webkit-sticky;position:sticky;top:7em;}.docs .docs-content .docs-content-wrapper aside .search-panel{margin-top:1rem;width:100%;}.docs .docs-content .docs-content-wrapper aside .search-panel .search-results{max-height:calc(100vh - 10rem - 1px);}.docs .docs-content .docs-content-wrapper aside .docs-content-toc{margin-top:1rem;overflow-y:auto;max-height:calc(100vh - 10rem - 3px);}.docs .docs-content .docs-content-wrapper aside .docs-content-toc #toctitle{display:none;}.docs .docs-content .docs-content-wrapper aside .docs-content-toc ul{margin-top:0;padding-left:0;list-style-type:none;}.docs .docs-content .docs-content-wrapper aside .docs-content-toc ul.sectlevel2{display:none;}.docs .docs-content .docs-content-wrapper aside .docs-content-toc ul li{padding:0.3333333333rem 0;}.docs .docs-content .docs-content-wrapper aside.docs-has-search-results .docs-content-toc{display:none;}@media (max-width:1250px){.docs .docs-content .docs-content-wrapper aside{-webkit-flex:0 0 15rem;-ms-flex:0 0 15rem;flex:0 0 15rem;}}@media (max-width:1000px){.docs .docs-content .docs-content-wrapper aside{z-index:1;position:fixed;top:0;right:0;width:25rem;height:100vh;max-width:100%;padding-top:6rem;padding-left:2rem;padding-right:2rem;background-color:#fff;border-left:1px solid #dee2e6;-webkit-transform:translateX(100%);-ms-transform:translateX(100%);transform:translateX(100%);-webkit-transition:-webkit-transform 200ms ease-in-out;-webkit-transition:transform 200ms ease-in-out;transition:transform 200ms ease-in-out;will-change:transform;}.docs .docs-content .docs-content-wrapper aside.collapse{-webkit-transform:translateX(0%);-ms-transform:translateX(0%);transform:translateX(0%);}}@media (max-width:640px){.docs .docs-content .docs-content-wrapper aside{min-width:100%;border-left:none;}}.docs .docs-content .docs-content-wrapper .docs-content-sidebar-toggle{z-index:1000;cursor:pointer;display:none;position:fixed;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;right:2rem;bottom:2rem;color:#fff;background-color:#4d4d4d;padding:0.5rem;border-radius:0.8rem;-webkit-transition:background-color 0.15s ease-in-out;transition:background-color 0.15s ease-in-out;}.docs .docs-content .docs-content-wrapper .docs-content-sidebar-toggle .feather-list,.docs .docs-content .docs-content-wrapper .docs-content-sidebar-toggle .feather-x{display:block;}.docs .docs-content .docs-content-wrapper .docs-content-sidebar-toggle .feather-x{position:absolute;left:0;top:0;opacity:0;-webkit-transition:opacity 0.15s ease-in-out;transition:opacity 0.15s ease-in-out;}.docs .docs-content .docs-content-wrapper .docs-content-sidebar-toggle:hover{background-color:#3c3c3b;}.docs .docs-content .docs-content-wrapper .docs-content-sidebar-toggle.collapse .feather-list{opacity:0;}.docs .docs-content .docs-content-wrapper .docs-content-sidebar-toggle.collapse .feather-x{opacity:1;}@media (max-width:1000px){.docs .docs-content .docs-content-wrapper .docs-content-sidebar-toggle{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}@media (max-width:640px){.docs .docs-content .docs-content-wrapper .docs-content-sidebar-toggle{right:1rem;bottom:1rem;}}.docs .docs-content .docs-content-inner{max-width:calc(100% - 19.5rem);overflow:hidden;}.docs .docs-content .docs-content-inner .docs-content-metadata{margin-top:1.2rem;margin-bottom:1.2rem;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-align-items:baseline;-webkit-box-align:baseline;-ms-flex-align:baseline;align-items:baseline;}@media (max-width:1000px){.docs .docs-content .docs-content-inner .docs-content-metadata{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-repo{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-left{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex:1;-ms-flex:1;flex:1;}.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-left>*{margin-right:2rem;}.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-left>*:last-child{margin-right:0;}.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-left a{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:#6f6970;white-space:nowrap;}.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-left a:hover{color:#782b90;}.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-left a .feather{margin-right:0.25em;height:1rem;}@media (max-width:1000px){.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-left{-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-bottom:1rem;}}.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-version{-webkit-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}@media (min-width:1000px){.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-version{-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;}}.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-version svg{height:16px;margin-bottom:-2px;}@media (max-width:1000px){.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-version svg{height:1rem;margin-bottom:-1px;}}.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-version .dropdown-menu a{-webkit-text-decoration:none;text-decoration:none;}.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-version .dropdown-menu a:hover{color:#6f6970;}.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-label{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin-left:2rem;}.docs .docs-content .docs-content-inner h1{padding-top:0;margin-top:0.6rem;line-height:1.2;}.docs .docs-content .docs-content-inner h1::after{content:"";width:30%;display:block;border:2px solid #782b90;border-radius:2px;margin-top:1.1rem;}.docs .docs-content .docs-content-inner .ulist>ul{padding-left:1.1rem;}.docs .docs-content .docs-content-inner h2{border-top:1px solid #dee2e6;margin-top:5rem;padding-top:2rem;}.docs .docs-content .docs-content-inner h3,.docs .docs-content .docs-content-inner h4{margin-top:3rem;}@media (max-width:1250px){.docs .docs-content .docs-content-inner{max-width:calc(100% - 17.5rem);}}@media (max-width:1000px){.docs .docs-content .docs-content-inner{max-width:100%;}}.docs .docs-content .admonitionblock{border-top-right-radius:0.8rem;border-bottom-right-radius:0.8rem;background-color:#f8f9fa;padding:1rem;margin:1.5rem 0;border-left:9px solid transparent;}.docs .docs-content .admonitionblock.note,.docs .docs-content .admonitionblock.tip{border-color:#6cb9f0;}.docs .docs-content .admonitionblock.important,.docs .docs-content .admonitionblock.warning,.docs .docs-content .admonitionblock.caution{border-color:#f0a46c;}.docs .docs-content .admonitionblock tr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}.docs .docs-content .admonitionblock .title{font-weight:400;}.docs .docs-content .admonitionblock .title::after{content:":";}.docs .docs-content dt{font-weight:400;}.docs .docs-content .anchor{opacity:0;-webkit-align-self:flex-start;-ms-flex-item-align:start;align-self:flex-start;outline:none;}.docs .docs-content .anchor::after{content:"#";position:absolute;margin-left:-1.5rem;color:#ced4da;padding-right:0.45rem;}.docs .docs-content .anchor:hover{opacity:1;}.docs .docs-content h2:hover .anchor,.docs .docs-content h3:hover .anchor,.docs .docs-content h4:hover .anchor,.docs .docs-content h5:hover .anchor,.docs .docs-content h6:hover .anchor{opacity:1;}.docs .docs-content h1 .anchor{display:none;}.docs .docs-content h4 .anchor::after,.docs .docs-content h5 .anchor::after,.docs .docs-content h6 .anchor::after{padding-right:0.6rem;}</style><style id="__jsx-3977862379">{/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */}html{line-height:1.15;-webkit-text-size-adjust:100%;}body{margin:0;}main{display:block;}h1{font-size:2em;margin:0.67em 0;}hr{box-sizing:content-box;height:0;overflow:visible;}pre{font-family:monospace,monospace;font-size:1em;}a{background-color:transparent;}abbr[title]{border-bottom:none;-webkit-text-decoration:underline;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted;}b,strong{font-weight:bolder;}code,kbd,samp{font-family:monospace,monospace;font-size:1em;}small{font-size:80%;}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline;}sub{bottom:-0.25em;}sup{top:-0.5em;}img{border-style:none;}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0;}button,input{overflow:visible;}button,select{text-transform:none;}button,[type=button],[type=reset],[type=submit]{-webkit-appearance:button;}button::-moz-focus-inner,[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner{border-style:none;padding:0;}button:-moz-focusring,[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring{outline:1px dotted ButtonText;}fieldset{padding:0.35em 0.75em 0.625em;}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal;}progress{vertical-align:baseline;}textarea{overflow:auto;}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0;}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto;}[type=search]{-webkit-appearance:textfield;outline-offset:-2px;}[type=search]::-webkit-search-decoration{-webkit-appearance:none;}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit;}details{display:block;}summary{display:list-item;}template{display:none;}[hidden]{display:none;}.hljs,pre{display:block;overflow-x:auto;padding:0.5em;background:#3a2840;color:#fff;}.hljs.language-shell:not(.bash)+.bash,pre.language-shell:not(.bash)+.bash,.hljs.language-better-shell:not(.bash)+.bash,pre.language-better-shell:not(.bash)+.bash{color:#d2a8e0;}pre{border-radius:0.8rem;padding:1rem;font-size:0.875rem;margin:1.5rem 0;}.hljs-keyword,.hljs-selector-tag,.hljs-tag{color:#d2a8e0;}.hljs-template-tag{color:#f00;}.hljs-number{color:#6cb9f0;}.hljs-variable,.hljs-template-variable,.hljs-attribute,.hljs-literal{color:#c9e5f9;}.hljs-subst{color:#f00;}.hljs-title,.hljs-name,.hljs-selector-id,.hljs-selector-class,.hljs-section,.hljs-type{color:#f0a46c;}.hljs-symbol,.hljs-bullet,.hljs-link{color:#d2a8e0;}.hljs-deletion,.hljs-string,.hljs-built_in,.hljs-builtin-name{color:#6cb9f0;}.hljs-addition,.hljs-comment,.hljs-quote,.hljs-meta{color:#adb5bd;}.hljs-emphasis{font-style:italic;}.hljs-strong{font-weight:bold;}#nprogress{pointer-events:none;}#nprogress .bar{background:#29d;position:fixed;z-index:1031;top:0;left:0;width:100%;height:2px;}#nprogress .peg{display:block;position:absolute;right:0px;width:100px;height:100%;box-shadow:0 0 10px #29d,0 0 5px #29d;opacity:1;-webkit-transform:rotate(3deg) translate(0px,-4px);-ms-transform:rotate(3deg) translate(0px,-4px);-webkit-transform:rotate(3deg) translate(0px,-4px);-ms-transform:rotate(3deg) translate(0px,-4px);transform:rotate(3deg) translate(0px,-4px);}#nprogress .spinner{display:block;position:fixed;z-index:1031;top:15px;right:15px;}#nprogress .spinner-icon{width:18px;height:18px;box-sizing:border-box;border:solid 2px transparent;border-top-color:#29d;border-left-color:#29d;border-radius:50%;-webkit-animation:nprogress-spinner 400ms linear infinite;-webkit-animation:nprogress-spinner 400ms linear infinite;animation:nprogress-spinner 400ms linear infinite;}.nprogress-custom-parent{overflow:hidden;position:relative;}.nprogress-custom-parent #nprogress .spinner,.nprogress-custom-parent #nprogress .bar{position:absolute;}@-webkit-keyframes nprogress-spinner{0%{-webkit-transform:rotate(0deg);}100%{-webkit-transform:rotate(360deg);}}@-webkit-keyframes nprogress-spinner{0%{-webkit-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);}100%{-webkit-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg);}}@keyframes nprogress-spinner{0%{-webkit-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);}100%{-webkit-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg);}}#nprogress .bar{background:#782b90;}#nprogress .peg{box-shadow:0 0 10px #782b90,0 0 5px #782b90;}#nprogress .spinner-icon{border-top-color:#782b90;border-left-color:#782b90;}html{box-sizing:border-box;}*,*::before,*::after{box-sizing:inherit;}:root{font-size:18px;}@media (max-width:1000px){:root{font-size:17.1px;}}@media (max-width:768px){:root{font-size:16.2px;}}@media (max-width:640px){:root{font-size:15.3px;}}body,input{font-family:"Roboto",sans-serif;font-weight:300;line-height:1.7;color:#3c3c3b;}input{outline:none;}h1,h2,h3,h4,h5,h6{font-weight:400;}h1{font-size:2.5rem;}h2{font-size:2rem;}h3{font-size:1.75rem;}h4{font-size:1.5rem;}h5{font-size:1.25rem;}h6{font-size:1.1rem;}.container{width:100%;padding-right:0.8rem;padding-left:0.8rem;margin-right:auto;margin-left:auto;}@media (min-width:640px){.container{max-width:620px;}}@media (min-width:768px){.container{max-width:738px;}}@media (min-width:1000px){.container{max-width:950px;}}@media (min-width:1250px){.container{max-width:1180px;}}@media (min-width:1250px){.container-narrow{max-width:950px;}}.img-fluid{max-width:100%;}a{-webkit-text-decoration:none;text-decoration:none;color:#782b90;}a:hover{-webkit-text-decoration:underline;text-decoration:underline;color:#571f69;}img{vertical-align:middle;}svg{overflow:hidden;vertical-align:middle;}code,pre{font-family:"Roboto Mono",SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;}p code{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;max-width:100%;overflow:auto;}.heading-anchor{opacity:0;-webkit-align-self:flex-start;-ms-flex-item-align:start;align-self:flex-start;outline:none;}.heading-anchor::after{content:"#";position:absolute;margin-left:-1.5rem;color:#ced4da;padding-right:0.45rem;}.heading-anchor:hover{opacity:1;}h2:hover .heading-anchor,h3:hover .heading-anchor,h4:hover .heading-anchor,h5:hover .heading-anchor,h6:hover .heading-anchor{opacity:1;}h1 .heading-anchor{display:none;}h4 .heading-anchor::after,h5 .heading-anchor::after,h6 .heading-anchor::after{padding-right:0.6rem;}</style><style data-href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500&display=swap">@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5vAA.woff) format('woff')}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Me5g.woff) format('woff')}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmEU9vAA.woff) format('woff')}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5fCRc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5fABc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5fCBc4AMP6lbBP.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5fBxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5fCxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5fChc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5fBBc4AMP6lQ.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Mu72xKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Mu5mxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Mu7mxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Mu4WxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Mu7WxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Mu7GxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Mu4mxKKTU1Kg.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmEU9fCRc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmEU9fABc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmEU9fCBc4AMP6lbBP.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmEU9fBxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmEU9fCxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmEU9fChc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmEU9fBBc4AMP6lQ.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style><style data-href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@300;400&display=swap">@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZKCA.woff) format('woff')}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVl2ZhZI2eCN5jzbjEETS9weq8-59Y.woff) format('woff')}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCkYb9lecyVC4A.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCAYb9lecyVC4A.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCgYb9lecyVC4A.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCcYb9lecyVC4A.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCsYb9lecyVC4A.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCoYb9lecyVC4A.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCQYb9lecyU.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVl2ZhZI2eCN5jzbjEETS9weq8-19-7DQk6YvNkeg.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVl2ZhZI2eCN5jzbjEETS9weq8-19a7DQk6YvNkeg.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVl2ZhZI2eCN5jzbjEETS9weq8-1967DQk6YvNkeg.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVl2ZhZI2eCN5jzbjEETS9weq8-19G7DQk6YvNkeg.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVl2ZhZI2eCN5jzbjEETS9weq8-1927DQk6YvNkeg.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVl2ZhZI2eCN5jzbjEETS9weq8-19y7DQk6YvNkeg.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVl2ZhZI2eCN5jzbjEETS9weq8-19K7DQk6YvM.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style><style data-href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400&display=swap">@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vqPQA.woff) format('woff')}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vq_SeW-AJi8SJQtQ4Y.woff) format('woff');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vq_QOW-AJi8SJQtQ4Y.woff) format('woff');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vq_R-W-AJi8SJQtQ4Y.woff) format('woff');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vq_S-W-AJi8SJQtQ4Y.woff) format('woff');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vq_SuW-AJi8SJQtQ4Y.woff) format('woff');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vq_ROW-AJi8SJQt.woff) format('woff');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><body data-build-time="2021-11-15T08:45:00.363Z" data-build-commit-id="7332daa8655210fd8b4b775ceacd24439ee09499" data-build-run-id="1461312751"><div id="__next"><main class="jsx-4280303685 page docs"><header><div class="jsx-3537117450 navbar"><div class="jsx-3537117450 navbar-content container"><div class="jsx-3537117450 navbar-logo"><a class="jsx-3537117450" href="/"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAxMjMyLjYgMzE1LjIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDEyMzIuNiAzMTUuMiIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHN0eWxlPi5zdDB7ZmlsbDojNzgyYTkxfTwvc3R5bGU+PHBhdGggZD0iTTEyMC45IDIxNC4yIDE5MC41IDBoNTIuM2wtOTguNSAyNzMuOEg5OC4yTDAgMGg1Mi4xbDY4LjggMjE0LjJ6bTI5MS4yLTYyLjZIMjk5LjZ2ODQuMkg0MzF2MzhIMjUyVjBoMTc3Ljd2MzguNEgyOTkuNlYxMTRoMTEyLjV2MzcuNnptODMuNy0xMTMuMkg1NDZjMTYuNS4zIDI5IDQuNCAzNy4zIDEyLjQgOC4zIDggMTIuNSAxOS40IDEyLjUgMzQgMCAxNC00LjUgMjUuMS0xMy41IDMzLjItOSA4LjEtMjEuNiAxMi4xLTM3LjYgMTIuMWgtMjcuMXYyNC4ybDg2LjEgMTE5LjVoNTF2LTIuNGwtNzcuMi0xMDYuN2MyNC45LTUuNSA0My4zLTIxLjcgNTIuNi0zNS45IDguMi0xMi42IDEzLjMtMjcuNyAxMy4zLTQ2IDAtMjYuOC04LjYtNDcuNC0yNS44LTYxLjVDNjAwLjUgNy4xIDU3Ni4xIDAgNTQ0LjUgMGgtOTYuM3YyNzMuOGg0Ny42Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0ibTEwNTIuMyAxNTcuNy00MS41IDYyLjcgMjkuNyA1My40aDg1LjF6Ii8+PGNpcmNsZSBjbGFzcz0ic3QwIiBjeD0iODI3LjkiIGN5PSIyNzQuNyIgcj0iNDAuNSIvPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Im0xMDM3IDAtNDcuNiA3NC4yTDk0OSAwaC04NGw4NS4zIDEzNS44LTY3LjEgMTA1LjdjNS43IDkuNSA5LjEgMjAuNSA5LjIgMzIuNGg1MC4xTDExMjEuMyAwSDEwMzd6Ii8+PHBhdGggZD0iTTc2My41IDI3My44Yy4xLTkuOSAyLjUtMTkuMiA2LjYtMjcuNVYzOC40aDg1LjRWMEg2MzguMnYzOC40aDg0LjZ2MjM1LjRoNDAuN3ptNDE0LTI2Ni45aC0xNS4zdjQyLjJoLTguNVY2LjloLTE1LjJWMGgzOXY2Ljl6TTExOTMgMGwxNC4yIDM3LjdMMTIyMS4zIDBoMTF2NDkuMWgtOC41VjMyLjlsLjgtMjEuNy0xNC41IDM3LjloLTYuMWwtMTQuNS0zNy44LjggMjEuNnYxNi4yaC04LjVWMGgxMS4yeiIvPjwvc3ZnPg==" alt="Vert.x Logo" class="jsx-3537117450"/></a></div><div class="jsx-3537117450 navbar-collapse-button"><span class="jsx-3537117450"></span><span class="jsx-3537117450"></span><span class="jsx-3537117450"></span></div><div class="jsx-3537117450 navbar-right"><div class="jsx-3537117450 navbar-menu"><span class="jsx-3537117450 navbar-menu-item with-drop-down"><div class="jsx-3534061111 dropdown"><a class="jsx-3534061111 dropdown-title">开始<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="jsx-3534061111 dropdown-menu"><a class="jsx-3537117450" href="/introduction-to-vertx-and-reactive/"><li class="jsx-1030027079 dropdown-item">简介</li></a><a class="jsx-3537117450" href="/get-started/"><li class="jsx-1030027079 dropdown-item">开始</li></a><a href="https://start.vertx.io/" target="_blank" rel="noreferrer" class="jsx-3537117450"><li class="jsx-1030027079 dropdown-item">应用生成器 <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a></ul></div></span><a class="jsx-3537117450 navbar-menu-item" href="/docs/">文档</a><span class="jsx-3537117450 navbar-menu-item with-drop-down"><div class="jsx-3534061111 dropdown"><a class="jsx-3534061111 dropdown-title">资源<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="jsx-3534061111 dropdown-menu"><a class="jsx-3537117450" href="/faq/"><li class="jsx-1030027079 dropdown-item">答疑</li></a><a class="jsx-3537117450" href="/channels/"><li class="jsx-1030027079 dropdown-item">联系渠道</li></a><a href="https://how-to.vertx.io/" target="_blank" rel="noreferrer" class="jsx-3537117450"><li class="jsx-1030027079 dropdown-item">操作指南 <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a><a href="https://github.com/vert-x3/vertx-eventbus-bridge-clients" target="_blank" rel="noreferrer" class="jsx-3537117450"><li class="jsx-1030027079 dropdown-item">EventBus Bridge Clients <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a><a href="https://github.com/vert-x3/advanced-vertx-guide" target="_blank" rel="noreferrer" class="jsx-3537117450"><li class="jsx-1030027079 dropdown-item">Advanced Vert.x Guide <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a></ul></div></span><a class="jsx-3537117450 navbar-menu-item" href="/blog/">博客</a><a class="jsx-3537117450 navbar-menu-item" href="/community/">社区</a><a class="jsx-3537117450 navbar-menu-item" href="/translation/">翻译团队</a></div><div class="jsx-3537117450 navbar-social"><a href="https://github.com/vert-x3/vertx-awesome" title="Awesome Vert.x" target="_blank" rel="noopener noreferrer" class="jsx-3537117450 navbar-social-link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="List of awesome Vert.x projects"><title>Awesome Vert.x</title><path d="M24 11.438l-6.154-5.645-.865.944 5.128 4.7H1.895l5.128-4.705-.865-.943-6.154 5.649H0v3.72c0 1.683 1.62 3.053 3.61 3.053h3.795c1.99 0 3.61-1.37 3.61-3.051v-2.446h1.97v2.446c0 1.68 1.62 3.051 3.61 3.051h3.794c1.99 0 3.61-1.37 3.61-3.051v-3.721z"></path></svg></a><a href="https://stackoverflow.com/questions/tagged/vert.x" title="Stack Overflow" target="_blank" rel="noopener noreferrer" class="jsx-3537117450 navbar-social-link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Stack Overflow questions related to Vert.x"><title>stackoverflow</title><path d="M15.725 0l-1.72 1.277 6.39 8.588 1.716-1.277L15.725 0zm-3.94 3.418l-1.369 1.644 8.225 6.85 1.369-1.644-8.225-6.85zm-3.15 4.465l-.905 1.94 9.702 4.517.904-1.94-9.701-4.517zm-1.85 4.86l-.44 2.093 10.473 2.201.44-2.092-10.473-2.203zM1.89 15.47V24h19.19v-8.53h-2.133v6.397H4.021v-6.396H1.89zm4.265 2.133v2.13h10.66v-2.13H6.154Z"></path></svg></a><a href="https://www.youtube.com/channel/UCGN6L3tRhs92Uer3c6VxOSA" title="YouTube" target="_blank" rel="noopener noreferrer" class="jsx-3537117450 navbar-social-link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="YouTube channel of Vert.x"><title>youtube</title><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"></path></svg></a><a href="https://discord.gg/KzEMwP2" title="Discord" target="_blank" rel="noopener noreferrer" class="jsx-3537117450 navbar-social-link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Eclipse Vert.x channel on Discord"><title>discord</title><path d="M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.946 2.4189-2.1568 2.4189Z"></path></svg></a><a href="https://groups.google.com/forum/?fromgroups#!forum/vertx" title="Vert.x 用户组" target="_blank" rel="noopener noreferrer" class="jsx-3537117450 navbar-social-link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="A Google group for Vert.x users"><title>Vert.x 用户组</title><path d="M.92 3.332c-.776 0-1.216.67-.692 1.383l2.537 4.403v7.86c0 2.013 1.467 3.69 3.459 3.69H20.31a3.75 3.75 0 003.69-3.69V7.043a3.723 3.723 0 00-3.668-3.71zm5.786 3.71H20.1c.587 0 1.153.357 1.153.923 0 .566-.566.922-1.153.922H6.706c-.587 0-1.153-.356-1.153-.922 0-.566.566-.923 1.153-.923zm0 3.69H20.1c.587 0 1.153.356 1.153.922 0 .566-.566.922-1.153.922H6.706c-.587 0-1.153-.356-1.153-.922 0-.566.566-.922 1.153-.922zm-.021 3.71h9.705c.587 0 1.153.356 1.153.922 0 .566-.566.923-1.153.923H6.685c-.587 0-1.153-.357-1.153-.923 0-.566.566-.922 1.153-.922Z"></path></svg></a><a href="https://shang.qq.com/wpa/qunwpa?idkey=587f58cacb9557e3291b46098e0fe09427b98a1c0f866da23c04c2762bc7e2ad" title="Vert.x中国用户组QQ群" target="_blank" rel="noopener noreferrer" class="jsx-3537117450 navbar-social-link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Vert.x中国用户组QQ群"><title>Vert.x中国用户组QQ群</title><path d="M21.395 15.035a39.548 39.548 0 0 0-.803-2.264l-1.079-2.695c.001-.032.014-.562.014-.836C19.526 4.632 17.351 0 12 0S4.474 4.632 4.474 9.241c0 .274.013.804.014.836l-1.08 2.695a38.97 38.97 0 0 0-.802 2.264c-1.021 3.283-.69 4.643-.438 4.673.54.065 2.103-2.472 2.103-2.472 0 1.469.756 3.387 2.394 4.771-.612.188-1.363.479-1.845.835-.434.32-.379.646-.301.778.343.578 5.883.369 7.482.189 1.6.18 7.14.389 7.483-.189.078-.132.132-.458-.301-.778-.483-.356-1.233-.646-1.846-.836 1.637-1.384 2.393-3.302 2.393-4.771 0 0 1.563 2.537 2.103 2.472.251-.03.581-1.39-.438-4.673zM12.662 4.846c.039-1.052.659-1.878 1.385-1.846s1.281.912 1.242 1.964c-.039 1.051-.659 1.878-1.385 1.846s-1.282-.912-1.242-1.964zM9.954 3c.725-.033 1.345.794 1.384 1.846.04 1.052-.517 1.931-1.242 1.963-.726.033-1.346-.794-1.385-1.845C8.672 3.912 9.228 3.033 9.954 3zM7.421 8.294c.194-.43 2.147-.908 4.566-.908h.026c2.418 0 4.372.479 4.566.908a.14.14 0 0 1 .014.061c0 .031-.01.059-.026.083-.163.238-2.333 1.416-4.553 1.416h-.026c-2.221 0-4.39-1.178-4.553-1.416a.136.136 0 0 1-.014-.144zm10.422 8.622c-.22 3.676-2.403 5.987-5.774 6.021h-.137c-3.37-.033-5.554-2.345-5.773-6.021-.081-1.35.001-2.496.147-3.43.318.063.638.122.958.176v3.506s1.658.334 3.318.103v-3.225c.488.027.96.04 1.406.034h.025c1.678.021 3.714-.204 5.683-.594.146.934.227 2.08.147 3.43zM10.48 5.804c.313-.041.542-.409.508-.825-.033-.415-.314-.72-.629-.679-.313.04-.541.409-.508.824.034.417.315.72.629.68zM14.479 5.156c.078.037.221.042.289-.146.035-.095.025-.165-.009-.214-.023-.033-.133-.118-.371-.176-.904-.22-1.341.384-1.405.499-.04.072-.012.176.056.227.067.051.139.037.179-.006.58-.628 1.21-.208 1.261-.184z"></path></svg></a></div></div></div></div></header><div class="jsx-4280303685 page-content docs-content"><div class="jsx-4280303685 container"><div class="jsx-4280303685 docs-content-wrapper"><aside class="jsx-4280303685 "><div class="jsx-4280303685 docs-content-wrapper-sidebar"><div class="jsx-2599647406 search-panel"><div class="jsx-2520609189 search"><input type="text" placeholder="Search..." value="" class="jsx-2520609189"/><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="search-icon"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="search-icon-delete"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg></div><ul class="jsx-4212053455 search-results"></ul><div class="jsx-4212053455 search-results-none">No results.</div></div><div class="jsx-4280303685 docs-content-toc"><div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_using_the_service_discovery">Using the service discovery</a></li>
<li><a href="#_overall_concepts">Overall concepts</a>
<ul class="sectlevel2">
<li><a href="#_service_records">Service records</a></li>
<li><a href="#_service_provider_and_publisher">Service Provider and publisher</a></li>
<li><a href="#_service_consumer">Service Consumer</a></li>
<li><a href="#_service_object">Service object</a></li>
<li><a href="#_service_types">Service types</a></li>
<li><a href="#_service_events">Service events</a></li>
<li><a href="#_backend">Backend</a></li>
</ul>
</li>
<li><a href="#_creating_a_service_discovery_instance">Creating a service discovery instance</a></li>
<li><a href="#_publishing_services">Publishing services</a></li>
<li><a href="#_withdrawing_services">Withdrawing services</a></li>
<li><a href="#_looking_for_services">Looking for services</a></li>
<li><a href="#_retrieving_a_service_reference">Retrieving a service reference</a></li>
<li><a href="#_types_of_services">Types of services</a>
<ul class="sectlevel2">
<li><a href="#_services_with_no_type">Services with no type</a></li>
<li><a href="#_implementing_your_own_service_type">Implementing your own service type</a></li>
<li><a href="#_http_endpoints">HTTP endpoints</a></li>
<li><a href="#_event_bus_services">Event bus services</a></li>
<li><a href="#_message_source">Message source</a></li>
<li><a href="#_jdbc_data_source">JDBC Data source</a></li>
<li><a href="#_redis_data_source">Redis Data source</a></li>
<li><a href="#_mongo_data_source">Mongo Data source</a></li>
</ul>
</li>
<li><a href="#_listening_for_service_arrivals_and_departures">Listening for service arrivals and departures</a></li>
<li><a href="#_listening_for_service_usage">Listening for service usage</a></li>
<li><a href="#_service_discovery_bridges">Service discovery bridges</a></li>
<li><a href="#_additional_bridges">Additional bridges</a>
<ul class="sectlevel2">
<li><a href="#_consul_bridge">Consul bridge</a></li>
<li><a href="#_kubernetes_bridge">Kubernetes bridge</a></li>
<li><a href="#_docker_links_bridge">Docker Links bridge</a></li>
</ul>
</li>
<li><a href="#_additional_backends">Additional backends</a>
<ul class="sectlevel2">
<li><a href="#_redis_backend">Redis backend</a></li>
</ul>
</li>
</ul>
</div></div></div></aside><div class="jsx-4280303685 docs-content-sidebar-toggle"><div style="position:relative" class="jsx-4280303685"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-list"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-x"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></div></div><div class="jsx-4280303685 docs-content-inner"><div class="jsx-4280303685 docs-content-metadata"><div class="jsx-4280303685 docs-content-metadata-left"><div class="jsx-4280303685 docs-content-metadata-repo"><div class="jsx-1153611384 github-stars"><a href="https://github.com/vert-x3/vertx-service-discovery" class="jsx-1153611384"><div class="jsx-1153611384 icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg></div> <!-- -->null stars</a></div></div><div class="jsx-4280303685"><a href="https://vertx.io/docs/apidocs" class="jsx-4280303685"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path></svg> API</a></div><div class="jsx-4280303685 docs-content-metadata-edit"><a href="https://github.com/vert-x3/vertx-service-discovery/tree/master/vertx-service-discovery/src/main/asciidoc"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg> 改进翻译</a></div><span class="jsx-4280303685 docs-content-metadata-version"><div class="jsx-3534061111 dropdown"><a class="jsx-3534061111 dropdown-title">v4.2.0<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="jsx-3534061111 dropdown-menu align-right"><a href="/docs/vertx-service-discovery/java/"><li class="jsx-1030027079 dropdown-item active has-active-siblings"><span class="jsx-1030027079 dropdown-check-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg></span>Latest (v<!-- -->4.2.0<!-- -->)</li></a><a href="/docs/4.1.5/vertx-service-discovery/java/"><li class="jsx-1030027079 dropdown-item has-active-siblings">v<!-- -->4.1.5</li></a><a href="/docs/4.0.3/vertx-service-discovery/java/"><li class="jsx-1030027079 dropdown-item has-active-siblings">v<!-- -->4.0.3</li></a><a href="/docs/3.9.9/vertx-service-discovery/java/"><li class="jsx-1030027079 dropdown-item has-active-siblings">v<!-- -->3.9.9</li></a></ul></div></span></div></div><div class="jsx-4280303685"><h1>Vert.x Service Discovery</h1>

<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This component provides an infrastructure to publish and discover various resources, such as service
proxies, HTTP endpoints, data sources&#8230;&#8203; These resources are called <code>services</code>. A <code>service</code> is a discoverable
functionality. It can be qualified by its type, metadata, and location. So a <code>service</code> can be a database, a
service proxy, a HTTP endpoint and any other resource you can imagine as soon as you can describe it, discover it
and interact with it. It does not have to be a vert.x entity, but can be anything. Each service is described by a
<code><a href="../../apidocs/io/vertx/servicediscovery/Record.html">Record</a></code>.</p>
</div>
<div class="paragraph">
<p>The service discovery implements the interactions defined in service-oriented computing. And to some extent,
also provides the dynamic service-oriented computing interactions. So, applications can react to arrival and
departure of services.</p>
</div>
<div class="paragraph">
<p>A service provider can:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>publish a service record</p>
</li>
<li>
<p>un-publish a published record</p>
</li>
<li>
<p>update the status of a published service (down, out of service&#8230;&#8203;)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A service consumer can:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>lookup services</p>
</li>
<li>
<p>bind to a selected service (it gets a <code><a href="../../apidocs/io/vertx/servicediscovery/ServiceReference.html">ServiceReference</a></code>) and use it</p>
</li>
<li>
<p>release the service once the consumer is done with it</p>
</li>
<li>
<p>listen for arrival, departure and modification of services.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Consumer would 1) lookup a service record matching their need, 2) retrieve the
<code><a href="../../apidocs/io/vertx/servicediscovery/ServiceReference.html">ServiceReference</a></code> that give access to the service, 3) get a service object to access
the service, 4) release the service object once done.</p>
</div>
<div class="paragraph">
<p>The process can be simplified using <em>service type</em> where you can directly retrieve the service object if you know
from which type it is (JDBC client, Http client&#8230;&#8203;).</p>
</div>
<div class="paragraph">
<p>As stated above, the central piece of information shared by the providers and consumers are
<code><a href="../../apidocs/io/vertx/servicediscovery/Record.html">records</a></code>.</p>
</div>
<div class="paragraph">
<p>Providers and consumers must create their own <code><a href="../../apidocs/io/vertx/servicediscovery/ServiceDiscovery.html">ServiceDiscovery</a></code> instance. These
instances are collaborating in the background (distributed structure) to keep the set of services in sync.</p>
</div>
<div class="paragraph">
<p>The service discovery supports bridges to import and export services from / to other discovery technologies.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_using_the_service_discovery"><a class="anchor" href="#_using_the_service_discovery"></a>Using the service discovery</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To use the Vert.x service discovery, add the following dependency to the <em>dependencies</em> section of your build
descriptor:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Maven (in your <code>pom.xml</code>):</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.vertx<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>vertx-service-discovery<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.9.3<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Gradle (in your <code>build.gradle</code> file):</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">compile <span class="hljs-string">&#x27;io.vertx:vertx-service-discovery:3.9.3&#x27;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_overall_concepts"><a class="anchor" href="#_overall_concepts"></a>Overall concepts</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The discovery mechanism is based on a few concepts explained in this section.</p>
</div>
<div class="sect2">
<h3 id="_service_records"><a class="anchor" href="#_service_records"></a>Service records</h3>
<div class="paragraph">
<p>A service <code><a href="../../apidocs/io/vertx/servicediscovery/Record.html">Record</a></code> is an object that describes a service published by a service
provider. It contains a name, some metadata, a location object (describing where is the service). This record is
the only object shared by the provider (having published it) and the consumer (retrieve it when doing a lookup).</p>
</div>
<div class="paragraph">
<p>The metadata and even the location format depend on the <code>service type</code> (see below).</p>
</div>
<div class="paragraph">
<p>A record is published when the provider is ready to be used, and withdrawn when the service provider is stopping.</p>
</div>
</div>
<div class="sect2">
<h3 id="_service_provider_and_publisher"><a class="anchor" href="#_service_provider_and_publisher"></a>Service Provider and publisher</h3>
<div class="paragraph">
<p>A service provider is an entity providing a <em>service</em>. The publisher is responsible for publishing a record
describing the provider. It may be a single entity (a provider publishing itself) or a different entity.</p>
</div>
</div>
<div class="sect2">
<h3 id="_service_consumer"><a class="anchor" href="#_service_consumer"></a>Service Consumer</h3>
<div class="paragraph">
<p>Service consumers search for services in the service discovery. Each lookup retrieves <code>0..n</code>
<code><a href="../../apidocs/io/vertx/servicediscovery/Record.html">Record</a></code>. From these records, a consumer can retrieve a
<code><a href="../../apidocs/io/vertx/servicediscovery/ServiceReference.html">ServiceReference</a></code>, representing the binding between the consumer and the provider.
This reference allows the consumer to retrieve the <em>service object</em> (to use the service),  and release the service.</p>
</div>
<div class="paragraph">
<p>It is important to release service references to cleanup the objects and update the service usages.</p>
</div>
</div>
<div class="sect2">
<h3 id="_service_object"><a class="anchor" href="#_service_object"></a>Service object</h3>
<div class="paragraph">
<p>The service object is the object that gives access to a service. It can come in various forms, such as a proxy, a client,
and may even be non-existent for some service types. The nature of the service object depends on the service type.</p>
</div>
<div class="paragraph">
<p>Notice that because of the polyglot nature of Vert.x, the service object can differ if you retrieve it from Java,
Groovy or another language.</p>
</div>
</div>
<div class="sect2">
<h3 id="_service_types"><a class="anchor" href="#_service_types"></a>Service types</h3>
<div class="paragraph">
<p>Services are just resources, and there are a lot of different kinds of services. They can be functional services,
databases, REST APIs, and so on. The Vert.x service discovery has the concept of service types to handle this
heterogeneity. Each type defines:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>how the service is located (URI, event bus address, IP / DNS&#8230;&#8203;) - <em>location</em></p>
</li>
<li>
<p>the nature of the service object (service proxy, HTTP client, message consumer&#8230;&#8203;) - <em>client</em></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Some service types are implemented and provided by the service discovery component, but you can add
your own.</p>
</div>
</div>
<div class="sect2">
<h3 id="_service_events"><a class="anchor" href="#_service_events"></a>Service events</h3>
<div class="paragraph">
<p>Every time a service provider is published or withdrawn, an event is fired on the event bus. This event contains
the record that has been modified.</p>
</div>
<div class="paragraph">
<p>In addition, in order to track who is using who, every time a reference is retrieved with
<code><a href="../../apidocs/io/vertx/servicediscovery/ServiceDiscovery.html#getReference-io.vertx.servicediscovery.Record-">getReference</a></code> or released with
<code><a href="../../apidocs/io/vertx/servicediscovery/ServiceReference.html#release--">release</a></code>, events are emitted on the event bus to track the
service usages.</p>
</div>
<div class="paragraph">
<p>More details on these events below.</p>
</div>
</div>
<div class="sect2">
<h3 id="_backend"><a class="anchor" href="#_backend"></a>Backend</h3>
<div class="paragraph">
<p>The service discovery uses a Vert.x distributed data structure to store the records. So, all members of the cluster
have access to all the records. This is the default backend implementation. You can implement your own by
implementing the <code><a href="../../apidocs/io/vertx/servicediscovery/spi/ServiceDiscoveryBackend.html">ServiceDiscoveryBackend</a></code> SPI. For instance, we provide an
implementation based on Redis.</p>
</div>
<div class="paragraph">
<p>Notice that the discovery does not require Vert.x clustering. In single-node mode, the structure is local. It can
be populated with <code><a href="../../apidocs/io/vertx/servicediscovery/spi/ServiceImporter.html">ServiceImporter</a>`s. Since 3.5.0, you can use a local
structure even in clustered mode by setting the system property `vertx-service-discovery-backend-local</code> to <code>true</code> (or
the environment variable <code>VERTX-SERVICE-DISCOVERY-BACKEND-LOCAL</code> to <code>true</code>).</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creating_a_service_discovery_instance"><a class="anchor" href="#_creating_a_service_discovery_instance"></a>Creating a service discovery instance</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Publishers and consumers must create their own <code><a href="../../apidocs/io/vertx/servicediscovery/ServiceDiscovery.html">ServiceDiscovery</a></code>
instance to use the discovery infrastructure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">ServiceDiscovery discovery = ServiceDiscovery.create(vertx);

<span class="hljs-comment">// Customize the configuration</span>
discovery = ServiceDiscovery.create(vertx,
    <span class="hljs-keyword">new</span> ServiceDiscoveryOptions()
        .setAnnounceAddress(<span class="hljs-string">&quot;service-announce&quot;</span>)
        .setName(<span class="hljs-string">&quot;my-name&quot;</span>));

<span class="hljs-comment">// Do something...</span>

discovery.close();</code></pre>
</div>
</div>
<div class="paragraph">
<p>By default, the announce address (the event bus address on which service events are sent is: <code>vertx.discovery
.announce</code>. You can also configure a name used for the service usage (see section about service usage).</p>
</div>
<div class="paragraph">
<p>When you don&#8217;t need the service discovery object anymore, don&#8217;t forget to close it. It closes the different
discovery importers and exporters you have configured and releases the service references.</p>
</div>
<div class="paragraph">
<p>You should avoid sharing the service discovery instance, so service usage would represent the right "usages".</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_publishing_services"><a class="anchor" href="#_publishing_services"></a>Publishing services</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Once you have a service discovery instance, you can publish services. The process is the following:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>create a record for a specific service provider</p>
</li>
<li>
<p>publish this record</p>
</li>
<li>
<p>keep the published record that is used to un-publish a service or modify it.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>To create records, you can either use the <code><a href="../../apidocs/io/vertx/servicediscovery/Record.html">Record</a></code> class, or use convenient methods
from the service types.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">Record record = <span class="hljs-keyword">new</span> Record()
    .setType(<span class="hljs-string">&quot;eventbus-service-proxy&quot;</span>)
    .setLocation(<span class="hljs-keyword">new</span> JsonObject().put(<span class="hljs-string">&quot;endpoint&quot;</span>, <span class="hljs-string">&quot;the-service-address&quot;</span>))
    .setName(<span class="hljs-string">&quot;my-service&quot;</span>)
    .setMetadata(<span class="hljs-keyword">new</span> JsonObject().put(<span class="hljs-string">&quot;some-label&quot;</span>, <span class="hljs-string">&quot;some-value&quot;</span>));

discovery.publish(record, ar -&gt; {
  <span class="hljs-keyword">if</span> (ar.succeeded()) {
    <span class="hljs-comment">// publication succeeded</span>
    Record publishedRecord = ar.result();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// publication failed</span>
  }
});

<span class="hljs-comment">// Record creation from a type</span>
record = HttpEndpoint.createRecord(<span class="hljs-string">&quot;some-rest-api&quot;</span>, <span class="hljs-string">&quot;localhost&quot;</span>, <span class="hljs-number">8080</span>, <span class="hljs-string">&quot;/api&quot;</span>);
discovery.publish(record, ar -&gt; {
  <span class="hljs-keyword">if</span> (ar.succeeded()) {
    <span class="hljs-comment">// publication succeeded</span>
    Record publishedRecord = ar.result();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// publication failed</span>
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>It is important to keep a reference on the returned records, as this record has been extended by a <code>registration id</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_withdrawing_services"><a class="anchor" href="#_withdrawing_services"></a>Withdrawing services</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To withdraw (un-publish) a record, use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">discovery.unpublish(record.getRegistration(), ar -&gt; {
  <span class="hljs-keyword">if</span> (ar.succeeded()) {
    <span class="hljs-comment">// Ok</span>
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// cannot un-publish the service, may have already been removed, or the record is not published</span>
  }
});</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_looking_for_services"><a class="anchor" href="#_looking_for_services"></a>Looking for services</h2>
<div class="sectionbody">
<div class="paragraph">
<p><em>This section explains the low-level process to retrieve services, each service type provide convenient method to
aggregates the different steps.</em></p>
</div>
<div class="paragraph">
<p>On the consumer side, the first thing to do is to lookup for records. You can search for a single record or all
the matching ones. In the first case, the first matching record is returned.</p>
</div>
<div class="paragraph">
<p>Consumer can pass a filter to select the service. There are two ways to describe the filter:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>A function taking a <code><a href="../../apidocs/io/vertx/servicediscovery/Record.html">Record</a></code> as parameter and returning a boolean (it&#8217;s a
predicate)</p>
</li>
<li>
<p>This filter is a JSON object. Each entry of the given filter is checked against the record. All entries must
exactly match the record. The entry can use the special <code>*</code> value to denote a requirement on the key, but not on
the value.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Let&#8217;s see an example of a JSON filter:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{ "name" = "a" } =&gt; matches records with name set to "a"
{ "color" = "*" } =&gt; matches records with "color" set
{ "color" = "red" } =&gt; only matches records with "color" set to "red"
{ "color" = "red", "name" = "a"} =&gt; only matches records with name set to "a", and color set to "red"</pre>
</div>
</div>
<div class="paragraph">
<p>If the JSON filter is not set (<code>null</code> or empty), it accepts all records. When using functions, to accept all
records, you must return <em>true</em> regardless the record.</p>
</div>
<div class="paragraph">
<p>Here are some examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">discovery.getRecord(r -&gt; <span class="hljs-keyword">true</span>, ar -&gt; {
  <span class="hljs-keyword">if</span> (ar.succeeded()) {
    <span class="hljs-keyword">if</span> (ar.result() != <span class="hljs-keyword">null</span>) {
      <span class="hljs-comment">// we have a record</span>
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// the lookup succeeded, but no matching service</span>
    }
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// lookup failed</span>
  }
});

discovery.getRecord((JsonObject) <span class="hljs-keyword">null</span>, ar -&gt; {
  <span class="hljs-keyword">if</span> (ar.succeeded()) {
    <span class="hljs-keyword">if</span> (ar.result() != <span class="hljs-keyword">null</span>) {
      <span class="hljs-comment">// we have a record</span>
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// the lookup succeeded, but no matching service</span>
    }
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// lookup failed</span>
  }
});


<span class="hljs-comment">// Get a record by name</span>
discovery.getRecord(r -&gt; r.getName().equals(<span class="hljs-string">&quot;some-name&quot;</span>), ar -&gt; {
  <span class="hljs-keyword">if</span> (ar.succeeded()) {
    <span class="hljs-keyword">if</span> (ar.result() != <span class="hljs-keyword">null</span>) {
      <span class="hljs-comment">// we have a record</span>
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// the lookup succeeded, but no matching service</span>
    }
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// lookup failed</span>
  }
});

discovery.getRecord(<span class="hljs-keyword">new</span> JsonObject().put(<span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-string">&quot;some-service&quot;</span>), ar -&gt; {
  <span class="hljs-keyword">if</span> (ar.succeeded()) {
    <span class="hljs-keyword">if</span> (ar.result() != <span class="hljs-keyword">null</span>) {
      <span class="hljs-comment">// we have a record</span>
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// the lookup succeeded, but no matching service</span>
    }
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// lookup failed</span>
  }
});

<span class="hljs-comment">// Get all records matching the filter</span>
discovery.getRecords(r -&gt; <span class="hljs-string">&quot;some-value&quot;</span>.equals(r.getMetadata().getString(<span class="hljs-string">&quot;some-label&quot;</span>)), ar -&gt; {
  <span class="hljs-keyword">if</span> (ar.succeeded()) {
    List&lt;Record&gt; results = ar.result();
    <span class="hljs-comment">// If the list is not empty, we have matching record</span>
    <span class="hljs-comment">// Else, the lookup succeeded, but no matching service</span>
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// lookup failed</span>
  }
});


discovery.getRecords(<span class="hljs-keyword">new</span> JsonObject().put(<span class="hljs-string">&quot;some-label&quot;</span>, <span class="hljs-string">&quot;some-value&quot;</span>), ar -&gt; {
  <span class="hljs-keyword">if</span> (ar.succeeded()) {
    List&lt;Record&gt; results = ar.result();
    <span class="hljs-comment">// If the list is not empty, we have matching record</span>
    <span class="hljs-comment">// Else, the lookup succeeded, but no matching service</span>
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// lookup failed</span>
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can retrieve a single record or all matching records with
<code><a href="../../apidocs/io/vertx/servicediscovery/ServiceDiscovery.html#getRecords-io.vertx.core.json.JsonObject-io.vertx.core.Handler-">getRecords</a></code>.
By default, record lookup does include only records with a <code>status</code> set to <code>UP</code>. This can be overridden:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>when using JSON filter, just set <code>status</code> to the value you want (or <code>*</code> to accept all status)</p>
</li>
<li>
<p>when using function, set the <code>includeOutOfService</code> parameter to <code>true</code> in
<code><a href="../../apidocs/io/vertx/servicediscovery/ServiceDiscovery.html#getRecords-java.util.function.Function-boolean-io.vertx.core.Handler-">getRecords</a></code>
.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_retrieving_a_service_reference"><a class="anchor" href="#_retrieving_a_service_reference"></a>Retrieving a service reference</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Once you have chosen the <code><a href="../../apidocs/io/vertx/servicediscovery/Record.html">Record</a></code>, you can retrieve a
<code><a href="../../apidocs/io/vertx/servicediscovery/ServiceReference.html">ServiceReference</a></code> and then the service object:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">ServiceReference reference1 = discovery.getReference(record1);
ServiceReference reference2 = discovery.getReference(record2);

<span class="hljs-comment">// Then, gets the service object, the returned type depends on the service type:</span>
<span class="hljs-comment">// For http endpoint:</span>
HttpClient client = reference1.getAs(HttpClient.class);
<span class="hljs-comment">// For message source</span>
MessageConsumer consumer = reference2.getAs(MessageConsumer.class);

<span class="hljs-comment">// When done with the service</span>
reference1.release();
reference2.release();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Don&#8217;t forget to release the reference once done.</p>
</div>
<div class="paragraph">
<p>The service reference represents a binding with the service provider.</p>
</div>
<div class="paragraph">
<p>When retrieving a service reference you can pass a <code><a href="../../apidocs/io/vertx/core/json/JsonObject.html">JsonObject</a></code> used to configure the
service object. It can contain various data about the service object. Some service types do not need additional
configuration, some require configuration (as data sources):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">ServiceReference reference = discovery.getReferenceWithConfiguration(record, conf);

<span class="hljs-comment">// Then, gets the service object, the returned type depends on the service type:</span>
<span class="hljs-comment">// For http endpoint:</span>
JDBCClient client = reference.getAs(JDBCClient.class);

<span class="hljs-comment">// Do something with the client...</span>

<span class="hljs-comment">// When done with the service</span>
reference.release();</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the previous examples, the code uses
<code><a href="../../apidocs/io/vertx/servicediscovery/ServiceReference.html#getAs-java.lang.Class-">getAs</a></code>. The parameter is the type of
object you expect to get. If you are using Java, you can use
<code><a href="../../apidocs/io/vertx/servicediscovery/ServiceReference.html#get--">get</a></code>. However in the other language you must pass the expected
type.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_types_of_services"><a class="anchor" href="#_types_of_services"></a>Types of services</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A said above, the service discovery has the service type concept to manage the heterogeneity of the
different services.</p>
</div>
<div class="paragraph">
<p>These types are provided by default:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code><a href="../../apidocs/io/vertx/servicediscovery/types/HttpEndpoint.html">HttpEndpoint</a></code> - for REST API&#8217;s, the service object is a
<code><a href="../../apidocs/io/vertx/core/http/HttpClient.html">HttpClient</a></code> configured on the host and port (the location is the url).</p>
</li>
<li>
<p><code><a href="../../apidocs/io/vertx/servicediscovery/types/EventBusService.html">EventBusService</a></code> - for service proxies, the service object is a proxy. Its
type is the proxies interface (the location is the address).</p>
</li>
<li>
<p><code><a href="../../apidocs/io/vertx/servicediscovery/types/MessageSource.html">MessageSource</a></code> - for message sources (publisher), the service object is a
<code><a href="../../apidocs/io/vertx/core/eventbus/MessageConsumer.html">MessageConsumer</a></code> (the location is the address).</p>
</li>
<li>
<p><code><a href="../../apidocs/io/vertx/servicediscovery/types/JDBCDataSource.html">JDBCDataSource</a></code> - for JDBC data sources, the service object is a
<code><a href="../../apidocs/io/vertx/ext/jdbc/JDBCClient.html">JDBCClient</a></code> (the configuration of the client is computed from the location, metadata and
consumer configuration).</p>
</li>
<li>
<p><code><a href="../../apidocs/io/vertx/servicediscovery/types/RedisDataSource.html">RedisDataSource</a></code> - for Redis data sources, the service object is a
<code><a href="../../apidocs/io/vertx/redis/RedisClient.html">RedisClient</a></code> (the configuration of the client is computed from the location, metadata and
consumer configuration).</p>
</li>
<li>
<p><code><a href="../../apidocs/io/vertx/servicediscovery/types/MongoDataSource.html">MongoDataSource</a></code> - for Mongo data sources, the service object is a
<code><a href="../../apidocs/io/vertx/ext/mongo/MongoClient.html">MongoClient</a></code> (the configuration of the client is computed from the location, metadata and
consumer configuration).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This section gives details about service types in general and describes how to use the default service types.</p>
</div>
<div class="sect2">
<h3 id="_services_with_no_type"><a class="anchor" href="#_services_with_no_type"></a>Services with no type</h3>
<div class="paragraph">
<p>Some records may have no type (<code><a href="../../apidocs/io/vertx/servicediscovery/spi/ServiceType.html#UNKNOWN">ServiceType.UNKNOWN</a></code>). It is not possible to
retrieve a reference for these records, but you can build the connection details from the <code>location</code> and
<code>metadata</code> of the <code><a href="../../apidocs/io/vertx/servicediscovery/Record.html">Record</a></code>.</p>
</div>
<div class="paragraph">
<p>Using these services does not fire service usage events.</p>
</div>
</div>
<div class="sect2">
<h3 id="_implementing_your_own_service_type"><a class="anchor" href="#_implementing_your_own_service_type"></a>Implementing your own service type</h3>
<div class="paragraph">
<p>You can create your own service type by implementing the <code><a href="../../apidocs/io/vertx/servicediscovery/spi/ServiceType.html">ServiceType</a></code> SPI:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>(optional) Create a public interface extending <code><a href="../../apidocs/io/vertx/servicediscovery/spi/ServiceType.html">ServiceType</a></code>. This interface is
only used to provide helper methods to ease the usage of your type such as <code>createRecord</code> methods, <code>getX</code> where <code>X</code>
is the type of service object you retrieve and so on. Check <code><a href="../../apidocs/io/vertx/servicediscovery/types/HttpEndpoint.html">HttpEndpoint</a></code> or
<code><a href="../../apidocs/io/vertx/servicediscovery/types/MessageSource.html">MessageSource</a></code> for example</p>
</li>
<li>
<p>Create a class implementing <code><a href="../../apidocs/io/vertx/servicediscovery/spi/ServiceType.html">ServiceType</a></code> or the interface you created in
step 1. The type has a <code>name</code>, and a method to create the <code><a href="../../apidocs/io/vertx/servicediscovery/ServiceReference.html">ServiceReference</a></code> for this
type. The name must match the <code>type</code> field of the <code><a href="../../apidocs/io/vertx/servicediscovery/Record.html">Record</a></code> associated with your type.</p>
</li>
<li>
<p>Create a class extending <code>io.vertx.ext.discovery.types.AbstractServiceReference</code>. You can parameterize
the class with the type of service object your are going to return. You must implement
<code>AbstractServiceReference#retrieve()</code> that creates the service object. This
method is only called once. If your service object needs cleanup, also override
<code>AbstractServiceReference#onClose()</code>.</p>
</li>
<li>
<p>Create a <code>META-INF/services/io.vertx.servicediscovery.spi.ServiceType</code> file that is packaged in your jar. In this
file, just indicate the fully qualified name of the class created at step 2.</p>
</li>
<li>
<p>Creates a jar containing the service type interface (step 1), the implementation (step 2 and 3) and the
service descriptor file (step 4). Put this jar in the classpath of your application. Here you go, your service
type is now available.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_http_endpoints"><a class="anchor" href="#_http_endpoints"></a>HTTP endpoints</h3>
<div class="paragraph">
<p>A HTTP endpoint represents a REST API or a service accessible using HTTP requests. The HTTP endpoint service
objects are <code><a href="../../apidocs/io/vertx/core/http/HttpClient.html">HttpClient</a></code> configured with the host, port and ssl.</p>
</div>
<div class="sect3">
<h4 id="_publishing_a_http_endpoint"><a class="anchor" href="#_publishing_a_http_endpoint"></a>Publishing a HTTP endpoint</h4>
<div class="paragraph">
<p>To publish a HTTP endpoint, you need a <code><a href="../../apidocs/io/vertx/servicediscovery/Record.html">Record</a></code>. You can create the record using
<code><a href="../../apidocs/io/vertx/servicediscovery/types/HttpEndpoint.html#createRecord-java.lang.String-java.lang.String-int-java.lang.String-io.vertx.core.json.JsonObject-">HttpEndpoint.createRecord</a></code>.</p>
</div>
<div class="paragraph">
<p>The next snippet illustrates hot to create a <code><a href="../../apidocs/io/vertx/servicediscovery/Record.html">Record</a></code> from
<code><a href="../../apidocs/io/vertx/servicediscovery/types/HttpEndpoint.html">HttpEndpoint</a></code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">Record record1 = HttpEndpoint.createRecord(
  <span class="hljs-string">&quot;some-http-service&quot;</span>, <span class="hljs-comment">// The service name</span>
  <span class="hljs-string">&quot;localhost&quot;</span>, <span class="hljs-comment">// The host</span>
  <span class="hljs-number">8433</span>, <span class="hljs-comment">// the port</span>
  <span class="hljs-string">&quot;/api&quot;</span> <span class="hljs-comment">// the root of the service</span>
);

discovery.publish(record1, ar -&gt; {
  <span class="hljs-comment">// ...</span>
});

Record record2 = HttpEndpoint.createRecord(
  <span class="hljs-string">&quot;some-other-name&quot;</span>, <span class="hljs-comment">// the service name</span>
  <span class="hljs-keyword">true</span>, <span class="hljs-comment">// whether or not the service requires HTTPs</span>
  <span class="hljs-string">&quot;localhost&quot;</span>, <span class="hljs-comment">// The host</span>
  <span class="hljs-number">8433</span>, <span class="hljs-comment">// the port</span>
  <span class="hljs-string">&quot;/api&quot;</span>, <span class="hljs-comment">// the root of the service</span>
  <span class="hljs-keyword">new</span> JsonObject().put(<span class="hljs-string">&quot;some-metadata&quot;</span>, <span class="hljs-string">&quot;some value&quot;</span>)
);</code></pre>
</div>
</div>
<div class="paragraph">
<p>When you run your service in a container or on the cloud, it may not know its public IP and public port, so the
publication must be done by another entity having this info. Generally it&#8217;s a bridge.</p>
</div>
</div>
<div class="sect3">
<h4 id="_consuming_a_http_endpoint"><a class="anchor" href="#_consuming_a_http_endpoint"></a>Consuming a HTTP endpoint</h4>
<div class="paragraph">
<p>Once a HTTP endpoint is published, a consumer can retrieve it. The service object is a
<code><a href="../../apidocs/io/vertx/core/http/HttpClient.html">HttpClient</a></code> with a port and host configured:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">discovery.getRecord(<span class="hljs-keyword">new</span> JsonObject().put(<span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-string">&quot;some-http-service&quot;</span>), ar -&gt; {
  <span class="hljs-keyword">if</span> (ar.succeeded() &amp;&amp; ar.result() != <span class="hljs-keyword">null</span>) {
    <span class="hljs-comment">// Retrieve the service reference</span>
    ServiceReference reference = discovery.getReference(ar.result());
    <span class="hljs-comment">// Retrieve the service object</span>
    HttpClient client = reference.getAs(HttpClient.class);

    <span class="hljs-comment">// You need to path the complete path</span>
    client.getNow(<span class="hljs-string">&quot;/api/persons&quot;</span>, response -&gt; {

      <span class="hljs-comment">// ...</span>

      <span class="hljs-comment">// Dont&#x27; forget to release the service</span>
      reference.release();

    });
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also use the
<code><a href="../../apidocs/io/vertx/servicediscovery/types/HttpEndpoint.html#getClient-io.vertx.servicediscovery.ServiceDiscovery-io.vertx.core.json.JsonObject-io.vertx.core.Handler-">HttpEndpoint.getClient</a></code>
method to combine lookup and service retrieval in one call:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">HttpEndpoint.getClient(discovery, <span class="hljs-keyword">new</span> JsonObject().put(<span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-string">&quot;some-http-service&quot;</span>), ar -&gt; {
  <span class="hljs-keyword">if</span> (ar.succeeded()) {
    HttpClient client = ar.result();

    <span class="hljs-comment">// You need to path the complete path</span>
    client.getNow(<span class="hljs-string">&quot;/api/persons&quot;</span>, response -&gt; {

      <span class="hljs-comment">// ...</span>

      <span class="hljs-comment">// Dont&#x27; forget to release the service</span>
      ServiceDiscovery.releaseServiceObject(discovery, client);

    });
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this second version, the service object is released using
<code><a href="../../apidocs/io/vertx/servicediscovery/ServiceDiscovery.html#releaseServiceObject-io.vertx.servicediscovery.ServiceDiscovery-java.lang.Object-">ServiceDiscovery.releaseServiceObject</a></code>,
so you don&#8217;t need to keep the service reference.</p>
</div>
<div class="paragraph">
<p>Since Vert.x 3.4.0, another client has been provided. This higher-level client, named <code><a href="../../apidocs/io/vertx/ext/web/client/WebClient.html">WebClient</a></code>
tends to be easier to use. You can retrieve a <code><a href="../../apidocs/io/vertx/ext/web/client/WebClient.html">WebClient</a></code> instances using:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">discovery.getRecord(<span class="hljs-keyword">new</span> JsonObject().put(<span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-string">&quot;some-http-service&quot;</span>), ar -&gt; {
  <span class="hljs-keyword">if</span> (ar.succeeded() &amp;&amp; ar.result() != <span class="hljs-keyword">null</span>) {
    <span class="hljs-comment">// Retrieve the service reference</span>
    ServiceReference reference = discovery.getReference(ar.result());
    <span class="hljs-comment">// Retrieve the service object</span>
    WebClient client = reference.getAs(WebClient.class);

    <span class="hljs-comment">// You need to path the complete path</span>
    client.get(<span class="hljs-string">&quot;/api/persons&quot;</span>).send(
      response -&gt; {

        <span class="hljs-comment">// ...</span>

        <span class="hljs-comment">// Dont&#x27; forget to release the service</span>
        reference.release();

      });
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>And, if you prefer the approach using the service type:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">HttpEndpoint.getWebClient(discovery, <span class="hljs-keyword">new</span> JsonObject().put(<span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-string">&quot;some-http-service&quot;</span>), ar -&gt; {
  <span class="hljs-keyword">if</span> (ar.succeeded()) {
    WebClient client = ar.result();

    <span class="hljs-comment">// You need to path the complete path</span>
    client.get(<span class="hljs-string">&quot;/api/persons&quot;</span>)
      .send(response -&gt; {

        <span class="hljs-comment">// ...</span>

        <span class="hljs-comment">// Dont&#x27; forget to release the service</span>
        ServiceDiscovery.releaseServiceObject(discovery, client);

      });
  }
});</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_event_bus_services"><a class="anchor" href="#_event_bus_services"></a>Event bus services</h3>
<div class="paragraph">
<p>Event bus services are service proxies. They implement async-RPC services on top of the event bus. When retrieving
a service object from an event bus service, you get a service proxy of the right type. You can access helper
methods from <code><a href="../../apidocs/io/vertx/servicediscovery/types/EventBusService.html">EventBusService</a></code>.</p>
</div>
<div class="paragraph">
<p>Notice that service proxies (service implementations and service interfaces) are developed in Java.</p>
</div>
<div class="sect3">
<h4 id="_publishing_an_event_bus_service"><a class="anchor" href="#_publishing_an_event_bus_service"></a>Publishing an event bus service</h4>
<div class="paragraph">
<p>To publish an event bus service, you need to create a <code><a href="../../apidocs/io/vertx/servicediscovery/Record.html">Record</a></code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">Record record = EventBusService.createRecord(
    <span class="hljs-string">&quot;some-eventbus-service&quot;</span>, <span class="hljs-comment">// The service name</span>
    <span class="hljs-string">&quot;address&quot;</span>, <span class="hljs-comment">// the service address,</span>
    <span class="hljs-string">&quot;examples.MyService&quot;</span>, <span class="hljs-comment">// the service interface as string</span>
    <span class="hljs-keyword">new</span> JsonObject()
        .put(<span class="hljs-string">&quot;some-metadata&quot;</span>, <span class="hljs-string">&quot;some value&quot;</span>)
);

discovery.publish(record, ar -&gt; {
  <span class="hljs-comment">// ...</span>
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also pass the service interface as class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">Record record = EventBusService.createRecord(
<span class="hljs-string">&quot;some-eventbus-service&quot;</span>, <span class="hljs-comment">// The service name</span>
<span class="hljs-string">&quot;address&quot;</span>, <span class="hljs-comment">// the service address,</span>
MyService.class <span class="hljs-comment">// the service interface</span>
);

discovery.publish(record, ar -&gt; {
<span class="hljs-comment">// ...</span>
});</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_consuming_an_event_bus_service"><a class="anchor" href="#_consuming_an_event_bus_service"></a>Consuming an event bus service</h4>
<div class="paragraph">
<p>To consume an event bus service you can either retrieve the record and then get the reference, or use the
<code><a href="../../apidocs/io/vertx/servicediscovery/types/EventBusService.html">EventBusService</a></code> interface that combines the two operations in one call.</p>
</div>
<div class="paragraph">
<p>When using the reference, you would do something like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">discovery.getRecord(<span class="hljs-keyword">new</span> JsonObject().put(<span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-string">&quot;some-eventbus-service&quot;</span>), ar -&gt; {
<span class="hljs-keyword">if</span> (ar.succeeded() &amp;&amp; ar.result() != <span class="hljs-keyword">null</span>) {
<span class="hljs-comment">// Retrieve the service reference</span>
ServiceReference reference = discovery.getReference(ar.result());
<span class="hljs-comment">// Retrieve the service object</span>
MyService service = reference.getAs(MyService.class);

<span class="hljs-comment">// Dont&#x27; forget to release the service</span>
reference.release();
}
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>With the <code><a href="../../apidocs/io/vertx/servicediscovery/types/EventBusService.html">EventBusService</a></code> class, you can get the proxy as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">EventBusService.getProxy(discovery, MyService.class, ar -&gt; {
<span class="hljs-keyword">if</span> (ar.succeeded()) {
MyService service = ar.result();

<span class="hljs-comment">// Dont&#x27; forget to release the service</span>
ServiceDiscovery.releaseServiceObject(discovery, service);
}
});</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_message_source"><a class="anchor" href="#_message_source"></a>Message source</h3>
<div class="paragraph">
<p>A message source is a component sending messages on the event bus on a specific address. Message source clients are
<code><a href="../../apidocs/io/vertx/core/eventbus/MessageConsumer.html">MessageConsumer</a></code>.</p>
</div>
<div class="paragraph">
<p>The <em>location</em> or a message source service is the event bus address on which messages are sent.</p>
</div>
<div class="sect3">
<h4 id="_publishing_a_message_source"><a class="anchor" href="#_publishing_a_message_source"></a>Publishing a message source</h4>
<div class="paragraph">
<p>As for the other service types, publishing a message source is a 2-step process:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>create a record, using <code><a href="../../apidocs/io/vertx/servicediscovery/types/MessageSource.html">MessageSource</a></code></p>
</li>
<li>
<p>publish the record</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">Record record = MessageSource.createRecord(
    <span class="hljs-string">&quot;some-message-source-service&quot;</span>, <span class="hljs-comment">// The service name</span>
    <span class="hljs-string">&quot;some-address&quot;</span> <span class="hljs-comment">// The event bus address</span>
);

discovery.publish(record, ar -&gt; {
  <span class="hljs-comment">// ...</span>
});

record = MessageSource.createRecord(
    <span class="hljs-string">&quot;some-other-message-source-service&quot;</span>, <span class="hljs-comment">// The service name</span>
    <span class="hljs-string">&quot;some-address&quot;</span>, <span class="hljs-comment">// The event bus address</span>
    <span class="hljs-string">&quot;examples.MyData&quot;</span> <span class="hljs-comment">// The payload type</span>
);</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the second record, the type of payload is also indicated. This information is optional.</p>
</div>
<div class="paragraph">
<p>In java, you can use <code><a href="../../apidocs/java/lang/Class.html">Class</a></code> parameters:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">Record record1 = MessageSource.createRecord(
<span class="hljs-string">&quot;some-message-source-service&quot;</span>, <span class="hljs-comment">// The service name</span>
<span class="hljs-string">&quot;some-address&quot;</span>, <span class="hljs-comment">// The event bus address</span>
JsonObject.class <span class="hljs-comment">// The message payload type</span>
);

Record record2 = MessageSource.createRecord(
<span class="hljs-string">&quot;some-other-message-source-service&quot;</span>, <span class="hljs-comment">// The service name</span>
<span class="hljs-string">&quot;some-address&quot;</span>, <span class="hljs-comment">// The event bus address</span>
JsonObject.class, <span class="hljs-comment">// The message payload type</span>
<span class="hljs-keyword">new</span> JsonObject().put(<span class="hljs-string">&quot;some-metadata&quot;</span>, <span class="hljs-string">&quot;some value&quot;</span>)
);</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_consuming_a_message_source"><a class="anchor" href="#_consuming_a_message_source"></a>Consuming a message source</h4>
<div class="paragraph">
<p>On the consumer side, you can retrieve the record and the reference, or use the
<code><a href="../../apidocs/io/vertx/servicediscovery/types/MessageSource.html">MessageSource</a></code> class to retrieve the service is one call.</p>
</div>
<div class="paragraph">
<p>With the first approach, the code is the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">discovery.getRecord(<span class="hljs-keyword">new</span> JsonObject().put(<span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-string">&quot;some-message-source-service&quot;</span>), ar -&gt; {
  <span class="hljs-keyword">if</span> (ar.succeeded() &amp;&amp; ar.result() != <span class="hljs-keyword">null</span>) {
    <span class="hljs-comment">// Retrieve the service reference</span>
    ServiceReference reference = discovery.getReference(ar.result());
    <span class="hljs-comment">// Retrieve the service object</span>
    MessageConsumer&lt;JsonObject&gt; consumer = reference.getAs(MessageConsumer.class);

    <span class="hljs-comment">// Attach a message handler on it</span>
    consumer.handler(message -&gt; {
      <span class="hljs-comment">// message handler</span>
      JsonObject payload = message.body();
    });
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>When, using <code><a href="../../apidocs/io/vertx/servicediscovery/types/MessageSource.html">MessageSource</a></code>, it becomes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">MessageSource.&lt;JsonObject&gt;getConsumer(discovery, <span class="hljs-keyword">new</span> JsonObject().put(<span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-string">&quot;some-message-source-service&quot;</span>), ar -&gt; {
  <span class="hljs-keyword">if</span> (ar.succeeded()) {
    MessageConsumer&lt;JsonObject&gt; consumer = ar.result();

    <span class="hljs-comment">// Attach a message handler on it</span>
    consumer.handler(message -&gt; {
      <span class="hljs-comment">// message handler</span>
      JsonObject payload = message.body();
    });
    <span class="hljs-comment">// ...</span>
  }
});</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_jdbc_data_source"><a class="anchor" href="#_jdbc_data_source"></a>JDBC Data source</h3>
<div class="paragraph">
<p>Data sources represents databases or data stores. JDBC data sources are a specialization for databases accessible
using a JDBC driver. The client of a JDBC data source service is a <code><a href="../../apidocs/io/vertx/ext/jdbc/JDBCClient.html">JDBCClient</a></code>.</p>
</div>
<div class="sect3">
<h4 id="_publishing_a_jdbc_service"><a class="anchor" href="#_publishing_a_jdbc_service"></a>Publishing a JDBC service</h4>
<div class="paragraph">
<p>As for the other service types, publishing a JDBC data source is a 2-step process:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>create a record, using <code><a href="../../apidocs/io/vertx/servicediscovery/types/JDBCDataSource.html">JDBCDataSource</a></code></p>
</li>
<li>
<p>publish the record</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">Record record = JDBCDataSource.createRecord(
    <span class="hljs-string">&quot;some-data-source-service&quot;</span>, <span class="hljs-comment">// The service name</span>
    <span class="hljs-keyword">new</span> JsonObject().put(<span class="hljs-string">&quot;url&quot;</span>, <span class="hljs-string">&quot;some jdbc url&quot;</span>), <span class="hljs-comment">// The location</span>
    <span class="hljs-keyword">new</span> JsonObject().put(<span class="hljs-string">&quot;some-metadata&quot;</span>, <span class="hljs-string">&quot;some-value&quot;</span>) <span class="hljs-comment">// Some metadata</span>
);

discovery.publish(record, ar -&gt; {
  <span class="hljs-comment">// ...</span>
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>As JDBC data sources can represent a high variety of databases, and their access is often different, the record is
rather unstructured. The <code>location</code> is a simple JSON object that should provide the fields to access the data
source (JDBC url, username&#8230;&#8203;). The set of fields may depend on the database but also on the connection pool used
in front.</p>
</div>
</div>
<div class="sect3">
<h4 id="_consuming_a_jdbc_service"><a class="anchor" href="#_consuming_a_jdbc_service"></a>Consuming a JDBC service</h4>
<div class="paragraph">
<p>As stated in the previous section, how to access a data source depends on the data source itself. To build the
<code><a href="../../apidocs/io/vertx/ext/jdbc/JDBCClient.html">JDBCClient</a></code>, you can merge configuration: the record location, the metadata and a json object provided by
the consumer:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">discovery.getRecord(
    <span class="hljs-keyword">new</span> JsonObject().put(<span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-string">&quot;some-data-source-service&quot;</span>),
    ar -&gt; {
      <span class="hljs-keyword">if</span> (ar.succeeded() &amp;&amp; ar.result() != <span class="hljs-keyword">null</span>) {
        <span class="hljs-comment">// Retrieve the service reference</span>
        ServiceReference reference = discovery.getReferenceWithConfiguration(
            ar.result(), <span class="hljs-comment">// The record</span>
            <span class="hljs-keyword">new</span> JsonObject().put(<span class="hljs-string">&quot;username&quot;</span>, <span class="hljs-string">&quot;clement&quot;</span>).put(<span class="hljs-string">&quot;password&quot;</span>, <span class="hljs-string">&quot;*****&quot;</span>)); <span class="hljs-comment">// Some additional metadata</span>

        <span class="hljs-comment">// Retrieve the service object</span>
        JDBCClient client = reference.getAs(JDBCClient.class);

        <span class="hljs-comment">// ...</span>

        <span class="hljs-comment">// when done</span>
        reference.release();
      }
    });</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also use the <code><a href="../../apidocs/io/vertx/ext/jdbc/JDBCClient.html">JDBCClient</a></code> class to the lookup and retrieval in one call:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">JDBCDataSource.&lt;JsonObject&gt;getJDBCClient(discovery,
    <span class="hljs-keyword">new</span> JsonObject().put(<span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-string">&quot;some-data-source-service&quot;</span>),
    <span class="hljs-keyword">new</span> JsonObject().put(<span class="hljs-string">&quot;username&quot;</span>, <span class="hljs-string">&quot;clement&quot;</span>).put(<span class="hljs-string">&quot;password&quot;</span>, <span class="hljs-string">&quot;*****&quot;</span>), <span class="hljs-comment">// Some additional metadata</span>
    ar -&gt; {
      <span class="hljs-keyword">if</span> (ar.succeeded()) {
        JDBCClient client = ar.result();

        <span class="hljs-comment">// ...</span>

        <span class="hljs-comment">// Dont&#x27; forget to release the service</span>
        ServiceDiscovery.releaseServiceObject(discovery, client);

      }
    });</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_redis_data_source"><a class="anchor" href="#_redis_data_source"></a>Redis Data source</h3>
<div class="paragraph">
<p>Redis data sources are a specialization for Redis persistence databases.
The client of a Redis data source service is a <code><a href="../../apidocs/io/vertx/redis/RedisClient.html">RedisClient</a></code>.</p>
</div>
<div class="sect3">
<h4 id="_publishing_a_redis_service"><a class="anchor" href="#_publishing_a_redis_service"></a>Publishing a Redis service</h4>
<div class="paragraph">
<p>Publishing a Redis data source is a 2-step process:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>create a record, using <code><a href="../../apidocs/io/vertx/servicediscovery/types/RedisDataSource.html">RedisDataSource</a></code></p>
</li>
<li>
<p>publish the record</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">Record record = RedisDataSource.createRecord(
  <span class="hljs-string">&quot;some-redis-data-source-service&quot;</span>, <span class="hljs-comment">// The service name</span>
  <span class="hljs-keyword">new</span> JsonObject().put(<span class="hljs-string">&quot;url&quot;</span>, <span class="hljs-string">&quot;localhost&quot;</span>), <span class="hljs-comment">// The location</span>
  <span class="hljs-keyword">new</span> JsonObject().put(<span class="hljs-string">&quot;some-metadata&quot;</span>, <span class="hljs-string">&quot;some-value&quot;</span>) <span class="hljs-comment">// Some metadata</span>
);

discovery.publish(record, ar -&gt; {
  <span class="hljs-comment">// ...</span>
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>location</code> is a simple JSON object that should provide the fields to access the Redis data
source (url, port&#8230;&#8203;).</p>
</div>
</div>
<div class="sect3">
<h4 id="_consuming_a_redis_service"><a class="anchor" href="#_consuming_a_redis_service"></a>Consuming a Redis service</h4>
<div class="paragraph">
<p>As stated in the previous section, how to access a data source depends on the data source itself. To build the
<code><a href="../../apidocs/io/vertx/redis/RedisClient.html">RedisClient</a></code>, you can merge configuration: the record location, the metadata and a json object provided by
the consumer:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">discovery.getRecord(
  <span class="hljs-keyword">new</span> JsonObject().put(<span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-string">&quot;some-redis-data-source-service&quot;</span>), ar -&gt; {
    <span class="hljs-keyword">if</span> (ar.succeeded() &amp;&amp; ar.result() != <span class="hljs-keyword">null</span>) {
      <span class="hljs-comment">// Retrieve the service reference</span>
      ServiceReference reference = discovery.getReference(ar.result());

      <span class="hljs-comment">// Retrieve the service instance</span>
      RedisClient client = reference.getAs(RedisClient.class);

      <span class="hljs-comment">// ...</span>

      <span class="hljs-comment">// when done</span>
      reference.release();
    }
  });</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also use the <code><a href="../../apidocs/io/vertx/servicediscovery/types/RedisDataSource.html">RedisDataSource</a></code> class to the lookup and retrieval in one call:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">RedisDataSource.getRedisClient(discovery,
  <span class="hljs-keyword">new</span> JsonObject().put(<span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-string">&quot;some-redis-data-source-service&quot;</span>),
  ar -&gt; {
    <span class="hljs-keyword">if</span> (ar.succeeded()) {
      RedisClient client = ar.result();

      <span class="hljs-comment">// ...</span>

      <span class="hljs-comment">// Dont&#x27; forget to release the service</span>
      ServiceDiscovery.releaseServiceObject(discovery, client);

    }
  });</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_mongo_data_source"><a class="anchor" href="#_mongo_data_source"></a>Mongo Data source</h3>
<div class="paragraph">
<p>Mongo data sources are a specialization for MongoDB databases.
The client of a Mongo data source service is a <code><a href="../../apidocs/io/vertx/ext/mongo/MongoClient.html">MongoClient</a></code>.</p>
</div>
<div class="sect3">
<h4 id="_publishing_a_mongo_service"><a class="anchor" href="#_publishing_a_mongo_service"></a>Publishing a Mongo service</h4>
<div class="paragraph">
<p>Publishing a Mongo data source is a 2-step process:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>create a record, using <code><a href="../../apidocs/io/vertx/servicediscovery/types/MongoDataSource.html">MongoDataSource</a></code></p>
</li>
<li>
<p>publish the record</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">Record record = MongoDataSource.createRecord(
  <span class="hljs-string">&quot;some-data-source-service&quot;</span>, <span class="hljs-comment">// The service name</span>
  <span class="hljs-keyword">new</span> JsonObject().put(<span class="hljs-string">&quot;connection_string&quot;</span>, <span class="hljs-string">&quot;some mongo connection&quot;</span>), <span class="hljs-comment">// The location</span>
  <span class="hljs-keyword">new</span> JsonObject().put(<span class="hljs-string">&quot;some-metadata&quot;</span>, <span class="hljs-string">&quot;some-value&quot;</span>) <span class="hljs-comment">// Some metadata</span>
);

discovery.publish(record, ar -&gt; {
  <span class="hljs-comment">// ...</span>
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>location</code> is a simple JSON object that should provide the fields to access the Redis data
source (url, port&#8230;&#8203;).</p>
</div>
</div>
<div class="sect3">
<h4 id="_consuming_a_mongo_service"><a class="anchor" href="#_consuming_a_mongo_service"></a>Consuming a Mongo service</h4>
<div class="paragraph">
<p>As stated in the previous section, how to access a data source depends on the data source itself. To build the
<code><a href="../../apidocs/io/vertx/ext/mongo/MongoClient.html">MongoClient</a></code>, you can merge configuration: the record location, the metadata and a json object
provided by the consumer:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">discovery.getRecord(
  <span class="hljs-keyword">new</span> JsonObject().put(<span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-string">&quot;some-data-source-service&quot;</span>),
  ar -&gt; {
    <span class="hljs-keyword">if</span> (ar.succeeded() &amp;&amp; ar.result() != <span class="hljs-keyword">null</span>) {
      <span class="hljs-comment">// Retrieve the service reference</span>
      ServiceReference reference = discovery.getReferenceWithConfiguration(
        ar.result(), <span class="hljs-comment">// The record</span>
        <span class="hljs-keyword">new</span> JsonObject().put(<span class="hljs-string">&quot;username&quot;</span>, <span class="hljs-string">&quot;clement&quot;</span>).put(<span class="hljs-string">&quot;password&quot;</span>, <span class="hljs-string">&quot;*****&quot;</span>)); <span class="hljs-comment">// Some additional metadata</span>

      <span class="hljs-comment">// Retrieve the service object</span>
      MongoClient client = reference.get();

      <span class="hljs-comment">// ...</span>

      <span class="hljs-comment">// when done</span>
      reference.release();
    }
  });</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also use the <code><a href="../../apidocs/io/vertx/servicediscovery/types/MongoDataSource.html">MongoDataSource</a></code> class to the lookup and retrieval in one call:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">MongoDataSource.&lt;JsonObject&gt;getMongoClient(discovery,
  <span class="hljs-keyword">new</span> JsonObject().put(<span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-string">&quot;some-data-source-service&quot;</span>),
  <span class="hljs-keyword">new</span> JsonObject().put(<span class="hljs-string">&quot;username&quot;</span>, <span class="hljs-string">&quot;clement&quot;</span>).put(<span class="hljs-string">&quot;password&quot;</span>, <span class="hljs-string">&quot;*****&quot;</span>), <span class="hljs-comment">// Some additional metadata</span>
  ar -&gt; {
    <span class="hljs-keyword">if</span> (ar.succeeded()) {
      MongoClient client = ar.result();

      <span class="hljs-comment">// ...</span>

      <span class="hljs-comment">// Dont&#x27; forget to release the service</span>
      ServiceDiscovery.releaseServiceObject(discovery, client);

    }
  });</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_listening_for_service_arrivals_and_departures"><a class="anchor" href="#_listening_for_service_arrivals_and_departures"></a>Listening for service arrivals and departures</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Every time a provider is published or removed, an event is published on the <em>vertx.discovery.announce</em> address.
This address is configurable from the <code><a href="../../apidocs/io/vertx/servicediscovery/ServiceDiscoveryOptions.html">ServiceDiscoveryOptions</a></code>.</p>
</div>
<div class="paragraph">
<p>The received record has a <code>status</code> field indicating the new state of the record:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>UP</code> : the service is available, you can start using it</p>
</li>
<li>
<p><code>DOWN</code> : the service is not available anymore, you should not use it anymore</p>
</li>
<li>
<p><code>OUT_OF_SERVICE</code> : the service is not running, you should not use it anymore, but it may come back later.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_listening_for_service_usage"><a class="anchor" href="#_listening_for_service_usage"></a>Listening for service usage</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Every time a service reference is retrieved (<code>bind</code>) or released (<code>release</code>), an event is published on the <em>vertx
.discovery.usage</em> address. This address is configurable from the <code><a href="../../apidocs/io/vertx/servicediscovery/ServiceDiscoveryOptions.html">ServiceDiscoveryOptions</a></code>.</p>
</div>
<div class="paragraph">
<p>It lets you listen for service usage and map the service bindings.</p>
</div>
<div class="paragraph">
<p>The received message is a <code><a href="../../apidocs/io/vertx/core/json/JsonObject.html">JsonObject</a></code> containing:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the record in the <code>record</code> field</p>
</li>
<li>
<p>the type of event in the <code>type</code> field. It&#8217;s either <code>bind</code> or <code>release</code></p>
</li>
<li>
<p>the id of the service discovery (either its name or the node id) in the <code>id</code> field</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This <code>id</code> is configurable from the <code><a href="../../apidocs/io/vertx/servicediscovery/ServiceDiscoveryOptions.html">ServiceDiscoveryOptions</a></code>. By default it&#8217;s "localhost" on
single node configuration and the id of the node in clustered mode.</p>
</div>
<div class="paragraph">
<p>You can disable the service usage support by setting the usage address to <code>null</code> with
<code><a href="../../apidocs/io/vertx/servicediscovery/ServiceDiscoveryOptions.html#setUsageAddress-java.lang.String-">setUsageAddress</a></code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_service_discovery_bridges"><a class="anchor" href="#_service_discovery_bridges"></a>Service discovery bridges</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Bridges let you import and export services from / to other discovery mechanism such as Docker, Kubernetes, Consul&#8230;&#8203;
Each bridge decides how the services are imported and exported. It does not have to be bi-directional.</p>
</div>
<div class="paragraph">
<p>You can provide your own bridge by implementing the <code><a href="../../apidocs/io/vertx/servicediscovery/spi/ServiceImporter.html">ServiceImporter</a></code> interface and
register it using
<code><a href="../../apidocs/io/vertx/servicediscovery/ServiceDiscovery.html#registerServiceImporter-io.vertx.servicediscovery.spi.ServiceImporter-io.vertx.core.json.JsonObject-">registerServiceImporter</a></code>.</p>
</div>
<div class="paragraph">
<p>The second parameter can provide an optional configuration for the bridge.</p>
</div>
<div class="paragraph">
<p>When the bridge is registered the <code><a href="../../apidocs/io/vertx/servicediscovery/spi/ServiceImporter.html#start-io.vertx.core.Vertx-io.vertx.servicediscovery.spi.ServicePublisher-io.vertx.core.json.JsonObject-io.vertx.core.Promise-">start</a></code> method is called.
It lets you configure the bridge. When the bridge is configured, ready and has imported / exported the initial services, it must complete the given <code><a href="../../apidocs/io/vertx/core/Future.html">Future</a></code>.
If the bridge starts method is blocking, it must use an <code><a href="../../apidocs/io/vertx/core/Vertx.html#executeBlocking-io.vertx.core.Handler-boolean-io.vertx.core.Handler-">executeBlocking</a></code> construct, and complete the given future object.</p>
</div>
<div class="paragraph">
<p>When the service discovery is stopped, the bridge is stopped.
The <code><a href="../../apidocs/io/vertx/servicediscovery/spi/ServiceImporter.html#close-io.vertx.core.Handler-">close</a></code> method is called that provides the opportunity to cleanup resources, removed imported / exported services&#8230;&#8203;
This method must complete the given <code><a href="../../apidocs/io/vertx/core/Future.html">Future</a></code> to notify the caller of the completion.</p>
</div>
<div class="paragraph">
<p>Notice than in a cluster, only one member needs to register the bridge as the records are accessible by all members.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_additional_bridges"><a class="anchor" href="#_additional_bridges"></a>Additional bridges</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In addition of the bridges supported by this library, Vert.x Service Discovery provides additional
bridges you can use in your application.</p>
</div>
<div class="sect2">
<h3 id="_consul_bridge"><a class="anchor" href="#_consul_bridge"></a>Consul bridge</h3>
<div class="paragraph">
<p>This discovery bridge imports services from <a href="http://consul.io">Consul</a> into the Vert.x service discovery. The bridge
connects to a Consul agent (server) and periodically scan for services:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>new services are imported</p>
</li>
<li>
<p>services in maintenance mode or that has been removed from consul are removed</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This bridge uses the HTTP API for Consul. It does not export to Consul and does not support service modification.</p>
</div>
<div class="paragraph">
<p>The service type is deduced from <code>tags</code>. If a <code>tag</code> matches a known service type, this service type will be used.
If not, the service is imported as <code>unknown</code>. Only <code>http-endpoint</code> is supported for now.</p>
</div>
<div class="sect3">
<h4 id="_using_the_bridge"><a class="anchor" href="#_using_the_bridge"></a>Using the bridge</h4>
<div class="paragraph">
<p>To use this Vert.x discovery bridge, add the following dependency to the <em>dependencies</em> section of your build
descriptor:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Maven (in your <code>pom.xml</code>):</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.vertx<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>vertx-service-discovery-bridge-consul<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.9.3<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Gradle (in your <code>build.gradle</code> file):</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">compile <span class="hljs-string">&#x27;io.vertx:vertx-service-discovery-bridge-consul:3.9.3&#x27;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Then, when creating the service discovery registers this bridge as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">ServiceDiscovery.create(vertx)
    .registerServiceImporter(<span class="hljs-keyword">new</span> ConsulServiceImporter(),
        <span class="hljs-keyword">new</span> JsonObject()
            .put(<span class="hljs-string">&quot;host&quot;</span>, <span class="hljs-string">&quot;localhost&quot;</span>)
            .put(<span class="hljs-string">&quot;port&quot;</span>, <span class="hljs-number">8500</span>)
            .put(<span class="hljs-string">&quot;scan-period&quot;</span>, <span class="hljs-number">2000</span>));</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can configure the:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>agent host using the <code>host</code> property, it defaults to <code>localhost</code></p>
</li>
<li>
<p>agent port using the <code>port</code> property, it defaults to 8500</p>
</li>
<li>
<p>acl token using the <code>acl_token</code> property, it defaults to null</p>
</li>
<li>
<p>scan period using the <code>scan-period</code> property. The time is set in ms, and is 2000 ms by default</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_kubernetes_bridge"><a class="anchor" href="#_kubernetes_bridge"></a>Kubernetes bridge</h3>
<div class="paragraph">
<p>This discovery bridge imports services from Kubernetes (or Openshift v3) into the Vert.x service discovery.
Kubernetes services are mapped to <code><a href="../../apidocs/io/vertx/servicediscovery/Record.html">Record</a></code>. This bridge only
supports the importation of services from kubernetes in vert.x (and not the opposite).</p>
</div>
<div class="paragraph">
<p><code><a href="../../apidocs/io/vertx/servicediscovery/Record.html">Record</a></code> are created from Kubernetes Service. The service type is deduced from the <code>service-type</code> label or from the port exposed by the service.</p>
</div>
<div class="sect3">
<h4 id="_using_the_bridge_2"><a class="anchor" href="#_using_the_bridge_2"></a>Using the bridge</h4>
<div class="paragraph">
<p>To use this Vert.x discovery bridge, add the following dependency to the <em>dependencies</em> section of your build
descriptor:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Maven (in your <code>pom.xml</code>):</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.vertx<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>vertx-service-discovery-bridge-kubernetes<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.9.3<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Gradle (in your <code>build.gradle</code> file):</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">compile <span class="hljs-string">&#x27;io.vertx:vertx-service-discovery-bridge-kubernetes:3.9.3&#x27;</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_configuring_the_bridge"><a class="anchor" href="#_configuring_the_bridge"></a>Configuring the bridge</h4>
<div class="paragraph">
<p>The bridge is configured using:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the oauth token (using the content of <code>/var/run/secrets/kubernetes.io/serviceaccount/token</code> by default)</p>
</li>
<li>
<p>the namespace in which the service are searched (defaults to <code>default</code>).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Be aware that the application must have access to Kubernetes and must be able to read the chosen namespace.</p>
</div>
</div>
<div class="sect3">
<h4 id="_the_service_to_record_mapping"><a class="anchor" href="#_the_service_to_record_mapping"></a>The Service to Record mapping</h4>
<div class="paragraph">
<p>The record is created as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the service type is deduced from the <code>service.type</code> label. If this label is not set the service type is set to
<code>unknown</code></p>
</li>
<li>
<p>the record&#8217;s name is the service&#8217;s name</p>
</li>
<li>
<p>the labels of the service are mapped to metadata</p>
</li>
<li>
<p>in addition are added: <code>kubernetes.uuid</code>, <code>kubernetes.namespace</code>, <code>kubernetes.name</code></p>
</li>
<li>
<p>the location is deduced from the*first** port of the service</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For HTTP endpoints, the <code>ssl</code> (<code>https</code>) attribute is set to <code>true</code> if the service has the <code>ssl</code> label set to <code>true</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_dynamics"><a class="anchor" href="#_dynamics"></a>Dynamics</h4>
<div class="paragraph">
<p>The bridge imports all services on <code>start</code> and removes them on <code>stop</code>. In between it watches the Kubernetes services and add the new ones and removes the deleted ones.</p>
</div>
</div>
<div class="sect3">
<h4 id="_supported_types"><a class="anchor" href="#_supported_types"></a>Supported types</h4>
<div class="paragraph">
<p>The bridge uses the <code>service-type</code> label to induce the type. In addition it checks the port of the service. Are supported:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>ports 80, 443 and from 8080 to 9000: HTTP endpoint</p>
</li>
<li>
<p>ports 5432 and 5433: JDBC data source (PostGreSQL)</p>
</li>
<li>
<p>ports 3306 and 13306: JDBC data source (MySQL)</p>
</li>
<li>
<p>port 6379: Redis data source</p>
</li>
<li>
<p>ports 27017, 27018 and 27019: MongoDB data source</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If present, the <code>service-type</code> overrides the port-based deduction.</p>
</div>
<div class="paragraph">
<p>Unresolved directive in index.adoc - include::zookeeper-bridge.adoc[]</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_docker_links_bridge"><a class="anchor" href="#_docker_links_bridge"></a>Docker Links bridge</h3>
<div class="paragraph">
<p>This discovery bridge imports services from Docker Links into the Vert.x service discovery. When you link a Docker
container to another Docker container, Docker injects a set of environment variables. This bridge analyzes these
environment variables and imports service record for each link. The service type is deduced from the <code>service.type</code>
label. If not set, the service is imported as <code>unknown</code>. Only <code>http-endpoint</code> are supported for now.</p>
</div>
<div class="paragraph">
<p>As the links are created when the container starts, the imported records are created when the bridge starts and
do not change afterwards.</p>
</div>
<div class="sect3">
<h4 id="_using_the_bridge_3"><a class="anchor" href="#_using_the_bridge_3"></a>Using the bridge</h4>
<div class="paragraph">
<p>To use this Vert.x discovery bridge, add the following dependency to the <em>dependencies</em> section of your build
descriptor:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Maven (in your <code>pom.xml</code>):</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.vertx<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>vertx-service-discovery-bridge-docker<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.9.3<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Gradle (in your <code>build.gradle</code> file):</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">compile <span class="hljs-string">&#x27;io.vertx:vertx-service-discovery-bridge-docker:3.9.3&#x27;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Then, when creating the service discovery, registers this bridge as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">ServiceDiscovery.create(vertx)
    .registerServiceImporter(<span class="hljs-keyword">new</span> DockerLinksServiceImporter(), <span class="hljs-keyword">new</span> JsonObject());</code></pre>
</div>
</div>
<div class="paragraph">
<p>The bridge does not need any further configuration.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_additional_backends"><a class="anchor" href="#_additional_backends"></a>Additional backends</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In addition of the backend supported by this library, Vert.x Service Discovery provides additional
backends you can use in your application.</p>
</div>
<div class="sect2">
<h3 id="_redis_backend"><a class="anchor" href="#_redis_backend"></a>Redis backend</h3>
<div class="paragraph">
<p>The service discovery has a plug-able backend using the <code><a href="../../apidocs/io/vertx/servicediscovery/spi/ServiceDiscoveryBackend.html">ServiceDiscoveryBackend</a></code> SPI. This is an implementation of the SPI based
on Redis.</p>
</div>
<div class="sect3">
<h4 id="_using_the_redis_backend"><a class="anchor" href="#_using_the_redis_backend"></a>Using the Redis backend</h4>
<div class="paragraph">
<p>To use the Redis backend, add the following dependency to the <em>dependencies</em> section of your build
descriptor:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Maven (in your <code>pom.xml</code>):</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.vertx<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>vertx-service-discovery-backend-redis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.9.3<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Gradle (in your <code>build.gradle</code> file):</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">compile <span class="hljs-string">&#x27;io.vertx:vertx-service-discovery-backend-redis:3.9.3&#x27;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Be aware that you can have only a single implementation of the SPI in your <em>classpath</em>. If none,
the default backend is used.</p>
</div>
</div>
<div class="sect3">
<h4 id="_configuration"><a class="anchor" href="#_configuration"></a>Configuration</h4>
<div class="paragraph">
<p>The backend is based on the <a href="http://vertx.io/docs/vertx-redis-client/java">vertx-redis-client</a>.
The configuration is the client configuration as well as <code>key</code> indicating in which <em>key</em> on Redis
the records are stored.</p>
</div>
<div class="paragraph">
<p>Here is an example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">ServiceDiscovery.create(vertx, <span class="hljs-keyword">new</span> ServiceDiscoveryOptions()
    .setBackendConfiguration(
        <span class="hljs-keyword">new</span> JsonObject()
            .put(<span class="hljs-string">&quot;host&quot;</span>, <span class="hljs-string">&quot;127.0.0.1&quot;</span>)
            .put(<span class="hljs-string">&quot;key&quot;</span>, <span class="hljs-string">&quot;records&quot;</span>)
    ));</code></pre>
</div>
</div>
<div class="paragraph">
<p>It&#8217;s important to note that the backend configuration is passed in the <code>setBackendConfiguration</code> method (or
<code>backendConfiguration</code> entry if you use JSON):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">ServiceDiscovery.create(vertx,
  <span class="hljs-keyword">new</span> ServiceDiscoveryOptions(<span class="hljs-keyword">new</span> JsonObject()
    .put(<span class="hljs-string">&quot;backendConfiguration&quot;</span>,
      <span class="hljs-keyword">new</span> JsonObject().put(<span class="hljs-string">&quot;host&quot;</span>, <span class="hljs-string">&quot;localhost&quot;</span>).put(<span class="hljs-string">&quot;port&quot;</span>, <span class="hljs-number">1234</span>).put(<span class="hljs-string">&quot;key&quot;</span>, <span class="hljs-string">&quot;my-records&quot;</span>)
)));</code></pre>
</div>
</div>
</div>
</div>
</div>
</div></div></div></div></div></div><footer class="jsx-1771812074"><div class="jsx-1771812074 container"><div class="jsx-1771812074 footer-nav-section"><div class="jsx-1771812074 footer-nav-list footer-logo"><a class="jsx-1771812074" href="/"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAxMjMyLjYgMzE1LjIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDEyMzIuNiAzMTUuMiIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHN0eWxlPi5zdDB7ZmlsbDojNzgyYTkxfTwvc3R5bGU+PHBhdGggZD0iTTEyMC45IDIxNC4yIDE5MC41IDBoNTIuM2wtOTguNSAyNzMuOEg5OC4yTDAgMGg1Mi4xbDY4LjggMjE0LjJ6bTI5MS4yLTYyLjZIMjk5LjZ2ODQuMkg0MzF2MzhIMjUyVjBoMTc3Ljd2MzguNEgyOTkuNlYxMTRoMTEyLjV2MzcuNnptODMuNy0xMTMuMkg1NDZjMTYuNS4zIDI5IDQuNCAzNy4zIDEyLjQgOC4zIDggMTIuNSAxOS40IDEyLjUgMzQgMCAxNC00LjUgMjUuMS0xMy41IDMzLjItOSA4LjEtMjEuNiAxMi4xLTM3LjYgMTIuMWgtMjcuMXYyNC4ybDg2LjEgMTE5LjVoNTF2LTIuNGwtNzcuMi0xMDYuN2MyNC45LTUuNSA0My4zLTIxLjcgNTIuNi0zNS45IDguMi0xMi42IDEzLjMtMjcuNyAxMy4zLTQ2IDAtMjYuOC04LjYtNDcuNC0yNS44LTYxLjVDNjAwLjUgNy4xIDU3Ni4xIDAgNTQ0LjUgMGgtOTYuM3YyNzMuOGg0Ny42Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0ibTEwNTIuMyAxNTcuNy00MS41IDYyLjcgMjkuNyA1My40aDg1LjF6Ii8+PGNpcmNsZSBjbGFzcz0ic3QwIiBjeD0iODI3LjkiIGN5PSIyNzQuNyIgcj0iNDAuNSIvPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Im0xMDM3IDAtNDcuNiA3NC4yTDk0OSAwaC04NGw4NS4zIDEzNS44LTY3LjEgMTA1LjdjNS43IDkuNSA5LjEgMjAuNSA5LjIgMzIuNGg1MC4xTDExMjEuMyAwSDEwMzd6Ii8+PHBhdGggZD0iTTc2My41IDI3My44Yy4xLTkuOSAyLjUtMTkuMiA2LjYtMjcuNVYzOC40aDg1LjRWMEg2MzguMnYzOC40aDg0LjZ2MjM1LjRoNDAuN3ptNDE0LTI2Ni45aC0xNS4zdjQyLjJoLTguNVY2LjloLTE1LjJWMGgzOXY2Ljl6TTExOTMgMGwxNC4yIDM3LjdMMTIyMS4zIDBoMTF2NDkuMWgtOC41VjMyLjlsLjgtMjEuNy0xNC41IDM3LjloLTYuMWwtMTQuNS0zNy44LjggMjEuNnYxNi4yaC04LjVWMGgxMS4yeiIvPjwvc3ZnPg==" alt="Vert.x Logo" class="jsx-1771812074"/></a></div><div class="jsx-1771812074 footer-nav-list"><h5 class="jsx-1771812074">Eclipse Vert.x</h5><ul class="jsx-1771812074 "><li class="jsx-1771812074"><a class="jsx-1771812074 navbar-menu-item" href="/docs/">文档</a></li><li class="jsx-1771812074"><a class="jsx-1771812074" href="/download/">下载</a></li><li class="jsx-1771812074"><a class="jsx-1771812074" href="/blog/">博客</a></li><li class="jsx-1771812074"><a class="jsx-1771812074" href="/community/">社区</a></li><li class="jsx-1771812074"><a class="jsx-1771812074" href="/translation/">翻译团队</a></li><li class="jsx-1771812074"><a href="https://github.com/eclipse-vertx/vert.x" class="jsx-1771812074">GitHub</a></li><li class="jsx-1771812074"><a href="https://github.com/vertx-china/vertx-web-site" class="jsx-1771812074">翻译GitHub</a></li></ul></div><div class="jsx-1771812074 footer-nav-list"><h5 class="jsx-1771812074">资源</h5><ul class="jsx-1771812074 "><li class="jsx-1771812074"><a class="jsx-1771812074" href="/faq/">答疑</a></li><li class="jsx-1771812074"><a class="jsx-1771812074" href="/channels/">联系渠道</a></li><li class="jsx-1771812074"><a href="https://how-to.vertx.io/" class="jsx-1771812074">操作指南</a></li><li class="jsx-1771812074"><a href="https://start.vertx.io/" class="jsx-1771812074">应用生成器</a></li></ul></div><div class="jsx-1771812074 footer-nav-list"><h5 class="jsx-1771812074">Eclipse</h5><ul class="jsx-1771812074 "><li class="jsx-1771812074"><a href="https://www.eclipse.org/" class="jsx-1771812074">Eclipse 基金会</a></li><li class="jsx-1771812074"><a href="https://www.eclipse.org/legal/privacy.php" class="jsx-1771812074">隐私政策</a></li><li class="jsx-1771812074"><a href="https://www.eclipse.org/legal/termsofuse.php" class="jsx-1771812074">使用条款</a></li><li class="jsx-1771812074"><a href="https://www.eclipse.org/legal/copyright.php" class="jsx-1771812074">版权代理</a></li><li class="jsx-1771812074"><a href="https://www.eclipse.org/legal/" class="jsx-1771812074">法律资源</a></li></ul></div></div><div class="jsx-1771812074 footer-copyright"><div class="jsx-1771812074 footer-copyright-remarks">© <!-- -->2021<!-- --> Eclipse Vert.x™<br class="jsx-1771812074"/>Eclipse Vert.x™ 是开源的，并在<a href="https://creativecommons.org/licenses/by-sa/3.0/" target="_blank" rel="noopener noreferrer" class="jsx-1771812074">Eclipse Public License 2.0</a>和<a href="https://www.apache.org/licenses/LICENSE-2.0.html" target="_blank" rel="noopener noreferrer" class="jsx-1771812074">Apache License 2.0</a>协议下获得了双重许可。<br class="jsx-1771812074 footer-copyright-break"/>网站由 <a href="https://michelkraemer.com" target="_blank" rel="noopener noreferrer" class="jsx-1771812074">Michel Krämer</a> 设计。</div><div class="jsx-1771812074 footer-copyright-eclipse-logo"><a href="https://www.eclipse.org/" target="_blank" rel="noopener noreferrer" class="jsx-1771812074"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAyODEuMyA5MS4xIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAyODEuMyA5MS4xIiB4bWw6c3BhY2U9InByZXNlcnZlIj48c3R5bGU+LnN0MHtmaWxsOiNmNzk0MjJ9LnN0MXtmaWxsOiMzZDNjM2J9PC9zdHlsZT48ZyBpZD0iTGF5ZXJfMV8xXyI+PHBhdGggY2xhc3M9InN0MCIgZD0iTTI2NS43IDg0IDI1NyA3M2gtMi43djE3LjdoMy4zdi0xMmw5LjMgMTJoMi4xVjczaC0zLjN2MTF6bS0zMi40LTguM2M0LjIgMCA1LjggMy4zIDUuOCA2LjNzLTEuNiA2LTUuOCA2LTUuNy0zLjEtNS44LTYgMS43LTYuMyA1LjgtNi4zem0wLTNjLTYuMSAwLTkuMSA0LjctOS4xIDkuMyAwIDQuNyAyLjkgOS4xIDkuMSA5LjFzOS00LjYgOS4xLTkuMi0zLTkuMi05LjEtOS4yem0tMjEuMiAxOFY3M2gtMy4zdjE3LjdoMy4zem0tMjMuNiAwaDMuM1Y3Nmg1LjZ2LTNoLTE0LjZ2M2g1LjZsLjEgMTQuN3ptLTE4LjktNi41SDE2M2wzLjMtNy42IDMuMyA3LjZ6bTIuOCA2LjVoMy42TDE2OC4yIDczaC0zLjZsLTggMTcuN2gzLjZsMS41LTMuM2g5LjNsMS40IDMuM3ptLTM4LTE0LjZoMy42YzMuOSAwIDUuNSAyLjggNS41IDUuNS4xIDIuOC0xLjUgNS44LTUuNSA1LjhoLTMuNlY3Ni4xem0zLjctMy4xaC02Ljl2MTcuN2g2LjljNi4yIDAgOC45LTQuNSA4LjktOXMtMi44LTguNy04LjktOC43em0tMjIuNCAxMUwxMDcgNzNoLTIuN3YxNy43aDMuM3YtMTJsOS4zIDEyaDIuMVY3M2gtMy4zdjExek04OC4yIDczdjEwLjJjMCAzLTEuNiA0LjktNC4zIDQuOXMtNC42LTEuNy00LjYtNC45VjczSDc2djEwLjFjMCA1LjMgMy42IDcuOSA3LjkgNy45IDQuNCAwIDcuNy0yLjcgNy43LTcuOVY3M2gtMy40em0tMzMgMi43YzQuMiAwIDUuOCAzLjMgNS44IDYuM3MtMS42IDYtNS44IDYtNS43LTMuMS01LjgtNiAxLjctNi4zIDUuOC02LjN6bTAtM2MtNi4xIDAtOS4xIDQuNy05LjEgOS4zczIuOSA5LjEgOS4xIDkuMSA5LTQuNiA5LjEtOS4yLTMtOS4yLTkuMS05LjJ6bS0yOS43IDE4di02LjVoOC45di0zLjFoLTguOXYtNC44aDkuNFY3M0gyMi4ydjE3LjZoMy4zeiIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yNjkuNCA1NC40aC0yMi4ydi04LjloMjEuNHYtNi45aC0yMS40di05LjFoMjIuMnYtNy4yaC0yOS42djM5LjVoMjkuNnYtNy40em0tNDAtMjUuNmMtMy02LjEtOS40LTcuOC0xNS41LTcuOC03LjMgMC0xNS4zIDMuNC0xNS4zIDExLjUgMCA4LjkgNy40IDExIDE1LjUgMTIgNS4yLjYgOS4xIDIuMSA5LjEgNS44IDAgNC4zLTQuNCA1LjktOS4xIDUuOXMtOS40LTEuOS0xMS4xLTYuM2wtNi4yIDMuMmMyLjkgNy4yIDkuMSA5LjcgMTcuMiA5LjcgOC44IDAgMTYuNi0zLjggMTYuNi0xMi42IDAtOS40LTcuNy0xMS42LTE1LjktMTIuNi00LjctLjYtOC44LTEuNS04LjgtNSAwLTIuOSAyLjYtNS4yIDguMi01LjIgNC4zIDAgOCAyLjIgOS40IDQuNGw1LjktM3pNMTc2IDIyLjJjLTYuMi0uMS0xMi40IDAtMTguNiAwdjM5LjVoNy40VjUwLjFIMTc2YzE5LjQgMCAxOS40LTI3LjkgMC0yNy45em0tMTEuMSA3LjFIMTc2YzkuNSAwIDkuNSAxNCAwIDE0aC0xMS4ybC4xLTE0em0tMTggMzIuNVYyMi4yaC03LjR2MzkuNWw3LjQuMXptLTQ0LTM5LjZ2MzkuNWgyNy43di02LjloLTIwLjNWMjIuMmgtNy40ek05MC43IDUxLjdjLTIuNyAyLjUtNi4yIDQtOS45IDQtOS44IDAtMTMuNS02LjgtMTMuNi0xMy40czQuMS0xMy43IDEzLjYtMTMuN2MzLjUtLjEgNyAxLjMgOS41IDMuN2w1LTQuOGMtMy44LTMuOS05LjEtNi0xNC41LTYtMTQuMyAwLTIxIDEwLjUtMjAuOSAyMC44czYuMyAyMC4zIDIwLjkgMjAuM2M1LjYuMSAxMS0yIDE1LTUuOWwtNS4xLTV6bS0zOSAyLjdIMjkuNXYtOC45aDIxLjR2LTYuOUgyOS41di05LjFoMjIuMnYtNy4ySDIyLjJ2MzkuNWgyOS42bC0uMS03LjR6Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTkuOCAxOC4yQzE4LjggNC4xIDM2LjktLjggNTIuMSA2bC0xLS43QzM1LjctNC42IDE1LjItLjEgNS4zIDE1LjNzLTUuNCAzNS45IDEwIDQ1LjhsMS4xLjZDMy44IDUwLjguOCAzMi4zIDkuOCAxOC4yeiIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yNzIuMiAyNi4xYzAtMi41IDIuMS00LjYgNC42LTQuNiAyLjUgMCA0LjYgMi4xIDQuNiA0LjYgMCAyLjUtMi4xIDQuNi00LjYgNC42LTIuNiAwLTQuNi0yLjEtNC42LTQuNnptOC42IDBjMC0yLjItMS44LTQuMS00LTQuMXMtNC4xIDEuOC00LjEgNC4xYzAgMi4yIDEuNyA0IDMuOSA0LjFoLjFjMi4zIDAgNC4xLTEuOCA0LjEtNC4xem0tNi0yLjVoMi4zYzEuMSAwIDEuOS41IDEuOSAxLjYgMCAuNy0uNCAxLjMtMS4xIDEuNWwxLjIgMS43aC0xLjRsLTEtMS41aC0uN3YxLjVoLTEuMWwtLjEtNC44em0yLjIgMi4zYy41IDAgLjgtLjMuOC0uN3MtLjMtLjctLjgtLjdoLTF2MS4zbDEgLjF6Ii8+PC9nPjwvc3ZnPg==" alt="Eclipse foundation Logo" class="jsx-1771812074"/></a></div></div></div></footer></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"slug":"3.9.3/vertx-service-discovery/java","title":"Vert.x Service Discovery","fallbackGitHubStars":null,"toc":"\u003cdiv id=\"toc\" class=\"toc\"\u003e\n\u003cdiv id=\"toctitle\"\u003eTable of Contents\u003c/div\u003e\n\u003cul class=\"sectlevel1\"\u003e\n\u003cli\u003e\u003ca href=\"#_using_the_service_discovery\"\u003eUsing the service discovery\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_overall_concepts\"\u003eOverall concepts\u003c/a\u003e\n\u003cul class=\"sectlevel2\"\u003e\n\u003cli\u003e\u003ca href=\"#_service_records\"\u003eService records\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_service_provider_and_publisher\"\u003eService Provider and publisher\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_service_consumer\"\u003eService Consumer\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_service_object\"\u003eService object\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_service_types\"\u003eService types\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_service_events\"\u003eService events\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_backend\"\u003eBackend\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_creating_a_service_discovery_instance\"\u003eCreating a service discovery instance\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_publishing_services\"\u003ePublishing services\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_withdrawing_services\"\u003eWithdrawing services\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_looking_for_services\"\u003eLooking for services\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_retrieving_a_service_reference\"\u003eRetrieving a service reference\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_types_of_services\"\u003eTypes of services\u003c/a\u003e\n\u003cul class=\"sectlevel2\"\u003e\n\u003cli\u003e\u003ca href=\"#_services_with_no_type\"\u003eServices with no type\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_implementing_your_own_service_type\"\u003eImplementing your own service type\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_http_endpoints\"\u003eHTTP endpoints\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_event_bus_services\"\u003eEvent bus services\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_message_source\"\u003eMessage source\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_jdbc_data_source\"\u003eJDBC Data source\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_redis_data_source\"\u003eRedis Data source\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_mongo_data_source\"\u003eMongo Data source\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_listening_for_service_arrivals_and_departures\"\u003eListening for service arrivals and departures\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_listening_for_service_usage\"\u003eListening for service usage\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_service_discovery_bridges\"\u003eService discovery bridges\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_additional_bridges\"\u003eAdditional bridges\u003c/a\u003e\n\u003cul class=\"sectlevel2\"\u003e\n\u003cli\u003e\u003ca href=\"#_consul_bridge\"\u003eConsul bridge\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_kubernetes_bridge\"\u003eKubernetes bridge\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_docker_links_bridge\"\u003eDocker Links bridge\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_additional_backends\"\u003eAdditional backends\u003c/a\u003e\n\u003cul class=\"sectlevel2\"\u003e\n\u003cli\u003e\u003ca href=\"#_redis_backend\"\u003eRedis backend\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e","contents":"\u003ch1\u003eVert.x Service Discovery\u003c/h1\u003e\n\n\u003cdiv id=\"preamble\"\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThis component provides an infrastructure to publish and discover various resources, such as service\nproxies, HTTP endpoints, data sources\u0026#8230;\u0026#8203; These resources are called \u003ccode\u003eservices\u003c/code\u003e. A \u003ccode\u003eservice\u003c/code\u003e is a discoverable\nfunctionality. It can be qualified by its type, metadata, and location. So a \u003ccode\u003eservice\u003c/code\u003e can be a database, a\nservice proxy, a HTTP endpoint and any other resource you can imagine as soon as you can describe it, discover it\nand interact with it. It does not have to be a vert.x entity, but can be anything. Each service is described by a\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/Record.html\"\u003eRecord\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe service discovery implements the interactions defined in service-oriented computing. And to some extent,\nalso provides the dynamic service-oriented computing interactions. So, applications can react to arrival and\ndeparture of services.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eA service provider can:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003epublish a service record\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eun-publish a published record\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eupdate the status of a published service (down, out of service\u0026#8230;\u0026#8203;)\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eA service consumer can:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003elookup services\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003ebind to a selected service (it gets a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/ServiceReference.html\"\u003eServiceReference\u003c/a\u003e\u003c/code\u003e) and use it\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003erelease the service once the consumer is done with it\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003elisten for arrival, departure and modification of services.\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eConsumer would 1) lookup a service record matching their need, 2) retrieve the\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/ServiceReference.html\"\u003eServiceReference\u003c/a\u003e\u003c/code\u003e that give access to the service, 3) get a service object to access\nthe service, 4) release the service object once done.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe process can be simplified using \u003cem\u003eservice type\u003c/em\u003e where you can directly retrieve the service object if you know\nfrom which type it is (JDBC client, Http client\u0026#8230;\u0026#8203;).\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eAs stated above, the central piece of information shared by the providers and consumers are\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/Record.html\"\u003erecords\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eProviders and consumers must create their own \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/ServiceDiscovery.html\"\u003eServiceDiscovery\u003c/a\u003e\u003c/code\u003e instance. These\ninstances are collaborating in the background (distributed structure) to keep the set of services in sync.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe service discovery supports bridges to import and export services from / to other discovery technologies.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_using_the_service_discovery\"\u003e\u003ca class=\"anchor\" href=\"#_using_the_service_discovery\"\u003e\u003c/a\u003eUsing the service discovery\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eTo use the Vert.x service discovery, add the following dependency to the \u003cem\u003edependencies\u003c/em\u003e section of your build\ndescriptor:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eMaven (in your \u003ccode\u003epom.xml\u003c/code\u003e):\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-xml\" data-lang=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003eio.vertx\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003evertx-service-discovery\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e3.9.3\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eGradle (in your \u003ccode\u003ebuild.gradle\u003c/code\u003e file):\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-groovy\" data-lang=\"groovy\"\u003ecompile \u003cspan class=\"hljs-string\"\u003e\u0026#x27;io.vertx:vertx-service-discovery:3.9.3\u0026#x27;\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_overall_concepts\"\u003e\u003ca class=\"anchor\" href=\"#_overall_concepts\"\u003e\u003c/a\u003eOverall concepts\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe discovery mechanism is based on a few concepts explained in this section.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_service_records\"\u003e\u003ca class=\"anchor\" href=\"#_service_records\"\u003e\u003c/a\u003eService records\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eA service \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/Record.html\"\u003eRecord\u003c/a\u003e\u003c/code\u003e is an object that describes a service published by a service\nprovider. It contains a name, some metadata, a location object (describing where is the service). This record is\nthe only object shared by the provider (having published it) and the consumer (retrieve it when doing a lookup).\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe metadata and even the location format depend on the \u003ccode\u003eservice type\u003c/code\u003e (see below).\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eA record is published when the provider is ready to be used, and withdrawn when the service provider is stopping.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_service_provider_and_publisher\"\u003e\u003ca class=\"anchor\" href=\"#_service_provider_and_publisher\"\u003e\u003c/a\u003eService Provider and publisher\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eA service provider is an entity providing a \u003cem\u003eservice\u003c/em\u003e. The publisher is responsible for publishing a record\ndescribing the provider. It may be a single entity (a provider publishing itself) or a different entity.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_service_consumer\"\u003e\u003ca class=\"anchor\" href=\"#_service_consumer\"\u003e\u003c/a\u003eService Consumer\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eService consumers search for services in the service discovery. Each lookup retrieves \u003ccode\u003e0..n\u003c/code\u003e\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/Record.html\"\u003eRecord\u003c/a\u003e\u003c/code\u003e. From these records, a consumer can retrieve a\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/ServiceReference.html\"\u003eServiceReference\u003c/a\u003e\u003c/code\u003e, representing the binding between the consumer and the provider.\nThis reference allows the consumer to retrieve the \u003cem\u003eservice object\u003c/em\u003e (to use the service),  and release the service.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIt is important to release service references to cleanup the objects and update the service usages.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_service_object\"\u003e\u003ca class=\"anchor\" href=\"#_service_object\"\u003e\u003c/a\u003eService object\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe service object is the object that gives access to a service. It can come in various forms, such as a proxy, a client,\nand may even be non-existent for some service types. The nature of the service object depends on the service type.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eNotice that because of the polyglot nature of Vert.x, the service object can differ if you retrieve it from Java,\nGroovy or another language.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_service_types\"\u003e\u003ca class=\"anchor\" href=\"#_service_types\"\u003e\u003c/a\u003eService types\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eServices are just resources, and there are a lot of different kinds of services. They can be functional services,\ndatabases, REST APIs, and so on. The Vert.x service discovery has the concept of service types to handle this\nheterogeneity. Each type defines:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003ehow the service is located (URI, event bus address, IP / DNS\u0026#8230;\u0026#8203;) - \u003cem\u003elocation\u003c/em\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003ethe nature of the service object (service proxy, HTTP client, message consumer\u0026#8230;\u0026#8203;) - \u003cem\u003eclient\u003c/em\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eSome service types are implemented and provided by the service discovery component, but you can add\nyour own.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_service_events\"\u003e\u003ca class=\"anchor\" href=\"#_service_events\"\u003e\u003c/a\u003eService events\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eEvery time a service provider is published or withdrawn, an event is fired on the event bus. This event contains\nthe record that has been modified.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIn addition, in order to track who is using who, every time a reference is retrieved with\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/ServiceDiscovery.html#getReference-io.vertx.servicediscovery.Record-\"\u003egetReference\u003c/a\u003e\u003c/code\u003e or released with\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/ServiceReference.html#release--\"\u003erelease\u003c/a\u003e\u003c/code\u003e, events are emitted on the event bus to track the\nservice usages.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eMore details on these events below.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_backend\"\u003e\u003ca class=\"anchor\" href=\"#_backend\"\u003e\u003c/a\u003eBackend\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe service discovery uses a Vert.x distributed data structure to store the records. So, all members of the cluster\nhave access to all the records. This is the default backend implementation. You can implement your own by\nimplementing the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/spi/ServiceDiscoveryBackend.html\"\u003eServiceDiscoveryBackend\u003c/a\u003e\u003c/code\u003e SPI. For instance, we provide an\nimplementation based on Redis.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eNotice that the discovery does not require Vert.x clustering. In single-node mode, the structure is local. It can\nbe populated with \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/spi/ServiceImporter.html\"\u003eServiceImporter\u003c/a\u003e`s. Since 3.5.0, you can use a local\nstructure even in clustered mode by setting the system property `vertx-service-discovery-backend-local\u003c/code\u003e to \u003ccode\u003etrue\u003c/code\u003e (or\nthe environment variable \u003ccode\u003eVERTX-SERVICE-DISCOVERY-BACKEND-LOCAL\u003c/code\u003e to \u003ccode\u003etrue\u003c/code\u003e).\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_creating_a_service_discovery_instance\"\u003e\u003ca class=\"anchor\" href=\"#_creating_a_service_discovery_instance\"\u003e\u003c/a\u003eCreating a service discovery instance\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003ePublishers and consumers must create their own \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/ServiceDiscovery.html\"\u003eServiceDiscovery\u003c/a\u003e\u003c/code\u003e\ninstance to use the discovery infrastructure:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eServiceDiscovery discovery = ServiceDiscovery.create(vertx);\n\n\u003cspan class=\"hljs-comment\"\u003e// Customize the configuration\u003c/span\u003e\ndiscovery = ServiceDiscovery.create(vertx,\n    \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e ServiceDiscoveryOptions()\n        .setAnnounceAddress(\u003cspan class=\"hljs-string\"\u003e\u0026quot;service-announce\u0026quot;\u003c/span\u003e)\n        .setName(\u003cspan class=\"hljs-string\"\u003e\u0026quot;my-name\u0026quot;\u003c/span\u003e));\n\n\u003cspan class=\"hljs-comment\"\u003e// Do something...\u003c/span\u003e\n\ndiscovery.close();\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eBy default, the announce address (the event bus address on which service events are sent is: \u003ccode\u003evertx.discovery\n.announce\u003c/code\u003e. You can also configure a name used for the service usage (see section about service usage).\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eWhen you don\u0026#8217;t need the service discovery object anymore, don\u0026#8217;t forget to close it. It closes the different\ndiscovery importers and exporters you have configured and releases the service references.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eYou should avoid sharing the service discovery instance, so service usage would represent the right \"usages\".\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_publishing_services\"\u003e\u003ca class=\"anchor\" href=\"#_publishing_services\"\u003e\u003c/a\u003ePublishing services\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eOnce you have a service discovery instance, you can publish services. The process is the following:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"olist arabic\"\u003e\n\u003col class=\"arabic\"\u003e\n\u003cli\u003e\n\u003cp\u003ecreate a record for a specific service provider\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003epublish this record\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003ekeep the published record that is used to un-publish a service or modify it.\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eTo create records, you can either use the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/Record.html\"\u003eRecord\u003c/a\u003e\u003c/code\u003e class, or use convenient methods\nfrom the service types.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eRecord record = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e Record()\n    .setType(\u003cspan class=\"hljs-string\"\u003e\u0026quot;eventbus-service-proxy\u0026quot;\u003c/span\u003e)\n    .setLocation(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;endpoint\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;the-service-address\u0026quot;\u003c/span\u003e))\n    .setName(\u003cspan class=\"hljs-string\"\u003e\u0026quot;my-service\u0026quot;\u003c/span\u003e)\n    .setMetadata(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;some-label\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;some-value\u0026quot;\u003c/span\u003e));\n\ndiscovery.publish(record, ar -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.succeeded()) {\n    \u003cspan class=\"hljs-comment\"\u003e// publication succeeded\u003c/span\u003e\n    Record publishedRecord = ar.result();\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    \u003cspan class=\"hljs-comment\"\u003e// publication failed\u003c/span\u003e\n  }\n});\n\n\u003cspan class=\"hljs-comment\"\u003e// Record creation from a type\u003c/span\u003e\nrecord = HttpEndpoint.createRecord(\u003cspan class=\"hljs-string\"\u003e\u0026quot;some-rest-api\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;localhost\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e8080\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;/api\u0026quot;\u003c/span\u003e);\ndiscovery.publish(record, ar -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.succeeded()) {\n    \u003cspan class=\"hljs-comment\"\u003e// publication succeeded\u003c/span\u003e\n    Record publishedRecord = ar.result();\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    \u003cspan class=\"hljs-comment\"\u003e// publication failed\u003c/span\u003e\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIt is important to keep a reference on the returned records, as this record has been extended by a \u003ccode\u003eregistration id\u003c/code\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_withdrawing_services\"\u003e\u003ca class=\"anchor\" href=\"#_withdrawing_services\"\u003e\u003c/a\u003eWithdrawing services\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eTo withdraw (un-publish) a record, use:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003ediscovery.unpublish(record.getRegistration(), ar -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.succeeded()) {\n    \u003cspan class=\"hljs-comment\"\u003e// Ok\u003c/span\u003e\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    \u003cspan class=\"hljs-comment\"\u003e// cannot un-publish the service, may have already been removed, or the record is not published\u003c/span\u003e\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_looking_for_services\"\u003e\u003ca class=\"anchor\" href=\"#_looking_for_services\"\u003e\u003c/a\u003eLooking for services\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e\u003cem\u003eThis section explains the low-level process to retrieve services, each service type provide convenient method to\naggregates the different steps.\u003c/em\u003e\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eOn the consumer side, the first thing to do is to lookup for records. You can search for a single record or all\nthe matching ones. In the first case, the first matching record is returned.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eConsumer can pass a filter to select the service. There are two ways to describe the filter:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"olist arabic\"\u003e\n\u003col class=\"arabic\"\u003e\n\u003cli\u003e\n\u003cp\u003eA function taking a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/Record.html\"\u003eRecord\u003c/a\u003e\u003c/code\u003e as parameter and returning a boolean (it\u0026#8217;s a\npredicate)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eThis filter is a JSON object. Each entry of the given filter is checked against the record. All entries must\nexactly match the record. The entry can use the special \u003ccode\u003e*\u003c/code\u003e value to denote a requirement on the key, but not on\nthe value.\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eLet\u0026#8217;s see an example of a JSON filter:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre\u003e{ \"name\" = \"a\" } =\u0026gt; matches records with name set to \"a\"\n{ \"color\" = \"*\" } =\u0026gt; matches records with \"color\" set\n{ \"color\" = \"red\" } =\u0026gt; only matches records with \"color\" set to \"red\"\n{ \"color\" = \"red\", \"name\" = \"a\"} =\u0026gt; only matches records with name set to \"a\", and color set to \"red\"\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIf the JSON filter is not set (\u003ccode\u003enull\u003c/code\u003e or empty), it accepts all records. When using functions, to accept all\nrecords, you must return \u003cem\u003etrue\u003c/em\u003e regardless the record.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eHere are some examples:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003ediscovery.getRecord(r -\u0026gt; \u003cspan class=\"hljs-keyword\"\u003etrue\u003c/span\u003e, ar -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.succeeded()) {\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.result() != \u003cspan class=\"hljs-keyword\"\u003enull\u003c/span\u003e) {\n      \u003cspan class=\"hljs-comment\"\u003e// we have a record\u003c/span\u003e\n    } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n      \u003cspan class=\"hljs-comment\"\u003e// the lookup succeeded, but no matching service\u003c/span\u003e\n    }\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    \u003cspan class=\"hljs-comment\"\u003e// lookup failed\u003c/span\u003e\n  }\n});\n\ndiscovery.getRecord((JsonObject) \u003cspan class=\"hljs-keyword\"\u003enull\u003c/span\u003e, ar -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.succeeded()) {\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.result() != \u003cspan class=\"hljs-keyword\"\u003enull\u003c/span\u003e) {\n      \u003cspan class=\"hljs-comment\"\u003e// we have a record\u003c/span\u003e\n    } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n      \u003cspan class=\"hljs-comment\"\u003e// the lookup succeeded, but no matching service\u003c/span\u003e\n    }\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    \u003cspan class=\"hljs-comment\"\u003e// lookup failed\u003c/span\u003e\n  }\n});\n\n\n\u003cspan class=\"hljs-comment\"\u003e// Get a record by name\u003c/span\u003e\ndiscovery.getRecord(r -\u0026gt; r.getName().equals(\u003cspan class=\"hljs-string\"\u003e\u0026quot;some-name\u0026quot;\u003c/span\u003e), ar -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.succeeded()) {\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.result() != \u003cspan class=\"hljs-keyword\"\u003enull\u003c/span\u003e) {\n      \u003cspan class=\"hljs-comment\"\u003e// we have a record\u003c/span\u003e\n    } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n      \u003cspan class=\"hljs-comment\"\u003e// the lookup succeeded, but no matching service\u003c/span\u003e\n    }\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    \u003cspan class=\"hljs-comment\"\u003e// lookup failed\u003c/span\u003e\n  }\n});\n\ndiscovery.getRecord(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;name\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;some-service\u0026quot;\u003c/span\u003e), ar -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.succeeded()) {\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.result() != \u003cspan class=\"hljs-keyword\"\u003enull\u003c/span\u003e) {\n      \u003cspan class=\"hljs-comment\"\u003e// we have a record\u003c/span\u003e\n    } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n      \u003cspan class=\"hljs-comment\"\u003e// the lookup succeeded, but no matching service\u003c/span\u003e\n    }\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    \u003cspan class=\"hljs-comment\"\u003e// lookup failed\u003c/span\u003e\n  }\n});\n\n\u003cspan class=\"hljs-comment\"\u003e// Get all records matching the filter\u003c/span\u003e\ndiscovery.getRecords(r -\u0026gt; \u003cspan class=\"hljs-string\"\u003e\u0026quot;some-value\u0026quot;\u003c/span\u003e.equals(r.getMetadata().getString(\u003cspan class=\"hljs-string\"\u003e\u0026quot;some-label\u0026quot;\u003c/span\u003e)), ar -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.succeeded()) {\n    List\u0026lt;Record\u0026gt; results = ar.result();\n    \u003cspan class=\"hljs-comment\"\u003e// If the list is not empty, we have matching record\u003c/span\u003e\n    \u003cspan class=\"hljs-comment\"\u003e// Else, the lookup succeeded, but no matching service\u003c/span\u003e\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    \u003cspan class=\"hljs-comment\"\u003e// lookup failed\u003c/span\u003e\n  }\n});\n\n\ndiscovery.getRecords(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;some-label\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;some-value\u0026quot;\u003c/span\u003e), ar -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.succeeded()) {\n    List\u0026lt;Record\u0026gt; results = ar.result();\n    \u003cspan class=\"hljs-comment\"\u003e// If the list is not empty, we have matching record\u003c/span\u003e\n    \u003cspan class=\"hljs-comment\"\u003e// Else, the lookup succeeded, but no matching service\u003c/span\u003e\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    \u003cspan class=\"hljs-comment\"\u003e// lookup failed\u003c/span\u003e\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eYou can retrieve a single record or all matching records with\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/ServiceDiscovery.html#getRecords-io.vertx.core.json.JsonObject-io.vertx.core.Handler-\"\u003egetRecords\u003c/a\u003e\u003c/code\u003e.\nBy default, record lookup does include only records with a \u003ccode\u003estatus\u003c/code\u003e set to \u003ccode\u003eUP\u003c/code\u003e. This can be overridden:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003ewhen using JSON filter, just set \u003ccode\u003estatus\u003c/code\u003e to the value you want (or \u003ccode\u003e*\u003c/code\u003e to accept all status)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003ewhen using function, set the \u003ccode\u003eincludeOutOfService\u003c/code\u003e parameter to \u003ccode\u003etrue\u003c/code\u003e in\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/ServiceDiscovery.html#getRecords-java.util.function.Function-boolean-io.vertx.core.Handler-\"\u003egetRecords\u003c/a\u003e\u003c/code\u003e\n.\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_retrieving_a_service_reference\"\u003e\u003ca class=\"anchor\" href=\"#_retrieving_a_service_reference\"\u003e\u003c/a\u003eRetrieving a service reference\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eOnce you have chosen the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/Record.html\"\u003eRecord\u003c/a\u003e\u003c/code\u003e, you can retrieve a\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/ServiceReference.html\"\u003eServiceReference\u003c/a\u003e\u003c/code\u003e and then the service object:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eServiceReference reference1 = discovery.getReference(record1);\nServiceReference reference2 = discovery.getReference(record2);\n\n\u003cspan class=\"hljs-comment\"\u003e// Then, gets the service object, the returned type depends on the service type:\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// For http endpoint:\u003c/span\u003e\nHttpClient client = reference1.getAs(HttpClient.class);\n\u003cspan class=\"hljs-comment\"\u003e// For message source\u003c/span\u003e\nMessageConsumer consumer = reference2.getAs(MessageConsumer.class);\n\n\u003cspan class=\"hljs-comment\"\u003e// When done with the service\u003c/span\u003e\nreference1.release();\nreference2.release();\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eDon\u0026#8217;t forget to release the reference once done.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe service reference represents a binding with the service provider.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eWhen retrieving a service reference you can pass a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/json/JsonObject.html\"\u003eJsonObject\u003c/a\u003e\u003c/code\u003e used to configure the\nservice object. It can contain various data about the service object. Some service types do not need additional\nconfiguration, some require configuration (as data sources):\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eServiceReference reference = discovery.getReferenceWithConfiguration(record, conf);\n\n\u003cspan class=\"hljs-comment\"\u003e// Then, gets the service object, the returned type depends on the service type:\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// For http endpoint:\u003c/span\u003e\nJDBCClient client = reference.getAs(JDBCClient.class);\n\n\u003cspan class=\"hljs-comment\"\u003e// Do something with the client...\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e// When done with the service\u003c/span\u003e\nreference.release();\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIn the previous examples, the code uses\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/ServiceReference.html#getAs-java.lang.Class-\"\u003egetAs\u003c/a\u003e\u003c/code\u003e. The parameter is the type of\nobject you expect to get. If you are using Java, you can use\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/ServiceReference.html#get--\"\u003eget\u003c/a\u003e\u003c/code\u003e. However in the other language you must pass the expected\ntype.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_types_of_services\"\u003e\u003ca class=\"anchor\" href=\"#_types_of_services\"\u003e\u003c/a\u003eTypes of services\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eA said above, the service discovery has the service type concept to manage the heterogeneity of the\ndifferent services.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThese types are provided by default:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/types/HttpEndpoint.html\"\u003eHttpEndpoint\u003c/a\u003e\u003c/code\u003e - for REST API\u0026#8217;s, the service object is a\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpClient.html\"\u003eHttpClient\u003c/a\u003e\u003c/code\u003e configured on the host and port (the location is the url).\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/types/EventBusService.html\"\u003eEventBusService\u003c/a\u003e\u003c/code\u003e - for service proxies, the service object is a proxy. Its\ntype is the proxies interface (the location is the address).\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/types/MessageSource.html\"\u003eMessageSource\u003c/a\u003e\u003c/code\u003e - for message sources (publisher), the service object is a\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/eventbus/MessageConsumer.html\"\u003eMessageConsumer\u003c/a\u003e\u003c/code\u003e (the location is the address).\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/types/JDBCDataSource.html\"\u003eJDBCDataSource\u003c/a\u003e\u003c/code\u003e - for JDBC data sources, the service object is a\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/jdbc/JDBCClient.html\"\u003eJDBCClient\u003c/a\u003e\u003c/code\u003e (the configuration of the client is computed from the location, metadata and\nconsumer configuration).\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/types/RedisDataSource.html\"\u003eRedisDataSource\u003c/a\u003e\u003c/code\u003e - for Redis data sources, the service object is a\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/redis/RedisClient.html\"\u003eRedisClient\u003c/a\u003e\u003c/code\u003e (the configuration of the client is computed from the location, metadata and\nconsumer configuration).\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/types/MongoDataSource.html\"\u003eMongoDataSource\u003c/a\u003e\u003c/code\u003e - for Mongo data sources, the service object is a\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoClient.html\"\u003eMongoClient\u003c/a\u003e\u003c/code\u003e (the configuration of the client is computed from the location, metadata and\nconsumer configuration).\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThis section gives details about service types in general and describes how to use the default service types.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_services_with_no_type\"\u003e\u003ca class=\"anchor\" href=\"#_services_with_no_type\"\u003e\u003c/a\u003eServices with no type\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eSome records may have no type (\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/spi/ServiceType.html#UNKNOWN\"\u003eServiceType.UNKNOWN\u003c/a\u003e\u003c/code\u003e). It is not possible to\nretrieve a reference for these records, but you can build the connection details from the \u003ccode\u003elocation\u003c/code\u003e and\n\u003ccode\u003emetadata\u003c/code\u003e of the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/Record.html\"\u003eRecord\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eUsing these services does not fire service usage events.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_implementing_your_own_service_type\"\u003e\u003ca class=\"anchor\" href=\"#_implementing_your_own_service_type\"\u003e\u003c/a\u003eImplementing your own service type\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eYou can create your own service type by implementing the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/spi/ServiceType.html\"\u003eServiceType\u003c/a\u003e\u003c/code\u003e SPI:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"olist arabic\"\u003e\n\u003col class=\"arabic\"\u003e\n\u003cli\u003e\n\u003cp\u003e(optional) Create a public interface extending \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/spi/ServiceType.html\"\u003eServiceType\u003c/a\u003e\u003c/code\u003e. This interface is\nonly used to provide helper methods to ease the usage of your type such as \u003ccode\u003ecreateRecord\u003c/code\u003e methods, \u003ccode\u003egetX\u003c/code\u003e where \u003ccode\u003eX\u003c/code\u003e\nis the type of service object you retrieve and so on. Check \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/types/HttpEndpoint.html\"\u003eHttpEndpoint\u003c/a\u003e\u003c/code\u003e or\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/types/MessageSource.html\"\u003eMessageSource\u003c/a\u003e\u003c/code\u003e for example\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eCreate a class implementing \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/spi/ServiceType.html\"\u003eServiceType\u003c/a\u003e\u003c/code\u003e or the interface you created in\nstep 1. The type has a \u003ccode\u003ename\u003c/code\u003e, and a method to create the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/ServiceReference.html\"\u003eServiceReference\u003c/a\u003e\u003c/code\u003e for this\ntype. The name must match the \u003ccode\u003etype\u003c/code\u003e field of the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/Record.html\"\u003eRecord\u003c/a\u003e\u003c/code\u003e associated with your type.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eCreate a class extending \u003ccode\u003eio.vertx.ext.discovery.types.AbstractServiceReference\u003c/code\u003e. You can parameterize\nthe class with the type of service object your are going to return. You must implement\n\u003ccode\u003eAbstractServiceReference#retrieve()\u003c/code\u003e that creates the service object. This\nmethod is only called once. If your service object needs cleanup, also override\n\u003ccode\u003eAbstractServiceReference#onClose()\u003c/code\u003e.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eCreate a \u003ccode\u003eMETA-INF/services/io.vertx.servicediscovery.spi.ServiceType\u003c/code\u003e file that is packaged in your jar. In this\nfile, just indicate the fully qualified name of the class created at step 2.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eCreates a jar containing the service type interface (step 1), the implementation (step 2 and 3) and the\nservice descriptor file (step 4). Put this jar in the classpath of your application. Here you go, your service\ntype is now available.\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_http_endpoints\"\u003e\u003ca class=\"anchor\" href=\"#_http_endpoints\"\u003e\u003c/a\u003eHTTP endpoints\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eA HTTP endpoint represents a REST API or a service accessible using HTTP requests. The HTTP endpoint service\nobjects are \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpClient.html\"\u003eHttpClient\u003c/a\u003e\u003c/code\u003e configured with the host, port and ssl.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect3\"\u003e\n\u003ch4 id=\"_publishing_a_http_endpoint\"\u003e\u003ca class=\"anchor\" href=\"#_publishing_a_http_endpoint\"\u003e\u003c/a\u003ePublishing a HTTP endpoint\u003c/h4\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eTo publish a HTTP endpoint, you need a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/Record.html\"\u003eRecord\u003c/a\u003e\u003c/code\u003e. You can create the record using\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/types/HttpEndpoint.html#createRecord-java.lang.String-java.lang.String-int-java.lang.String-io.vertx.core.json.JsonObject-\"\u003eHttpEndpoint.createRecord\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe next snippet illustrates hot to create a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/Record.html\"\u003eRecord\u003c/a\u003e\u003c/code\u003e from\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/types/HttpEndpoint.html\"\u003eHttpEndpoint\u003c/a\u003e\u003c/code\u003e:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eRecord record1 = HttpEndpoint.createRecord(\n  \u003cspan class=\"hljs-string\"\u003e\u0026quot;some-http-service\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-comment\"\u003e// The service name\u003c/span\u003e\n  \u003cspan class=\"hljs-string\"\u003e\u0026quot;localhost\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-comment\"\u003e// The host\u003c/span\u003e\n  \u003cspan class=\"hljs-number\"\u003e8433\u003c/span\u003e, \u003cspan class=\"hljs-comment\"\u003e// the port\u003c/span\u003e\n  \u003cspan class=\"hljs-string\"\u003e\u0026quot;/api\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-comment\"\u003e// the root of the service\u003c/span\u003e\n);\n\ndiscovery.publish(record1, ar -\u0026gt; {\n  \u003cspan class=\"hljs-comment\"\u003e// ...\u003c/span\u003e\n});\n\nRecord record2 = HttpEndpoint.createRecord(\n  \u003cspan class=\"hljs-string\"\u003e\u0026quot;some-other-name\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-comment\"\u003e// the service name\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003etrue\u003c/span\u003e, \u003cspan class=\"hljs-comment\"\u003e// whether or not the service requires HTTPs\u003c/span\u003e\n  \u003cspan class=\"hljs-string\"\u003e\u0026quot;localhost\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-comment\"\u003e// The host\u003c/span\u003e\n  \u003cspan class=\"hljs-number\"\u003e8433\u003c/span\u003e, \u003cspan class=\"hljs-comment\"\u003e// the port\u003c/span\u003e\n  \u003cspan class=\"hljs-string\"\u003e\u0026quot;/api\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-comment\"\u003e// the root of the service\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;some-metadata\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;some value\u0026quot;\u003c/span\u003e)\n);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eWhen you run your service in a container or on the cloud, it may not know its public IP and public port, so the\npublication must be done by another entity having this info. Generally it\u0026#8217;s a bridge.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect3\"\u003e\n\u003ch4 id=\"_consuming_a_http_endpoint\"\u003e\u003ca class=\"anchor\" href=\"#_consuming_a_http_endpoint\"\u003e\u003c/a\u003eConsuming a HTTP endpoint\u003c/h4\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eOnce a HTTP endpoint is published, a consumer can retrieve it. The service object is a\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpClient.html\"\u003eHttpClient\u003c/a\u003e\u003c/code\u003e with a port and host configured:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003ediscovery.getRecord(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;name\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;some-http-service\u0026quot;\u003c/span\u003e), ar -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.succeeded() \u0026amp;\u0026amp; ar.result() != \u003cspan class=\"hljs-keyword\"\u003enull\u003c/span\u003e) {\n    \u003cspan class=\"hljs-comment\"\u003e// Retrieve the service reference\u003c/span\u003e\n    ServiceReference reference = discovery.getReference(ar.result());\n    \u003cspan class=\"hljs-comment\"\u003e// Retrieve the service object\u003c/span\u003e\n    HttpClient client = reference.getAs(HttpClient.class);\n\n    \u003cspan class=\"hljs-comment\"\u003e// You need to path the complete path\u003c/span\u003e\n    client.getNow(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/api/persons\u0026quot;\u003c/span\u003e, response -\u0026gt; {\n\n      \u003cspan class=\"hljs-comment\"\u003e// ...\u003c/span\u003e\n\n      \u003cspan class=\"hljs-comment\"\u003e// Dont\u0026#x27; forget to release the service\u003c/span\u003e\n      reference.release();\n\n    });\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eYou can also use the\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/types/HttpEndpoint.html#getClient-io.vertx.servicediscovery.ServiceDiscovery-io.vertx.core.json.JsonObject-io.vertx.core.Handler-\"\u003eHttpEndpoint.getClient\u003c/a\u003e\u003c/code\u003e\nmethod to combine lookup and service retrieval in one call:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eHttpEndpoint.getClient(discovery, \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;name\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;some-http-service\u0026quot;\u003c/span\u003e), ar -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.succeeded()) {\n    HttpClient client = ar.result();\n\n    \u003cspan class=\"hljs-comment\"\u003e// You need to path the complete path\u003c/span\u003e\n    client.getNow(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/api/persons\u0026quot;\u003c/span\u003e, response -\u0026gt; {\n\n      \u003cspan class=\"hljs-comment\"\u003e// ...\u003c/span\u003e\n\n      \u003cspan class=\"hljs-comment\"\u003e// Dont\u0026#x27; forget to release the service\u003c/span\u003e\n      ServiceDiscovery.releaseServiceObject(discovery, client);\n\n    });\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIn this second version, the service object is released using\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/ServiceDiscovery.html#releaseServiceObject-io.vertx.servicediscovery.ServiceDiscovery-java.lang.Object-\"\u003eServiceDiscovery.releaseServiceObject\u003c/a\u003e\u003c/code\u003e,\nso you don\u0026#8217;t need to keep the service reference.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eSince Vert.x 3.4.0, another client has been provided. This higher-level client, named \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/web/client/WebClient.html\"\u003eWebClient\u003c/a\u003e\u003c/code\u003e\ntends to be easier to use. You can retrieve a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/web/client/WebClient.html\"\u003eWebClient\u003c/a\u003e\u003c/code\u003e instances using:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003ediscovery.getRecord(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;name\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;some-http-service\u0026quot;\u003c/span\u003e), ar -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.succeeded() \u0026amp;\u0026amp; ar.result() != \u003cspan class=\"hljs-keyword\"\u003enull\u003c/span\u003e) {\n    \u003cspan class=\"hljs-comment\"\u003e// Retrieve the service reference\u003c/span\u003e\n    ServiceReference reference = discovery.getReference(ar.result());\n    \u003cspan class=\"hljs-comment\"\u003e// Retrieve the service object\u003c/span\u003e\n    WebClient client = reference.getAs(WebClient.class);\n\n    \u003cspan class=\"hljs-comment\"\u003e// You need to path the complete path\u003c/span\u003e\n    client.get(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/api/persons\u0026quot;\u003c/span\u003e).send(\n      response -\u0026gt; {\n\n        \u003cspan class=\"hljs-comment\"\u003e// ...\u003c/span\u003e\n\n        \u003cspan class=\"hljs-comment\"\u003e// Dont\u0026#x27; forget to release the service\u003c/span\u003e\n        reference.release();\n\n      });\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eAnd, if you prefer the approach using the service type:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eHttpEndpoint.getWebClient(discovery, \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;name\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;some-http-service\u0026quot;\u003c/span\u003e), ar -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.succeeded()) {\n    WebClient client = ar.result();\n\n    \u003cspan class=\"hljs-comment\"\u003e// You need to path the complete path\u003c/span\u003e\n    client.get(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/api/persons\u0026quot;\u003c/span\u003e)\n      .send(response -\u0026gt; {\n\n        \u003cspan class=\"hljs-comment\"\u003e// ...\u003c/span\u003e\n\n        \u003cspan class=\"hljs-comment\"\u003e// Dont\u0026#x27; forget to release the service\u003c/span\u003e\n        ServiceDiscovery.releaseServiceObject(discovery, client);\n\n      });\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_event_bus_services\"\u003e\u003ca class=\"anchor\" href=\"#_event_bus_services\"\u003e\u003c/a\u003eEvent bus services\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eEvent bus services are service proxies. They implement async-RPC services on top of the event bus. When retrieving\na service object from an event bus service, you get a service proxy of the right type. You can access helper\nmethods from \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/types/EventBusService.html\"\u003eEventBusService\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eNotice that service proxies (service implementations and service interfaces) are developed in Java.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect3\"\u003e\n\u003ch4 id=\"_publishing_an_event_bus_service\"\u003e\u003ca class=\"anchor\" href=\"#_publishing_an_event_bus_service\"\u003e\u003c/a\u003ePublishing an event bus service\u003c/h4\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eTo publish an event bus service, you need to create a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/Record.html\"\u003eRecord\u003c/a\u003e\u003c/code\u003e:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eRecord record = EventBusService.createRecord(\n    \u003cspan class=\"hljs-string\"\u003e\u0026quot;some-eventbus-service\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-comment\"\u003e// The service name\u003c/span\u003e\n    \u003cspan class=\"hljs-string\"\u003e\u0026quot;address\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-comment\"\u003e// the service address,\u003c/span\u003e\n    \u003cspan class=\"hljs-string\"\u003e\u0026quot;examples.MyService\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-comment\"\u003e// the service interface as string\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject()\n        .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;some-metadata\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;some value\u0026quot;\u003c/span\u003e)\n);\n\ndiscovery.publish(record, ar -\u0026gt; {\n  \u003cspan class=\"hljs-comment\"\u003e// ...\u003c/span\u003e\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eYou can also pass the service interface as class:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eRecord record = EventBusService.createRecord(\n\u003cspan class=\"hljs-string\"\u003e\u0026quot;some-eventbus-service\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-comment\"\u003e// The service name\u003c/span\u003e\n\u003cspan class=\"hljs-string\"\u003e\u0026quot;address\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-comment\"\u003e// the service address,\u003c/span\u003e\nMyService.class \u003cspan class=\"hljs-comment\"\u003e// the service interface\u003c/span\u003e\n);\n\ndiscovery.publish(record, ar -\u0026gt; {\n\u003cspan class=\"hljs-comment\"\u003e// ...\u003c/span\u003e\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect3\"\u003e\n\u003ch4 id=\"_consuming_an_event_bus_service\"\u003e\u003ca class=\"anchor\" href=\"#_consuming_an_event_bus_service\"\u003e\u003c/a\u003eConsuming an event bus service\u003c/h4\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eTo consume an event bus service you can either retrieve the record and then get the reference, or use the\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/types/EventBusService.html\"\u003eEventBusService\u003c/a\u003e\u003c/code\u003e interface that combines the two operations in one call.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eWhen using the reference, you would do something like:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003ediscovery.getRecord(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;name\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;some-eventbus-service\u0026quot;\u003c/span\u003e), ar -\u0026gt; {\n\u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.succeeded() \u0026amp;\u0026amp; ar.result() != \u003cspan class=\"hljs-keyword\"\u003enull\u003c/span\u003e) {\n\u003cspan class=\"hljs-comment\"\u003e// Retrieve the service reference\u003c/span\u003e\nServiceReference reference = discovery.getReference(ar.result());\n\u003cspan class=\"hljs-comment\"\u003e// Retrieve the service object\u003c/span\u003e\nMyService service = reference.getAs(MyService.class);\n\n\u003cspan class=\"hljs-comment\"\u003e// Dont\u0026#x27; forget to release the service\u003c/span\u003e\nreference.release();\n}\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eWith the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/types/EventBusService.html\"\u003eEventBusService\u003c/a\u003e\u003c/code\u003e class, you can get the proxy as follows:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eEventBusService.getProxy(discovery, MyService.class, ar -\u0026gt; {\n\u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.succeeded()) {\nMyService service = ar.result();\n\n\u003cspan class=\"hljs-comment\"\u003e// Dont\u0026#x27; forget to release the service\u003c/span\u003e\nServiceDiscovery.releaseServiceObject(discovery, service);\n}\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_message_source\"\u003e\u003ca class=\"anchor\" href=\"#_message_source\"\u003e\u003c/a\u003eMessage source\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eA message source is a component sending messages on the event bus on a specific address. Message source clients are\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/eventbus/MessageConsumer.html\"\u003eMessageConsumer\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe \u003cem\u003elocation\u003c/em\u003e or a message source service is the event bus address on which messages are sent.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect3\"\u003e\n\u003ch4 id=\"_publishing_a_message_source\"\u003e\u003ca class=\"anchor\" href=\"#_publishing_a_message_source\"\u003e\u003c/a\u003ePublishing a message source\u003c/h4\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eAs for the other service types, publishing a message source is a 2-step process:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"olist arabic\"\u003e\n\u003col class=\"arabic\"\u003e\n\u003cli\u003e\n\u003cp\u003ecreate a record, using \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/types/MessageSource.html\"\u003eMessageSource\u003c/a\u003e\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003epublish the record\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eRecord record = MessageSource.createRecord(\n    \u003cspan class=\"hljs-string\"\u003e\u0026quot;some-message-source-service\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-comment\"\u003e// The service name\u003c/span\u003e\n    \u003cspan class=\"hljs-string\"\u003e\u0026quot;some-address\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-comment\"\u003e// The event bus address\u003c/span\u003e\n);\n\ndiscovery.publish(record, ar -\u0026gt; {\n  \u003cspan class=\"hljs-comment\"\u003e// ...\u003c/span\u003e\n});\n\nrecord = MessageSource.createRecord(\n    \u003cspan class=\"hljs-string\"\u003e\u0026quot;some-other-message-source-service\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-comment\"\u003e// The service name\u003c/span\u003e\n    \u003cspan class=\"hljs-string\"\u003e\u0026quot;some-address\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-comment\"\u003e// The event bus address\u003c/span\u003e\n    \u003cspan class=\"hljs-string\"\u003e\u0026quot;examples.MyData\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-comment\"\u003e// The payload type\u003c/span\u003e\n);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIn the second record, the type of payload is also indicated. This information is optional.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIn java, you can use \u003ccode\u003e\u003ca href=\"../../apidocs/java/lang/Class.html\"\u003eClass\u003c/a\u003e\u003c/code\u003e parameters:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eRecord record1 = MessageSource.createRecord(\n\u003cspan class=\"hljs-string\"\u003e\u0026quot;some-message-source-service\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-comment\"\u003e// The service name\u003c/span\u003e\n\u003cspan class=\"hljs-string\"\u003e\u0026quot;some-address\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-comment\"\u003e// The event bus address\u003c/span\u003e\nJsonObject.class \u003cspan class=\"hljs-comment\"\u003e// The message payload type\u003c/span\u003e\n);\n\nRecord record2 = MessageSource.createRecord(\n\u003cspan class=\"hljs-string\"\u003e\u0026quot;some-other-message-source-service\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-comment\"\u003e// The service name\u003c/span\u003e\n\u003cspan class=\"hljs-string\"\u003e\u0026quot;some-address\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-comment\"\u003e// The event bus address\u003c/span\u003e\nJsonObject.class, \u003cspan class=\"hljs-comment\"\u003e// The message payload type\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;some-metadata\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;some value\u0026quot;\u003c/span\u003e)\n);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect3\"\u003e\n\u003ch4 id=\"_consuming_a_message_source\"\u003e\u003ca class=\"anchor\" href=\"#_consuming_a_message_source\"\u003e\u003c/a\u003eConsuming a message source\u003c/h4\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eOn the consumer side, you can retrieve the record and the reference, or use the\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/types/MessageSource.html\"\u003eMessageSource\u003c/a\u003e\u003c/code\u003e class to retrieve the service is one call.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eWith the first approach, the code is the following:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003ediscovery.getRecord(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;name\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;some-message-source-service\u0026quot;\u003c/span\u003e), ar -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.succeeded() \u0026amp;\u0026amp; ar.result() != \u003cspan class=\"hljs-keyword\"\u003enull\u003c/span\u003e) {\n    \u003cspan class=\"hljs-comment\"\u003e// Retrieve the service reference\u003c/span\u003e\n    ServiceReference reference = discovery.getReference(ar.result());\n    \u003cspan class=\"hljs-comment\"\u003e// Retrieve the service object\u003c/span\u003e\n    MessageConsumer\u0026lt;JsonObject\u0026gt; consumer = reference.getAs(MessageConsumer.class);\n\n    \u003cspan class=\"hljs-comment\"\u003e// Attach a message handler on it\u003c/span\u003e\n    consumer.handler(message -\u0026gt; {\n      \u003cspan class=\"hljs-comment\"\u003e// message handler\u003c/span\u003e\n      JsonObject payload = message.body();\n    });\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eWhen, using \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/types/MessageSource.html\"\u003eMessageSource\u003c/a\u003e\u003c/code\u003e, it becomes:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eMessageSource.\u0026lt;JsonObject\u0026gt;getConsumer(discovery, \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;name\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;some-message-source-service\u0026quot;\u003c/span\u003e), ar -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.succeeded()) {\n    MessageConsumer\u0026lt;JsonObject\u0026gt; consumer = ar.result();\n\n    \u003cspan class=\"hljs-comment\"\u003e// Attach a message handler on it\u003c/span\u003e\n    consumer.handler(message -\u0026gt; {\n      \u003cspan class=\"hljs-comment\"\u003e// message handler\u003c/span\u003e\n      JsonObject payload = message.body();\n    });\n    \u003cspan class=\"hljs-comment\"\u003e// ...\u003c/span\u003e\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_jdbc_data_source\"\u003e\u003ca class=\"anchor\" href=\"#_jdbc_data_source\"\u003e\u003c/a\u003eJDBC Data source\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eData sources represents databases or data stores. JDBC data sources are a specialization for databases accessible\nusing a JDBC driver. The client of a JDBC data source service is a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/jdbc/JDBCClient.html\"\u003eJDBCClient\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect3\"\u003e\n\u003ch4 id=\"_publishing_a_jdbc_service\"\u003e\u003ca class=\"anchor\" href=\"#_publishing_a_jdbc_service\"\u003e\u003c/a\u003ePublishing a JDBC service\u003c/h4\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eAs for the other service types, publishing a JDBC data source is a 2-step process:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"olist arabic\"\u003e\n\u003col class=\"arabic\"\u003e\n\u003cli\u003e\n\u003cp\u003ecreate a record, using \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/types/JDBCDataSource.html\"\u003eJDBCDataSource\u003c/a\u003e\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003epublish the record\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eRecord record = JDBCDataSource.createRecord(\n    \u003cspan class=\"hljs-string\"\u003e\u0026quot;some-data-source-service\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-comment\"\u003e// The service name\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;url\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;some jdbc url\u0026quot;\u003c/span\u003e), \u003cspan class=\"hljs-comment\"\u003e// The location\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;some-metadata\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;some-value\u0026quot;\u003c/span\u003e) \u003cspan class=\"hljs-comment\"\u003e// Some metadata\u003c/span\u003e\n);\n\ndiscovery.publish(record, ar -\u0026gt; {\n  \u003cspan class=\"hljs-comment\"\u003e// ...\u003c/span\u003e\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eAs JDBC data sources can represent a high variety of databases, and their access is often different, the record is\nrather unstructured. The \u003ccode\u003elocation\u003c/code\u003e is a simple JSON object that should provide the fields to access the data\nsource (JDBC url, username\u0026#8230;\u0026#8203;). The set of fields may depend on the database but also on the connection pool used\nin front.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect3\"\u003e\n\u003ch4 id=\"_consuming_a_jdbc_service\"\u003e\u003ca class=\"anchor\" href=\"#_consuming_a_jdbc_service\"\u003e\u003c/a\u003eConsuming a JDBC service\u003c/h4\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eAs stated in the previous section, how to access a data source depends on the data source itself. To build the\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/jdbc/JDBCClient.html\"\u003eJDBCClient\u003c/a\u003e\u003c/code\u003e, you can merge configuration: the record location, the metadata and a json object provided by\nthe consumer:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003ediscovery.getRecord(\n    \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;name\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;some-data-source-service\u0026quot;\u003c/span\u003e),\n    ar -\u0026gt; {\n      \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.succeeded() \u0026amp;\u0026amp; ar.result() != \u003cspan class=\"hljs-keyword\"\u003enull\u003c/span\u003e) {\n        \u003cspan class=\"hljs-comment\"\u003e// Retrieve the service reference\u003c/span\u003e\n        ServiceReference reference = discovery.getReferenceWithConfiguration(\n            ar.result(), \u003cspan class=\"hljs-comment\"\u003e// The record\u003c/span\u003e\n            \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;username\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;clement\u0026quot;\u003c/span\u003e).put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;password\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;*****\u0026quot;\u003c/span\u003e)); \u003cspan class=\"hljs-comment\"\u003e// Some additional metadata\u003c/span\u003e\n\n        \u003cspan class=\"hljs-comment\"\u003e// Retrieve the service object\u003c/span\u003e\n        JDBCClient client = reference.getAs(JDBCClient.class);\n\n        \u003cspan class=\"hljs-comment\"\u003e// ...\u003c/span\u003e\n\n        \u003cspan class=\"hljs-comment\"\u003e// when done\u003c/span\u003e\n        reference.release();\n      }\n    });\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eYou can also use the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/jdbc/JDBCClient.html\"\u003eJDBCClient\u003c/a\u003e\u003c/code\u003e class to the lookup and retrieval in one call:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eJDBCDataSource.\u0026lt;JsonObject\u0026gt;getJDBCClient(discovery,\n    \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;name\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;some-data-source-service\u0026quot;\u003c/span\u003e),\n    \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;username\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;clement\u0026quot;\u003c/span\u003e).put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;password\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;*****\u0026quot;\u003c/span\u003e), \u003cspan class=\"hljs-comment\"\u003e// Some additional metadata\u003c/span\u003e\n    ar -\u0026gt; {\n      \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.succeeded()) {\n        JDBCClient client = ar.result();\n\n        \u003cspan class=\"hljs-comment\"\u003e// ...\u003c/span\u003e\n\n        \u003cspan class=\"hljs-comment\"\u003e// Dont\u0026#x27; forget to release the service\u003c/span\u003e\n        ServiceDiscovery.releaseServiceObject(discovery, client);\n\n      }\n    });\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_redis_data_source\"\u003e\u003ca class=\"anchor\" href=\"#_redis_data_source\"\u003e\u003c/a\u003eRedis Data source\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eRedis data sources are a specialization for Redis persistence databases.\nThe client of a Redis data source service is a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/redis/RedisClient.html\"\u003eRedisClient\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect3\"\u003e\n\u003ch4 id=\"_publishing_a_redis_service\"\u003e\u003ca class=\"anchor\" href=\"#_publishing_a_redis_service\"\u003e\u003c/a\u003ePublishing a Redis service\u003c/h4\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003ePublishing a Redis data source is a 2-step process:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"olist arabic\"\u003e\n\u003col class=\"arabic\"\u003e\n\u003cli\u003e\n\u003cp\u003ecreate a record, using \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/types/RedisDataSource.html\"\u003eRedisDataSource\u003c/a\u003e\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003epublish the record\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eRecord record = RedisDataSource.createRecord(\n  \u003cspan class=\"hljs-string\"\u003e\u0026quot;some-redis-data-source-service\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-comment\"\u003e// The service name\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;url\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;localhost\u0026quot;\u003c/span\u003e), \u003cspan class=\"hljs-comment\"\u003e// The location\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;some-metadata\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;some-value\u0026quot;\u003c/span\u003e) \u003cspan class=\"hljs-comment\"\u003e// Some metadata\u003c/span\u003e\n);\n\ndiscovery.publish(record, ar -\u0026gt; {\n  \u003cspan class=\"hljs-comment\"\u003e// ...\u003c/span\u003e\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe \u003ccode\u003elocation\u003c/code\u003e is a simple JSON object that should provide the fields to access the Redis data\nsource (url, port\u0026#8230;\u0026#8203;).\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect3\"\u003e\n\u003ch4 id=\"_consuming_a_redis_service\"\u003e\u003ca class=\"anchor\" href=\"#_consuming_a_redis_service\"\u003e\u003c/a\u003eConsuming a Redis service\u003c/h4\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eAs stated in the previous section, how to access a data source depends on the data source itself. To build the\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/redis/RedisClient.html\"\u003eRedisClient\u003c/a\u003e\u003c/code\u003e, you can merge configuration: the record location, the metadata and a json object provided by\nthe consumer:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003ediscovery.getRecord(\n  \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;name\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;some-redis-data-source-service\u0026quot;\u003c/span\u003e), ar -\u0026gt; {\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.succeeded() \u0026amp;\u0026amp; ar.result() != \u003cspan class=\"hljs-keyword\"\u003enull\u003c/span\u003e) {\n      \u003cspan class=\"hljs-comment\"\u003e// Retrieve the service reference\u003c/span\u003e\n      ServiceReference reference = discovery.getReference(ar.result());\n\n      \u003cspan class=\"hljs-comment\"\u003e// Retrieve the service instance\u003c/span\u003e\n      RedisClient client = reference.getAs(RedisClient.class);\n\n      \u003cspan class=\"hljs-comment\"\u003e// ...\u003c/span\u003e\n\n      \u003cspan class=\"hljs-comment\"\u003e// when done\u003c/span\u003e\n      reference.release();\n    }\n  });\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eYou can also use the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/types/RedisDataSource.html\"\u003eRedisDataSource\u003c/a\u003e\u003c/code\u003e class to the lookup and retrieval in one call:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eRedisDataSource.getRedisClient(discovery,\n  \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;name\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;some-redis-data-source-service\u0026quot;\u003c/span\u003e),\n  ar -\u0026gt; {\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.succeeded()) {\n      RedisClient client = ar.result();\n\n      \u003cspan class=\"hljs-comment\"\u003e// ...\u003c/span\u003e\n\n      \u003cspan class=\"hljs-comment\"\u003e// Dont\u0026#x27; forget to release the service\u003c/span\u003e\n      ServiceDiscovery.releaseServiceObject(discovery, client);\n\n    }\n  });\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_mongo_data_source\"\u003e\u003ca class=\"anchor\" href=\"#_mongo_data_source\"\u003e\u003c/a\u003eMongo Data source\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eMongo data sources are a specialization for MongoDB databases.\nThe client of a Mongo data source service is a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoClient.html\"\u003eMongoClient\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect3\"\u003e\n\u003ch4 id=\"_publishing_a_mongo_service\"\u003e\u003ca class=\"anchor\" href=\"#_publishing_a_mongo_service\"\u003e\u003c/a\u003ePublishing a Mongo service\u003c/h4\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003ePublishing a Mongo data source is a 2-step process:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"olist arabic\"\u003e\n\u003col class=\"arabic\"\u003e\n\u003cli\u003e\n\u003cp\u003ecreate a record, using \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/types/MongoDataSource.html\"\u003eMongoDataSource\u003c/a\u003e\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003epublish the record\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eRecord record = MongoDataSource.createRecord(\n  \u003cspan class=\"hljs-string\"\u003e\u0026quot;some-data-source-service\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-comment\"\u003e// The service name\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;connection_string\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;some mongo connection\u0026quot;\u003c/span\u003e), \u003cspan class=\"hljs-comment\"\u003e// The location\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;some-metadata\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;some-value\u0026quot;\u003c/span\u003e) \u003cspan class=\"hljs-comment\"\u003e// Some metadata\u003c/span\u003e\n);\n\ndiscovery.publish(record, ar -\u0026gt; {\n  \u003cspan class=\"hljs-comment\"\u003e// ...\u003c/span\u003e\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe \u003ccode\u003elocation\u003c/code\u003e is a simple JSON object that should provide the fields to access the Redis data\nsource (url, port\u0026#8230;\u0026#8203;).\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect3\"\u003e\n\u003ch4 id=\"_consuming_a_mongo_service\"\u003e\u003ca class=\"anchor\" href=\"#_consuming_a_mongo_service\"\u003e\u003c/a\u003eConsuming a Mongo service\u003c/h4\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eAs stated in the previous section, how to access a data source depends on the data source itself. To build the\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoClient.html\"\u003eMongoClient\u003c/a\u003e\u003c/code\u003e, you can merge configuration: the record location, the metadata and a json object\nprovided by the consumer:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003ediscovery.getRecord(\n  \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;name\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;some-data-source-service\u0026quot;\u003c/span\u003e),\n  ar -\u0026gt; {\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.succeeded() \u0026amp;\u0026amp; ar.result() != \u003cspan class=\"hljs-keyword\"\u003enull\u003c/span\u003e) {\n      \u003cspan class=\"hljs-comment\"\u003e// Retrieve the service reference\u003c/span\u003e\n      ServiceReference reference = discovery.getReferenceWithConfiguration(\n        ar.result(), \u003cspan class=\"hljs-comment\"\u003e// The record\u003c/span\u003e\n        \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;username\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;clement\u0026quot;\u003c/span\u003e).put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;password\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;*****\u0026quot;\u003c/span\u003e)); \u003cspan class=\"hljs-comment\"\u003e// Some additional metadata\u003c/span\u003e\n\n      \u003cspan class=\"hljs-comment\"\u003e// Retrieve the service object\u003c/span\u003e\n      MongoClient client = reference.get();\n\n      \u003cspan class=\"hljs-comment\"\u003e// ...\u003c/span\u003e\n\n      \u003cspan class=\"hljs-comment\"\u003e// when done\u003c/span\u003e\n      reference.release();\n    }\n  });\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eYou can also use the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/types/MongoDataSource.html\"\u003eMongoDataSource\u003c/a\u003e\u003c/code\u003e class to the lookup and retrieval in one call:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eMongoDataSource.\u0026lt;JsonObject\u0026gt;getMongoClient(discovery,\n  \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;name\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;some-data-source-service\u0026quot;\u003c/span\u003e),\n  \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;username\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;clement\u0026quot;\u003c/span\u003e).put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;password\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;*****\u0026quot;\u003c/span\u003e), \u003cspan class=\"hljs-comment\"\u003e// Some additional metadata\u003c/span\u003e\n  ar -\u0026gt; {\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (ar.succeeded()) {\n      MongoClient client = ar.result();\n\n      \u003cspan class=\"hljs-comment\"\u003e// ...\u003c/span\u003e\n\n      \u003cspan class=\"hljs-comment\"\u003e// Dont\u0026#x27; forget to release the service\u003c/span\u003e\n      ServiceDiscovery.releaseServiceObject(discovery, client);\n\n    }\n  });\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_listening_for_service_arrivals_and_departures\"\u003e\u003ca class=\"anchor\" href=\"#_listening_for_service_arrivals_and_departures\"\u003e\u003c/a\u003eListening for service arrivals and departures\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eEvery time a provider is published or removed, an event is published on the \u003cem\u003evertx.discovery.announce\u003c/em\u003e address.\nThis address is configurable from the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/ServiceDiscoveryOptions.html\"\u003eServiceDiscoveryOptions\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe received record has a \u003ccode\u003estatus\u003c/code\u003e field indicating the new state of the record:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003eUP\u003c/code\u003e : the service is available, you can start using it\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003eDOWN\u003c/code\u003e : the service is not available anymore, you should not use it anymore\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003eOUT_OF_SERVICE\u003c/code\u003e : the service is not running, you should not use it anymore, but it may come back later.\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_listening_for_service_usage\"\u003e\u003ca class=\"anchor\" href=\"#_listening_for_service_usage\"\u003e\u003c/a\u003eListening for service usage\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eEvery time a service reference is retrieved (\u003ccode\u003ebind\u003c/code\u003e) or released (\u003ccode\u003erelease\u003c/code\u003e), an event is published on the \u003cem\u003evertx\n.discovery.usage\u003c/em\u003e address. This address is configurable from the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/ServiceDiscoveryOptions.html\"\u003eServiceDiscoveryOptions\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIt lets you listen for service usage and map the service bindings.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe received message is a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/json/JsonObject.html\"\u003eJsonObject\u003c/a\u003e\u003c/code\u003e containing:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003ethe record in the \u003ccode\u003erecord\u003c/code\u003e field\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003ethe type of event in the \u003ccode\u003etype\u003c/code\u003e field. It\u0026#8217;s either \u003ccode\u003ebind\u003c/code\u003e or \u003ccode\u003erelease\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003ethe id of the service discovery (either its name or the node id) in the \u003ccode\u003eid\u003c/code\u003e field\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThis \u003ccode\u003eid\u003c/code\u003e is configurable from the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/ServiceDiscoveryOptions.html\"\u003eServiceDiscoveryOptions\u003c/a\u003e\u003c/code\u003e. By default it\u0026#8217;s \"localhost\" on\nsingle node configuration and the id of the node in clustered mode.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eYou can disable the service usage support by setting the usage address to \u003ccode\u003enull\u003c/code\u003e with\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/ServiceDiscoveryOptions.html#setUsageAddress-java.lang.String-\"\u003esetUsageAddress\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_service_discovery_bridges\"\u003e\u003ca class=\"anchor\" href=\"#_service_discovery_bridges\"\u003e\u003c/a\u003eService discovery bridges\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eBridges let you import and export services from / to other discovery mechanism such as Docker, Kubernetes, Consul\u0026#8230;\u0026#8203;\nEach bridge decides how the services are imported and exported. It does not have to be bi-directional.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eYou can provide your own bridge by implementing the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/spi/ServiceImporter.html\"\u003eServiceImporter\u003c/a\u003e\u003c/code\u003e interface and\nregister it using\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/ServiceDiscovery.html#registerServiceImporter-io.vertx.servicediscovery.spi.ServiceImporter-io.vertx.core.json.JsonObject-\"\u003eregisterServiceImporter\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe second parameter can provide an optional configuration for the bridge.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eWhen the bridge is registered the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/spi/ServiceImporter.html#start-io.vertx.core.Vertx-io.vertx.servicediscovery.spi.ServicePublisher-io.vertx.core.json.JsonObject-io.vertx.core.Promise-\"\u003estart\u003c/a\u003e\u003c/code\u003e method is called.\nIt lets you configure the bridge. When the bridge is configured, ready and has imported / exported the initial services, it must complete the given \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/Future.html\"\u003eFuture\u003c/a\u003e\u003c/code\u003e.\nIf the bridge starts method is blocking, it must use an \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/Vertx.html#executeBlocking-io.vertx.core.Handler-boolean-io.vertx.core.Handler-\"\u003eexecuteBlocking\u003c/a\u003e\u003c/code\u003e construct, and complete the given future object.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eWhen the service discovery is stopped, the bridge is stopped.\nThe \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/spi/ServiceImporter.html#close-io.vertx.core.Handler-\"\u003eclose\u003c/a\u003e\u003c/code\u003e method is called that provides the opportunity to cleanup resources, removed imported / exported services\u0026#8230;\u0026#8203;\nThis method must complete the given \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/Future.html\"\u003eFuture\u003c/a\u003e\u003c/code\u003e to notify the caller of the completion.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eNotice than in a cluster, only one member needs to register the bridge as the records are accessible by all members.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_additional_bridges\"\u003e\u003ca class=\"anchor\" href=\"#_additional_bridges\"\u003e\u003c/a\u003eAdditional bridges\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIn addition of the bridges supported by this library, Vert.x Service Discovery provides additional\nbridges you can use in your application.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_consul_bridge\"\u003e\u003ca class=\"anchor\" href=\"#_consul_bridge\"\u003e\u003c/a\u003eConsul bridge\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThis discovery bridge imports services from \u003ca href=\"http://consul.io\"\u003eConsul\u003c/a\u003e into the Vert.x service discovery. The bridge\nconnects to a Consul agent (server) and periodically scan for services:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003enew services are imported\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eservices in maintenance mode or that has been removed from consul are removed\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThis bridge uses the HTTP API for Consul. It does not export to Consul and does not support service modification.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe service type is deduced from \u003ccode\u003etags\u003c/code\u003e. If a \u003ccode\u003etag\u003c/code\u003e matches a known service type, this service type will be used.\nIf not, the service is imported as \u003ccode\u003eunknown\u003c/code\u003e. Only \u003ccode\u003ehttp-endpoint\u003c/code\u003e is supported for now.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect3\"\u003e\n\u003ch4 id=\"_using_the_bridge\"\u003e\u003ca class=\"anchor\" href=\"#_using_the_bridge\"\u003e\u003c/a\u003eUsing the bridge\u003c/h4\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eTo use this Vert.x discovery bridge, add the following dependency to the \u003cem\u003edependencies\u003c/em\u003e section of your build\ndescriptor:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eMaven (in your \u003ccode\u003epom.xml\u003c/code\u003e):\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-xml\" data-lang=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\n \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003eio.vertx\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003evertx-service-discovery-bridge-consul\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e3.9.3\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eGradle (in your \u003ccode\u003ebuild.gradle\u003c/code\u003e file):\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-groovy\" data-lang=\"groovy\"\u003ecompile \u003cspan class=\"hljs-string\"\u003e\u0026#x27;io.vertx:vertx-service-discovery-bridge-consul:3.9.3\u0026#x27;\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThen, when creating the service discovery registers this bridge as follows:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eServiceDiscovery.create(vertx)\n    .registerServiceImporter(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e ConsulServiceImporter(),\n        \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject()\n            .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;host\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;localhost\u0026quot;\u003c/span\u003e)\n            .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;port\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e8500\u003c/span\u003e)\n            .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;scan-period\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e2000\u003c/span\u003e));\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eYou can configure the:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eagent host using the \u003ccode\u003ehost\u003c/code\u003e property, it defaults to \u003ccode\u003elocalhost\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eagent port using the \u003ccode\u003eport\u003c/code\u003e property, it defaults to 8500\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eacl token using the \u003ccode\u003eacl_token\u003c/code\u003e property, it defaults to null\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003escan period using the \u003ccode\u003escan-period\u003c/code\u003e property. The time is set in ms, and is 2000 ms by default\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_kubernetes_bridge\"\u003e\u003ca class=\"anchor\" href=\"#_kubernetes_bridge\"\u003e\u003c/a\u003eKubernetes bridge\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThis discovery bridge imports services from Kubernetes (or Openshift v3) into the Vert.x service discovery.\nKubernetes services are mapped to \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/Record.html\"\u003eRecord\u003c/a\u003e\u003c/code\u003e. This bridge only\nsupports the importation of services from kubernetes in vert.x (and not the opposite).\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/Record.html\"\u003eRecord\u003c/a\u003e\u003c/code\u003e are created from Kubernetes Service. The service type is deduced from the \u003ccode\u003eservice-type\u003c/code\u003e label or from the port exposed by the service.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect3\"\u003e\n\u003ch4 id=\"_using_the_bridge_2\"\u003e\u003ca class=\"anchor\" href=\"#_using_the_bridge_2\"\u003e\u003c/a\u003eUsing the bridge\u003c/h4\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eTo use this Vert.x discovery bridge, add the following dependency to the \u003cem\u003edependencies\u003c/em\u003e section of your build\ndescriptor:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eMaven (in your \u003ccode\u003epom.xml\u003c/code\u003e):\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-xml\" data-lang=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\n \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003eio.vertx\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003evertx-service-discovery-bridge-kubernetes\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e3.9.3\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eGradle (in your \u003ccode\u003ebuild.gradle\u003c/code\u003e file):\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-groovy\" data-lang=\"groovy\"\u003ecompile \u003cspan class=\"hljs-string\"\u003e\u0026#x27;io.vertx:vertx-service-discovery-bridge-kubernetes:3.9.3\u0026#x27;\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect3\"\u003e\n\u003ch4 id=\"_configuring_the_bridge\"\u003e\u003ca class=\"anchor\" href=\"#_configuring_the_bridge\"\u003e\u003c/a\u003eConfiguring the bridge\u003c/h4\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe bridge is configured using:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003ethe oauth token (using the content of \u003ccode\u003e/var/run/secrets/kubernetes.io/serviceaccount/token\u003c/code\u003e by default)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003ethe namespace in which the service are searched (defaults to \u003ccode\u003edefault\u003c/code\u003e).\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eBe aware that the application must have access to Kubernetes and must be able to read the chosen namespace.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect3\"\u003e\n\u003ch4 id=\"_the_service_to_record_mapping\"\u003e\u003ca class=\"anchor\" href=\"#_the_service_to_record_mapping\"\u003e\u003c/a\u003eThe Service to Record mapping\u003c/h4\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe record is created as follows:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003ethe service type is deduced from the \u003ccode\u003eservice.type\u003c/code\u003e label. If this label is not set the service type is set to\n\u003ccode\u003eunknown\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003ethe record\u0026#8217;s name is the service\u0026#8217;s name\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003ethe labels of the service are mapped to metadata\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003ein addition are added: \u003ccode\u003ekubernetes.uuid\u003c/code\u003e, \u003ccode\u003ekubernetes.namespace\u003c/code\u003e, \u003ccode\u003ekubernetes.name\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003ethe location is deduced from the*first** port of the service\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eFor HTTP endpoints, the \u003ccode\u003essl\u003c/code\u003e (\u003ccode\u003ehttps\u003c/code\u003e) attribute is set to \u003ccode\u003etrue\u003c/code\u003e if the service has the \u003ccode\u003essl\u003c/code\u003e label set to \u003ccode\u003etrue\u003c/code\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect3\"\u003e\n\u003ch4 id=\"_dynamics\"\u003e\u003ca class=\"anchor\" href=\"#_dynamics\"\u003e\u003c/a\u003eDynamics\u003c/h4\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe bridge imports all services on \u003ccode\u003estart\u003c/code\u003e and removes them on \u003ccode\u003estop\u003c/code\u003e. In between it watches the Kubernetes services and add the new ones and removes the deleted ones.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect3\"\u003e\n\u003ch4 id=\"_supported_types\"\u003e\u003ca class=\"anchor\" href=\"#_supported_types\"\u003e\u003c/a\u003eSupported types\u003c/h4\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe bridge uses the \u003ccode\u003eservice-type\u003c/code\u003e label to induce the type. In addition it checks the port of the service. Are supported:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eports 80, 443 and from 8080 to 9000: HTTP endpoint\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eports 5432 and 5433: JDBC data source (PostGreSQL)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eports 3306 and 13306: JDBC data source (MySQL)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eport 6379: Redis data source\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eports 27017, 27018 and 27019: MongoDB data source\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIf present, the \u003ccode\u003eservice-type\u003c/code\u003e overrides the port-based deduction.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eUnresolved directive in index.adoc - include::zookeeper-bridge.adoc[]\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_docker_links_bridge\"\u003e\u003ca class=\"anchor\" href=\"#_docker_links_bridge\"\u003e\u003c/a\u003eDocker Links bridge\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThis discovery bridge imports services from Docker Links into the Vert.x service discovery. When you link a Docker\ncontainer to another Docker container, Docker injects a set of environment variables. This bridge analyzes these\nenvironment variables and imports service record for each link. The service type is deduced from the \u003ccode\u003eservice.type\u003c/code\u003e\nlabel. If not set, the service is imported as \u003ccode\u003eunknown\u003c/code\u003e. Only \u003ccode\u003ehttp-endpoint\u003c/code\u003e are supported for now.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eAs the links are created when the container starts, the imported records are created when the bridge starts and\ndo not change afterwards.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect3\"\u003e\n\u003ch4 id=\"_using_the_bridge_3\"\u003e\u003ca class=\"anchor\" href=\"#_using_the_bridge_3\"\u003e\u003c/a\u003eUsing the bridge\u003c/h4\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eTo use this Vert.x discovery bridge, add the following dependency to the \u003cem\u003edependencies\u003c/em\u003e section of your build\ndescriptor:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eMaven (in your \u003ccode\u003epom.xml\u003c/code\u003e):\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-xml\" data-lang=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\n \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003eio.vertx\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003evertx-service-discovery-bridge-docker\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e3.9.3\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eGradle (in your \u003ccode\u003ebuild.gradle\u003c/code\u003e file):\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-groovy\" data-lang=\"groovy\"\u003ecompile \u003cspan class=\"hljs-string\"\u003e\u0026#x27;io.vertx:vertx-service-discovery-bridge-docker:3.9.3\u0026#x27;\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThen, when creating the service discovery, registers this bridge as follows:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eServiceDiscovery.create(vertx)\n    .registerServiceImporter(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e DockerLinksServiceImporter(), \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject());\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe bridge does not need any further configuration.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_additional_backends\"\u003e\u003ca class=\"anchor\" href=\"#_additional_backends\"\u003e\u003c/a\u003eAdditional backends\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIn addition of the backend supported by this library, Vert.x Service Discovery provides additional\nbackends you can use in your application.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_redis_backend\"\u003e\u003ca class=\"anchor\" href=\"#_redis_backend\"\u003e\u003c/a\u003eRedis backend\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe service discovery has a plug-able backend using the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/servicediscovery/spi/ServiceDiscoveryBackend.html\"\u003eServiceDiscoveryBackend\u003c/a\u003e\u003c/code\u003e SPI. This is an implementation of the SPI based\non Redis.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect3\"\u003e\n\u003ch4 id=\"_using_the_redis_backend\"\u003e\u003ca class=\"anchor\" href=\"#_using_the_redis_backend\"\u003e\u003c/a\u003eUsing the Redis backend\u003c/h4\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eTo use the Redis backend, add the following dependency to the \u003cem\u003edependencies\u003c/em\u003e section of your build\ndescriptor:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eMaven (in your \u003ccode\u003epom.xml\u003c/code\u003e):\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-xml\" data-lang=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\n \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003eio.vertx\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003evertx-service-discovery-backend-redis\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e3.9.3\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eGradle (in your \u003ccode\u003ebuild.gradle\u003c/code\u003e file):\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-groovy\" data-lang=\"groovy\"\u003ecompile \u003cspan class=\"hljs-string\"\u003e\u0026#x27;io.vertx:vertx-service-discovery-backend-redis:3.9.3\u0026#x27;\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eBe aware that you can have only a single implementation of the SPI in your \u003cem\u003eclasspath\u003c/em\u003e. If none,\nthe default backend is used.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect3\"\u003e\n\u003ch4 id=\"_configuration\"\u003e\u003ca class=\"anchor\" href=\"#_configuration\"\u003e\u003c/a\u003eConfiguration\u003c/h4\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe backend is based on the \u003ca href=\"http://vertx.io/docs/vertx-redis-client/java\"\u003evertx-redis-client\u003c/a\u003e.\nThe configuration is the client configuration as well as \u003ccode\u003ekey\u003c/code\u003e indicating in which \u003cem\u003ekey\u003c/em\u003e on Redis\nthe records are stored.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eHere is an example:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eServiceDiscovery.create(vertx, \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e ServiceDiscoveryOptions()\n    .setBackendConfiguration(\n        \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject()\n            .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;host\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;127.0.0.1\u0026quot;\u003c/span\u003e)\n            .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;key\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;records\u0026quot;\u003c/span\u003e)\n    ));\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIt\u0026#8217;s important to note that the backend configuration is passed in the \u003ccode\u003esetBackendConfiguration\u003c/code\u003e method (or\n\u003ccode\u003ebackendConfiguration\u003c/code\u003e entry if you use JSON):\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eServiceDiscovery.create(vertx,\n  \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e ServiceDiscoveryOptions(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject()\n    .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;backendConfiguration\u0026quot;\u003c/span\u003e,\n      \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;host\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;localhost\u0026quot;\u003c/span\u003e).put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;port\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e1234\u003c/span\u003e).put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;key\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;my-records\u0026quot;\u003c/span\u003e)\n)));\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e","version":"3.9.3"},"__N_SSG":true},"page":"/docs/[[...slug]]","query":{"slug":["3.9.3","vertx-service-discovery","java"]},"buildId":"seJqQNiHT6NWjFwhJXP8s","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>