<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="description" content="Vert.x | Reactive applications on the JVM"/><meta name="robots" content="index,follow"/><link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet"/><link href="https://fonts.googleapis.com/css?family=Roboto+Condensed:300,400" rel="stylesheet"/><link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400&amp;display=swap" rel="stylesheet"/><link rel="shortcut icon" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="48x48" href="/favicons/favicon-48x48.png"/><link rel="alternate" type="application/rss+xml" href="/feed/rss.xml"/><link rel="alternate" type="application/atom+xml" href="/feed/atom.xml"/><link rel="alternate" type="application/json" href="/feed/feed.json"/><title>Kafka client | Eclipse Vert.x</title><link rel="preload" href="https://api.github.com/repos/vert-x3/vertx-kafka-client" as="fetch" crossorigin="anonymous"/><meta name="next-head-count" content="17"/><link rel="preload" href="/_next/static/css/styles.bee17d6f.chunk.css" as="style"/><link rel="stylesheet" href="/_next/static/css/styles.bee17d6f.chunk.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-b6e20584df76f29b6f35.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-d7b2fb72fb7257504a38.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.fcef98db13e2318579fb.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.5b8771ac6e8a338f82f1.js" as="script"/><link rel="preload" href="/_next/static/chunks/styles.7064a0f84b2a7c13404a.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-3dbbc9c041333077c167.js" as="script"/><link rel="preload" href="/_next/static/chunks/5df0631eea625b022d3730b3f1bf573e1b8deb37.2c5d42edba8dda0b0ba3.js" as="script"/><link rel="preload" href="/_next/static/chunks/31acfd8439b7c9eee4abe9f59c7500d6c943ee0d.94431b87599713e5bc18.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/docs/%5B%5B...slug%5D%5D-3a425d1828d3af7aa498.js" as="script"/></head><body data-build-time="2021-06-07T09:28:07.419Z" data-build-commit-id="4931128d0c08fe28ccb6cb88dd4cfb59080dea94" data-build-run-id="913978703"><div id="__next"><main class="page docs"><header><div class="navbar"><div class="navbar-content container"><div class="navbar-logo"><a href="/"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAxMjMyLjYgMzE1LjIiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxzdHlsZT4uc3Qwe2ZpbGw6Izc4MmE5MX08L3N0eWxlPjxwYXRoIGQ9Ik0xMjAuOSAyMTQuMkwxOTAuNSAwaDUyLjNsLTk4LjUgMjczLjhIOTguMkwwIDBoNTIuMWw2OC44IDIxNC4yem0yOTEuMi02Mi42SDI5OS42djg0LjJINDMxdjM4SDI1MlYwaDE3Ny43djM4LjRIMjk5LjZWMTE0aDExMi41djM3LjZ6bTgzLjctMTEzLjJINTQ2YzE2LjUuMyAyOSA0LjQgMzcuMyAxMi40IDguMyA4IDEyLjUgMTkuNCAxMi41IDM0IDAgMTQtNC41IDI1LjEtMTMuNSAzMy4yLTkgOC4xLTIxLjYgMTIuMS0zNy42IDEyLjFoLTI3LjF2MjQuMmw4Ni4xIDExOS41aDUxdi0yLjRsLTc3LjItMTA2LjdjMjQuOS01LjUgNDMuMy0yMS43IDUyLjYtMzUuOSA4LjItMTIuNiAxMy4zLTI3LjcgMTMuMy00NiAwLTI2LjgtOC42LTQ3LjQtMjUuOC02MS41QzYwMC41IDcuMSA1NzYuMSAwIDU0NC41IDBoLTk2LjN2MjczLjhoNDcuNiIvPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDUyLjMgMTU3LjdsLTQxLjUgNjIuNyAyOS43IDUzLjRoODUuMXoiLz48Y2lyY2xlIGNsYXNzPSJzdDAiIGN4PSI4MjcuOSIgY3k9IjI3NC43IiByPSI0MC41Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTEwMzcgMGwtNDcuNiA3NC4yTDk0OSAwaC04NGw4NS4zIDEzNS44LTY3LjEgMTA1LjdjNS43IDkuNSA5LjEgMjAuNSA5LjIgMzIuNGg1MC4xTDExMjEuMyAwSDEwMzd6Ii8+PHBhdGggZD0iTTc2My41IDI3My44Yy4xLTkuOSAyLjUtMTkuMiA2LjYtMjcuNVYzOC40aDg1LjRWMEg2MzguMnYzOC40aDg0LjZ2MjM1LjRoNDAuN3ptNDE0LTI2Ni45aC0xNS4zdjQyLjJoLTguNVY2LjloLTE1LjJWMGgzOXY2Ljl6TTExOTMgMGwxNC4yIDM3LjdMMTIyMS4zIDBoMTF2NDkuMWgtOC41VjMyLjlsLjgtMjEuNy0xNC41IDM3LjloLTYuMWwtMTQuNS0zNy44LjggMjEuNnYxNi4yaC04LjVWMGgxMS4yeiIvPjwvc3ZnPg==" alt="Vert.x Logo"/></a></div><div class="navbar-collapse-button"><span></span><span></span><span></span></div><div class="navbar-right"><div class="navbar-menu"><span class="navbar-menu-item with-drop-down"><div class="dropdown"><a class="dropdown-title">开始<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="dropdown-menu"><a href="/introduction-to-vertx-and-reactive/"><li class="dropdown-item">简介</li></a><a href="/get-started/"><li class="dropdown-item">开始</li></a><a href="https://start.vertx.io/" target="_blank" rel="noreferrer"><li class="dropdown-item">应用生成器 <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a></ul></div></span><a class="navbar-menu-item" href="/docs/">文档</a><span class="navbar-menu-item with-drop-down"><div class="dropdown"><a class="dropdown-title">资源<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="dropdown-menu"><a href="/faq/"><li class="dropdown-item">答疑</li></a><a href="/channels/"><li class="dropdown-item">联系渠道</li></a><a href="https://how-to.vertx.io/" target="_blank" rel="noreferrer"><li class="dropdown-item">操作指南 <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a><a href="https://github.com/vert-x3/vertx-eventbus-bridge-clients" target="_blank" rel="noreferrer"><li class="dropdown-item">EventBus Bridge Clients <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a></ul></div></span><a class="navbar-menu-item" href="/blog/">博客</a><a class="navbar-menu-item" href="/community/">社区</a><a class="navbar-menu-item" href="/translation/">翻译团队</a></div><div class="navbar-social"><a href="https://github.com/vert-x3/vertx-awesome" class="navbar-social-link" title="Awesome Vert.x" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="List of awesome Vert.x projects"><title>Awesome Vert.x</title><path d="M24 11.438l-6.154-5.645-.865.944 5.128 4.7H1.895l5.128-4.705-.865-.943-6.154 5.649H0v3.72c0 1.683 1.62 3.053 3.61 3.053h3.795c1.99 0 3.61-1.37 3.61-3.051v-2.446h1.97v2.446c0 1.68 1.62 3.051 3.61 3.051h3.794c1.99 0 3.61-1.37 3.61-3.051v-3.721z"></path></svg></a><a href="https://stackoverflow.com/questions/tagged/vert.x" class="navbar-social-link" title="Stack Overflow" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Stack Overflow questions related to Vert.x"><title>Stack Overflow</title><path d="M18.986 21.865v-6.404h2.134V24H1.844v-8.539h2.13v6.404h15.012zM6.111 19.731H16.85v-2.137H6.111v2.137zm.259-4.852l10.48 2.189.451-2.07-10.478-2.187-.453 2.068zm1.359-5.056l9.705 4.53.903-1.95-9.706-4.53-.902 1.936v.014zm2.715-4.785l8.217 6.855 1.359-1.62-8.216-6.853-1.35 1.617-.01.001zM15.751 0l-1.746 1.294 6.405 8.604 1.746-1.294L15.749 0h.002z"></path></svg></a><a href="https://www.youtube.com/channel/UCGN6L3tRhs92Uer3c6VxOSA" class="navbar-social-link" title="YouTube" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="YouTube channel of Vert.x"><title>YouTube</title><path d="M23.499 6.203a3.008 3.008 0 00-2.089-2.089c-1.87-.501-9.4-.501-9.4-.501s-7.509-.01-9.399.501a3.008 3.008 0 00-2.088 2.09A31.258 31.26 0 000 12.01a31.258 31.26 0 00.523 5.785 3.008 3.008 0 002.088 2.089c1.869.502 9.4.502 9.4.502s7.508 0 9.399-.502a3.008 3.008 0 002.089-2.09 31.258 31.26 0 00.5-5.784 31.258 31.26 0 00-.5-5.808zm-13.891 9.4V8.407l6.266 3.604z"></path></svg></a><a href="https://discord.gg/KzEMwP2" class="navbar-social-link" title="Discord" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Eclipse Vert.x channel on Discord"><title>Discord</title><path d="M20.222 0c1.406 0 2.54 1.137 2.607 2.475V24l-2.677-2.273-1.47-1.338-1.604-1.398.67 2.205H3.71c-1.402 0-2.54-1.065-2.54-2.476V2.48C1.17 1.142 2.31.003 3.715.003h16.5L20.222 0zm-6.118 5.683h-.03l-.202.2c2.073.6 3.076 1.537 3.076 1.537-1.336-.668-2.54-1.002-3.744-1.137-.87-.135-1.74-.064-2.475 0h-.2c-.47 0-1.47.2-2.81.735-.467.203-.735.336-.735.336s1.002-1.002 3.21-1.537l-.135-.135s-1.672-.064-3.477 1.27c0 0-1.805 3.144-1.805 7.02 0 0 1 1.74 3.743 1.806 0 0 .4-.533.805-1.002-1.54-.468-2.14-1.404-2.14-1.404s.134.066.335.2h.06c.03 0 .044.015.06.03v.006c.016.016.03.03.06.03.33.136.66.27.93.4.466.202 1.065.403 1.8.536.93.135 1.996.2 3.21 0 .6-.135 1.2-.267 1.8-.535.39-.2.87-.4 1.397-.737 0 0-.6.936-2.205 1.404.33.466.795 1 .795 1 2.744-.06 3.81-1.8 3.87-1.726 0-3.87-1.815-7.02-1.815-7.02-1.635-1.214-3.165-1.26-3.435-1.26l.056-.02zm.168 4.413c.703 0 1.27.6 1.27 1.335 0 .74-.57 1.34-1.27 1.34-.7 0-1.27-.6-1.27-1.334.002-.74.573-1.338 1.27-1.338zm-4.543 0c.7 0 1.266.6 1.266 1.335 0 .74-.57 1.34-1.27 1.34-.7 0-1.27-.6-1.27-1.334 0-.74.57-1.338 1.27-1.338z"></path></svg></a><a href="https://groups.google.com/forum/?fromgroups#!forum/vertx" class="navbar-social-link" title="Vert.x 用户组" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="A Google group for Vert.x users"><title>Vert.x 用户组</title><path d="M.92 3.332c-.776 0-1.216.67-.692 1.383l2.537 4.403v7.86c0 2.013 1.467 3.69 3.459 3.69H20.31a3.75 3.75 0 003.69-3.69V7.043a3.723 3.723 0 00-3.668-3.71zm5.786 3.71H20.1c.587 0 1.153.357 1.153.923 0 .566-.566.922-1.153.922H6.706c-.587 0-1.153-.356-1.153-.922 0-.566.566-.923 1.153-.923zm0 3.69H20.1c.587 0 1.153.356 1.153.922 0 .566-.566.922-1.153.922H6.706c-.587 0-1.153-.356-1.153-.922 0-.566.566-.922 1.153-.922zm-.021 3.71h9.705c.587 0 1.153.356 1.153.922 0 .566-.566.923-1.153.923H6.685c-.587 0-1.153-.357-1.153-.923 0-.566.566-.922 1.153-.922Z"></path></svg></a><a href="https://shang.qq.com/wpa/qunwpa?idkey=587f58cacb9557e3291b46098e0fe09427b98a1c0f866da23c04c2762bc7e2ad" class="navbar-social-link" title="Vert.x中国用户组QQ群" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Vert.x中国用户组QQ群"><title>Vert.x中国用户组QQ群</title><path d="M21.395 15.035a39.548 39.548 0 0 0-.803-2.264l-1.079-2.695c.001-.032.014-.562.014-.836C19.526 4.632 17.351 0 12 0S4.474 4.632 4.474 9.241c0 .274.013.804.014.836l-1.08 2.695a38.97 38.97 0 0 0-.802 2.264c-1.021 3.283-.69 4.643-.438 4.673.54.065 2.103-2.472 2.103-2.472 0 1.469.756 3.387 2.394 4.771-.612.188-1.363.479-1.845.835-.434.32-.379.646-.301.778.343.578 5.883.369 7.482.189 1.6.18 7.14.389 7.483-.189.078-.132.132-.458-.301-.778-.483-.356-1.233-.646-1.846-.836 1.637-1.384 2.393-3.302 2.393-4.771 0 0 1.563 2.537 2.103 2.472.251-.03.581-1.39-.438-4.673zM12.662 4.846c.039-1.052.659-1.878 1.385-1.846s1.281.912 1.242 1.964c-.039 1.051-.659 1.878-1.385 1.846s-1.282-.912-1.242-1.964zM9.954 3c.725-.033 1.345.794 1.384 1.846.04 1.052-.517 1.931-1.242 1.963-.726.033-1.346-.794-1.385-1.845C8.672 3.912 9.228 3.033 9.954 3zM7.421 8.294c.194-.43 2.147-.908 4.566-.908h.026c2.418 0 4.372.479 4.566.908a.14.14 0 0 1 .014.061c0 .031-.01.059-.026.083-.163.238-2.333 1.416-4.553 1.416h-.026c-2.221 0-4.39-1.178-4.553-1.416a.136.136 0 0 1-.014-.144zm10.422 8.622c-.22 3.676-2.403 5.987-5.774 6.021h-.137c-3.37-.033-5.554-2.345-5.773-6.021-.081-1.35.001-2.496.147-3.43.318.063.638.122.958.176v3.506s1.658.334 3.318.103v-3.225c.488.027.96.04 1.406.034h.025c1.678.021 3.714-.204 5.683-.594.146.934.227 2.08.147 3.43zM10.48 5.804c.313-.041.542-.409.508-.825-.033-.415-.314-.72-.629-.679-.313.04-.541.409-.508.824.034.417.315.72.629.68zM14.479 5.156c.078.037.221.042.289-.146.035-.095.025-.165-.009-.214-.023-.033-.133-.118-.371-.176-.904-.22-1.341.384-1.405.499-.04.072-.012.176.056.227.067.051.139.037.179-.006.58-.628 1.21-.208 1.261-.184z"></path></svg></a></div></div></div></div></header><div class="page-content docs-content"><div class="container"><div class="docs-content-wrapper"><aside class=""><div class="docs-content-wrapper-sidebar"><div class="search-panel"><div class="search"><input type="text" placeholder="Search..." value=""/><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="search-icon"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="search-icon-delete"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg></div><ul class="search-results"></ul><div class="search-results-none">No results.</div></div><div class="docs-content-toc"><div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_using_the_vert_x_kafka_client">Using the Vert.x Kafka client</a></li>
<li><a href="#_creating_kafka_clients">Creating Kafka clients</a></li>
<li><a href="#_receiving_messages_from_a_topic_joining_a_consumer_group">Receiving messages from a topic joining a consumer group</a></li>
<li><a href="#_receiving_messages_from_a_topic_requesting_specific_partitions">Receiving messages from a topic requesting specific partitions</a></li>
<li><a href="#_receiving_messages_with_explicit_polling">Receiving messages with explicit polling</a></li>
<li><a href="#_changing_the_subscription_or_assignment">Changing the subscription or assignment</a></li>
<li><a href="#_getting_topic_partition_information">Getting topic partition information</a></li>
<li><a href="#_manual_offset_commit">Manual offset commit</a></li>
<li><a href="#_seeking_in_a_topic_partition">Seeking in a topic partition</a></li>
<li><a href="#_offset_lookup">Offset lookup</a></li>
<li><a href="#_message_flow_control">Message flow control</a></li>
<li><a href="#_closing_a_consumer">Closing a consumer</a></li>
<li><a href="#_sending_messages_to_a_topic">Sending messages to a topic</a></li>
<li><a href="#_sharing_a_producer">Sharing a producer</a></li>
<li><a href="#_closing_a_producer">Closing a producer</a></li>
<li><a href="#_getting_topic_partition_information_2">Getting topic partition information</a></li>
<li><a href="#_handling_errors">Handling errors</a></li>
<li><a href="#_automatic_clean_up_in_verticles">Automatic clean-up in verticles</a></li>
<li><a href="#_using_vert_x_serializersdeserializers">Using Vert.x serializers/deserializers</a></li>
<li><a href="#_rxjava_2_api">RxJava 2 API</a></li>
<li><a href="#_automatic_trace_propagation">Automatic trace propagation</a></li>
</ul>
</div></div></div></aside><div class="docs-content-sidebar-toggle"><div style="position:relative"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-list"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-x"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></div></div><div class="docs-content-inner"><div class="docs-content-metadata"><div class="docs-content-metadata-left"><div class="docs-content-metadata-repo"><div class="github-stars"><a href="https://github.com/vert-x3/vertx-kafka-client"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg>null stars</a></div></div><div><a href="https://vertx.io/docs/apidocs"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path></svg> API</a></div><div class="docs-content-metadata-examples"><a href="https://github.com/vert-x3/vertx-examples/tree/4.x/kafka-examples"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather"><path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"></path></svg> Examples</a></div><div class="docs-content-metadata-edit"><a href="https://github.com/vertx-china/vertx-web-site/tree/master/docs/translation/vertx-kafka-client/java"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg> 改进翻译</a></div><span class="docs-content-metadata-version"><div class="dropdown"><a class="dropdown-title">v4.1.0<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="dropdown-menu align-right"><a href="/docs/vertx-kafka-client/java/"><li class="dropdown-item active has-active-siblings"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="dropdown-check-icon"><polyline points="20 6 9 17 4 12"></polyline></svg>Latest (v<!-- -->4.1.0<!-- -->)</li></a><a href="/docs/4.0.3/vertx-kafka-client/java/"><li class="dropdown-item has-active-siblings">v<!-- -->4.0.3</li></a><a href="/docs/3.9.7/vertx-kafka-client/java/"><li class="dropdown-item has-active-siblings">v<!-- -->3.9.7</li></a></ul></div></span></div></div><div><h1>Vert.x Kafka client</h1>

<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This component provides a Kafka client for reading and sending messages from/to an <a href="https://kafka.apache.org/">Apache Kafka</a> cluster.</p>
</div>
<div class="paragraph">
<p>As consumer, the API provides methods for subscribing to a topic partition receiving
messages asynchronously or reading them as a stream (even with the possibility to pause/resume the stream).</p>
</div>
<div class="paragraph">
<p>As producer, the API provides methods for sending message to a topic partition like writing on a stream.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_using_the_vert_x_kafka_client"><a class="anchor" href="#_using_the_vert_x_kafka_client"></a>Using the Vert.x Kafka client</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To use this component, add the following dependency to the dependencies section of your build descriptor:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Maven (in your <code>pom.xml</code>):</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.vertx<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>vertx-kafka-client<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.1.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Gradle (in your <code>build.gradle</code> file):</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">compile io.<span class="hljs-string">vertx:</span>vertx-kafka-<span class="hljs-string">client:</span><span class="hljs-number">4.1</span><span class="hljs-number">.0</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creating_kafka_clients"><a class="anchor" href="#_creating_kafka_clients"></a>Creating Kafka clients</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Creating consumers and producers is quite similar and on how it works using the native Kafka client library.</p>
</div>
<div class="paragraph">
<p>They need to be configured with a bunch of properties as described in the official
Apache Kafka documentation, for the <a href="https://kafka.apache.org/documentation/#newconsumerconfigs">consumer</a> and
for the <a href="https://kafka.apache.org/documentation/#producerconfigs">producer</a>.</p>
</div>
<div class="paragraph">
<p>To achieve that, a map can be configured with such properties passing it to one of the
static creation methods exposed by <code><a href="../../apidocs/io/vertx/kafka/client/consumer/KafkaConsumer.html">KafkaConsumer</a></code> and
<code><a href="../../apidocs/io/vertx/kafka/client/producer/KafkaProducer.html">KafkaProducer</a></code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">Map&lt;String, String&gt; config = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();
config.put(<span class="hljs-string">"bootstrap.servers"</span>, <span class="hljs-string">"localhost:9092"</span>);
config.put(<span class="hljs-string">"key.deserializer"</span>, <span class="hljs-string">"org.apache.kafka.common.serialization.StringDeserializer"</span>);
config.put(<span class="hljs-string">"value.deserializer"</span>, <span class="hljs-string">"org.apache.kafka.common.serialization.StringDeserializer"</span>);
config.put(<span class="hljs-string">"group.id"</span>, <span class="hljs-string">"my_group"</span>);
config.put(<span class="hljs-string">"auto.offset.reset"</span>, <span class="hljs-string">"earliest"</span>);
config.put(<span class="hljs-string">"enable.auto.commit"</span>, <span class="hljs-string">"false"</span>);

<span class="hljs-comment">// use consumer for interacting with Apache Kafka</span>
KafkaConsumer&lt;String, String&gt; consumer = KafkaConsumer.create(vertx, config);</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the above example, a <code><a href="../../apidocs/io/vertx/kafka/client/consumer/KafkaConsumer.html">KafkaConsumer</a></code> instance is created using
a map instance in order to specify the Kafka nodes list to connect (just one) and
the deserializers to use for getting key and value from each received message.</p>
</div>
<div class="paragraph">
<p>Likewise a producer can be created</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">Map&lt;String, String&gt; config = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();
config.put(<span class="hljs-string">"bootstrap.servers"</span>, <span class="hljs-string">"localhost:9092"</span>);
config.put(<span class="hljs-string">"key.serializer"</span>, <span class="hljs-string">"org.apache.kafka.common.serialization.StringSerializer"</span>);
config.put(<span class="hljs-string">"value.serializer"</span>, <span class="hljs-string">"org.apache.kafka.common.serialization.StringSerializer"</span>);
config.put(<span class="hljs-string">"acks"</span>, <span class="hljs-string">"1"</span>);

<span class="hljs-comment">// use producer for interacting with Apache Kafka</span>
KafkaProducer&lt;String, String&gt; producer = KafkaProducer.create(vertx, config);</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_receiving_messages_from_a_topic_joining_a_consumer_group"><a class="anchor" href="#_receiving_messages_from_a_topic_joining_a_consumer_group"></a>Receiving messages from a topic joining a consumer group</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In order to start receiving messages from Kafka topics, the consumer can use the
<code><a href="../../apidocs/io/vertx/kafka/client/consumer/KafkaConsumer.html#subscribe-java.util.Set-">subscribe</a></code> method for
subscribing to a set of topics being part of a consumer group (specified by the properties on creation).</p>
</div>
<div class="paragraph">
<p>It&#8217;s also possible to use the <code><a href="../../apidocs/io/vertx/kafka/client/consumer/KafkaConsumer.html#subscribe-java.util.regex.Pattern-">subscribe</a></code> method for
subscribing to more topics specifying a Java regex.</p>
</div>
<div class="paragraph">
<p>You also need to register a handler for handling incoming messages using the
<code><a href="../../apidocs/io/vertx/kafka/client/consumer/KafkaConsumer.html#handler-io.vertx.core.Handler-">handler</a></code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">consumer.handler(record -&gt; {
  System.out.println(<span class="hljs-string">"Processing key="</span> + record.key() + <span class="hljs-string">",value="</span> + record.value() +
    <span class="hljs-string">",partition="</span> + record.partition() + <span class="hljs-string">",offset="</span> + record.offset());
});

<span class="hljs-comment">// subscribe to several topics with list</span>
Set&lt;String&gt; topics = <span class="hljs-keyword">new</span> HashSet&lt;&gt;();
topics.add(<span class="hljs-string">"topic1"</span>);
topics.add(<span class="hljs-string">"topic2"</span>);
topics.add(<span class="hljs-string">"topic3"</span>);
consumer.subscribe(topics);

<span class="hljs-comment">// or using a Java regex</span>
Pattern pattern = Pattern.compile(<span class="hljs-string">"topic\\d"</span>);
consumer.subscribe(pattern);

<span class="hljs-comment">// or just subscribe to a single topic</span>
consumer.subscribe(<span class="hljs-string">"a-single-topic"</span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The handler can be registered before or after the call to <code>subscribe()</code>; messages won&#8217;t be consumed until both
methods have been called. This allows you to call <code>subscribe()</code>, then <code>seek()</code> and finally <code>handler()</code> in
order to only consume messages starting from a particular offset, for example.</p>
</div>
<div class="paragraph">
<p>A handler can also be passed during subscription to be aware of the subscription result and being notified when the operation
is completed.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">consumer.handler(record -&gt; {
  System.out.println(<span class="hljs-string">"Processing key="</span> + record.key() + <span class="hljs-string">",value="</span> + record.value() +
    <span class="hljs-string">",partition="</span> + record.partition() + <span class="hljs-string">",offset="</span> + record.offset());
});

<span class="hljs-comment">// subscribe to several topics</span>
Set&lt;String&gt; topics = <span class="hljs-keyword">new</span> HashSet&lt;&gt;();
topics.add(<span class="hljs-string">"topic1"</span>);
topics.add(<span class="hljs-string">"topic2"</span>);
topics.add(<span class="hljs-string">"topic3"</span>);
consumer
  .subscribe(topics)
  .onSuccess(v -&gt;
    System.out.println(<span class="hljs-string">"subscribed"</span>)
  ).onFailure(cause -&gt;
    System.out.println(<span class="hljs-string">"Could not subscribe "</span> + cause.getMessage())
  );

<span class="hljs-comment">// or just subscribe to a single topic</span>
consumer
  .subscribe(<span class="hljs-string">"a-single-topic"</span>)
  .onSuccess(v -&gt;
    System.out.println(<span class="hljs-string">"subscribed"</span>)
  ).onFailure(cause -&gt;
    System.out.println(<span class="hljs-string">"Could not subscribe "</span> + cause.getMessage())
  );</code></pre>
</div>
</div>
<div class="paragraph">
<p>Using the consumer group way, the Kafka cluster assigns partitions to the consumer taking into account other connected
consumers in the same consumer group, so that partitions can be spread across them.</p>
</div>
<div class="paragraph">
<p>The Kafka cluster handles partitions re-balancing when a consumer leaves the group (so assigned partitions are free
to be assigned to other consumers) or a new consumer joins the group (so it wants partitions to read from).</p>
</div>
<div class="paragraph">
<p>You can register handlers on a <code><a href="../../apidocs/io/vertx/kafka/client/consumer/KafkaConsumer.html">KafkaConsumer</a></code> to be notified
of the partitions revocations and assignments by the Kafka cluster using
<code><a href="../../apidocs/io/vertx/kafka/client/consumer/KafkaConsumer.html#partitionsRevokedHandler-io.vertx.core.Handler-">partitionsRevokedHandler</a></code> and
<code><a href="../../apidocs/io/vertx/kafka/client/consumer/KafkaConsumer.html#partitionsAssignedHandler-io.vertx.core.Handler-">partitionsAssignedHandler</a></code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">consumer.handler(record -&gt; {
  System.out.println(<span class="hljs-string">"Processing key="</span> + record.key() + <span class="hljs-string">",value="</span> + record.value() +
    <span class="hljs-string">",partition="</span> + record.partition() + <span class="hljs-string">",offset="</span> + record.offset());
});

<span class="hljs-comment">// registering handlers for assigned and revoked partitions</span>
consumer.partitionsAssignedHandler(topicPartitions -&gt; {
  System.out.println(<span class="hljs-string">"Partitions assigned"</span>);
  <span class="hljs-keyword">for</span> (TopicPartition topicPartition : topicPartitions) {
    System.out.println(topicPartition.getTopic() + <span class="hljs-string">" "</span> + topicPartition.getPartition());
  }
});

consumer.partitionsRevokedHandler(topicPartitions -&gt; {
  System.out.println(<span class="hljs-string">"Partitions revoked"</span>);
  <span class="hljs-keyword">for</span> (TopicPartition topicPartition : topicPartitions) {
    System.out.println(topicPartition.getTopic() + <span class="hljs-string">" "</span> + topicPartition.getPartition());
  }
});

<span class="hljs-comment">// subscribes to the topic</span>
consumer
  .subscribe(<span class="hljs-string">"test"</span>)
  .onSuccess(v -&gt;
    System.out.println(<span class="hljs-string">"subscribed"</span>)
  ).onFailure(cause -&gt;
    System.out.println(<span class="hljs-string">"Could not subscribe "</span> + cause.getMessage())
  );</code></pre>
</div>
</div>
<div class="paragraph">
<p>After joining a consumer group for receiving messages, a consumer can decide to leave the consumer group in order to
not get messages anymore using <code><a href="../../apidocs/io/vertx/kafka/client/consumer/KafkaConsumer.html#unsubscribe--">unsubscribe</a></code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">consumer.unsubscribe();</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can add an handler to be notified of the result</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">consumer
  .unsubscribe()
  .onSuccess(v -&gt;
    System.out.println(<span class="hljs-string">"Consumer unsubscribed"</span>)
  );</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_receiving_messages_from_a_topic_requesting_specific_partitions"><a class="anchor" href="#_receiving_messages_from_a_topic_requesting_specific_partitions"></a>Receiving messages from a topic requesting specific partitions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Besides being part of a consumer group for receiving messages from a topic, a consumer can ask for a specific
topic partition. When the consumer is not part part of a consumer group the overall application cannot
rely on the re-balancing feature.</p>
</div>
<div class="paragraph">
<p>You can use <code><a href="../../apidocs/io/vertx/kafka/client/consumer/KafkaConsumer.html#assign-java.util.Set-io.vertx.core.Handler-">assign</a></code>
in order to ask for specific partitions.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">consumer.handler(record -&gt; {
  System.out.println(<span class="hljs-string">"key="</span> + record.key() + <span class="hljs-string">",value="</span> + record.value() +
    <span class="hljs-string">",partition="</span> + record.partition() + <span class="hljs-string">",offset="</span> + record.offset());
});

<span class="hljs-comment">//</span>
Set&lt;TopicPartition&gt; topicPartitions = <span class="hljs-keyword">new</span> HashSet&lt;&gt;();
topicPartitions.add(<span class="hljs-keyword">new</span> TopicPartition()
  .setTopic(<span class="hljs-string">"test"</span>)
  .setPartition(<span class="hljs-number">0</span>));

<span class="hljs-comment">// requesting to be assigned the specific partition</span>
consumer
  .assign(topicPartitions)
  .onSuccess(v -&gt; System.out.println(<span class="hljs-string">"Partition assigned"</span>))
  <span class="hljs-comment">// After the assignment is completed, get the assigned partitions to this consumer</span>
  .compose(v -&gt; consumer.assignment())
  .onSuccess(partitions -&gt; {
    <span class="hljs-keyword">for</span> (TopicPartition topicPartition : partitions) {
      System.out.println(topicPartition.getTopic() + <span class="hljs-string">" "</span> + topicPartition.getPartition());
    }
  });</code></pre>
</div>
</div>
<div class="paragraph">
<p>As with <code>subscribe()</code>, the handler can be registered before or after the call to <code>assign()</code>;
messages won&#8217;t be consumed until both methods have been called. This allows you to call
<code>assign()</code>, then <code>seek()</code> and finally <code>handler()</code> in
order to only consume messages starting from a particular offset, for example.</p>
</div>
<div class="paragraph">
<p>Calling <code><a href="../../apidocs/io/vertx/kafka/client/consumer/KafkaConsumer.html#assignment-io.vertx.core.Handler-">assignment</a></code> provides
the list of the current assigned partitions.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_receiving_messages_with_explicit_polling"><a class="anchor" href="#_receiving_messages_with_explicit_polling"></a>Receiving messages with explicit polling</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Other than using the internal polling mechanism in order to receive messages from Kafka, the client can subscribe to a
topic, avoiding to register the handler for getting the messages and then using the <code><a href="../../apidocs/io/vertx/kafka/client/consumer/KafkaConsumer.html#poll-java.time.Duration-io.vertx.core.Handler-">poll</a></code> method.</p>
</div>
<div class="paragraph">
<p>In this way, the user application is in charge to execute the poll for getting messages when it needs, for example after processing
the previous ones.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">consumer
  .subscribe(<span class="hljs-string">"test"</span>)
  .onSuccess(v -&gt; {
    System.out.println(<span class="hljs-string">"Consumer subscribed"</span>);

    <span class="hljs-comment">// Let's poll every second</span>
    vertx.setPeriodic(<span class="hljs-number">1000</span>, timerId -&gt;
      consumer
        .poll(Duration.ofMillis(<span class="hljs-number">100</span>))
        .onSuccess(records -&gt; {
          <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; records.size(); i++) {
            KafkaConsumerRecord&lt;String, String&gt; record = records.recordAt(i);
            System.out.println(<span class="hljs-string">"key="</span> + record.key() + <span class="hljs-string">",value="</span> + record.value() +
              <span class="hljs-string">",partition="</span> + record.partition() + <span class="hljs-string">",offset="</span> + record.offset());
          }
        })
        .onFailure(cause -&gt; {
          System.out.println(<span class="hljs-string">"Something went wrong when polling "</span> + cause.toString());
          cause.printStackTrace();

          <span class="hljs-comment">// Stop polling if something went wrong</span>
          vertx.cancelTimer(timerId);
        })
    );
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>After subscribing successfully, the application start a periodic timer in order to execute the poll and getting messages
from Kafka periodically.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_changing_the_subscription_or_assignment"><a class="anchor" href="#_changing_the_subscription_or_assignment"></a>Changing the subscription or assignment</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can change the subscribed topics, or assigned partitions after you have started to consume messages, simply
by calling <code>subscribe()</code> or <code>assign()</code> again.</p>
</div>
<div class="paragraph">
<p>Note that due to internal buffering of messages it is possible that the record handler will continue to
observe messages from the old subscription or assignment <em>after</em> the <code>subscribe()</code> or <code>assign()</code>
method&#8217;s completion handler has been called. This is not the case for messages observed by the batch handler:
Once the completion handler has been called it will only observe messages read from the subscription or assignment.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_getting_topic_partition_information"><a class="anchor" href="#_getting_topic_partition_information"></a>Getting topic partition information</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can call the <code><a href="../../apidocs/io/vertx/kafka/client/consumer/KafkaConsumer.html#partitionsFor-java.lang.String-io.vertx.core.Handler-">partitionsFor</a></code> to get information about
partitions for a specified topic</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">consumer
  .partitionsFor(<span class="hljs-string">"test"</span>)
  .onSuccess(partitions -&gt; {
    <span class="hljs-keyword">for</span> (PartitionInfo partitionInfo : partitions) {
      System.out.println(partitionInfo);
    }
  });</code></pre>
</div>
</div>
<div class="paragraph">
<p>In addition <code><a href="../../apidocs/io/vertx/kafka/client/consumer/KafkaConsumer.html#listTopics-io.vertx.core.Handler-">listTopics</a></code> provides all available topics
with related partitions</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">consumer
  .listTopics()
  .onSuccess(partitionsTopicMap -&gt;
    partitionsTopicMap.forEach((topic, partitions) -&gt; {
      System.out.println(<span class="hljs-string">"topic = "</span> + topic);
      System.out.println(<span class="hljs-string">"partitions = "</span> + partitions);
    })
  );</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_manual_offset_commit"><a class="anchor" href="#_manual_offset_commit"></a>Manual offset commit</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In Apache Kafka the consumer is in charge to handle the offset of the last read message.</p>
</div>
<div class="paragraph">
<p>This is executed by the commit operation executed automatically every time a bunch of messages are read
from a topic partition. The configuration parameter <code>enable.auto.commit</code> must be set to <code>true</code> when the
consumer is created.</p>
</div>
<div class="paragraph">
<p>Manual offset commit, can be achieved with <code><a href="../../apidocs/io/vertx/kafka/client/consumer/KafkaConsumer.html#commit-io.vertx.core.Handler-">commit</a></code>.
It can be used to achieve <em>at least once</em> delivery to be sure that the read messages are processed before committing
the offset.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">consumer.commit().onSuccess(v -&gt;
  System.out.println(<span class="hljs-string">"Last read message offset committed"</span>)
);</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_seeking_in_a_topic_partition"><a class="anchor" href="#_seeking_in_a_topic_partition"></a>Seeking in a topic partition</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Apache Kafka can retain messages for a long period of time and the consumer can seek inside a topic partition
and obtain arbitrary access to the messages.</p>
</div>
<div class="paragraph">
<p>You can use <code><a href="../../apidocs/io/vertx/kafka/client/consumer/KafkaConsumer.html#seek-io.vertx.kafka.client.common.TopicPartition-long-">seek</a></code> to change the offset for reading at a specific
position</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">TopicPartition topicPartition = <span class="hljs-keyword">new</span> TopicPartition()
  .setTopic(<span class="hljs-string">"test"</span>)
  .setPartition(<span class="hljs-number">0</span>);

<span class="hljs-comment">// seek to a specific offset</span>
consumer
  .seek(topicPartition, <span class="hljs-number">10</span>)
  .onSuccess(v -&gt; System.out.println(<span class="hljs-string">"Seeking done"</span>));</code></pre>
</div>
</div>
<div class="paragraph">
<p>When the consumer needs to re-read the stream from the beginning, it can use <code><a href="../../apidocs/io/vertx/kafka/client/consumer/KafkaConsumer.html#seekToBeginning-io.vertx.kafka.client.common.TopicPartition-">seekToBeginning</a></code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">TopicPartition topicPartition = <span class="hljs-keyword">new</span> TopicPartition()
  .setTopic(<span class="hljs-string">"test"</span>)
  .setPartition(<span class="hljs-number">0</span>);

<span class="hljs-comment">// seek to the beginning of the partition</span>
consumer
  .seekToBeginning(Collections.singleton(topicPartition))
  .onSuccess(v -&gt; System.out.println(<span class="hljs-string">"Seeking done"</span>));</code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally <code><a href="../../apidocs/io/vertx/kafka/client/consumer/KafkaConsumer.html#seekToEnd-io.vertx.kafka.client.common.TopicPartition-">seekToEnd</a></code> can be used to come back at the end of the partition</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">TopicPartition topicPartition = <span class="hljs-keyword">new</span> TopicPartition()
  .setTopic(<span class="hljs-string">"test"</span>)
  .setPartition(<span class="hljs-number">0</span>);

<span class="hljs-comment">// seek to the end of the partition</span>
consumer
  .seekToEnd(Collections.singleton(topicPartition))
  .onSuccess(v -&gt; System.out.println(<span class="hljs-string">"Seeking done"</span>));</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that due to internal buffering of messages it is possible that the record handler will continue to
observe messages read from the original offset for a time <em>after</em> the <code>seek*()</code> method&#8217;s completion
handler has been called. This is not the case for messages observed by the batch handler: Once the
<code>seek*()</code> completion handler has been called it will only observe messages read from the new offset.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_offset_lookup"><a class="anchor" href="#_offset_lookup"></a>Offset lookup</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can use the beginningOffsets API introduced in Kafka 0.10.1.1 to get the first offset
for a given partition. In contrast to <code><a href="../../apidocs/io/vertx/kafka/client/consumer/KafkaConsumer.html#seekToBeginning-io.vertx.kafka.client.common.TopicPartition-">seekToBeginning</a></code>,
it does not change the consumer&#8217;s offset.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">Set&lt;TopicPartition&gt; topicPartitions = <span class="hljs-keyword">new</span> HashSet&lt;&gt;();
TopicPartition topicPartition = <span class="hljs-keyword">new</span> TopicPartition().setTopic(<span class="hljs-string">"test"</span>).setPartition(<span class="hljs-number">0</span>);
topicPartitions.add(topicPartition);

consumer
  .beginningOffsets(topicPartitions)
  .onSuccess(results -&gt;
    results.forEach((topic, beginningOffset) -&gt;
      System.out.println(
        <span class="hljs-string">"Beginning offset for topic="</span> + topic.getTopic() + <span class="hljs-string">", partition="</span> +
          topic.getPartition() + <span class="hljs-string">", beginningOffset="</span> + beginningOffset
      )
    )
  );

<span class="hljs-comment">// Convenience method for single-partition lookup</span>
consumer
  .beginningOffsets(topicPartition)
  .onSuccess(beginningOffset -&gt;
    System.out.println(
      <span class="hljs-string">"Beginning offset for topic="</span> + topicPartition.getTopic() + <span class="hljs-string">", partition="</span> +
        topicPartition.getPartition() + <span class="hljs-string">", beginningOffset="</span> + beginningOffset
    )
  );</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can use the endOffsets API introduced in Kafka 0.10.1.1 to get the last offset
for a given partition. In contrast to <code><a href="../../apidocs/io/vertx/kafka/client/consumer/KafkaConsumer.html#seekToEnd-io.vertx.kafka.client.common.TopicPartition-">seekToEnd</a></code>,
it does not change the consumer&#8217;s offset.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">Set&lt;TopicPartition&gt; topicPartitions = <span class="hljs-keyword">new</span> HashSet&lt;&gt;();
TopicPartition topicPartition = <span class="hljs-keyword">new</span> TopicPartition().setTopic(<span class="hljs-string">"test"</span>).setPartition(<span class="hljs-number">0</span>);
topicPartitions.add(topicPartition);

consumer.endOffsets(topicPartitions)
  .onSuccess(results -&gt;
    results.forEach((topic, beginningOffset) -&gt;
      System.out.println(
        <span class="hljs-string">"End offset for topic="</span> + topic.getTopic() + <span class="hljs-string">", partition="</span> +
          topic.getPartition() + <span class="hljs-string">", beginningOffset="</span> + beginningOffset
      )
    )
  );

<span class="hljs-comment">// Convenience method for single-partition lookup</span>
consumer
  .endOffsets(topicPartition)
  .onSuccess(endOffset -&gt;
    System.out.println(
      <span class="hljs-string">"End offset for topic="</span> + topicPartition.getTopic() + <span class="hljs-string">", partition="</span> +
        topicPartition.getPartition() + <span class="hljs-string">", endOffset="</span> + endOffset
    )
);</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can use the offsetsForTimes API introduced in Kafka 0.10.1.1 to look up an offset by
timestamp, i.e. search parameter is an epoch timestamp and the call returns the lowest offset
with ingestion timestamp &gt;= given timestamp.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">Map&lt;TopicPartition, Long&gt; topicPartitionsWithTimestamps = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();
TopicPartition topicPartition = <span class="hljs-keyword">new</span> TopicPartition().setTopic(<span class="hljs-string">"test"</span>).setPartition(<span class="hljs-number">0</span>);

<span class="hljs-comment">// We are interested in the offset for data ingested 60 seconds ago</span>
<span class="hljs-keyword">long</span> timestamp = (System.currentTimeMillis() - <span class="hljs-number">60000</span>);

topicPartitionsWithTimestamps.put(topicPartition, timestamp);
consumer
  .offsetsForTimes(topicPartitionsWithTimestamps)
  .onSuccess(results -&gt;
    results.forEach((topic, offset) -&gt;
      System.out.println(
        <span class="hljs-string">"Offset for topic="</span> + topic.getTopic() +
        <span class="hljs-string">", partition="</span> + topic.getPartition() + <span class="hljs-string">"\n"</span> +
        <span class="hljs-string">", timestamp="</span> + timestamp + <span class="hljs-string">", offset="</span> + offset.getOffset() +
        <span class="hljs-string">", offsetTimestamp="</span> + offset.getTimestamp()
      )
    )
);

<span class="hljs-comment">// Convenience method for single-partition lookup</span>
consumer.offsetsForTimes(topicPartition, timestamp).onSuccess(offsetAndTimestamp -&gt;
  System.out.println(
    <span class="hljs-string">"Offset for topic="</span> + topicPartition.getTopic() +
    <span class="hljs-string">", partition="</span> + topicPartition.getPartition() + <span class="hljs-string">"\n"</span> +
    <span class="hljs-string">", timestamp="</span> + timestamp + <span class="hljs-string">", offset="</span> + offsetAndTimestamp.getOffset() +
    <span class="hljs-string">", offsetTimestamp="</span> + offsetAndTimestamp.getTimestamp()
  )
);</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_message_flow_control"><a class="anchor" href="#_message_flow_control"></a>Message flow control</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A consumer can control the incoming message flow and pause/resume the read operation from a topic, e.g it
can pause the message flow when it needs more time to process the actual messages and then resume
to continue message processing.</p>
</div>
<div class="paragraph">
<p>To achieve that you can use <code><a href="../../apidocs/io/vertx/kafka/client/consumer/KafkaConsumer.html#pause--">pause</a></code> and
<code><a href="../../apidocs/io/vertx/kafka/client/consumer/KafkaConsumer.html#resume--">resume</a></code>.</p>
</div>
<div class="paragraph">
<p>In the case of the partition-specific pause and resume it is possible that the record handler will continue to
observe messages from a paused partition for a time <em>after</em> the <code>pause()</code> method&#8217;s completion
handler has been called. This is not the case for messages observed by the batch handler: Once the
<code>pause()</code> completion handler has been called it will only observe messages from those partitions which
are not paused.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">TopicPartition topicPartition = <span class="hljs-keyword">new</span> TopicPartition()
  .setTopic(<span class="hljs-string">"test"</span>)
  .setPartition(<span class="hljs-number">0</span>);

<span class="hljs-comment">// registering the handler for incoming messages</span>
consumer.handler(record -&gt; {
  System.out.println(<span class="hljs-string">"key="</span> + record.key() + <span class="hljs-string">",value="</span> + record.value() +
    <span class="hljs-string">",partition="</span> + record.partition() + <span class="hljs-string">",offset="</span> + record.offset());

  <span class="hljs-comment">// i.e. pause/resume on partition 0, after reading message up to offset 5</span>
  <span class="hljs-keyword">if</span> ((record.partition() == <span class="hljs-number">0</span>) &amp;&amp; (record.offset() == <span class="hljs-number">5</span>)) {

    <span class="hljs-comment">// pause the read operations</span>
    consumer.pause(topicPartition)
      .onSuccess(v -&gt; System.out.println(<span class="hljs-string">"Paused"</span>))
      .onSuccess(v -&gt; vertx.setTimer(<span class="hljs-number">5000</span>, timeId -&gt;
        <span class="hljs-comment">// resume read operations</span>
        consumer.resume(topicPartition)
      ));
  }
});</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_closing_a_consumer"><a class="anchor" href="#_closing_a_consumer"></a>Closing a consumer</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Call close to close the consumer. Closing the consumer closes any open connections and releases all consumer resources.</p>
</div>
<div class="paragraph">
<p>The close is actually asynchronous and might not complete until some time after the call has returned. If you want to be notified
when the actual close has completed then you can pass in a handler.</p>
</div>
<div class="paragraph">
<p>This handler will then be called when the close has fully completed.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">consumer
  .close()
  .onSuccess(v -&gt; System.out.println(<span class="hljs-string">"Consumer is now closed"</span>))
  .onFailure(cause -&gt; System.out.println(<span class="hljs-string">"Close failed: "</span> + cause));</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_sending_messages_to_a_topic"><a class="anchor" href="#_sending_messages_to_a_topic"></a>Sending messages to a topic</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can use  <code><a href="../../apidocs/io/vertx/core/streams/WriteStream.html#write-java.lang.Object-">write</a></code> to send messages (records) to a topic.</p>
</div>
<div class="paragraph">
<p>The simplest way to send a message is to specify only the destination topic and the related value, omitting its key
or partition, in this case the messages are sent in a round robin fashion across all the partitions of the topic.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++) {

  <span class="hljs-comment">// only topic and message value are specified, round robin on destination partitions</span>
  KafkaProducerRecord&lt;String, String&gt; record =
    KafkaProducerRecord.create(<span class="hljs-string">"test"</span>, <span class="hljs-string">"message_"</span> + i);

  producer.write(record);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can receive message sent metadata like its topic, its destination partition and its assigned offset.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++) {

  <span class="hljs-comment">// only topic and message value are specified, round robin on destination partitions</span>
  KafkaProducerRecord&lt;String, String&gt; record =
    KafkaProducerRecord.create(<span class="hljs-string">"test"</span>, <span class="hljs-string">"message_"</span> + i);

  producer.send(record).onSuccess(recordMetadata -&gt;
    System.out.println(
      <span class="hljs-string">"Message "</span> + record.value() + <span class="hljs-string">" written on topic="</span> + recordMetadata.getTopic() +
      <span class="hljs-string">", partition="</span> + recordMetadata.getPartition() +
      <span class="hljs-string">", offset="</span> + recordMetadata.getOffset()
    )
  );
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>When you need to assign a partition to a message, you can specify its partition identifier
or its key</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {

  <span class="hljs-comment">// a destination partition is specified</span>
  KafkaProducerRecord&lt;String, String&gt; record =
    KafkaProducerRecord.create(<span class="hljs-string">"test"</span>, <span class="hljs-keyword">null</span>, <span class="hljs-string">"message_"</span> + i, <span class="hljs-number">0</span>);

  producer.write(record);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Since the producers identifies the destination using key hashing, you can use that to guarantee that all
messages with the same key are sent to the same partition and retain the order.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {

  <span class="hljs-comment">// i.e. defining different keys for odd and even messages</span>
  <span class="hljs-keyword">int</span> key = i % <span class="hljs-number">2</span>;

  <span class="hljs-comment">// a key is specified, all messages with same key will be sent to the same partition</span>
  KafkaProducerRecord&lt;String, String&gt; record =
    KafkaProducerRecord.create(<span class="hljs-string">"test"</span>, String.valueOf(key), <span class="hljs-string">"message_"</span> + i);

  producer.write(record);
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">注意</div>
</td>
<td class="content">
the shared producer is created on the first <code>createShared</code> call and its configuration is defined at this moment,
shared producer usage must use the same configuration.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_sharing_a_producer"><a class="anchor" href="#_sharing_a_producer"></a>Sharing a producer</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Sometimes you want to share the same producer from within several verticles or contexts.</p>
</div>
<div class="paragraph">
<p>Calling <code><a href="../../apidocs/io/vertx/kafka/client/producer/KafkaProducer.html#createShared-io.vertx.core.Vertx-java.lang.String-java.util.Map-">KafkaProducer.createShared</a></code>
returns a producer that can be shared safely.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">KafkaProducer&lt;String, String&gt; producer1 = KafkaProducer.createShared(vertx, <span class="hljs-string">"the-producer"</span>, config);

<span class="hljs-comment">// Sometimes later you can close it</span>
producer1.close();</code></pre>
</div>
</div>
<div class="paragraph">
<p>The same resources (thread, connection) will be shared between the producer returned by this method.</p>
</div>
<div class="paragraph">
<p>When you are done with the producer, just close it, when all shared producers are closed, the resources will
be released for you.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_closing_a_producer"><a class="anchor" href="#_closing_a_producer"></a>Closing a producer</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Call close to close the producer. Closing the producer closes any open connections and releases all producer resources.</p>
</div>
<div class="paragraph">
<p>The close is actually asynchronous and might not complete until some time after the call has returned. If you want to be notified
when the actual close has completed then you can pass in a handler.</p>
</div>
<div class="paragraph">
<p>This handler will then be called when the close has fully completed.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">producer
  .close()
  .onSuccess(v -&gt; System.out.println(<span class="hljs-string">"Producer is now closed"</span>))
  .onFailure(cause -&gt; System.out.println(<span class="hljs-string">"Close failed: "</span> + cause));</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_getting_topic_partition_information_2"><a class="anchor" href="#_getting_topic_partition_information_2"></a>Getting topic partition information</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can call the <code><a href="../../apidocs/io/vertx/kafka/client/producer/KafkaProducer.html#partitionsFor-java.lang.String-io.vertx.core.Handler-">partitionsFor</a></code> to get information about
partitions for a specified topic:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">producer
  .partitionsFor(<span class="hljs-string">"test"</span>)
  .onSuccess(partitions -&gt;
    partitions.forEach(System.out::println)
  );</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_handling_errors"><a class="anchor" href="#_handling_errors"></a>Handling errors</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Errors handling (e.g timeout) between a Kafka client (consumer or producer) and the Kafka cluster is done using
<code><a href="../../apidocs/io/vertx/kafka/client/consumer/KafkaConsumer.html#exceptionHandler-io.vertx.core.Handler-">exceptionHandler</a></code> or
<code><a href="../../apidocs/io/vertx/kafka/client/producer/KafkaProducer.html#exceptionHandler-io.vertx.core.Handler-">exceptionHandler</a></code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">consumer.exceptionHandler(e -&gt; {
  System.out.println(<span class="hljs-string">"Error = "</span> + e.getMessage());
});</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_automatic_clean_up_in_verticles"><a class="anchor" href="#_automatic_clean_up_in_verticles"></a>Automatic clean-up in verticles</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you’re creating consumers and producer from inside verticles, those consumers and producers will be automatically
closed when the verticle is undeployed.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_using_vert_x_serializersdeserializers"><a class="anchor" href="#_using_vert_x_serializersdeserializers"></a>Using Vert.x serializers/deserializers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Vert.x Kafka client comes out of the box with serializers and deserializers for buffers, json object
and json array.</p>
</div>
<div class="paragraph">
<p>In a consumer you can use buffers</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">Map&lt;String, String&gt; config = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();
config.put(<span class="hljs-string">"bootstrap.servers"</span>, <span class="hljs-string">"localhost:9092"</span>);
config.put(<span class="hljs-string">"key.deserializer"</span>, <span class="hljs-string">"io.vertx.kafka.client.serialization.BufferDeserializer"</span>);
config.put(<span class="hljs-string">"value.deserializer"</span>, <span class="hljs-string">"io.vertx.kafka.client.serialization.BufferDeserializer"</span>);
config.put(<span class="hljs-string">"group.id"</span>, <span class="hljs-string">"my_group"</span>);
config.put(<span class="hljs-string">"auto.offset.reset"</span>, <span class="hljs-string">"earliest"</span>);
config.put(<span class="hljs-string">"enable.auto.commit"</span>, <span class="hljs-string">"false"</span>);

<span class="hljs-comment">// Creating a consumer able to deserialize to json object</span>
config = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();
config.put(<span class="hljs-string">"bootstrap.servers"</span>, <span class="hljs-string">"localhost:9092"</span>);
config.put(<span class="hljs-string">"key.deserializer"</span>, <span class="hljs-string">"io.vertx.kafka.client.serialization.JsonObjectDeserializer"</span>);
config.put(<span class="hljs-string">"value.deserializer"</span>, <span class="hljs-string">"io.vertx.kafka.client.serialization.JsonObjectDeserializer"</span>);
config.put(<span class="hljs-string">"group.id"</span>, <span class="hljs-string">"my_group"</span>);
config.put(<span class="hljs-string">"auto.offset.reset"</span>, <span class="hljs-string">"earliest"</span>);
config.put(<span class="hljs-string">"enable.auto.commit"</span>, <span class="hljs-string">"false"</span>);

<span class="hljs-comment">// Creating a consumer able to deserialize to json array</span>
config = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();
config.put(<span class="hljs-string">"bootstrap.servers"</span>, <span class="hljs-string">"localhost:9092"</span>);
config.put(<span class="hljs-string">"key.deserializer"</span>, <span class="hljs-string">"io.vertx.kafka.client.serialization.JsonArrayDeserializer"</span>);
config.put(<span class="hljs-string">"value.deserializer"</span>, <span class="hljs-string">"io.vertx.kafka.client.serialization.JsonArrayDeserializer"</span>);
config.put(<span class="hljs-string">"group.id"</span>, <span class="hljs-string">"my_group"</span>);
config.put(<span class="hljs-string">"auto.offset.reset"</span>, <span class="hljs-string">"earliest"</span>);
config.put(<span class="hljs-string">"enable.auto.commit"</span>, <span class="hljs-string">"false"</span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Or in a producer</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">Map&lt;String, String&gt; config = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();
config.put(<span class="hljs-string">"bootstrap.servers"</span>, <span class="hljs-string">"localhost:9092"</span>);
config.put(<span class="hljs-string">"key.serializer"</span>, <span class="hljs-string">"io.vertx.kafka.client.serialization.BufferSerializer"</span>);
config.put(<span class="hljs-string">"value.serializer"</span>, <span class="hljs-string">"io.vertx.kafka.client.serialization.BufferSerializer"</span>);
config.put(<span class="hljs-string">"acks"</span>, <span class="hljs-string">"1"</span>);

<span class="hljs-comment">// Creating a producer able to serialize to json object</span>
config = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();
config.put(<span class="hljs-string">"bootstrap.servers"</span>, <span class="hljs-string">"localhost:9092"</span>);
config.put(<span class="hljs-string">"key.serializer"</span>, <span class="hljs-string">"io.vertx.kafka.client.serialization.JsonObjectSerializer"</span>);
config.put(<span class="hljs-string">"value.serializer"</span>, <span class="hljs-string">"io.vertx.kafka.client.serialization.JsonObjectSerializer"</span>);
config.put(<span class="hljs-string">"acks"</span>, <span class="hljs-string">"1"</span>);

<span class="hljs-comment">// Creating a producer able to serialize to json array</span>
config = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();
config.put(<span class="hljs-string">"bootstrap.servers"</span>, <span class="hljs-string">"localhost:9092"</span>);
config.put(<span class="hljs-string">"key.serializer"</span>, <span class="hljs-string">"io.vertx.kafka.client.serialization.JsonArraySerializer"</span>);
config.put(<span class="hljs-string">"value.serializer"</span>, <span class="hljs-string">"io.vertx.kafka.client.serialization.JsonArraySerializer"</span>);
config.put(<span class="hljs-string">"acks"</span>, <span class="hljs-string">"1"</span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also specify the serializers/deserializers at creation time:</p>
</div>
<div class="paragraph">
<p>In a consumer</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">Map&lt;String, String&gt; config = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();
config.put(<span class="hljs-string">"bootstrap.servers"</span>, <span class="hljs-string">"localhost:9092"</span>);
config.put(<span class="hljs-string">"group.id"</span>, <span class="hljs-string">"my_group"</span>);
config.put(<span class="hljs-string">"auto.offset.reset"</span>, <span class="hljs-string">"earliest"</span>);
config.put(<span class="hljs-string">"enable.auto.commit"</span>, <span class="hljs-string">"false"</span>);

<span class="hljs-comment">// Creating a consumer able to deserialize buffers</span>
KafkaConsumer&lt;Buffer, Buffer&gt; bufferConsumer = KafkaConsumer.create(vertx, config, Buffer<span class="hljs-class">.<span class="hljs-keyword">class</span>, <span class="hljs-title">Buffer</span>.<span class="hljs-title">class</span>)</span>;

<span class="hljs-comment">// Creating a consumer able to deserialize json objects</span>
KafkaConsumer&lt;JsonObject, JsonObject&gt; jsonObjectConsumer = KafkaConsumer.create(vertx, config, JsonObject<span class="hljs-class">.<span class="hljs-keyword">class</span>, <span class="hljs-title">JsonObject</span>.<span class="hljs-title">class</span>)</span>;

<span class="hljs-comment">// Creating a consumer able to deserialize json arrays</span>
KafkaConsumer&lt;JsonArray, JsonArray&gt; jsonArrayConsumer = KafkaConsumer.create(vertx, config, JsonArray<span class="hljs-class">.<span class="hljs-keyword">class</span>, <span class="hljs-title">JsonArray</span>.<span class="hljs-title">class</span>)</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Or in a producer</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">Map&lt;String, String&gt; config = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();
config.put(<span class="hljs-string">"bootstrap.servers"</span>, <span class="hljs-string">"localhost:9092"</span>);
config.put(<span class="hljs-string">"acks"</span>, <span class="hljs-string">"1"</span>);

<span class="hljs-comment">// Creating a producer able to serialize to buffers</span>
KafkaProducer&lt;Buffer, Buffer&gt; bufferProducer = KafkaProducer.create(vertx, config, Buffer<span class="hljs-class">.<span class="hljs-keyword">class</span>, <span class="hljs-title">Buffer</span>.<span class="hljs-title">class</span>)</span>;

<span class="hljs-comment">// Creating a producer able to serialize to json objects</span>
KafkaProducer&lt;JsonObject, JsonObject&gt; jsonObjectProducer = KafkaProducer.create(vertx, config, JsonObject<span class="hljs-class">.<span class="hljs-keyword">class</span>, <span class="hljs-title">JsonObject</span>.<span class="hljs-title">class</span>)</span>;

<span class="hljs-comment">// Creating a producer able to serialize to json arrays</span>
KafkaProducer&lt;JsonArray, JsonArray&gt; jsonArrayProducer = KafkaProducer.create(vertx, config, JsonArray<span class="hljs-class">.<span class="hljs-keyword">class</span>, <span class="hljs-title">JsonArray</span>.<span class="hljs-title">class</span>)</span>;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_rxjava_2_api"><a class="anchor" href="#_rxjava_2_api"></a>RxJava 2 API</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Kafka client provides an Rxified version of the original API.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">Observable&lt;KafkaConsumerRecord&lt;String, Long&gt;&gt; observable = consumer.toObservable();

observable
  .map(record -&gt; record.value())
  .buffer(<span class="hljs-number">256</span>)
  .map(
  list -&gt; list.stream().mapToDouble(n -&gt; n).average()
).subscribe(val -&gt; {

  <span class="hljs-comment">// Obtained an average</span>

});</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_automatic_trace_propagation"><a class="anchor" href="#_automatic_trace_propagation"></a>Automatic trace propagation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When Vert.x is configured with Tracing enabled (see <code><a href="../../apidocs/io/vertx/core/VertxOptions.html#setTracingOptions-io.vertx.core.tracing.TracingOptions-">setTracingOptions</a></code>),
traces will be automatically propagated with Kafka messages.</p>
</div>
<div class="paragraph">
<p>Kafka producers will add a span to traces when a message is being written, trace contexts
will be propagated as Kafka headers, and the consumers will also create a span while reading a message.</p>
</div>
<div class="paragraph">
<p>Following the
<a href="https://github.com/opentracing/specification/blob/master/semantic_conventions.md">OpenTracing semantic convention</a>,
span tags are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>span.kind</code>, it is either <code>consumer</code> or <code>producer</code></p>
</li>
<li>
<p><code>peer.address</code> can be configured from <code><a href="../../apidocs/io/vertx/kafka/client/common/KafkaClientOptions.html#setTracePeerAddress-java.lang.String-">setTracePeerAddress</a></code>. If unset, it will be the configured bootstrap server.</p>
</li>
<li>
<p><code>peer.hostname</code> is parsed from <code>peer.address</code></p>
</li>
<li>
<p><code>peer.port</code> is parsed from <code>peer.address</code></p>
</li>
<li>
<p><code>peer.service</code> is always <code>kafka</code></p>
</li>
<li>
<p><code>message_bus.destination</code>, which is set to the topic in use</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Unresolved directive in index.adoc - include::admin.adoc[]</p>
</div>
</div>
</div></div></div></div></div></div><footer><div class="container"><div class="footer-nav-section"><div class="footer-nav-list footer-logo"><a href="/"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAxMjMyLjYgMzE1LjIiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxzdHlsZT4uc3Qwe2ZpbGw6Izc4MmE5MX08L3N0eWxlPjxwYXRoIGQ9Ik0xMjAuOSAyMTQuMkwxOTAuNSAwaDUyLjNsLTk4LjUgMjczLjhIOTguMkwwIDBoNTIuMWw2OC44IDIxNC4yem0yOTEuMi02Mi42SDI5OS42djg0LjJINDMxdjM4SDI1MlYwaDE3Ny43djM4LjRIMjk5LjZWMTE0aDExMi41djM3LjZ6bTgzLjctMTEzLjJINTQ2YzE2LjUuMyAyOSA0LjQgMzcuMyAxMi40IDguMyA4IDEyLjUgMTkuNCAxMi41IDM0IDAgMTQtNC41IDI1LjEtMTMuNSAzMy4yLTkgOC4xLTIxLjYgMTIuMS0zNy42IDEyLjFoLTI3LjF2MjQuMmw4Ni4xIDExOS41aDUxdi0yLjRsLTc3LjItMTA2LjdjMjQuOS01LjUgNDMuMy0yMS43IDUyLjYtMzUuOSA4LjItMTIuNiAxMy4zLTI3LjcgMTMuMy00NiAwLTI2LjgtOC42LTQ3LjQtMjUuOC02MS41QzYwMC41IDcuMSA1NzYuMSAwIDU0NC41IDBoLTk2LjN2MjczLjhoNDcuNiIvPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDUyLjMgMTU3LjdsLTQxLjUgNjIuNyAyOS43IDUzLjRoODUuMXoiLz48Y2lyY2xlIGNsYXNzPSJzdDAiIGN4PSI4MjcuOSIgY3k9IjI3NC43IiByPSI0MC41Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTEwMzcgMGwtNDcuNiA3NC4yTDk0OSAwaC04NGw4NS4zIDEzNS44LTY3LjEgMTA1LjdjNS43IDkuNSA5LjEgMjAuNSA5LjIgMzIuNGg1MC4xTDExMjEuMyAwSDEwMzd6Ii8+PHBhdGggZD0iTTc2My41IDI3My44Yy4xLTkuOSAyLjUtMTkuMiA2LjYtMjcuNVYzOC40aDg1LjRWMEg2MzguMnYzOC40aDg0LjZ2MjM1LjRoNDAuN3ptNDE0LTI2Ni45aC0xNS4zdjQyLjJoLTguNVY2LjloLTE1LjJWMGgzOXY2Ljl6TTExOTMgMGwxNC4yIDM3LjdMMTIyMS4zIDBoMTF2NDkuMWgtOC41VjMyLjlsLjgtMjEuNy0xNC41IDM3LjloLTYuMWwtMTQuNS0zNy44LjggMjEuNnYxNi4yaC04LjVWMGgxMS4yeiIvPjwvc3ZnPg==" alt="Vert.x Logo"/></a></div><div class="footer-nav-list"><h5>Eclipse Vert.x</h5><ul class=""><li><a class="navbar-menu-item" href="/docs/">文档</a></li><li><a href="/download/">下载</a></li><li><a href="/blog/">博客</a></li><li><a href="/community/">社区</a></li><li><a href="/translation/">翻译团队</a></li><li><a href="https://github.com/eclipse-vertx/vert.x">GitHub</a></li><li><a href="https://github.com/vertx-china/vertx-web-site">翻译GitHub</a></li></ul></div><div class="footer-nav-list"><h5>资源</h5><ul class=""><li><a href="/faq/">答疑</a></li><li><a href="/channels/">联系渠道</a></li><li><a href="https://how-to.vertx.io/">操作指南</a></li><li><a href="https://start.vertx.io/">应用生成器</a></li></ul></div><div class="footer-nav-list"><h5>Eclipse</h5><ul class=""><li><a href="https://www.eclipse.org/">Eclipse 基金会</a></li><li><a href="https://www.eclipse.org/legal/privacy.php">隐私政策</a></li><li><a href="https://www.eclipse.org/legal/termsofuse.php">使用条款</a></li><li><a href="https://www.eclipse.org/legal/copyright.php">版权代理</a></li><li><a href="https://www.eclipse.org/legal/">法律资源</a></li></ul></div></div><div class="footer-copyright"><div class="footer-copyright-remarks">© <!-- -->2021<!-- --> Eclipse Vert.x™<br/>Eclipse Vert.x™ 是开源的，并在<a href="https://creativecommons.org/licenses/by-sa/3.0/" target="_blank" rel="noopener noreferrer">Eclipse Public License 2.0</a>和<a href="https://www.apache.org/licenses/LICENSE-2.0.html" target="_blank" rel="noopener noreferrer">Apache License 2.0</a>协议下获得了双重许可。<br class="footer-copyright-break"/>网站由 <a href="https://michelkraemer.com" target="_blank" rel="noopener noreferrer">Michel Krämer</a> 设计。</div><div class="footer-copyright-eclipse-logo"><a href="https://www.eclipse.org/" target="_blank" rel="noopener noreferrer"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAyODEuMyA5MS4xIiB4bWw6c3BhY2U9InByZXNlcnZlIj48c3R5bGU+LnN0MHtmaWxsOiNmNzk0MjJ9LnN0MXtmaWxsOiMzZDNjM2J9PC9zdHlsZT48ZyBpZD0iTGF5ZXJfMV8xXyI+PHBhdGggY2xhc3M9InN0MCIgZD0iTTI2NS43IDg0TDI1NyA3M2gtMi43djE3LjdoMy4zdi0xMmw5LjMgMTJoMi4xVjczaC0zLjN2MTF6bS0zMi40LTguM2M0LjIgMCA1LjggMy4zIDUuOCA2LjNzLTEuNiA2LTUuOCA2LTUuNy0zLjEtNS44LTYgMS43LTYuMyA1LjgtNi4zem0wLTNjLTYuMSAwLTkuMSA0LjctOS4xIDkuMyAwIDQuNyAyLjkgOS4xIDkuMSA5LjFzOS00LjYgOS4xLTkuMi0zLTkuMi05LjEtOS4yem0tMjEuMiAxOFY3M2gtMy4zdjE3LjdoMy4zem0tMjMuNiAwaDMuM1Y3Nmg1LjZ2LTNoLTE0LjZ2M2g1LjZsLjEgMTQuN3ptLTE4LjktNi41SDE2M2wzLjMtNy42IDMuMyA3LjZ6bTIuOCA2LjVoMy42TDE2OC4yIDczaC0zLjZsLTggMTcuN2gzLjZsMS41LTMuM2g5LjNsMS40IDMuM3ptLTM4LTE0LjZoMy42YzMuOSAwIDUuNSAyLjggNS41IDUuNS4xIDIuOC0xLjUgNS44LTUuNSA1LjhoLTMuNlY3Ni4xem0zLjctMy4xaC02Ljl2MTcuN2g2LjljNi4yIDAgOC45LTQuNSA4LjktOXMtMi44LTguNy04LjktOC43em0tMjIuNCAxMUwxMDcgNzNoLTIuN3YxNy43aDMuM3YtMTJsOS4zIDEyaDIuMVY3M2gtMy4zdjExek04OC4yIDczdjEwLjJjMCAzLTEuNiA0LjktNC4zIDQuOXMtNC42LTEuNy00LjYtNC45VjczSDc2djEwLjFjMCA1LjMgMy42IDcuOSA3LjkgNy45IDQuNCAwIDcuNy0yLjcgNy43LTcuOVY3M2gtMy40em0tMzMgMi43YzQuMiAwIDUuOCAzLjMgNS44IDYuM3MtMS42IDYtNS44IDYtNS43LTMuMS01LjgtNiAxLjctNi4zIDUuOC02LjN6bTAtM2MtNi4xIDAtOS4xIDQuNy05LjEgOS4zczIuOSA5LjEgOS4xIDkuMSA5LTQuNiA5LjEtOS4yLTMtOS4yLTkuMS05LjJ6bS0yOS43IDE4di02LjVoOC45di0zLjFoLTguOXYtNC44aDkuNFY3M0gyMi4ydjE3LjZoMy4zeiIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yNjkuNCA1NC40aC0yMi4ydi04LjloMjEuNHYtNi45aC0yMS40di05LjFoMjIuMnYtNy4yaC0yOS42djM5LjVoMjkuNnYtNy40em0tNDAtMjUuNmMtMy02LjEtOS40LTcuOC0xNS41LTcuOC03LjMgMC0xNS4zIDMuNC0xNS4zIDExLjUgMCA4LjkgNy40IDExIDE1LjUgMTIgNS4yLjYgOS4xIDIuMSA5LjEgNS44IDAgNC4zLTQuNCA1LjktOS4xIDUuOXMtOS40LTEuOS0xMS4xLTYuM2wtNi4yIDMuMmMyLjkgNy4yIDkuMSA5LjcgMTcuMiA5LjcgOC44IDAgMTYuNi0zLjggMTYuNi0xMi42IDAtOS40LTcuNy0xMS42LTE1LjktMTIuNi00LjctLjYtOC44LTEuNS04LjgtNSAwLTIuOSAyLjYtNS4yIDguMi01LjIgNC4zIDAgOCAyLjIgOS40IDQuNGw1LjktM3pNMTc2IDIyLjJjLTYuMi0uMS0xMi40IDAtMTguNiAwdjM5LjVoNy40VjUwLjFIMTc2YzE5LjQgMCAxOS40LTI3LjkgMC0yNy45em0tMTEuMSA3LjFIMTc2YzkuNSAwIDkuNSAxNCAwIDE0aC0xMS4ybC4xLTE0em0tMTggMzIuNVYyMi4yaC03LjR2MzkuNWw3LjQuMXptLTQ0LTM5LjZ2MzkuNWgyNy43di02LjloLTIwLjNWMjIuMmgtNy40ek05MC43IDUxLjdjLTIuNyAyLjUtNi4yIDQtOS45IDQtOS44IDAtMTMuNS02LjgtMTMuNi0xMy40czQuMS0xMy43IDEzLjYtMTMuN2MzLjUtLjEgNyAxLjMgOS41IDMuN2w1LTQuOGMtMy44LTMuOS05LjEtNi0xNC41LTYtMTQuMyAwLTIxIDEwLjUtMjAuOSAyMC44czYuMyAyMC4zIDIwLjkgMjAuM2M1LjYuMSAxMS0yIDE1LTUuOWwtNS4xLTV6bS0zOSAyLjdIMjkuNXYtOC45aDIxLjR2LTYuOUgyOS41di05LjFoMjIuMnYtNy4ySDIyLjJ2MzkuNWgyOS42bC0uMS03LjR6Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTkuOCAxOC4yQzE4LjggNC4xIDM2LjktLjggNTIuMSA2bC0xLS43QzM1LjctNC42IDE1LjItLjEgNS4zIDE1LjNzLTUuNCAzNS45IDEwIDQ1LjhsMS4xLjZDMy44IDUwLjguOCAzMi4zIDkuOCAxOC4yeiIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yNzIuMiAyNi4xYzAtMi41IDIuMS00LjYgNC42LTQuNiAyLjUgMCA0LjYgMi4xIDQuNiA0LjYgMCAyLjUtMi4xIDQuNi00LjYgNC42LTIuNiAwLTQuNi0yLjEtNC42LTQuNnptOC42IDBjMC0yLjItMS44LTQuMS00LTQuMXMtNC4xIDEuOC00LjEgNC4xYzAgMi4yIDEuNyA0IDMuOSA0LjFoLjFjMi4zIDAgNC4xLTEuOCA0LjEtNC4xem0tNi0yLjVoMi4zYzEuMSAwIDEuOS41IDEuOSAxLjYgMCAuNy0uNCAxLjMtMS4xIDEuNWwxLjIgMS43aC0xLjRsLTEtMS41aC0uN3YxLjVoLTEuMWwtLjEtNC44em0yLjIgMi4zYy41IDAgLjgtLjMuOC0uN3MtLjMtLjctLjgtLjdoLTF2MS4zbDEgLjF6Ii8+PC9nPjwvc3ZnPg==" alt="Eclipse foundation Logo"/></a></div></div></div></footer></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"slug":"4.1.0/vertx-kafka-client/java","title":"Vert.x Kafka client","fallbackGitHubStars":null,"toc":"\u003cdiv id=\"toc\" class=\"toc\"\u003e\n\u003cdiv id=\"toctitle\"\u003eTable of Contents\u003c/div\u003e\n\u003cul class=\"sectlevel1\"\u003e\n\u003cli\u003e\u003ca href=\"#_using_the_vert_x_kafka_client\"\u003eUsing the Vert.x Kafka client\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_creating_kafka_clients\"\u003eCreating Kafka clients\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_receiving_messages_from_a_topic_joining_a_consumer_group\"\u003eReceiving messages from a topic joining a consumer group\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_receiving_messages_from_a_topic_requesting_specific_partitions\"\u003eReceiving messages from a topic requesting specific partitions\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_receiving_messages_with_explicit_polling\"\u003eReceiving messages with explicit polling\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_changing_the_subscription_or_assignment\"\u003eChanging the subscription or assignment\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_getting_topic_partition_information\"\u003eGetting topic partition information\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_manual_offset_commit\"\u003eManual offset commit\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_seeking_in_a_topic_partition\"\u003eSeeking in a topic partition\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_offset_lookup\"\u003eOffset lookup\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_message_flow_control\"\u003eMessage flow control\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_closing_a_consumer\"\u003eClosing a consumer\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_sending_messages_to_a_topic\"\u003eSending messages to a topic\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_sharing_a_producer\"\u003eSharing a producer\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_closing_a_producer\"\u003eClosing a producer\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_getting_topic_partition_information_2\"\u003eGetting topic partition information\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_handling_errors\"\u003eHandling errors\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_automatic_clean_up_in_verticles\"\u003eAutomatic clean-up in verticles\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_using_vert_x_serializersdeserializers\"\u003eUsing Vert.x serializers/deserializers\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_rxjava_2_api\"\u003eRxJava 2 API\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_automatic_trace_propagation\"\u003eAutomatic trace propagation\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e","contents":"\u003ch1\u003eVert.x Kafka client\u003c/h1\u003e\n\n\u003cdiv id=\"preamble\"\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThis component provides a Kafka client for reading and sending messages from/to an \u003ca href=\"https://kafka.apache.org/\"\u003eApache Kafka\u003c/a\u003e cluster.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eAs consumer, the API provides methods for subscribing to a topic partition receiving\nmessages asynchronously or reading them as a stream (even with the possibility to pause/resume the stream).\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eAs producer, the API provides methods for sending message to a topic partition like writing on a stream.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_using_the_vert_x_kafka_client\"\u003e\u003ca class=\"anchor\" href=\"#_using_the_vert_x_kafka_client\"\u003e\u003c/a\u003eUsing the Vert.x Kafka client\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eTo use this component, add the following dependency to the dependencies section of your build descriptor:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eMaven (in your \u003ccode\u003epom.xml\u003c/code\u003e):\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-xml\" data-lang=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\n \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003eio.vertx\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003evertx-kafka-client\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e4.1.0\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eGradle (in your \u003ccode\u003ebuild.gradle\u003c/code\u003e file):\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-groovy\" data-lang=\"groovy\"\u003ecompile io.\u003cspan class=\"hljs-string\"\u003evertx:\u003c/span\u003evertx-kafka-\u003cspan class=\"hljs-string\"\u003eclient:\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e4.1\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_creating_kafka_clients\"\u003e\u003ca class=\"anchor\" href=\"#_creating_kafka_clients\"\u003e\u003c/a\u003eCreating Kafka clients\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eCreating consumers and producers is quite similar and on how it works using the native Kafka client library.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThey need to be configured with a bunch of properties as described in the official\nApache Kafka documentation, for the \u003ca href=\"https://kafka.apache.org/documentation/#newconsumerconfigs\"\u003econsumer\u003c/a\u003e and\nfor the \u003ca href=\"https://kafka.apache.org/documentation/#producerconfigs\"\u003eproducer\u003c/a\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eTo achieve that, a map can be configured with such properties passing it to one of the\nstatic creation methods exposed by \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/kafka/client/consumer/KafkaConsumer.html\"\u003eKafkaConsumer\u003c/a\u003e\u003c/code\u003e and\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/kafka/client/producer/KafkaProducer.html\"\u003eKafkaProducer\u003c/a\u003e\u003c/code\u003e\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eMap\u0026lt;String, String\u0026gt; config = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e HashMap\u0026lt;\u0026gt;();\nconfig.put(\u003cspan class=\"hljs-string\"\u003e\"bootstrap.servers\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"localhost:9092\"\u003c/span\u003e);\nconfig.put(\u003cspan class=\"hljs-string\"\u003e\"key.deserializer\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"org.apache.kafka.common.serialization.StringDeserializer\"\u003c/span\u003e);\nconfig.put(\u003cspan class=\"hljs-string\"\u003e\"value.deserializer\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"org.apache.kafka.common.serialization.StringDeserializer\"\u003c/span\u003e);\nconfig.put(\u003cspan class=\"hljs-string\"\u003e\"group.id\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"my_group\"\u003c/span\u003e);\nconfig.put(\u003cspan class=\"hljs-string\"\u003e\"auto.offset.reset\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"earliest\"\u003c/span\u003e);\nconfig.put(\u003cspan class=\"hljs-string\"\u003e\"enable.auto.commit\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"false\"\u003c/span\u003e);\n\n\u003cspan class=\"hljs-comment\"\u003e// use consumer for interacting with Apache Kafka\u003c/span\u003e\nKafkaConsumer\u0026lt;String, String\u0026gt; consumer = KafkaConsumer.create(vertx, config);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIn the above example, a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/kafka/client/consumer/KafkaConsumer.html\"\u003eKafkaConsumer\u003c/a\u003e\u003c/code\u003e instance is created using\na map instance in order to specify the Kafka nodes list to connect (just one) and\nthe deserializers to use for getting key and value from each received message.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eLikewise a producer can be created\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eMap\u0026lt;String, String\u0026gt; config = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e HashMap\u0026lt;\u0026gt;();\nconfig.put(\u003cspan class=\"hljs-string\"\u003e\"bootstrap.servers\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"localhost:9092\"\u003c/span\u003e);\nconfig.put(\u003cspan class=\"hljs-string\"\u003e\"key.serializer\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"org.apache.kafka.common.serialization.StringSerializer\"\u003c/span\u003e);\nconfig.put(\u003cspan class=\"hljs-string\"\u003e\"value.serializer\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"org.apache.kafka.common.serialization.StringSerializer\"\u003c/span\u003e);\nconfig.put(\u003cspan class=\"hljs-string\"\u003e\"acks\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"1\"\u003c/span\u003e);\n\n\u003cspan class=\"hljs-comment\"\u003e// use producer for interacting with Apache Kafka\u003c/span\u003e\nKafkaProducer\u0026lt;String, String\u0026gt; producer = KafkaProducer.create(vertx, config);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_receiving_messages_from_a_topic_joining_a_consumer_group\"\u003e\u003ca class=\"anchor\" href=\"#_receiving_messages_from_a_topic_joining_a_consumer_group\"\u003e\u003c/a\u003eReceiving messages from a topic joining a consumer group\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIn order to start receiving messages from Kafka topics, the consumer can use the\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/kafka/client/consumer/KafkaConsumer.html#subscribe-java.util.Set-\"\u003esubscribe\u003c/a\u003e\u003c/code\u003e method for\nsubscribing to a set of topics being part of a consumer group (specified by the properties on creation).\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIt\u0026#8217;s also possible to use the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/kafka/client/consumer/KafkaConsumer.html#subscribe-java.util.regex.Pattern-\"\u003esubscribe\u003c/a\u003e\u003c/code\u003e method for\nsubscribing to more topics specifying a Java regex.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eYou also need to register a handler for handling incoming messages using the\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/kafka/client/consumer/KafkaConsumer.html#handler-io.vertx.core.Handler-\"\u003ehandler\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003econsumer.handler(record -\u0026gt; {\n  System.out.println(\u003cspan class=\"hljs-string\"\u003e\"Processing key=\"\u003c/span\u003e + record.key() + \u003cspan class=\"hljs-string\"\u003e\",value=\"\u003c/span\u003e + record.value() +\n    \u003cspan class=\"hljs-string\"\u003e\",partition=\"\u003c/span\u003e + record.partition() + \u003cspan class=\"hljs-string\"\u003e\",offset=\"\u003c/span\u003e + record.offset());\n});\n\n\u003cspan class=\"hljs-comment\"\u003e// subscribe to several topics with list\u003c/span\u003e\nSet\u0026lt;String\u0026gt; topics = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e HashSet\u0026lt;\u0026gt;();\ntopics.add(\u003cspan class=\"hljs-string\"\u003e\"topic1\"\u003c/span\u003e);\ntopics.add(\u003cspan class=\"hljs-string\"\u003e\"topic2\"\u003c/span\u003e);\ntopics.add(\u003cspan class=\"hljs-string\"\u003e\"topic3\"\u003c/span\u003e);\nconsumer.subscribe(topics);\n\n\u003cspan class=\"hljs-comment\"\u003e// or using a Java regex\u003c/span\u003e\nPattern pattern = Pattern.compile(\u003cspan class=\"hljs-string\"\u003e\"topic\\\\d\"\u003c/span\u003e);\nconsumer.subscribe(pattern);\n\n\u003cspan class=\"hljs-comment\"\u003e// or just subscribe to a single topic\u003c/span\u003e\nconsumer.subscribe(\u003cspan class=\"hljs-string\"\u003e\"a-single-topic\"\u003c/span\u003e);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe handler can be registered before or after the call to \u003ccode\u003esubscribe()\u003c/code\u003e; messages won\u0026#8217;t be consumed until both\nmethods have been called. This allows you to call \u003ccode\u003esubscribe()\u003c/code\u003e, then \u003ccode\u003eseek()\u003c/code\u003e and finally \u003ccode\u003ehandler()\u003c/code\u003e in\norder to only consume messages starting from a particular offset, for example.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eA handler can also be passed during subscription to be aware of the subscription result and being notified when the operation\nis completed.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003econsumer.handler(record -\u0026gt; {\n  System.out.println(\u003cspan class=\"hljs-string\"\u003e\"Processing key=\"\u003c/span\u003e + record.key() + \u003cspan class=\"hljs-string\"\u003e\",value=\"\u003c/span\u003e + record.value() +\n    \u003cspan class=\"hljs-string\"\u003e\",partition=\"\u003c/span\u003e + record.partition() + \u003cspan class=\"hljs-string\"\u003e\",offset=\"\u003c/span\u003e + record.offset());\n});\n\n\u003cspan class=\"hljs-comment\"\u003e// subscribe to several topics\u003c/span\u003e\nSet\u0026lt;String\u0026gt; topics = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e HashSet\u0026lt;\u0026gt;();\ntopics.add(\u003cspan class=\"hljs-string\"\u003e\"topic1\"\u003c/span\u003e);\ntopics.add(\u003cspan class=\"hljs-string\"\u003e\"topic2\"\u003c/span\u003e);\ntopics.add(\u003cspan class=\"hljs-string\"\u003e\"topic3\"\u003c/span\u003e);\nconsumer\n  .subscribe(topics)\n  .onSuccess(v -\u0026gt;\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\"subscribed\"\u003c/span\u003e)\n  ).onFailure(cause -\u0026gt;\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\"Could not subscribe \"\u003c/span\u003e + cause.getMessage())\n  );\n\n\u003cspan class=\"hljs-comment\"\u003e// or just subscribe to a single topic\u003c/span\u003e\nconsumer\n  .subscribe(\u003cspan class=\"hljs-string\"\u003e\"a-single-topic\"\u003c/span\u003e)\n  .onSuccess(v -\u0026gt;\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\"subscribed\"\u003c/span\u003e)\n  ).onFailure(cause -\u0026gt;\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\"Could not subscribe \"\u003c/span\u003e + cause.getMessage())\n  );\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eUsing the consumer group way, the Kafka cluster assigns partitions to the consumer taking into account other connected\nconsumers in the same consumer group, so that partitions can be spread across them.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe Kafka cluster handles partitions re-balancing when a consumer leaves the group (so assigned partitions are free\nto be assigned to other consumers) or a new consumer joins the group (so it wants partitions to read from).\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eYou can register handlers on a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/kafka/client/consumer/KafkaConsumer.html\"\u003eKafkaConsumer\u003c/a\u003e\u003c/code\u003e to be notified\nof the partitions revocations and assignments by the Kafka cluster using\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/kafka/client/consumer/KafkaConsumer.html#partitionsRevokedHandler-io.vertx.core.Handler-\"\u003epartitionsRevokedHandler\u003c/a\u003e\u003c/code\u003e and\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/kafka/client/consumer/KafkaConsumer.html#partitionsAssignedHandler-io.vertx.core.Handler-\"\u003epartitionsAssignedHandler\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003econsumer.handler(record -\u0026gt; {\n  System.out.println(\u003cspan class=\"hljs-string\"\u003e\"Processing key=\"\u003c/span\u003e + record.key() + \u003cspan class=\"hljs-string\"\u003e\",value=\"\u003c/span\u003e + record.value() +\n    \u003cspan class=\"hljs-string\"\u003e\",partition=\"\u003c/span\u003e + record.partition() + \u003cspan class=\"hljs-string\"\u003e\",offset=\"\u003c/span\u003e + record.offset());\n});\n\n\u003cspan class=\"hljs-comment\"\u003e// registering handlers for assigned and revoked partitions\u003c/span\u003e\nconsumer.partitionsAssignedHandler(topicPartitions -\u0026gt; {\n  System.out.println(\u003cspan class=\"hljs-string\"\u003e\"Partitions assigned\"\u003c/span\u003e);\n  \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e (TopicPartition topicPartition : topicPartitions) {\n    System.out.println(topicPartition.getTopic() + \u003cspan class=\"hljs-string\"\u003e\" \"\u003c/span\u003e + topicPartition.getPartition());\n  }\n});\n\nconsumer.partitionsRevokedHandler(topicPartitions -\u0026gt; {\n  System.out.println(\u003cspan class=\"hljs-string\"\u003e\"Partitions revoked\"\u003c/span\u003e);\n  \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e (TopicPartition topicPartition : topicPartitions) {\n    System.out.println(topicPartition.getTopic() + \u003cspan class=\"hljs-string\"\u003e\" \"\u003c/span\u003e + topicPartition.getPartition());\n  }\n});\n\n\u003cspan class=\"hljs-comment\"\u003e// subscribes to the topic\u003c/span\u003e\nconsumer\n  .subscribe(\u003cspan class=\"hljs-string\"\u003e\"test\"\u003c/span\u003e)\n  .onSuccess(v -\u0026gt;\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\"subscribed\"\u003c/span\u003e)\n  ).onFailure(cause -\u0026gt;\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\"Could not subscribe \"\u003c/span\u003e + cause.getMessage())\n  );\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eAfter joining a consumer group for receiving messages, a consumer can decide to leave the consumer group in order to\nnot get messages anymore using \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/kafka/client/consumer/KafkaConsumer.html#unsubscribe--\"\u003eunsubscribe\u003c/a\u003e\u003c/code\u003e\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003econsumer.unsubscribe();\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eYou can add an handler to be notified of the result\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003econsumer\n  .unsubscribe()\n  .onSuccess(v -\u0026gt;\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\"Consumer unsubscribed\"\u003c/span\u003e)\n  );\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_receiving_messages_from_a_topic_requesting_specific_partitions\"\u003e\u003ca class=\"anchor\" href=\"#_receiving_messages_from_a_topic_requesting_specific_partitions\"\u003e\u003c/a\u003eReceiving messages from a topic requesting specific partitions\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eBesides being part of a consumer group for receiving messages from a topic, a consumer can ask for a specific\ntopic partition. When the consumer is not part part of a consumer group the overall application cannot\nrely on the re-balancing feature.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eYou can use \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/kafka/client/consumer/KafkaConsumer.html#assign-java.util.Set-io.vertx.core.Handler-\"\u003eassign\u003c/a\u003e\u003c/code\u003e\nin order to ask for specific partitions.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003econsumer.handler(record -\u0026gt; {\n  System.out.println(\u003cspan class=\"hljs-string\"\u003e\"key=\"\u003c/span\u003e + record.key() + \u003cspan class=\"hljs-string\"\u003e\",value=\"\u003c/span\u003e + record.value() +\n    \u003cspan class=\"hljs-string\"\u003e\",partition=\"\u003c/span\u003e + record.partition() + \u003cspan class=\"hljs-string\"\u003e\",offset=\"\u003c/span\u003e + record.offset());\n});\n\n\u003cspan class=\"hljs-comment\"\u003e//\u003c/span\u003e\nSet\u0026lt;TopicPartition\u0026gt; topicPartitions = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e HashSet\u0026lt;\u0026gt;();\ntopicPartitions.add(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e TopicPartition()\n  .setTopic(\u003cspan class=\"hljs-string\"\u003e\"test\"\u003c/span\u003e)\n  .setPartition(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e));\n\n\u003cspan class=\"hljs-comment\"\u003e// requesting to be assigned the specific partition\u003c/span\u003e\nconsumer\n  .assign(topicPartitions)\n  .onSuccess(v -\u0026gt; System.out.println(\u003cspan class=\"hljs-string\"\u003e\"Partition assigned\"\u003c/span\u003e))\n  \u003cspan class=\"hljs-comment\"\u003e// After the assignment is completed, get the assigned partitions to this consumer\u003c/span\u003e\n  .compose(v -\u0026gt; consumer.assignment())\n  .onSuccess(partitions -\u0026gt; {\n    \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e (TopicPartition topicPartition : partitions) {\n      System.out.println(topicPartition.getTopic() + \u003cspan class=\"hljs-string\"\u003e\" \"\u003c/span\u003e + topicPartition.getPartition());\n    }\n  });\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eAs with \u003ccode\u003esubscribe()\u003c/code\u003e, the handler can be registered before or after the call to \u003ccode\u003eassign()\u003c/code\u003e;\nmessages won\u0026#8217;t be consumed until both methods have been called. This allows you to call\n\u003ccode\u003eassign()\u003c/code\u003e, then \u003ccode\u003eseek()\u003c/code\u003e and finally \u003ccode\u003ehandler()\u003c/code\u003e in\norder to only consume messages starting from a particular offset, for example.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eCalling \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/kafka/client/consumer/KafkaConsumer.html#assignment-io.vertx.core.Handler-\"\u003eassignment\u003c/a\u003e\u003c/code\u003e provides\nthe list of the current assigned partitions.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_receiving_messages_with_explicit_polling\"\u003e\u003ca class=\"anchor\" href=\"#_receiving_messages_with_explicit_polling\"\u003e\u003c/a\u003eReceiving messages with explicit polling\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eOther than using the internal polling mechanism in order to receive messages from Kafka, the client can subscribe to a\ntopic, avoiding to register the handler for getting the messages and then using the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/kafka/client/consumer/KafkaConsumer.html#poll-java.time.Duration-io.vertx.core.Handler-\"\u003epoll\u003c/a\u003e\u003c/code\u003e method.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIn this way, the user application is in charge to execute the poll for getting messages when it needs, for example after processing\nthe previous ones.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003econsumer\n  .subscribe(\u003cspan class=\"hljs-string\"\u003e\"test\"\u003c/span\u003e)\n  .onSuccess(v -\u0026gt; {\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\"Consumer subscribed\"\u003c/span\u003e);\n\n    \u003cspan class=\"hljs-comment\"\u003e// Let's poll every second\u003c/span\u003e\n    vertx.setPeriodic(\u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e, timerId -\u0026gt;\n      consumer\n        .poll(Duration.ofMillis(\u003cspan class=\"hljs-number\"\u003e100\u003c/span\u003e))\n        .onSuccess(records -\u0026gt; {\n          \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e (\u003cspan class=\"hljs-keyword\"\u003eint\u003c/span\u003e i = \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e; i \u0026lt; records.size(); i++) {\n            KafkaConsumerRecord\u0026lt;String, String\u0026gt; record = records.recordAt(i);\n            System.out.println(\u003cspan class=\"hljs-string\"\u003e\"key=\"\u003c/span\u003e + record.key() + \u003cspan class=\"hljs-string\"\u003e\",value=\"\u003c/span\u003e + record.value() +\n              \u003cspan class=\"hljs-string\"\u003e\",partition=\"\u003c/span\u003e + record.partition() + \u003cspan class=\"hljs-string\"\u003e\",offset=\"\u003c/span\u003e + record.offset());\n          }\n        })\n        .onFailure(cause -\u0026gt; {\n          System.out.println(\u003cspan class=\"hljs-string\"\u003e\"Something went wrong when polling \"\u003c/span\u003e + cause.toString());\n          cause.printStackTrace();\n\n          \u003cspan class=\"hljs-comment\"\u003e// Stop polling if something went wrong\u003c/span\u003e\n          vertx.cancelTimer(timerId);\n        })\n    );\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eAfter subscribing successfully, the application start a periodic timer in order to execute the poll and getting messages\nfrom Kafka periodically.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_changing_the_subscription_or_assignment\"\u003e\u003ca class=\"anchor\" href=\"#_changing_the_subscription_or_assignment\"\u003e\u003c/a\u003eChanging the subscription or assignment\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eYou can change the subscribed topics, or assigned partitions after you have started to consume messages, simply\nby calling \u003ccode\u003esubscribe()\u003c/code\u003e or \u003ccode\u003eassign()\u003c/code\u003e again.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eNote that due to internal buffering of messages it is possible that the record handler will continue to\nobserve messages from the old subscription or assignment \u003cem\u003eafter\u003c/em\u003e the \u003ccode\u003esubscribe()\u003c/code\u003e or \u003ccode\u003eassign()\u003c/code\u003e\nmethod\u0026#8217;s completion handler has been called. This is not the case for messages observed by the batch handler:\nOnce the completion handler has been called it will only observe messages read from the subscription or assignment.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_getting_topic_partition_information\"\u003e\u003ca class=\"anchor\" href=\"#_getting_topic_partition_information\"\u003e\u003c/a\u003eGetting topic partition information\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eYou can call the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/kafka/client/consumer/KafkaConsumer.html#partitionsFor-java.lang.String-io.vertx.core.Handler-\"\u003epartitionsFor\u003c/a\u003e\u003c/code\u003e to get information about\npartitions for a specified topic\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003econsumer\n  .partitionsFor(\u003cspan class=\"hljs-string\"\u003e\"test\"\u003c/span\u003e)\n  .onSuccess(partitions -\u0026gt; {\n    \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e (PartitionInfo partitionInfo : partitions) {\n      System.out.println(partitionInfo);\n    }\n  });\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIn addition \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/kafka/client/consumer/KafkaConsumer.html#listTopics-io.vertx.core.Handler-\"\u003elistTopics\u003c/a\u003e\u003c/code\u003e provides all available topics\nwith related partitions\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003econsumer\n  .listTopics()\n  .onSuccess(partitionsTopicMap -\u0026gt;\n    partitionsTopicMap.forEach((topic, partitions) -\u0026gt; {\n      System.out.println(\u003cspan class=\"hljs-string\"\u003e\"topic = \"\u003c/span\u003e + topic);\n      System.out.println(\u003cspan class=\"hljs-string\"\u003e\"partitions = \"\u003c/span\u003e + partitions);\n    })\n  );\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_manual_offset_commit\"\u003e\u003ca class=\"anchor\" href=\"#_manual_offset_commit\"\u003e\u003c/a\u003eManual offset commit\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIn Apache Kafka the consumer is in charge to handle the offset of the last read message.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThis is executed by the commit operation executed automatically every time a bunch of messages are read\nfrom a topic partition. The configuration parameter \u003ccode\u003eenable.auto.commit\u003c/code\u003e must be set to \u003ccode\u003etrue\u003c/code\u003e when the\nconsumer is created.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eManual offset commit, can be achieved with \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/kafka/client/consumer/KafkaConsumer.html#commit-io.vertx.core.Handler-\"\u003ecommit\u003c/a\u003e\u003c/code\u003e.\nIt can be used to achieve \u003cem\u003eat least once\u003c/em\u003e delivery to be sure that the read messages are processed before committing\nthe offset.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003econsumer.commit().onSuccess(v -\u0026gt;\n  System.out.println(\u003cspan class=\"hljs-string\"\u003e\"Last read message offset committed\"\u003c/span\u003e)\n);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_seeking_in_a_topic_partition\"\u003e\u003ca class=\"anchor\" href=\"#_seeking_in_a_topic_partition\"\u003e\u003c/a\u003eSeeking in a topic partition\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eApache Kafka can retain messages for a long period of time and the consumer can seek inside a topic partition\nand obtain arbitrary access to the messages.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eYou can use \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/kafka/client/consumer/KafkaConsumer.html#seek-io.vertx.kafka.client.common.TopicPartition-long-\"\u003eseek\u003c/a\u003e\u003c/code\u003e to change the offset for reading at a specific\nposition\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eTopicPartition topicPartition = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e TopicPartition()\n  .setTopic(\u003cspan class=\"hljs-string\"\u003e\"test\"\u003c/span\u003e)\n  .setPartition(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e);\n\n\u003cspan class=\"hljs-comment\"\u003e// seek to a specific offset\u003c/span\u003e\nconsumer\n  .seek(topicPartition, \u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e)\n  .onSuccess(v -\u0026gt; System.out.println(\u003cspan class=\"hljs-string\"\u003e\"Seeking done\"\u003c/span\u003e));\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eWhen the consumer needs to re-read the stream from the beginning, it can use \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/kafka/client/consumer/KafkaConsumer.html#seekToBeginning-io.vertx.kafka.client.common.TopicPartition-\"\u003eseekToBeginning\u003c/a\u003e\u003c/code\u003e\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eTopicPartition topicPartition = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e TopicPartition()\n  .setTopic(\u003cspan class=\"hljs-string\"\u003e\"test\"\u003c/span\u003e)\n  .setPartition(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e);\n\n\u003cspan class=\"hljs-comment\"\u003e// seek to the beginning of the partition\u003c/span\u003e\nconsumer\n  .seekToBeginning(Collections.singleton(topicPartition))\n  .onSuccess(v -\u0026gt; System.out.println(\u003cspan class=\"hljs-string\"\u003e\"Seeking done\"\u003c/span\u003e));\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eFinally \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/kafka/client/consumer/KafkaConsumer.html#seekToEnd-io.vertx.kafka.client.common.TopicPartition-\"\u003eseekToEnd\u003c/a\u003e\u003c/code\u003e can be used to come back at the end of the partition\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eTopicPartition topicPartition = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e TopicPartition()\n  .setTopic(\u003cspan class=\"hljs-string\"\u003e\"test\"\u003c/span\u003e)\n  .setPartition(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e);\n\n\u003cspan class=\"hljs-comment\"\u003e// seek to the end of the partition\u003c/span\u003e\nconsumer\n  .seekToEnd(Collections.singleton(topicPartition))\n  .onSuccess(v -\u0026gt; System.out.println(\u003cspan class=\"hljs-string\"\u003e\"Seeking done\"\u003c/span\u003e));\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eNote that due to internal buffering of messages it is possible that the record handler will continue to\nobserve messages read from the original offset for a time \u003cem\u003eafter\u003c/em\u003e the \u003ccode\u003eseek*()\u003c/code\u003e method\u0026#8217;s completion\nhandler has been called. This is not the case for messages observed by the batch handler: Once the\n\u003ccode\u003eseek*()\u003c/code\u003e completion handler has been called it will only observe messages read from the new offset.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_offset_lookup\"\u003e\u003ca class=\"anchor\" href=\"#_offset_lookup\"\u003e\u003c/a\u003eOffset lookup\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eYou can use the beginningOffsets API introduced in Kafka 0.10.1.1 to get the first offset\nfor a given partition. In contrast to \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/kafka/client/consumer/KafkaConsumer.html#seekToBeginning-io.vertx.kafka.client.common.TopicPartition-\"\u003eseekToBeginning\u003c/a\u003e\u003c/code\u003e,\nit does not change the consumer\u0026#8217;s offset.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eSet\u0026lt;TopicPartition\u0026gt; topicPartitions = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e HashSet\u0026lt;\u0026gt;();\nTopicPartition topicPartition = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e TopicPartition().setTopic(\u003cspan class=\"hljs-string\"\u003e\"test\"\u003c/span\u003e).setPartition(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e);\ntopicPartitions.add(topicPartition);\n\nconsumer\n  .beginningOffsets(topicPartitions)\n  .onSuccess(results -\u0026gt;\n    results.forEach((topic, beginningOffset) -\u0026gt;\n      System.out.println(\n        \u003cspan class=\"hljs-string\"\u003e\"Beginning offset for topic=\"\u003c/span\u003e + topic.getTopic() + \u003cspan class=\"hljs-string\"\u003e\", partition=\"\u003c/span\u003e +\n          topic.getPartition() + \u003cspan class=\"hljs-string\"\u003e\", beginningOffset=\"\u003c/span\u003e + beginningOffset\n      )\n    )\n  );\n\n\u003cspan class=\"hljs-comment\"\u003e// Convenience method for single-partition lookup\u003c/span\u003e\nconsumer\n  .beginningOffsets(topicPartition)\n  .onSuccess(beginningOffset -\u0026gt;\n    System.out.println(\n      \u003cspan class=\"hljs-string\"\u003e\"Beginning offset for topic=\"\u003c/span\u003e + topicPartition.getTopic() + \u003cspan class=\"hljs-string\"\u003e\", partition=\"\u003c/span\u003e +\n        topicPartition.getPartition() + \u003cspan class=\"hljs-string\"\u003e\", beginningOffset=\"\u003c/span\u003e + beginningOffset\n    )\n  );\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eYou can use the endOffsets API introduced in Kafka 0.10.1.1 to get the last offset\nfor a given partition. In contrast to \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/kafka/client/consumer/KafkaConsumer.html#seekToEnd-io.vertx.kafka.client.common.TopicPartition-\"\u003eseekToEnd\u003c/a\u003e\u003c/code\u003e,\nit does not change the consumer\u0026#8217;s offset.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eSet\u0026lt;TopicPartition\u0026gt; topicPartitions = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e HashSet\u0026lt;\u0026gt;();\nTopicPartition topicPartition = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e TopicPartition().setTopic(\u003cspan class=\"hljs-string\"\u003e\"test\"\u003c/span\u003e).setPartition(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e);\ntopicPartitions.add(topicPartition);\n\nconsumer.endOffsets(topicPartitions)\n  .onSuccess(results -\u0026gt;\n    results.forEach((topic, beginningOffset) -\u0026gt;\n      System.out.println(\n        \u003cspan class=\"hljs-string\"\u003e\"End offset for topic=\"\u003c/span\u003e + topic.getTopic() + \u003cspan class=\"hljs-string\"\u003e\", partition=\"\u003c/span\u003e +\n          topic.getPartition() + \u003cspan class=\"hljs-string\"\u003e\", beginningOffset=\"\u003c/span\u003e + beginningOffset\n      )\n    )\n  );\n\n\u003cspan class=\"hljs-comment\"\u003e// Convenience method for single-partition lookup\u003c/span\u003e\nconsumer\n  .endOffsets(topicPartition)\n  .onSuccess(endOffset -\u0026gt;\n    System.out.println(\n      \u003cspan class=\"hljs-string\"\u003e\"End offset for topic=\"\u003c/span\u003e + topicPartition.getTopic() + \u003cspan class=\"hljs-string\"\u003e\", partition=\"\u003c/span\u003e +\n        topicPartition.getPartition() + \u003cspan class=\"hljs-string\"\u003e\", endOffset=\"\u003c/span\u003e + endOffset\n    )\n);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eYou can use the offsetsForTimes API introduced in Kafka 0.10.1.1 to look up an offset by\ntimestamp, i.e. search parameter is an epoch timestamp and the call returns the lowest offset\nwith ingestion timestamp \u0026gt;= given timestamp.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eMap\u0026lt;TopicPartition, Long\u0026gt; topicPartitionsWithTimestamps = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e HashMap\u0026lt;\u0026gt;();\nTopicPartition topicPartition = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e TopicPartition().setTopic(\u003cspan class=\"hljs-string\"\u003e\"test\"\u003c/span\u003e).setPartition(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e);\n\n\u003cspan class=\"hljs-comment\"\u003e// We are interested in the offset for data ingested 60 seconds ago\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003elong\u003c/span\u003e timestamp = (System.currentTimeMillis() - \u003cspan class=\"hljs-number\"\u003e60000\u003c/span\u003e);\n\ntopicPartitionsWithTimestamps.put(topicPartition, timestamp);\nconsumer\n  .offsetsForTimes(topicPartitionsWithTimestamps)\n  .onSuccess(results -\u0026gt;\n    results.forEach((topic, offset) -\u0026gt;\n      System.out.println(\n        \u003cspan class=\"hljs-string\"\u003e\"Offset for topic=\"\u003c/span\u003e + topic.getTopic() +\n        \u003cspan class=\"hljs-string\"\u003e\", partition=\"\u003c/span\u003e + topic.getPartition() + \u003cspan class=\"hljs-string\"\u003e\"\\n\"\u003c/span\u003e +\n        \u003cspan class=\"hljs-string\"\u003e\", timestamp=\"\u003c/span\u003e + timestamp + \u003cspan class=\"hljs-string\"\u003e\", offset=\"\u003c/span\u003e + offset.getOffset() +\n        \u003cspan class=\"hljs-string\"\u003e\", offsetTimestamp=\"\u003c/span\u003e + offset.getTimestamp()\n      )\n    )\n);\n\n\u003cspan class=\"hljs-comment\"\u003e// Convenience method for single-partition lookup\u003c/span\u003e\nconsumer.offsetsForTimes(topicPartition, timestamp).onSuccess(offsetAndTimestamp -\u0026gt;\n  System.out.println(\n    \u003cspan class=\"hljs-string\"\u003e\"Offset for topic=\"\u003c/span\u003e + topicPartition.getTopic() +\n    \u003cspan class=\"hljs-string\"\u003e\", partition=\"\u003c/span\u003e + topicPartition.getPartition() + \u003cspan class=\"hljs-string\"\u003e\"\\n\"\u003c/span\u003e +\n    \u003cspan class=\"hljs-string\"\u003e\", timestamp=\"\u003c/span\u003e + timestamp + \u003cspan class=\"hljs-string\"\u003e\", offset=\"\u003c/span\u003e + offsetAndTimestamp.getOffset() +\n    \u003cspan class=\"hljs-string\"\u003e\", offsetTimestamp=\"\u003c/span\u003e + offsetAndTimestamp.getTimestamp()\n  )\n);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_message_flow_control\"\u003e\u003ca class=\"anchor\" href=\"#_message_flow_control\"\u003e\u003c/a\u003eMessage flow control\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eA consumer can control the incoming message flow and pause/resume the read operation from a topic, e.g it\ncan pause the message flow when it needs more time to process the actual messages and then resume\nto continue message processing.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eTo achieve that you can use \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/kafka/client/consumer/KafkaConsumer.html#pause--\"\u003epause\u003c/a\u003e\u003c/code\u003e and\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/kafka/client/consumer/KafkaConsumer.html#resume--\"\u003eresume\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIn the case of the partition-specific pause and resume it is possible that the record handler will continue to\nobserve messages from a paused partition for a time \u003cem\u003eafter\u003c/em\u003e the \u003ccode\u003epause()\u003c/code\u003e method\u0026#8217;s completion\nhandler has been called. This is not the case for messages observed by the batch handler: Once the\n\u003ccode\u003epause()\u003c/code\u003e completion handler has been called it will only observe messages from those partitions which\nare not paused.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eTopicPartition topicPartition = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e TopicPartition()\n  .setTopic(\u003cspan class=\"hljs-string\"\u003e\"test\"\u003c/span\u003e)\n  .setPartition(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e);\n\n\u003cspan class=\"hljs-comment\"\u003e// registering the handler for incoming messages\u003c/span\u003e\nconsumer.handler(record -\u0026gt; {\n  System.out.println(\u003cspan class=\"hljs-string\"\u003e\"key=\"\u003c/span\u003e + record.key() + \u003cspan class=\"hljs-string\"\u003e\",value=\"\u003c/span\u003e + record.value() +\n    \u003cspan class=\"hljs-string\"\u003e\",partition=\"\u003c/span\u003e + record.partition() + \u003cspan class=\"hljs-string\"\u003e\",offset=\"\u003c/span\u003e + record.offset());\n\n  \u003cspan class=\"hljs-comment\"\u003e// i.e. pause/resume on partition 0, after reading message up to offset 5\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e ((record.partition() == \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e) \u0026amp;\u0026amp; (record.offset() == \u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e)) {\n\n    \u003cspan class=\"hljs-comment\"\u003e// pause the read operations\u003c/span\u003e\n    consumer.pause(topicPartition)\n      .onSuccess(v -\u0026gt; System.out.println(\u003cspan class=\"hljs-string\"\u003e\"Paused\"\u003c/span\u003e))\n      .onSuccess(v -\u0026gt; vertx.setTimer(\u003cspan class=\"hljs-number\"\u003e5000\u003c/span\u003e, timeId -\u0026gt;\n        \u003cspan class=\"hljs-comment\"\u003e// resume read operations\u003c/span\u003e\n        consumer.resume(topicPartition)\n      ));\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_closing_a_consumer\"\u003e\u003ca class=\"anchor\" href=\"#_closing_a_consumer\"\u003e\u003c/a\u003eClosing a consumer\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eCall close to close the consumer. Closing the consumer closes any open connections and releases all consumer resources.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe close is actually asynchronous and might not complete until some time after the call has returned. If you want to be notified\nwhen the actual close has completed then you can pass in a handler.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThis handler will then be called when the close has fully completed.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003econsumer\n  .close()\n  .onSuccess(v -\u0026gt; System.out.println(\u003cspan class=\"hljs-string\"\u003e\"Consumer is now closed\"\u003c/span\u003e))\n  .onFailure(cause -\u0026gt; System.out.println(\u003cspan class=\"hljs-string\"\u003e\"Close failed: \"\u003c/span\u003e + cause));\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_sending_messages_to_a_topic\"\u003e\u003ca class=\"anchor\" href=\"#_sending_messages_to_a_topic\"\u003e\u003c/a\u003eSending messages to a topic\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eYou can use  \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/streams/WriteStream.html#write-java.lang.Object-\"\u003ewrite\u003c/a\u003e\u003c/code\u003e to send messages (records) to a topic.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe simplest way to send a message is to specify only the destination topic and the related value, omitting its key\nor partition, in this case the messages are sent in a round robin fashion across all the partitions of the topic.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003e\u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e (\u003cspan class=\"hljs-keyword\"\u003eint\u003c/span\u003e i = \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e; i \u0026lt; \u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e; i++) {\n\n  \u003cspan class=\"hljs-comment\"\u003e// only topic and message value are specified, round robin on destination partitions\u003c/span\u003e\n  KafkaProducerRecord\u0026lt;String, String\u0026gt; record =\n    KafkaProducerRecord.create(\u003cspan class=\"hljs-string\"\u003e\"test\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"message_\"\u003c/span\u003e + i);\n\n  producer.write(record);\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eYou can receive message sent metadata like its topic, its destination partition and its assigned offset.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003e\u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e (\u003cspan class=\"hljs-keyword\"\u003eint\u003c/span\u003e i = \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e; i \u0026lt; \u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e; i++) {\n\n  \u003cspan class=\"hljs-comment\"\u003e// only topic and message value are specified, round robin on destination partitions\u003c/span\u003e\n  KafkaProducerRecord\u0026lt;String, String\u0026gt; record =\n    KafkaProducerRecord.create(\u003cspan class=\"hljs-string\"\u003e\"test\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"message_\"\u003c/span\u003e + i);\n\n  producer.send(record).onSuccess(recordMetadata -\u0026gt;\n    System.out.println(\n      \u003cspan class=\"hljs-string\"\u003e\"Message \"\u003c/span\u003e + record.value() + \u003cspan class=\"hljs-string\"\u003e\" written on topic=\"\u003c/span\u003e + recordMetadata.getTopic() +\n      \u003cspan class=\"hljs-string\"\u003e\", partition=\"\u003c/span\u003e + recordMetadata.getPartition() +\n      \u003cspan class=\"hljs-string\"\u003e\", offset=\"\u003c/span\u003e + recordMetadata.getOffset()\n    )\n  );\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eWhen you need to assign a partition to a message, you can specify its partition identifier\nor its key\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003e\u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e (\u003cspan class=\"hljs-keyword\"\u003eint\u003c/span\u003e i = \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e; i \u0026lt; \u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e; i++) {\n\n  \u003cspan class=\"hljs-comment\"\u003e// a destination partition is specified\u003c/span\u003e\n  KafkaProducerRecord\u0026lt;String, String\u0026gt; record =\n    KafkaProducerRecord.create(\u003cspan class=\"hljs-string\"\u003e\"test\"\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003enull\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"message_\"\u003c/span\u003e + i, \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e);\n\n  producer.write(record);\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eSince the producers identifies the destination using key hashing, you can use that to guarantee that all\nmessages with the same key are sent to the same partition and retain the order.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003e\u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e (\u003cspan class=\"hljs-keyword\"\u003eint\u003c/span\u003e i = \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e; i \u0026lt; \u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e; i++) {\n\n  \u003cspan class=\"hljs-comment\"\u003e// i.e. defining different keys for odd and even messages\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003eint\u003c/span\u003e key = i % \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e;\n\n  \u003cspan class=\"hljs-comment\"\u003e// a key is specified, all messages with same key will be sent to the same partition\u003c/span\u003e\n  KafkaProducerRecord\u0026lt;String, String\u0026gt; record =\n    KafkaProducerRecord.create(\u003cspan class=\"hljs-string\"\u003e\"test\"\u003c/span\u003e, String.valueOf(key), \u003cspan class=\"hljs-string\"\u003e\"message_\"\u003c/span\u003e + i);\n\n  producer.write(record);\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"admonitionblock note\"\u003e\n\u003ctable\u003e\n\u003ctr\u003e\n\u003ctd class=\"icon\"\u003e\n\u003cdiv class=\"title\"\u003e注意\u003c/div\u003e\n\u003c/td\u003e\n\u003ctd class=\"content\"\u003e\nthe shared producer is created on the first \u003ccode\u003ecreateShared\u003c/code\u003e call and its configuration is defined at this moment,\nshared producer usage must use the same configuration.\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_sharing_a_producer\"\u003e\u003ca class=\"anchor\" href=\"#_sharing_a_producer\"\u003e\u003c/a\u003eSharing a producer\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eSometimes you want to share the same producer from within several verticles or contexts.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eCalling \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/kafka/client/producer/KafkaProducer.html#createShared-io.vertx.core.Vertx-java.lang.String-java.util.Map-\"\u003eKafkaProducer.createShared\u003c/a\u003e\u003c/code\u003e\nreturns a producer that can be shared safely.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eKafkaProducer\u0026lt;String, String\u0026gt; producer1 = KafkaProducer.createShared(vertx, \u003cspan class=\"hljs-string\"\u003e\"the-producer\"\u003c/span\u003e, config);\n\n\u003cspan class=\"hljs-comment\"\u003e// Sometimes later you can close it\u003c/span\u003e\nproducer1.close();\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe same resources (thread, connection) will be shared between the producer returned by this method.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eWhen you are done with the producer, just close it, when all shared producers are closed, the resources will\nbe released for you.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_closing_a_producer\"\u003e\u003ca class=\"anchor\" href=\"#_closing_a_producer\"\u003e\u003c/a\u003eClosing a producer\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eCall close to close the producer. Closing the producer closes any open connections and releases all producer resources.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe close is actually asynchronous and might not complete until some time after the call has returned. If you want to be notified\nwhen the actual close has completed then you can pass in a handler.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThis handler will then be called when the close has fully completed.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eproducer\n  .close()\n  .onSuccess(v -\u0026gt; System.out.println(\u003cspan class=\"hljs-string\"\u003e\"Producer is now closed\"\u003c/span\u003e))\n  .onFailure(cause -\u0026gt; System.out.println(\u003cspan class=\"hljs-string\"\u003e\"Close failed: \"\u003c/span\u003e + cause));\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_getting_topic_partition_information_2\"\u003e\u003ca class=\"anchor\" href=\"#_getting_topic_partition_information_2\"\u003e\u003c/a\u003eGetting topic partition information\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eYou can call the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/kafka/client/producer/KafkaProducer.html#partitionsFor-java.lang.String-io.vertx.core.Handler-\"\u003epartitionsFor\u003c/a\u003e\u003c/code\u003e to get information about\npartitions for a specified topic:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eproducer\n  .partitionsFor(\u003cspan class=\"hljs-string\"\u003e\"test\"\u003c/span\u003e)\n  .onSuccess(partitions -\u0026gt;\n    partitions.forEach(System.out::println)\n  );\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_handling_errors\"\u003e\u003ca class=\"anchor\" href=\"#_handling_errors\"\u003e\u003c/a\u003eHandling errors\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eErrors handling (e.g timeout) between a Kafka client (consumer or producer) and the Kafka cluster is done using\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/kafka/client/consumer/KafkaConsumer.html#exceptionHandler-io.vertx.core.Handler-\"\u003eexceptionHandler\u003c/a\u003e\u003c/code\u003e or\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/kafka/client/producer/KafkaProducer.html#exceptionHandler-io.vertx.core.Handler-\"\u003eexceptionHandler\u003c/a\u003e\u003c/code\u003e\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003econsumer.exceptionHandler(e -\u0026gt; {\n  System.out.println(\u003cspan class=\"hljs-string\"\u003e\"Error = \"\u003c/span\u003e + e.getMessage());\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_automatic_clean_up_in_verticles\"\u003e\u003ca class=\"anchor\" href=\"#_automatic_clean_up_in_verticles\"\u003e\u003c/a\u003eAutomatic clean-up in verticles\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIf you’re creating consumers and producer from inside verticles, those consumers and producers will be automatically\nclosed when the verticle is undeployed.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_using_vert_x_serializersdeserializers\"\u003e\u003ca class=\"anchor\" href=\"#_using_vert_x_serializersdeserializers\"\u003e\u003c/a\u003eUsing Vert.x serializers/deserializers\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eVert.x Kafka client comes out of the box with serializers and deserializers for buffers, json object\nand json array.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIn a consumer you can use buffers\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eMap\u0026lt;String, String\u0026gt; config = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e HashMap\u0026lt;\u0026gt;();\nconfig.put(\u003cspan class=\"hljs-string\"\u003e\"bootstrap.servers\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"localhost:9092\"\u003c/span\u003e);\nconfig.put(\u003cspan class=\"hljs-string\"\u003e\"key.deserializer\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"io.vertx.kafka.client.serialization.BufferDeserializer\"\u003c/span\u003e);\nconfig.put(\u003cspan class=\"hljs-string\"\u003e\"value.deserializer\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"io.vertx.kafka.client.serialization.BufferDeserializer\"\u003c/span\u003e);\nconfig.put(\u003cspan class=\"hljs-string\"\u003e\"group.id\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"my_group\"\u003c/span\u003e);\nconfig.put(\u003cspan class=\"hljs-string\"\u003e\"auto.offset.reset\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"earliest\"\u003c/span\u003e);\nconfig.put(\u003cspan class=\"hljs-string\"\u003e\"enable.auto.commit\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"false\"\u003c/span\u003e);\n\n\u003cspan class=\"hljs-comment\"\u003e// Creating a consumer able to deserialize to json object\u003c/span\u003e\nconfig = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e HashMap\u0026lt;\u0026gt;();\nconfig.put(\u003cspan class=\"hljs-string\"\u003e\"bootstrap.servers\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"localhost:9092\"\u003c/span\u003e);\nconfig.put(\u003cspan class=\"hljs-string\"\u003e\"key.deserializer\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"io.vertx.kafka.client.serialization.JsonObjectDeserializer\"\u003c/span\u003e);\nconfig.put(\u003cspan class=\"hljs-string\"\u003e\"value.deserializer\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"io.vertx.kafka.client.serialization.JsonObjectDeserializer\"\u003c/span\u003e);\nconfig.put(\u003cspan class=\"hljs-string\"\u003e\"group.id\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"my_group\"\u003c/span\u003e);\nconfig.put(\u003cspan class=\"hljs-string\"\u003e\"auto.offset.reset\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"earliest\"\u003c/span\u003e);\nconfig.put(\u003cspan class=\"hljs-string\"\u003e\"enable.auto.commit\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"false\"\u003c/span\u003e);\n\n\u003cspan class=\"hljs-comment\"\u003e// Creating a consumer able to deserialize to json array\u003c/span\u003e\nconfig = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e HashMap\u0026lt;\u0026gt;();\nconfig.put(\u003cspan class=\"hljs-string\"\u003e\"bootstrap.servers\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"localhost:9092\"\u003c/span\u003e);\nconfig.put(\u003cspan class=\"hljs-string\"\u003e\"key.deserializer\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"io.vertx.kafka.client.serialization.JsonArrayDeserializer\"\u003c/span\u003e);\nconfig.put(\u003cspan class=\"hljs-string\"\u003e\"value.deserializer\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"io.vertx.kafka.client.serialization.JsonArrayDeserializer\"\u003c/span\u003e);\nconfig.put(\u003cspan class=\"hljs-string\"\u003e\"group.id\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"my_group\"\u003c/span\u003e);\nconfig.put(\u003cspan class=\"hljs-string\"\u003e\"auto.offset.reset\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"earliest\"\u003c/span\u003e);\nconfig.put(\u003cspan class=\"hljs-string\"\u003e\"enable.auto.commit\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"false\"\u003c/span\u003e);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eOr in a producer\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eMap\u0026lt;String, String\u0026gt; config = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e HashMap\u0026lt;\u0026gt;();\nconfig.put(\u003cspan class=\"hljs-string\"\u003e\"bootstrap.servers\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"localhost:9092\"\u003c/span\u003e);\nconfig.put(\u003cspan class=\"hljs-string\"\u003e\"key.serializer\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"io.vertx.kafka.client.serialization.BufferSerializer\"\u003c/span\u003e);\nconfig.put(\u003cspan class=\"hljs-string\"\u003e\"value.serializer\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"io.vertx.kafka.client.serialization.BufferSerializer\"\u003c/span\u003e);\nconfig.put(\u003cspan class=\"hljs-string\"\u003e\"acks\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"1\"\u003c/span\u003e);\n\n\u003cspan class=\"hljs-comment\"\u003e// Creating a producer able to serialize to json object\u003c/span\u003e\nconfig = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e HashMap\u0026lt;\u0026gt;();\nconfig.put(\u003cspan class=\"hljs-string\"\u003e\"bootstrap.servers\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"localhost:9092\"\u003c/span\u003e);\nconfig.put(\u003cspan class=\"hljs-string\"\u003e\"key.serializer\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"io.vertx.kafka.client.serialization.JsonObjectSerializer\"\u003c/span\u003e);\nconfig.put(\u003cspan class=\"hljs-string\"\u003e\"value.serializer\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"io.vertx.kafka.client.serialization.JsonObjectSerializer\"\u003c/span\u003e);\nconfig.put(\u003cspan class=\"hljs-string\"\u003e\"acks\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"1\"\u003c/span\u003e);\n\n\u003cspan class=\"hljs-comment\"\u003e// Creating a producer able to serialize to json array\u003c/span\u003e\nconfig = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e HashMap\u0026lt;\u0026gt;();\nconfig.put(\u003cspan class=\"hljs-string\"\u003e\"bootstrap.servers\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"localhost:9092\"\u003c/span\u003e);\nconfig.put(\u003cspan class=\"hljs-string\"\u003e\"key.serializer\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"io.vertx.kafka.client.serialization.JsonArraySerializer\"\u003c/span\u003e);\nconfig.put(\u003cspan class=\"hljs-string\"\u003e\"value.serializer\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"io.vertx.kafka.client.serialization.JsonArraySerializer\"\u003c/span\u003e);\nconfig.put(\u003cspan class=\"hljs-string\"\u003e\"acks\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"1\"\u003c/span\u003e);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eYou can also specify the serializers/deserializers at creation time:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIn a consumer\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eMap\u0026lt;String, String\u0026gt; config = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e HashMap\u0026lt;\u0026gt;();\nconfig.put(\u003cspan class=\"hljs-string\"\u003e\"bootstrap.servers\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"localhost:9092\"\u003c/span\u003e);\nconfig.put(\u003cspan class=\"hljs-string\"\u003e\"group.id\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"my_group\"\u003c/span\u003e);\nconfig.put(\u003cspan class=\"hljs-string\"\u003e\"auto.offset.reset\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"earliest\"\u003c/span\u003e);\nconfig.put(\u003cspan class=\"hljs-string\"\u003e\"enable.auto.commit\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"false\"\u003c/span\u003e);\n\n\u003cspan class=\"hljs-comment\"\u003e// Creating a consumer able to deserialize buffers\u003c/span\u003e\nKafkaConsumer\u0026lt;Buffer, Buffer\u0026gt; bufferConsumer = KafkaConsumer.create(vertx, config, Buffer\u003cspan class=\"hljs-class\"\u003e.\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e, \u003cspan class=\"hljs-title\"\u003eBuffer\u003c/span\u003e.\u003cspan class=\"hljs-title\"\u003eclass\u003c/span\u003e)\u003c/span\u003e;\n\n\u003cspan class=\"hljs-comment\"\u003e// Creating a consumer able to deserialize json objects\u003c/span\u003e\nKafkaConsumer\u0026lt;JsonObject, JsonObject\u0026gt; jsonObjectConsumer = KafkaConsumer.create(vertx, config, JsonObject\u003cspan class=\"hljs-class\"\u003e.\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e, \u003cspan class=\"hljs-title\"\u003eJsonObject\u003c/span\u003e.\u003cspan class=\"hljs-title\"\u003eclass\u003c/span\u003e)\u003c/span\u003e;\n\n\u003cspan class=\"hljs-comment\"\u003e// Creating a consumer able to deserialize json arrays\u003c/span\u003e\nKafkaConsumer\u0026lt;JsonArray, JsonArray\u0026gt; jsonArrayConsumer = KafkaConsumer.create(vertx, config, JsonArray\u003cspan class=\"hljs-class\"\u003e.\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e, \u003cspan class=\"hljs-title\"\u003eJsonArray\u003c/span\u003e.\u003cspan class=\"hljs-title\"\u003eclass\u003c/span\u003e)\u003c/span\u003e;\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eOr in a producer\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eMap\u0026lt;String, String\u0026gt; config = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e HashMap\u0026lt;\u0026gt;();\nconfig.put(\u003cspan class=\"hljs-string\"\u003e\"bootstrap.servers\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"localhost:9092\"\u003c/span\u003e);\nconfig.put(\u003cspan class=\"hljs-string\"\u003e\"acks\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"1\"\u003c/span\u003e);\n\n\u003cspan class=\"hljs-comment\"\u003e// Creating a producer able to serialize to buffers\u003c/span\u003e\nKafkaProducer\u0026lt;Buffer, Buffer\u0026gt; bufferProducer = KafkaProducer.create(vertx, config, Buffer\u003cspan class=\"hljs-class\"\u003e.\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e, \u003cspan class=\"hljs-title\"\u003eBuffer\u003c/span\u003e.\u003cspan class=\"hljs-title\"\u003eclass\u003c/span\u003e)\u003c/span\u003e;\n\n\u003cspan class=\"hljs-comment\"\u003e// Creating a producer able to serialize to json objects\u003c/span\u003e\nKafkaProducer\u0026lt;JsonObject, JsonObject\u0026gt; jsonObjectProducer = KafkaProducer.create(vertx, config, JsonObject\u003cspan class=\"hljs-class\"\u003e.\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e, \u003cspan class=\"hljs-title\"\u003eJsonObject\u003c/span\u003e.\u003cspan class=\"hljs-title\"\u003eclass\u003c/span\u003e)\u003c/span\u003e;\n\n\u003cspan class=\"hljs-comment\"\u003e// Creating a producer able to serialize to json arrays\u003c/span\u003e\nKafkaProducer\u0026lt;JsonArray, JsonArray\u0026gt; jsonArrayProducer = KafkaProducer.create(vertx, config, JsonArray\u003cspan class=\"hljs-class\"\u003e.\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e, \u003cspan class=\"hljs-title\"\u003eJsonArray\u003c/span\u003e.\u003cspan class=\"hljs-title\"\u003eclass\u003c/span\u003e)\u003c/span\u003e;\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_rxjava_2_api\"\u003e\u003ca class=\"anchor\" href=\"#_rxjava_2_api\"\u003e\u003c/a\u003eRxJava 2 API\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe Kafka client provides an Rxified version of the original API.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eObservable\u0026lt;KafkaConsumerRecord\u0026lt;String, Long\u0026gt;\u0026gt; observable = consumer.toObservable();\n\nobservable\n  .map(record -\u0026gt; record.value())\n  .buffer(\u003cspan class=\"hljs-number\"\u003e256\u003c/span\u003e)\n  .map(\n  list -\u0026gt; list.stream().mapToDouble(n -\u0026gt; n).average()\n).subscribe(val -\u0026gt; {\n\n  \u003cspan class=\"hljs-comment\"\u003e// Obtained an average\u003c/span\u003e\n\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_automatic_trace_propagation\"\u003e\u003ca class=\"anchor\" href=\"#_automatic_trace_propagation\"\u003e\u003c/a\u003eAutomatic trace propagation\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eWhen Vert.x is configured with Tracing enabled (see \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/VertxOptions.html#setTracingOptions-io.vertx.core.tracing.TracingOptions-\"\u003esetTracingOptions\u003c/a\u003e\u003c/code\u003e),\ntraces will be automatically propagated with Kafka messages.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eKafka producers will add a span to traces when a message is being written, trace contexts\nwill be propagated as Kafka headers, and the consumers will also create a span while reading a message.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eFollowing the\n\u003ca href=\"https://github.com/opentracing/specification/blob/master/semantic_conventions.md\"\u003eOpenTracing semantic convention\u003c/a\u003e,\nspan tags are:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003espan.kind\u003c/code\u003e, it is either \u003ccode\u003econsumer\u003c/code\u003e or \u003ccode\u003eproducer\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003epeer.address\u003c/code\u003e can be configured from \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/kafka/client/common/KafkaClientOptions.html#setTracePeerAddress-java.lang.String-\"\u003esetTracePeerAddress\u003c/a\u003e\u003c/code\u003e. If unset, it will be the configured bootstrap server.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003epeer.hostname\u003c/code\u003e is parsed from \u003ccode\u003epeer.address\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003epeer.port\u003c/code\u003e is parsed from \u003ccode\u003epeer.address\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003epeer.service\u003c/code\u003e is always \u003ccode\u003ekafka\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003emessage_bus.destination\u003c/code\u003e, which is set to the topic in use\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eUnresolved directive in index.adoc - include::admin.adoc[]\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e","version":"4.1.0"},"__N_SSG":true},"page":"/docs/[[...slug]]","query":{"slug":["4.1.0","vertx-kafka-client","java"]},"buildId":"LK-jy0Y5kaukLaMksM05J","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-9a5c89434732593ca2fd.js"></script><script src="/_next/static/chunks/main-b6e20584df76f29b6f35.js" async=""></script><script src="/_next/static/chunks/webpack-d7b2fb72fb7257504a38.js" async=""></script><script src="/_next/static/chunks/framework.fcef98db13e2318579fb.js" async=""></script><script src="/_next/static/chunks/commons.5b8771ac6e8a338f82f1.js" async=""></script><script src="/_next/static/chunks/styles.7064a0f84b2a7c13404a.js" async=""></script><script src="/_next/static/chunks/pages/_app-3dbbc9c041333077c167.js" async=""></script><script src="/_next/static/chunks/5df0631eea625b022d3730b3f1bf573e1b8deb37.2c5d42edba8dda0b0ba3.js" async=""></script><script src="/_next/static/chunks/31acfd8439b7c9eee4abe9f59c7500d6c943ee0d.94431b87599713e5bc18.js" async=""></script><script src="/_next/static/chunks/pages/docs/%5B%5B...slug%5D%5D-3a425d1828d3af7aa498.js" async=""></script><script src="/_next/static/LK-jy0Y5kaukLaMksM05J/_buildManifest.js" async=""></script><script src="/_next/static/LK-jy0Y5kaukLaMksM05J/_ssgManifest.js" async=""></script></body></html>