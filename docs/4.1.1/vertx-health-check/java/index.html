<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="description" content="Vert.x | Reactive applications on the JVM"/><meta name="robots" content="index,follow"/><link rel="stylesheet" data-href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" data-optimized-fonts="true"/><link rel="stylesheet" data-href="https://fonts.googleapis.com/css?family=Roboto+Condensed:300,400" data-optimized-fonts="true"/><link rel="stylesheet" data-href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400&amp;display=swap" data-optimized-fonts="true"/><link rel="shortcut icon" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="48x48" href="/favicons/favicon-48x48.png"/><link rel="alternate" type="application/rss+xml" href="/feed/rss.xml"/><link rel="alternate" type="application/atom+xml" href="/feed/atom.xml"/><link rel="alternate" type="application/json" href="/feed/feed.json"/><title>健康检查 | Eclipse Vert.x</title><link rel="preload" href="https://api.github.com/repos/vert-x3/vertx-health-check" as="fetch" crossorigin="anonymous"/><meta name="next-head-count" content="17"/><link rel="preload" href="/_next/static/css/styles.e1237c95.chunk.css" as="style"/><link rel="stylesheet" href="/_next/static/css/styles.e1237c95.chunk.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/webpack-147ea3ada7109f6dc0bb.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.2d0daf90a2fa7e03281a.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.58af5f72dd3f80f51ddc.js" as="script"/><link rel="preload" href="/_next/static/chunks/main-78880972fb4b65194263.js" as="script"/><link rel="preload" href="/_next/static/chunks/styles.eb11bd7b649b32af6115.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-e598384803edc4a6782d.js" as="script"/><link rel="preload" href="/_next/static/chunks/5df0631eea625b022d3730b3f1bf573e1b8deb37.0b8151d407694e31e2a2.js" as="script"/><link rel="preload" href="/_next/static/chunks/31acfd8439b7c9eee4abe9f59c7500d6c943ee0d.74b85118e963a61f1bf8.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/docs/%5B%5B...slug%5D%5D-de110bc5466c276a0759.js" as="script"/><style data-href="https://fonts.googleapis.com/css?family=Roboto:300,400,500">@font-face{font-family:'Roboto';font-style:normal;font-weight:300;src:url(https://fonts.gstatic.com/s/roboto/v27/KFOlCnqEu92Fr1MmSU5fBBc-.woff) format('woff')}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/roboto/v27/KFOmCnqEu92Fr1Mu4mxM.woff) format('woff')}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;src:url(https://fonts.gstatic.com/s/roboto/v27/KFOlCnqEu92Fr1MmEU9fBBc-.woff) format('woff')}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;src:url(https://fonts.gstatic.com/s/roboto/v27/KFOlCnqEu92Fr1MmSU5fCRc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;src:url(https://fonts.gstatic.com/s/roboto/v27/KFOlCnqEu92Fr1MmSU5fABc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;src:url(https://fonts.gstatic.com/s/roboto/v27/KFOlCnqEu92Fr1MmSU5fCBc4AMP6lbBP.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;src:url(https://fonts.gstatic.com/s/roboto/v27/KFOlCnqEu92Fr1MmSU5fBxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;src:url(https://fonts.gstatic.com/s/roboto/v27/KFOlCnqEu92Fr1MmSU5fCxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;src:url(https://fonts.gstatic.com/s/roboto/v27/KFOlCnqEu92Fr1MmSU5fChc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;src:url(https://fonts.gstatic.com/s/roboto/v27/KFOlCnqEu92Fr1MmSU5fBBc4AMP6lQ.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/roboto/v27/KFOmCnqEu92Fr1Mu72xKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/roboto/v27/KFOmCnqEu92Fr1Mu5mxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/roboto/v27/KFOmCnqEu92Fr1Mu7mxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/roboto/v27/KFOmCnqEu92Fr1Mu4WxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/roboto/v27/KFOmCnqEu92Fr1Mu7WxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/roboto/v27/KFOmCnqEu92Fr1Mu7GxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/roboto/v27/KFOmCnqEu92Fr1Mu4mxKKTU1Kg.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;src:url(https://fonts.gstatic.com/s/roboto/v27/KFOlCnqEu92Fr1MmEU9fCRc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;src:url(https://fonts.gstatic.com/s/roboto/v27/KFOlCnqEu92Fr1MmEU9fABc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;src:url(https://fonts.gstatic.com/s/roboto/v27/KFOlCnqEu92Fr1MmEU9fCBc4AMP6lbBP.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;src:url(https://fonts.gstatic.com/s/roboto/v27/KFOlCnqEu92Fr1MmEU9fBxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;src:url(https://fonts.gstatic.com/s/roboto/v27/KFOlCnqEu92Fr1MmEU9fCxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;src:url(https://fonts.gstatic.com/s/roboto/v27/KFOlCnqEu92Fr1MmEU9fChc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;src:url(https://fonts.gstatic.com/s/roboto/v27/KFOlCnqEu92Fr1MmEU9fBBc4AMP6lQ.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style><style data-href="https://fonts.googleapis.com/css?family=Roboto+Condensed:300,400">@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCQYaQ.woff) format('woff')}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVl2ZhZI2eCN5jzbjEETS9weq8-19K7Cw.woff) format('woff')}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCkYb9lecyVC4A.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCAYb9lecyVC4A.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCgYb9lecyVC4A.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCcYb9lecyVC4A.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCsYb9lecyVC4A.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCoYb9lecyVC4A.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCQYb9lecyU.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVl2ZhZI2eCN5jzbjEETS9weq8-19-7DQk6YvNkeg.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVl2ZhZI2eCN5jzbjEETS9weq8-19a7DQk6YvNkeg.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVl2ZhZI2eCN5jzbjEETS9weq8-1967DQk6YvNkeg.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVl2ZhZI2eCN5jzbjEETS9weq8-19G7DQk6YvNkeg.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVl2ZhZI2eCN5jzbjEETS9weq8-1927DQk6YvNkeg.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVl2ZhZI2eCN5jzbjEETS9weq8-19y7DQk6YvNkeg.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/robotocondensed/v19/ieVl2ZhZI2eCN5jzbjEETS9weq8-19K7DQk6YvM.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style><style data-href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400&display=swap">@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vqPQA.woff) format('woff')}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vq_SeW-AJi8SJQtQ4Y.woff) format('woff');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vq_QOW-AJi8SJQtQ4Y.woff) format('woff');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vq_R-W-AJi8SJQtQ4Y.woff) format('woff');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vq_S-W-AJi8SJQtQ4Y.woff) format('woff');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vq_SuW-AJi8SJQtQ4Y.woff) format('woff');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vq_ROW-AJi8SJQt.woff) format('woff');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><body data-build-time="2021-07-02T04:08:16.820Z" data-build-commit-id="5efaf0bd434bea6d8b2b527840654ffca79bae08" data-build-run-id="992373186"><div id="__next"><main class="page docs"><header><div class="navbar"><div class="navbar-content container"><div class="navbar-logo"><a href="/"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAxMjMyLjYgMzE1LjIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDEyMzIuNiAzMTUuMiIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHN0eWxlPi5zdDB7ZmlsbDojNzgyYTkxfTwvc3R5bGU+PHBhdGggZD0iTTEyMC45IDIxNC4yIDE5MC41IDBoNTIuM2wtOTguNSAyNzMuOEg5OC4yTDAgMGg1Mi4xbDY4LjggMjE0LjJ6bTI5MS4yLTYyLjZIMjk5LjZ2ODQuMkg0MzF2MzhIMjUyVjBoMTc3Ljd2MzguNEgyOTkuNlYxMTRoMTEyLjV2MzcuNnptODMuNy0xMTMuMkg1NDZjMTYuNS4zIDI5IDQuNCAzNy4zIDEyLjQgOC4zIDggMTIuNSAxOS40IDEyLjUgMzQgMCAxNC00LjUgMjUuMS0xMy41IDMzLjItOSA4LjEtMjEuNiAxMi4xLTM3LjYgMTIuMWgtMjcuMXYyNC4ybDg2LjEgMTE5LjVoNTF2LTIuNGwtNzcuMi0xMDYuN2MyNC45LTUuNSA0My4zLTIxLjcgNTIuNi0zNS45IDguMi0xMi42IDEzLjMtMjcuNyAxMy4zLTQ2IDAtMjYuOC04LjYtNDcuNC0yNS44LTYxLjVDNjAwLjUgNy4xIDU3Ni4xIDAgNTQ0LjUgMGgtOTYuM3YyNzMuOGg0Ny42Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0ibTEwNTIuMyAxNTcuNy00MS41IDYyLjcgMjkuNyA1My40aDg1LjF6Ii8+PGNpcmNsZSBjbGFzcz0ic3QwIiBjeD0iODI3LjkiIGN5PSIyNzQuNyIgcj0iNDAuNSIvPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Im0xMDM3IDAtNDcuNiA3NC4yTDk0OSAwaC04NGw4NS4zIDEzNS44LTY3LjEgMTA1LjdjNS43IDkuNSA5LjEgMjAuNSA5LjIgMzIuNGg1MC4xTDExMjEuMyAwSDEwMzd6Ii8+PHBhdGggZD0iTTc2My41IDI3My44Yy4xLTkuOSAyLjUtMTkuMiA2LjYtMjcuNVYzOC40aDg1LjRWMEg2MzguMnYzOC40aDg0LjZ2MjM1LjRoNDAuN3ptNDE0LTI2Ni45aC0xNS4zdjQyLjJoLTguNVY2LjloLTE1LjJWMGgzOXY2Ljl6TTExOTMgMGwxNC4yIDM3LjdMMTIyMS4zIDBoMTF2NDkuMWgtOC41VjMyLjlsLjgtMjEuNy0xNC41IDM3LjloLTYuMWwtMTQuNS0zNy44LjggMjEuNnYxNi4yaC04LjVWMGgxMS4yeiIvPjwvc3ZnPg==" alt="Vert.x Logo"/></a></div><div class="navbar-collapse-button"><span></span><span></span><span></span></div><div class="navbar-right"><div class="navbar-menu"><span class="navbar-menu-item with-drop-down"><div class="dropdown"><a class="dropdown-title">开始<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="dropdown-menu"><a href="/introduction-to-vertx-and-reactive/"><li class="dropdown-item">简介</li></a><a href="/get-started/"><li class="dropdown-item">开始</li></a><a href="https://start.vertx.io/" target="_blank" rel="noreferrer"><li class="dropdown-item">应用生成器 <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a></ul></div></span><a class="navbar-menu-item" href="/docs/">文档</a><span class="navbar-menu-item with-drop-down"><div class="dropdown"><a class="dropdown-title">资源<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="dropdown-menu"><a href="/faq/"><li class="dropdown-item">答疑</li></a><a href="/channels/"><li class="dropdown-item">联系渠道</li></a><a href="https://how-to.vertx.io/" target="_blank" rel="noreferrer"><li class="dropdown-item">操作指南 <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a><a href="https://github.com/vert-x3/vertx-eventbus-bridge-clients" target="_blank" rel="noreferrer"><li class="dropdown-item">EventBus Bridge Clients <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a></ul></div></span><a class="navbar-menu-item" href="/blog/">博客</a><a class="navbar-menu-item" href="/community/">社区</a><a class="navbar-menu-item" href="/translation/">翻译团队</a></div><div class="navbar-social"><a href="https://github.com/vert-x3/vertx-awesome" class="navbar-social-link" title="Awesome Vert.x" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="List of awesome Vert.x projects"><title>Awesome Vert.x</title><path d="M24 11.438l-6.154-5.645-.865.944 5.128 4.7H1.895l5.128-4.705-.865-.943-6.154 5.649H0v3.72c0 1.683 1.62 3.053 3.61 3.053h3.795c1.99 0 3.61-1.37 3.61-3.051v-2.446h1.97v2.446c0 1.68 1.62 3.051 3.61 3.051h3.794c1.99 0 3.61-1.37 3.61-3.051v-3.721z"></path></svg></a><a href="https://stackoverflow.com/questions/tagged/vert.x" class="navbar-social-link" title="Stack Overflow" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Stack Overflow questions related to Vert.x"><title>Stack Overflow</title><path d="M15.725 0l-1.72 1.277 6.39 8.588 1.716-1.277L15.725 0zm-3.94 3.418l-1.369 1.644 8.225 6.85 1.369-1.644-8.225-6.85zm-3.15 4.465l-.905 1.94 9.702 4.517.904-1.94-9.701-4.517zm-1.85 4.86l-.44 2.093 10.473 2.201.44-2.092-10.473-2.203zM1.89 15.47V24h19.19v-8.53h-2.133v6.397H4.021v-6.396H1.89zm4.265 2.133v2.13h10.66v-2.13H6.154Z"></path></svg></a><a href="https://www.youtube.com/channel/UCGN6L3tRhs92Uer3c6VxOSA" class="navbar-social-link" title="YouTube" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="YouTube channel of Vert.x"><title>YouTube</title><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"></path></svg></a><a href="https://discord.gg/KzEMwP2" class="navbar-social-link" title="Discord" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Eclipse Vert.x channel on Discord"><title>Discord</title><path d="M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.946 2.4189-2.1568 2.4189Z"></path></svg></a><a href="https://groups.google.com/forum/?fromgroups#!forum/vertx" class="navbar-social-link" title="Vert.x 用户组" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="A Google group for Vert.x users"><title>Vert.x 用户组</title><path d="M.92 3.332c-.776 0-1.216.67-.692 1.383l2.537 4.403v7.86c0 2.013 1.467 3.69 3.459 3.69H20.31a3.75 3.75 0 003.69-3.69V7.043a3.723 3.723 0 00-3.668-3.71zm5.786 3.71H20.1c.587 0 1.153.357 1.153.923 0 .566-.566.922-1.153.922H6.706c-.587 0-1.153-.356-1.153-.922 0-.566.566-.923 1.153-.923zm0 3.69H20.1c.587 0 1.153.356 1.153.922 0 .566-.566.922-1.153.922H6.706c-.587 0-1.153-.356-1.153-.922 0-.566.566-.922 1.153-.922zm-.021 3.71h9.705c.587 0 1.153.356 1.153.922 0 .566-.566.923-1.153.923H6.685c-.587 0-1.153-.357-1.153-.923 0-.566.566-.922 1.153-.922Z"></path></svg></a><a href="https://shang.qq.com/wpa/qunwpa?idkey=587f58cacb9557e3291b46098e0fe09427b98a1c0f866da23c04c2762bc7e2ad" class="navbar-social-link" title="Vert.x中国用户组QQ群" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Vert.x中国用户组QQ群"><title>Vert.x中国用户组QQ群</title><path d="M21.395 15.035a39.548 39.548 0 0 0-.803-2.264l-1.079-2.695c.001-.032.014-.562.014-.836C19.526 4.632 17.351 0 12 0S4.474 4.632 4.474 9.241c0 .274.013.804.014.836l-1.08 2.695a38.97 38.97 0 0 0-.802 2.264c-1.021 3.283-.69 4.643-.438 4.673.54.065 2.103-2.472 2.103-2.472 0 1.469.756 3.387 2.394 4.771-.612.188-1.363.479-1.845.835-.434.32-.379.646-.301.778.343.578 5.883.369 7.482.189 1.6.18 7.14.389 7.483-.189.078-.132.132-.458-.301-.778-.483-.356-1.233-.646-1.846-.836 1.637-1.384 2.393-3.302 2.393-4.771 0 0 1.563 2.537 2.103 2.472.251-.03.581-1.39-.438-4.673zM12.662 4.846c.039-1.052.659-1.878 1.385-1.846s1.281.912 1.242 1.964c-.039 1.051-.659 1.878-1.385 1.846s-1.282-.912-1.242-1.964zM9.954 3c.725-.033 1.345.794 1.384 1.846.04 1.052-.517 1.931-1.242 1.963-.726.033-1.346-.794-1.385-1.845C8.672 3.912 9.228 3.033 9.954 3zM7.421 8.294c.194-.43 2.147-.908 4.566-.908h.026c2.418 0 4.372.479 4.566.908a.14.14 0 0 1 .014.061c0 .031-.01.059-.026.083-.163.238-2.333 1.416-4.553 1.416h-.026c-2.221 0-4.39-1.178-4.553-1.416a.136.136 0 0 1-.014-.144zm10.422 8.622c-.22 3.676-2.403 5.987-5.774 6.021h-.137c-3.37-.033-5.554-2.345-5.773-6.021-.081-1.35.001-2.496.147-3.43.318.063.638.122.958.176v3.506s1.658.334 3.318.103v-3.225c.488.027.96.04 1.406.034h.025c1.678.021 3.714-.204 5.683-.594.146.934.227 2.08.147 3.43zM10.48 5.804c.313-.041.542-.409.508-.825-.033-.415-.314-.72-.629-.679-.313.04-.541.409-.508.824.034.417.315.72.629.68zM14.479 5.156c.078.037.221.042.289-.146.035-.095.025-.165-.009-.214-.023-.033-.133-.118-.371-.176-.904-.22-1.341.384-1.405.499-.04.072-.012.176.056.227.067.051.139.037.179-.006.58-.628 1.21-.208 1.261-.184z"></path></svg></a></div></div></div></div></header><div class="page-content docs-content"><div class="container"><div class="docs-content-wrapper"><aside class=""><div class="docs-content-wrapper-sidebar"><div class="search-panel"><div class="search"><input type="text" placeholder="Search..." value=""/><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="search-icon"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="search-icon-delete"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg></div><ul class="search-results"></ul><div class="search-results-none">No results.</div></div><div class="docs-content-toc"><div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_using_vert_x_health_checks">Using Vert.x Health Checks</a>
<ul class="sectlevel2">
<li><a href="#_creating_the_health_check_object">Creating the health check object.</a></li>
<li><a href="#_registering_the_vert_x_web_handler">Registering the Vert.x Web handler</a></li>
</ul>
</li>
<li><a href="#_procedures">Procedures</a></li>
<li><a href="#_http_responses_and_json_output">HTTP responses and JSON Output</a></li>
<li><a href="#_examples_of_procedures">Examples of procedures</a>
<ul class="sectlevel2">
<li><a href="#_sql_client">SQL client</a></li>
<li><a href="#_service_availability">Service availability</a></li>
<li><a href="#_event_bus">Event bus</a></li>
</ul>
</li>
<li><a href="#_authentication">Authentication</a></li>
<li><a href="#_exposing_health_checks_on_the_event_bus">Exposing health checks on the event bus</a></li>
</ul>
</div></div></div></aside><div class="docs-content-sidebar-toggle"><div style="position:relative"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-list"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-x"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></div></div><div class="docs-content-inner"><div class="docs-content-metadata"><div class="docs-content-metadata-left"><div class="docs-content-metadata-repo"><div class="github-stars"><a href="https://github.com/vert-x3/vertx-health-check"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg>null stars</a></div></div><div><a href="https://vertx.io/docs/apidocs"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path></svg> API</a></div><div class="docs-content-metadata-edit"><a href="https://github.com/vertx-china/vertx-web-site/tree/master/docs/translation/vertx-health-check/java"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg> 改进翻译</a></div><span class="docs-content-metadata-version"><div class="dropdown"><a class="dropdown-title">v4.1.1<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="dropdown-menu align-right"><a href="/docs/vertx-health-check/java/"><li class="dropdown-item active has-active-siblings"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="dropdown-check-icon"><polyline points="20 6 9 17 4 12"></polyline></svg>Latest (v<!-- -->4.1.1<!-- -->)</li></a><a href="/docs/4.0.3/vertx-health-check/java/"><li class="dropdown-item has-active-siblings">v<!-- -->4.0.3</li></a><a href="/docs/3.9.8/vertx-health-check/java/"><li class="dropdown-item has-active-siblings">v<!-- -->3.9.8</li></a></ul></div></span></div></div><div><h1>Vert.x Health Checks</h1>

<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This component provides a simple way to expose health checks. Health checks are used to express the current state
of the application in very simple terms: <em>UP</em> or <em>DOWN</em>. The health checks can be used individually, or in
combination to Vert.x Web or the event bus.</p>
</div>
<div class="paragraph">
<p>This component provides a Vert.x Web handler on which you
can register procedure testing the health of the application. The handler computes the final state and returns the
result as JSON.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_using_vert_x_health_checks"><a class="anchor" href="#_using_vert_x_health_checks"></a>Using Vert.x Health Checks</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Notice that you generally need Vert.x Web to use this component. In addition add the following dependency:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Maven (in your <code>pom.xml</code>):</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.vertx<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>vertx-health-check<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.1.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Gradle (in your <code>build.gradle</code> file):</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">compile <span class="hljs-string">&#x27;io.vertx:vertx-health-check:4.1.1&#x27;</span></code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_creating_the_health_check_object"><a class="anchor" href="#_creating_the_health_check_object"></a>Creating the health check object.</h3>
<div class="paragraph">
<p>The central object is <code><a href="../../apidocs/io/vertx/ext/healthchecks/HealthChecks.html">HealthChecks</a></code>. You can create a new instance using:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">HealthChecks hc = HealthChecks.create(vertx);

hc.register(
  <span class="hljs-string">&quot;my-procedure&quot;</span>,
  promise -&gt; promise.complete(Status.OK()));

<span class="hljs-comment">// Register with a timeout. The check fails if it does not complete in time.</span>
<span class="hljs-comment">// The timeout is given in ms.</span>
hc.register(
  <span class="hljs-string">&quot;my-procedure&quot;</span>,
  <span class="hljs-number">2000</span>,
  promise -&gt; promise.complete(Status.OK()));</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once you have created this object you can register and unregister procedures. See more about this below.</p>
</div>
</div>
<div class="sect2">
<h3 id="_registering_the_vert_x_web_handler"><a class="anchor" href="#_registering_the_vert_x_web_handler"></a>Registering the Vert.x Web handler</h3>
<div class="paragraph">
<p>To create the Vert.x Web handler managing your health check you can either:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>using an existing instance of <code><a href="../../apidocs/io/vertx/ext/healthchecks/HealthChecks.html">HealthChecks</a></code></p>
</li>
<li>
<p>let the handler create one instance for you.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">HealthCheckHandler healthCheckHandler1 = HealthCheckHandler.create(vertx);

HealthCheckHandler healthCheckHandler2 = HealthCheckHandler
  .createWithHealthChecks(HealthChecks.create(vertx));

Router router = Router.router(vertx);
<span class="hljs-comment">// Populate the router with routes...</span>
<span class="hljs-comment">// Register the health check handler</span>
router.get(<span class="hljs-string">&quot;/health*&quot;</span>).handler(healthCheckHandler1);
<span class="hljs-comment">// Or</span>
router.get(<span class="hljs-string">&quot;/ping*&quot;</span>).handler(healthCheckHandler2);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Procedure registration can be directly made on the <code><a href="../../apidocs/io/vertx/ext/healthchecks/HealthCheckHandler.html">HealthCheckHandler</a></code>
instance. Alternatively, if you have created the <code><a href="../../apidocs/io/vertx/ext/healthchecks/HealthChecks.html">HealthChecks</a></code> instance
beforehand, you can register the procedure on this object directly. Registrations and unregistrations can be done at
anytime, even after the route registration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">HealthCheckHandler healthCheckHandler = HealthCheckHandler.create(vertx);

<span class="hljs-comment">// Register procedures</span>
<span class="hljs-comment">// It can be done after the route registration, or even at runtime</span>
healthCheckHandler.register(<span class="hljs-string">&quot;my-procedure-name&quot;</span>, promise -&gt; {
  <span class="hljs-comment">// Do the check ....</span>
  <span class="hljs-comment">// Upon success do</span>
  promise.complete(Status.OK());
  <span class="hljs-comment">// In case of failure do:</span>
  promise.complete(Status.KO());
});

<span class="hljs-comment">// Register another procedure with a timeout (2s). If the procedure does not complete in</span>
<span class="hljs-comment">// the given time, the check fails.</span>
healthCheckHandler.register(
  <span class="hljs-string">&quot;my-procedure-name-with-timeout&quot;</span>,
  <span class="hljs-number">2000</span>,
  promise -&gt; {
    <span class="hljs-comment">// Do the check ....</span>
    <span class="hljs-comment">// Upon success do</span>
    promise.complete(Status.OK());
    <span class="hljs-comment">// In case of failure do:</span>
    promise.complete(Status.KO());
  });

router.get(<span class="hljs-string">&quot;/health&quot;</span>).handler(healthCheckHandler);</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_procedures"><a class="anchor" href="#_procedures"></a>Procedures</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A procedure is a function checking some aspect of the system to deduce the current health. It reports a
<code><a href="../../apidocs/io/vertx/ext/healthchecks/Status.html">Status</a></code> indicating whether or not the test has passed or failed. This function
must not block and report to the given <code><a href="../../apidocs/io/vertx/core/Promise.html">Promise</a></code> whether or not it succeed.</p>
</div>
<div class="paragraph">
<p>When you register a procedure, you give a name, and the function (handler) executing the check.</p>
</div>
<div class="paragraph">
<p>Rules deducing the status are the following</p>
</div>
<div class="ulist">
<ul>
<li>
<p>if the promise is mark as failed, the check is considered as <em>KO</em></p>
</li>
<li>
<p>if the promise is completed successfully but without a <code><a href="../../apidocs/io/vertx/ext/healthchecks/Status.html">Status</a></code>, the check
is considered as <em>OK</em>.</p>
</li>
<li>
<p>if the promise is completed successfully with a <code><a href="../../apidocs/io/vertx/ext/healthchecks/Status.html">Status</a></code> marked as <em>OK</em>,
the check is considered as <em>OK</em>.</p>
</li>
<li>
<p>if the promise is completed successfully with a <code><a href="../../apidocs/io/vertx/ext/healthchecks/Status.html">Status</a></code> marked as <em>KO</em>,
the check is considered as <em>KO</em>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code><a href="../../apidocs/io/vertx/ext/healthchecks/Status.html">Status</a></code> can also provide additional data:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">HealthCheckHandler healthCheckHandler = HealthCheckHandler.create(vertx);

<span class="hljs-comment">// Status can provide addition data provided as JSON</span>
healthCheckHandler.register(<span class="hljs-string">&quot;my-procedure-name&quot;</span>, promise -&gt; {
  promise.complete(Status.OK(<span class="hljs-keyword">new</span> JsonObject().put(<span class="hljs-string">&quot;available-memory&quot;</span>, <span class="hljs-string">&quot;2mb&quot;</span>)));
});

healthCheckHandler.register(<span class="hljs-string">&quot;my-second-procedure-name&quot;</span>, promise -&gt; {
  promise.complete(Status.KO(<span class="hljs-keyword">new</span> JsonObject().put(<span class="hljs-string">&quot;load&quot;</span>, <span class="hljs-number">99</span>)));
});

router.get(<span class="hljs-string">&quot;/health&quot;</span>).handler(healthCheckHandler);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Procedures can be organised by groups. The procedure name indicates the group. The procedures are organized as a
tree and the structure is mapped to HTTP urls (see below).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">HealthCheckHandler healthCheckHandler = HealthCheckHandler.create(vertx);

<span class="hljs-comment">// Register procedures</span>
<span class="hljs-comment">// Procedure can be grouped. The group is deduced using a name with &quot;/&quot;.</span>
<span class="hljs-comment">// Groups can contains other group</span>
healthCheckHandler.register(
  <span class="hljs-string">&quot;a-group/my-procedure-name&quot;</span>,
  promise -&gt; {
    <span class="hljs-comment">//....</span>
  });
healthCheckHandler.register(
  <span class="hljs-string">&quot;a-group/a-second-group/my-second-procedure-name&quot;</span>,
  promise -&gt; {
    <span class="hljs-comment">//....</span>
  });

router.get(<span class="hljs-string">&quot;/health&quot;</span>).handler(healthCheckHandler);</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_http_responses_and_json_output"><a class="anchor" href="#_http_responses_and_json_output"></a>HTTP responses and JSON Output</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When using the Vert.x web handler, the overall health check is retrieved using a HTTP GET or POST (depending on
the route you registered) on the route given when exposing the
<code><a href="../../apidocs/io/vertx/ext/healthchecks/HealthCheckHandler.html">HealthCheckHandler</a></code>.</p>
</div>
<div class="paragraph">
<p>If no procedure are registered, the response is <code>204 - NO CONTENT</code>, indicating that the system is <em>UP</em> but no
procedures has been executed. The response does not contain a payload.</p>
</div>
<div class="paragraph">
<p>If there is at least one procedure registered, this procedure is executed and the outcome status is computed. The
response would use the following status code:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>200</code> : Everything is fine</p>
</li>
<li>
<p><code>503</code> : At least one procedure has reported a non-healthy state</p>
</li>
<li>
<p><code>500</code> : One procedure has thrown an error or has not reported a status in time</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The content is a JSON document indicating the overall result (<code>outcome</code>). It&#8217;s either <code>UP</code> or <code>DOWN</code>. A <code>checks</code>
array is also given indicating the result of the different executed procedures. If the procedure has reported
additional data, the data is also given:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>{
"checks" : [
{
  "id" : "A",
  "status" : "UP"
},
{
  "id" : "B",
  "status" : "DOWN",
  "data" : {
    "some-data" : "some-value"
  }
}
],
"outcome" : "DOWN"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In case of groups/ hierarchy, the <code>checks</code> array depicts this structure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>{
"checks" : [
{
  "id" : "my-group",
  "status" : "UP",
  "checks" : [
  {
    "id" : "check-2",
    "status" : "UP",
  },
  {
    "id" : "check-1",
    "status" : "UP"
  }]
}],
"outcome" : "UP"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If a procedure throws an error, reports a failure (exception), the JSON document provides the <code>cause</code> in the
<code>data</code> section. If a procedure does not report back before a timeout, the indicated cause is <code>Timeout</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_examples_of_procedures"><a class="anchor" href="#_examples_of_procedures"></a>Examples of procedures</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section provides example of common health checks.</p>
</div>
<div class="sect2">
<h3 id="_sql_client"><a class="anchor" href="#_sql_client"></a>SQL client</h3>
<div class="paragraph">
<p>This check reports whether a connection to the database can be established:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">handler.register(<span class="hljs-string">&quot;database&quot;</span>,
  promise -&gt; pool.getConnection(connection -&gt; {
    <span class="hljs-keyword">if</span> (connection.failed()) {
      promise.fail(connection.cause());
    } <span class="hljs-keyword">else</span> {
      connection.result().close();
      promise.complete(Status.OK());
    }
  }));</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_service_availability"><a class="anchor" href="#_service_availability"></a>Service availability</h3>
<div class="paragraph">
<p>This check reports whether or not a service (here a HTTP endpoint) is available in the service discovery:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">handler.register(<span class="hljs-string">&quot;my-service&quot;</span>,
  promise -&gt;
    HttpEndpoint.getClient(discovery, rec -&gt; <span class="hljs-string">&quot;my-service&quot;</span>.equals(rec.getName()),
      client -&gt; {
        <span class="hljs-keyword">if</span> (client.failed()) {
          promise.fail(client.cause());
        } <span class="hljs-keyword">else</span> {
          client.result().close();
          promise.complete(Status.OK());
        }
      }));</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_event_bus"><a class="anchor" href="#_event_bus"></a>Event bus</h3>
<div class="paragraph">
<p>This check reports whether a consumer is ready on the event bus. The protocol, in this example, is a simple
ping/pong, but it can be more sophisticated. This check can be used to check whether or not a verticle is ready
if it&#8217;s listening on a specific event address.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">handler.register(<span class="hljs-string">&quot;receiver&quot;</span>,
  promise -&gt;
    vertx.eventBus().request(<span class="hljs-string">&quot;health&quot;</span>, <span class="hljs-string">&quot;ping&quot;</span>)
      .onSuccess(msg -&gt; {
        promise.complete(Status.OK());
      })
      .onFailure(err -&gt; {
        promise.complete(Status.KO());
      }));</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_authentication"><a class="anchor" href="#_authentication"></a>Authentication</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When using the Vert.x web handler, you can pass a <code><a href="../../apidocs/io/vertx/ext/auth/authentication/AuthenticationProvider.html">AuthenticationProvider</a></code> use to authenticate the
request. Check &lt;a href="http://vertx.io/docs/#authentication_and_authorisation"&gt;Vert.x Auth&lt;/a&gt; for more details
about available authentication providers.</p>
</div>
<div class="paragraph">
<p>The Vert.x Web handler creates a JSON object containing:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the request headers</p>
</li>
<li>
<p>the request params</p>
</li>
<li>
<p>the form param if any</p>
</li>
<li>
<p>the content as JSON if any and if the request set the content type to <code>application/json</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The resulting object is passed to the auth provider to authenticate the request. If the authentication failed, it
returns a <code>403 - FORBIDDEN</code> response.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_exposing_health_checks_on_the_event_bus"><a class="anchor" href="#_exposing_health_checks_on_the_event_bus"></a>Exposing health checks on the event bus</h2>
<div class="sectionbody">
<div class="paragraph">
<p>While exposing the health checks using HTTP with the Vert.x web handler is convenient, it can be useful
to expose the data differently. This section gives an example to expose the data on the event bus:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">vertx.eventBus().consumer(<span class="hljs-string">&quot;health&quot;</span>,
  message -&gt; healthChecks.checkStatus()
    .onSuccess(message::reply)
    .onFailure(err -&gt; message.fail(<span class="hljs-number">0</span>, err.getMessage())));</code></pre>
</div>
</div>
</div>
</div></div></div></div></div></div><footer><div class="container"><div class="footer-nav-section"><div class="footer-nav-list footer-logo"><a href="/"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAxMjMyLjYgMzE1LjIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDEyMzIuNiAzMTUuMiIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHN0eWxlPi5zdDB7ZmlsbDojNzgyYTkxfTwvc3R5bGU+PHBhdGggZD0iTTEyMC45IDIxNC4yIDE5MC41IDBoNTIuM2wtOTguNSAyNzMuOEg5OC4yTDAgMGg1Mi4xbDY4LjggMjE0LjJ6bTI5MS4yLTYyLjZIMjk5LjZ2ODQuMkg0MzF2MzhIMjUyVjBoMTc3Ljd2MzguNEgyOTkuNlYxMTRoMTEyLjV2MzcuNnptODMuNy0xMTMuMkg1NDZjMTYuNS4zIDI5IDQuNCAzNy4zIDEyLjQgOC4zIDggMTIuNSAxOS40IDEyLjUgMzQgMCAxNC00LjUgMjUuMS0xMy41IDMzLjItOSA4LjEtMjEuNiAxMi4xLTM3LjYgMTIuMWgtMjcuMXYyNC4ybDg2LjEgMTE5LjVoNTF2LTIuNGwtNzcuMi0xMDYuN2MyNC45LTUuNSA0My4zLTIxLjcgNTIuNi0zNS45IDguMi0xMi42IDEzLjMtMjcuNyAxMy4zLTQ2IDAtMjYuOC04LjYtNDcuNC0yNS44LTYxLjVDNjAwLjUgNy4xIDU3Ni4xIDAgNTQ0LjUgMGgtOTYuM3YyNzMuOGg0Ny42Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0ibTEwNTIuMyAxNTcuNy00MS41IDYyLjcgMjkuNyA1My40aDg1LjF6Ii8+PGNpcmNsZSBjbGFzcz0ic3QwIiBjeD0iODI3LjkiIGN5PSIyNzQuNyIgcj0iNDAuNSIvPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Im0xMDM3IDAtNDcuNiA3NC4yTDk0OSAwaC04NGw4NS4zIDEzNS44LTY3LjEgMTA1LjdjNS43IDkuNSA5LjEgMjAuNSA5LjIgMzIuNGg1MC4xTDExMjEuMyAwSDEwMzd6Ii8+PHBhdGggZD0iTTc2My41IDI3My44Yy4xLTkuOSAyLjUtMTkuMiA2LjYtMjcuNVYzOC40aDg1LjRWMEg2MzguMnYzOC40aDg0LjZ2MjM1LjRoNDAuN3ptNDE0LTI2Ni45aC0xNS4zdjQyLjJoLTguNVY2LjloLTE1LjJWMGgzOXY2Ljl6TTExOTMgMGwxNC4yIDM3LjdMMTIyMS4zIDBoMTF2NDkuMWgtOC41VjMyLjlsLjgtMjEuNy0xNC41IDM3LjloLTYuMWwtMTQuNS0zNy44LjggMjEuNnYxNi4yaC04LjVWMGgxMS4yeiIvPjwvc3ZnPg==" alt="Vert.x Logo"/></a></div><div class="footer-nav-list"><h5>Eclipse Vert.x</h5><ul class=""><li><a class="navbar-menu-item" href="/docs/">文档</a></li><li><a href="/download/">下载</a></li><li><a href="/blog/">博客</a></li><li><a href="/community/">社区</a></li><li><a href="/translation/">翻译团队</a></li><li><a href="https://github.com/eclipse-vertx/vert.x">GitHub</a></li><li><a href="https://github.com/vertx-china/vertx-web-site">翻译GitHub</a></li></ul></div><div class="footer-nav-list"><h5>资源</h5><ul class=""><li><a href="/faq/">答疑</a></li><li><a href="/channels/">联系渠道</a></li><li><a href="https://how-to.vertx.io/">操作指南</a></li><li><a href="https://start.vertx.io/">应用生成器</a></li></ul></div><div class="footer-nav-list"><h5>Eclipse</h5><ul class=""><li><a href="https://www.eclipse.org/">Eclipse 基金会</a></li><li><a href="https://www.eclipse.org/legal/privacy.php">隐私政策</a></li><li><a href="https://www.eclipse.org/legal/termsofuse.php">使用条款</a></li><li><a href="https://www.eclipse.org/legal/copyright.php">版权代理</a></li><li><a href="https://www.eclipse.org/legal/">法律资源</a></li></ul></div></div><div class="footer-copyright"><div class="footer-copyright-remarks">© <!-- -->2021<!-- --> Eclipse Vert.x™<br/>Eclipse Vert.x™ 是开源的，并在<a href="https://creativecommons.org/licenses/by-sa/3.0/" target="_blank" rel="noopener noreferrer">Eclipse Public License 2.0</a>和<a href="https://www.apache.org/licenses/LICENSE-2.0.html" target="_blank" rel="noopener noreferrer">Apache License 2.0</a>协议下获得了双重许可。<br class="footer-copyright-break"/>网站由 <a href="https://michelkraemer.com" target="_blank" rel="noopener noreferrer">Michel Krämer</a> 设计。</div><div class="footer-copyright-eclipse-logo"><a href="https://www.eclipse.org/" target="_blank" rel="noopener noreferrer"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAyODEuMyA5MS4xIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAyODEuMyA5MS4xIiB4bWw6c3BhY2U9InByZXNlcnZlIj48c3R5bGU+LnN0MHtmaWxsOiNmNzk0MjJ9LnN0MXtmaWxsOiMzZDNjM2J9PC9zdHlsZT48ZyBpZD0iTGF5ZXJfMV8xXyI+PHBhdGggY2xhc3M9InN0MCIgZD0iTTI2NS43IDg0IDI1NyA3M2gtMi43djE3LjdoMy4zdi0xMmw5LjMgMTJoMi4xVjczaC0zLjN2MTF6bS0zMi40LTguM2M0LjIgMCA1LjggMy4zIDUuOCA2LjNzLTEuNiA2LTUuOCA2LTUuNy0zLjEtNS44LTYgMS43LTYuMyA1LjgtNi4zem0wLTNjLTYuMSAwLTkuMSA0LjctOS4xIDkuMyAwIDQuNyAyLjkgOS4xIDkuMSA5LjFzOS00LjYgOS4xLTkuMi0zLTkuMi05LjEtOS4yem0tMjEuMiAxOFY3M2gtMy4zdjE3LjdoMy4zem0tMjMuNiAwaDMuM1Y3Nmg1LjZ2LTNoLTE0LjZ2M2g1LjZsLjEgMTQuN3ptLTE4LjktNi41SDE2M2wzLjMtNy42IDMuMyA3LjZ6bTIuOCA2LjVoMy42TDE2OC4yIDczaC0zLjZsLTggMTcuN2gzLjZsMS41LTMuM2g5LjNsMS40IDMuM3ptLTM4LTE0LjZoMy42YzMuOSAwIDUuNSAyLjggNS41IDUuNS4xIDIuOC0xLjUgNS44LTUuNSA1LjhoLTMuNlY3Ni4xem0zLjctMy4xaC02Ljl2MTcuN2g2LjljNi4yIDAgOC45LTQuNSA4LjktOXMtMi44LTguNy04LjktOC43em0tMjIuNCAxMUwxMDcgNzNoLTIuN3YxNy43aDMuM3YtMTJsOS4zIDEyaDIuMVY3M2gtMy4zdjExek04OC4yIDczdjEwLjJjMCAzLTEuNiA0LjktNC4zIDQuOXMtNC42LTEuNy00LjYtNC45VjczSDc2djEwLjFjMCA1LjMgMy42IDcuOSA3LjkgNy45IDQuNCAwIDcuNy0yLjcgNy43LTcuOVY3M2gtMy40em0tMzMgMi43YzQuMiAwIDUuOCAzLjMgNS44IDYuM3MtMS42IDYtNS44IDYtNS43LTMuMS01LjgtNiAxLjctNi4zIDUuOC02LjN6bTAtM2MtNi4xIDAtOS4xIDQuNy05LjEgOS4zczIuOSA5LjEgOS4xIDkuMSA5LTQuNiA5LjEtOS4yLTMtOS4yLTkuMS05LjJ6bS0yOS43IDE4di02LjVoOC45di0zLjFoLTguOXYtNC44aDkuNFY3M0gyMi4ydjE3LjZoMy4zeiIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yNjkuNCA1NC40aC0yMi4ydi04LjloMjEuNHYtNi45aC0yMS40di05LjFoMjIuMnYtNy4yaC0yOS42djM5LjVoMjkuNnYtNy40em0tNDAtMjUuNmMtMy02LjEtOS40LTcuOC0xNS41LTcuOC03LjMgMC0xNS4zIDMuNC0xNS4zIDExLjUgMCA4LjkgNy40IDExIDE1LjUgMTIgNS4yLjYgOS4xIDIuMSA5LjEgNS44IDAgNC4zLTQuNCA1LjktOS4xIDUuOXMtOS40LTEuOS0xMS4xLTYuM2wtNi4yIDMuMmMyLjkgNy4yIDkuMSA5LjcgMTcuMiA5LjcgOC44IDAgMTYuNi0zLjggMTYuNi0xMi42IDAtOS40LTcuNy0xMS42LTE1LjktMTIuNi00LjctLjYtOC44LTEuNS04LjgtNSAwLTIuOSAyLjYtNS4yIDguMi01LjIgNC4zIDAgOCAyLjIgOS40IDQuNGw1LjktM3pNMTc2IDIyLjJjLTYuMi0uMS0xMi40IDAtMTguNiAwdjM5LjVoNy40VjUwLjFIMTc2YzE5LjQgMCAxOS40LTI3LjkgMC0yNy45em0tMTEuMSA3LjFIMTc2YzkuNSAwIDkuNSAxNCAwIDE0aC0xMS4ybC4xLTE0em0tMTggMzIuNVYyMi4yaC03LjR2MzkuNWw3LjQuMXptLTQ0LTM5LjZ2MzkuNWgyNy43di02LjloLTIwLjNWMjIuMmgtNy40ek05MC43IDUxLjdjLTIuNyAyLjUtNi4yIDQtOS45IDQtOS44IDAtMTMuNS02LjgtMTMuNi0xMy40czQuMS0xMy43IDEzLjYtMTMuN2MzLjUtLjEgNyAxLjMgOS41IDMuN2w1LTQuOGMtMy44LTMuOS05LjEtNi0xNC41LTYtMTQuMyAwLTIxIDEwLjUtMjAuOSAyMC44czYuMyAyMC4zIDIwLjkgMjAuM2M1LjYuMSAxMS0yIDE1LTUuOWwtNS4xLTV6bS0zOSAyLjdIMjkuNXYtOC45aDIxLjR2LTYuOUgyOS41di05LjFoMjIuMnYtNy4ySDIyLjJ2MzkuNWgyOS42bC0uMS03LjR6Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTkuOCAxOC4yQzE4LjggNC4xIDM2LjktLjggNTIuMSA2bC0xLS43QzM1LjctNC42IDE1LjItLjEgNS4zIDE1LjNzLTUuNCAzNS45IDEwIDQ1LjhsMS4xLjZDMy44IDUwLjguOCAzMi4zIDkuOCAxOC4yeiIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yNzIuMiAyNi4xYzAtMi41IDIuMS00LjYgNC42LTQuNiAyLjUgMCA0LjYgMi4xIDQuNiA0LjYgMCAyLjUtMi4xIDQuNi00LjYgNC42LTIuNiAwLTQuNi0yLjEtNC42LTQuNnptOC42IDBjMC0yLjItMS44LTQuMS00LTQuMXMtNC4xIDEuOC00LjEgNC4xYzAgMi4yIDEuNyA0IDMuOSA0LjFoLjFjMi4zIDAgNC4xLTEuOCA0LjEtNC4xem0tNi0yLjVoMi4zYzEuMSAwIDEuOS41IDEuOSAxLjYgMCAuNy0uNCAxLjMtMS4xIDEuNWwxLjIgMS43aC0xLjRsLTEtMS41aC0uN3YxLjVoLTEuMWwtLjEtNC44em0yLjIgMi4zYy41IDAgLjgtLjMuOC0uN3MtLjMtLjctLjgtLjdoLTF2MS4zbDEgLjF6Ii8+PC9nPjwvc3ZnPg==" alt="Eclipse foundation Logo"/></a></div></div></div></footer></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"slug":"4.1.1/vertx-health-check/java","title":"Vert.x Health Checks","fallbackGitHubStars":null,"toc":"\u003cdiv id=\"toc\" class=\"toc\"\u003e\n\u003cdiv id=\"toctitle\"\u003eTable of Contents\u003c/div\u003e\n\u003cul class=\"sectlevel1\"\u003e\n\u003cli\u003e\u003ca href=\"#_using_vert_x_health_checks\"\u003eUsing Vert.x Health Checks\u003c/a\u003e\n\u003cul class=\"sectlevel2\"\u003e\n\u003cli\u003e\u003ca href=\"#_creating_the_health_check_object\"\u003eCreating the health check object.\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_registering_the_vert_x_web_handler\"\u003eRegistering the Vert.x Web handler\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_procedures\"\u003eProcedures\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_http_responses_and_json_output\"\u003eHTTP responses and JSON Output\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_examples_of_procedures\"\u003eExamples of procedures\u003c/a\u003e\n\u003cul class=\"sectlevel2\"\u003e\n\u003cli\u003e\u003ca href=\"#_sql_client\"\u003eSQL client\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_service_availability\"\u003eService availability\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_event_bus\"\u003eEvent bus\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_authentication\"\u003eAuthentication\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_exposing_health_checks_on_the_event_bus\"\u003eExposing health checks on the event bus\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e","contents":"\u003ch1\u003eVert.x Health Checks\u003c/h1\u003e\n\n\u003cdiv id=\"preamble\"\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThis component provides a simple way to expose health checks. Health checks are used to express the current state\nof the application in very simple terms: \u003cem\u003eUP\u003c/em\u003e or \u003cem\u003eDOWN\u003c/em\u003e. The health checks can be used individually, or in\ncombination to Vert.x Web or the event bus.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThis component provides a Vert.x Web handler on which you\ncan register procedure testing the health of the application. The handler computes the final state and returns the\nresult as JSON.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_using_vert_x_health_checks\"\u003e\u003ca class=\"anchor\" href=\"#_using_vert_x_health_checks\"\u003e\u003c/a\u003eUsing Vert.x Health Checks\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eNotice that you generally need Vert.x Web to use this component. In addition add the following dependency:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eMaven (in your \u003ccode\u003epom.xml\u003c/code\u003e):\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-xml\" data-lang=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\n \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003eio.vertx\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003evertx-health-check\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e4.1.1\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eGradle (in your \u003ccode\u003ebuild.gradle\u003c/code\u003e file):\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-groovy\" data-lang=\"groovy\"\u003ecompile \u003cspan class=\"hljs-string\"\u003e\u0026#x27;io.vertx:vertx-health-check:4.1.1\u0026#x27;\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_creating_the_health_check_object\"\u003e\u003ca class=\"anchor\" href=\"#_creating_the_health_check_object\"\u003e\u003c/a\u003eCreating the health check object.\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe central object is \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/healthchecks/HealthChecks.html\"\u003eHealthChecks\u003c/a\u003e\u003c/code\u003e. You can create a new instance using:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eHealthChecks hc = HealthChecks.create(vertx);\n\nhc.register(\n  \u003cspan class=\"hljs-string\"\u003e\u0026quot;my-procedure\u0026quot;\u003c/span\u003e,\n  promise -\u0026gt; promise.complete(Status.OK()));\n\n\u003cspan class=\"hljs-comment\"\u003e// Register with a timeout. The check fails if it does not complete in time.\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// The timeout is given in ms.\u003c/span\u003e\nhc.register(\n  \u003cspan class=\"hljs-string\"\u003e\u0026quot;my-procedure\u0026quot;\u003c/span\u003e,\n  \u003cspan class=\"hljs-number\"\u003e2000\u003c/span\u003e,\n  promise -\u0026gt; promise.complete(Status.OK()));\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eOnce you have created this object you can register and unregister procedures. See more about this below.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_registering_the_vert_x_web_handler\"\u003e\u003ca class=\"anchor\" href=\"#_registering_the_vert_x_web_handler\"\u003e\u003c/a\u003eRegistering the Vert.x Web handler\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eTo create the Vert.x Web handler managing your health check you can either:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eusing an existing instance of \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/healthchecks/HealthChecks.html\"\u003eHealthChecks\u003c/a\u003e\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003elet the handler create one instance for you.\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eHealthCheckHandler healthCheckHandler1 = HealthCheckHandler.create(vertx);\n\nHealthCheckHandler healthCheckHandler2 = HealthCheckHandler\n  .createWithHealthChecks(HealthChecks.create(vertx));\n\nRouter router = Router.router(vertx);\n\u003cspan class=\"hljs-comment\"\u003e// Populate the router with routes...\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// Register the health check handler\u003c/span\u003e\nrouter.get(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/health*\u0026quot;\u003c/span\u003e).handler(healthCheckHandler1);\n\u003cspan class=\"hljs-comment\"\u003e// Or\u003c/span\u003e\nrouter.get(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/ping*\u0026quot;\u003c/span\u003e).handler(healthCheckHandler2);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eProcedure registration can be directly made on the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/healthchecks/HealthCheckHandler.html\"\u003eHealthCheckHandler\u003c/a\u003e\u003c/code\u003e\ninstance. Alternatively, if you have created the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/healthchecks/HealthChecks.html\"\u003eHealthChecks\u003c/a\u003e\u003c/code\u003e instance\nbeforehand, you can register the procedure on this object directly. Registrations and unregistrations can be done at\nanytime, even after the route registration:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eHealthCheckHandler healthCheckHandler = HealthCheckHandler.create(vertx);\n\n\u003cspan class=\"hljs-comment\"\u003e// Register procedures\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// It can be done after the route registration, or even at runtime\u003c/span\u003e\nhealthCheckHandler.register(\u003cspan class=\"hljs-string\"\u003e\u0026quot;my-procedure-name\u0026quot;\u003c/span\u003e, promise -\u0026gt; {\n  \u003cspan class=\"hljs-comment\"\u003e// Do the check ....\u003c/span\u003e\n  \u003cspan class=\"hljs-comment\"\u003e// Upon success do\u003c/span\u003e\n  promise.complete(Status.OK());\n  \u003cspan class=\"hljs-comment\"\u003e// In case of failure do:\u003c/span\u003e\n  promise.complete(Status.KO());\n});\n\n\u003cspan class=\"hljs-comment\"\u003e// Register another procedure with a timeout (2s). If the procedure does not complete in\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// the given time, the check fails.\u003c/span\u003e\nhealthCheckHandler.register(\n  \u003cspan class=\"hljs-string\"\u003e\u0026quot;my-procedure-name-with-timeout\u0026quot;\u003c/span\u003e,\n  \u003cspan class=\"hljs-number\"\u003e2000\u003c/span\u003e,\n  promise -\u0026gt; {\n    \u003cspan class=\"hljs-comment\"\u003e// Do the check ....\u003c/span\u003e\n    \u003cspan class=\"hljs-comment\"\u003e// Upon success do\u003c/span\u003e\n    promise.complete(Status.OK());\n    \u003cspan class=\"hljs-comment\"\u003e// In case of failure do:\u003c/span\u003e\n    promise.complete(Status.KO());\n  });\n\nrouter.get(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/health\u0026quot;\u003c/span\u003e).handler(healthCheckHandler);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_procedures\"\u003e\u003ca class=\"anchor\" href=\"#_procedures\"\u003e\u003c/a\u003eProcedures\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eA procedure is a function checking some aspect of the system to deduce the current health. It reports a\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/healthchecks/Status.html\"\u003eStatus\u003c/a\u003e\u003c/code\u003e indicating whether or not the test has passed or failed. This function\nmust not block and report to the given \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/Promise.html\"\u003ePromise\u003c/a\u003e\u003c/code\u003e whether or not it succeed.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eWhen you register a procedure, you give a name, and the function (handler) executing the check.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eRules deducing the status are the following\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eif the promise is mark as failed, the check is considered as \u003cem\u003eKO\u003c/em\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eif the promise is completed successfully but without a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/healthchecks/Status.html\"\u003eStatus\u003c/a\u003e\u003c/code\u003e, the check\nis considered as \u003cem\u003eOK\u003c/em\u003e.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eif the promise is completed successfully with a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/healthchecks/Status.html\"\u003eStatus\u003c/a\u003e\u003c/code\u003e marked as \u003cem\u003eOK\u003c/em\u003e,\nthe check is considered as \u003cem\u003eOK\u003c/em\u003e.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eif the promise is completed successfully with a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/healthchecks/Status.html\"\u003eStatus\u003c/a\u003e\u003c/code\u003e marked as \u003cem\u003eKO\u003c/em\u003e,\nthe check is considered as \u003cem\u003eKO\u003c/em\u003e.\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/healthchecks/Status.html\"\u003eStatus\u003c/a\u003e\u003c/code\u003e can also provide additional data:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eHealthCheckHandler healthCheckHandler = HealthCheckHandler.create(vertx);\n\n\u003cspan class=\"hljs-comment\"\u003e// Status can provide addition data provided as JSON\u003c/span\u003e\nhealthCheckHandler.register(\u003cspan class=\"hljs-string\"\u003e\u0026quot;my-procedure-name\u0026quot;\u003c/span\u003e, promise -\u0026gt; {\n  promise.complete(Status.OK(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;available-memory\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;2mb\u0026quot;\u003c/span\u003e)));\n});\n\nhealthCheckHandler.register(\u003cspan class=\"hljs-string\"\u003e\u0026quot;my-second-procedure-name\u0026quot;\u003c/span\u003e, promise -\u0026gt; {\n  promise.complete(Status.KO(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e JsonObject().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;load\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e99\u003c/span\u003e)));\n});\n\nrouter.get(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/health\u0026quot;\u003c/span\u003e).handler(healthCheckHandler);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eProcedures can be organised by groups. The procedure name indicates the group. The procedures are organized as a\ntree and the structure is mapped to HTTP urls (see below).\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003eHealthCheckHandler healthCheckHandler = HealthCheckHandler.create(vertx);\n\n\u003cspan class=\"hljs-comment\"\u003e// Register procedures\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// Procedure can be grouped. The group is deduced using a name with \u0026quot;/\u0026quot;.\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// Groups can contains other group\u003c/span\u003e\nhealthCheckHandler.register(\n  \u003cspan class=\"hljs-string\"\u003e\u0026quot;a-group/my-procedure-name\u0026quot;\u003c/span\u003e,\n  promise -\u0026gt; {\n    \u003cspan class=\"hljs-comment\"\u003e//....\u003c/span\u003e\n  });\nhealthCheckHandler.register(\n  \u003cspan class=\"hljs-string\"\u003e\u0026quot;a-group/a-second-group/my-second-procedure-name\u0026quot;\u003c/span\u003e,\n  promise -\u0026gt; {\n    \u003cspan class=\"hljs-comment\"\u003e//....\u003c/span\u003e\n  });\n\nrouter.get(\u003cspan class=\"hljs-string\"\u003e\u0026quot;/health\u0026quot;\u003c/span\u003e).handler(healthCheckHandler);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_http_responses_and_json_output\"\u003e\u003ca class=\"anchor\" href=\"#_http_responses_and_json_output\"\u003e\u003c/a\u003eHTTP responses and JSON Output\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eWhen using the Vert.x web handler, the overall health check is retrieved using a HTTP GET or POST (depending on\nthe route you registered) on the route given when exposing the\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/healthchecks/HealthCheckHandler.html\"\u003eHealthCheckHandler\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIf no procedure are registered, the response is \u003ccode\u003e204 - NO CONTENT\u003c/code\u003e, indicating that the system is \u003cem\u003eUP\u003c/em\u003e but no\nprocedures has been executed. The response does not contain a payload.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIf there is at least one procedure registered, this procedure is executed and the outcome status is computed. The\nresponse would use the following status code:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003e200\u003c/code\u003e : Everything is fine\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003e503\u003c/code\u003e : At least one procedure has reported a non-healthy state\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003e500\u003c/code\u003e : One procedure has thrown an error or has not reported a status in time\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe content is a JSON document indicating the overall result (\u003ccode\u003eoutcome\u003c/code\u003e). It\u0026#8217;s either \u003ccode\u003eUP\u003c/code\u003e or \u003ccode\u003eDOWN\u003c/code\u003e. A \u003ccode\u003echecks\u003c/code\u003e\narray is also given indicating the result of the different executed procedures. If the procedure has reported\nadditional data, the data is also given:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode\u003e{\n\"checks\" : [\n{\n  \"id\" : \"A\",\n  \"status\" : \"UP\"\n},\n{\n  \"id\" : \"B\",\n  \"status\" : \"DOWN\",\n  \"data\" : {\n    \"some-data\" : \"some-value\"\n  }\n}\n],\n\"outcome\" : \"DOWN\"\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIn case of groups/ hierarchy, the \u003ccode\u003echecks\u003c/code\u003e array depicts this structure:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode\u003e{\n\"checks\" : [\n{\n  \"id\" : \"my-group\",\n  \"status\" : \"UP\",\n  \"checks\" : [\n  {\n    \"id\" : \"check-2\",\n    \"status\" : \"UP\",\n  },\n  {\n    \"id\" : \"check-1\",\n    \"status\" : \"UP\"\n  }]\n}],\n\"outcome\" : \"UP\"\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIf a procedure throws an error, reports a failure (exception), the JSON document provides the \u003ccode\u003ecause\u003c/code\u003e in the\n\u003ccode\u003edata\u003c/code\u003e section. If a procedure does not report back before a timeout, the indicated cause is \u003ccode\u003eTimeout\u003c/code\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_examples_of_procedures\"\u003e\u003ca class=\"anchor\" href=\"#_examples_of_procedures\"\u003e\u003c/a\u003eExamples of procedures\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThis section provides example of common health checks.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_sql_client\"\u003e\u003ca class=\"anchor\" href=\"#_sql_client\"\u003e\u003c/a\u003eSQL client\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThis check reports whether a connection to the database can be established:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003ehandler.register(\u003cspan class=\"hljs-string\"\u003e\u0026quot;database\u0026quot;\u003c/span\u003e,\n  promise -\u0026gt; pool.getConnection(connection -\u0026gt; {\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (connection.failed()) {\n      promise.fail(connection.cause());\n    } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n      connection.result().close();\n      promise.complete(Status.OK());\n    }\n  }));\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_service_availability\"\u003e\u003ca class=\"anchor\" href=\"#_service_availability\"\u003e\u003c/a\u003eService availability\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThis check reports whether or not a service (here a HTTP endpoint) is available in the service discovery:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003ehandler.register(\u003cspan class=\"hljs-string\"\u003e\u0026quot;my-service\u0026quot;\u003c/span\u003e,\n  promise -\u0026gt;\n    HttpEndpoint.getClient(discovery, rec -\u0026gt; \u003cspan class=\"hljs-string\"\u003e\u0026quot;my-service\u0026quot;\u003c/span\u003e.equals(rec.getName()),\n      client -\u0026gt; {\n        \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (client.failed()) {\n          promise.fail(client.cause());\n        } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n          client.result().close();\n          promise.complete(Status.OK());\n        }\n      }));\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_event_bus\"\u003e\u003ca class=\"anchor\" href=\"#_event_bus\"\u003e\u003c/a\u003eEvent bus\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThis check reports whether a consumer is ready on the event bus. The protocol, in this example, is a simple\nping/pong, but it can be more sophisticated. This check can be used to check whether or not a verticle is ready\nif it\u0026#8217;s listening on a specific event address.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003ehandler.register(\u003cspan class=\"hljs-string\"\u003e\u0026quot;receiver\u0026quot;\u003c/span\u003e,\n  promise -\u0026gt;\n    vertx.eventBus().request(\u003cspan class=\"hljs-string\"\u003e\u0026quot;health\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;ping\u0026quot;\u003c/span\u003e)\n      .onSuccess(msg -\u0026gt; {\n        promise.complete(Status.OK());\n      })\n      .onFailure(err -\u0026gt; {\n        promise.complete(Status.KO());\n      }));\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_authentication\"\u003e\u003ca class=\"anchor\" href=\"#_authentication\"\u003e\u003c/a\u003eAuthentication\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eWhen using the Vert.x web handler, you can pass a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/auth/authentication/AuthenticationProvider.html\"\u003eAuthenticationProvider\u003c/a\u003e\u003c/code\u003e use to authenticate the\nrequest. Check \u0026lt;a href=\"http://vertx.io/docs/#authentication_and_authorisation\"\u0026gt;Vert.x Auth\u0026lt;/a\u0026gt; for more details\nabout available authentication providers.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe Vert.x Web handler creates a JSON object containing:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003ethe request headers\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003ethe request params\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003ethe form param if any\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003ethe content as JSON if any and if the request set the content type to \u003ccode\u003eapplication/json\u003c/code\u003e.\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe resulting object is passed to the auth provider to authenticate the request. If the authentication failed, it\nreturns a \u003ccode\u003e403 - FORBIDDEN\u003c/code\u003e response.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_exposing_health_checks_on_the_event_bus\"\u003e\u003ca class=\"anchor\" href=\"#_exposing_health_checks_on_the_event_bus\"\u003e\u003c/a\u003eExposing health checks on the event bus\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eWhile exposing the health checks using HTTP with the Vert.x web handler is convenient, it can be useful\nto expose the data differently. This section gives an example to expose the data on the event bus:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003evertx.eventBus().consumer(\u003cspan class=\"hljs-string\"\u003e\u0026quot;health\u0026quot;\u003c/span\u003e,\n  message -\u0026gt; healthChecks.checkStatus()\n    .onSuccess(message::reply)\n    .onFailure(err -\u0026gt; message.fail(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e, err.getMessage())));\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e","version":"4.1.1"},"__N_SSG":true},"page":"/docs/[[...slug]]","query":{"slug":["4.1.1","vertx-health-check","java"]},"buildId":"Cj3espJ92rjWQIrIt8cFj","isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-ad30d1320810fa304e64.js"></script><script src="/_next/static/chunks/webpack-147ea3ada7109f6dc0bb.js" async=""></script><script src="/_next/static/chunks/framework.2d0daf90a2fa7e03281a.js" async=""></script><script src="/_next/static/chunks/commons.58af5f72dd3f80f51ddc.js" async=""></script><script src="/_next/static/chunks/main-78880972fb4b65194263.js" async=""></script><script src="/_next/static/chunks/styles.eb11bd7b649b32af6115.js" async=""></script><script src="/_next/static/chunks/pages/_app-e598384803edc4a6782d.js" async=""></script><script src="/_next/static/chunks/5df0631eea625b022d3730b3f1bf573e1b8deb37.0b8151d407694e31e2a2.js" async=""></script><script src="/_next/static/chunks/31acfd8439b7c9eee4abe9f59c7500d6c943ee0d.74b85118e963a61f1bf8.js" async=""></script><script src="/_next/static/chunks/pages/docs/%5B%5B...slug%5D%5D-de110bc5466c276a0759.js" async=""></script><script src="/_next/static/Cj3espJ92rjWQIrIt8cFj/_buildManifest.js" async=""></script><script src="/_next/static/Cj3espJ92rjWQIrIt8cFj/_ssgManifest.js" async=""></script></body></html>