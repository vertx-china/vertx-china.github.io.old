<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="description" content="Vert.x | Reactive applications on the JVM"/><meta name="robots" content="index,follow"/><link rel="shortcut icon" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="48x48" href="/favicons/favicon-48x48.png"/><link rel="alternate" type="application/rss+xml" href="/feed/rss.xml"/><link rel="alternate" type="application/atom+xml" href="/feed/atom.xml"/><link rel="alternate" type="application/json" href="/feed/feed.json"/><title>MongoDB 客户端 | Eclipse Vert.x</title><link rel="preload" href="https://api.github.com/repos/vert-x3/vertx-mongo-client" as="fetch" crossorigin="anonymous" class="jsx-d38685edc31911e0"/><meta name="next-head-count" content="14"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-6853d859ade043b9.js" defer=""></script><script src="/_next/static/chunks/framework-01395af778c6fb71.js" defer=""></script><script src="/_next/static/chunks/main-2ea7ab41ab691905.js" defer=""></script><script src="/_next/static/chunks/pages/_app-155bbedc7d6c4b74.js" defer=""></script><script src="/_next/static/chunks/778-5eaf13e353ab0b06.js" defer=""></script><script src="/_next/static/chunks/619-34d9218a66d5b123.js" defer=""></script><script src="/_next/static/chunks/629-5a87bb724d19315e.js" defer=""></script><script src="/_next/static/chunks/923-dea171df96c248df.js" defer=""></script><script src="/_next/static/chunks/434-be9324d6e5b718aa.js" defer=""></script><script src="/_next/static/chunks/pages/docs/%5B%5B...slug%5D%5D-b6a025bc5d4ae207.js" defer=""></script><script src="/_next/static/nVFUqslJoQvsJs_b_GmkE/_buildManifest.js" defer=""></script><script src="/_next/static/nVFUqslJoQvsJs_b_GmkE/_ssgManifest.js" defer=""></script><script src="/_next/static/nVFUqslJoQvsJs_b_GmkE/_middlewareManifest.js" defer=""></script><style id="__jsx-400ec7965926e858">.dropdown-item.jsx-400ec7965926e858{white-space:nowrap;
line-height:2;
width:100%;
padding:0 1.5rem;
cursor:pointer}
.dropdown-item.jsx-400ec7965926e858:hover{background-color:#e9ecef}
.dropdown-item.active.jsx-400ec7965926e858{font-weight:400;
padding-left:.75rem}
.dropdown-item.has-active-siblings.jsx-400ec7965926e858:not(.active){padding-left:calc(0.75rem + 16px + 0.5em)}
.dropdown-item.jsx-400ec7965926e858 .dropdown-check-icon.jsx-400ec7965926e858{width:16px;
margin-right:.5em;
margin-top:1px}</style><style id="__jsx-6650573c8f14945d">.dropdown.jsx-6650573c8f14945d{position:relative;
display:inline-block}
.dropdown.jsx-6650573c8f14945d .dropdown-title.jsx-6650573c8f14945d{margin-right:0;
cursor:pointer;
-webkit-user-select:none;
-moz-user-select:none;
-ms-user-select:none;
user-select:none}
.dropdown.jsx-6650573c8f14945d .dropdown-menu.jsx-6650573c8f14945d{position:absolute;
background-color:#f8f9fa;
box-shadow:0 2px 5px 0 rgba(0, 0, 0, .1);
border-radius:.8rem;
list-style-type:none;
padding:.6666666667rem 0;
margin:.25rem 0 0 0;
z-index:100;
display:none;
-webkit-user-select:none;
-moz-user-select:none;
-ms-user-select:none;
user-select:none}
.dropdown.jsx-6650573c8f14945d .dropdown-menu.jsx-6650573c8f14945d a{color:#4d4d4d;
-webkit-text-decoration:none;
text-decoration:none;
font-weight:300}
.dropdown.jsx-6650573c8f14945d .dropdown-menu.align-right.jsx-6650573c8f14945d{right:0}
.dropdown.jsx-6650573c8f14945d .dropdown-menu.visible.jsx-6650573c8f14945d{display:block}
.dropdown.jsx-6650573c8f14945d .dropdown-menu.jsx-6650573c8f14945d a.jsx-6650573c8f14945d:hover{color:inherit}
.dropdown.jsx-6650573c8f14945d svg{margin-bottom:2px}</style><style id="__jsx-75cbc16d79a176fb">.tooltip.jsx-75cbc16d79a176fb{font-size:.75rem;
color:#4d4d4d;
background-color:#f8f9fa;
border-radius:.4rem;
padding:0 .4rem;
box-shadow:0 0 5px rgba(0, 0, 0, .3);
display:none;
white-space:nowrap;
-webkit-user-select:none;
-moz-user-select:none;
-ms-user-select:none;
user-select:none}
.tooltip.visible.jsx-75cbc16d79a176fb{display:block}
.tooltip.jsx-75cbc16d79a176fb .tooltip-arrow.jsx-75cbc16d79a176fb, .tooltip.jsx-75cbc16d79a176fb .tooltip-arrow.jsx-75cbc16d79a176fb::before{position:absolute;
width:8px;
height:8px;
z-index:-1}
.tooltip.jsx-75cbc16d79a176fb .tooltip-arrow.jsx-75cbc16d79a176fb::before{content:"";
-webkit-transform:rotate(45deg);
-moz-transform:rotate(45deg);
-ms-transform:rotate(45deg);
transform:rotate(45deg);
background:#f8f9fa;
box-shadow:-2px -2px 2px rgba(0, 0, 0, .1)}
.tooltip[data-popper-placement^=top].jsx-75cbc16d79a176fb>.tooltip-arrow.jsx-75cbc16d79a176fb{bottom:-4px}
.tooltip[data-popper-placement^=top].jsx-75cbc16d79a176fb>.tooltip-arrow.jsx-75cbc16d79a176fb::before{-webkit-transform:rotate(225deg);
-moz-transform:rotate(225deg);
-ms-transform:rotate(225deg);
transform:rotate(225deg)}
.tooltip[data-popper-placement^=bottom].jsx-75cbc16d79a176fb>.tooltip-arrow.jsx-75cbc16d79a176fb{top:-4px}
.tooltip[data-popper-placement^=left].jsx-75cbc16d79a176fb>.tooltip-arrow.jsx-75cbc16d79a176fb{right:-4px}
.tooltip[data-popper-placement^=left].jsx-75cbc16d79a176fb>.tooltip-arrow.jsx-75cbc16d79a176fb::before{-webkit-transform:rotate(135deg);
-moz-transform:rotate(135deg);
-ms-transform:rotate(135deg);
transform:rotate(135deg)}
.tooltip[data-popper-placement^=right].jsx-75cbc16d79a176fb>.tooltip-arrow.jsx-75cbc16d79a176fb{left:-4px}
.tooltip[data-popper-placement^=right].jsx-75cbc16d79a176fb>.tooltip-arrow.jsx-75cbc16d79a176fb::before{-webkit-transform:rotate(315deg);
-moz-transform:rotate(315deg);
-ms-transform:rotate(315deg);
transform:rotate(315deg)}</style><style id="__jsx-f705e145f931f504">.navbar{position:absolute;
top:2.75rem;
width:100%}
.navbar a{color:#3c3c3b}
.navbar a.navbar-menu-item, .navbar .dropdown-title{text-transform:uppercase}
.navbar a.navbar-menu-item:hover, .navbar .dropdown-title:hover{-webkit-text-decoration:none;
text-decoration:none;
color:#898987;
-webkit-transition:color .15s ease-in-out;
transition:color .15s ease-in-out}
.navbar .navbar-content{display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex;
-webkit-flex-direction:row;
-ms-flex-direction:row;
flex-direction:row;
-webkit-align-items:center;
-webkit-box-align:center;
-ms-flex-align:center;
align-items:center;
position:relative}
.navbar .navbar-content .navbar-logo{-webkit-flex:1;
-ms-flex:1;
flex:1}
.navbar .navbar-content .navbar-logo img{width:8.3rem}
.navbar .navbar-content .navbar-collapse-button{display:none;
cursor:pointer}
@media (max-width:1000px) {.navbar .navbar-content .navbar-collapse-button{display:inline-block}}
.navbar .navbar-content .navbar-collapse-button span{display:block;
width:33px;
height:4px;
margin-bottom:5px;
position:relative;
background:#3c3c3b;
border-radius:3px;
z-index:1;
transform-origin:4px 0;
-webkit-transition:-webkit-transform .5s cubic-bezier(0.77, 0.2, 0.05, 1), background .5s cubic-bezier(0.77, 0.2, 0.05, 1), opacity .55s ease;
transition:transform .5s cubic-bezier(0.77, 0.2, 0.05, 1), background .5s cubic-bezier(0.77, 0.2, 0.05, 1), opacity .55s ease}
.navbar .navbar-content .navbar-collapse-button span:first-child{transform-origin:0% 0%}
.navbar .navbar-content .navbar-collapse-button span:nth-last-child(2){transform-origin:0% 100%}
.navbar .navbar-content .navbar-right{display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex;
-webkit-flex-direction:row;
-ms-flex-direction:row;
flex-direction:row;
-webkit-align-items:baseline;
-webkit-box-align:baseline;
-ms-flex-align:baseline;
align-items:baseline;
margin-bottom:10px}
@media (max-width:1000px) {.navbar .navbar-content .navbar-right{max-height:0;
-webkit-transition:max-height 200ms ease-in-out;
transition:max-height 200ms ease-in-out;
box-shadow:0 2px 5px 0 rgba(0, 0, 0, .1);
-webkit-flex-direction:column;
-ms-flex-direction:column;
flex-direction:column;
position:absolute;
top:2.75rem;
left:.8rem;
right:.8rem;
background-color:#f8f9fa;
overflow-x:auto;
overflow-y:hidden}}
.navbar .navbar-content .navbar-menu .navbar-menu-item{font-weight:400;
margin-right:2.5rem}
.navbar .navbar-content .navbar-menu .navbar-menu-item.with-drop-down{margin-right:1.8rem}
@media (max-width:1250px) {.navbar .navbar-content .navbar-menu .navbar-menu-item{margin-right:1.5rem}}
@media (max-width:1000px) {.navbar .navbar-content .navbar-menu .navbar-menu-item{display:block;
margin-bottom:1rem;
font-size:1.2rem}}
.navbar .navbar-content .navbar-menu .navbar-menu-item .external-link-icon{margin-left:.25em}
@media (max-width:1000px) {.navbar .navbar-content .navbar-menu{-webkit-flex-direction:column;
-ms-flex-direction:column;
flex-direction:column;
padding:1rem}}
.navbar .navbar-content .navbar-social{margin-left:1.6rem;
font-size:.875rem}
.navbar .navbar-content .navbar-social svg{height:16px;
margin-bottom:2px}
@media (max-width:1000px) {.navbar .navbar-content .navbar-social svg{height:1rem}}
@media (max-width:1250px) {.navbar .navbar-content .navbar-social{margin-left:1rem}}
@media (max-width:1000px) {.navbar .navbar-content .navbar-social{margin-left:auto;
padding:0 1rem 1rem 0;
font-size:1rem}}
@media (max-width:768px) {.navbar{top:1rem}}
.page .navbar{top:0;
padding-top:1.5rem;
padding-bottom:1rem;
position:fixed;
background-color:#fff;
z-index:2}</style><style id="__jsx-bf3edc7191e82cb">.search{position:relative}
.search input{color:#adb5bd;
border:1px solid #dee2e6;
border-radius:.4rem;
font-size:.875rem;
padding:.25rem 1.8rem .35rem 1.8rem;
width:100%;
-webkit-transition:color .15s ease-in-out, border-color .15s ease-in-out;
transition:color .15s ease-in-out, border-color .15s ease-in-out;
background-color:transparent}
.search input:focus{border-color:#adb5bd;
color:#3c3c3b}
.search .autosuggest{position:absolute;
top:0;
-webkit-user-select:none;
-moz-user-select:none;
-ms-user-select:none;
user-select:none;
z-index:-100;
opacity:.5}
.search .search-icon, .search .search-icon-delete{position:absolute;
top:.55rem;
height:1rem;
stroke:#adb5bd;
-webkit-transition:stroke .15s ease-in-out;
transition:stroke .15s ease-in-out}
.search .search-icon{left:.4rem}
.search input:focus+.search-icon{stroke:#6f6970}
.search .search-icon-delete{stroke:#6f6970;
right:.4rem;
height:.75rem;
top:.7rem;
opacity:0;
-webkit-transition:opacity .15s ease-in-out;
transition:opacity .15s ease-in-out;
cursor:text}
.search.has-content .search-icon-delete{opacity:1;
cursor:pointer}</style><style id="__jsx-9ece789f808ef724">.search-results, .search-results-none{font-size:.875rem;
overflow:auto;
list-style-type:none;
padding-left:0;
display:none}
.search-results.visible, .search-results-none.visible{display:block}
.search-results{list-style-type:none;
padding:0;
margin-bottom:0}
.search-results li{display:block;
padding:.5rem;
margin-bottom:1rem;
border-radius:.4rem;
border:1px solid transparent;
cursor:pointer;
max-width:17rem;
overflow-x:hidden}
.search-results li.active{background-color:#f8f9fa;
border:1px solid #e9ecef}
.search-results li h5{margin:0 0 .5rem 0;
font-size:1em}
.search-results li .search-results-highlight{background-color:#ff0}
.search-results-none{padding:1rem .5rem;
text-align:center;
width:100%}</style><style id="__jsx-d1843944f2d67b">.search-panel{display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex;
-webkit-flex-direction:column;
-ms-flex-direction:column;
flex-direction:column;
position:relative}</style><style id="__jsx-d38685edc31911e0">.github-stars.jsx-d38685edc31911e0{display:inline-block}
.github-stars.jsx-d38685edc31911e0 .icon.jsx-d38685edc31911e0{margin-right:.25em}
.github-stars.jsx-d38685edc31911e0 .icon.jsx-d38685edc31911e0 svg{height:1rem}</style><style id="__jsx-aeedcf66895f49d7">footer{font-size:.875rem;
padding-top:3rem;
padding-bottom:4rem;
background-color:#f8f9fa;
border-top:1px solid #dee2e6;
margin-top:1rem;
color:#6f6970}
footer h5{font-size:1rem;
margin-top:0;
margin-bottom:1rem;
color:#3c3c3b;
text-transform:uppercase}
footer ul{padding:0;
list-style:none;
line-height:2}
footer a{color:#6f6970}
footer .footer-logo img, footer .footer-copyright-eclipse-logo img{-webkit-filter:grayscale(100);
filter:grayscale(100);
opacity:.5;
-webkit-transition:all .15s ease-in-out;
transition:all .15s ease-in-out}
footer .footer-logo img:hover, footer .footer-copyright-eclipse-logo img:hover{-webkit-filter:grayscale(0);
filter:grayscale(0);
opacity:1}
footer .footer-nav-section{display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex;
-webkit-flex-direction:row;
-ms-flex-direction:row;
flex-direction:row;
margin-bottom:6rem}
footer .footer-nav-section .footer-logo{margin-top:.4rem}
footer .footer-nav-section .footer-logo img{width:8.3rem}
footer .footer-nav-section .footer-nav-list{width:20%}
footer .footer-copyright{display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex;
-webkit-flex-direction:row;
-ms-flex-direction:row;
flex-direction:row;
-webkit-box-pack:justify;
-webkit-justify-content:space-between;
justify-content:space-between;
-webkit-align-items:center;
-webkit-box-align:center;
-ms-flex-align:center;
align-items:center}
footer .footer-copyright a{white-space:nowrap}
footer .footer-copyright .footer-copyright-eclipse-logo{width:17%;
margin-bottom:.5rem}
@media (max-width:1250px) {footer .footer-copyright .footer-copyright-break{display:none}
footer .footer-copyright .footer-copyright-eclipse-logo{width:30%}}
@media (max-width:1000px) {footer .footer-nav-section .footer-nav-list{width:25%}
footer .footer-copyright .footer-copyright-break{display:inline-block}
footer .footer-copyright .footer-copyright-eclipse-logo{width:40%}}
@media (max-width:768px) {footer .footer-nav-section{max-width:100%;
margin-left:auto;
margin-right:auto}}
@media (max-width:640px) {footer .footer-nav-section{max-width:80%;
margin-bottom:3rem;
-webkit-flex-direction:column;
-ms-flex-direction:column;
flex-direction:column}
footer .footer-nav-section h5{cursor:pointer}
footer .footer-nav-section h5::after{display:inline-block;
content:"";
border-top:.4em solid;
border-right:.4em solid transparent;
border-bottom:0;
border-left:.4em solid transparent;
position:absolute;
top:.75rem;
right:0}
footer .footer-nav-section .footer-nav-list{width:100%;
position:relative}
footer .footer-nav-section .footer-nav-list ul{overflow-y:hidden;
max-height:0;
-webkit-transition:all 200ms ease-in-out;
transition:all 200ms ease-in-out}
footer .footer-nav-section .footer-nav-list ul.visible{margin-bottom:2rem}
footer .footer-nav-section .footer-logo{margin:0 auto 3rem auto;
width:auto}
footer .footer-copyright{max-width:80%;
text-align:center;
margin-left:auto;
margin-right:auto;
-webkit-flex-direction:column-reverse;
-ms-flex-direction:column-reverse;
flex-direction:column-reverse}
footer .footer-copyright .footer-copyright-eclipse-logo{width:7.6rem;
margin-bottom:1rem}}</style><style id="__jsx-efcc50be384cabc7">.page-content{margin-top:6em;
margin-bottom:8rem}
.docs .docs-content .docs-content-wrapper{display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex;
-webkit-box-pack:justify;
-webkit-justify-content:space-between;
justify-content:space-between}
.docs .docs-content .docs-content-wrapper aside{-webkit-flex:0 0 17rem;
-ms-flex:0 0 17rem;
flex:0 0 17rem}
.docs .docs-content .docs-content-wrapper aside .docs-content-wrapper-sidebar{position:-webkit-sticky;
position:sticky;
top:7em}
.docs .docs-content .docs-content-wrapper aside .search-panel{margin-top:1rem;
width:100%}
.docs .docs-content .docs-content-wrapper aside .search-panel .search-results{max-height:calc(100vh - 10rem - 1px)}
.docs .docs-content .docs-content-wrapper aside .docs-content-toc{margin-top:1rem;
overflow-y:auto;
max-height:calc(100vh - 10rem - 3px)}
.docs .docs-content .docs-content-wrapper aside .docs-content-toc #toctitle{display:none}
.docs .docs-content .docs-content-wrapper aside .docs-content-toc ul{margin-top:0;
padding-left:0;
list-style-type:none}
.docs .docs-content .docs-content-wrapper aside .docs-content-toc ul.sectlevel2{display:none}
.docs .docs-content .docs-content-wrapper aside .docs-content-toc ul li{padding:.3333333333rem 0}
.docs .docs-content .docs-content-wrapper aside.docs-has-search-results .docs-content-toc{display:none}
@media (max-width:1250px) {.docs .docs-content .docs-content-wrapper aside{-webkit-flex:0 0 15rem;
-ms-flex:0 0 15rem;
flex:0 0 15rem}}
@media (max-width:1000px) {.docs .docs-content .docs-content-wrapper aside{z-index:1;
position:fixed;
top:0;
right:0;
width:25rem;
height:100vh;
max-width:100%;
padding-top:6rem;
padding-left:2rem;
padding-right:2rem;
background-color:#fff;
border-left:1px solid #dee2e6;
-webkit-transform:translateX(100%);
-moz-transform:translateX(100%);
-ms-transform:translateX(100%);
transform:translateX(100%);
-webkit-transition:-webkit-transform 200ms ease-in-out;
transition:transform 200ms ease-in-out;
will-change:transform}
.docs .docs-content .docs-content-wrapper aside.collapse{-webkit-transform:translateX(0%);
-moz-transform:translateX(0%);
-ms-transform:translateX(0%);
transform:translateX(0%)}}
@media (max-width:640px) {.docs .docs-content .docs-content-wrapper aside{min-width:100%;
border-left:none}}
.docs .docs-content .docs-content-wrapper .docs-content-sidebar-toggle{z-index:1000;
cursor:pointer;
display:none;
position:fixed;
-webkit-justify-content:center;
justify-content:center;
-webkit-align-items:center;
-webkit-box-align:center;
-ms-flex-align:center;
align-items:center;
right:2rem;
bottom:2rem;
color:#fff;
background-color:#4d4d4d;
padding:.5rem;
border-radius:.8rem;
-webkit-transition:background-color .15s ease-in-out;
transition:background-color .15s ease-in-out}
.docs .docs-content .docs-content-wrapper .docs-content-sidebar-toggle .feather-list, .docs .docs-content .docs-content-wrapper .docs-content-sidebar-toggle .feather-x{display:block}
.docs .docs-content .docs-content-wrapper .docs-content-sidebar-toggle .feather-x{position:absolute;
left:0;
top:0;
opacity:0;
-webkit-transition:opacity .15s ease-in-out;
transition:opacity .15s ease-in-out}
.docs .docs-content .docs-content-wrapper .docs-content-sidebar-toggle:hover{background-color:#3c3c3b}
.docs .docs-content .docs-content-wrapper .docs-content-sidebar-toggle.collapse .feather-list{opacity:0}
.docs .docs-content .docs-content-wrapper .docs-content-sidebar-toggle.collapse .feather-x{opacity:1}
@media (max-width:1000px) {.docs .docs-content .docs-content-wrapper .docs-content-sidebar-toggle{display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex}}
@media (max-width:640px) {.docs .docs-content .docs-content-wrapper .docs-content-sidebar-toggle{right:1rem;
bottom:1rem}}
.docs .docs-content .docs-content-inner{max-width:calc(100% - 19.5rem);
overflow:hidden}
.docs .docs-content .docs-content-inner .docs-content-metadata{margin-top:1.2rem;
margin-bottom:1.2rem;
display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex;
flex-wrap:wrap;
-webkit-align-items:baseline;
-webkit-box-align:baseline;
-ms-flex-align:baseline;
align-items:baseline}
@media (max-width:1000px) {.docs .docs-content .docs-content-inner .docs-content-metadata{-webkit-flex-direction:column;
-ms-flex-direction:column;
flex-direction:column}}
.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-repo{display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex}
.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-left{display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex;
-webkit-align-items:center;
-webkit-box-align:center;
-ms-flex-align:center;
align-items:center;
-webkit-flex:1;
-ms-flex:1;
flex:1}
.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-left>*{margin-right:2rem}
.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-left>*:last-child{margin-right:0}
.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-left a{display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex;
-webkit-align-items:center;
-webkit-box-align:center;
-ms-flex-align:center;
align-items:center;
color:#6f6970;
white-space:nowrap}
.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-left a:hover{color:#782b90}
.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-left a .feather{margin-right:.25em;
height:1rem}
@media (max-width:1000px) {.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-left{flex-wrap:wrap;
margin-bottom:1rem}}
.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-version{-webkit-flex:1;
-ms-flex:1;
flex:1;
display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex}
@media (min-width:1000px) {.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-version{-webkit-box-pack:end;
-ms-flex-pack:end;
-webkit-justify-content:flex-end;
justify-content:flex-end}}
.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-version svg{height:16px;
margin-bottom:-2px}
@media (max-width:1000px) {.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-version svg{height:1rem;
margin-bottom:-1px}}
.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-version .dropdown-menu a{-webkit-text-decoration:none;
text-decoration:none}
.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-version .dropdown-menu a:hover{color:#6f6970}
.docs .docs-content .docs-content-inner .docs-content-metadata .docs-content-metadata-label{display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex;
margin-left:2rem}
.docs .docs-content .docs-content-inner h1{padding-top:0;
margin-top:.6rem;
line-height:1.2}
.docs .docs-content .docs-content-inner h1::after{content:"";
width:30%;
display:block;
border:2px solid #782b90;
border-radius:2px;
margin-top:1.1rem}
.docs .docs-content .docs-content-inner .ulist>ul{padding-left:1.1rem}
.docs .docs-content .docs-content-inner h2{border-top:1px solid #dee2e6;
margin-top:5rem;
padding-top:2rem}
.docs .docs-content .docs-content-inner h3, .docs .docs-content .docs-content-inner h4{margin-top:3rem}
@media (max-width:1250px) {.docs .docs-content .docs-content-inner{max-width:calc(100% - 17.5rem)}}
@media (max-width:1000px) {.docs .docs-content .docs-content-inner{max-width:100%}}
.docs .docs-content .admonitionblock{border-top-right-radius:.8rem;
border-bottom-right-radius:.8rem;
background-color:#f8f9fa;
padding:1rem;
margin:1.5rem 0;
border-left:9px solid transparent}
.docs .docs-content .admonitionblock.note, .docs .docs-content .admonitionblock.tip{border-color:#6cb9f0}
.docs .docs-content .admonitionblock.important, .docs .docs-content .admonitionblock.warning, .docs .docs-content .admonitionblock.caution{border-color:#f0a46c}
.docs .docs-content .admonitionblock tr{display:-webkit-box;
display:-webkit-flex;
display:-ms-flexbox;
display:flex;
-webkit-flex-direction:column;
-ms-flex-direction:column;
flex-direction:column}
.docs .docs-content .admonitionblock .title{font-weight:400}
.docs .docs-content .admonitionblock .title::after{content:":"}
.docs .docs-content dt{font-weight:400}
.docs .docs-content .anchor{opacity:0;
-webkit-align-self:flex-start;
-ms-flex-item-align:flex-start;
align-self:flex-start;
outline:none}
.docs .docs-content .anchor::after{content:"#";
position:absolute;
margin-left:-1.5rem;
color:#ced4da;
padding-right:.45rem}
.docs .docs-content .anchor:hover{opacity:1}
.docs .docs-content h2:hover .anchor, .docs .docs-content h3:hover .anchor, .docs .docs-content h4:hover .anchor, .docs .docs-content h5:hover .anchor, .docs .docs-content h6:hover .anchor{opacity:1}
.docs .docs-content h1 .anchor{display:none}
.docs .docs-content h4 .anchor::after, .docs .docs-content h5 .anchor::after, .docs .docs-content h6 .anchor::after{padding-right:.6rem}</style><style id="__jsx-7824b3ad3820c879">html{line-height:1.15;
-webkit-text-size-adjust:100%}
body{margin:0}
main{display:block}
h1{font-size:2em;
margin:.67em 0}
hr{box-sizing:content-box;
height:0;
overflow:visible}
pre{font-family:monospace, monospace;
font-size:1em}
a{background-color:transparent}
abbr[title]{border-bottom:none;
text-decoration:underline;
text-decoration:underline dotted}
b, strong{font-weight:bolder}
code, kbd, samp{font-family:monospace, monospace;
font-size:1em}
small{font-size:80%}
sub, sup{font-size:75%;
line-height:0;
position:relative;
vertical-align:baseline}
sub{bottom:-0.25em}
sup{top:-0.5em}
img{border-style:none}
button, input, optgroup, select, textarea{font-family:inherit;
font-size:100%;
line-height:1.15;
margin:0}
button, input{overflow:visible}
button, select{text-transform:none}
button, [type=button], [type=reset], [type=submit]{-webkit-appearance:button}
button::-moz-focus-inner, [type=button]::-moz-focus-inner, [type=reset]::-moz-focus-inner, [type=submit]::-moz-focus-inner{border-style:none;
padding:0}
button:-moz-focusring, [type=button]:-moz-focusring, [type=reset]:-moz-focusring, [type=submit]:-moz-focusring{outline:1px dotted ButtonText}
fieldset{padding:.35em .75em .625em}
legend{box-sizing:border-box;
color:inherit;
display:table;
max-width:100%;
padding:0;
white-space:normal}
progress{vertical-align:baseline}
textarea{overflow:auto}
[type=checkbox], [type=radio]{box-sizing:border-box;
padding:0}
[type=number]::-webkit-inner-spin-button, [type=number]::-webkit-outer-spin-button{height:auto}
[type=search]{-webkit-appearance:textfield;
outline-offset:-2px}
[type=search]::-webkit-search-decoration{-webkit-appearance:none}
::-webkit-file-upload-button{-webkit-appearance:button;
font:inherit}
details{display:block}
summary{display:list-item}
template{display:none}
[hidden]{display:none}
.hljs, pre{display:block;
overflow-x:auto;
padding:.5em;
background:#3a2840;
color:#fff}
.hljs.language-shell :not(.bash)+.bash, .hljs.language-better-shell :not(.bash)+.bash, pre.language-shell :not(.bash)+.bash, pre.language-better-shell :not(.bash)+.bash{color:#d2a8e0}
pre{border-radius:.8rem;
padding:1rem;
font-size:.875rem;
margin:1.5rem 0}
.hljs-keyword, .hljs-selector-tag, .hljs-tag{color:#d2a8e0}
.hljs-template-tag{color:red}
.hljs-number{color:#6cb9f0}
.hljs-variable, .hljs-template-variable, .hljs-attribute, .hljs-literal{color:#c9e5f9}
.hljs-subst{color:red}
.hljs-title, .hljs-name, .hljs-selector-id, .hljs-selector-class, .hljs-section, .hljs-type{color:#f0a46c}
.hljs-symbol, .hljs-bullet, .hljs-link{color:#d2a8e0}
.hljs-deletion, .hljs-string, .hljs-built_in, .hljs-builtin-name{color:#6cb9f0}
.hljs-addition, .hljs-comment, .hljs-quote, .hljs-meta{color:#adb5bd}
.hljs-emphasis{font-style:italic}
.hljs-strong{font-weight:bold}
#nprogress{pointer-events:none}
#nprogress .bar{background:#29d;
position:fixed;
z-index:1031;
top:0;
left:0;
width:100%;
height:2px}
#nprogress .peg{display:block;
position:absolute;
right:0px;
width:100px;
height:100%;
box-shadow:0 0 10px #29d, 0 0 5px #29d;
opacity:1;
-webkit-transform:rotate(3deg) translate(0px, -4px);
-ms-transform:rotate(3deg) translate(0px, -4px);
-webkit-transform:rotate(3deg) translate(0px, -4px);
-moz-transform:rotate(3deg) translate(0px, -4px);
-ms-transform:rotate(3deg) translate(0px, -4px);
transform:rotate(3deg) translate(0px, -4px)}
#nprogress .spinner{display:block;
position:fixed;
z-index:1031;
top:15px;
right:15px}
#nprogress .spinner-icon{width:18px;
height:18px;
box-sizing:border-box;
border:solid 2px transparent;
border-top-color:#29d;
border-left-color:#29d;
border-radius:50%;
-webkit-animation:nprogress-spinner 400ms linear infinite;
-webkit-animation:nprogress-spinner 400ms linear infinite;
animation:nprogress-spinner 400ms linear infinite}
.nprogress-custom-parent{overflow:hidden;
position:relative}
.nprogress-custom-parent #nprogress .spinner, .nprogress-custom-parent #nprogress .bar{position:absolute}
@keyframes nprogress-spinner {0% {-webkit-transform:rotate(0deg)}100% {-webkit-transform:rotate(360deg)}}
@keyframes nprogress-spinner {0% {transform:rotate(0deg)}100% {transform:rotate(360deg)}}
#nprogress .bar{background:#782b90}
#nprogress .peg{box-shadow:0 0 10px #782b90, 0 0 5px #782b90}
#nprogress .spinner-icon{border-top-color:#782b90;
border-left-color:#782b90}
html{box-sizing:border-box}
*, *::before, *::after{box-sizing:inherit}
:root{font-size:18px}
@media (max-width:1000px) {:root{font-size:17.1px}}
@media (max-width:768px) {:root{font-size:16.2px}}
@media (max-width:640px) {:root{font-size:15.3px}}
body, input{font-family:Roboto, sans-serif;
font-weight:300;
line-height:1.7;
color:#3c3c3b}
input{outline:none}
h1, h2, h3, h4, h5, h6{font-weight:400}
h1{font-size:2.5rem}
h2{font-size:2rem}
h3{font-size:1.75rem}
h4{font-size:1.5rem}
h5{font-size:1.25rem}
h6{font-size:1.1rem}
.container{width:100%;
padding-right:.8rem;
padding-left:.8rem;
margin-right:auto;
margin-left:auto}
@media (min-width:640px) {.container{max-width:620px}}
@media (min-width:768px) {.container{max-width:738px}}
@media (min-width:1000px) {.container{max-width:950px}}
@media (min-width:1250px) {.container{max-width:1180px}}
@media (min-width:1250px) {.container-narrow{max-width:950px}}
.img-fluid{max-width:100%}
a{-webkit-text-decoration:none;
text-decoration:none;
color:#782b90}
a:hover{text-decoration:underline;
color:#571f69}
img{vertical-align:middle}
svg{overflow:hidden;
vertical-align:middle}
code, pre{font-family:"Roboto Mono", SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace}
p code{display:-webkit-inline-box;
display:-webkit-inline-flex;
display:-ms-inline-flexbox;
display:inline-flex;
max-width:100%;
overflow:auto}
.heading-anchor{opacity:0;
-webkit-align-self:flex-start;
-ms-flex-item-align:flex-start;
align-self:flex-start;
outline:none}
.heading-anchor::after{content:"#";
position:absolute;
margin-left:-1.5rem;
color:#ced4da;
padding-right:.45rem}
.heading-anchor:hover{opacity:1}
h2:hover .heading-anchor, h3:hover .heading-anchor, h4:hover .heading-anchor, h5:hover .heading-anchor, h6:hover .heading-anchor{opacity:1}
h1 .heading-anchor{display:none}
h4 .heading-anchor::after, h5 .heading-anchor::after, h6 .heading-anchor::after{padding-right:.6rem}</style><style data-href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500&display=swap">@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5vAA.woff) format('woff')}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Me5g.woff) format('woff')}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmEU9vAA.woff) format('woff')}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5fCRc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5fABc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5fCBc4AMP6lbBP.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5fBxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5fCxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5fChc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmSU5fBBc4AMP6lQ.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Mu72xKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Mu5mxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Mu7mxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Mu4WxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Mu7WxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Mu7GxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOmCnqEu92Fr1Mu4mxKKTU1Kg.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmEU9fCRc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmEU9fABc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmEU9fCBc4AMP6lbBP.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmEU9fBxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmEU9fCxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmEU9fChc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v29/KFOlCnqEu92Fr1MmEU9fBBc4AMP6lQ.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style><style data-href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@300;400&display=swap">@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZKCA.woff) format('woff')}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVl2ZhZI2eCN5jzbjEETS9weq8-59Y.woff) format('woff')}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCkYb9lecyVC4A.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCAYb9lecyVC4A.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCgYb9lecyVC4A.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCcYb9lecyVC4A.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCsYb9lecyVC4A.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCoYb9lecyVC4A.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCQYb9lecyU.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVl2ZhZI2eCN5jzbjEETS9weq8-19-7DQk6YvNkeg.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVl2ZhZI2eCN5jzbjEETS9weq8-19a7DQk6YvNkeg.woff2) format('woff2');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVl2ZhZI2eCN5jzbjEETS9weq8-1967DQk6YvNkeg.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVl2ZhZI2eCN5jzbjEETS9weq8-19G7DQk6YvNkeg.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVl2ZhZI2eCN5jzbjEETS9weq8-1927DQk6YvNkeg.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVl2ZhZI2eCN5jzbjEETS9weq8-19y7DQk6YvNkeg.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto Condensed';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotocondensed/v24/ieVl2ZhZI2eCN5jzbjEETS9weq8-19K7DQk6YvM.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style><style data-href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400&display=swap">@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vqPQA.woff) format('woff')}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vq_SeW-AJi8SJQtQ4Y.woff) format('woff');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vq_QOW-AJi8SJQtQ4Y.woff) format('woff');unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vq_R-W-AJi8SJQtQ4Y.woff) format('woff');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vq_S-W-AJi8SJQtQ4Y.woff) format('woff');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vq_SuW-AJi8SJQtQ4Y.woff) format('woff');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto Mono';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/robotomono/v13/L0xuDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vq_ROW-AJi8SJQt.woff) format('woff');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><body data-build-time="2022-04-15T06:48:44.999Z" data-build-commit-id="727e8d5cb9827e48fbe0574d1aa4a8238be6988a" data-build-run-id="2171328785"><div id="__next" data-reactroot=""><main class="jsx-efcc50be384cabc7 page docs"><header><div class="jsx-f705e145f931f504 navbar"><div class="jsx-f705e145f931f504 navbar-content container"><div class="jsx-f705e145f931f504 navbar-logo"><a class="jsx-f705e145f931f504" href="/"><img src="data:image/svg+xml,%3csvg version=&#x27;1.1&#x27; id=&#x27;Layer_1&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27; x=&#x27;0&#x27; y=&#x27;0&#x27; viewBox=&#x27;0 0 1232.6 315.2&#x27; style=&#x27;enable-background:new 0 0 1232.6 315.2&#x27; xml:space=&#x27;preserve&#x27;%3e%3cstyle%3e.st0%7bfill:%23782a91%7d%3c/style%3e%3cpath d=&#x27;M120.9 214.2 190.5 0h52.3l-98.5 273.8H98.2L0 0h52.1l68.8 214.2zm291.2-62.6H299.6v84.2H431v38H252V0h177.7v38.4H299.6V114h112.5v37.6zm83.7-113.2H546c16.5.3 29 4.4 37.3 12.4 8.3 8 12.5 19.4 12.5 34 0 14-4.5 25.1-13.5 33.2-9 8.1-21.6 12.1-37.6 12.1h-27.1v24.2l86.1 119.5h51v-2.4l-77.2-106.7c24.9-5.5 43.3-21.7 52.6-35.9 8.2-12.6 13.3-27.7 13.3-46 0-26.8-8.6-47.4-25.8-61.5C600.5 7.1 576.1 0 544.5 0h-96.3v273.8h47.6&#x27;/%3e%3cpath class=&#x27;st0&#x27; d=&#x27;m1052.3 157.7-41.5 62.7 29.7 53.4h85.1z&#x27;/%3e%3ccircle class=&#x27;st0&#x27; cx=&#x27;827.9&#x27; cy=&#x27;274.7&#x27; r=&#x27;40.5&#x27;/%3e%3cpath class=&#x27;st0&#x27; d=&#x27;m1037 0-47.6 74.2L949 0h-84l85.3 135.8-67.1 105.7c5.7 9.5 9.1 20.5 9.2 32.4h50.1L1121.3 0H1037z&#x27;/%3e%3cpath d=&#x27;M763.5 273.8c.1-9.9 2.5-19.2 6.6-27.5V38.4h85.4V0H638.2v38.4h84.6v235.4h40.7zm414-266.9h-15.3v42.2h-8.5V6.9h-15.2V0h39v6.9zM1193 0l14.2 37.7L1221.3 0h11v49.1h-8.5V32.9l.8-21.7-14.5 37.9h-6.1l-14.5-37.8.8 21.6v16.2h-8.5V0h11.2z&#x27;/%3e%3c/svg%3e" alt="Vert.x Logo" class="jsx-f705e145f931f504"/></a></div><div class="jsx-f705e145f931f504 navbar-collapse-button"><span class="jsx-f705e145f931f504"></span><span class="jsx-f705e145f931f504"></span><span class="jsx-f705e145f931f504"></span></div><div class="jsx-f705e145f931f504 navbar-right"><div class="jsx-f705e145f931f504 navbar-menu"><span class="jsx-f705e145f931f504 navbar-menu-item with-drop-down"><div class="jsx-6650573c8f14945d dropdown"><a class="jsx-6650573c8f14945d dropdown-title">开始<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="jsx-6650573c8f14945d dropdown-menu"><a class="jsx-f705e145f931f504" href="/introduction-to-vertx-and-reactive/"><li class="jsx-400ec7965926e858 dropdown-item">简介</li></a><a class="jsx-f705e145f931f504" href="/get-started/"><li class="jsx-400ec7965926e858 dropdown-item">开始</li></a><a href="https://start.vertx.io/" target="_blank" rel="noreferrer" class="jsx-f705e145f931f504"><li class="jsx-400ec7965926e858 dropdown-item">应用生成器 <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a></ul></div></span><a class="jsx-f705e145f931f504 navbar-menu-item" href="/docs/">文档</a><span class="jsx-f705e145f931f504 navbar-menu-item with-drop-down"><div class="jsx-6650573c8f14945d dropdown"><a class="jsx-6650573c8f14945d dropdown-title">资源<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="jsx-6650573c8f14945d dropdown-menu"><a class="jsx-f705e145f931f504" href="/faq/"><li class="jsx-400ec7965926e858 dropdown-item">答疑</li></a><a class="jsx-f705e145f931f504" href="/channels/"><li class="jsx-400ec7965926e858 dropdown-item">联系渠道</li></a><a href="https://how-to.vertx.io/" target="_blank" rel="noreferrer" class="jsx-f705e145f931f504"><li class="jsx-400ec7965926e858 dropdown-item">操作指南 <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a><a href="https://github.com/vert-x3/vertx-eventbus-bridge-clients" target="_blank" rel="noreferrer" class="jsx-f705e145f931f504"><li class="jsx-400ec7965926e858 dropdown-item">EventBus Bridge Clients <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a><a href="https://github.com/vert-x3/advanced-vertx-guide" target="_blank" rel="noreferrer" class="jsx-f705e145f931f504"><li class="jsx-400ec7965926e858 dropdown-item">Advanced Vert.x Guide <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a></ul></div></span><a class="jsx-f705e145f931f504 navbar-menu-item" href="/blog/">博客</a><a class="jsx-f705e145f931f504 navbar-menu-item" href="/community/">社区</a><a class="jsx-f705e145f931f504 navbar-menu-item" href="/translation/">翻译团队</a></div><div class="jsx-f705e145f931f504 navbar-social"><span class="jsx-75cbc16d79a176fb "><a href="https://github.com/vert-x3/vertx-awesome" target="_blank" rel="noopener noreferrer" class="jsx-f705e145f931f504 navbar-social-link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="List of awesome Vert.x projects"><title></title><path d="M24 11.438l-6.154-5.645-.865.944 5.128 4.7H1.895l5.128-4.705-.865-.943-6.154 5.649H0v3.72c0 1.683 1.62 3.053 3.61 3.053h3.795c1.99 0 3.61-1.37 3.61-3.051v-2.446h1.97v2.446c0 1.68 1.62 3.051 3.61 3.051h3.794c1.99 0 3.61-1.37 3.61-3.051v-3.721z"></path></svg></a></span><div class="jsx-75cbc16d79a176fb tooltip">Awesome Vert.x<div data-popper-arrow="true" class="jsx-75cbc16d79a176fb tooltip-arrow"></div></div><span class="jsx-75cbc16d79a176fb "><a href="https://stackoverflow.com/questions/tagged/vert.x" target="_blank" rel="noopener noreferrer" class="jsx-f705e145f931f504 navbar-social-link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Stack Overflow questions related to Vert.x"><title></title><path d="M15.725 0l-1.72 1.277 6.39 8.588 1.716-1.277L15.725 0zm-3.94 3.418l-1.369 1.644 8.225 6.85 1.369-1.644-8.225-6.85zm-3.15 4.465l-.905 1.94 9.702 4.517.904-1.94-9.701-4.517zm-1.85 4.86l-.44 2.093 10.473 2.201.44-2.092-10.473-2.203zM1.89 15.47V24h19.19v-8.53h-2.133v6.397H4.021v-6.396H1.89zm4.265 2.133v2.13h10.66v-2.13H6.154Z"></path></svg></a></span><div class="jsx-75cbc16d79a176fb tooltip">Stack Overflow<div data-popper-arrow="true" class="jsx-75cbc16d79a176fb tooltip-arrow"></div></div><span class="jsx-75cbc16d79a176fb "><a href="https://www.youtube.com/channel/UCGN6L3tRhs92Uer3c6VxOSA" target="_blank" rel="noopener noreferrer" class="jsx-f705e145f931f504 navbar-social-link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="YouTube channel of Vert.x"><title></title><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"></path></svg></a></span><div class="jsx-75cbc16d79a176fb tooltip">YouTube<div data-popper-arrow="true" class="jsx-75cbc16d79a176fb tooltip-arrow"></div></div><span class="jsx-75cbc16d79a176fb "><a href="https://discord.gg/KzEMwP2" target="_blank" rel="noopener noreferrer" class="jsx-f705e145f931f504 navbar-social-link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Eclipse Vert.x channel on Discord"><title></title><path d="M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.946 2.4189-2.1568 2.4189Z"></path></svg></a></span><div class="jsx-75cbc16d79a176fb tooltip">Discord<div data-popper-arrow="true" class="jsx-75cbc16d79a176fb tooltip-arrow"></div></div><span class="jsx-75cbc16d79a176fb "><a href="https://groups.google.com/forum/?fromgroups#!forum/vertx" target="_blank" rel="noopener noreferrer" class="jsx-f705e145f931f504 navbar-social-link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="A Google group for Vert.x users"><title></title><path d="M.92 3.332c-.776 0-1.216.67-.692 1.383l2.537 4.403v7.86c0 2.013 1.467 3.69 3.459 3.69H20.31a3.75 3.75 0 003.69-3.69V7.043a3.723 3.723 0 00-3.668-3.71zm5.786 3.71H20.1c.587 0 1.153.357 1.153.923 0 .566-.566.922-1.153.922H6.706c-.587 0-1.153-.356-1.153-.922 0-.566.566-.923 1.153-.923zm0 3.69H20.1c.587 0 1.153.356 1.153.922 0 .566-.566.922-1.153.922H6.706c-.587 0-1.153-.356-1.153-.922 0-.566.566-.922 1.153-.922zm-.021 3.71h9.705c.587 0 1.153.356 1.153.922 0 .566-.566.923-1.153.923H6.685c-.587 0-1.153-.357-1.153-.923 0-.566.566-.922 1.153-.922Z"></path></svg></a></span><div class="jsx-75cbc16d79a176fb tooltip">Vert.x User Group<div data-popper-arrow="true" class="jsx-75cbc16d79a176fb tooltip-arrow"></div></div><span class="jsx-75cbc16d79a176fb "><a href="https://qm.qq.com/cgi-bin/qm/qr?k=QFrKfwIVTuShDdh7puvfJWjqOx4C014c&amp;jump_from=webapi" target="_blank" rel="noopener noreferrer" class="jsx-f705e145f931f504 navbar-social-link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Vert.x中国用户组QQ群"><title></title><path d="M21.395 15.035a39.548 39.548 0 0 0-.803-2.264l-1.079-2.695c.001-.032.014-.562.014-.836C19.526 4.632 17.351 0 12 0S4.474 4.632 4.474 9.241c0 .274.013.804.014.836l-1.08 2.695a38.97 38.97 0 0 0-.802 2.264c-1.021 3.283-.69 4.643-.438 4.673.54.065 2.103-2.472 2.103-2.472 0 1.469.756 3.387 2.394 4.771-.612.188-1.363.479-1.845.835-.434.32-.379.646-.301.778.343.578 5.883.369 7.482.189 1.6.18 7.14.389 7.483-.189.078-.132.132-.458-.301-.778-.483-.356-1.233-.646-1.846-.836 1.637-1.384 2.393-3.302 2.393-4.771 0 0 1.563 2.537 2.103 2.472.251-.03.581-1.39-.438-4.673zM12.662 4.846c.039-1.052.659-1.878 1.385-1.846s1.281.912 1.242 1.964c-.039 1.051-.659 1.878-1.385 1.846s-1.282-.912-1.242-1.964zM9.954 3c.725-.033 1.345.794 1.384 1.846.04 1.052-.517 1.931-1.242 1.963-.726.033-1.346-.794-1.385-1.845C8.672 3.912 9.228 3.033 9.954 3zM7.421 8.294c.194-.43 2.147-.908 4.566-.908h.026c2.418 0 4.372.479 4.566.908a.14.14 0 0 1 .014.061c0 .031-.01.059-.026.083-.163.238-2.333 1.416-4.553 1.416h-.026c-2.221 0-4.39-1.178-4.553-1.416a.136.136 0 0 1-.014-.144zm10.422 8.622c-.22 3.676-2.403 5.987-5.774 6.021h-.137c-3.37-.033-5.554-2.345-5.773-6.021-.081-1.35.001-2.496.147-3.43.318.063.638.122.958.176v3.506s1.658.334 3.318.103v-3.225c.488.027.96.04 1.406.034h.025c1.678.021 3.714-.204 5.683-.594.146.934.227 2.08.147 3.43zM10.48 5.804c.313-.041.542-.409.508-.825-.033-.415-.314-.72-.629-.679-.313.04-.541.409-.508.824.034.417.315.72.629.68zM14.479 5.156c.078.037.221.042.289-.146.035-.095.025-.165-.009-.214-.023-.033-.133-.118-.371-.176-.904-.22-1.341.384-1.405.499-.04.072-.012.176.056.227.067.051.139.037.179-.006.58-.628 1.21-.208 1.261-.184z"></path></svg></a></span><div class="jsx-75cbc16d79a176fb tooltip">Vert.x中国用户组QQ群<div data-popper-arrow="true" class="jsx-75cbc16d79a176fb tooltip-arrow"></div></div><span class="jsx-75cbc16d79a176fb "><a href="https://qun.qq.com/qqweb/qunpro/share?_wv=3&amp;_wwv=128&amp;inviteCode=1reLvB&amp;from=246610&amp;biz=ka" target="_blank" rel="noopener noreferrer" class="jsx-f705e145f931f504 navbar-social-link"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 200 200" aria-label=""><title>Vert.x中国用户组QQ群</title><path d="M13 73L16 49L52 49L58 14L82 14L77 49L135 49L141 14L166 14L160 49L195 49L192 73L157 73L148 124L184 124L181 149L144 149L137 193L90 149L61 149L55 185L31 185L36 149L0 149L6 124L100 124L120 144L131 75L72 75L64 124L40 124L48 73Z"></path></svg></a></span><div class="jsx-75cbc16d79a176fb tooltip">Vert.x中国用户组QQ频道<div data-popper-arrow="true" class="jsx-75cbc16d79a176fb tooltip-arrow"></div></div></div></div></div></div></header><div class="jsx-efcc50be384cabc7 page-content docs-content"><div class="jsx-efcc50be384cabc7 container"><div class="jsx-efcc50be384cabc7 docs-content-wrapper"><aside class="jsx-efcc50be384cabc7 "><div class="jsx-efcc50be384cabc7 docs-content-wrapper-sidebar"><div class="jsx-d1843944f2d67b search-panel"><div class="jsx-bf3edc7191e82cb search"><input type="text" disabled="" class="jsx-bf3edc7191e82cb autosuggest"/><input type="text" placeholder="Search..." value="" class="jsx-bf3edc7191e82cb"/><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="search-icon"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="search-icon-delete"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg></div><ul class="jsx-9ece789f808ef724 search-results"></ul><div class="jsx-9ece789f808ef724 search-results-none">No results.</div></div><div class="jsx-efcc50be384cabc7 docs-content-toc"><div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_using_vert_x_mongodb_client">使用 Vert.x MongoDB Client</a></li>
<li><a href="#_creating_a_client">创建客户端</a>
<ul class="sectlevel2">
<li><a href="#_using_the_default_shared_pool">使用默认的共享连接池</a></li>
<li><a href="#_specifying_a_pool_source_name">指定 连接池方式数据源的名称</a></li>
<li><a href="#_creating_a_client_with_a_non_shared_data_pool">创建非共享数据源的客户端对象</a></li>
</ul>
</li>
<li><a href="#_using_the_api">使用客户端 API</a>
<ul class="sectlevel2">
<li><a href="#_saving_documents">保存文档</a></li>
<li><a href="#_inserting_documents">插入文档</a></li>
<li><a href="#_updating_documents">更新文档</a></li>
<li><a href="#_replacing_documents">替换文档</a></li>
<li><a href="#_bulk_operations">批量操作</a></li>
<li><a href="#_finding_documents">查找文档</a></li>
<li><a href="#_finding_documents_in_batches">批量查询文档</a></li>
<li><a href="#_finding_a_single_document">查询单个文档</a></li>
<li><a href="#_removing_documents">删除文档</a></li>
<li><a href="#_removing_a_single_documents">删除单个文档</a></li>
<li><a href="#_counting_documents">文档计数</a></li>
<li><a href="#_managing_mongodb_collections">管理 MongoDB 集合</a></li>
<li><a href="#_running_other_mongodb_commands">执行 <code>MongoDB</code> 的其他命令</a></li>
<li><a href="#_mongodb_extended_json_support">MongoDB的JSON扩展支持</a></li>
<li><a href="#_getting_distinct_values">获取 distinct 后的值</a></li>
</ul>
</li>
<li><a href="#_storing_retrieving_files_and_binary_data">存储/检索文件和二进制数据</a>
<ul class="sectlevel2">
<li><a href="#_get_the_mongogridfsclient_to_interact_with_gridfs">获取一个可与GridFS交互的MongoGridFsClient。</a></li>
<li><a href="#_drop_an_entire_file_bucket_from_gridfs">从GridFS中，删除整个文件bucket。</a></li>
<li><a href="#_find_all_file_ids_in_a_gridfs_bucket">在一个GridFS的bucket中，查询所有文件ID。</a></li>
<li><a href="#_find_file_ids_in_a_gridfs_bucket_matching_a_query">在一个与查询匹配的GridFS bucket中，查询文件ID。</a></li>
<li><a href="#_delete_file_ids_in_gridfs_based_its_id">在GridFS中，根据文件的ID来删除文件。</a></li>
<li><a href="#_upload_a_file_in_gridfs">在GridFS中上传文件</a></li>
<li><a href="#_upload_a_file_in_gridfs_with_options">上传文件时携带配置参数。</a></li>
<li><a href="#_download_a_file_previously_stored_in_gridfs">下载存储在GridFS中的文件</a></li>
<li><a href="#_download_a_file_previously_stored_in_gridfs_given_its_id">使用文件ID来下载存储在GridFS中的文件</a></li>
<li><a href="#_download_a_file_from_gridfs_to_a_new_name">从GridFS下载文件，并且重新命名文件名称</a></li>
<li><a href="#_upload_a_stream_to_gridfs">将数据流上传到GridFS</a></li>
<li><a href="#_upload_a_stream_to_gridfs_with_options">上传数据流时携带配置参数</a></li>
<li><a href="#_download_a_stream_from_gridfs_using_file_name">使用文件名称从GridFS中下载数据流</a></li>
<li><a href="#_download_a_stream_with_options_from_gridfs_using_file_name">使用文件名称并携带配置参数，从GridFS中下载数据流</a></li>
<li><a href="#_download_a_stream_from_gridfs_using_id">使用ID下载数据流</a></li>
</ul>
</li>
<li><a href="#_configuring_the_client">客户端参数配置</a></li>
<li><a href="#_rxjava_3_api">RxJava 3 API</a>
<ul class="sectlevel2">
<li><a href="#_creating_an_rxified_client">创建一个RX化的客户端</a></li>
<li><a href="#_finding_documents_in_batches">批量查询文档</a></li>
</ul>
</li>
</ul>
</div></div></div></aside><div class="jsx-efcc50be384cabc7 docs-content-sidebar-toggle"><div style="position:relative" class="jsx-efcc50be384cabc7"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-list"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-x"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></div></div><div class="jsx-efcc50be384cabc7 docs-content-inner"><div class="jsx-efcc50be384cabc7 docs-content-metadata"><div class="jsx-efcc50be384cabc7 docs-content-metadata-left"><div class="jsx-efcc50be384cabc7 docs-content-metadata-repo"><div class="jsx-d38685edc31911e0 github-stars"><a href="https://github.com/vert-x3/vertx-mongo-client" class="jsx-d38685edc31911e0"><div class="jsx-d38685edc31911e0 icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg></div> <!-- -->null stars</a></div></div><div class="jsx-efcc50be384cabc7"><a href="https://vertx.io/docs/apidocs" class="jsx-efcc50be384cabc7"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path></svg> API</a></div><div class="jsx-efcc50be384cabc7 docs-content-metadata-examples"><a href="https://github.com/vert-x3/vertx-examples/tree/4.x/mongo-examples"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather"><path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"></path></svg> Examples</a></div><div class="jsx-efcc50be384cabc7 docs-content-metadata-edit"><a href="https://github.com/vertx-china/vertx-web-site/tree/master/docs/translation/vertx-mongo-client/java"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg> 改进翻译</a></div><span class="jsx-efcc50be384cabc7 docs-content-metadata-version"><div class="jsx-6650573c8f14945d dropdown"><a class="jsx-6650573c8f14945d dropdown-title">v4.2.7<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="jsx-6650573c8f14945d dropdown-menu align-right"><a href="/docs/vertx-mongo-client/java/"><li class="jsx-400ec7965926e858 dropdown-item active has-active-siblings"><span class="jsx-400ec7965926e858 dropdown-check-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg></span>Latest (v<!-- -->4.2.7<!-- -->)</li></a><a href="/docs/4.1.8/vertx-mongo-client/java/"><li class="jsx-400ec7965926e858 dropdown-item has-active-siblings">v<!-- -->4.1.8</li></a><a href="/docs/4.0.3/vertx-mongo-client/java/"><li class="jsx-400ec7965926e858 dropdown-item has-active-siblings">v<!-- -->4.0.3</li></a><a href="/docs/3.9.13/vertx-mongo-client/java/"><li class="jsx-400ec7965926e858 dropdown-item has-active-siblings">v<!-- -->3.9.13</li></a></ul></div></span></div></div><div class="jsx-efcc50be384cabc7"><h1>Vert.x MongoDB 客户端</h1>

<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>您的 Vert.x 应用可使用 Vert.x MongoDB Client（以下简称客户端）与 MongoDB 互动，
包括保存，获取，搜索和删除文档。MongoDB 是在 Vert.x 应用进行数据持久化时的最佳选择，
因为 MongoDB 天生就是处理 JSON（BSON）格式的文档数据库。</p>
</div>
<div class="paragraph">
<p><strong>特点</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>完全非阻塞</p>
</li>
<li>
<p>支持自定义编解码器，从而实现 Vert.x JSON 快速序列化和反序列化</p>
</li>
<li>
<p>支持 MongoDB Java 驱动大部分配置项</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>本客户端基于
<a href="https://mongodb.github.io/mongo-java-driver/4.1/driver-reactive/getting-started/quick-start/">MongoDB ReactiveStreams Driver</a> 。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_using_vert_x_mongodb_client"><a class="anchor" href="#_using_vert_x_mongodb_client"></a>使用 Vert.x MongoDB Client</h2>
<div class="sectionbody">
<div class="paragraph">
<p>使用此客户端，需要添加下列依赖：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Maven（在 <code>pom.xml</code> 文件中）：</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.vertx<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>vertx-mongo-client<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.2.6<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Gradle（在 <code>build.gradle</code> 文件中）：</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">compile <span class="hljs-string">&#x27;io.vertx:vertx-mongo-client:4.2.6&#x27;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creating_a_client"><a class="anchor" href="#_creating_a_client"></a>创建客户端</h2>
<div class="sectionbody">
<div class="paragraph">
<p>您可用以下几种方式创建客户端：</p>
</div>
<div class="sect2">
<h3 id="_using_the_default_shared_pool"><a class="anchor" href="#_using_the_default_shared_pool"></a>使用默认的共享连接池</h3>
<div class="paragraph">
<p>大部分情况下，您希望不同的客户端之间共享一个连接池。</p>
</div>
<div class="paragraph">
<p>例如：我们通过部署多个verticle实例来扩展你的程序的时候，我们会希望每个verticle实例都共用同一个连接池，
而不是多个verticle实例使用多个连接池。</p>
</div>
<div class="paragraph">
<p>要想用最简单的方法去使用共享连接池，我们可以这么做：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="hljs-type">MongoClient</span> <span class="hljs-variable">client</span> <span class="hljs-operator">=</span> MongoClient.createShared(vertx, config);</code></pre>
</div>
</div>
<div class="paragraph">
<p>只有第一次调用 <code><a href="../../apidocs/io/vertx/ext/mongo/MongoClient.html#createShared-io.vertx.core.Vertx-io.vertx.core.json.JsonObject-">MongoClient.createShared</a></code>
才会真正的根据您指定的 config 配置创建连接池。</p>
</div>
<div class="paragraph">
<p>之后再调用此方法，只会返回一个新的客户端对象，但使用的是相同的数据源。因此这时 config 参数不再有作用。</p>
</div>
</div>
<div class="sect2">
<h3 id="_specifying_a_pool_source_name"><a class="anchor" href="#_specifying_a_pool_source_name"></a>指定 连接池方式数据源的名称</h3>
<div class="paragraph">
<p>您还可以像下面这样，在创建一个客户端的时候指定连接池方式数据源的名称：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="hljs-type">MongoClient</span> <span class="hljs-variable">client</span> <span class="hljs-operator">=</span> MongoClient.createShared(vertx, config, <span class="hljs-string">&quot;MyPoolName&quot;</span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>如果您使用相同Vert.x实例创建了不同客户端，同时指定了相同的连接池名称，
那么这些客户端将共享这个相同的连接池数据源。</p>
</div>
<div class="paragraph">
<p>同样的（与使用默认的共享数据源相同），只有第一次调用 <code><a href="../../apidocs/io/vertx/ext/mongo/MongoClient.html#createShared-io.vertx.core.Vertx-io.vertx.core.json.JsonObject-">MongoClient.createShared</a></code>
才会真正的根据 您指定的config创建一个连接池。</p>
</div>
<div class="paragraph">
<p>之后再调用此方法，只会返回一个新的客户端对象，但使用的是相同的数据源。因此这时config参数不再有作用。</p>
</div>
<div class="paragraph">
<p>当您希望不同groups的客户端，使用不同的连接池时，可以使用这种方式。
举个使用场景的例子，比如这些客户端需要与不同数据源进行交互的时候，可以使用这种方式。</p>
</div>
</div>
<div class="sect2">
<h3 id="_creating_a_client_with_a_non_shared_data_pool"><a class="anchor" href="#_creating_a_client_with_a_non_shared_data_pool"></a>创建非共享数据源的客户端对象</h3>
<div class="paragraph">
<p>在大部分情况下，您希望在不同客户端实例间共享一个连接池。
但是，在有些情况下，您可能想要使用一个不与其它客户端共享连接的连接池，以创建一个客户端实例。</p>
</div>
<div class="paragraph">
<p>此时您可使用 <code><a href="../../apidocs/io/vertx/ext/mongo/MongoClient.html#create-io.vertx.core.Vertx-io.vertx.core.json.JsonObject-">MongoClient.create</a></code>。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="hljs-type">MongoClient</span> <span class="hljs-variable">client</span> <span class="hljs-operator">=</span> MongoClient.create(vertx, config);</code></pre>
</div>
</div>
<div class="paragraph">
<p>每次调用此方法，就相当于在调用 <code><a href="../../apidocs/io/vertx/ext/mongo/MongoClient.html#createShared-io.vertx.core.Vertx-io.vertx.core.json.JsonObject-java.lang.String-">MongoClient.createShared</a></code>
方法时，加上了具有唯一名称的数据源参数。</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_using_the_api"><a class="anchor" href="#_using_the_api"></a>使用客户端 API</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code><a href="../../apidocs/io/vertx/ext/mongo/MongoClient.html">MongoClient</a></code> 接口定义了操作客户端的API 方法。您可以使用 <code><a href="../../apidocs/io/vertx/ext/mongo/MongoClient.html">MongoClient</a></code> 来使用调用 API 方法。</p>
</div>
<div class="sect2">
<h3 id="_saving_documents"><a class="anchor" href="#_saving_documents"></a>保存文档</h3>
<div class="paragraph">
<p>您可以使用 <code><a href="../../apidocs/io/vertx/ext/mongo/MongoClient.html#save-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.core.Handler-">save</a></code> 方法以保存文档。</p>
</div>
<div class="paragraph">
<p>如果文档中没有 <code>\_id</code> 字段，文档会被保存。若有，将执行 upserted。
Upserted 意思是，如果此文档不存在，就保存此文档，此文档存在就更新。</p>
</div>
<div class="paragraph">
<p>如果被保存的文档没有 <code>\_id</code> 字段，回调方法中可以获得保存后生成的 id。</p>
</div>
<div class="paragraph">
<p>例如：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="hljs-type">JsonObject</span> <span class="hljs-variable">document</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonObject</span>()
  .put(<span class="hljs-string">&quot;title&quot;</span>, <span class="hljs-string">&quot;The Hobbit&quot;</span>);
mongoClient.save(<span class="hljs-string">&quot;books&quot;</span>, document, res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    <span class="hljs-type">String</span> <span class="hljs-variable">id</span> <span class="hljs-operator">=</span> res.result();
    System.out.println(<span class="hljs-string">&quot;Saved book with id &quot;</span> + id);
  } <span class="hljs-keyword">else</span> {
    res.cause().printStackTrace();
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>下面的例子，文档已有 <code>\_id</code>：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="hljs-type">JsonObject</span> <span class="hljs-variable">document</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonObject</span>()
  .put(<span class="hljs-string">&quot;title&quot;</span>, <span class="hljs-string">&quot;The Hobbit&quot;</span>)
  .put(<span class="hljs-string">&quot;_id&quot;</span>, <span class="hljs-string">&quot;123244&quot;</span>);
mongoClient.save(<span class="hljs-string">&quot;books&quot;</span>, document, res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    <span class="hljs-comment">// ...</span>
  } <span class="hljs-keyword">else</span> {
    res.cause().printStackTrace();
  }
});</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_inserting_documents"><a class="anchor" href="#_inserting_documents"></a>插入文档</h3>
<div class="paragraph">
<p>您可以使用 <code><a href="../../apidocs/io/vertx/ext/mongo/MongoClient.html#insert-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.core.Handler-">insert</a></code> 方法来插入文档。</p>
</div>
<div class="paragraph">
<p>如果被插入的文档没有包含 id，回调方法中可以获得保存后生成的 id。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="hljs-type">JsonObject</span> <span class="hljs-variable">document</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonObject</span>()
  .put(<span class="hljs-string">&quot;title&quot;</span>, <span class="hljs-string">&quot;The Hobbit&quot;</span>);
mongoClient.insert(<span class="hljs-string">&quot;books&quot;</span>, document, res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    <span class="hljs-type">String</span> <span class="hljs-variable">id</span> <span class="hljs-operator">=</span> res.result();
    System.out.println(<span class="hljs-string">&quot;Inserted book with id &quot;</span> + id);
  } <span class="hljs-keyword">else</span> {
    res.cause().printStackTrace();
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>如果被插入的文档包含 id，但是此 id 代表的文档已经存在，插入就会失败：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="hljs-type">JsonObject</span> <span class="hljs-variable">document</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonObject</span>()
  .put(<span class="hljs-string">&quot;title&quot;</span>, <span class="hljs-string">&quot;The Hobbit&quot;</span>)
  .put(<span class="hljs-string">&quot;_id&quot;</span>, <span class="hljs-string">&quot;123244&quot;</span>);
mongoClient.insert(<span class="hljs-string">&quot;books&quot;</span>, document, res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    <span class="hljs-comment">//...</span>
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// Will fail if the book with that id already exists.</span>
  }
});</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_updating_documents"><a class="anchor" href="#_updating_documents"></a>更新文档</h3>
<div class="paragraph">
<p>您可以使用 <code><a href="../../apidocs/io/vertx/ext/mongo/MongoClient.html#updateCollection-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.core.json.JsonObject-io.vertx.core.Handler-">updateCollection</a></code> 方法来更新文档。</p>
</div>
<div class="paragraph">
<p>此方法可以更新集合（译者注：MongoDB 中的集合概念对应 SQL 中的数据库表）中的一个或多个文档。
在 <code>updateCollection</code> 方法中被当成参数传递的JSON对象，
必须包含 <a href="http://docs.mongodb.org/manual/reference/operator/update-field/">Update Operators</a>，
因为由它决定更新的方式。</p>
</div>
<div class="paragraph">
<p>其中作为 <code>query</code> 参数的 json对象决定更新集合中的哪个文档。</p>
</div>
<div class="paragraph">
<p>例如更新 books 集合中的一个文档：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="hljs-type">JsonObject</span> <span class="hljs-variable">query</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonObject</span>()
  .put(<span class="hljs-string">&quot;title&quot;</span>, <span class="hljs-string">&quot;The Hobbit&quot;</span>);
<span class="hljs-comment">// Set the author field</span>
<span class="hljs-type">JsonObject</span> <span class="hljs-variable">update</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonObject</span>().put(<span class="hljs-string">&quot;$set&quot;</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonObject</span>()
  .put(<span class="hljs-string">&quot;author&quot;</span>, <span class="hljs-string">&quot;J. R. R. Tolkien&quot;</span>));
mongoClient.updateCollection(<span class="hljs-string">&quot;books&quot;</span>, query, update, res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    System.out.println(<span class="hljs-string">&quot;Book updated !&quot;</span>);
  } <span class="hljs-keyword">else</span> {
    res.cause().printStackTrace();
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>如果您希望更新操作是 upsert（upsert 意思是，如果此文档不存在，就保存此文档；此文档存在就更新）或者 是更新多个文档，
那么就使用 <code><a href="../../apidocs/io/vertx/ext/mongo/MongoClient.html#updateCollectionWithOptions-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.core.json.JsonObject-io.vertx.ext.mongo.UpdateOptions-io.vertx.core.Handler-">updateCollectionWithOptions</a></code>
方法，传递一个 <code><a href="../../apidocs/io/vertx/ext/mongo/UpdateOptions.html">UpdateOptions</a></code> 的实例，去定制化您的更新操作。</p>
</div>
<div class="paragraph">
<p>参数 <code>UpdateOptions</code> 有以下选项：</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>multi</code></dt>
<dd>
<p>若设置为 true，则可以更新多个文档</p>
</dd>
<dt class="hdlist1"><code>upsert</code></dt>
<dd>
<p>若设置为 true，则可以在没有查询到要更新的文档时，新增该文档</p>
</dd>
<dt class="hdlist1"><code>writeConcern</code></dt>
<dd>
<p>写操作的可靠性（译者注：源码中是用 writeOption 枚举类型来代表的）</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">  <span class="hljs-comment">//译者注：MongoDB 默认写操作级别是 WriteOption.ACKNOWLEDGED</span>
<span class="hljs-type">JsonObject</span> <span class="hljs-variable">query</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonObject</span>().put(<span class="hljs-string">&quot;title&quot;</span>, <span class="hljs-string">&quot;The Hobbit&quot;</span>);
  <span class="hljs-comment">// Set the author field</span>
<span class="hljs-type">JsonObject</span> <span class="hljs-variable">update</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonObject</span>().put(<span class="hljs-string">&quot;$set&quot;</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonObject</span>()
  .put(<span class="hljs-string">&quot;author&quot;</span>, <span class="hljs-string">&quot;J. R. R. Tolkien&quot;</span>));
<span class="hljs-type">UpdateOptions</span> <span class="hljs-variable">options</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UpdateOptions</span>().setMulti(<span class="hljs-literal">true</span>);
mongoClient.updateCollectionWithOptions(<span class="hljs-string">&quot;books&quot;</span>, query, update, options, res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    System.out.println(<span class="hljs-string">&quot;Book updated !&quot;</span>);
  } <span class="hljs-keyword">else</span> {
    res.cause().printStackTrace();
  }
});</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_replacing_documents"><a class="anchor" href="#_replacing_documents"></a>替换文档</h3>
<div class="paragraph">
<p>您可以使用 <code><a href="../../apidocs/io/vertx/ext/mongo/MongoClient.html#replaceDocuments-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.core.json.JsonObject-io.vertx.core.Handler-">replaceDocuments</a></code> 方法来替换文档。</p>
</div>
<div class="paragraph">
<p>替换操作和更新操作相似，但替换不需要任何操作符。
因为它是用您提供的文档去替换整个文档。</p>
</div>
<div class="paragraph">
<p>例如替换 books 集合中的一个文档：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="hljs-type">JsonObject</span> <span class="hljs-variable">query</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonObject</span>()
  .put(<span class="hljs-string">&quot;title&quot;</span>, <span class="hljs-string">&quot;The Hobbit&quot;</span>);
<span class="hljs-type">JsonObject</span> <span class="hljs-variable">replace</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonObject</span>()
  .put(<span class="hljs-string">&quot;title&quot;</span>, <span class="hljs-string">&quot;The Lord of the Rings&quot;</span>)
  .put(<span class="hljs-string">&quot;author&quot;</span>, <span class="hljs-string">&quot;J. R. R. Tolkien&quot;</span>);
mongoClient.replaceDocuments(<span class="hljs-string">&quot;books&quot;</span>, query, replace, res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    System.out.println(<span class="hljs-string">&quot;Book replaced !&quot;</span>);
  } <span class="hljs-keyword">else</span> {
    res.cause().printStackTrace();
  }
});</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_bulk_operations"><a class="anchor" href="#_bulk_operations"></a>批量操作</h3>
<div class="paragraph">
<p>您可以使用 <code><a href="../../apidocs/io/vertx/ext/mongo/MongoClient.html#bulkWrite-java.lang.String-java.util.List-io.vertx.core.Handler-">bulkWrite</a></code> 来一次执行多个新增、更新、替换或者删除的操作。</p>
</div>
<div class="paragraph">
<p>在 <code>bulkWrite</code> 方法中，您可以传递一系列 <code><a href="../../apidocs/io/vertx/ext/mongo/BulkOperation.html">BulkOperations</a></code>，而且每个 <code>BulkOperations</code> 运作方式和单个操作类似。
您可以根据需要传递多个操作，即使这些操作都是同一类型的。</p>
</div>
<div class="paragraph">
<p>如果您希望 批量操作可以按照顺序执行，那么可以使用 <code><a href="../../apidocs/io/vertx/ext/mongo/MongoClient.html#bulkWriteWithOptions-java.lang.String-java.util.List-io.vertx.ext.mongo.BulkWriteOptions-io.vertx.core.Handler-">bulkWriteWithOptions</a></code>
将自定义的配置写入其中，然后传递一个 <code><a href="../../apidocs/io/vertx/ext/mongo/BulkWriteOptions.html">BulkWriteOptions</a></code> 的实例。
更多关于有序批量写操作的描述，见
<a href="https://docs.mongodb.com/manual/reference/method/db.collection.bulkWrite/#execution-of-operations">Execution of Operations</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_finding_documents"><a class="anchor" href="#_finding_documents"></a>查找文档</h3>
<div class="paragraph">
<p>您可以使用 <code><a href="../../apidocs/io/vertx/ext/mongo/MongoClient.html#find-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.core.Handler-">find</a></code> 方法查找文档。</p>
</div>
<div class="paragraph">
<p>其中 <code>query</code> 参数用来匹配集合中的文档。</p>
</div>
<div class="paragraph">
<p>例如匹配所有文档：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="hljs-type">JsonObject</span> <span class="hljs-variable">query</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonObject</span>();
mongoClient.find(<span class="hljs-string">&quot;books&quot;</span>, query, res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    <span class="hljs-keyword">for</span> (JsonObject json : res.result()) {
      System.out.println(json.encodePrettily());
    }
  } <span class="hljs-keyword">else</span> {
    res.cause().printStackTrace();
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>又例如匹配 books 集合中某一个作者的所有文档：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="hljs-type">JsonObject</span> <span class="hljs-variable">query</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonObject</span>()
  .put(<span class="hljs-string">&quot;author&quot;</span>, <span class="hljs-string">&quot;J. R. R. Tolkien&quot;</span>);
mongoClient.find(<span class="hljs-string">&quot;books&quot;</span>, query, res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    <span class="hljs-keyword">for</span> (JsonObject json : res.result()) {
      System.out.println(json.encodePrettily());
    }
  } <span class="hljs-keyword">else</span> {
    res.cause().printStackTrace();
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>查询的结果包装成了 JSON 对象的 List 集合。</p>
</div>
<div class="paragraph">
<p>如果您希望在查询中指定一些内容，比如指定返回的字段，或者指定返回多少条数据，可以使用 <code><a href="../../apidocs/io/vertx/ext/mongo/MongoClient.html#findWithOptions-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.ext.mongo.FindOptions-io.vertx.core.Handler-">findWithOptions</a></code> 方法，
在参数 <code><a href="../../apidocs/io/vertx/ext/mongo/FindOptions.html">FindOptions</a></code> 中指定这些查询要求。</p>
</div>
<div class="paragraph">
<p><code>FindOptions</code> 中可以设置以下参数：</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>fields</code></dt>
<dd>
<p>返回的字段。默认为 <code>null</code>，意味着查询结果会返回所有字段。</p>
</dd>
<dt class="hdlist1"><code>sort</code></dt>
<dd>
<p>指定排序字段。默认为 null。</p>
</dd>
<dt class="hdlist1"><code>limit</code></dt>
<dd>
<p>指定返回的数据条数。默认值为 -1，意味着查询结果会返回所有数据。</p>
</dd>
<dt class="hdlist1"><code>skip</code></dt>
<dd>
<p>在返回查询结果之前，指定跳过的数据数量。默认值为 0 。</p>
</dd>
<dt class="hdlist1"><code>hint</code></dt>
<dd>
<p>要使用的索引。默认为空字符串。</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_finding_documents_in_batches"><a class="anchor" href="#_finding_documents_in_batches"></a>批量查询文档</h3>
<div class="paragraph">
<p>当我们在处理大量的数据集合的时候，不建议使用
<code><a href="../../apidocs/io/vertx/ext/mongo/MongoClient.html#find-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.core.Handler-">find</a></code> 方法或者
<code><a href="../../apidocs/io/vertx/ext/mongo/MongoClient.html#findWithOptions-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.ext.mongo.FindOptions-io.vertx.core.Handler-">findWithOptions</a></code> 方法。
为了避免响应结果数据量太大导致内存溢出，建议使用 <code><a href="../../apidocs/io/vertx/ext/mongo/MongoClient.html#findBatch-java.lang.String-io.vertx.core.json.JsonObject-">findBatch</a></code> :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="hljs-type">JsonObject</span> <span class="hljs-variable">query</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonObject</span>()
  .put(<span class="hljs-string">&quot;author&quot;</span>, <span class="hljs-string">&quot;J. R. R. Tolkien&quot;</span>);
mongoClient.findBatch(<span class="hljs-string">&quot;book&quot;</span>, query)
  .exceptionHandler(throwable -&gt; throwable.printStackTrace())
  .endHandler(v -&gt; System.out.println(<span class="hljs-string">&quot;End of research&quot;</span>))
  .handler(doc -&gt; System.out.println(<span class="hljs-string">&quot;Found doc: &quot;</span> + doc.encodePrettily()));</code></pre>
</div>
</div>
<div class="paragraph">
<p>被匹配到的文档会被 <code><a href="../../apidocs/io/vertx/core/streams/ReadStream.html">ReadStream</a></code> 处理器挨个返回。</p>
</div>
<div class="paragraph">
<p>在 <code><a href="../../apidocs/io/vertx/ext/mongo/FindOptions.html">FindOptions</a></code> 中有一个额外的参数 <code>batchSize</code>，您可以通过设置这个参数，来设置 <code>ReadStream</code> 处理器一次加载的文档的数量。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="hljs-type">JsonObject</span> <span class="hljs-variable">query</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonObject</span>()
  .put(<span class="hljs-string">&quot;author&quot;</span>, <span class="hljs-string">&quot;J. R. R. Tolkien&quot;</span>);
<span class="hljs-type">FindOptions</span> <span class="hljs-variable">options</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FindOptions</span>().setBatchSize(<span class="hljs-number">100</span>);
mongoClient.findBatchWithOptions(<span class="hljs-string">&quot;book&quot;</span>, query, options)
  .exceptionHandler(throwable -&gt; throwable.printStackTrace())
  .endHandler(v -&gt; System.out.println(<span class="hljs-string">&quot;End of research&quot;</span>))
  .handler(doc -&gt; System.out.println(<span class="hljs-string">&quot;Found doc: &quot;</span> + doc.encodePrettily()));</code></pre>
</div>
</div>
<div class="paragraph">
<p>默认情况下， <code>batchSize</code> 的值是20。</p>
</div>
</div>
<div class="sect2">
<h3 id="_finding_a_single_document"><a class="anchor" href="#_finding_a_single_document"></a>查询单个文档</h3>
<div class="paragraph">
<p>要查询单个文档，您可以使用 <code><a href="../../apidocs/io/vertx/ext/mongo/MongoClient.html#findOne-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.core.json.JsonObject-io.vertx.core.Handler-">findOne</a></code> 方法。</p>
</div>
<div class="paragraph">
<p>这有点类似 <code><a href="../../apidocs/io/vertx/ext/mongo/MongoClient.html#find-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.core.Handler-">find</a></code> 方法，但是仅仅返回 find 方法查询命中的第一条数据。</p>
</div>
</div>
<div class="sect2">
<h3 id="_removing_documents"><a class="anchor" href="#_removing_documents"></a>删除文档</h3>
<div class="paragraph">
<p>您可以使用 <code><a href="../../apidocs/io/vertx/ext/mongo/MongoClient.html#removeDocuments-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.core.Handler-">removeDocuments</a></code> 方法来删除文档。</p>
</div>
<div class="paragraph">
<p>其中 <code>query</code> 参数决定了要删除集合中的哪些文档。</p>
</div>
<div class="paragraph">
<p>例如删除作者为 Tolkien 的所有文档：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="hljs-type">JsonObject</span> <span class="hljs-variable">query</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonObject</span>()
  .put(<span class="hljs-string">&quot;author&quot;</span>, <span class="hljs-string">&quot;J. R. R. Tolkien&quot;</span>);
mongoClient.removeDocuments(<span class="hljs-string">&quot;books&quot;</span>, query, res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    System.out.println(<span class="hljs-string">&quot;Never much liked Tolkien stuff!&quot;</span>);
  } <span class="hljs-keyword">else</span> {
    res.cause().printStackTrace();
  }
});</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_removing_a_single_documents"><a class="anchor" href="#_removing_a_single_documents"></a>删除单个文档</h3>
<div class="paragraph">
<p>您可以使用 <code><a href="../../apidocs/io/vertx/ext/mongo/MongoClient.html#removeDocument-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.core.Handler-">removeDocument</a></code> 方法来删除文档。</p>
</div>
<div class="paragraph">
<p>这有点类似于 <code><a href="../../apidocs/io/vertx/ext/mongo/MongoClient.html#removeDocuments-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.core.Handler-">removeDocuments</a></code> 方法，只是 <code>removeDocument</code> 方法仅删除匹配到的第一个文档。</p>
</div>
</div>
<div class="sect2">
<h3 id="_counting_documents"><a class="anchor" href="#_counting_documents"></a>文档计数</h3>
<div class="paragraph">
<p>您可以使用 <code><a href="../../apidocs/io/vertx/ext/mongo/MongoClient.html#count-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.core.Handler-">count</a></code> 方法去计算文档数量。</p>
</div>
<div class="paragraph">
<p>例如计算 作者为 Tolkien 的书的数量，结果包装在回调方法中。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="hljs-type">JsonObject</span> <span class="hljs-variable">query</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonObject</span>()
  .put(<span class="hljs-string">&quot;author&quot;</span>, <span class="hljs-string">&quot;J. R. R. Tolkien&quot;</span>);
mongoClient.count(<span class="hljs-string">&quot;books&quot;</span>, query, res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    <span class="hljs-type">long</span> <span class="hljs-variable">num</span> <span class="hljs-operator">=</span> res.result();
  } <span class="hljs-keyword">else</span> {
    res.cause().printStackTrace();
  }
});</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_managing_mongodb_collections"><a class="anchor" href="#_managing_mongodb_collections"></a>管理 MongoDB 集合</h3>
<div class="paragraph">
<p>MongoDB 的所有文档数据都存储在集合中。</p>
</div>
<div class="paragraph">
<p>您可以用 <code><a href="../../apidocs/io/vertx/ext/mongo/MongoClient.html#getCollections-io.vertx.core.Handler-">getCollections</a></code> 来获取所有集合的列表</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">mongoClient.getCollections(res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    List&lt;String&gt; collections = res.result();
  } <span class="hljs-keyword">else</span> {
    res.cause().printStackTrace();
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>您可以使用 <code><a href="../../apidocs/io/vertx/ext/mongo/MongoClient.html#createCollection-java.lang.String-io.vertx.core.Handler-">createCollection</a></code> 方法来创建一个新的集合。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">mongoClient.createCollection(<span class="hljs-string">&quot;mynewcollectionr&quot;</span>, res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    <span class="hljs-comment">// Created ok!</span>
  } <span class="hljs-keyword">else</span> {
    res.cause().printStackTrace();
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>您可以使用 <code><a href="../../apidocs/io/vertx/ext/mongo/MongoClient.html#dropCollection-java.lang.String-io.vertx.core.Handler-">dropCollection</a></code> 方法来删除一个集合。</p>
</div>
<div class="paragraph">
<p>请注意：删除一个集合将会删除集合中所有的文档！</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">mongoClient.dropCollection(<span class="hljs-string">&quot;mynewcollectionr&quot;</span>, res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    <span class="hljs-comment">// Dropped ok!</span>
  } <span class="hljs-keyword">else</span> {
    res.cause().printStackTrace();
  }
});</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_running_other_mongodb_commands"><a class="anchor" href="#_running_other_mongodb_commands"></a>执行 <code>MongoDB</code> 的其他命令</h3>
<div class="paragraph">
<p>您可以通过 <code><a href="../../apidocs/io/vertx/ext/mongo/MongoClient.html#runCommand-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.core.Handler-">runCommand</a></code> 方法执行任何 `MongoDB`命令。</p>
</div>
<div class="paragraph">
<p>使用这种方式，可以发挥出MongoDB更多优点，比如使用MapReduce。
更多详情，请参考说明文档 <a href="http://docs.mongodb.org/manual/reference/command">Commands</a>。</p>
</div>
<div class="paragraph">
<p>例如执行 aggregate（译者注：聚合）命令。请注意，命令的名称要做为 runCommand 方法的一个参数，
并且同时也必须包含在包装命令的 JSON 参数中。这么做是因为 JSON 不是有序的，但 BSON 却是，
而且 MongoDB 期望 BSON 参数的第一个键值对是命令的名称。所以，为了明确 JSON 中的哪个键值对是命令名称，
我们也就必须把命令名称单独设置为一个参数：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="hljs-type">JsonObject</span> <span class="hljs-variable">command</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonObject</span>()
  .put(<span class="hljs-string">&quot;aggregate&quot;</span>, <span class="hljs-string">&quot;collection_name&quot;</span>)
  .put(<span class="hljs-string">&quot;pipeline&quot;</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonArray</span>());
mongoClient.runCommand(<span class="hljs-string">&quot;aggregate&quot;</span>, command, res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    <span class="hljs-type">JsonArray</span> <span class="hljs-variable">resArr</span> <span class="hljs-operator">=</span> res.result().getJsonArray(<span class="hljs-string">&quot;result&quot;</span>);
    <span class="hljs-comment">// etc</span>
  } <span class="hljs-keyword">else</span> {
    res.cause().printStackTrace();
  }
});</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_mongodb_extended_json_support"><a class="anchor" href="#_mongodb_extended_json_support"></a>MongoDB的JSON扩展支持</h3>
<div class="paragraph">
<p>目前，MongoDB 只支持 <code>date</code> ， <code>oid</code> 和 <code>binary</code> 类型
（请参考：http://docs.mongodb.org/manual/reference/mongodb-extended-json[MongoDB Extended JSON] ）</p>
</div>
<div class="paragraph">
<p>例如插入含有 <code>date</code> 类型字段的文档：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="hljs-type">JsonObject</span> <span class="hljs-variable">document</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonObject</span>()
  .put(<span class="hljs-string">&quot;title&quot;</span>, <span class="hljs-string">&quot;The Hobbit&quot;</span>)
  <span class="hljs-comment">//ISO-8601 date</span>
  .put(<span class="hljs-string">&quot;publicationDate&quot;</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonObject</span>().put(<span class="hljs-string">&quot;$date&quot;</span>, <span class="hljs-string">&quot;1937-09-21T00:00:00+00:00&quot;</span>));
mongoService.save(<span class="hljs-string">&quot;publishedBooks&quot;</span>, document).compose(id -&gt; {
  <span class="hljs-keyword">return</span> mongoService.findOne(<span class="hljs-string">&quot;publishedBooks&quot;</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonObject</span>().put(<span class="hljs-string">&quot;_id&quot;</span>, id), <span class="hljs-literal">null</span>);
}).onComplete(res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    System.out.println(<span class="hljs-string">&quot;To retrieve ISO-8601 date : &quot;</span>
      + res.result().getJsonObject(<span class="hljs-string">&quot;publicationDate&quot;</span>).getString(<span class="hljs-string">&quot;$date&quot;</span>));
  } <span class="hljs-keyword">else</span> {
    res.cause().printStackTrace();
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>例如，插入一个包含二进制的字段的文档并且读取这个字段：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="hljs-type">byte</span>[] binaryObject = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">40</span>];
<span class="hljs-type">JsonObject</span> <span class="hljs-variable">document</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonObject</span>()
  .put(<span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-string">&quot;Alan Turing&quot;</span>)
  .put(<span class="hljs-string">&quot;binaryStuff&quot;</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonObject</span>().put(<span class="hljs-string">&quot;$binary&quot;</span>, binaryObject));
mongoService.save(<span class="hljs-string">&quot;smartPeople&quot;</span>, document).compose(id -&gt; {
  <span class="hljs-keyword">return</span> mongoService.findOne(<span class="hljs-string">&quot;smartPeople&quot;</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonObject</span>().put(<span class="hljs-string">&quot;_id&quot;</span>, id), <span class="hljs-literal">null</span>);
}).onComplete(res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    <span class="hljs-type">byte</span>[] reconstitutedBinaryObject = res.result().getJsonObject(<span class="hljs-string">&quot;binaryStuff&quot;</span>).getBinary(<span class="hljs-string">&quot;$binary&quot;</span>);
    <span class="hljs-comment">//This could now be de-serialized into an object in real life</span>
  } <span class="hljs-keyword">else</span> {
    res.cause().printStackTrace();
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>例如保存一个 base 64 编码的字符串，将这个字符串作为 binary 字段插入。并且读取这个字段：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="hljs-type">String</span> <span class="hljs-variable">base64EncodedString</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;a2FpbHVhIGlzIHRoZSAjMSBiZWFjaCBpbiB0aGUgd29ybGQ=&quot;</span>;
<span class="hljs-type">JsonObject</span> <span class="hljs-variable">document</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonObject</span>()
  .put(<span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-string">&quot;Alan Turing&quot;</span>)
  .put(<span class="hljs-string">&quot;binaryStuff&quot;</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonObject</span>().put(<span class="hljs-string">&quot;$binary&quot;</span>, base64EncodedString));
mongoService.save(<span class="hljs-string">&quot;smartPeople&quot;</span>, document).compose(id -&gt; {
  <span class="hljs-keyword">return</span> mongoService.findOne(<span class="hljs-string">&quot;smartPeople&quot;</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonObject</span>().put(<span class="hljs-string">&quot;_id&quot;</span>, id), <span class="hljs-literal">null</span>);
}).onComplete(res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    <span class="hljs-type">String</span> <span class="hljs-variable">reconstitutedBase64EncodedString</span> <span class="hljs-operator">=</span> res.result().getJsonObject(<span class="hljs-string">&quot;binaryStuff&quot;</span>).getString(<span class="hljs-string">&quot;$binary&quot;</span>);
    <span class="hljs-comment">//This could now converted back to bytes from the base 64 string</span>
  } <span class="hljs-keyword">else</span> {
    res.cause().printStackTrace();
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>例如插入一个 object ID 并且读取它：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="hljs-type">String</span> <span class="hljs-variable">individualId</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectId</span>().toHexString();
<span class="hljs-type">JsonObject</span> <span class="hljs-variable">document</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonObject</span>()
  .put(<span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-string">&quot;Stephen Hawking&quot;</span>)
  .put(<span class="hljs-string">&quot;individualId&quot;</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonObject</span>().put(<span class="hljs-string">&quot;$oid&quot;</span>, individualId));
mongoService.save(<span class="hljs-string">&quot;smartPeople&quot;</span>, document).compose(id -&gt; {
  <span class="hljs-type">JsonObject</span> <span class="hljs-variable">query</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonObject</span>().put(<span class="hljs-string">&quot;_id&quot;</span>, id);
  <span class="hljs-keyword">return</span> mongoService.findOne(<span class="hljs-string">&quot;smartPeople&quot;</span>, query, <span class="hljs-literal">null</span>);
}).onComplete(res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    <span class="hljs-type">String</span> <span class="hljs-variable">reconstitutedIndividualId</span> <span class="hljs-operator">=</span> res.result().getJsonObject(<span class="hljs-string">&quot;individualId&quot;</span>).getString(<span class="hljs-string">&quot;$oid&quot;</span>);
  } <span class="hljs-keyword">else</span> {
    res.cause().printStackTrace();
  }
});</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_getting_distinct_values"><a class="anchor" href="#_getting_distinct_values"></a>获取 distinct 后的值</h3>
<div class="paragraph">
<p>例如：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="hljs-type">JsonObject</span> <span class="hljs-variable">document</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonObject</span>()
  .put(<span class="hljs-string">&quot;title&quot;</span>, <span class="hljs-string">&quot;The Hobbit&quot;</span>);
mongoClient.save(<span class="hljs-string">&quot;books&quot;</span>, document).compose(v -&gt; {
  <span class="hljs-keyword">return</span> mongoClient.distinct(<span class="hljs-string">&quot;books&quot;</span>, <span class="hljs-string">&quot;title&quot;</span>, String.class.getName());
}).onComplete(res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    System.out.println(<span class="hljs-string">&quot;Title is : &quot;</span> + res.result().getJsonArray(<span class="hljs-number">0</span>));
  } <span class="hljs-keyword">else</span> {
    res.cause().printStackTrace();
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>例如：在批量模式下， 获取 distinct 后的值：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="hljs-type">JsonObject</span> <span class="hljs-variable">document</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonObject</span>()
  .put(<span class="hljs-string">&quot;title&quot;</span>, <span class="hljs-string">&quot;The Hobbit&quot;</span>);
mongoClient.save(<span class="hljs-string">&quot;books&quot;</span>, document, res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    mongoClient.distinctBatch(<span class="hljs-string">&quot;books&quot;</span>, <span class="hljs-string">&quot;title&quot;</span>, String.class.getName())
      .handler(book -&gt; System.out.println(<span class="hljs-string">&quot;Title is : &quot;</span> + book.getString(<span class="hljs-string">&quot;title&quot;</span>)));
  } <span class="hljs-keyword">else</span> {
    res.cause().printStackTrace();
  }
});</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>例如查询 distinct 后的值</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="hljs-type">JsonObject</span> <span class="hljs-variable">document</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonObject</span>()
  .put(<span class="hljs-string">&quot;title&quot;</span>, <span class="hljs-string">&quot;The Hobbit&quot;</span>)
  .put(<span class="hljs-string">&quot;publicationDate&quot;</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonObject</span>().put(<span class="hljs-string">&quot;$date&quot;</span>, <span class="hljs-string">&quot;1937-09-21T00:00:00+00:00&quot;</span>));
<span class="hljs-type">JsonObject</span> <span class="hljs-variable">query</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonObject</span>()
  .put(<span class="hljs-string">&quot;publicationDate&quot;</span>,
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonObject</span>().put(<span class="hljs-string">&quot;$gte&quot;</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonObject</span>().put(<span class="hljs-string">&quot;$date&quot;</span>, <span class="hljs-string">&quot;1937-09-21T00:00:00+00:00&quot;</span>)));
mongoClient.save(<span class="hljs-string">&quot;books&quot;</span>, document).compose(v -&gt; {
  <span class="hljs-keyword">return</span> mongoClient.distinctWithQuery(<span class="hljs-string">&quot;books&quot;</span>, <span class="hljs-string">&quot;title&quot;</span>, String.class.getName(), query);
}).onComplete(res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    System.out.println(<span class="hljs-string">&quot;Title is : &quot;</span> + res.result().getJsonArray(<span class="hljs-number">0</span>));
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>例如：在批量查询模式下，获取 distinct 后的值。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="hljs-type">JsonObject</span> <span class="hljs-variable">document</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonObject</span>()
  .put(<span class="hljs-string">&quot;title&quot;</span>, <span class="hljs-string">&quot;The Hobbit&quot;</span>)
  .put(<span class="hljs-string">&quot;publicationDate&quot;</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonObject</span>().put(<span class="hljs-string">&quot;$date&quot;</span>, <span class="hljs-string">&quot;1937-09-21T00:00:00+00:00&quot;</span>));
<span class="hljs-type">JsonObject</span> <span class="hljs-variable">query</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonObject</span>()
  .put(<span class="hljs-string">&quot;publicationDate&quot;</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonObject</span>()
    .put(<span class="hljs-string">&quot;$gte&quot;</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonObject</span>().put(<span class="hljs-string">&quot;$date&quot;</span>, <span class="hljs-string">&quot;1937-09-21T00:00:00+00:00&quot;</span>)));
mongoClient.save(<span class="hljs-string">&quot;books&quot;</span>, document, res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    mongoClient.distinctBatchWithQuery(<span class="hljs-string">&quot;books&quot;</span>, <span class="hljs-string">&quot;title&quot;</span>, String.class.getName(), query)
      .handler(book -&gt; System.out.println(<span class="hljs-string">&quot;Title is : &quot;</span> + book.getString(<span class="hljs-string">&quot;title&quot;</span>)));
  }
});</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_storing_retrieving_files_and_binary_data"><a class="anchor" href="#_storing_retrieving_files_and_binary_data"></a>存储/检索文件和二进制数据</h2>
<div class="sectionbody">
<div class="paragraph">
<p>客户端可以使用 MongoDB 的 GridFS 模块来存储或检索文件和二进制数据。（译者注：GridFS是MongoDB的一个子模块，主要用于在MongoDB中存储文件，相当于MongoDB内置的一个分布式文件系统。）
<code><a href="../../apidocs/io/vertx/ext/mongo/MongoGridFsClient.html">MongoGridFsClient</a></code> 可以用来上传文件以及数据流到GridFS，
以及从GridFS下载文件和数据流。</p>
</div>
<div class="sect2">
<h3 id="_get_the_mongogridfsclient_to_interact_with_gridfs"><a class="anchor" href="#_get_the_mongogridfsclient_to_interact_with_gridfs"></a>获取一个可与GridFS交互的MongoGridFsClient。</h3>
<div class="paragraph">
<p>通过调用 <code><a href="../../apidocs/io/vertx/ext/mongo/MongoClient.html#createGridFsBucketService-java.lang.String-io.vertx.core.Handler-">createGridFsBucketService</a></code> 方法，
并且给方法提供一个 bucket 名称，可创建一个 <code><a href="../../apidocs/io/vertx/ext/mongo/MongoGridFsClient.html">MongoGridFsClient</a></code> 客户端。
在 GridFS 中，bucket 名称最终是一个集合，该集合包含对所有存储对象的引用。
您可以通过提供一个唯一的名称将对象隔离到不同的bucket中。</p>
</div>
<div class="paragraph">
<p>它具有以下字段：</p>
</div>
<div class="paragraph">
<p><code>bucketName</code> : 要创建的 bucket 的名称</p>
</div>
<div class="paragraph">
<p>例如：使用自定义的bucket名称，
获取 <code><a href="../../apidocs/io/vertx/ext/mongo/MongoGridFsClient.html">MongoGridFsClient</a></code> 。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">mongoClient.createGridFsBucketService(<span class="hljs-string">&quot;bakeke&quot;</span>, res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    <span class="hljs-comment">//Interact with the GridFS client...</span>
    <span class="hljs-type">MongoGridFsClient</span> <span class="hljs-variable">client</span> <span class="hljs-operator">=</span> res.result();
  } <span class="hljs-keyword">else</span> {
    res.cause().printStackTrace();
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>GridFS使用 "fs" 作为默认的 bucket 名称。如果您想要获取默认的bucket，而不是自定义一个，
那么请调用 <code><a href="../../apidocs/io/vertx/ext/mongo/MongoClient.html#createDefaultGridFsBucketService-io.vertx.core.Handler-">createDefaultGridFsBucketService</a></code> 方法。</p>
</div>
<div class="paragraph">
<p>例如：使用默认bucket名称，获取 <code><a href="../../apidocs/io/vertx/ext/mongo/MongoGridFsClient.html">MongoGridFsClient</a></code>。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">mongoClient.createDefaultGridFsBucketService( res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    <span class="hljs-comment">//Interact with the GridFS client...</span>
    <span class="hljs-type">MongoGridFsClient</span> <span class="hljs-variable">client</span> <span class="hljs-operator">=</span> res.result();
  } <span class="hljs-keyword">else</span> {
    res.cause().printStackTrace();
  }
});</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_drop_an_entire_file_bucket_from_gridfs"><a class="anchor" href="#_drop_an_entire_file_bucket_from_gridfs"></a>从GridFS中，删除整个文件bucket。</h3>
<div class="paragraph">
<p>整个文件bucket及其所有内容都可以使用 <code><a href="../../apidocs/io/vertx/ext/mongo/MongoGridFsClient.html#drop-io.vertx.core.Handler-">drop</a></code> 来进行删除。
该方法可以删除创建`MongoGridFsClient`时指定的bucket。</p>
</div>
<div class="paragraph">
<p>例如：删除一个文件bucket。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">gridFsClient.drop(res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    <span class="hljs-comment">//The file bucket is dropped and all files in it, erased</span>
  } <span class="hljs-keyword">else</span> {
    res.cause().printStackTrace();
  }
});</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_find_all_file_ids_in_a_gridfs_bucket"><a class="anchor" href="#_find_all_file_ids_in_a_gridfs_bucket"></a>在一个GridFS的bucket中，查询所有文件ID。</h3>
<div class="paragraph">
<p>调用 <code><a href="../../apidocs/io/vertx/ext/mongo/MongoGridFsClient.html#findAllIds-io.vertx.core.Handler-">findAllIds</a></code> 方法，可以查询到在bucket中的所有文件ID。
可以凭借文件ID,通过使用 <code><a href="../../apidocs/io/vertx/ext/mongo/MongoGridFsClient.html#downloadFileByID-java.lang.String-java.lang.String-io.vertx.core.Handler-">downloadFileByID</a></code> 方法，来下载文件。</p>
</div>
<div class="paragraph">
<p>例如：检索文件ID列表。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">gridFsClient.findAllIds(res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    List&lt;String&gt; ids = res.result(); <span class="hljs-comment">//List of file IDs</span>
  } <span class="hljs-keyword">else</span> {
    res.cause().printStackTrace();
  }
});</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_find_file_ids_in_a_gridfs_bucket_matching_a_query"><a class="anchor" href="#_find_file_ids_in_a_gridfs_bucket_matching_a_query"></a>在一个与查询匹配的GridFS bucket中，查询文件ID。</h3>
<div class="paragraph">
<p>可以指定查询以匹配GridFS <code>bucket</code> 中的文件。调用 <code><a href="../../apidocs/io/vertx/ext/mongo/MongoGridFsClient.html#findIds-io.vertx.core.json.JsonObject-io.vertx.core.Handler-">findIds</a></code> 方法
可以返回与查询匹配的文件ID列表。</p>
</div>
<div class="paragraph">
<p>它具有以下字段：</p>
</div>
<div class="paragraph">
<p><code>query</code> : 这是一个可以使用标准MongoDB查询运算符来匹配任何文件元数据的json对象。
该json对象为空，会匹配所有文档。您可以按照GridFS手册中所述内容，来查询GridFS文件集合的属性。
<a href="https://docs.mongodb.com/manual/core/gridfs/#the-files-collection" class="bare">https://docs.mongodb.com/manual/core/gridfs/#the-files-collection</a></p>
</div>
<div class="paragraph">
<p>您可以调用 <code><a href="../../apidocs/io/vertx/ext/mongo/MongoGridFsClient.html#downloadFileByID-java.lang.String-java.lang.String-io.vertx.core.Handler-">downloadFileByID</a></code> 方法，通过ID来下载文件。</p>
</div>
<div class="paragraph">
<p>例如：基于元数据查询来检索文件ID列表</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="hljs-type">JsonObject</span> <span class="hljs-variable">query</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonObject</span>().put(<span class="hljs-string">&quot;metadata.nick_name&quot;</span>, <span class="hljs-string">&quot;Puhi the eel&quot;</span>);
gridFsClient.findIds(query, res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    List&lt;String&gt; ids = res.result(); <span class="hljs-comment">//List of file IDs</span>
  } <span class="hljs-keyword">else</span> {
    res.cause().printStackTrace();
  }
});</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_delete_file_ids_in_gridfs_based_its_id"><a class="anchor" href="#_delete_file_ids_in_gridfs_based_its_id"></a>在GridFS中，根据文件的ID来删除文件。</h3>
<div class="paragraph">
<p>通过提供文件ID参数，来调用 <code><a href="../../apidocs/io/vertx/ext/mongo/MongoGridFsClient.html#delete-java.lang.String-io.vertx.core.Handler-">delete</a></code> 方法，可以删除以前存储在GridFS中的文件。
可以通过使用 <code><a href="../../apidocs/io/vertx/ext/mongo/MongoGridFsClient.html#findIds-io.vertx.core.json.JsonObject-io.vertx.core.Handler-">findIds</a></code> 方法，来检索文件ID。</p>
</div>
<div class="paragraph">
<p>它具有以下字段：
<code>id</code> : 当文件存储到GridFS时，ID会自动生成。</p>
</div>
<div class="paragraph">
<p>例如：通过ID删除文件。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="hljs-type">String</span> <span class="hljs-variable">id</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;56660b074cedfd000570839c&quot;</span>; <span class="hljs-comment">//The GridFS ID of the file</span>
gridFsClient.delete(id, (AsyncResult&lt;Void&gt; res) -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    <span class="hljs-comment">//File deleted</span>
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">//Something went wrong</span>
    res.cause().printStackTrace();
  }
});</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_upload_a_file_in_gridfs"><a class="anchor" href="#_upload_a_file_in_gridfs"></a>在GridFS中上传文件</h3>
<div class="paragraph">
<p>通过 <code><a href="../../apidocs/io/vertx/ext/mongo/MongoGridFsClient.html#uploadFile-java.lang.String-io.vertx.core.Handler-">uploadFile</a></code> 方法，文件可以使用文件名称进行存储。
当文件存储成功时，GridFS会返回自动生成的文件ID。这个ID可以被用来之后检索文件。</p>
</div>
<div class="paragraph">
<p>它具有以下字段：</p>
</div>
<div class="paragraph">
<p><code>fileName</code> :  这是被存储文件的名称。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">gridFsClient.uploadFile(<span class="hljs-string">&quot;file.name&quot;</span>, res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    <span class="hljs-type">String</span> <span class="hljs-variable">id</span> <span class="hljs-operator">=</span> res.result();
    <span class="hljs-comment">//The ID of the stored object in Grid FS</span>
  } <span class="hljs-keyword">else</span> {
    res.cause().printStackTrace();
  }
});</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_upload_a_file_in_gridfs_with_options"><a class="anchor" href="#_upload_a_file_in_gridfs_with_options"></a>上传文件时携带配置参数。</h3>
<div class="paragraph">
<p>使用 <code><a href="../../apidocs/io/vertx/ext/mongo/MongoGridFsClient.html#uploadFileWithOptions-java.lang.String-io.vertx.ext.mongo.GridFsUploadOptions-io.vertx.core.Handler-">uploadFileWithOptions</a></code> 方法，
并传入一个 `<a href="../../apidocs/io/vertx/ext/mongo/GridFsUploadOptions.html">GridFsUploadOptions</a>`的实例，文件可以在存储时，携带额外的配置参数。
当文件存储成功时，GridFS会返回文件ID。</p>
</div>
<div class="paragraph">
<p>它具有以下字段：</p>
</div>
<div class="paragraph">
<p><code>metadata</code> : 这是一个json对象，它包含了以后的搜索中可能有用的任何元数据
<code>chunkSizeBytes</code> : GridFS会将文件分解这个字段数值的数个数据块。（译者注：数据块类似于数据库的分区，数值太大和太小都会影响性能。具体详见官方文档: <a href="https://docs.mongodb.com/manual/core/sharding-data-partitioning/）" class="bare">https://docs.mongodb.com/manual/core/sharding-data-partitioning/）</a></p>
</div>
<div class="paragraph">
<p>例如： 通过文件名上传一个文件，并且携带元数据参数以及指定数据块的大小。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="hljs-type">JsonObject</span> <span class="hljs-variable">metadata</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonObject</span>();
metadata.put(<span class="hljs-string">&quot;nick_name&quot;</span>, <span class="hljs-string">&quot;Puhi the Eel&quot;</span>);

<span class="hljs-type">GridFsUploadOptions</span> <span class="hljs-variable">options</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">GridFsUploadOptions</span>();
options.setChunkSizeBytes(<span class="hljs-number">1024</span>);
options.setMetadata(metadata);

gridFsClient.uploadFileWithOptions(<span class="hljs-string">&quot;file.name&quot;</span>, options, res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    <span class="hljs-type">String</span> <span class="hljs-variable">id</span> <span class="hljs-operator">=</span> res.result();
    <span class="hljs-comment">//The ID of the stored object in Grid FS</span>
  } <span class="hljs-keyword">else</span> {
    res.cause().printStackTrace();
  }
});</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_download_a_file_previously_stored_in_gridfs"><a class="anchor" href="#_download_a_file_previously_stored_in_gridfs"></a>下载存储在GridFS中的文件</h3>
<div class="paragraph">
<p>通过调用 <code><a href="../../apidocs/io/vertx/ext/mongo/MongoGridFsClient.html#downloadFile-java.lang.String-io.vertx.core.Handler-">downloadFile</a></code> 方法，可以凭借文件的原始名称来下载文件。
下载完成后，将返回下载的文件长度，该数值是 <code>Long</code> 类型。</p>
</div>
<div class="paragraph">
<p>它具有以下字段：</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>fileName</code></dt>
<dd>
<p>文件在存储时使用的文件名称</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>例如：凭借文件名称下载存储在GridFS中的文件。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">gridFsClient.downloadFile(<span class="hljs-string">&quot;file.name&quot;</span>, res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    <span class="hljs-type">Long</span> <span class="hljs-variable">fileLength</span> <span class="hljs-operator">=</span> res.result();
    <span class="hljs-comment">//The length of the file stored in fileName</span>
  } <span class="hljs-keyword">else</span> {
    res.cause().printStackTrace();
  }
});</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_download_a_file_previously_stored_in_gridfs_given_its_id"><a class="anchor" href="#_download_a_file_previously_stored_in_gridfs_given_its_id"></a>使用文件ID来下载存储在GridFS中的文件</h3>
<div class="paragraph">
<p>通过调用 <code><a href="../../apidocs/io/vertx/ext/mongo/MongoGridFsClient.html#downloadFileByID-java.lang.String-java.lang.String-io.vertx.core.Handler-">downloadFileByID</a></code> 方法，可以凭借文件ID来下载文件。
下载完成后，将返回下载的文件长度，该数值是`Long`类型。</p>
</div>
<div class="paragraph">
<p>它具有以下字段：</p>
</div>
<div class="paragraph">
<p><code>id</code> : 文件在存储后生成的文件ID</p>
</div>
<div class="paragraph">
<p>例如：凭借文件ID下载存储在GridFS中的文件。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="hljs-type">String</span> <span class="hljs-variable">id</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;56660b074cedfd000570839c&quot;</span>;
<span class="hljs-type">String</span> <span class="hljs-variable">filename</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;puhi.fil&quot;</span>;
gridFsClient.downloadFileByID(id, filename, res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    <span class="hljs-type">Long</span> <span class="hljs-variable">fileLength</span> <span class="hljs-operator">=</span> res.result();
    <span class="hljs-comment">//The length of the file stored in fileName</span>
  } <span class="hljs-keyword">else</span> {
    res.cause().printStackTrace();
  }
});</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_download_a_file_from_gridfs_to_a_new_name"><a class="anchor" href="#_download_a_file_from_gridfs_to_a_new_name"></a>从GridFS下载文件，并且重新命名文件名称</h3>
<div class="paragraph">
<p>在解析文件的时候，可以使用文件的原始名称。而在下载文件时，
您可以通过调用 <code><a href="../../apidocs/io/vertx/ext/mongo/MongoGridFsClient.html#downloadFileAs-java.lang.String-java.lang.String-io.vertx.core.Handler-">downloadFileAs</a></code> 方法，来重命名文件。
下载完成后，将返回下载的文件长度，该数值是`Long`类型。</p>
</div>
<div class="paragraph">
<p>它具有以下字段：</p>
</div>
<div class="paragraph">
<p><code>fileName</code> : 文件之前存储的旧名称
<code>newFileName</code> : 文件将被保存的新名称</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">gridFsClient.downloadFileAs(<span class="hljs-string">&quot;file.name&quot;</span>, <span class="hljs-string">&quot;new_file.name&quot;</span>, res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    <span class="hljs-type">Long</span> <span class="hljs-variable">fileLength</span> <span class="hljs-operator">=</span> res.result();
    <span class="hljs-comment">//The length of the file stored in fileName</span>
  } <span class="hljs-keyword">else</span> {
    res.cause().printStackTrace();
  }
});</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_upload_a_stream_to_gridfs"><a class="anchor" href="#_upload_a_stream_to_gridfs"></a>将数据流上传到GridFS</h3>
<div class="paragraph">
<p>使用 <code><a href="../../apidocs/io/vertx/ext/mongo/MongoGridFsClient.html#uploadByFileName-io.vertx.core.streams.ReadStream-java.lang.String-io.vertx.core.Handler-">uploadByFileName</a></code> 方法，您可以将数据流上传到GridFS。
当数据流上传成功后，将返回GridFS生成的文件ID。</p>
</div>
<div class="paragraph">
<p>它具有以下字段：</p>
</div>
<div class="paragraph">
<p><code>stream</code> : 将要被上传的 <code><a href="../../apidocs/io/vertx/core/streams/ReadStream.html">ReadStream</a></code>
<code>fileName</code> : 将被存储的数据流的名称</p>
</div>
<div class="paragraph">
<p>例如： 上传文件数据流到GridFS。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">gridFsStreamClient.uploadByFileName(asyncFile, <span class="hljs-string">&quot;kanaloa&quot;</span>, stringAsyncResult -&gt; {
  <span class="hljs-type">String</span> <span class="hljs-variable">id</span> <span class="hljs-operator">=</span> stringAsyncResult.result();
});</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_upload_a_stream_to_gridfs_with_options"><a class="anchor" href="#_upload_a_stream_to_gridfs_with_options"></a>上传数据流时携带配置参数</h3>
<div class="paragraph">
<p>使用 <code><a href="../../apidocs/io/vertx/ext/mongo/MongoGridFsClient.html#uploadByFileNameWithOptions-io.vertx.core.streams.ReadStream-java.lang.String-io.vertx.ext.mongo.GridFsUploadOptions-io.vertx.core.Handler-">uploadByFileNameWithOptions</a></code> 方法，
并传入 <code><a href="../../apidocs/io/vertx/ext/mongo/GridFsUploadOptions.html">GridFsUploadOptions</a></code> 实例，您可以将数据流上传到GridFS。
当数据流上传成功后，将返回GridFS生成的文件ID。</p>
</div>
<div class="paragraph">
<p>它具有以下字段：</p>
</div>
<div class="paragraph">
<p><code>stream</code> : 将要被上传的 <code><a href="../../apidocs/io/vertx/core/streams/ReadStream.html">ReadStream</a></code>
<code>fileName</code> : 将被存储的数据流的名称
`options' : 上传时携带的配置参数</p>
</div>
<div class="paragraph">
<p><code><a href="../../apidocs/io/vertx/ext/mongo/GridFsUploadOptions.html">GridFsUploadOptions</a></code> 具有以下字段:</p>
</div>
<div class="paragraph">
<p><code>metadata</code> : 这是一个json对象，它包含了以后的搜索中可能有用的任何元数据
<code>chunkSizeBytes</code> : GridFS会将文件分解这个字段数值的数个数据块。（译者注：数据块类似于数据库的分区，数值太大和太小都会影响性能。具体详见mongodb官方文档: <a href="https://docs.mongodb.com/manual/core/sharding-data-partitioning/）" class="bare">https://docs.mongodb.com/manual/core/sharding-data-partitioning/）</a></p>
</div>
<div class="paragraph">
<p>例如： 携带配置参数将一个文件流上传到GridFS。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="hljs-type">GridFsUploadOptions</span> <span class="hljs-variable">options</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">GridFsUploadOptions</span>();
options.setChunkSizeBytes(<span class="hljs-number">2048</span>);
options.setMetadata(<span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonObject</span>().put(<span class="hljs-string">&quot;catagory&quot;</span>, <span class="hljs-string">&quot;Polynesian gods&quot;</span>));
gridFsStreamClient.uploadByFileNameWithOptions(asyncFile, <span class="hljs-string">&quot;kanaloa&quot;</span>, options, stringAsyncResult -&gt; {
  <span class="hljs-type">String</span> <span class="hljs-variable">id</span> <span class="hljs-operator">=</span> stringAsyncResult.result();
});</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_download_a_stream_from_gridfs_using_file_name"><a class="anchor" href="#_download_a_stream_from_gridfs_using_file_name"></a>使用文件名称从GridFS中下载数据流</h3>
<div class="paragraph">
<p>使用 <code><a href="../../apidocs/io/vertx/ext/mongo/MongoGridFsClient.html#downloadByFileName-io.vertx.core.streams.WriteStream-java.lang.String-io.vertx.core.Handler-">downloadByFileName</a></code> 方法，您可以使用文件名称从GridFS中下载数据流。
下载完成后，将返回下载的数据流长度，该数值是 <code>Long</code> 类型。</p>
</div>
<div class="paragraph">
<p>它具有以下字段：</p>
</div>
<div class="paragraph">
<p><code>stream</code> : 将要被下载的 <code><a href="../../apidocs/io/vertx/core/streams/WriteStream.html">WriteStream</a></code>
<code>fileName</code> : 将被下载的数据流的名称。</p>
</div>
<div class="paragraph">
<p>例如： 下载文件流。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">gridFsStreamClient.downloadByFileName(asyncFile, <span class="hljs-string">&quot;kamapuaa.fil&quot;</span>, longAsyncResult -&gt; {
  <span class="hljs-type">Long</span> <span class="hljs-variable">length</span> <span class="hljs-operator">=</span> longAsyncResult.result();
});</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_download_a_stream_with_options_from_gridfs_using_file_name"><a class="anchor" href="#_download_a_stream_with_options_from_gridfs_using_file_name"></a>使用文件名称并携带配置参数，从GridFS中下载数据流</h3>
<div class="paragraph">
<p>使用 <code><a href="../../apidocs/io/vertx/ext/mongo/MongoGridFsClient.html#downloadByFileNameWithOptions-io.vertx.core.streams.WriteStream-java.lang.String-io.vertx.ext.mongo.GridFsDownloadOptions-io.vertx.core.Handler-">downloadByFileNameWithOptions</a></code> 方法，
并传入 <code><a href="../../apidocs/io/vertx/ext/mongo/GridFsDownloadOptions.html">GridFsDownloadOptions</a></code> 实例，您可以使用文件名称并携带配置参数，从GridFS中下载数据流。
下载完成后，将返回下载的数据流长度，该数值是`Long`类型。</p>
</div>
<div class="paragraph">
<p>它具有以下字段：</p>
</div>
<div class="paragraph">
<p><code>stream</code> : 将被下载的`<a href="../../apidocs/io/vertx/core/streams/WriteStream.html">WriteStream</a>`
<code>fileName</code> : 将被下载的数据流名称
<code>options</code> : `<a href="../../apidocs/io/vertx/ext/mongo/GridFsDownloadOptions.html">GridFsDownloadOptions</a>`实例</p>
</div>
<div class="paragraph">
<p>DownloadOptions 具有以下字段:</p>
</div>
<div class="paragraph">
<p><code>revision</code> : 要下载文件的版本（译者注：版本字段仅显示文件更改的频率。值为0，代表未经过修改的原始存储的文件）</p>
</div>
<div class="paragraph">
<p>例如：携带配置参数下载文件流。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="hljs-type">GridFsDownloadOptions</span> <span class="hljs-variable">options</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">GridFsDownloadOptions</span>();
options.setRevision(<span class="hljs-number">0</span>);
gridFsStreamClient.downloadByFileNameWithOptions(asyncFile, <span class="hljs-string">&quot;kamapuaa.fil&quot;</span>, options, longAsyncResult -&gt; {
  <span class="hljs-type">Long</span> <span class="hljs-variable">length</span> <span class="hljs-operator">=</span> longAsyncResult.result();
});</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_download_a_stream_from_gridfs_using_id"><a class="anchor" href="#_download_a_stream_from_gridfs_using_id"></a>使用ID下载数据流</h3>
<div class="paragraph">
<p>通过调用 `<a href="../../apidocs/io/vertx/ext/mongo/MongoGridFsClient.html#downloadById-io.vertx.core.streams.WriteStream-java.lang.String-io.vertx.core.Handler-">downloadById</a>`方法，您可以使用GridFS生成的ID来下载数据流。
下载完成后，将返回下载的数据流长度，该数值是`Long`类型。</p>
</div>
<div class="paragraph">
<p>它具有以下字段：</p>
</div>
<div class="paragraph">
<p><code>stream</code> : 将要下载的 <code><a href="../../apidocs/io/vertx/core/streams/WriteStream.html">WriteStream</a></code>
<code>id</code> : GridFS生成的id</p>
</div>
<div class="paragraph">
<p>例如：使用对象的ID下载文件流</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="hljs-type">String</span> <span class="hljs-variable">id</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;58f61bf84cedfd000661af06&quot;</span>;
gridFsStreamClient.downloadById(asyncFile, id, longAsyncResult -&gt; {
  <span class="hljs-type">Long</span> <span class="hljs-variable">length</span> <span class="hljs-operator">=</span> longAsyncResult.result();
});</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuring_the_client"><a class="anchor" href="#_configuring_the_client"></a>客户端参数配置</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Vert.x MongoDB 客户端把配置参数放在 JSON 对象中。</p>
</div>
<div class="paragraph">
<p>客户端支持以下这些参数：</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>db_name</code></dt>
<dd>
<p>mongoDB 实例的数据库名称。默认是 <code>default_db</code></p>
</dd>
<dt class="hdlist1"><code>useObjectId</code></dt>
<dd>
<p>此参数用来支持 ObjectId 的持久化和检索。如果设置为 true ，
将会在集合的文档中，以 16 进制的字符串来保存 MongoDB 的 ObjectId 类型的字段。而且在设置为 true 后，可以让文档基于创建时间排序（译者注：前4个字节用来存储创建的时的时间戳，精确到秒）。
您也可以通过使用 ObjectId::getDate() 方法，从这个 16进制的字符串中获取创建时间。若您选择其他类型作为 _id ，则设置此参数为 false 。
如果您保存的文档中，没有设置 _id 字段的值，将会默认的生成 16进制的字符串作为 _id 。
此参数默认为 false 。</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>此客户端尝试着支持驱动所支持的大多数参数配置。
有两种配置方式，一种是连接字符串，另一种是驱动配置选项。</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>connection_string</code></dt>
<dd>
<p>连接字符串，指的是创建客户端的字符串，例如： <code>mongodb://localhost:27017</code> 。
有关连接字符串格式的更多信息，请参考驱动程序文档。</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p><strong>驱动配置的具体选项</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">{
 <span class="hljs-comment">// Single Cluster Settings</span>
 <span class="hljs-string">&quot;host&quot;</span> : <span class="hljs-string">&quot;127.0.0.1&quot;</span>, <span class="hljs-comment">// string</span>
 <span class="hljs-string">&quot;port&quot;</span> : <span class="hljs-number">27017</span>,      <span class="hljs-comment">// int</span>

 <span class="hljs-comment">// Multiple Cluster Settings</span>
 <span class="hljs-string">&quot;hosts&quot;</span> : [
   {
     <span class="hljs-string">&quot;host&quot;</span> : <span class="hljs-string">&quot;cluster1&quot;</span>, <span class="hljs-comment">// string</span>
     <span class="hljs-string">&quot;port&quot;</span> : <span class="hljs-number">27000</span>       <span class="hljs-comment">// int</span>
   },
   {
     <span class="hljs-string">&quot;host&quot;</span> : <span class="hljs-string">&quot;cluster2&quot;</span>, <span class="hljs-comment">// string</span>
     <span class="hljs-string">&quot;port&quot;</span> : <span class="hljs-number">28000</span>       <span class="hljs-comment">// int</span>
   },
   ...
 ],
 <span class="hljs-string">&quot;replicaSet&quot;</span> :  <span class="hljs-string">&quot;foo&quot;</span>,    <span class="hljs-comment">// string</span>
 <span class="hljs-string">&quot;serverSelectionTimeoutMS&quot;</span> : <span class="hljs-number">30000</span>, <span class="hljs-comment">// long</span>

 <span class="hljs-comment">// Connection Pool Settings</span>
 <span class="hljs-string">&quot;maxPoolSize&quot;</span> : <span class="hljs-number">50</span>,                <span class="hljs-comment">// int</span>
 <span class="hljs-string">&quot;minPoolSize&quot;</span> : <span class="hljs-number">25</span>,                <span class="hljs-comment">// int</span>
 <span class="hljs-string">&quot;maxIdleTimeMS&quot;</span> : <span class="hljs-number">300000</span>,          <span class="hljs-comment">// long</span>
 <span class="hljs-string">&quot;maxLifeTimeMS&quot;</span> : <span class="hljs-number">3600000</span>,         <span class="hljs-comment">// long</span>
 <span class="hljs-string">&quot;waitQueueTimeoutMS&quot;</span> : <span class="hljs-number">10000</span>,      <span class="hljs-comment">// long</span>
 <span class="hljs-string">&quot;maintenanceFrequencyMS&quot;</span> : <span class="hljs-number">2000</span>,   <span class="hljs-comment">// long</span>
 <span class="hljs-string">&quot;maintenanceInitialDelayMS&quot;</span> : <span class="hljs-number">500</span>, <span class="hljs-comment">// long</span>

 <span class="hljs-comment">// Credentials / Auth</span>
 <span class="hljs-string">&quot;username&quot;</span>   : <span class="hljs-string">&quot;john&quot;</span>,     <span class="hljs-comment">// string</span>
 <span class="hljs-string">&quot;password&quot;</span>   : <span class="hljs-string">&quot;passw0rd&quot;</span>, <span class="hljs-comment">// string</span>
 <span class="hljs-string">&quot;authSource&quot;</span> : <span class="hljs-string">&quot;some.db&quot;</span>   <span class="hljs-comment">// string</span>
 <span class="hljs-comment">// Auth mechanism</span>
 <span class="hljs-string">&quot;authMechanism&quot;</span>     : <span class="hljs-string">&quot;GSSAPI&quot;</span>,        <span class="hljs-comment">// string</span>
 <span class="hljs-string">&quot;gssapiServiceName&quot;</span> : <span class="hljs-string">&quot;myservicename&quot;</span>, <span class="hljs-comment">// string</span>

 <span class="hljs-comment">// Socket Settings</span>
 <span class="hljs-string">&quot;connectTimeoutMS&quot;</span> : <span class="hljs-number">300000</span>, <span class="hljs-comment">// int</span>
 <span class="hljs-string">&quot;socketTimeoutMS&quot;</span>  : <span class="hljs-number">100000</span>, <span class="hljs-comment">// int</span>
 <span class="hljs-string">&quot;sendBufferSize&quot;</span>    : <span class="hljs-number">8192</span>,  <span class="hljs-comment">// int</span>
 <span class="hljs-string">&quot;receiveBufferSize&quot;</span> : <span class="hljs-number">8192</span>,  <span class="hljs-comment">// int</span>

 <span class="hljs-comment">// Server Settings</span>
 <span class="hljs-string">&quot;heartbeatFrequencyMS&quot;</span>    : <span class="hljs-number">1000</span>, <span class="hljs-comment">// long</span>
 <span class="hljs-string">&quot;minHeartbeatFrequencyMS&quot;</span> :  <span class="hljs-number">500</span>, <span class="hljs-comment">// long</span>

 <span class="hljs-comment">// SSL Settings</span>
 <span class="hljs-string">&quot;ssl&quot;</span> : <span class="hljs-literal">false</span>,                       <span class="hljs-comment">// boolean</span>
 <span class="hljs-string">&quot;sslInvalidHostNameAllowed&quot;</span> : <span class="hljs-literal">false</span>, <span class="hljs-comment">// boolean</span>
 <span class="hljs-string">&quot;trustAll&quot;</span> : <span class="hljs-literal">false</span>,                  <span class="hljs-comment">// boolean</span>
 <span class="hljs-string">&quot;keyPath&quot;</span> : <span class="hljs-string">&quot;key.pem&quot;</span>,               <span class="hljs-comment">// string</span>
 <span class="hljs-string">&quot;certPath&quot;</span> : <span class="hljs-string">&quot;cert.pem&quot;</span>,             <span class="hljs-comment">// string</span>
 <span class="hljs-string">&quot;caPath&quot;</span> : <span class="hljs-string">&quot;ca.pem&quot;</span>                  <span class="hljs-comment">// string</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>驱动参数说明</strong></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>host</code></dt>
<dd>
<p>mongoDB 实例运行的地址。默认是 <code>127.0.0.1</code>。 如果设置了 <code>hosts</code> 参数，就会忽略 <code>host</code> 参数</p>
</dd>
<dt class="hdlist1"><code>port</code></dt>
<dd>
<p>mongoDB 实例监听的端口。默认是 <code>127.0.0.1</code>。 如果设置了 <code>hosts</code> 参数，就会忽略 <code>host</code> 参数</p>
</dd>
<dt class="hdlist1"><code>hosts</code></dt>
<dd>
<p>表示支持 MongoDB 集群（分片／复制）的一组地址和端口</p>
</dd>
<dt class="hdlist1"><code>host</code></dt>
<dd>
<p>集群中某个运行实例的地址</p>
</dd>
<dt class="hdlist1"><code>port</code></dt>
<dd>
<p>集群中某个运行实例监听的端口</p>
</dd>
<dt class="hdlist1"><code>replicaSet</code></dt>
<dd>
<p>某个 mongoDB 实例作为副本集的名称</p>
</dd>
<dt class="hdlist1"><code>serverSelectionTimeoutMS</code></dt>
<dd>
<p>驱动选择服务器的最大时间，单位毫秒</p>
</dd>
<dt class="hdlist1"><code>maxPoolSize</code></dt>
<dd>
<p>连接池最大连接数。默认为 <code>100</code></p>
</dd>
<dt class="hdlist1"><code>minPoolSize</code></dt>
<dd>
<p>连接池最小连接数。默认为 <code>0</code></p>
</dd>
<dt class="hdlist1"><code>maxIdleTimeMS</code></dt>
<dd>
<p>连接池的连接最大空闲时间。默认为 <code>0</code>，表示一直存在</p>
</dd>
<dt class="hdlist1"><code>maxLifeTimeMS</code></dt>
<dd>
<p>连接池的连接最大存活时间。默认为 <code>0</code>，表示永远存活</p>
</dd>
<dt class="hdlist1"><code>waitQueueTimeoutMS</code></dt>
<dd>
<p>线程等待作为连接的最长等待时间。默认为 <code>120000</code>（2分钟）</p>
</dd>
<dt class="hdlist1"><code>maintenanceFrequencyMS</code></dt>
<dd>
<p>维护任务进行循环检查连接的时间间隔（译者注：维护任务会定时检查连接的状态，直到连接池剩下最小连接数）。默认为 <code>0</code></p>
</dd>
<dt class="hdlist1"><code>maintenanceInitialDelayMS</code></dt>
<dd>
<p>连接池启动后，维护任务第一次启动的时间。默认为 <code>0</code></p>
</dd>
<dt class="hdlist1"><code>username</code></dt>
<dd>
<p>授权的用户名。默认为 <code>null</code>（意味着不需要授权）</p>
</dd>
<dt class="hdlist1"><code>password</code></dt>
<dd>
<p>授权的密码</p>
</dd>
<dt class="hdlist1"><code>authSource</code></dt>
<dd>
<p>与授权用户关联的数据库名称。默认值为 <code>db_name</code></p>
</dd>
<dt class="hdlist1"><code>authMechanism</code></dt>
<dd>
<p>所使用的授权认证机制。请参考 [Authentication](<a href="http://docs.mongodb.org/manual/core/authentication/" class="bare">http://docs.mongodb.org/manual/core/authentication/</a> 来获取更多信息。</p>
</dd>
<dt class="hdlist1"><code>gssapiServiceName</code></dt>
<dd>
<p>当使用`GSSAPI`的授权机制时，所使用的 Kerberos 服务名。</p>
</dd>
<dt class="hdlist1"><code>connectTimeoutMS</code></dt>
<dd>
<p>打开连接超时的时间，单位毫秒。默认为`10000`（10 秒）</p>
</dd>
<dt class="hdlist1"><code>socketTimeoutMS</code></dt>
<dd>
<p>在 socket 上接收或者发送超时的时间。默认为`0`，意味着永远不超时（译者注：这是客户端的超时时间。如果一个 insert 达到了 socketTimeoutMS， 将无法得知服务器是否已写入）。</p>
</dd>
<dt class="hdlist1"><code>sendBufferSize</code></dt>
<dd>
<p>设置 socket 发送缓冲区大小（SO_SNDBUF）。默认为`0`，这将使用操作系统默认大小。</p>
</dd>
<dt class="hdlist1"><code>receiveBufferSize</code></dt>
<dd>
<p>设置 socket 接收缓冲区大小（SO_RCVBUF）。默认为`0`，这将使用操作系统默认大小。</p>
</dd>
<dt class="hdlist1"><code>heartbeatFrequencyMS</code></dt>
<dd>
<p>集群监视器访问每个集群服务器的频率。默认为`5000`（5s）</p>
</dd>
<dt class="hdlist1"><code>minHeartbeatFrequencyMS</code></dt>
<dd>
<p>最小心跳频率。默认为`1000`（1s）</p>
</dd>
<dt class="hdlist1"><code>ssl</code></dt>
<dd>
<p>在mongo客户端 和 mongo之间，启用ssl</p>
</dd>
<dt class="hdlist1"><code>sslInvalidHostNameAllowed</code></dt>
<dd>
<p>接受服务器证书中未包含的主机名（译者注：当你启用ssl时，这个配置用来设置是否关闭域名检查。true 为允许，即关闭域名检查）。</p>
</dd>
<dt class="hdlist1"><code>trustAll</code></dt>
<dd>
<p>当启用ssl时，信任所有证书。<strong>警告</strong> - 开启这个配置将会让您面临一些潜在的安全问题，例如MITM攻击。</p>
</dd>
<dt class="hdlist1"><code>keyPath</code></dt>
<dd>
<p>设置客户端私钥的路径。客户端私钥是用于在与mongo建立SSL连接时，对服务器进行身份验证。</p>
</dd>
<dt class="hdlist1"><code>certPath</code></dt>
<dd>
<p>设置客户端证书的路径。客户端证书是用来在与mongo建立SSL连接时，对服务器进行身份验证。</p>
</dd>
<dt class="hdlist1"><code>caPath</code></dt>
<dd>
<p>设置CA证书的路径。CA证书是用于在与mongo建立SSL连接时，当做一个信任源。</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>请注意：上面提到的各类参数的默认值，都是 MongoDB Java 驱动的默认值。
请参考驱动文档来获取最新信息。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_rxjava_3_api"><a class="anchor" href="#_rxjava_3_api"></a>RxJava 3 API</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Mongo客户端提供了RX化的原始版本API。</p>
</div>
<div class="sect2">
<h3 id="_creating_an_rxified_client"><a class="anchor" href="#_creating_an_rxified_client"></a>创建一个RX化的客户端</h3>
<div class="paragraph">
<p>要想创建一个RX化的Mongo客户端，需要您确保导入了 <code><a href="../../apidocs/io/vertx/rxjava3/ext/mongo/MongoClient.html">MongoClient</a></code> 类。
创建并获取一个客户端实例的方法有很多，例如下面：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="hljs-type">MongoClient</span> <span class="hljs-variable">client</span> <span class="hljs-operator">=</span> MongoClient.createShared(vertx, config);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_finding_documents_in_batches"><a class="anchor" href="#_finding_documents_in_batches"></a>批量查询文档</h3>
<div class="paragraph">
<p><code><a href="../../apidocs/io/vertx/rxjava3/core/streams/ReadStream.html">ReadStream</a></code> 可以被转换成 <code><a href="../../apidocs/io/reactivex/rxjava3/core/Flowable.html">Flowable</a></code> 。这个功能会方便您处理大型数据集。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java"><span class="hljs-type">JsonObject</span> <span class="hljs-variable">query</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonObject</span>()
  .put(<span class="hljs-string">&quot;author&quot;</span>, <span class="hljs-string">&quot;J. R. R. Tolkien&quot;</span>);

ReadStream&lt;JsonObject&gt; books = mongoClient.findBatch(<span class="hljs-string">&quot;book&quot;</span>, query);

<span class="hljs-comment">// Convert the stream to a Flowable</span>
Flowable&lt;JsonObject&gt; flowable = books.toFlowable();

flowable.subscribe(doc -&gt; {
  System.out.println(<span class="hljs-string">&quot;Found doc: &quot;</span> + doc.encodePrettily());
}, throwable -&gt; {
  throwable.printStackTrace();
}, () -&gt; {
  System.out.println(<span class="hljs-string">&quot;End of research&quot;</span>);
});</code></pre>
</div>
</div>
</div>
</div>
</div></div></div></div></div></div><footer class="jsx-aeedcf66895f49d7"><div class="jsx-aeedcf66895f49d7 container"><div class="jsx-aeedcf66895f49d7 footer-nav-section"><div class="jsx-aeedcf66895f49d7 footer-nav-list footer-logo"><a class="jsx-aeedcf66895f49d7" href="/"><img src="data:image/svg+xml,%3csvg version=&#x27;1.1&#x27; id=&#x27;Layer_1&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27; x=&#x27;0&#x27; y=&#x27;0&#x27; viewBox=&#x27;0 0 1232.6 315.2&#x27; style=&#x27;enable-background:new 0 0 1232.6 315.2&#x27; xml:space=&#x27;preserve&#x27;%3e%3cstyle%3e.st0%7bfill:%23782a91%7d%3c/style%3e%3cpath d=&#x27;M120.9 214.2 190.5 0h52.3l-98.5 273.8H98.2L0 0h52.1l68.8 214.2zm291.2-62.6H299.6v84.2H431v38H252V0h177.7v38.4H299.6V114h112.5v37.6zm83.7-113.2H546c16.5.3 29 4.4 37.3 12.4 8.3 8 12.5 19.4 12.5 34 0 14-4.5 25.1-13.5 33.2-9 8.1-21.6 12.1-37.6 12.1h-27.1v24.2l86.1 119.5h51v-2.4l-77.2-106.7c24.9-5.5 43.3-21.7 52.6-35.9 8.2-12.6 13.3-27.7 13.3-46 0-26.8-8.6-47.4-25.8-61.5C600.5 7.1 576.1 0 544.5 0h-96.3v273.8h47.6&#x27;/%3e%3cpath class=&#x27;st0&#x27; d=&#x27;m1052.3 157.7-41.5 62.7 29.7 53.4h85.1z&#x27;/%3e%3ccircle class=&#x27;st0&#x27; cx=&#x27;827.9&#x27; cy=&#x27;274.7&#x27; r=&#x27;40.5&#x27;/%3e%3cpath class=&#x27;st0&#x27; d=&#x27;m1037 0-47.6 74.2L949 0h-84l85.3 135.8-67.1 105.7c5.7 9.5 9.1 20.5 9.2 32.4h50.1L1121.3 0H1037z&#x27;/%3e%3cpath d=&#x27;M763.5 273.8c.1-9.9 2.5-19.2 6.6-27.5V38.4h85.4V0H638.2v38.4h84.6v235.4h40.7zm414-266.9h-15.3v42.2h-8.5V6.9h-15.2V0h39v6.9zM1193 0l14.2 37.7L1221.3 0h11v49.1h-8.5V32.9l.8-21.7-14.5 37.9h-6.1l-14.5-37.8.8 21.6v16.2h-8.5V0h11.2z&#x27;/%3e%3c/svg%3e" alt="Vert.x Logo" class="jsx-aeedcf66895f49d7"/></a></div><div class="jsx-aeedcf66895f49d7 footer-nav-list"><h5 class="jsx-aeedcf66895f49d7">Eclipse Vert.x</h5><ul class="jsx-aeedcf66895f49d7 "><li class="jsx-aeedcf66895f49d7"><a class="jsx-aeedcf66895f49d7 navbar-menu-item" href="/docs/">文档</a></li><li class="jsx-aeedcf66895f49d7"><a class="jsx-aeedcf66895f49d7" href="/download/">下载</a></li><li class="jsx-aeedcf66895f49d7"><a class="jsx-aeedcf66895f49d7" href="/blog/">博客</a></li><li class="jsx-aeedcf66895f49d7"><a class="jsx-aeedcf66895f49d7" href="/community/">社区</a></li><li class="jsx-aeedcf66895f49d7"><a class="jsx-aeedcf66895f49d7" href="/translation/">翻译团队</a></li><li class="jsx-aeedcf66895f49d7"><a href="https://github.com/eclipse-vertx/vert.x" class="jsx-aeedcf66895f49d7">GitHub</a></li><li class="jsx-aeedcf66895f49d7"><a href="https://github.com/vertx-china/vertx-web-site" class="jsx-aeedcf66895f49d7">翻译GitHub</a></li></ul></div><div class="jsx-aeedcf66895f49d7 footer-nav-list"><h5 class="jsx-aeedcf66895f49d7">资源</h5><ul class="jsx-aeedcf66895f49d7 "><li class="jsx-aeedcf66895f49d7"><a class="jsx-aeedcf66895f49d7" href="/faq/">答疑</a></li><li class="jsx-aeedcf66895f49d7"><a class="jsx-aeedcf66895f49d7" href="/channels/">联系渠道</a></li><li class="jsx-aeedcf66895f49d7"><a href="https://how-to.vertx.io/" class="jsx-aeedcf66895f49d7">操作指南</a></li><li class="jsx-aeedcf66895f49d7"><a href="https://start.vertx.io/" class="jsx-aeedcf66895f49d7">应用生成器</a></li><li class="jsx-aeedcf66895f49d7"><a href="/.well-known/security.txt" class="jsx-aeedcf66895f49d7">security.txt</a></li></ul></div><div class="jsx-aeedcf66895f49d7 footer-nav-list"><h5 class="jsx-aeedcf66895f49d7">Eclipse</h5><ul class="jsx-aeedcf66895f49d7 "><li class="jsx-aeedcf66895f49d7"><a href="https://www.eclipse.org/" class="jsx-aeedcf66895f49d7">Eclipse 基金会</a></li><li class="jsx-aeedcf66895f49d7"><a href="https://www.eclipse.org/legal/privacy.php" class="jsx-aeedcf66895f49d7">隐私政策</a></li><li class="jsx-aeedcf66895f49d7"><a href="https://www.eclipse.org/legal/termsofuse.php" class="jsx-aeedcf66895f49d7">使用条款</a></li><li class="jsx-aeedcf66895f49d7"><a href="https://www.eclipse.org/legal/copyright.php" class="jsx-aeedcf66895f49d7">版权代理</a></li><li class="jsx-aeedcf66895f49d7"><a href="https://www.eclipse.org/legal/" class="jsx-aeedcf66895f49d7">法律资源</a></li></ul></div></div><div class="jsx-aeedcf66895f49d7 footer-copyright"><div class="jsx-aeedcf66895f49d7 footer-copyright-remarks">© <!-- -->2022<!-- --> Eclipse Vert.x™<br class="jsx-aeedcf66895f49d7"/>Eclipse Vert.x™ 是开源的，并在<a href="https://creativecommons.org/licenses/by-sa/3.0/" target="_blank" rel="noopener noreferrer" class="jsx-aeedcf66895f49d7">Eclipse Public License 2.0</a>和<a href="https://www.apache.org/licenses/LICENSE-2.0.html" target="_blank" rel="noopener noreferrer" class="jsx-aeedcf66895f49d7">Apache License 2.0</a>协议下获得了双重许可。<br class="jsx-aeedcf66895f49d7 footer-copyright-break"/>网站由 <a href="https://michelkraemer.com" target="_blank" rel="noopener noreferrer" class="jsx-aeedcf66895f49d7">Michel Krämer</a> 设计。</div><div class="jsx-aeedcf66895f49d7 footer-copyright-eclipse-logo"><a href="https://www.eclipse.org/" target="_blank" rel="noopener noreferrer" class="jsx-aeedcf66895f49d7"><img src="data:image/svg+xml,%3csvg version=&#x27;1.1&#x27; id=&#x27;Layer_1&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27; x=&#x27;0&#x27; y=&#x27;0&#x27; viewBox=&#x27;0 0 281.3 91.1&#x27; style=&#x27;enable-background:new 0 0 281.3 91.1&#x27; xml:space=&#x27;preserve&#x27;%3e%3cstyle%3e.st0%7bfill:%23f79422%7d.st1%7bfill:%233d3c3b%7d%3c/style%3e%3cg id=&#x27;Layer_1_1_&#x27;%3e%3cpath class=&#x27;st0&#x27; d=&#x27;M265.7 84 257 73h-2.7v17.7h3.3v-12l9.3 12h2.1V73h-3.3v11zm-32.4-8.3c4.2 0 5.8 3.3 5.8 6.3s-1.6 6-5.8 6-5.7-3.1-5.8-6 1.7-6.3 5.8-6.3zm0-3c-6.1 0-9.1 4.7-9.1 9.3 0 4.7 2.9 9.1 9.1 9.1s9-4.6 9.1-9.2-3-9.2-9.1-9.2zm-21.2 18V73h-3.3v17.7h3.3zm-23.6 0h3.3V76h5.6v-3h-14.6v3h5.6l.1 14.7zm-18.9-6.5H163l3.3-7.6 3.3 7.6zm2.8 6.5h3.6L168.2 73h-3.6l-8 17.7h3.6l1.5-3.3h9.3l1.4 3.3zm-38-14.6h3.6c3.9 0 5.5 2.8 5.5 5.5.1 2.8-1.5 5.8-5.5 5.8h-3.6V76.1zm3.7-3.1h-6.9v17.7h6.9c6.2 0 8.9-4.5 8.9-9s-2.8-8.7-8.9-8.7zm-22.4 11L107 73h-2.7v17.7h3.3v-12l9.3 12h2.1V73h-3.3v11zM88.2 73v10.2c0 3-1.6 4.9-4.3 4.9s-4.6-1.7-4.6-4.9V73H76v10.1c0 5.3 3.6 7.9 7.9 7.9 4.4 0 7.7-2.7 7.7-7.9V73h-3.4zm-33 2.7c4.2 0 5.8 3.3 5.8 6.3s-1.6 6-5.8 6-5.7-3.1-5.8-6 1.7-6.3 5.8-6.3zm0-3c-6.1 0-9.1 4.7-9.1 9.3s2.9 9.1 9.1 9.1 9-4.6 9.1-9.2-3-9.2-9.1-9.2zm-29.7 18v-6.5h8.9v-3.1h-8.9v-4.8h9.4V73H22.2v17.6h3.3z&#x27;/%3e%3cpath class=&#x27;st1&#x27; d=&#x27;M269.4 54.4h-22.2v-8.9h21.4v-6.9h-21.4v-9.1h22.2v-7.2h-29.6v39.5h29.6v-7.4zm-40-25.6c-3-6.1-9.4-7.8-15.5-7.8-7.3 0-15.3 3.4-15.3 11.5 0 8.9 7.4 11 15.5 12 5.2.6 9.1 2.1 9.1 5.8 0 4.3-4.4 5.9-9.1 5.9s-9.4-1.9-11.1-6.3l-6.2 3.2c2.9 7.2 9.1 9.7 17.2 9.7 8.8 0 16.6-3.8 16.6-12.6 0-9.4-7.7-11.6-15.9-12.6-4.7-.6-8.8-1.5-8.8-5 0-2.9 2.6-5.2 8.2-5.2 4.3 0 8 2.2 9.4 4.4l5.9-3zM176 22.2c-6.2-.1-12.4 0-18.6 0v39.5h7.4V50.1H176c19.4 0 19.4-27.9 0-27.9zm-11.1 7.1H176c9.5 0 9.5 14 0 14h-11.2l.1-14zm-18 32.5V22.2h-7.4v39.5l7.4.1zm-44-39.6v39.5h27.7v-6.9h-20.3V22.2h-7.4zM90.7 51.7c-2.7 2.5-6.2 4-9.9 4-9.8 0-13.5-6.8-13.6-13.4s4.1-13.7 13.6-13.7c3.5-.1 7 1.3 9.5 3.7l5-4.8c-3.8-3.9-9.1-6-14.5-6-14.3 0-21 10.5-20.9 20.8s6.3 20.3 20.9 20.3c5.6.1 11-2 15-5.9l-5.1-5zm-39 2.7H29.5v-8.9h21.4v-6.9H29.5v-9.1h22.2v-7.2H22.2v39.5h29.6l-.1-7.4z&#x27;/%3e%3cpath class=&#x27;st0&#x27; d=&#x27;M9.8 18.2C18.8 4.1 36.9-.8 52.1 6l-1-.7C35.7-4.6 15.2-.1 5.3 15.3s-5.4 35.9 10 45.8l1.1.6C3.8 50.8.8 32.3 9.8 18.2z&#x27;/%3e%3cpath class=&#x27;st1&#x27; d=&#x27;M272.2 26.1c0-2.5 2.1-4.6 4.6-4.6 2.5 0 4.6 2.1 4.6 4.6 0 2.5-2.1 4.6-4.6 4.6-2.6 0-4.6-2.1-4.6-4.6zm8.6 0c0-2.2-1.8-4.1-4-4.1s-4.1 1.8-4.1 4.1c0 2.2 1.7 4 3.9 4.1h.1c2.3 0 4.1-1.8 4.1-4.1zm-6-2.5h2.3c1.1 0 1.9.5 1.9 1.6 0 .7-.4 1.3-1.1 1.5l1.2 1.7h-1.4l-1-1.5h-.7v1.5h-1.1l-.1-4.8zm2.2 2.3c.5 0 .8-.3.8-.7s-.3-.7-.8-.7h-1v1.3l1 .1z&#x27;/%3e%3c/g%3e%3c/svg%3e" alt="Eclipse foundation Logo" class="jsx-aeedcf66895f49d7"/></a></div></div></div></footer></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"slug":"4.2.6/vertx-mongo-client/java","title":"Vert.x MongoDB 客户端","fallbackGitHubStars":null,"toc":"\u003cdiv id=\"toc\" class=\"toc\"\u003e\n\u003cdiv id=\"toctitle\"\u003eTable of Contents\u003c/div\u003e\n\u003cul class=\"sectlevel1\"\u003e\n\u003cli\u003e\u003ca href=\"#_using_vert_x_mongodb_client\"\u003e使用 Vert.x MongoDB Client\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_creating_a_client\"\u003e创建客户端\u003c/a\u003e\n\u003cul class=\"sectlevel2\"\u003e\n\u003cli\u003e\u003ca href=\"#_using_the_default_shared_pool\"\u003e使用默认的共享连接池\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_specifying_a_pool_source_name\"\u003e指定 连接池方式数据源的名称\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_creating_a_client_with_a_non_shared_data_pool\"\u003e创建非共享数据源的客户端对象\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_using_the_api\"\u003e使用客户端 API\u003c/a\u003e\n\u003cul class=\"sectlevel2\"\u003e\n\u003cli\u003e\u003ca href=\"#_saving_documents\"\u003e保存文档\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_inserting_documents\"\u003e插入文档\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_updating_documents\"\u003e更新文档\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_replacing_documents\"\u003e替换文档\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_bulk_operations\"\u003e批量操作\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_finding_documents\"\u003e查找文档\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_finding_documents_in_batches\"\u003e批量查询文档\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_finding_a_single_document\"\u003e查询单个文档\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_removing_documents\"\u003e删除文档\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_removing_a_single_documents\"\u003e删除单个文档\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_counting_documents\"\u003e文档计数\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_managing_mongodb_collections\"\u003e管理 MongoDB 集合\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_running_other_mongodb_commands\"\u003e执行 \u003ccode\u003eMongoDB\u003c/code\u003e 的其他命令\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_mongodb_extended_json_support\"\u003eMongoDB的JSON扩展支持\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_getting_distinct_values\"\u003e获取 distinct 后的值\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_storing_retrieving_files_and_binary_data\"\u003e存储/检索文件和二进制数据\u003c/a\u003e\n\u003cul class=\"sectlevel2\"\u003e\n\u003cli\u003e\u003ca href=\"#_get_the_mongogridfsclient_to_interact_with_gridfs\"\u003e获取一个可与GridFS交互的MongoGridFsClient。\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_drop_an_entire_file_bucket_from_gridfs\"\u003e从GridFS中，删除整个文件bucket。\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_find_all_file_ids_in_a_gridfs_bucket\"\u003e在一个GridFS的bucket中，查询所有文件ID。\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_find_file_ids_in_a_gridfs_bucket_matching_a_query\"\u003e在一个与查询匹配的GridFS bucket中，查询文件ID。\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_delete_file_ids_in_gridfs_based_its_id\"\u003e在GridFS中，根据文件的ID来删除文件。\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_upload_a_file_in_gridfs\"\u003e在GridFS中上传文件\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_upload_a_file_in_gridfs_with_options\"\u003e上传文件时携带配置参数。\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_download_a_file_previously_stored_in_gridfs\"\u003e下载存储在GridFS中的文件\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_download_a_file_previously_stored_in_gridfs_given_its_id\"\u003e使用文件ID来下载存储在GridFS中的文件\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_download_a_file_from_gridfs_to_a_new_name\"\u003e从GridFS下载文件，并且重新命名文件名称\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_upload_a_stream_to_gridfs\"\u003e将数据流上传到GridFS\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_upload_a_stream_to_gridfs_with_options\"\u003e上传数据流时携带配置参数\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_download_a_stream_from_gridfs_using_file_name\"\u003e使用文件名称从GridFS中下载数据流\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_download_a_stream_with_options_from_gridfs_using_file_name\"\u003e使用文件名称并携带配置参数，从GridFS中下载数据流\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_download_a_stream_from_gridfs_using_id\"\u003e使用ID下载数据流\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_configuring_the_client\"\u003e客户端参数配置\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_rxjava_3_api\"\u003eRxJava 3 API\u003c/a\u003e\n\u003cul class=\"sectlevel2\"\u003e\n\u003cli\u003e\u003ca href=\"#_creating_an_rxified_client\"\u003e创建一个RX化的客户端\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_finding_documents_in_batches\"\u003e批量查询文档\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e","contents":"\u003ch1\u003eVert.x MongoDB 客户端\u003c/h1\u003e\n\n\u003cdiv id=\"preamble\"\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您的 Vert.x 应用可使用 Vert.x MongoDB Client（以下简称客户端）与 MongoDB 互动，\n包括保存，获取，搜索和删除文档。MongoDB 是在 Vert.x 应用进行数据持久化时的最佳选择，\n因为 MongoDB 天生就是处理 JSON（BSON）格式的文档数据库。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e\u003cstrong\u003e特点\u003c/strong\u003e\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e完全非阻塞\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e支持自定义编解码器，从而实现 Vert.x JSON 快速序列化和反序列化\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e支持 MongoDB Java 驱动大部分配置项\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e本客户端基于\n\u003ca href=\"https://mongodb.github.io/mongo-java-driver/4.1/driver-reactive/getting-started/quick-start/\"\u003eMongoDB ReactiveStreams Driver\u003c/a\u003e 。\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_using_vert_x_mongodb_client\"\u003e\u003ca class=\"anchor\" href=\"#_using_vert_x_mongodb_client\"\u003e\u003c/a\u003e使用 Vert.x MongoDB Client\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e使用此客户端，需要添加下列依赖：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eMaven（在 \u003ccode\u003epom.xml\u003c/code\u003e 文件中）：\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-xml\" data-lang=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\n \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003eio.vertx\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003evertx-mongo-client\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e4.2.6\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eGradle（在 \u003ccode\u003ebuild.gradle\u003c/code\u003e 文件中）：\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-groovy\" data-lang=\"groovy\"\u003ecompile \u003cspan class=\"hljs-string\"\u003e\u0026#x27;io.vertx:vertx-mongo-client:4.2.6\u0026#x27;\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_creating_a_client\"\u003e\u003ca class=\"anchor\" href=\"#_creating_a_client\"\u003e\u003c/a\u003e创建客户端\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您可用以下几种方式创建客户端：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_using_the_default_shared_pool\"\u003e\u003ca class=\"anchor\" href=\"#_using_the_default_shared_pool\"\u003e\u003c/a\u003e使用默认的共享连接池\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e大部分情况下，您希望不同的客户端之间共享一个连接池。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e例如：我们通过部署多个verticle实例来扩展你的程序的时候，我们会希望每个verticle实例都共用同一个连接池，\n而不是多个verticle实例使用多个连接池。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e要想用最简单的方法去使用共享连接池，我们可以这么做：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003e\u003cspan class=\"hljs-type\"\u003eMongoClient\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003eclient\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e MongoClient.createShared(vertx, config);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e只有第一次调用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoClient.html#createShared-io.vertx.core.Vertx-io.vertx.core.json.JsonObject-\"\u003eMongoClient.createShared\u003c/a\u003e\u003c/code\u003e\n才会真正的根据您指定的 config 配置创建连接池。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e之后再调用此方法，只会返回一个新的客户端对象，但使用的是相同的数据源。因此这时 config 参数不再有作用。\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_specifying_a_pool_source_name\"\u003e\u003ca class=\"anchor\" href=\"#_specifying_a_pool_source_name\"\u003e\u003c/a\u003e指定 连接池方式数据源的名称\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您还可以像下面这样，在创建一个客户端的时候指定连接池方式数据源的名称：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003e\u003cspan class=\"hljs-type\"\u003eMongoClient\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003eclient\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e MongoClient.createShared(vertx, config, \u003cspan class=\"hljs-string\"\u003e\u0026quot;MyPoolName\u0026quot;\u003c/span\u003e);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e如果您使用相同Vert.x实例创建了不同客户端，同时指定了相同的连接池名称，\n那么这些客户端将共享这个相同的连接池数据源。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e同样的（与使用默认的共享数据源相同），只有第一次调用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoClient.html#createShared-io.vertx.core.Vertx-io.vertx.core.json.JsonObject-\"\u003eMongoClient.createShared\u003c/a\u003e\u003c/code\u003e\n才会真正的根据 您指定的config创建一个连接池。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e之后再调用此方法，只会返回一个新的客户端对象，但使用的是相同的数据源。因此这时config参数不再有作用。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e当您希望不同groups的客户端，使用不同的连接池时，可以使用这种方式。\n举个使用场景的例子，比如这些客户端需要与不同数据源进行交互的时候，可以使用这种方式。\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_creating_a_client_with_a_non_shared_data_pool\"\u003e\u003ca class=\"anchor\" href=\"#_creating_a_client_with_a_non_shared_data_pool\"\u003e\u003c/a\u003e创建非共享数据源的客户端对象\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e在大部分情况下，您希望在不同客户端实例间共享一个连接池。\n但是，在有些情况下，您可能想要使用一个不与其它客户端共享连接的连接池，以创建一个客户端实例。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e此时您可使用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoClient.html#create-io.vertx.core.Vertx-io.vertx.core.json.JsonObject-\"\u003eMongoClient.create\u003c/a\u003e\u003c/code\u003e。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003e\u003cspan class=\"hljs-type\"\u003eMongoClient\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003eclient\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e MongoClient.create(vertx, config);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e每次调用此方法，就相当于在调用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoClient.html#createShared-io.vertx.core.Vertx-io.vertx.core.json.JsonObject-java.lang.String-\"\u003eMongoClient.createShared\u003c/a\u003e\u003c/code\u003e\n方法时，加上了具有唯一名称的数据源参数。\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_using_the_api\"\u003e\u003ca class=\"anchor\" href=\"#_using_the_api\"\u003e\u003c/a\u003e使用客户端 API\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoClient.html\"\u003eMongoClient\u003c/a\u003e\u003c/code\u003e 接口定义了操作客户端的API 方法。您可以使用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoClient.html\"\u003eMongoClient\u003c/a\u003e\u003c/code\u003e 来使用调用 API 方法。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_saving_documents\"\u003e\u003ca class=\"anchor\" href=\"#_saving_documents\"\u003e\u003c/a\u003e保存文档\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您可以使用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoClient.html#save-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.core.Handler-\"\u003esave\u003c/a\u003e\u003c/code\u003e 方法以保存文档。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e如果文档中没有 \u003ccode\u003e\\_id\u003c/code\u003e 字段，文档会被保存。若有，将执行 upserted。\nUpserted 意思是，如果此文档不存在，就保存此文档，此文档存在就更新。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e如果被保存的文档没有 \u003ccode\u003e\\_id\u003c/code\u003e 字段，回调方法中可以获得保存后生成的 id。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e例如：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003e\u003cspan class=\"hljs-type\"\u003eJsonObject\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003edocument\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eJsonObject\u003c/span\u003e()\n  .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;title\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;The Hobbit\u0026quot;\u003c/span\u003e);\nmongoClient.save(\u003cspan class=\"hljs-string\"\u003e\u0026quot;books\u0026quot;\u003c/span\u003e, document, res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    \u003cspan class=\"hljs-type\"\u003eString\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003eid\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e res.result();\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Saved book with id \u0026quot;\u003c/span\u003e + id);\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    res.cause().printStackTrace();\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e下面的例子，文档已有 \u003ccode\u003e\\_id\u003c/code\u003e：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003e\u003cspan class=\"hljs-type\"\u003eJsonObject\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003edocument\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eJsonObject\u003c/span\u003e()\n  .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;title\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;The Hobbit\u0026quot;\u003c/span\u003e)\n  .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;_id\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;123244\u0026quot;\u003c/span\u003e);\nmongoClient.save(\u003cspan class=\"hljs-string\"\u003e\u0026quot;books\u0026quot;\u003c/span\u003e, document, res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    \u003cspan class=\"hljs-comment\"\u003e// ...\u003c/span\u003e\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    res.cause().printStackTrace();\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_inserting_documents\"\u003e\u003ca class=\"anchor\" href=\"#_inserting_documents\"\u003e\u003c/a\u003e插入文档\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您可以使用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoClient.html#insert-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.core.Handler-\"\u003einsert\u003c/a\u003e\u003c/code\u003e 方法来插入文档。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e如果被插入的文档没有包含 id，回调方法中可以获得保存后生成的 id。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003e\u003cspan class=\"hljs-type\"\u003eJsonObject\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003edocument\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eJsonObject\u003c/span\u003e()\n  .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;title\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;The Hobbit\u0026quot;\u003c/span\u003e);\nmongoClient.insert(\u003cspan class=\"hljs-string\"\u003e\u0026quot;books\u0026quot;\u003c/span\u003e, document, res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    \u003cspan class=\"hljs-type\"\u003eString\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003eid\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e res.result();\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Inserted book with id \u0026quot;\u003c/span\u003e + id);\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    res.cause().printStackTrace();\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e如果被插入的文档包含 id，但是此 id 代表的文档已经存在，插入就会失败：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003e\u003cspan class=\"hljs-type\"\u003eJsonObject\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003edocument\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eJsonObject\u003c/span\u003e()\n  .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;title\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;The Hobbit\u0026quot;\u003c/span\u003e)\n  .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;_id\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;123244\u0026quot;\u003c/span\u003e);\nmongoClient.insert(\u003cspan class=\"hljs-string\"\u003e\u0026quot;books\u0026quot;\u003c/span\u003e, document, res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    \u003cspan class=\"hljs-comment\"\u003e//...\u003c/span\u003e\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    \u003cspan class=\"hljs-comment\"\u003e// Will fail if the book with that id already exists.\u003c/span\u003e\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_updating_documents\"\u003e\u003ca class=\"anchor\" href=\"#_updating_documents\"\u003e\u003c/a\u003e更新文档\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您可以使用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoClient.html#updateCollection-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.core.json.JsonObject-io.vertx.core.Handler-\"\u003eupdateCollection\u003c/a\u003e\u003c/code\u003e 方法来更新文档。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e此方法可以更新集合（译者注：MongoDB 中的集合概念对应 SQL 中的数据库表）中的一个或多个文档。\n在 \u003ccode\u003eupdateCollection\u003c/code\u003e 方法中被当成参数传递的JSON对象，\n必须包含 \u003ca href=\"http://docs.mongodb.org/manual/reference/operator/update-field/\"\u003eUpdate Operators\u003c/a\u003e，\n因为由它决定更新的方式。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e其中作为 \u003ccode\u003equery\u003c/code\u003e 参数的 json对象决定更新集合中的哪个文档。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e例如更新 books 集合中的一个文档：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003e\u003cspan class=\"hljs-type\"\u003eJsonObject\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003equery\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eJsonObject\u003c/span\u003e()\n  .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;title\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;The Hobbit\u0026quot;\u003c/span\u003e);\n\u003cspan class=\"hljs-comment\"\u003e// Set the author field\u003c/span\u003e\n\u003cspan class=\"hljs-type\"\u003eJsonObject\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003eupdate\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eJsonObject\u003c/span\u003e().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;$set\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eJsonObject\u003c/span\u003e()\n  .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;author\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;J. R. R. Tolkien\u0026quot;\u003c/span\u003e));\nmongoClient.updateCollection(\u003cspan class=\"hljs-string\"\u003e\u0026quot;books\u0026quot;\u003c/span\u003e, query, update, res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Book updated !\u0026quot;\u003c/span\u003e);\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    res.cause().printStackTrace();\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e如果您希望更新操作是 upsert（upsert 意思是，如果此文档不存在，就保存此文档；此文档存在就更新）或者 是更新多个文档，\n那么就使用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoClient.html#updateCollectionWithOptions-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.core.json.JsonObject-io.vertx.ext.mongo.UpdateOptions-io.vertx.core.Handler-\"\u003eupdateCollectionWithOptions\u003c/a\u003e\u003c/code\u003e\n方法，传递一个 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/UpdateOptions.html\"\u003eUpdateOptions\u003c/a\u003e\u003c/code\u003e 的实例，去定制化您的更新操作。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e参数 \u003ccode\u003eUpdateOptions\u003c/code\u003e 有以下选项：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"dlist\"\u003e\n\u003cdl\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003emulti\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003e若设置为 true，则可以更新多个文档\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003eupsert\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003e若设置为 true，则可以在没有查询到要更新的文档时，新增该文档\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003ewriteConcern\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003e写操作的可靠性（译者注：源码中是用 writeOption 枚举类型来代表的）\u003c/p\u003e\n\u003c/dd\u003e\n\u003c/dl\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003e  \u003cspan class=\"hljs-comment\"\u003e//译者注：MongoDB 默认写操作级别是 WriteOption.ACKNOWLEDGED\u003c/span\u003e\n\u003cspan class=\"hljs-type\"\u003eJsonObject\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003equery\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eJsonObject\u003c/span\u003e().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;title\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;The Hobbit\u0026quot;\u003c/span\u003e);\n  \u003cspan class=\"hljs-comment\"\u003e// Set the author field\u003c/span\u003e\n\u003cspan class=\"hljs-type\"\u003eJsonObject\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003eupdate\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eJsonObject\u003c/span\u003e().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;$set\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eJsonObject\u003c/span\u003e()\n  .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;author\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;J. R. R. Tolkien\u0026quot;\u003c/span\u003e));\n\u003cspan class=\"hljs-type\"\u003eUpdateOptions\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003eoptions\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eUpdateOptions\u003c/span\u003e().setMulti(\u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e);\nmongoClient.updateCollectionWithOptions(\u003cspan class=\"hljs-string\"\u003e\u0026quot;books\u0026quot;\u003c/span\u003e, query, update, options, res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Book updated !\u0026quot;\u003c/span\u003e);\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    res.cause().printStackTrace();\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_replacing_documents\"\u003e\u003ca class=\"anchor\" href=\"#_replacing_documents\"\u003e\u003c/a\u003e替换文档\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您可以使用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoClient.html#replaceDocuments-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.core.json.JsonObject-io.vertx.core.Handler-\"\u003ereplaceDocuments\u003c/a\u003e\u003c/code\u003e 方法来替换文档。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e替换操作和更新操作相似，但替换不需要任何操作符。\n因为它是用您提供的文档去替换整个文档。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e例如替换 books 集合中的一个文档：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003e\u003cspan class=\"hljs-type\"\u003eJsonObject\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003equery\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eJsonObject\u003c/span\u003e()\n  .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;title\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;The Hobbit\u0026quot;\u003c/span\u003e);\n\u003cspan class=\"hljs-type\"\u003eJsonObject\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003ereplace\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eJsonObject\u003c/span\u003e()\n  .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;title\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;The Lord of the Rings\u0026quot;\u003c/span\u003e)\n  .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;author\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;J. R. R. Tolkien\u0026quot;\u003c/span\u003e);\nmongoClient.replaceDocuments(\u003cspan class=\"hljs-string\"\u003e\u0026quot;books\u0026quot;\u003c/span\u003e, query, replace, res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Book replaced !\u0026quot;\u003c/span\u003e);\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    res.cause().printStackTrace();\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_bulk_operations\"\u003e\u003ca class=\"anchor\" href=\"#_bulk_operations\"\u003e\u003c/a\u003e批量操作\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您可以使用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoClient.html#bulkWrite-java.lang.String-java.util.List-io.vertx.core.Handler-\"\u003ebulkWrite\u003c/a\u003e\u003c/code\u003e 来一次执行多个新增、更新、替换或者删除的操作。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e在 \u003ccode\u003ebulkWrite\u003c/code\u003e 方法中，您可以传递一系列 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/BulkOperation.html\"\u003eBulkOperations\u003c/a\u003e\u003c/code\u003e，而且每个 \u003ccode\u003eBulkOperations\u003c/code\u003e 运作方式和单个操作类似。\n您可以根据需要传递多个操作，即使这些操作都是同一类型的。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e如果您希望 批量操作可以按照顺序执行，那么可以使用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoClient.html#bulkWriteWithOptions-java.lang.String-java.util.List-io.vertx.ext.mongo.BulkWriteOptions-io.vertx.core.Handler-\"\u003ebulkWriteWithOptions\u003c/a\u003e\u003c/code\u003e\n将自定义的配置写入其中，然后传递一个 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/BulkWriteOptions.html\"\u003eBulkWriteOptions\u003c/a\u003e\u003c/code\u003e 的实例。\n更多关于有序批量写操作的描述，见\n\u003ca href=\"https://docs.mongodb.com/manual/reference/method/db.collection.bulkWrite/#execution-of-operations\"\u003eExecution of Operations\u003c/a\u003e\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_finding_documents\"\u003e\u003ca class=\"anchor\" href=\"#_finding_documents\"\u003e\u003c/a\u003e查找文档\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您可以使用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoClient.html#find-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.core.Handler-\"\u003efind\u003c/a\u003e\u003c/code\u003e 方法查找文档。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e其中 \u003ccode\u003equery\u003c/code\u003e 参数用来匹配集合中的文档。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e例如匹配所有文档：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003e\u003cspan class=\"hljs-type\"\u003eJsonObject\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003equery\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eJsonObject\u003c/span\u003e();\nmongoClient.find(\u003cspan class=\"hljs-string\"\u003e\u0026quot;books\u0026quot;\u003c/span\u003e, query, res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e (JsonObject json : res.result()) {\n      System.out.println(json.encodePrettily());\n    }\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    res.cause().printStackTrace();\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e又例如匹配 books 集合中某一个作者的所有文档：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003e\u003cspan class=\"hljs-type\"\u003eJsonObject\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003equery\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eJsonObject\u003c/span\u003e()\n  .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;author\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;J. R. R. Tolkien\u0026quot;\u003c/span\u003e);\nmongoClient.find(\u003cspan class=\"hljs-string\"\u003e\u0026quot;books\u0026quot;\u003c/span\u003e, query, res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e (JsonObject json : res.result()) {\n      System.out.println(json.encodePrettily());\n    }\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    res.cause().printStackTrace();\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e查询的结果包装成了 JSON 对象的 List 集合。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e如果您希望在查询中指定一些内容，比如指定返回的字段，或者指定返回多少条数据，可以使用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoClient.html#findWithOptions-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.ext.mongo.FindOptions-io.vertx.core.Handler-\"\u003efindWithOptions\u003c/a\u003e\u003c/code\u003e 方法，\n在参数 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/FindOptions.html\"\u003eFindOptions\u003c/a\u003e\u003c/code\u003e 中指定这些查询要求。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e\u003ccode\u003eFindOptions\u003c/code\u003e 中可以设置以下参数：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"dlist\"\u003e\n\u003cdl\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003efields\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003e返回的字段。默认为 \u003ccode\u003enull\u003c/code\u003e，意味着查询结果会返回所有字段。\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003esort\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003e指定排序字段。默认为 null。\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003elimit\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003e指定返回的数据条数。默认值为 -1，意味着查询结果会返回所有数据。\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003eskip\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003e在返回查询结果之前，指定跳过的数据数量。默认值为 0 。\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003ehint\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003e要使用的索引。默认为空字符串。\u003c/p\u003e\n\u003c/dd\u003e\n\u003c/dl\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_finding_documents_in_batches\"\u003e\u003ca class=\"anchor\" href=\"#_finding_documents_in_batches\"\u003e\u003c/a\u003e批量查询文档\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e当我们在处理大量的数据集合的时候，不建议使用\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoClient.html#find-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.core.Handler-\"\u003efind\u003c/a\u003e\u003c/code\u003e 方法或者\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoClient.html#findWithOptions-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.ext.mongo.FindOptions-io.vertx.core.Handler-\"\u003efindWithOptions\u003c/a\u003e\u003c/code\u003e 方法。\n为了避免响应结果数据量太大导致内存溢出，建议使用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoClient.html#findBatch-java.lang.String-io.vertx.core.json.JsonObject-\"\u003efindBatch\u003c/a\u003e\u003c/code\u003e :\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003e\u003cspan class=\"hljs-type\"\u003eJsonObject\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003equery\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eJsonObject\u003c/span\u003e()\n  .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;author\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;J. R. R. Tolkien\u0026quot;\u003c/span\u003e);\nmongoClient.findBatch(\u003cspan class=\"hljs-string\"\u003e\u0026quot;book\u0026quot;\u003c/span\u003e, query)\n  .exceptionHandler(throwable -\u0026gt; throwable.printStackTrace())\n  .endHandler(v -\u0026gt; System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;End of research\u0026quot;\u003c/span\u003e))\n  .handler(doc -\u0026gt; System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Found doc: \u0026quot;\u003c/span\u003e + doc.encodePrettily()));\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e被匹配到的文档会被 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/streams/ReadStream.html\"\u003eReadStream\u003c/a\u003e\u003c/code\u003e 处理器挨个返回。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e在 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/FindOptions.html\"\u003eFindOptions\u003c/a\u003e\u003c/code\u003e 中有一个额外的参数 \u003ccode\u003ebatchSize\u003c/code\u003e，您可以通过设置这个参数，来设置 \u003ccode\u003eReadStream\u003c/code\u003e 处理器一次加载的文档的数量。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003e\u003cspan class=\"hljs-type\"\u003eJsonObject\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003equery\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eJsonObject\u003c/span\u003e()\n  .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;author\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;J. R. R. Tolkien\u0026quot;\u003c/span\u003e);\n\u003cspan class=\"hljs-type\"\u003eFindOptions\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003eoptions\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eFindOptions\u003c/span\u003e().setBatchSize(\u003cspan class=\"hljs-number\"\u003e100\u003c/span\u003e);\nmongoClient.findBatchWithOptions(\u003cspan class=\"hljs-string\"\u003e\u0026quot;book\u0026quot;\u003c/span\u003e, query, options)\n  .exceptionHandler(throwable -\u0026gt; throwable.printStackTrace())\n  .endHandler(v -\u0026gt; System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;End of research\u0026quot;\u003c/span\u003e))\n  .handler(doc -\u0026gt; System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Found doc: \u0026quot;\u003c/span\u003e + doc.encodePrettily()));\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e默认情况下， \u003ccode\u003ebatchSize\u003c/code\u003e 的值是20。\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_finding_a_single_document\"\u003e\u003ca class=\"anchor\" href=\"#_finding_a_single_document\"\u003e\u003c/a\u003e查询单个文档\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e要查询单个文档，您可以使用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoClient.html#findOne-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.core.json.JsonObject-io.vertx.core.Handler-\"\u003efindOne\u003c/a\u003e\u003c/code\u003e 方法。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e这有点类似 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoClient.html#find-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.core.Handler-\"\u003efind\u003c/a\u003e\u003c/code\u003e 方法，但是仅仅返回 find 方法查询命中的第一条数据。\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_removing_documents\"\u003e\u003ca class=\"anchor\" href=\"#_removing_documents\"\u003e\u003c/a\u003e删除文档\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您可以使用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoClient.html#removeDocuments-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.core.Handler-\"\u003eremoveDocuments\u003c/a\u003e\u003c/code\u003e 方法来删除文档。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e其中 \u003ccode\u003equery\u003c/code\u003e 参数决定了要删除集合中的哪些文档。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e例如删除作者为 Tolkien 的所有文档：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003e\u003cspan class=\"hljs-type\"\u003eJsonObject\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003equery\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eJsonObject\u003c/span\u003e()\n  .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;author\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;J. R. R. Tolkien\u0026quot;\u003c/span\u003e);\nmongoClient.removeDocuments(\u003cspan class=\"hljs-string\"\u003e\u0026quot;books\u0026quot;\u003c/span\u003e, query, res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Never much liked Tolkien stuff!\u0026quot;\u003c/span\u003e);\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    res.cause().printStackTrace();\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_removing_a_single_documents\"\u003e\u003ca class=\"anchor\" href=\"#_removing_a_single_documents\"\u003e\u003c/a\u003e删除单个文档\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您可以使用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoClient.html#removeDocument-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.core.Handler-\"\u003eremoveDocument\u003c/a\u003e\u003c/code\u003e 方法来删除文档。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e这有点类似于 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoClient.html#removeDocuments-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.core.Handler-\"\u003eremoveDocuments\u003c/a\u003e\u003c/code\u003e 方法，只是 \u003ccode\u003eremoveDocument\u003c/code\u003e 方法仅删除匹配到的第一个文档。\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_counting_documents\"\u003e\u003ca class=\"anchor\" href=\"#_counting_documents\"\u003e\u003c/a\u003e文档计数\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您可以使用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoClient.html#count-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.core.Handler-\"\u003ecount\u003c/a\u003e\u003c/code\u003e 方法去计算文档数量。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e例如计算 作者为 Tolkien 的书的数量，结果包装在回调方法中。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003e\u003cspan class=\"hljs-type\"\u003eJsonObject\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003equery\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eJsonObject\u003c/span\u003e()\n  .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;author\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;J. R. R. Tolkien\u0026quot;\u003c/span\u003e);\nmongoClient.count(\u003cspan class=\"hljs-string\"\u003e\u0026quot;books\u0026quot;\u003c/span\u003e, query, res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    \u003cspan class=\"hljs-type\"\u003elong\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003enum\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e res.result();\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    res.cause().printStackTrace();\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_managing_mongodb_collections\"\u003e\u003ca class=\"anchor\" href=\"#_managing_mongodb_collections\"\u003e\u003c/a\u003e管理 MongoDB 集合\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eMongoDB 的所有文档数据都存储在集合中。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您可以用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoClient.html#getCollections-io.vertx.core.Handler-\"\u003egetCollections\u003c/a\u003e\u003c/code\u003e 来获取所有集合的列表\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003emongoClient.getCollections(res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    List\u0026lt;String\u0026gt; collections = res.result();\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    res.cause().printStackTrace();\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您可以使用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoClient.html#createCollection-java.lang.String-io.vertx.core.Handler-\"\u003ecreateCollection\u003c/a\u003e\u003c/code\u003e 方法来创建一个新的集合。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003emongoClient.createCollection(\u003cspan class=\"hljs-string\"\u003e\u0026quot;mynewcollectionr\u0026quot;\u003c/span\u003e, res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    \u003cspan class=\"hljs-comment\"\u003e// Created ok!\u003c/span\u003e\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    res.cause().printStackTrace();\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您可以使用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoClient.html#dropCollection-java.lang.String-io.vertx.core.Handler-\"\u003edropCollection\u003c/a\u003e\u003c/code\u003e 方法来删除一个集合。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e请注意：删除一个集合将会删除集合中所有的文档！\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003emongoClient.dropCollection(\u003cspan class=\"hljs-string\"\u003e\u0026quot;mynewcollectionr\u0026quot;\u003c/span\u003e, res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    \u003cspan class=\"hljs-comment\"\u003e// Dropped ok!\u003c/span\u003e\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    res.cause().printStackTrace();\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_running_other_mongodb_commands\"\u003e\u003ca class=\"anchor\" href=\"#_running_other_mongodb_commands\"\u003e\u003c/a\u003e执行 \u003ccode\u003eMongoDB\u003c/code\u003e 的其他命令\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您可以通过 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoClient.html#runCommand-java.lang.String-io.vertx.core.json.JsonObject-io.vertx.core.Handler-\"\u003erunCommand\u003c/a\u003e\u003c/code\u003e 方法执行任何 `MongoDB`命令。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e使用这种方式，可以发挥出MongoDB更多优点，比如使用MapReduce。\n更多详情，请参考说明文档 \u003ca href=\"http://docs.mongodb.org/manual/reference/command\"\u003eCommands\u003c/a\u003e。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e例如执行 aggregate（译者注：聚合）命令。请注意，命令的名称要做为 runCommand 方法的一个参数，\n并且同时也必须包含在包装命令的 JSON 参数中。这么做是因为 JSON 不是有序的，但 BSON 却是，\n而且 MongoDB 期望 BSON 参数的第一个键值对是命令的名称。所以，为了明确 JSON 中的哪个键值对是命令名称，\n我们也就必须把命令名称单独设置为一个参数：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003e\u003cspan class=\"hljs-type\"\u003eJsonObject\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003ecommand\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eJsonObject\u003c/span\u003e()\n  .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;aggregate\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;collection_name\u0026quot;\u003c/span\u003e)\n  .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;pipeline\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eJsonArray\u003c/span\u003e());\nmongoClient.runCommand(\u003cspan class=\"hljs-string\"\u003e\u0026quot;aggregate\u0026quot;\u003c/span\u003e, command, res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    \u003cspan class=\"hljs-type\"\u003eJsonArray\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003eresArr\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e res.result().getJsonArray(\u003cspan class=\"hljs-string\"\u003e\u0026quot;result\u0026quot;\u003c/span\u003e);\n    \u003cspan class=\"hljs-comment\"\u003e// etc\u003c/span\u003e\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    res.cause().printStackTrace();\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_mongodb_extended_json_support\"\u003e\u003ca class=\"anchor\" href=\"#_mongodb_extended_json_support\"\u003e\u003c/a\u003eMongoDB的JSON扩展支持\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e目前，MongoDB 只支持 \u003ccode\u003edate\u003c/code\u003e ， \u003ccode\u003eoid\u003c/code\u003e 和 \u003ccode\u003ebinary\u003c/code\u003e 类型\n（请参考：http://docs.mongodb.org/manual/reference/mongodb-extended-json[MongoDB Extended JSON] ）\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e例如插入含有 \u003ccode\u003edate\u003c/code\u003e 类型字段的文档：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003e\u003cspan class=\"hljs-type\"\u003eJsonObject\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003edocument\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eJsonObject\u003c/span\u003e()\n  .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;title\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;The Hobbit\u0026quot;\u003c/span\u003e)\n  \u003cspan class=\"hljs-comment\"\u003e//ISO-8601 date\u003c/span\u003e\n  .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;publicationDate\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eJsonObject\u003c/span\u003e().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;$date\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;1937-09-21T00:00:00+00:00\u0026quot;\u003c/span\u003e));\nmongoService.save(\u003cspan class=\"hljs-string\"\u003e\u0026quot;publishedBooks\u0026quot;\u003c/span\u003e, document).compose(id -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e mongoService.findOne(\u003cspan class=\"hljs-string\"\u003e\u0026quot;publishedBooks\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eJsonObject\u003c/span\u003e().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;_id\u0026quot;\u003c/span\u003e, id), \u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e);\n}).onComplete(res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;To retrieve ISO-8601 date : \u0026quot;\u003c/span\u003e\n      + res.result().getJsonObject(\u003cspan class=\"hljs-string\"\u003e\u0026quot;publicationDate\u0026quot;\u003c/span\u003e).getString(\u003cspan class=\"hljs-string\"\u003e\u0026quot;$date\u0026quot;\u003c/span\u003e));\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    res.cause().printStackTrace();\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e例如，插入一个包含二进制的字段的文档并且读取这个字段：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003e\u003cspan class=\"hljs-type\"\u003ebyte\u003c/span\u003e[] binaryObject = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003ebyte\u003c/span\u003e[\u003cspan class=\"hljs-number\"\u003e40\u003c/span\u003e];\n\u003cspan class=\"hljs-type\"\u003eJsonObject\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003edocument\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eJsonObject\u003c/span\u003e()\n  .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;name\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;Alan Turing\u0026quot;\u003c/span\u003e)\n  .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;binaryStuff\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eJsonObject\u003c/span\u003e().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;$binary\u0026quot;\u003c/span\u003e, binaryObject));\nmongoService.save(\u003cspan class=\"hljs-string\"\u003e\u0026quot;smartPeople\u0026quot;\u003c/span\u003e, document).compose(id -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e mongoService.findOne(\u003cspan class=\"hljs-string\"\u003e\u0026quot;smartPeople\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eJsonObject\u003c/span\u003e().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;_id\u0026quot;\u003c/span\u003e, id), \u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e);\n}).onComplete(res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    \u003cspan class=\"hljs-type\"\u003ebyte\u003c/span\u003e[] reconstitutedBinaryObject = res.result().getJsonObject(\u003cspan class=\"hljs-string\"\u003e\u0026quot;binaryStuff\u0026quot;\u003c/span\u003e).getBinary(\u003cspan class=\"hljs-string\"\u003e\u0026quot;$binary\u0026quot;\u003c/span\u003e);\n    \u003cspan class=\"hljs-comment\"\u003e//This could now be de-serialized into an object in real life\u003c/span\u003e\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    res.cause().printStackTrace();\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e例如保存一个 base 64 编码的字符串，将这个字符串作为 binary 字段插入。并且读取这个字段：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003e\u003cspan class=\"hljs-type\"\u003eString\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003ebase64EncodedString\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;a2FpbHVhIGlzIHRoZSAjMSBiZWFjaCBpbiB0aGUgd29ybGQ=\u0026quot;\u003c/span\u003e;\n\u003cspan class=\"hljs-type\"\u003eJsonObject\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003edocument\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eJsonObject\u003c/span\u003e()\n  .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;name\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;Alan Turing\u0026quot;\u003c/span\u003e)\n  .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;binaryStuff\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eJsonObject\u003c/span\u003e().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;$binary\u0026quot;\u003c/span\u003e, base64EncodedString));\nmongoService.save(\u003cspan class=\"hljs-string\"\u003e\u0026quot;smartPeople\u0026quot;\u003c/span\u003e, document).compose(id -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e mongoService.findOne(\u003cspan class=\"hljs-string\"\u003e\u0026quot;smartPeople\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eJsonObject\u003c/span\u003e().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;_id\u0026quot;\u003c/span\u003e, id), \u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e);\n}).onComplete(res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    \u003cspan class=\"hljs-type\"\u003eString\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003ereconstitutedBase64EncodedString\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e res.result().getJsonObject(\u003cspan class=\"hljs-string\"\u003e\u0026quot;binaryStuff\u0026quot;\u003c/span\u003e).getString(\u003cspan class=\"hljs-string\"\u003e\u0026quot;$binary\u0026quot;\u003c/span\u003e);\n    \u003cspan class=\"hljs-comment\"\u003e//This could now converted back to bytes from the base 64 string\u003c/span\u003e\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    res.cause().printStackTrace();\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e例如插入一个 object ID 并且读取它：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003e\u003cspan class=\"hljs-type\"\u003eString\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003eindividualId\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eObjectId\u003c/span\u003e().toHexString();\n\u003cspan class=\"hljs-type\"\u003eJsonObject\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003edocument\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eJsonObject\u003c/span\u003e()\n  .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;name\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;Stephen Hawking\u0026quot;\u003c/span\u003e)\n  .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;individualId\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eJsonObject\u003c/span\u003e().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;$oid\u0026quot;\u003c/span\u003e, individualId));\nmongoService.save(\u003cspan class=\"hljs-string\"\u003e\u0026quot;smartPeople\u0026quot;\u003c/span\u003e, document).compose(id -\u0026gt; {\n  \u003cspan class=\"hljs-type\"\u003eJsonObject\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003equery\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eJsonObject\u003c/span\u003e().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;_id\u0026quot;\u003c/span\u003e, id);\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e mongoService.findOne(\u003cspan class=\"hljs-string\"\u003e\u0026quot;smartPeople\u0026quot;\u003c/span\u003e, query, \u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e);\n}).onComplete(res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    \u003cspan class=\"hljs-type\"\u003eString\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003ereconstitutedIndividualId\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e res.result().getJsonObject(\u003cspan class=\"hljs-string\"\u003e\u0026quot;individualId\u0026quot;\u003c/span\u003e).getString(\u003cspan class=\"hljs-string\"\u003e\u0026quot;$oid\u0026quot;\u003c/span\u003e);\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    res.cause().printStackTrace();\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_getting_distinct_values\"\u003e\u003ca class=\"anchor\" href=\"#_getting_distinct_values\"\u003e\u003c/a\u003e获取 distinct 后的值\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e例如：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003e\u003cspan class=\"hljs-type\"\u003eJsonObject\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003edocument\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eJsonObject\u003c/span\u003e()\n  .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;title\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;The Hobbit\u0026quot;\u003c/span\u003e);\nmongoClient.save(\u003cspan class=\"hljs-string\"\u003e\u0026quot;books\u0026quot;\u003c/span\u003e, document).compose(v -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e mongoClient.distinct(\u003cspan class=\"hljs-string\"\u003e\u0026quot;books\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;title\u0026quot;\u003c/span\u003e, String.class.getName());\n}).onComplete(res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Title is : \u0026quot;\u003c/span\u003e + res.result().getJsonArray(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e));\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    res.cause().printStackTrace();\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e例如：在批量模式下， 获取 distinct 后的值：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003e\u003cspan class=\"hljs-type\"\u003eJsonObject\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003edocument\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eJsonObject\u003c/span\u003e()\n  .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;title\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;The Hobbit\u0026quot;\u003c/span\u003e);\nmongoClient.save(\u003cspan class=\"hljs-string\"\u003e\u0026quot;books\u0026quot;\u003c/span\u003e, document, res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    mongoClient.distinctBatch(\u003cspan class=\"hljs-string\"\u003e\u0026quot;books\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;title\u0026quot;\u003c/span\u003e, String.class.getName())\n      .handler(book -\u0026gt; System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Title is : \u0026quot;\u003c/span\u003e + book.getString(\u003cspan class=\"hljs-string\"\u003e\u0026quot;title\u0026quot;\u003c/span\u003e)));\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    res.cause().printStackTrace();\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e例如查询 distinct 后的值\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003e\u003cspan class=\"hljs-type\"\u003eJsonObject\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003edocument\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eJsonObject\u003c/span\u003e()\n  .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;title\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;The Hobbit\u0026quot;\u003c/span\u003e)\n  .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;publicationDate\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eJsonObject\u003c/span\u003e().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;$date\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;1937-09-21T00:00:00+00:00\u0026quot;\u003c/span\u003e));\n\u003cspan class=\"hljs-type\"\u003eJsonObject\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003equery\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eJsonObject\u003c/span\u003e()\n  .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;publicationDate\u0026quot;\u003c/span\u003e,\n    \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eJsonObject\u003c/span\u003e().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;$gte\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eJsonObject\u003c/span\u003e().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;$date\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;1937-09-21T00:00:00+00:00\u0026quot;\u003c/span\u003e)));\nmongoClient.save(\u003cspan class=\"hljs-string\"\u003e\u0026quot;books\u0026quot;\u003c/span\u003e, document).compose(v -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e mongoClient.distinctWithQuery(\u003cspan class=\"hljs-string\"\u003e\u0026quot;books\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;title\u0026quot;\u003c/span\u003e, String.class.getName(), query);\n}).onComplete(res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Title is : \u0026quot;\u003c/span\u003e + res.result().getJsonArray(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e));\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e例如：在批量查询模式下，获取 distinct 后的值。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003e\u003cspan class=\"hljs-type\"\u003eJsonObject\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003edocument\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eJsonObject\u003c/span\u003e()\n  .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;title\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;The Hobbit\u0026quot;\u003c/span\u003e)\n  .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;publicationDate\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eJsonObject\u003c/span\u003e().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;$date\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;1937-09-21T00:00:00+00:00\u0026quot;\u003c/span\u003e));\n\u003cspan class=\"hljs-type\"\u003eJsonObject\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003equery\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eJsonObject\u003c/span\u003e()\n  .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;publicationDate\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eJsonObject\u003c/span\u003e()\n    .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;$gte\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eJsonObject\u003c/span\u003e().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;$date\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;1937-09-21T00:00:00+00:00\u0026quot;\u003c/span\u003e)));\nmongoClient.save(\u003cspan class=\"hljs-string\"\u003e\u0026quot;books\u0026quot;\u003c/span\u003e, document, res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    mongoClient.distinctBatchWithQuery(\u003cspan class=\"hljs-string\"\u003e\u0026quot;books\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;title\u0026quot;\u003c/span\u003e, String.class.getName(), query)\n      .handler(book -\u0026gt; System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Title is : \u0026quot;\u003c/span\u003e + book.getString(\u003cspan class=\"hljs-string\"\u003e\u0026quot;title\u0026quot;\u003c/span\u003e)));\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_storing_retrieving_files_and_binary_data\"\u003e\u003ca class=\"anchor\" href=\"#_storing_retrieving_files_and_binary_data\"\u003e\u003c/a\u003e存储/检索文件和二进制数据\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e客户端可以使用 MongoDB 的 GridFS 模块来存储或检索文件和二进制数据。（译者注：GridFS是MongoDB的一个子模块，主要用于在MongoDB中存储文件，相当于MongoDB内置的一个分布式文件系统。）\n\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoGridFsClient.html\"\u003eMongoGridFsClient\u003c/a\u003e\u003c/code\u003e 可以用来上传文件以及数据流到GridFS，\n以及从GridFS下载文件和数据流。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_get_the_mongogridfsclient_to_interact_with_gridfs\"\u003e\u003ca class=\"anchor\" href=\"#_get_the_mongogridfsclient_to_interact_with_gridfs\"\u003e\u003c/a\u003e获取一个可与GridFS交互的MongoGridFsClient。\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e通过调用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoClient.html#createGridFsBucketService-java.lang.String-io.vertx.core.Handler-\"\u003ecreateGridFsBucketService\u003c/a\u003e\u003c/code\u003e 方法，\n并且给方法提供一个 bucket 名称，可创建一个 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoGridFsClient.html\"\u003eMongoGridFsClient\u003c/a\u003e\u003c/code\u003e 客户端。\n在 GridFS 中，bucket 名称最终是一个集合，该集合包含对所有存储对象的引用。\n您可以通过提供一个唯一的名称将对象隔离到不同的bucket中。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e它具有以下字段：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e\u003ccode\u003ebucketName\u003c/code\u003e : 要创建的 bucket 的名称\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e例如：使用自定义的bucket名称，\n获取 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoGridFsClient.html\"\u003eMongoGridFsClient\u003c/a\u003e\u003c/code\u003e 。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003emongoClient.createGridFsBucketService(\u003cspan class=\"hljs-string\"\u003e\u0026quot;bakeke\u0026quot;\u003c/span\u003e, res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    \u003cspan class=\"hljs-comment\"\u003e//Interact with the GridFS client...\u003c/span\u003e\n    \u003cspan class=\"hljs-type\"\u003eMongoGridFsClient\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003eclient\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e res.result();\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    res.cause().printStackTrace();\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eGridFS使用 \"fs\" 作为默认的 bucket 名称。如果您想要获取默认的bucket，而不是自定义一个，\n那么请调用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoClient.html#createDefaultGridFsBucketService-io.vertx.core.Handler-\"\u003ecreateDefaultGridFsBucketService\u003c/a\u003e\u003c/code\u003e 方法。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e例如：使用默认bucket名称，获取 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoGridFsClient.html\"\u003eMongoGridFsClient\u003c/a\u003e\u003c/code\u003e。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003emongoClient.createDefaultGridFsBucketService( res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    \u003cspan class=\"hljs-comment\"\u003e//Interact with the GridFS client...\u003c/span\u003e\n    \u003cspan class=\"hljs-type\"\u003eMongoGridFsClient\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003eclient\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e res.result();\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    res.cause().printStackTrace();\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_drop_an_entire_file_bucket_from_gridfs\"\u003e\u003ca class=\"anchor\" href=\"#_drop_an_entire_file_bucket_from_gridfs\"\u003e\u003c/a\u003e从GridFS中，删除整个文件bucket。\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e整个文件bucket及其所有内容都可以使用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoGridFsClient.html#drop-io.vertx.core.Handler-\"\u003edrop\u003c/a\u003e\u003c/code\u003e 来进行删除。\n该方法可以删除创建`MongoGridFsClient`时指定的bucket。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e例如：删除一个文件bucket。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003egridFsClient.drop(res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    \u003cspan class=\"hljs-comment\"\u003e//The file bucket is dropped and all files in it, erased\u003c/span\u003e\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    res.cause().printStackTrace();\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_find_all_file_ids_in_a_gridfs_bucket\"\u003e\u003ca class=\"anchor\" href=\"#_find_all_file_ids_in_a_gridfs_bucket\"\u003e\u003c/a\u003e在一个GridFS的bucket中，查询所有文件ID。\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e调用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoGridFsClient.html#findAllIds-io.vertx.core.Handler-\"\u003efindAllIds\u003c/a\u003e\u003c/code\u003e 方法，可以查询到在bucket中的所有文件ID。\n可以凭借文件ID,通过使用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoGridFsClient.html#downloadFileByID-java.lang.String-java.lang.String-io.vertx.core.Handler-\"\u003edownloadFileByID\u003c/a\u003e\u003c/code\u003e 方法，来下载文件。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e例如：检索文件ID列表。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003egridFsClient.findAllIds(res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    List\u0026lt;String\u0026gt; ids = res.result(); \u003cspan class=\"hljs-comment\"\u003e//List of file IDs\u003c/span\u003e\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    res.cause().printStackTrace();\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_find_file_ids_in_a_gridfs_bucket_matching_a_query\"\u003e\u003ca class=\"anchor\" href=\"#_find_file_ids_in_a_gridfs_bucket_matching_a_query\"\u003e\u003c/a\u003e在一个与查询匹配的GridFS bucket中，查询文件ID。\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e可以指定查询以匹配GridFS \u003ccode\u003ebucket\u003c/code\u003e 中的文件。调用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoGridFsClient.html#findIds-io.vertx.core.json.JsonObject-io.vertx.core.Handler-\"\u003efindIds\u003c/a\u003e\u003c/code\u003e 方法\n可以返回与查询匹配的文件ID列表。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e它具有以下字段：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e\u003ccode\u003equery\u003c/code\u003e : 这是一个可以使用标准MongoDB查询运算符来匹配任何文件元数据的json对象。\n该json对象为空，会匹配所有文档。您可以按照GridFS手册中所述内容，来查询GridFS文件集合的属性。\n\u003ca href=\"https://docs.mongodb.com/manual/core/gridfs/#the-files-collection\" class=\"bare\"\u003ehttps://docs.mongodb.com/manual/core/gridfs/#the-files-collection\u003c/a\u003e\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e您可以调用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoGridFsClient.html#downloadFileByID-java.lang.String-java.lang.String-io.vertx.core.Handler-\"\u003edownloadFileByID\u003c/a\u003e\u003c/code\u003e 方法，通过ID来下载文件。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e例如：基于元数据查询来检索文件ID列表\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003e\u003cspan class=\"hljs-type\"\u003eJsonObject\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003equery\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eJsonObject\u003c/span\u003e().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;metadata.nick_name\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;Puhi the eel\u0026quot;\u003c/span\u003e);\ngridFsClient.findIds(query, res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    List\u0026lt;String\u0026gt; ids = res.result(); \u003cspan class=\"hljs-comment\"\u003e//List of file IDs\u003c/span\u003e\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    res.cause().printStackTrace();\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_delete_file_ids_in_gridfs_based_its_id\"\u003e\u003ca class=\"anchor\" href=\"#_delete_file_ids_in_gridfs_based_its_id\"\u003e\u003c/a\u003e在GridFS中，根据文件的ID来删除文件。\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e通过提供文件ID参数，来调用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoGridFsClient.html#delete-java.lang.String-io.vertx.core.Handler-\"\u003edelete\u003c/a\u003e\u003c/code\u003e 方法，可以删除以前存储在GridFS中的文件。\n可以通过使用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoGridFsClient.html#findIds-io.vertx.core.json.JsonObject-io.vertx.core.Handler-\"\u003efindIds\u003c/a\u003e\u003c/code\u003e 方法，来检索文件ID。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e它具有以下字段：\n\u003ccode\u003eid\u003c/code\u003e : 当文件存储到GridFS时，ID会自动生成。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e例如：通过ID删除文件。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003e\u003cspan class=\"hljs-type\"\u003eString\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003eid\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;56660b074cedfd000570839c\u0026quot;\u003c/span\u003e; \u003cspan class=\"hljs-comment\"\u003e//The GridFS ID of the file\u003c/span\u003e\ngridFsClient.delete(id, (AsyncResult\u0026lt;Void\u0026gt; res) -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    \u003cspan class=\"hljs-comment\"\u003e//File deleted\u003c/span\u003e\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    \u003cspan class=\"hljs-comment\"\u003e//Something went wrong\u003c/span\u003e\n    res.cause().printStackTrace();\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_upload_a_file_in_gridfs\"\u003e\u003ca class=\"anchor\" href=\"#_upload_a_file_in_gridfs\"\u003e\u003c/a\u003e在GridFS中上传文件\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e通过 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoGridFsClient.html#uploadFile-java.lang.String-io.vertx.core.Handler-\"\u003euploadFile\u003c/a\u003e\u003c/code\u003e 方法，文件可以使用文件名称进行存储。\n当文件存储成功时，GridFS会返回自动生成的文件ID。这个ID可以被用来之后检索文件。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e它具有以下字段：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e\u003ccode\u003efileName\u003c/code\u003e :  这是被存储文件的名称。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003egridFsClient.uploadFile(\u003cspan class=\"hljs-string\"\u003e\u0026quot;file.name\u0026quot;\u003c/span\u003e, res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    \u003cspan class=\"hljs-type\"\u003eString\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003eid\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e res.result();\n    \u003cspan class=\"hljs-comment\"\u003e//The ID of the stored object in Grid FS\u003c/span\u003e\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    res.cause().printStackTrace();\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_upload_a_file_in_gridfs_with_options\"\u003e\u003ca class=\"anchor\" href=\"#_upload_a_file_in_gridfs_with_options\"\u003e\u003c/a\u003e上传文件时携带配置参数。\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e使用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoGridFsClient.html#uploadFileWithOptions-java.lang.String-io.vertx.ext.mongo.GridFsUploadOptions-io.vertx.core.Handler-\"\u003euploadFileWithOptions\u003c/a\u003e\u003c/code\u003e 方法，\n并传入一个 `\u003ca href=\"../../apidocs/io/vertx/ext/mongo/GridFsUploadOptions.html\"\u003eGridFsUploadOptions\u003c/a\u003e`的实例，文件可以在存储时，携带额外的配置参数。\n当文件存储成功时，GridFS会返回文件ID。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e它具有以下字段：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e\u003ccode\u003emetadata\u003c/code\u003e : 这是一个json对象，它包含了以后的搜索中可能有用的任何元数据\n\u003ccode\u003echunkSizeBytes\u003c/code\u003e : GridFS会将文件分解这个字段数值的数个数据块。（译者注：数据块类似于数据库的分区，数值太大和太小都会影响性能。具体详见官方文档: \u003ca href=\"https://docs.mongodb.com/manual/core/sharding-data-partitioning/）\" class=\"bare\"\u003ehttps://docs.mongodb.com/manual/core/sharding-data-partitioning/）\u003c/a\u003e\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e例如： 通过文件名上传一个文件，并且携带元数据参数以及指定数据块的大小。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003e\u003cspan class=\"hljs-type\"\u003eJsonObject\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003emetadata\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eJsonObject\u003c/span\u003e();\nmetadata.put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;nick_name\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;Puhi the Eel\u0026quot;\u003c/span\u003e);\n\n\u003cspan class=\"hljs-type\"\u003eGridFsUploadOptions\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003eoptions\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eGridFsUploadOptions\u003c/span\u003e();\noptions.setChunkSizeBytes(\u003cspan class=\"hljs-number\"\u003e1024\u003c/span\u003e);\noptions.setMetadata(metadata);\n\ngridFsClient.uploadFileWithOptions(\u003cspan class=\"hljs-string\"\u003e\u0026quot;file.name\u0026quot;\u003c/span\u003e, options, res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    \u003cspan class=\"hljs-type\"\u003eString\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003eid\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e res.result();\n    \u003cspan class=\"hljs-comment\"\u003e//The ID of the stored object in Grid FS\u003c/span\u003e\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    res.cause().printStackTrace();\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_download_a_file_previously_stored_in_gridfs\"\u003e\u003ca class=\"anchor\" href=\"#_download_a_file_previously_stored_in_gridfs\"\u003e\u003c/a\u003e下载存储在GridFS中的文件\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e通过调用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoGridFsClient.html#downloadFile-java.lang.String-io.vertx.core.Handler-\"\u003edownloadFile\u003c/a\u003e\u003c/code\u003e 方法，可以凭借文件的原始名称来下载文件。\n下载完成后，将返回下载的文件长度，该数值是 \u003ccode\u003eLong\u003c/code\u003e 类型。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e它具有以下字段：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"dlist\"\u003e\n\u003cdl\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003efileName\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003e文件在存储时使用的文件名称\u003c/p\u003e\n\u003c/dd\u003e\n\u003c/dl\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e例如：凭借文件名称下载存储在GridFS中的文件。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003egridFsClient.downloadFile(\u003cspan class=\"hljs-string\"\u003e\u0026quot;file.name\u0026quot;\u003c/span\u003e, res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    \u003cspan class=\"hljs-type\"\u003eLong\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003efileLength\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e res.result();\n    \u003cspan class=\"hljs-comment\"\u003e//The length of the file stored in fileName\u003c/span\u003e\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    res.cause().printStackTrace();\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_download_a_file_previously_stored_in_gridfs_given_its_id\"\u003e\u003ca class=\"anchor\" href=\"#_download_a_file_previously_stored_in_gridfs_given_its_id\"\u003e\u003c/a\u003e使用文件ID来下载存储在GridFS中的文件\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e通过调用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoGridFsClient.html#downloadFileByID-java.lang.String-java.lang.String-io.vertx.core.Handler-\"\u003edownloadFileByID\u003c/a\u003e\u003c/code\u003e 方法，可以凭借文件ID来下载文件。\n下载完成后，将返回下载的文件长度，该数值是`Long`类型。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e它具有以下字段：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e\u003ccode\u003eid\u003c/code\u003e : 文件在存储后生成的文件ID\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e例如：凭借文件ID下载存储在GridFS中的文件。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003e\u003cspan class=\"hljs-type\"\u003eString\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003eid\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;56660b074cedfd000570839c\u0026quot;\u003c/span\u003e;\n\u003cspan class=\"hljs-type\"\u003eString\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003efilename\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;puhi.fil\u0026quot;\u003c/span\u003e;\ngridFsClient.downloadFileByID(id, filename, res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    \u003cspan class=\"hljs-type\"\u003eLong\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003efileLength\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e res.result();\n    \u003cspan class=\"hljs-comment\"\u003e//The length of the file stored in fileName\u003c/span\u003e\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    res.cause().printStackTrace();\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_download_a_file_from_gridfs_to_a_new_name\"\u003e\u003ca class=\"anchor\" href=\"#_download_a_file_from_gridfs_to_a_new_name\"\u003e\u003c/a\u003e从GridFS下载文件，并且重新命名文件名称\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e在解析文件的时候，可以使用文件的原始名称。而在下载文件时，\n您可以通过调用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoGridFsClient.html#downloadFileAs-java.lang.String-java.lang.String-io.vertx.core.Handler-\"\u003edownloadFileAs\u003c/a\u003e\u003c/code\u003e 方法，来重命名文件。\n下载完成后，将返回下载的文件长度，该数值是`Long`类型。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e它具有以下字段：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e\u003ccode\u003efileName\u003c/code\u003e : 文件之前存储的旧名称\n\u003ccode\u003enewFileName\u003c/code\u003e : 文件将被保存的新名称\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003egridFsClient.downloadFileAs(\u003cspan class=\"hljs-string\"\u003e\u0026quot;file.name\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;new_file.name\u0026quot;\u003c/span\u003e, res -\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (res.succeeded()) {\n    \u003cspan class=\"hljs-type\"\u003eLong\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003efileLength\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e res.result();\n    \u003cspan class=\"hljs-comment\"\u003e//The length of the file stored in fileName\u003c/span\u003e\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    res.cause().printStackTrace();\n  }\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_upload_a_stream_to_gridfs\"\u003e\u003ca class=\"anchor\" href=\"#_upload_a_stream_to_gridfs\"\u003e\u003c/a\u003e将数据流上传到GridFS\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e使用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoGridFsClient.html#uploadByFileName-io.vertx.core.streams.ReadStream-java.lang.String-io.vertx.core.Handler-\"\u003euploadByFileName\u003c/a\u003e\u003c/code\u003e 方法，您可以将数据流上传到GridFS。\n当数据流上传成功后，将返回GridFS生成的文件ID。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e它具有以下字段：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e\u003ccode\u003estream\u003c/code\u003e : 将要被上传的 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/streams/ReadStream.html\"\u003eReadStream\u003c/a\u003e\u003c/code\u003e\n\u003ccode\u003efileName\u003c/code\u003e : 将被存储的数据流的名称\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e例如： 上传文件数据流到GridFS。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003egridFsStreamClient.uploadByFileName(asyncFile, \u003cspan class=\"hljs-string\"\u003e\u0026quot;kanaloa\u0026quot;\u003c/span\u003e, stringAsyncResult -\u0026gt; {\n  \u003cspan class=\"hljs-type\"\u003eString\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003eid\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e stringAsyncResult.result();\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_upload_a_stream_to_gridfs_with_options\"\u003e\u003ca class=\"anchor\" href=\"#_upload_a_stream_to_gridfs_with_options\"\u003e\u003c/a\u003e上传数据流时携带配置参数\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e使用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoGridFsClient.html#uploadByFileNameWithOptions-io.vertx.core.streams.ReadStream-java.lang.String-io.vertx.ext.mongo.GridFsUploadOptions-io.vertx.core.Handler-\"\u003euploadByFileNameWithOptions\u003c/a\u003e\u003c/code\u003e 方法，\n并传入 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/GridFsUploadOptions.html\"\u003eGridFsUploadOptions\u003c/a\u003e\u003c/code\u003e 实例，您可以将数据流上传到GridFS。\n当数据流上传成功后，将返回GridFS生成的文件ID。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e它具有以下字段：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e\u003ccode\u003estream\u003c/code\u003e : 将要被上传的 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/streams/ReadStream.html\"\u003eReadStream\u003c/a\u003e\u003c/code\u003e\n\u003ccode\u003efileName\u003c/code\u003e : 将被存储的数据流的名称\n`options' : 上传时携带的配置参数\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/GridFsUploadOptions.html\"\u003eGridFsUploadOptions\u003c/a\u003e\u003c/code\u003e 具有以下字段:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e\u003ccode\u003emetadata\u003c/code\u003e : 这是一个json对象，它包含了以后的搜索中可能有用的任何元数据\n\u003ccode\u003echunkSizeBytes\u003c/code\u003e : GridFS会将文件分解这个字段数值的数个数据块。（译者注：数据块类似于数据库的分区，数值太大和太小都会影响性能。具体详见mongodb官方文档: \u003ca href=\"https://docs.mongodb.com/manual/core/sharding-data-partitioning/）\" class=\"bare\"\u003ehttps://docs.mongodb.com/manual/core/sharding-data-partitioning/）\u003c/a\u003e\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e例如： 携带配置参数将一个文件流上传到GridFS。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003e\u003cspan class=\"hljs-type\"\u003eGridFsUploadOptions\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003eoptions\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eGridFsUploadOptions\u003c/span\u003e();\noptions.setChunkSizeBytes(\u003cspan class=\"hljs-number\"\u003e2048\u003c/span\u003e);\noptions.setMetadata(\u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eJsonObject\u003c/span\u003e().put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;catagory\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;Polynesian gods\u0026quot;\u003c/span\u003e));\ngridFsStreamClient.uploadByFileNameWithOptions(asyncFile, \u003cspan class=\"hljs-string\"\u003e\u0026quot;kanaloa\u0026quot;\u003c/span\u003e, options, stringAsyncResult -\u0026gt; {\n  \u003cspan class=\"hljs-type\"\u003eString\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003eid\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e stringAsyncResult.result();\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_download_a_stream_from_gridfs_using_file_name\"\u003e\u003ca class=\"anchor\" href=\"#_download_a_stream_from_gridfs_using_file_name\"\u003e\u003c/a\u003e使用文件名称从GridFS中下载数据流\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e使用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoGridFsClient.html#downloadByFileName-io.vertx.core.streams.WriteStream-java.lang.String-io.vertx.core.Handler-\"\u003edownloadByFileName\u003c/a\u003e\u003c/code\u003e 方法，您可以使用文件名称从GridFS中下载数据流。\n下载完成后，将返回下载的数据流长度，该数值是 \u003ccode\u003eLong\u003c/code\u003e 类型。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e它具有以下字段：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e\u003ccode\u003estream\u003c/code\u003e : 将要被下载的 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/streams/WriteStream.html\"\u003eWriteStream\u003c/a\u003e\u003c/code\u003e\n\u003ccode\u003efileName\u003c/code\u003e : 将被下载的数据流的名称。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e例如： 下载文件流。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003egridFsStreamClient.downloadByFileName(asyncFile, \u003cspan class=\"hljs-string\"\u003e\u0026quot;kamapuaa.fil\u0026quot;\u003c/span\u003e, longAsyncResult -\u0026gt; {\n  \u003cspan class=\"hljs-type\"\u003eLong\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003elength\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e longAsyncResult.result();\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_download_a_stream_with_options_from_gridfs_using_file_name\"\u003e\u003ca class=\"anchor\" href=\"#_download_a_stream_with_options_from_gridfs_using_file_name\"\u003e\u003c/a\u003e使用文件名称并携带配置参数，从GridFS中下载数据流\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e使用 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoGridFsClient.html#downloadByFileNameWithOptions-io.vertx.core.streams.WriteStream-java.lang.String-io.vertx.ext.mongo.GridFsDownloadOptions-io.vertx.core.Handler-\"\u003edownloadByFileNameWithOptions\u003c/a\u003e\u003c/code\u003e 方法，\n并传入 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/ext/mongo/GridFsDownloadOptions.html\"\u003eGridFsDownloadOptions\u003c/a\u003e\u003c/code\u003e 实例，您可以使用文件名称并携带配置参数，从GridFS中下载数据流。\n下载完成后，将返回下载的数据流长度，该数值是`Long`类型。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e它具有以下字段：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e\u003ccode\u003estream\u003c/code\u003e : 将被下载的`\u003ca href=\"../../apidocs/io/vertx/core/streams/WriteStream.html\"\u003eWriteStream\u003c/a\u003e`\n\u003ccode\u003efileName\u003c/code\u003e : 将被下载的数据流名称\n\u003ccode\u003eoptions\u003c/code\u003e : `\u003ca href=\"../../apidocs/io/vertx/ext/mongo/GridFsDownloadOptions.html\"\u003eGridFsDownloadOptions\u003c/a\u003e`实例\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eDownloadOptions 具有以下字段:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e\u003ccode\u003erevision\u003c/code\u003e : 要下载文件的版本（译者注：版本字段仅显示文件更改的频率。值为0，代表未经过修改的原始存储的文件）\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e例如：携带配置参数下载文件流。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003e\u003cspan class=\"hljs-type\"\u003eGridFsDownloadOptions\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003eoptions\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eGridFsDownloadOptions\u003c/span\u003e();\noptions.setRevision(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e);\ngridFsStreamClient.downloadByFileNameWithOptions(asyncFile, \u003cspan class=\"hljs-string\"\u003e\u0026quot;kamapuaa.fil\u0026quot;\u003c/span\u003e, options, longAsyncResult -\u0026gt; {\n  \u003cspan class=\"hljs-type\"\u003eLong\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003elength\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e longAsyncResult.result();\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_download_a_stream_from_gridfs_using_id\"\u003e\u003ca class=\"anchor\" href=\"#_download_a_stream_from_gridfs_using_id\"\u003e\u003c/a\u003e使用ID下载数据流\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e通过调用 `\u003ca href=\"../../apidocs/io/vertx/ext/mongo/MongoGridFsClient.html#downloadById-io.vertx.core.streams.WriteStream-java.lang.String-io.vertx.core.Handler-\"\u003edownloadById\u003c/a\u003e`方法，您可以使用GridFS生成的ID来下载数据流。\n下载完成后，将返回下载的数据流长度，该数值是`Long`类型。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e它具有以下字段：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e\u003ccode\u003estream\u003c/code\u003e : 将要下载的 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/streams/WriteStream.html\"\u003eWriteStream\u003c/a\u003e\u003c/code\u003e\n\u003ccode\u003eid\u003c/code\u003e : GridFS生成的id\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e例如：使用对象的ID下载文件流\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003e\u003cspan class=\"hljs-type\"\u003eString\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003eid\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;58f61bf84cedfd000661af06\u0026quot;\u003c/span\u003e;\ngridFsStreamClient.downloadById(asyncFile, id, longAsyncResult -\u0026gt; {\n  \u003cspan class=\"hljs-type\"\u003eLong\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003elength\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e longAsyncResult.result();\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_configuring_the_client\"\u003e\u003ca class=\"anchor\" href=\"#_configuring_the_client\"\u003e\u003c/a\u003e客户端参数配置\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eVert.x MongoDB 客户端把配置参数放在 JSON 对象中。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e客户端支持以下这些参数：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"dlist\"\u003e\n\u003cdl\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003edb_name\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003emongoDB 实例的数据库名称。默认是 \u003ccode\u003edefault_db\u003c/code\u003e\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003euseObjectId\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003e此参数用来支持 ObjectId 的持久化和检索。如果设置为 true ，\n将会在集合的文档中，以 16 进制的字符串来保存 MongoDB 的 ObjectId 类型的字段。而且在设置为 true 后，可以让文档基于创建时间排序（译者注：前4个字节用来存储创建的时的时间戳，精确到秒）。\n您也可以通过使用 ObjectId::getDate() 方法，从这个 16进制的字符串中获取创建时间。若您选择其他类型作为 _id ，则设置此参数为 false 。\n如果您保存的文档中，没有设置 _id 字段的值，将会默认的生成 16进制的字符串作为 _id 。\n此参数默认为 false 。\u003c/p\u003e\n\u003c/dd\u003e\n\u003c/dl\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e此客户端尝试着支持驱动所支持的大多数参数配置。\n有两种配置方式，一种是连接字符串，另一种是驱动配置选项。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"dlist\"\u003e\n\u003cdl\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003econnection_string\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003e连接字符串，指的是创建客户端的字符串，例如： \u003ccode\u003emongodb://localhost:27017\u003c/code\u003e 。\n有关连接字符串格式的更多信息，请参考驱动程序文档。\u003c/p\u003e\n\u003c/dd\u003e\n\u003c/dl\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e\u003cstrong\u003e驱动配置的具体选项\u003c/strong\u003e\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-js\" data-lang=\"js\"\u003e{\n \u003cspan class=\"hljs-comment\"\u003e// Single Cluster Settings\u003c/span\u003e\n \u003cspan class=\"hljs-string\"\u003e\u0026quot;host\u0026quot;\u003c/span\u003e : \u003cspan class=\"hljs-string\"\u003e\u0026quot;127.0.0.1\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-comment\"\u003e// string\u003c/span\u003e\n \u003cspan class=\"hljs-string\"\u003e\u0026quot;port\u0026quot;\u003c/span\u003e : \u003cspan class=\"hljs-number\"\u003e27017\u003c/span\u003e,      \u003cspan class=\"hljs-comment\"\u003e// int\u003c/span\u003e\n\n \u003cspan class=\"hljs-comment\"\u003e// Multiple Cluster Settings\u003c/span\u003e\n \u003cspan class=\"hljs-string\"\u003e\u0026quot;hosts\u0026quot;\u003c/span\u003e : [\n   {\n     \u003cspan class=\"hljs-string\"\u003e\u0026quot;host\u0026quot;\u003c/span\u003e : \u003cspan class=\"hljs-string\"\u003e\u0026quot;cluster1\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-comment\"\u003e// string\u003c/span\u003e\n     \u003cspan class=\"hljs-string\"\u003e\u0026quot;port\u0026quot;\u003c/span\u003e : \u003cspan class=\"hljs-number\"\u003e27000\u003c/span\u003e       \u003cspan class=\"hljs-comment\"\u003e// int\u003c/span\u003e\n   },\n   {\n     \u003cspan class=\"hljs-string\"\u003e\u0026quot;host\u0026quot;\u003c/span\u003e : \u003cspan class=\"hljs-string\"\u003e\u0026quot;cluster2\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-comment\"\u003e// string\u003c/span\u003e\n     \u003cspan class=\"hljs-string\"\u003e\u0026quot;port\u0026quot;\u003c/span\u003e : \u003cspan class=\"hljs-number\"\u003e28000\u003c/span\u003e       \u003cspan class=\"hljs-comment\"\u003e// int\u003c/span\u003e\n   },\n   ...\n ],\n \u003cspan class=\"hljs-string\"\u003e\u0026quot;replicaSet\u0026quot;\u003c/span\u003e :  \u003cspan class=\"hljs-string\"\u003e\u0026quot;foo\u0026quot;\u003c/span\u003e,    \u003cspan class=\"hljs-comment\"\u003e// string\u003c/span\u003e\n \u003cspan class=\"hljs-string\"\u003e\u0026quot;serverSelectionTimeoutMS\u0026quot;\u003c/span\u003e : \u003cspan class=\"hljs-number\"\u003e30000\u003c/span\u003e, \u003cspan class=\"hljs-comment\"\u003e// long\u003c/span\u003e\n\n \u003cspan class=\"hljs-comment\"\u003e// Connection Pool Settings\u003c/span\u003e\n \u003cspan class=\"hljs-string\"\u003e\u0026quot;maxPoolSize\u0026quot;\u003c/span\u003e : \u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e,                \u003cspan class=\"hljs-comment\"\u003e// int\u003c/span\u003e\n \u003cspan class=\"hljs-string\"\u003e\u0026quot;minPoolSize\u0026quot;\u003c/span\u003e : \u003cspan class=\"hljs-number\"\u003e25\u003c/span\u003e,                \u003cspan class=\"hljs-comment\"\u003e// int\u003c/span\u003e\n \u003cspan class=\"hljs-string\"\u003e\u0026quot;maxIdleTimeMS\u0026quot;\u003c/span\u003e : \u003cspan class=\"hljs-number\"\u003e300000\u003c/span\u003e,          \u003cspan class=\"hljs-comment\"\u003e// long\u003c/span\u003e\n \u003cspan class=\"hljs-string\"\u003e\u0026quot;maxLifeTimeMS\u0026quot;\u003c/span\u003e : \u003cspan class=\"hljs-number\"\u003e3600000\u003c/span\u003e,         \u003cspan class=\"hljs-comment\"\u003e// long\u003c/span\u003e\n \u003cspan class=\"hljs-string\"\u003e\u0026quot;waitQueueTimeoutMS\u0026quot;\u003c/span\u003e : \u003cspan class=\"hljs-number\"\u003e10000\u003c/span\u003e,      \u003cspan class=\"hljs-comment\"\u003e// long\u003c/span\u003e\n \u003cspan class=\"hljs-string\"\u003e\u0026quot;maintenanceFrequencyMS\u0026quot;\u003c/span\u003e : \u003cspan class=\"hljs-number\"\u003e2000\u003c/span\u003e,   \u003cspan class=\"hljs-comment\"\u003e// long\u003c/span\u003e\n \u003cspan class=\"hljs-string\"\u003e\u0026quot;maintenanceInitialDelayMS\u0026quot;\u003c/span\u003e : \u003cspan class=\"hljs-number\"\u003e500\u003c/span\u003e, \u003cspan class=\"hljs-comment\"\u003e// long\u003c/span\u003e\n\n \u003cspan class=\"hljs-comment\"\u003e// Credentials / Auth\u003c/span\u003e\n \u003cspan class=\"hljs-string\"\u003e\u0026quot;username\u0026quot;\u003c/span\u003e   : \u003cspan class=\"hljs-string\"\u003e\u0026quot;john\u0026quot;\u003c/span\u003e,     \u003cspan class=\"hljs-comment\"\u003e// string\u003c/span\u003e\n \u003cspan class=\"hljs-string\"\u003e\u0026quot;password\u0026quot;\u003c/span\u003e   : \u003cspan class=\"hljs-string\"\u003e\u0026quot;passw0rd\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-comment\"\u003e// string\u003c/span\u003e\n \u003cspan class=\"hljs-string\"\u003e\u0026quot;authSource\u0026quot;\u003c/span\u003e : \u003cspan class=\"hljs-string\"\u003e\u0026quot;some.db\u0026quot;\u003c/span\u003e   \u003cspan class=\"hljs-comment\"\u003e// string\u003c/span\u003e\n \u003cspan class=\"hljs-comment\"\u003e// Auth mechanism\u003c/span\u003e\n \u003cspan class=\"hljs-string\"\u003e\u0026quot;authMechanism\u0026quot;\u003c/span\u003e     : \u003cspan class=\"hljs-string\"\u003e\u0026quot;GSSAPI\u0026quot;\u003c/span\u003e,        \u003cspan class=\"hljs-comment\"\u003e// string\u003c/span\u003e\n \u003cspan class=\"hljs-string\"\u003e\u0026quot;gssapiServiceName\u0026quot;\u003c/span\u003e : \u003cspan class=\"hljs-string\"\u003e\u0026quot;myservicename\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-comment\"\u003e// string\u003c/span\u003e\n\n \u003cspan class=\"hljs-comment\"\u003e// Socket Settings\u003c/span\u003e\n \u003cspan class=\"hljs-string\"\u003e\u0026quot;connectTimeoutMS\u0026quot;\u003c/span\u003e : \u003cspan class=\"hljs-number\"\u003e300000\u003c/span\u003e, \u003cspan class=\"hljs-comment\"\u003e// int\u003c/span\u003e\n \u003cspan class=\"hljs-string\"\u003e\u0026quot;socketTimeoutMS\u0026quot;\u003c/span\u003e  : \u003cspan class=\"hljs-number\"\u003e100000\u003c/span\u003e, \u003cspan class=\"hljs-comment\"\u003e// int\u003c/span\u003e\n \u003cspan class=\"hljs-string\"\u003e\u0026quot;sendBufferSize\u0026quot;\u003c/span\u003e    : \u003cspan class=\"hljs-number\"\u003e8192\u003c/span\u003e,  \u003cspan class=\"hljs-comment\"\u003e// int\u003c/span\u003e\n \u003cspan class=\"hljs-string\"\u003e\u0026quot;receiveBufferSize\u0026quot;\u003c/span\u003e : \u003cspan class=\"hljs-number\"\u003e8192\u003c/span\u003e,  \u003cspan class=\"hljs-comment\"\u003e// int\u003c/span\u003e\n\n \u003cspan class=\"hljs-comment\"\u003e// Server Settings\u003c/span\u003e\n \u003cspan class=\"hljs-string\"\u003e\u0026quot;heartbeatFrequencyMS\u0026quot;\u003c/span\u003e    : \u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e, \u003cspan class=\"hljs-comment\"\u003e// long\u003c/span\u003e\n \u003cspan class=\"hljs-string\"\u003e\u0026quot;minHeartbeatFrequencyMS\u0026quot;\u003c/span\u003e :  \u003cspan class=\"hljs-number\"\u003e500\u003c/span\u003e, \u003cspan class=\"hljs-comment\"\u003e// long\u003c/span\u003e\n\n \u003cspan class=\"hljs-comment\"\u003e// SSL Settings\u003c/span\u003e\n \u003cspan class=\"hljs-string\"\u003e\u0026quot;ssl\u0026quot;\u003c/span\u003e : \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e,                       \u003cspan class=\"hljs-comment\"\u003e// boolean\u003c/span\u003e\n \u003cspan class=\"hljs-string\"\u003e\u0026quot;sslInvalidHostNameAllowed\u0026quot;\u003c/span\u003e : \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e, \u003cspan class=\"hljs-comment\"\u003e// boolean\u003c/span\u003e\n \u003cspan class=\"hljs-string\"\u003e\u0026quot;trustAll\u0026quot;\u003c/span\u003e : \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e,                  \u003cspan class=\"hljs-comment\"\u003e// boolean\u003c/span\u003e\n \u003cspan class=\"hljs-string\"\u003e\u0026quot;keyPath\u0026quot;\u003c/span\u003e : \u003cspan class=\"hljs-string\"\u003e\u0026quot;key.pem\u0026quot;\u003c/span\u003e,               \u003cspan class=\"hljs-comment\"\u003e// string\u003c/span\u003e\n \u003cspan class=\"hljs-string\"\u003e\u0026quot;certPath\u0026quot;\u003c/span\u003e : \u003cspan class=\"hljs-string\"\u003e\u0026quot;cert.pem\u0026quot;\u003c/span\u003e,             \u003cspan class=\"hljs-comment\"\u003e// string\u003c/span\u003e\n \u003cspan class=\"hljs-string\"\u003e\u0026quot;caPath\u0026quot;\u003c/span\u003e : \u003cspan class=\"hljs-string\"\u003e\u0026quot;ca.pem\u0026quot;\u003c/span\u003e                  \u003cspan class=\"hljs-comment\"\u003e// string\u003c/span\u003e\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e\u003cstrong\u003e驱动参数说明\u003c/strong\u003e\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"dlist\"\u003e\n\u003cdl\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003ehost\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003emongoDB 实例运行的地址。默认是 \u003ccode\u003e127.0.0.1\u003c/code\u003e。 如果设置了 \u003ccode\u003ehosts\u003c/code\u003e 参数，就会忽略 \u003ccode\u003ehost\u003c/code\u003e 参数\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003eport\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003emongoDB 实例监听的端口。默认是 \u003ccode\u003e127.0.0.1\u003c/code\u003e。 如果设置了 \u003ccode\u003ehosts\u003c/code\u003e 参数，就会忽略 \u003ccode\u003ehost\u003c/code\u003e 参数\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003ehosts\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003e表示支持 MongoDB 集群（分片／复制）的一组地址和端口\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003ehost\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003e集群中某个运行实例的地址\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003eport\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003e集群中某个运行实例监听的端口\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003ereplicaSet\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003e某个 mongoDB 实例作为副本集的名称\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003eserverSelectionTimeoutMS\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003e驱动选择服务器的最大时间，单位毫秒\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003emaxPoolSize\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003e连接池最大连接数。默认为 \u003ccode\u003e100\u003c/code\u003e\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003eminPoolSize\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003e连接池最小连接数。默认为 \u003ccode\u003e0\u003c/code\u003e\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003emaxIdleTimeMS\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003e连接池的连接最大空闲时间。默认为 \u003ccode\u003e0\u003c/code\u003e，表示一直存在\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003emaxLifeTimeMS\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003e连接池的连接最大存活时间。默认为 \u003ccode\u003e0\u003c/code\u003e，表示永远存活\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003ewaitQueueTimeoutMS\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003e线程等待作为连接的最长等待时间。默认为 \u003ccode\u003e120000\u003c/code\u003e（2分钟）\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003emaintenanceFrequencyMS\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003e维护任务进行循环检查连接的时间间隔（译者注：维护任务会定时检查连接的状态，直到连接池剩下最小连接数）。默认为 \u003ccode\u003e0\u003c/code\u003e\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003emaintenanceInitialDelayMS\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003e连接池启动后，维护任务第一次启动的时间。默认为 \u003ccode\u003e0\u003c/code\u003e\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003eusername\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003e授权的用户名。默认为 \u003ccode\u003enull\u003c/code\u003e（意味着不需要授权）\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003epassword\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003e授权的密码\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003eauthSource\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003e与授权用户关联的数据库名称。默认值为 \u003ccode\u003edb_name\u003c/code\u003e\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003eauthMechanism\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003e所使用的授权认证机制。请参考 [Authentication](\u003ca href=\"http://docs.mongodb.org/manual/core/authentication/\" class=\"bare\"\u003ehttp://docs.mongodb.org/manual/core/authentication/\u003c/a\u003e 来获取更多信息。\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003egssapiServiceName\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003e当使用`GSSAPI`的授权机制时，所使用的 Kerberos 服务名。\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003econnectTimeoutMS\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003e打开连接超时的时间，单位毫秒。默认为`10000`（10 秒）\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003esocketTimeoutMS\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003e在 socket 上接收或者发送超时的时间。默认为`0`，意味着永远不超时（译者注：这是客户端的超时时间。如果一个 insert 达到了 socketTimeoutMS， 将无法得知服务器是否已写入）。\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003esendBufferSize\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003e设置 socket 发送缓冲区大小（SO_SNDBUF）。默认为`0`，这将使用操作系统默认大小。\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003ereceiveBufferSize\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003e设置 socket 接收缓冲区大小（SO_RCVBUF）。默认为`0`，这将使用操作系统默认大小。\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003eheartbeatFrequencyMS\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003e集群监视器访问每个集群服务器的频率。默认为`5000`（5s）\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003eminHeartbeatFrequencyMS\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003e最小心跳频率。默认为`1000`（1s）\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003essl\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003e在mongo客户端 和 mongo之间，启用ssl\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003esslInvalidHostNameAllowed\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003e接受服务器证书中未包含的主机名（译者注：当你启用ssl时，这个配置用来设置是否关闭域名检查。true 为允许，即关闭域名检查）。\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003etrustAll\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003e当启用ssl时，信任所有证书。\u003cstrong\u003e警告\u003c/strong\u003e - 开启这个配置将会让您面临一些潜在的安全问题，例如MITM攻击。\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003ekeyPath\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003e设置客户端私钥的路径。客户端私钥是用于在与mongo建立SSL连接时，对服务器进行身份验证。\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003ecertPath\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003e设置客户端证书的路径。客户端证书是用来在与mongo建立SSL连接时，对服务器进行身份验证。\u003c/p\u003e\n\u003c/dd\u003e\n\u003cdt class=\"hdlist1\"\u003e\u003ccode\u003ecaPath\u003c/code\u003e\u003c/dt\u003e\n\u003cdd\u003e\n\u003cp\u003e设置CA证书的路径。CA证书是用于在与mongo建立SSL连接时，当做一个信任源。\u003c/p\u003e\n\u003c/dd\u003e\n\u003c/dl\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e请注意：上面提到的各类参数的默认值，都是 MongoDB Java 驱动的默认值。\n请参考驱动文档来获取最新信息。\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_rxjava_3_api\"\u003e\u003ca class=\"anchor\" href=\"#_rxjava_3_api\"\u003e\u003c/a\u003eRxJava 3 API\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eMongo客户端提供了RX化的原始版本API。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_creating_an_rxified_client\"\u003e\u003ca class=\"anchor\" href=\"#_creating_an_rxified_client\"\u003e\u003c/a\u003e创建一个RX化的客户端\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e要想创建一个RX化的Mongo客户端，需要您确保导入了 \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/rxjava3/ext/mongo/MongoClient.html\"\u003eMongoClient\u003c/a\u003e\u003c/code\u003e 类。\n创建并获取一个客户端实例的方法有很多，例如下面：\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003e\u003cspan class=\"hljs-type\"\u003eMongoClient\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003eclient\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e MongoClient.createShared(vertx, config);\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect2\"\u003e\n\u003ch3 id=\"_finding_documents_in_batches\"\u003e\u003ca class=\"anchor\" href=\"#_finding_documents_in_batches\"\u003e\u003c/a\u003e批量查询文档\u003c/h3\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/rxjava3/core/streams/ReadStream.html\"\u003eReadStream\u003c/a\u003e\u003c/code\u003e 可以被转换成 \u003ccode\u003e\u003ca href=\"../../apidocs/io/reactivex/rxjava3/core/Flowable.html\"\u003eFlowable\u003c/a\u003e\u003c/code\u003e 。这个功能会方便您处理大型数据集。\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-java\" data-lang=\"java\"\u003e\u003cspan class=\"hljs-type\"\u003eJsonObject\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003equery\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eJsonObject\u003c/span\u003e()\n  .put(\u003cspan class=\"hljs-string\"\u003e\u0026quot;author\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;J. R. R. Tolkien\u0026quot;\u003c/span\u003e);\n\nReadStream\u0026lt;JsonObject\u0026gt; books = mongoClient.findBatch(\u003cspan class=\"hljs-string\"\u003e\u0026quot;book\u0026quot;\u003c/span\u003e, query);\n\n\u003cspan class=\"hljs-comment\"\u003e// Convert the stream to a Flowable\u003c/span\u003e\nFlowable\u0026lt;JsonObject\u0026gt; flowable = books.toFlowable();\n\nflowable.subscribe(doc -\u0026gt; {\n  System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Found doc: \u0026quot;\u003c/span\u003e + doc.encodePrettily());\n}, throwable -\u0026gt; {\n  throwable.printStackTrace();\n}, () -\u0026gt; {\n  System.out.println(\u003cspan class=\"hljs-string\"\u003e\u0026quot;End of research\u0026quot;\u003c/span\u003e);\n});\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e","version":"4.2.6"},"__N_SSG":true},"page":"/docs/[[...slug]]","query":{"slug":["4.2.6","vertx-mongo-client","java"]},"buildId":"nVFUqslJoQvsJs_b_GmkE","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>