<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="description" content="Vert.x | Reactive applications on the JVM"/><meta name="robots" content="index,follow"/><link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet"/><link href="https://fonts.googleapis.com/css?family=Roboto+Condensed:300,400" rel="stylesheet"/><link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400&amp;display=swap" rel="stylesheet"/><link rel="shortcut icon" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="48x48" href="/favicons/favicon-48x48.png"/><link rel="alternate" type="application/rss+xml" href="/feed/rss.xml"/><link rel="alternate" type="application/atom+xml" href="/feed/atom.xml"/><link rel="alternate" type="application/json" href="/feed/feed.json"/><title>Mongo Auth Provider implementation | Eclipse Vert.x</title><meta name="next-head-count" content="16"/><link rel="preload" href="/_next/static/css/styles.bee17d6f.chunk.css" as="style"/><link rel="stylesheet" href="/_next/static/css/styles.bee17d6f.chunk.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-b6e20584df76f29b6f35.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-d7b2fb72fb7257504a38.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.fcef98db13e2318579fb.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.5b8771ac6e8a338f82f1.js" as="script"/><link rel="preload" href="/_next/static/chunks/styles.7064a0f84b2a7c13404a.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-3dbbc9c041333077c167.js" as="script"/><link rel="preload" href="/_next/static/chunks/5df0631eea625b022d3730b3f1bf573e1b8deb37.2c5d42edba8dda0b0ba3.js" as="script"/><link rel="preload" href="/_next/static/chunks/31acfd8439b7c9eee4abe9f59c7500d6c943ee0d.ac00e02121fc7eb66ce5.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/docs/%5B%5B...slug%5D%5D-3a425d1828d3af7aa498.js" as="script"/></head><body data-build-time="2021-06-05T04:07:55.451Z" data-build-commit-id="cd5d5ad714675be465817b1468e05868d68881e8" data-build-run-id="908381811"><div id="__next"><main class="page docs"><header><div class="navbar"><div class="navbar-content container"><div class="navbar-logo"><a href="/"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAxMjMyLjYgMzE1LjIiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxzdHlsZT4uc3Qwe2ZpbGw6Izc4MmE5MX08L3N0eWxlPjxwYXRoIGQ9Ik0xMjAuOSAyMTQuMkwxOTAuNSAwaDUyLjNsLTk4LjUgMjczLjhIOTguMkwwIDBoNTIuMWw2OC44IDIxNC4yem0yOTEuMi02Mi42SDI5OS42djg0LjJINDMxdjM4SDI1MlYwaDE3Ny43djM4LjRIMjk5LjZWMTE0aDExMi41djM3LjZ6bTgzLjctMTEzLjJINTQ2YzE2LjUuMyAyOSA0LjQgMzcuMyAxMi40IDguMyA4IDEyLjUgMTkuNCAxMi41IDM0IDAgMTQtNC41IDI1LjEtMTMuNSAzMy4yLTkgOC4xLTIxLjYgMTIuMS0zNy42IDEyLjFoLTI3LjF2MjQuMmw4Ni4xIDExOS41aDUxdi0yLjRsLTc3LjItMTA2LjdjMjQuOS01LjUgNDMuMy0yMS43IDUyLjYtMzUuOSA4LjItMTIuNiAxMy4zLTI3LjcgMTMuMy00NiAwLTI2LjgtOC42LTQ3LjQtMjUuOC02MS41QzYwMC41IDcuMSA1NzYuMSAwIDU0NC41IDBoLTk2LjN2MjczLjhoNDcuNiIvPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDUyLjMgMTU3LjdsLTQxLjUgNjIuNyAyOS43IDUzLjRoODUuMXoiLz48Y2lyY2xlIGNsYXNzPSJzdDAiIGN4PSI4MjcuOSIgY3k9IjI3NC43IiByPSI0MC41Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTEwMzcgMGwtNDcuNiA3NC4yTDk0OSAwaC04NGw4NS4zIDEzNS44LTY3LjEgMTA1LjdjNS43IDkuNSA5LjEgMjAuNSA5LjIgMzIuNGg1MC4xTDExMjEuMyAwSDEwMzd6Ii8+PHBhdGggZD0iTTc2My41IDI3My44Yy4xLTkuOSAyLjUtMTkuMiA2LjYtMjcuNVYzOC40aDg1LjRWMEg2MzguMnYzOC40aDg0LjZ2MjM1LjRoNDAuN3ptNDE0LTI2Ni45aC0xNS4zdjQyLjJoLTguNVY2LjloLTE1LjJWMGgzOXY2Ljl6TTExOTMgMGwxNC4yIDM3LjdMMTIyMS4zIDBoMTF2NDkuMWgtOC41VjMyLjlsLjgtMjEuNy0xNC41IDM3LjloLTYuMWwtMTQuNS0zNy44LjggMjEuNnYxNi4yaC04LjVWMGgxMS4yeiIvPjwvc3ZnPg==" alt="Vert.x Logo"/></a></div><div class="navbar-collapse-button"><span></span><span></span><span></span></div><div class="navbar-right"><div class="navbar-menu"><span class="navbar-menu-item with-drop-down"><div class="dropdown"><a class="dropdown-title">开始<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="dropdown-menu"><a href="/introduction-to-vertx-and-reactive/"><li class="dropdown-item">简介</li></a><a href="/get-started/"><li class="dropdown-item">开始</li></a><a href="https://start.vertx.io/" target="_blank" rel="noreferrer"><li class="dropdown-item">应用生成器 <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a></ul></div></span><a class="navbar-menu-item" href="/docs/">文档</a><span class="navbar-menu-item with-drop-down"><div class="dropdown"><a class="dropdown-title">资源<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="dropdown-menu"><a href="/faq/"><li class="dropdown-item">答疑</li></a><a href="/channels/"><li class="dropdown-item">联系渠道</li></a><a href="https://how-to.vertx.io/" target="_blank" rel="noreferrer"><li class="dropdown-item">操作指南 <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a><a href="https://github.com/vert-x3/vertx-eventbus-bridge-clients" target="_blank" rel="noreferrer"><li class="dropdown-item">EventBus Bridge Clients <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="external-link-icon"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></li></a></ul></div></span><a class="navbar-menu-item" href="/blog/">博客</a><a class="navbar-menu-item" href="/community/">社区</a><a class="navbar-menu-item" href="/translation/">翻译团队</a></div><div class="navbar-social"><a href="https://github.com/vert-x3/vertx-awesome" class="navbar-social-link" title="Awesome Vert.x" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="List of awesome Vert.x projects"><title>Awesome Vert.x</title><path d="M24 11.438l-6.154-5.645-.865.944 5.128 4.7H1.895l5.128-4.705-.865-.943-6.154 5.649H0v3.72c0 1.683 1.62 3.053 3.61 3.053h3.795c1.99 0 3.61-1.37 3.61-3.051v-2.446h1.97v2.446c0 1.68 1.62 3.051 3.61 3.051h3.794c1.99 0 3.61-1.37 3.61-3.051v-3.721z"></path></svg></a><a href="https://stackoverflow.com/questions/tagged/vert.x" class="navbar-social-link" title="Stack Overflow" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Stack Overflow questions related to Vert.x"><title>Stack Overflow</title><path d="M18.986 21.865v-6.404h2.134V24H1.844v-8.539h2.13v6.404h15.012zM6.111 19.731H16.85v-2.137H6.111v2.137zm.259-4.852l10.48 2.189.451-2.07-10.478-2.187-.453 2.068zm1.359-5.056l9.705 4.53.903-1.95-9.706-4.53-.902 1.936v.014zm2.715-4.785l8.217 6.855 1.359-1.62-8.216-6.853-1.35 1.617-.01.001zM15.751 0l-1.746 1.294 6.405 8.604 1.746-1.294L15.749 0h.002z"></path></svg></a><a href="https://www.youtube.com/channel/UCGN6L3tRhs92Uer3c6VxOSA" class="navbar-social-link" title="YouTube" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="YouTube channel of Vert.x"><title>YouTube</title><path d="M23.499 6.203a3.008 3.008 0 00-2.089-2.089c-1.87-.501-9.4-.501-9.4-.501s-7.509-.01-9.399.501a3.008 3.008 0 00-2.088 2.09A31.258 31.26 0 000 12.01a31.258 31.26 0 00.523 5.785 3.008 3.008 0 002.088 2.089c1.869.502 9.4.502 9.4.502s7.508 0 9.399-.502a3.008 3.008 0 002.089-2.09 31.258 31.26 0 00.5-5.784 31.258 31.26 0 00-.5-5.808zm-13.891 9.4V8.407l6.266 3.604z"></path></svg></a><a href="https://discord.gg/KzEMwP2" class="navbar-social-link" title="Discord" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Eclipse Vert.x channel on Discord"><title>Discord</title><path d="M20.222 0c1.406 0 2.54 1.137 2.607 2.475V24l-2.677-2.273-1.47-1.338-1.604-1.398.67 2.205H3.71c-1.402 0-2.54-1.065-2.54-2.476V2.48C1.17 1.142 2.31.003 3.715.003h16.5L20.222 0zm-6.118 5.683h-.03l-.202.2c2.073.6 3.076 1.537 3.076 1.537-1.336-.668-2.54-1.002-3.744-1.137-.87-.135-1.74-.064-2.475 0h-.2c-.47 0-1.47.2-2.81.735-.467.203-.735.336-.735.336s1.002-1.002 3.21-1.537l-.135-.135s-1.672-.064-3.477 1.27c0 0-1.805 3.144-1.805 7.02 0 0 1 1.74 3.743 1.806 0 0 .4-.533.805-1.002-1.54-.468-2.14-1.404-2.14-1.404s.134.066.335.2h.06c.03 0 .044.015.06.03v.006c.016.016.03.03.06.03.33.136.66.27.93.4.466.202 1.065.403 1.8.536.93.135 1.996.2 3.21 0 .6-.135 1.2-.267 1.8-.535.39-.2.87-.4 1.397-.737 0 0-.6.936-2.205 1.404.33.466.795 1 .795 1 2.744-.06 3.81-1.8 3.87-1.726 0-3.87-1.815-7.02-1.815-7.02-1.635-1.214-3.165-1.26-3.435-1.26l.056-.02zm.168 4.413c.703 0 1.27.6 1.27 1.335 0 .74-.57 1.34-1.27 1.34-.7 0-1.27-.6-1.27-1.334.002-.74.573-1.338 1.27-1.338zm-4.543 0c.7 0 1.266.6 1.266 1.335 0 .74-.57 1.34-1.27 1.34-.7 0-1.27-.6-1.27-1.334 0-.74.57-1.338 1.27-1.338z"></path></svg></a><a href="https://groups.google.com/forum/?fromgroups#!forum/vertx" class="navbar-social-link" title="Vert.x 用户组" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="A Google group for Vert.x users"><title>Vert.x 用户组</title><path d="M.92 3.332c-.776 0-1.216.67-.692 1.383l2.537 4.403v7.86c0 2.013 1.467 3.69 3.459 3.69H20.31a3.75 3.75 0 003.69-3.69V7.043a3.723 3.723 0 00-3.668-3.71zm5.786 3.71H20.1c.587 0 1.153.357 1.153.923 0 .566-.566.922-1.153.922H6.706c-.587 0-1.153-.356-1.153-.922 0-.566.566-.923 1.153-.923zm0 3.69H20.1c.587 0 1.153.356 1.153.922 0 .566-.566.922-1.153.922H6.706c-.587 0-1.153-.356-1.153-.922 0-.566.566-.922 1.153-.922zm-.021 3.71h9.705c.587 0 1.153.356 1.153.922 0 .566-.566.923-1.153.923H6.685c-.587 0-1.153-.357-1.153-.923 0-.566.566-.922 1.153-.922Z"></path></svg></a><a href="https://shang.qq.com/wpa/qunwpa?idkey=587f58cacb9557e3291b46098e0fe09427b98a1c0f866da23c04c2762bc7e2ad" class="navbar-social-link" title="Vert.x中国用户组QQ群" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24" aria-label="Vert.x中国用户组QQ群"><title>Vert.x中国用户组QQ群</title><path d="M21.395 15.035a39.548 39.548 0 0 0-.803-2.264l-1.079-2.695c.001-.032.014-.562.014-.836C19.526 4.632 17.351 0 12 0S4.474 4.632 4.474 9.241c0 .274.013.804.014.836l-1.08 2.695a38.97 38.97 0 0 0-.802 2.264c-1.021 3.283-.69 4.643-.438 4.673.54.065 2.103-2.472 2.103-2.472 0 1.469.756 3.387 2.394 4.771-.612.188-1.363.479-1.845.835-.434.32-.379.646-.301.778.343.578 5.883.369 7.482.189 1.6.18 7.14.389 7.483-.189.078-.132.132-.458-.301-.778-.483-.356-1.233-.646-1.846-.836 1.637-1.384 2.393-3.302 2.393-4.771 0 0 1.563 2.537 2.103 2.472.251-.03.581-1.39-.438-4.673zM12.662 4.846c.039-1.052.659-1.878 1.385-1.846s1.281.912 1.242 1.964c-.039 1.051-.659 1.878-1.385 1.846s-1.282-.912-1.242-1.964zM9.954 3c.725-.033 1.345.794 1.384 1.846.04 1.052-.517 1.931-1.242 1.963-.726.033-1.346-.794-1.385-1.845C8.672 3.912 9.228 3.033 9.954 3zM7.421 8.294c.194-.43 2.147-.908 4.566-.908h.026c2.418 0 4.372.479 4.566.908a.14.14 0 0 1 .014.061c0 .031-.01.059-.026.083-.163.238-2.333 1.416-4.553 1.416h-.026c-2.221 0-4.39-1.178-4.553-1.416a.136.136 0 0 1-.014-.144zm10.422 8.622c-.22 3.676-2.403 5.987-5.774 6.021h-.137c-3.37-.033-5.554-2.345-5.773-6.021-.081-1.35.001-2.496.147-3.43.318.063.638.122.958.176v3.506s1.658.334 3.318.103v-3.225c.488.027.96.04 1.406.034h.025c1.678.021 3.714-.204 5.683-.594.146.934.227 2.08.147 3.43zM10.48 5.804c.313-.041.542-.409.508-.825-.033-.415-.314-.72-.629-.679-.313.04-.541.409-.508.824.034.417.315.72.629.68zM14.479 5.156c.078.037.221.042.289-.146.035-.095.025-.165-.009-.214-.023-.033-.133-.118-.371-.176-.904-.22-1.341.384-1.405.499-.04.072-.012.176.056.227.067.051.139.037.179-.006.58-.628 1.21-.208 1.261-.184z"></path></svg></a></div></div></div></div></header><div class="page-content docs-content"><div class="container"><div class="docs-content-wrapper"><aside class=""><div class="docs-content-wrapper-sidebar"><div class="search-panel"><div class="search"><input type="text" placeholder="Search..." value=""/><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="search-icon"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="search-icon-delete"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg></div><ul class="search-results"></ul><div class="search-results-none">No results.</div></div><div class="docs-content-toc"><div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_mongo_auth_provider_implementation">Mongo Auth Provider implementation</a></li>
<li><a href="#_vertx_auth_jdbc_and_gdpr">Vertx Auth JDBC and GDPR</a></li>
<li><a href="#_authentication">Authentication</a></li>
<li><a href="#_authorisation_permission_role_model">Authorisation - Permission-Role Model</a></li>
</ul>
</div></div></div></aside><div class="docs-content-sidebar-toggle"><div style="position:relative"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-list"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-x"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></div></div><div class="docs-content-inner"><div class="docs-content-metadata"><div class="docs-content-metadata-left"><div><a href="https://vertx.io/docs/apidocs"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path></svg> API</a></div><span class="docs-content-metadata-version"><div class="dropdown"><a class="dropdown-title">v4.1.0<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><ul class="dropdown-menu align-right"></ul></div></span></div></div><div>
<div class="sect1">
<h2 id="_mongo_auth_provider_implementation"><a class="anchor" href="#_mongo_auth_provider_implementation"></a>Mongo Auth Provider implementation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We provide an implementation of <code><a href="../../scaladocs/io/vertx/scala/ext/auth/AuthProvider.html">AuthProvider</a></code> which uses the Vert.x <code><a href="../../scaladocs/io/vertx/scala/ext/mongo/MongoClient.html">MongoClient</a></code>
to perform authentication and authorisation against a MongoDb.</p>
</div>
<div class="paragraph">
<p>To use this project, add the following
dependency to the <em>dependencies</em> section of your build descriptor:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Maven (in your <code>pom.xml</code>):</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.vertx<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>vertx-auth-mongo<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${maven.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Gradle (in your <code>build.gradle</code> file):</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">compile <span class="hljs-string">'io.vertx:vertx-auth-mongo:${maven.version}'</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>To create an instance you first need an instance of <code><a href="../../scaladocs/io/vertx/scala/ext/mongo/MongoClient.html">MongoClient</a></code>. To learn how to create one
of those please consult the documentation for the MongoClient.</p>
</div>
<div class="paragraph">
<p>Once you&#8217;ve got one of those you can create a <code><a href="../../scaladocs/io/vertx/scala/ext/auth/mongo/MongoAuth.html">MongoAuth</a></code> instance as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-scala" data-lang="scala"><span class="hljs-keyword">var</span> client = <span class="hljs-type">MongoClient</span>.createShared(vertx, mongoClientConfig)
<span class="hljs-keyword">var</span> authProperties = <span class="hljs-keyword">new</span> io.vertx.core.json.<span class="hljs-type">JsonObject</span>()
<span class="hljs-keyword">var</span> authProvider = <span class="hljs-type">MongoAuth</span>.create(client, authProperties)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once you&#8217;ve got your instance you can authenticate and authorise with it just like any <code><a href="../../scaladocs/io/vertx/scala/ext/auth/AuthProvider.html">AuthProvider</a></code>.</p>
</div>
<div class="paragraph">
<p>The out of the box config assumes the usage of the collection with name "user", the username stored and read by field "username"
some others.</p>
</div>
<div class="paragraph">
<p>In order to avoid duplicates of user names your "user" collection should have a unique index on "username". In order
to do this you should run the following snippet on your mongo server:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>db.user.createIndex( { username: 1 }, { unique: true } )</pre>
</div>
</div>
<div class="paragraph">
<p>The reason you should add the index is that due to the nature of mongo doing a query first to verify if a username is
already taken and then insert a document cannot be run as an atomic action. Using the index the code will try to
insert the row and fail if duplicate.</p>
</div>
<div class="paragraph">
<p>You can also change all the defaults for the mongo collection and column names using any of the methods:</p>
</div>
<div class="paragraph">
<p><code><a href="../../scaladocs/io/vertx/scala/ext/auth/mongo/MongoAuth.html#setCollectionName()">setCollectionName</a></code>
<code><a href="../../scaladocs/io/vertx/scala/ext/auth/mongo/MongoAuth.html#setUsernameField()">setUsernameField</a></code>
<code><a href="../../scaladocs/io/vertx/scala/ext/auth/mongo/MongoAuth.html#setPasswordField()">setPasswordField</a></code>
<code><a href="../../scaladocs/io/vertx/scala/ext/auth/mongo/MongoAuth.html#setPermissionField()">setPermissionField</a></code>
<code><a href="../../scaladocs/io/vertx/scala/ext/auth/mongo/MongoAuth.html#setRoleField()">setRoleField</a></code>
if you want to adapt that to your needs.</p>
</div>
<div class="paragraph">
<p>The default implementation assumes that the password is stored in the database as a SHA-512 hash after being
concatenated with a salt. It also assumes the salt is stored in the table too. The field, where the salt is
stored can be set by <code><a href="../../scaladocs/io/vertx/scala/ext/auth/mongo/MongoAuth.html#setSaltField()">setSaltField</a></code>, the default is "salt".
You are able to change this behaviour by using <code><a href="../../scaladocs/io/vertx/scala/ext/auth/mongo/HashStrategy.html#setSaltStyle()">setSaltStyle</a></code>.
The HashStrategy you can retrieve by  <code><a href="../../scaladocs/io/vertx/scala/ext/auth/mongo/MongoAuth.html#getHashStrategy()">getHashStrategy</a></code>.
By using this, you are able to set:
<code><a href="todo">NO_SALT</a></code> by which passwords are not crypted and stored
in cleartext. ( see the warning below! )
<code><a href="todo">COLUMN</a></code>, which will create a salt per user and store this
inside the defined column of the user. ( see the warning below! )
<code><a href="todo">EXTERNAL</a></code>, which will store only the crypted password in the
database and will use a salt from external, which you will have to set by <code><a href="../../scaladocs/io/vertx/scala/ext/auth/mongo/HashStrategy.html#setExternalSalt()">setExternalSalt</a></code></p>
</div>
<div class="paragraph">
<p>If you want to override this behaviour you can do so by providing an alternative hash strategy and setting it with
<code><a href="../../scaladocs/io/vertx/scala/ext/auth/mongo/MongoAuth.html#setHashStrategy()">setHashStrategy</a></code></p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">警告</div>
</td>
<td class="content">
It is strongly advised to use the <code><a href="todo">EXTERNAL</a></code> option.
The NO_SALT option is existing for development phase only and even the COLUMN option is not recommended, cause
salt and password are stored inside the same place!
</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">警告</div>
</td>
<td class="content">
As of 2018 OWASP recommends the usage of stronger encryption algorithms to hash user passwords for
this case you can change from the default (preserved for backwards-compatibility) to PBKDF2. For new projects
this should be the standard.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-scala" data-lang="scala"><span class="hljs-keyword">var</span> client = <span class="hljs-type">MongoClient</span>.createShared(vertx, mongoClientConfig)
<span class="hljs-keyword">var</span> authProperties = <span class="hljs-keyword">new</span> io.vertx.core.json.<span class="hljs-type">JsonObject</span>()
<span class="hljs-keyword">var</span> authProvider = <span class="hljs-type">MongoAuth</span>.create(client, authProperties)
authProvider.setHashAlgorithm(<span class="hljs-type">HashAlgorithm</span>.<span class="hljs-type">PBKDF2</span>)</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_vertx_auth_jdbc_and_gdpr"><a class="anchor" href="#_vertx_auth_jdbc_and_gdpr"></a>Vertx Auth JDBC and GDPR</h2>
<div class="sectionbody">
<div class="paragraph">
<p>GDPR is a regulation from the common European Union law. It overrides/supercedes national data protection laws and
extents the previously existing directives. This section of the manual is by no means a thorough walkthrough of the
regulation, it is just a small summary how this component adheres to the requirements. Companies not adhering to the
equirements can be fined on 4% of the turnover or 20 million euro. Therefore we want to make sure that as a user of
Vert.x Auth JDBC you&#8217;re are on the good track to comply.</p>
</div>
<div class="paragraph">
<p>The law defines certain terminology:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Data Subject - Person whose personal data is processed (e.g.: User)</p>
</li>
<li>
<p>Personal Data - Any data about an identifiable or identified person</p>
</li>
<li>
<p>Data Processing - Any operation (manual or automated) on personal data</p>
</li>
<li>
<p>Controller - The entity (company) that requests and uses the data</p>
</li>
<li>
<p>Processors - Any entity that processes data on behalf of a controller (e.g.: cloud service provider)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>GDPR defines the following functionality:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>"Forget me" - Right to erasure</p>
</li>
<li>
<p>Mark profile as restricted - Right to restriction of processing</p>
</li>
<li>
<p>Export data - Right to portability</p>
</li>
<li>
<p>Allow profile editing - Right to rectification</p>
</li>
<li>
<p>See all my data - Right to access</p>
</li>
<li>
<p>Consent checkboxes</p>
</li>
<li>
<p>Age checks</p>
</li>
<li>
<p>Data destruction - Data minimization principle</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This module complies to the GDPR law by not storing any identifiable information about a data subject. The only
reference is the username which is not linked to any personal data.</p>
</div>
<div class="paragraph">
<p>In order to add personal data to your application you should create your own data schema and use the username column
as a reference to your data. As a tip you should have a boolean flag to mark the personal data as restricted to
comply to the right to restriction of processing which means that if you need to handle the data, e.g.: send a bulk
email from a mailing list you are not allowed to do so if the flag is true.</p>
</div>
<div class="paragraph">
<p>The right to erasure does not mean that you must wipe all records from your application, e.g.: in a bank this right
cannot be used to erase a running loan or debt. You are allowed to keep your application data but must erase the
personal data. In case of Vert.x Auth JDBC you should delete your table but can still use a reference to the
username as long as is not possible to link the username to the personal data.</p>
</div>
<div class="paragraph">
<p>Important note is that this must survive backups! As a tip backup the data, and data erasure on different archives so
they can be replayed individually.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_authentication"><a class="anchor" href="#_authentication"></a>Authentication</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When authenticating using this implementation, it assumes <code>username</code> and <code>password</code> fields are present in the
authentication info:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-scala" data-lang="scala"><span class="hljs-keyword">var</span> authInfo = <span class="hljs-keyword">new</span> io.vertx.core.json.<span class="hljs-type">JsonObject</span>().put(<span class="hljs-string">"username"</span>, <span class="hljs-string">"tim"</span>).put(<span class="hljs-string">"password"</span>, <span class="hljs-string">"sausages"</span>)
authProvider.authenticateFuture(authInfo).onComplete{
  <span class="hljs-keyword">case</span> <span class="hljs-type">Success</span>(result) =&gt; {
    <span class="hljs-keyword">var</span> user = result
  }
  <span class="hljs-keyword">case</span> <span class="hljs-type">Failure</span>(cause) =&gt; {
    println(<span class="hljs-string">s"<span class="hljs-subst">$cause</span>"</span>)
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Instead of the <code>username</code> and <code>password</code> field names used in the previous snippet, you should use:
<code><a href="../../scaladocs/io/vertx/scala/ext/auth/mongo/MongoAuth.html#setUsernameCredentialField()">setUsernameCredentialField</a></code> and
<code><a href="../../scaladocs/io/vertx/scala/ext/auth/mongo/MongoAuth.html#setPasswordCredentialField()">setPasswordCredentialField</a></code></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_authorisation_permission_role_model"><a class="anchor" href="#_authorisation_permission_role_model"></a>Authorisation - Permission-Role Model</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Although Vert.x auth itself does not mandate any specific model of permissions (they are just opaque strings), this
implementation assumes a familiar user/role/permission model, where a user can have zero or more roles and a role
can have zero or more permissions.</p>
</div>
<div class="paragraph">
<p>If validating if a user has a particular permission simply pass the permission into.
<code><a href="../../scaladocs/io/vertx/scala/ext/auth/User.html#isAuthorised(java.lang.String)">isAuthorised</a></code> as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-scala" data-lang="scala">user.isAuthorizedFuture(<span class="hljs-string">"commit_code"</span>).onComplete{
  <span class="hljs-keyword">case</span> <span class="hljs-type">Success</span>(result) =&gt; {
    <span class="hljs-keyword">var</span> hasPermission = result
  }
  <span class="hljs-keyword">case</span> <span class="hljs-type">Failure</span>(cause) =&gt; {
    println(<span class="hljs-string">s"<span class="hljs-subst">$cause</span>"</span>)
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If validating that a user has a particular <em>role</em> then you should prefix the argument with the role prefix.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-scala" data-lang="scala">user.isAuthorizedFuture(<span class="hljs-string">s"<span class="hljs-subst">${MongoAuth.ROLE_PREFIX}</span>manager"</span>).onComplete{
  <span class="hljs-keyword">case</span> <span class="hljs-type">Success</span>(result) =&gt; {
    <span class="hljs-keyword">var</span> hasRole = result
  }
  <span class="hljs-keyword">case</span> <span class="hljs-type">Failure</span>(cause) =&gt; {
    println(<span class="hljs-string">s"<span class="hljs-subst">$cause</span>"</span>)
  }
}</code></pre>
</div>
</div>
</div>
</div></div></div></div></div></div><footer><div class="container"><div class="footer-nav-section"><div class="footer-nav-list footer-logo"><a href="/"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAxMjMyLjYgMzE1LjIiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxzdHlsZT4uc3Qwe2ZpbGw6Izc4MmE5MX08L3N0eWxlPjxwYXRoIGQ9Ik0xMjAuOSAyMTQuMkwxOTAuNSAwaDUyLjNsLTk4LjUgMjczLjhIOTguMkwwIDBoNTIuMWw2OC44IDIxNC4yem0yOTEuMi02Mi42SDI5OS42djg0LjJINDMxdjM4SDI1MlYwaDE3Ny43djM4LjRIMjk5LjZWMTE0aDExMi41djM3LjZ6bTgzLjctMTEzLjJINTQ2YzE2LjUuMyAyOSA0LjQgMzcuMyAxMi40IDguMyA4IDEyLjUgMTkuNCAxMi41IDM0IDAgMTQtNC41IDI1LjEtMTMuNSAzMy4yLTkgOC4xLTIxLjYgMTIuMS0zNy42IDEyLjFoLTI3LjF2MjQuMmw4Ni4xIDExOS41aDUxdi0yLjRsLTc3LjItMTA2LjdjMjQuOS01LjUgNDMuMy0yMS43IDUyLjYtMzUuOSA4LjItMTIuNiAxMy4zLTI3LjcgMTMuMy00NiAwLTI2LjgtOC42LTQ3LjQtMjUuOC02MS41QzYwMC41IDcuMSA1NzYuMSAwIDU0NC41IDBoLTk2LjN2MjczLjhoNDcuNiIvPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMDUyLjMgMTU3LjdsLTQxLjUgNjIuNyAyOS43IDUzLjRoODUuMXoiLz48Y2lyY2xlIGNsYXNzPSJzdDAiIGN4PSI4MjcuOSIgY3k9IjI3NC43IiByPSI0MC41Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTEwMzcgMGwtNDcuNiA3NC4yTDk0OSAwaC04NGw4NS4zIDEzNS44LTY3LjEgMTA1LjdjNS43IDkuNSA5LjEgMjAuNSA5LjIgMzIuNGg1MC4xTDExMjEuMyAwSDEwMzd6Ii8+PHBhdGggZD0iTTc2My41IDI3My44Yy4xLTkuOSAyLjUtMTkuMiA2LjYtMjcuNVYzOC40aDg1LjRWMEg2MzguMnYzOC40aDg0LjZ2MjM1LjRoNDAuN3ptNDE0LTI2Ni45aC0xNS4zdjQyLjJoLTguNVY2LjloLTE1LjJWMGgzOXY2Ljl6TTExOTMgMGwxNC4yIDM3LjdMMTIyMS4zIDBoMTF2NDkuMWgtOC41VjMyLjlsLjgtMjEuNy0xNC41IDM3LjloLTYuMWwtMTQuNS0zNy44LjggMjEuNnYxNi4yaC04LjVWMGgxMS4yeiIvPjwvc3ZnPg==" alt="Vert.x Logo"/></a></div><div class="footer-nav-list"><h5>Eclipse Vert.x</h5><ul class=""><li><a class="navbar-menu-item" href="/docs/">文档</a></li><li><a href="/download/">下载</a></li><li><a href="/blog/">博客</a></li><li><a href="/community/">社区</a></li><li><a href="/translation/">翻译团队</a></li><li><a href="https://github.com/eclipse-vertx/vert.x">GitHub</a></li><li><a href="https://github.com/vertx-china/vertx-web-site">翻译GitHub</a></li></ul></div><div class="footer-nav-list"><h5>资源</h5><ul class=""><li><a href="/faq/">答疑</a></li><li><a href="/channels/">联系渠道</a></li><li><a href="https://how-to.vertx.io/">操作指南</a></li><li><a href="https://start.vertx.io/">应用生成器</a></li></ul></div><div class="footer-nav-list"><h5>Eclipse</h5><ul class=""><li><a href="https://www.eclipse.org/">Eclipse 基金会</a></li><li><a href="https://www.eclipse.org/legal/privacy.php">隐私政策</a></li><li><a href="https://www.eclipse.org/legal/termsofuse.php">使用条款</a></li><li><a href="https://www.eclipse.org/legal/copyright.php">版权代理</a></li><li><a href="https://www.eclipse.org/legal/">法律资源</a></li></ul></div></div><div class="footer-copyright"><div class="footer-copyright-remarks">© <!-- -->2021<!-- --> Eclipse Vert.x™<br/>Eclipse Vert.x™ 是开源的，并在<a href="https://creativecommons.org/licenses/by-sa/3.0/" target="_blank" rel="noopener noreferrer">Eclipse Public License 2.0</a>和<a href="https://www.apache.org/licenses/LICENSE-2.0.html" target="_blank" rel="noopener noreferrer">Apache License 2.0</a>协议下获得了双重许可。<br class="footer-copyright-break"/>网站由 <a href="https://michelkraemer.com" target="_blank" rel="noopener noreferrer">Michel Krämer</a> 设计。</div><div class="footer-copyright-eclipse-logo"><a href="https://www.eclipse.org/" target="_blank" rel="noopener noreferrer"><img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCAyODEuMyA5MS4xIiB4bWw6c3BhY2U9InByZXNlcnZlIj48c3R5bGU+LnN0MHtmaWxsOiNmNzk0MjJ9LnN0MXtmaWxsOiMzZDNjM2J9PC9zdHlsZT48ZyBpZD0iTGF5ZXJfMV8xXyI+PHBhdGggY2xhc3M9InN0MCIgZD0iTTI2NS43IDg0TDI1NyA3M2gtMi43djE3LjdoMy4zdi0xMmw5LjMgMTJoMi4xVjczaC0zLjN2MTF6bS0zMi40LTguM2M0LjIgMCA1LjggMy4zIDUuOCA2LjNzLTEuNiA2LTUuOCA2LTUuNy0zLjEtNS44LTYgMS43LTYuMyA1LjgtNi4zem0wLTNjLTYuMSAwLTkuMSA0LjctOS4xIDkuMyAwIDQuNyAyLjkgOS4xIDkuMSA5LjFzOS00LjYgOS4xLTkuMi0zLTkuMi05LjEtOS4yem0tMjEuMiAxOFY3M2gtMy4zdjE3LjdoMy4zem0tMjMuNiAwaDMuM1Y3Nmg1LjZ2LTNoLTE0LjZ2M2g1LjZsLjEgMTQuN3ptLTE4LjktNi41SDE2M2wzLjMtNy42IDMuMyA3LjZ6bTIuOCA2LjVoMy42TDE2OC4yIDczaC0zLjZsLTggMTcuN2gzLjZsMS41LTMuM2g5LjNsMS40IDMuM3ptLTM4LTE0LjZoMy42YzMuOSAwIDUuNSAyLjggNS41IDUuNS4xIDIuOC0xLjUgNS44LTUuNSA1LjhoLTMuNlY3Ni4xem0zLjctMy4xaC02Ljl2MTcuN2g2LjljNi4yIDAgOC45LTQuNSA4LjktOXMtMi44LTguNy04LjktOC43em0tMjIuNCAxMUwxMDcgNzNoLTIuN3YxNy43aDMuM3YtMTJsOS4zIDEyaDIuMVY3M2gtMy4zdjExek04OC4yIDczdjEwLjJjMCAzLTEuNiA0LjktNC4zIDQuOXMtNC42LTEuNy00LjYtNC45VjczSDc2djEwLjFjMCA1LjMgMy42IDcuOSA3LjkgNy45IDQuNCAwIDcuNy0yLjcgNy43LTcuOVY3M2gtMy40em0tMzMgMi43YzQuMiAwIDUuOCAzLjMgNS44IDYuM3MtMS42IDYtNS44IDYtNS43LTMuMS01LjgtNiAxLjctNi4zIDUuOC02LjN6bTAtM2MtNi4xIDAtOS4xIDQuNy05LjEgOS4zczIuOSA5LjEgOS4xIDkuMSA5LTQuNiA5LjEtOS4yLTMtOS4yLTkuMS05LjJ6bS0yOS43IDE4di02LjVoOC45di0zLjFoLTguOXYtNC44aDkuNFY3M0gyMi4ydjE3LjZoMy4zeiIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yNjkuNCA1NC40aC0yMi4ydi04LjloMjEuNHYtNi45aC0yMS40di05LjFoMjIuMnYtNy4yaC0yOS42djM5LjVoMjkuNnYtNy40em0tNDAtMjUuNmMtMy02LjEtOS40LTcuOC0xNS41LTcuOC03LjMgMC0xNS4zIDMuNC0xNS4zIDExLjUgMCA4LjkgNy40IDExIDE1LjUgMTIgNS4yLjYgOS4xIDIuMSA5LjEgNS44IDAgNC4zLTQuNCA1LjktOS4xIDUuOXMtOS40LTEuOS0xMS4xLTYuM2wtNi4yIDMuMmMyLjkgNy4yIDkuMSA5LjcgMTcuMiA5LjcgOC44IDAgMTYuNi0zLjggMTYuNi0xMi42IDAtOS40LTcuNy0xMS42LTE1LjktMTIuNi00LjctLjYtOC44LTEuNS04LjgtNSAwLTIuOSAyLjYtNS4yIDguMi01LjIgNC4zIDAgOCAyLjIgOS40IDQuNGw1LjktM3pNMTc2IDIyLjJjLTYuMi0uMS0xMi40IDAtMTguNiAwdjM5LjVoNy40VjUwLjFIMTc2YzE5LjQgMCAxOS40LTI3LjkgMC0yNy45em0tMTEuMSA3LjFIMTc2YzkuNSAwIDkuNSAxNCAwIDE0aC0xMS4ybC4xLTE0em0tMTggMzIuNVYyMi4yaC03LjR2MzkuNWw3LjQuMXptLTQ0LTM5LjZ2MzkuNWgyNy43di02LjloLTIwLjNWMjIuMmgtNy40ek05MC43IDUxLjdjLTIuNyAyLjUtNi4yIDQtOS45IDQtOS44IDAtMTMuNS02LjgtMTMuNi0xMy40czQuMS0xMy43IDEzLjYtMTMuN2MzLjUtLjEgNyAxLjMgOS41IDMuN2w1LTQuOGMtMy44LTMuOS05LjEtNi0xNC41LTYtMTQuMyAwLTIxIDEwLjUtMjAuOSAyMC44czYuMyAyMC4zIDIwLjkgMjAuM2M1LjYuMSAxMS0yIDE1LTUuOWwtNS4xLTV6bS0zOSAyLjdIMjkuNXYtOC45aDIxLjR2LTYuOUgyOS41di05LjFoMjIuMnYtNy4ySDIyLjJ2MzkuNWgyOS42bC0uMS03LjR6Ii8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTkuOCAxOC4yQzE4LjggNC4xIDM2LjktLjggNTIuMSA2bC0xLS43QzM1LjctNC42IDE1LjItLjEgNS4zIDE1LjNzLTUuNCAzNS45IDEwIDQ1LjhsMS4xLjZDMy44IDUwLjguOCAzMi4zIDkuOCAxOC4yeiIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yNzIuMiAyNi4xYzAtMi41IDIuMS00LjYgNC42LTQuNiAyLjUgMCA0LjYgMi4xIDQuNiA0LjYgMCAyLjUtMi4xIDQuNi00LjYgNC42LTIuNiAwLTQuNi0yLjEtNC42LTQuNnptOC42IDBjMC0yLjItMS44LTQuMS00LTQuMXMtNC4xIDEuOC00LjEgNC4xYzAgMi4yIDEuNyA0IDMuOSA0LjFoLjFjMi4zIDAgNC4xLTEuOCA0LjEtNC4xem0tNi0yLjVoMi4zYzEuMSAwIDEuOS41IDEuOSAxLjYgMCAuNy0uNCAxLjMtMS4xIDEuNWwxLjIgMS43aC0xLjRsLTEtMS41aC0uN3YxLjVoLTEuMWwtLjEtNC44em0yLjIgMi4zYy41IDAgLjgtLjMuOC0uN3MtLjMtLjctLjgtLjdoLTF2MS4zbDEgLjF6Ii8+PC9nPjwvc3ZnPg==" alt="Eclipse foundation Logo"/></a></div></div></div></footer></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"slug":"3.9.7/vertx-auth-mongo/scala","title":"Mongo Auth Provider implementation","fallbackGitHubStars":null,"toc":"\u003cdiv id=\"toc\" class=\"toc\"\u003e\n\u003cdiv id=\"toctitle\"\u003eTable of Contents\u003c/div\u003e\n\u003cul class=\"sectlevel1\"\u003e\n\u003cli\u003e\u003ca href=\"#_mongo_auth_provider_implementation\"\u003eMongo Auth Provider implementation\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_vertx_auth_jdbc_and_gdpr\"\u003eVertx Auth JDBC and GDPR\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_authentication\"\u003eAuthentication\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#_authorisation_permission_role_model\"\u003eAuthorisation - Permission-Role Model\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e","contents":"\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_mongo_auth_provider_implementation\"\u003e\u003ca class=\"anchor\" href=\"#_mongo_auth_provider_implementation\"\u003e\u003c/a\u003eMongo Auth Provider implementation\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eWe provide an implementation of \u003ccode\u003e\u003ca href=\"../../scaladocs/io/vertx/scala/ext/auth/AuthProvider.html\"\u003eAuthProvider\u003c/a\u003e\u003c/code\u003e which uses the Vert.x \u003ccode\u003e\u003ca href=\"../../scaladocs/io/vertx/scala/ext/mongo/MongoClient.html\"\u003eMongoClient\u003c/a\u003e\u003c/code\u003e\nto perform authentication and authorisation against a MongoDb.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eTo use this project, add the following\ndependency to the \u003cem\u003edependencies\u003c/em\u003e section of your build descriptor:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eMaven (in your \u003ccode\u003epom.xml\u003c/code\u003e):\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-xml\" data-lang=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\n \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003eio.vertx\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003egroupId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003evertx-auth-mongo\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eartifactId\u003c/span\u003e\u0026gt;\u003c/span\u003e\n \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e${maven.version}\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eversion\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003edependency\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eGradle (in your \u003ccode\u003ebuild.gradle\u003c/code\u003e file):\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-groovy\" data-lang=\"groovy\"\u003ecompile \u003cspan class=\"hljs-string\"\u003e'io.vertx:vertx-auth-mongo:${maven.version}'\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eTo create an instance you first need an instance of \u003ccode\u003e\u003ca href=\"../../scaladocs/io/vertx/scala/ext/mongo/MongoClient.html\"\u003eMongoClient\u003c/a\u003e\u003c/code\u003e. To learn how to create one\nof those please consult the documentation for the MongoClient.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eOnce you\u0026#8217;ve got one of those you can create a \u003ccode\u003e\u003ca href=\"../../scaladocs/io/vertx/scala/ext/auth/mongo/MongoAuth.html\"\u003eMongoAuth\u003c/a\u003e\u003c/code\u003e instance as follows:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-scala\" data-lang=\"scala\"\u003e\u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e client = \u003cspan class=\"hljs-type\"\u003eMongoClient\u003c/span\u003e.createShared(vertx, mongoClientConfig)\n\u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e authProperties = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e io.vertx.core.json.\u003cspan class=\"hljs-type\"\u003eJsonObject\u003c/span\u003e()\n\u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e authProvider = \u003cspan class=\"hljs-type\"\u003eMongoAuth\u003c/span\u003e.create(client, authProperties)\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eOnce you\u0026#8217;ve got your instance you can authenticate and authorise with it just like any \u003ccode\u003e\u003ca href=\"../../scaladocs/io/vertx/scala/ext/auth/AuthProvider.html\"\u003eAuthProvider\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe out of the box config assumes the usage of the collection with name \"user\", the username stored and read by field \"username\"\nsome others.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIn order to avoid duplicates of user names your \"user\" collection should have a unique index on \"username\". In order\nto do this you should run the following snippet on your mongo server:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre\u003edb.user.createIndex( { username: 1 }, { unique: true } )\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe reason you should add the index is that due to the nature of mongo doing a query first to verify if a username is\nalready taken and then insert a document cannot be run as an atomic action. Using the index the code will try to\ninsert the row and fail if duplicate.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eYou can also change all the defaults for the mongo collection and column names using any of the methods:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003e\u003ccode\u003e\u003ca href=\"../../scaladocs/io/vertx/scala/ext/auth/mongo/MongoAuth.html#setCollectionName()\"\u003esetCollectionName\u003c/a\u003e\u003c/code\u003e\n\u003ccode\u003e\u003ca href=\"../../scaladocs/io/vertx/scala/ext/auth/mongo/MongoAuth.html#setUsernameField()\"\u003esetUsernameField\u003c/a\u003e\u003c/code\u003e\n\u003ccode\u003e\u003ca href=\"../../scaladocs/io/vertx/scala/ext/auth/mongo/MongoAuth.html#setPasswordField()\"\u003esetPasswordField\u003c/a\u003e\u003c/code\u003e\n\u003ccode\u003e\u003ca href=\"../../scaladocs/io/vertx/scala/ext/auth/mongo/MongoAuth.html#setPermissionField()\"\u003esetPermissionField\u003c/a\u003e\u003c/code\u003e\n\u003ccode\u003e\u003ca href=\"../../scaladocs/io/vertx/scala/ext/auth/mongo/MongoAuth.html#setRoleField()\"\u003esetRoleField\u003c/a\u003e\u003c/code\u003e\nif you want to adapt that to your needs.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe default implementation assumes that the password is stored in the database as a SHA-512 hash after being\nconcatenated with a salt. It also assumes the salt is stored in the table too. The field, where the salt is\nstored can be set by \u003ccode\u003e\u003ca href=\"../../scaladocs/io/vertx/scala/ext/auth/mongo/MongoAuth.html#setSaltField()\"\u003esetSaltField\u003c/a\u003e\u003c/code\u003e, the default is \"salt\".\nYou are able to change this behaviour by using \u003ccode\u003e\u003ca href=\"../../scaladocs/io/vertx/scala/ext/auth/mongo/HashStrategy.html#setSaltStyle()\"\u003esetSaltStyle\u003c/a\u003e\u003c/code\u003e.\nThe HashStrategy you can retrieve by  \u003ccode\u003e\u003ca href=\"../../scaladocs/io/vertx/scala/ext/auth/mongo/MongoAuth.html#getHashStrategy()\"\u003egetHashStrategy\u003c/a\u003e\u003c/code\u003e.\nBy using this, you are able to set:\n\u003ccode\u003e\u003ca href=\"todo\"\u003eNO_SALT\u003c/a\u003e\u003c/code\u003e by which passwords are not crypted and stored\nin cleartext. ( see the warning below! )\n\u003ccode\u003e\u003ca href=\"todo\"\u003eCOLUMN\u003c/a\u003e\u003c/code\u003e, which will create a salt per user and store this\ninside the defined column of the user. ( see the warning below! )\n\u003ccode\u003e\u003ca href=\"todo\"\u003eEXTERNAL\u003c/a\u003e\u003c/code\u003e, which will store only the crypted password in the\ndatabase and will use a salt from external, which you will have to set by \u003ccode\u003e\u003ca href=\"../../scaladocs/io/vertx/scala/ext/auth/mongo/HashStrategy.html#setExternalSalt()\"\u003esetExternalSalt\u003c/a\u003e\u003c/code\u003e\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIf you want to override this behaviour you can do so by providing an alternative hash strategy and setting it with\n\u003ccode\u003e\u003ca href=\"../../scaladocs/io/vertx/scala/ext/auth/mongo/MongoAuth.html#setHashStrategy()\"\u003esetHashStrategy\u003c/a\u003e\u003c/code\u003e\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"admonitionblock warning\"\u003e\n\u003ctable\u003e\n\u003ctr\u003e\n\u003ctd class=\"icon\"\u003e\n\u003cdiv class=\"title\"\u003e警告\u003c/div\u003e\n\u003c/td\u003e\n\u003ctd class=\"content\"\u003e\nIt is strongly advised to use the \u003ccode\u003e\u003ca href=\"todo\"\u003eEXTERNAL\u003c/a\u003e\u003c/code\u003e option.\nThe NO_SALT option is existing for development phase only and even the COLUMN option is not recommended, cause\nsalt and password are stored inside the same place!\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\n\u003c/div\u003e\n\u003cdiv class=\"admonitionblock warning\"\u003e\n\u003ctable\u003e\n\u003ctr\u003e\n\u003ctd class=\"icon\"\u003e\n\u003cdiv class=\"title\"\u003e警告\u003c/div\u003e\n\u003c/td\u003e\n\u003ctd class=\"content\"\u003e\nAs of 2018 OWASP recommends the usage of stronger encryption algorithms to hash user passwords for\nthis case you can change from the default (preserved for backwards-compatibility) to PBKDF2. For new projects\nthis should be the standard.\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/table\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-scala\" data-lang=\"scala\"\u003e\u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e client = \u003cspan class=\"hljs-type\"\u003eMongoClient\u003c/span\u003e.createShared(vertx, mongoClientConfig)\n\u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e authProperties = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e io.vertx.core.json.\u003cspan class=\"hljs-type\"\u003eJsonObject\u003c/span\u003e()\n\u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e authProvider = \u003cspan class=\"hljs-type\"\u003eMongoAuth\u003c/span\u003e.create(client, authProperties)\nauthProvider.setHashAlgorithm(\u003cspan class=\"hljs-type\"\u003eHashAlgorithm\u003c/span\u003e.\u003cspan class=\"hljs-type\"\u003ePBKDF2\u003c/span\u003e)\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_vertx_auth_jdbc_and_gdpr\"\u003e\u003ca class=\"anchor\" href=\"#_vertx_auth_jdbc_and_gdpr\"\u003e\u003c/a\u003eVertx Auth JDBC and GDPR\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eGDPR is a regulation from the common European Union law. It overrides/supercedes national data protection laws and\nextents the previously existing directives. This section of the manual is by no means a thorough walkthrough of the\nregulation, it is just a small summary how this component adheres to the requirements. Companies not adhering to the\nequirements can be fined on 4% of the turnover or 20 million euro. Therefore we want to make sure that as a user of\nVert.x Auth JDBC you\u0026#8217;re are on the good track to comply.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe law defines certain terminology:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eData Subject - Person whose personal data is processed (e.g.: User)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003ePersonal Data - Any data about an identifiable or identified person\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eData Processing - Any operation (manual or automated) on personal data\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eController - The entity (company) that requests and uses the data\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eProcessors - Any entity that processes data on behalf of a controller (e.g.: cloud service provider)\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eGDPR defines the following functionality:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"ulist\"\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\"Forget me\" - Right to erasure\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eMark profile as restricted - Right to restriction of processing\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eExport data - Right to portability\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eAllow profile editing - Right to rectification\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eSee all my data - Right to access\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eConsent checkboxes\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eAge checks\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eData destruction - Data minimization principle\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThis module complies to the GDPR law by not storing any identifiable information about a data subject. The only\nreference is the username which is not linked to any personal data.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIn order to add personal data to your application you should create your own data schema and use the username column\nas a reference to your data. As a tip you should have a boolean flag to mark the personal data as restricted to\ncomply to the right to restriction of processing which means that if you need to handle the data, e.g.: send a bulk\nemail from a mailing list you are not allowed to do so if the flag is true.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eThe right to erasure does not mean that you must wipe all records from your application, e.g.: in a bank this right\ncannot be used to erase a running loan or debt. You are allowed to keep your application data but must erase the\npersonal data. In case of Vert.x Auth JDBC you should delete your table but can still use a reference to the\nusername as long as is not possible to link the username to the personal data.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eImportant note is that this must survive backups! As a tip backup the data, and data erasure on different archives so\nthey can be replayed individually.\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_authentication\"\u003e\u003ca class=\"anchor\" href=\"#_authentication\"\u003e\u003c/a\u003eAuthentication\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eWhen authenticating using this implementation, it assumes \u003ccode\u003eusername\u003c/code\u003e and \u003ccode\u003epassword\u003c/code\u003e fields are present in the\nauthentication info:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-scala\" data-lang=\"scala\"\u003e\u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e authInfo = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e io.vertx.core.json.\u003cspan class=\"hljs-type\"\u003eJsonObject\u003c/span\u003e().put(\u003cspan class=\"hljs-string\"\u003e\"username\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"tim\"\u003c/span\u003e).put(\u003cspan class=\"hljs-string\"\u003e\"password\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"sausages\"\u003c/span\u003e)\nauthProvider.authenticateFuture(authInfo).onComplete{\n  \u003cspan class=\"hljs-keyword\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-type\"\u003eSuccess\u003c/span\u003e(result) =\u0026gt; {\n    \u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e user = result\n  }\n  \u003cspan class=\"hljs-keyword\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-type\"\u003eFailure\u003c/span\u003e(cause) =\u0026gt; {\n    println(\u003cspan class=\"hljs-string\"\u003es\"\u003cspan class=\"hljs-subst\"\u003e$cause\u003c/span\u003e\"\u003c/span\u003e)\n  }\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eInstead of the \u003ccode\u003eusername\u003c/code\u003e and \u003ccode\u003epassword\u003c/code\u003e field names used in the previous snippet, you should use:\n\u003ccode\u003e\u003ca href=\"../../scaladocs/io/vertx/scala/ext/auth/mongo/MongoAuth.html#setUsernameCredentialField()\"\u003esetUsernameCredentialField\u003c/a\u003e\u003c/code\u003e and\n\u003ccode\u003e\u003ca href=\"../../scaladocs/io/vertx/scala/ext/auth/mongo/MongoAuth.html#setPasswordCredentialField()\"\u003esetPasswordCredentialField\u003c/a\u003e\u003c/code\u003e\u003c/p\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"sect1\"\u003e\n\u003ch2 id=\"_authorisation_permission_role_model\"\u003e\u003ca class=\"anchor\" href=\"#_authorisation_permission_role_model\"\u003e\u003c/a\u003eAuthorisation - Permission-Role Model\u003c/h2\u003e\n\u003cdiv class=\"sectionbody\"\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eAlthough Vert.x auth itself does not mandate any specific model of permissions (they are just opaque strings), this\nimplementation assumes a familiar user/role/permission model, where a user can have zero or more roles and a role\ncan have zero or more permissions.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIf validating if a user has a particular permission simply pass the permission into.\n\u003ccode\u003e\u003ca href=\"../../scaladocs/io/vertx/scala/ext/auth/User.html#isAuthorised(java.lang.String)\"\u003eisAuthorised\u003c/a\u003e\u003c/code\u003e as follows:\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-scala\" data-lang=\"scala\"\u003euser.isAuthorizedFuture(\u003cspan class=\"hljs-string\"\u003e\"commit_code\"\u003c/span\u003e).onComplete{\n  \u003cspan class=\"hljs-keyword\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-type\"\u003eSuccess\u003c/span\u003e(result) =\u0026gt; {\n    \u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e hasPermission = result\n  }\n  \u003cspan class=\"hljs-keyword\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-type\"\u003eFailure\u003c/span\u003e(cause) =\u0026gt; {\n    println(\u003cspan class=\"hljs-string\"\u003es\"\u003cspan class=\"hljs-subst\"\u003e$cause\u003c/span\u003e\"\u003c/span\u003e)\n  }\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv class=\"paragraph\"\u003e\n\u003cp\u003eIf validating that a user has a particular \u003cem\u003erole\u003c/em\u003e then you should prefix the argument with the role prefix.\u003c/p\u003e\n\u003c/div\u003e\n\u003cdiv class=\"listingblock\"\u003e\n\u003cdiv class=\"content\"\u003e\n\u003cpre class=\"highlight\"\u003e\u003ccode class=\"language-scala\" data-lang=\"scala\"\u003euser.isAuthorizedFuture(\u003cspan class=\"hljs-string\"\u003es\"\u003cspan class=\"hljs-subst\"\u003e${MongoAuth.ROLE_PREFIX}\u003c/span\u003emanager\"\u003c/span\u003e).onComplete{\n  \u003cspan class=\"hljs-keyword\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-type\"\u003eSuccess\u003c/span\u003e(result) =\u0026gt; {\n    \u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e hasRole = result\n  }\n  \u003cspan class=\"hljs-keyword\"\u003ecase\u003c/span\u003e \u003cspan class=\"hljs-type\"\u003eFailure\u003c/span\u003e(cause) =\u0026gt; {\n    println(\u003cspan class=\"hljs-string\"\u003es\"\u003cspan class=\"hljs-subst\"\u003e$cause\u003c/span\u003e\"\u003c/span\u003e)\n  }\n}\u003c/code\u003e\u003c/pre\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003c/div\u003e","version":"3.9.7"},"__N_SSG":true},"page":"/docs/[[...slug]]","query":{"slug":["3.9.7","vertx-auth-mongo","scala"]},"buildId":"ITwMjYEVgJty6mtL6XQ6r","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-9a5c89434732593ca2fd.js"></script><script src="/_next/static/chunks/main-b6e20584df76f29b6f35.js" async=""></script><script src="/_next/static/chunks/webpack-d7b2fb72fb7257504a38.js" async=""></script><script src="/_next/static/chunks/framework.fcef98db13e2318579fb.js" async=""></script><script src="/_next/static/chunks/commons.5b8771ac6e8a338f82f1.js" async=""></script><script src="/_next/static/chunks/styles.7064a0f84b2a7c13404a.js" async=""></script><script src="/_next/static/chunks/pages/_app-3dbbc9c041333077c167.js" async=""></script><script src="/_next/static/chunks/5df0631eea625b022d3730b3f1bf573e1b8deb37.2c5d42edba8dda0b0ba3.js" async=""></script><script src="/_next/static/chunks/31acfd8439b7c9eee4abe9f59c7500d6c943ee0d.ac00e02121fc7eb66ce5.js" async=""></script><script src="/_next/static/chunks/pages/docs/%5B%5B...slug%5D%5D-3a425d1828d3af7aa498.js" async=""></script><script src="/_next/static/ITwMjYEVgJty6mtL6XQ6r/_buildManifest.js" async=""></script><script src="/_next/static/ITwMjYEVgJty6mtL6XQ6r/_ssgManifest.js" async=""></script></body></html>