{"pageProps":{"categories":["releases","guides","news"],"post":{"meta":{"title":"The RSS reader tutorial (Step 2)","category":"guides","authors":[{"name":"Pavel Drankov","github_id":"Sammers21"}],"summary":"In this second installment of our Vert.x Cassandra Client tutorial, we will add an endpoint that produces an array of RSS channels for a given user ID."},"date":"2018-09-05","slug":"the-rss-reader-tutorial-step-2","readingTime":{"text":"3 min read","minutes":2.375,"time":142500,"words":475},"content":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"In \", mdx(Link, {\n    href: \"/blog/the-rss-reader-tutorial/\",\n    passHref: true,\n    mdxType: \"Link\"\n  }, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"\"\n  }), \"the pre\\xADvi\\xADous step\")), \", we have suc\\xADcess\\xADfully im\\xADple\\xADmented the first end\\xADpoint\\nof the RSS reader app.\"), mdx(\"p\", null, \"The RSS reader ex\\xADam\\xADple as\\xADsumes im\\xADple\\xADment\\xADing 3 end\\xADpoints. This ar\\xADti\\xADcle is ded\\xADi\\xADcated to im\\xADple\\xADment\\xADing the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"GET /user/{user_id}/rss_channels\"), \" end\\xADpoint.\"), mdx(\"p\", null, \"Be\\xADfore com\\xADplet\\xADing this step, make sure your are in the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"step_2\"), \" git branch:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-better-shell\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"$\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"bash\"\n  }), \" git checkout step_2\"), \"\\n\")), mdx(\"h2\", {\n    \"id\": \"implementing-the-second-endpoint\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#implementing-the-second-endpoint\"\n  })), \"Implementing the second endpoint\"), mdx(\"p\", null, \"The sec\\xADond end\\xADpoint pro\\xADduces an array of RSS chan\\xADnels by given \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"user_id\"), \".\"), mdx(\"p\", null, \"We need to ex\\xADe\\xADcute the two fol\\xADlow\\xADing queries to:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Fetch RSS links for a given user:\", mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-sql\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"SELECT\"), \" rss_link \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"FROM\"), \" rss_by_user \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"WHERE\"), \" login = GIVEN_USER_ID ;\\n\"))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Fetch RSS chan\\xADnel de\\xADtails for a given link:\", mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-sql\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"SELECT\"), \" description, title, site_link, rss_link \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"FROM\"), \" channel_info_by_rss_link \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"WHERE\"), \" rss_link = GIVEN_LINK ;\\n\")))), mdx(\"h2\", {\n    \"id\": \"implementation\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#implementation\"\n  })), \"Implementation\"), mdx(\"p\", null, \"The end\\xADpoint al\\xADlows the the front-\\u200Bend app to dis\\xADplay the list of RSS feeds a user sub\\xADscribed on. When the end\\xADpoint is ac\\xADcessed, the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"AppVerticle#getRssChannels\"), \" method is called. We can im\\xADple\\xADment this method in this way:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"private\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"void\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"getRssChannels\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"(RoutingContext ctx)\"), \" \"), \"{\\n    String userId = ctx.request().getParam(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"user_id\\\"\"), \");\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (userId == \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"null\"), \") {\\n        responseWithInvalidRequest(ctx);\\n    } \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"else\"), \" {\\n        Future<List<Row>> future = Future.future();\\n        client.executeWithFullFetch(selectRssLinksByLogin.bind(userId), future);\\n        future.compose(rows -> {\\n            List<String> links = rows.stream()\\n                    .map(row -> row.getString(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"0\"), \"))\\n                    .collect(Collectors.toList());\\n\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"return\"), \" CompositeFuture.all(\\n                    links.stream().map(selectChannelInfo::bind).map(statement -> {\\n                        Future<List<Row>> channelInfoRow = Future.future();\\n                        client.executeWithFullFetch(statement, channelInfoRow);\\n                        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"return\"), \" channelInfoRow;\\n                    }).collect(Collectors.toList())\\n            );\\n        }).setHandler(h -> {\\n            \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (h.succeeded()) {\\n                CompositeFuture result = h.result();\\n                List<List<Row>> results = result.list();\\n                List<Row> list = results.stream()\\n                        .flatMap(List::stream)\\n                        .collect(Collectors.toList());\\n                JsonObject responseJson = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" JsonObject();\\n                JsonArray channels = \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" JsonArray();\\n\\n                list.forEach(eachRow -> channels.add(\\n                        \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" JsonObject()\\n                                .put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"description\\\"\"), \", eachRow.getString(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"0\"), \"))\\n                                .put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"title\\\"\"), \", eachRow.getString(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"1\"), \"))\\n                                .put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"link\\\"\"), \", eachRow.getString(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"2\"), \"))\\n                                .put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"rss_link\\\"\"), \", eachRow.getString(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"3\"), \"))\\n                ));\\n\\n                responseJson.put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"channels\\\"\"), \", channels);\\n                ctx.response().end(responseJson.toString());\\n            } \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"else\"), \" {\\n                log.error(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"failed to get rss channels\\\"\"), \", h.cause());\\n                ctx.response().setStatusCode(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-number\"\n  }), \"500\"), \").end(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Unable to retrieve the info from C*\\\"\"), \");\\n            }\\n        });\\n    }\\n}\\n\")), mdx(\"p\", null, \"Also, this method uses \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"selectChannelInfo\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"selectRssLinksByLogin\"), \" fields, they should be ini\\xADtial\\xADized in the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"AppVerticle#prepareNecessaryQueries\"), \" method:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-function\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"private\"), \" Future<Void> \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-title\"\n  }), \"prepareNecessaryQueries\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"hljs-params\"\n  }), \"()\"), \" \"), \"{\\n    Future<PreparedStatement> selectChannelInfoPrepFuture = Future.future();\\n    client.prepare(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"SELECT description, title, site_link, rss_link FROM channel_info_by_rss_link WHERE rss_link = ? ;\\\"\"), \", selectChannelInfoPrepFuture);\\n\\n    Future<PreparedStatement> selectRssLinkByLoginPrepFuture = Future.future();\\n    client.prepare(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"SELECT rss_link FROM rss_by_user WHERE login = ? ;\\\"\"), \", selectRssLinkByLoginPrepFuture);\\n\\n    Future<PreparedStatement> insertNewLinkForUserPrepFuture = Future.future();\\n    client.prepare(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"INSERT INTO rss_by_user (login , rss_link ) VALUES ( ?, ?);\\\"\"), \", insertNewLinkForUserPrepFuture);\\n\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"return\"), \" CompositeFuture.all(\\n            selectChannelInfoPrepFuture.compose(preparedStatement -> {\\n                selectChannelInfo = preparedStatement;\\n                \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"return\"), \" Future.succeededFuture();\\n            }),\\n            selectRssLinkByLoginPrepFuture.compose(preparedStatement -> {\\n                selectRssLinksByLogin = preparedStatement;\\n                \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"return\"), \" Future.succeededFuture();\\n            }),\\n            insertNewLinkForUserPrepFuture.compose(preparedStatement -> {\\n                insertNewLinkForUser = preparedStatement;\\n                \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"return\"), \" Future.succeededFuture();\\n            })\\n    ).mapEmpty();\\n}\\n\")), mdx(\"h2\", {\n    \"id\": \"conclusion\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#conclusion\"\n  })), \"Conclusion\"), mdx(\"p\", null, \"In this part, we have suc\\xADcess\\xADfully im\\xADple\\xADmented the sec\\xADond end\\xADpoint, which al\\xADlows the browser app to ob\\xADtain chan\\xADnels in\\xADfor\\xADma\\xADtion for a spe\\xADcific user. To en\\xADsure that it is work\\xADing fine, point your browser to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"localhost:8080\"), \" and click to the re\\xADfresh but\\xADton. Chan\\xADnel list should ap\\xADpear im\\xADme\\xADdi\\xADately.\"), mdx(\"p\", null, \"If you have any prob\\xADlems with com\\xADplet\\xADing this step you can check\\xADout to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"step_3\"), \", where you can find all changes made for com\\xADplet\\xADing this step:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-better-shell\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-meta\"\n  }), \"$\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"bash\"\n  }), \" git checkout step_3\"), \"\\n\")), mdx(\"p\", null, \"Thanks for read\\xADing this. I hope you en\\xADjoyed read\\xADing this ar\\xADti\\xADcle. See you soon on our \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://gitter.im/eclipse-vertx/vertx-users\"\n  }), \"Git\\xADter chan\\xADnel\"), \"!\"));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"<p>In <a href=\"/blog/the-rss-reader-tutorial/\">the pre­vi­ous step</a>, we have suc­cess­fully im­ple­mented the first end­point\nof the RSS reader app.</p><p>The RSS reader ex­am­ple as­sumes im­ple­ment­ing 3 end­points. This ar­ti­cle is ded­i­cated to im­ple­ment­ing the <code>GET /user/{user_id}/rss_channels</code> end­point.</p><p>Be­fore com­plet­ing this step, make sure your are in the <code>step_2</code> git branch:</p><pre><code class=\"hljs language-better-shell\"><span class=\"hljs-meta\">$</span><span class=\"bash\"> git checkout step_2</span>\n</code></pre><h2 id=\"implementing-the-second-endpoint\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#implementing-the-second-endpoint\"></a>Implementing the second endpoint</h2><p>The sec­ond end­point pro­duces an array of RSS chan­nels by given <code>user_id</code>.</p><p>We need to ex­e­cute the two fol­low­ing queries to:</p><ol><li>Fetch RSS links for a given user:<pre><code class=\"hljs language-sql\"><span class=\"hljs-keyword\">SELECT</span> rss_link <span class=\"hljs-keyword\">FROM</span> rss_by_user <span class=\"hljs-keyword\">WHERE</span> login = GIVEN_USER_ID ;\n</code></pre></li><li>Fetch RSS chan­nel de­tails for a given link:<pre><code class=\"hljs language-sql\"><span class=\"hljs-keyword\">SELECT</span> description, title, site_link, rss_link <span class=\"hljs-keyword\">FROM</span> channel_info_by_rss_link <span class=\"hljs-keyword\">WHERE</span> rss_link = GIVEN_LINK ;\n</code></pre></li></ol><h2 id=\"implementation\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#implementation\"></a>Implementation</h2><p>The end­point al­lows the the front-​end app to dis­play the list of RSS feeds a user sub­scribed on. When the end­point is ac­cessed, the <code>AppVerticle#getRssChannels</code> method is called. We can im­ple­ment this method in this way:</p><pre><code class=\"hljs language-java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">getRssChannels</span><span class=\"hljs-params\">(RoutingContext ctx)</span> </span>{\n    String userId = ctx.request().getParam(<span class=\"hljs-string\">&quot;user_id&quot;</span>);\n    <span class=\"hljs-keyword\">if</span> (userId == <span class=\"hljs-keyword\">null</span>) {\n        responseWithInvalidRequest(ctx);\n    } <span class=\"hljs-keyword\">else</span> {\n        Future&lt;List&lt;Row&gt;&gt; future = Future.future();\n        client.executeWithFullFetch(selectRssLinksByLogin.bind(userId), future);\n        future.compose(rows -&gt; {\n            List&lt;String&gt; links = rows.stream()\n                    .map(row -&gt; row.getString(<span class=\"hljs-number\">0</span>))\n                    .collect(Collectors.toList());\n\n            <span class=\"hljs-keyword\">return</span> CompositeFuture.all(\n                    links.stream().map(selectChannelInfo::bind).map(statement -&gt; {\n                        Future&lt;List&lt;Row&gt;&gt; channelInfoRow = Future.future();\n                        client.executeWithFullFetch(statement, channelInfoRow);\n                        <span class=\"hljs-keyword\">return</span> channelInfoRow;\n                    }).collect(Collectors.toList())\n            );\n        }).setHandler(h -&gt; {\n            <span class=\"hljs-keyword\">if</span> (h.succeeded()) {\n                CompositeFuture result = h.result();\n                List&lt;List&lt;Row&gt;&gt; results = result.list();\n                List&lt;Row&gt; list = results.stream()\n                        .flatMap(List::stream)\n                        .collect(Collectors.toList());\n                JsonObject responseJson = <span class=\"hljs-keyword\">new</span> JsonObject();\n                JsonArray channels = <span class=\"hljs-keyword\">new</span> JsonArray();\n\n                list.forEach(eachRow -&gt; channels.add(\n                        <span class=\"hljs-keyword\">new</span> JsonObject()\n                                .put(<span class=\"hljs-string\">&quot;description&quot;</span>, eachRow.getString(<span class=\"hljs-number\">0</span>))\n                                .put(<span class=\"hljs-string\">&quot;title&quot;</span>, eachRow.getString(<span class=\"hljs-number\">1</span>))\n                                .put(<span class=\"hljs-string\">&quot;link&quot;</span>, eachRow.getString(<span class=\"hljs-number\">2</span>))\n                                .put(<span class=\"hljs-string\">&quot;rss_link&quot;</span>, eachRow.getString(<span class=\"hljs-number\">3</span>))\n                ));\n\n                responseJson.put(<span class=\"hljs-string\">&quot;channels&quot;</span>, channels);\n                ctx.response().end(responseJson.toString());\n            } <span class=\"hljs-keyword\">else</span> {\n                log.error(<span class=\"hljs-string\">&quot;failed to get rss channels&quot;</span>, h.cause());\n                ctx.response().setStatusCode(<span class=\"hljs-number\">500</span>).end(<span class=\"hljs-string\">&quot;Unable to retrieve the info from C*&quot;</span>);\n            }\n        });\n    }\n}\n</code></pre><p>Also, this method uses <code>selectChannelInfo</code> and <code>selectRssLinksByLogin</code> fields, they should be ini­tial­ized in the <code>AppVerticle#prepareNecessaryQueries</code> method:</p><pre><code class=\"hljs language-java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">private</span> Future&lt;Void&gt; <span class=\"hljs-title\">prepareNecessaryQueries</span><span class=\"hljs-params\">()</span> </span>{\n    Future&lt;PreparedStatement&gt; selectChannelInfoPrepFuture = Future.future();\n    client.prepare(<span class=\"hljs-string\">&quot;SELECT description, title, site_link, rss_link FROM channel_info_by_rss_link WHERE rss_link = ? ;&quot;</span>, selectChannelInfoPrepFuture);\n\n    Future&lt;PreparedStatement&gt; selectRssLinkByLoginPrepFuture = Future.future();\n    client.prepare(<span class=\"hljs-string\">&quot;SELECT rss_link FROM rss_by_user WHERE login = ? ;&quot;</span>, selectRssLinkByLoginPrepFuture);\n\n    Future&lt;PreparedStatement&gt; insertNewLinkForUserPrepFuture = Future.future();\n    client.prepare(<span class=\"hljs-string\">&quot;INSERT INTO rss_by_user (login , rss_link ) VALUES ( ?, ?);&quot;</span>, insertNewLinkForUserPrepFuture);\n\n    <span class=\"hljs-keyword\">return</span> CompositeFuture.all(\n            selectChannelInfoPrepFuture.compose(preparedStatement -&gt; {\n                selectChannelInfo = preparedStatement;\n                <span class=\"hljs-keyword\">return</span> Future.succeededFuture();\n            }),\n            selectRssLinkByLoginPrepFuture.compose(preparedStatement -&gt; {\n                selectRssLinksByLogin = preparedStatement;\n                <span class=\"hljs-keyword\">return</span> Future.succeededFuture();\n            }),\n            insertNewLinkForUserPrepFuture.compose(preparedStatement -&gt; {\n                insertNewLinkForUser = preparedStatement;\n                <span class=\"hljs-keyword\">return</span> Future.succeededFuture();\n            })\n    ).mapEmpty();\n}\n</code></pre><h2 id=\"conclusion\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#conclusion\"></a>Conclusion</h2><p>In this part, we have suc­cess­fully im­ple­mented the sec­ond end­point, which al­lows the browser app to ob­tain chan­nels in­for­ma­tion for a spe­cific user. To en­sure that it is work­ing fine, point your browser to <code>localhost:8080</code> and click to the re­fresh but­ton. Chan­nel list should ap­pear im­me­di­ately.</p><p>If you have any prob­lems with com­plet­ing this step you can check­out to <code>step_3</code>, where you can find all changes made for com­plet­ing this step:</p><pre><code class=\"hljs language-better-shell\"><span class=\"hljs-meta\">$</span><span class=\"bash\"> git checkout step_3</span>\n</code></pre><p>Thanks for read­ing this. I hope you en­joyed read­ing this ar­ti­cle. See you soon on our <a href=\"https://gitter.im/eclipse-vertx/vertx-users\">Git­ter chan­nel</a>!</p>","scope":{}}},"prevPost":{"meta":{"title":"Eclipse Vert.x 3.5.4","category":"releases","authors":[{"name":"Julien Viet","github_id":"vietj"}],"summary":"We have just released Vert.x 3.5.4, a bug fix release of Vert.x 3.5.x."},"date":"2018-10-03","slug":"eclipse-vert-x-3-5-4"},"nextPost":{"meta":{"title":"The RSS reader tutorial","category":"guides","authors":[{"name":"Pavel Drankov","github_id":"Sammers21"}],"summary":"In this tutorial, you will learn how to use the Eclipse Vert.x Cassandra client in practice. We will develop an RSS reader with three HTTP endpoints."},"date":"2018-08-20","slug":"the-rss-reader-tutorial"},"relatedPosts":[{"meta":{"title":"The RSS reader tutorial","category":"guides","authors":[{"name":"Pavel Drankov","github_id":"Sammers21"}],"summary":"In this tutorial, you will learn how to use the Eclipse Vert.x Cassandra client in practice. We will develop an RSS reader with three HTTP endpoints."},"date":"2018-08-20","slug":"the-rss-reader-tutorial"},{"meta":{"title":"Easy SSO for Vert.x with Keycloak","category":"guides","authors":[{"name":"Thomas Darimont","github_id":"thomasdarimont"}],"summary":"In this blog post, you'll learn how to implement Single Sign-on with OpenID Connect and how to use Keycloak together with Eclipse Vert.x."},"date":"2020-03-16","slug":"easy-sso-for-vert-x-with-keycloak"},{"meta":{"title":"The RSS reader tutorial (Step 3)","category":"guides","authors":[{"name":"Pavel Drankov","github_id":"Sammers21"}],"summary":"This is the third installment of our Vert.x Cassandra Client tutorial. We will implement the last RSS endpoint serving a list of articles related to a specific channel."},"date":"2018-12-06","slug":"the-rss-reader-tutorial-step-3"}]},"__N_SSG":true}