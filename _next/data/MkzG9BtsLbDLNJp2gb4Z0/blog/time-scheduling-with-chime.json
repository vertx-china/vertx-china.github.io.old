{"pageProps":{"categories":["releases","guides","news"],"post":{"meta":{"title":"Time scheduling with Chime","category":"guides","authors":[{"name":"Lisi","github_id":"LisiLisenok"}],"summary":"Eclipse Vert.x executes periodic and delayed actions with periodic and one-shot timers. Chime is a time scheduler verticle that works on the Vert.x event bus."},"date":"2017-05-09","slug":"time-scheduling-with-chime","readingTime":{"text":"8 min read","minutes":7.34,"time":440400,"words":1468},"content":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Eclipse Vert.x ex\\xADe\\xADcutes pe\\xADri\\xADodic and de\\xADlayed ac\\xADtions with\\n\", mdx(Link, {\n    href: \"/docs/vertx-core/java/#_executing_periodic_and_delayed_actions\",\n    passHref: true,\n    mdxType: \"Link\"\n  }, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"\"\n  }), \"pe\\xADri\\xADodic and one-\\u200Bshot timers\")), \".\\nThis is the base for time sched\\xADul\\xADing and reach fea\\xADture ex\\xADten\\xADsion must be rather in\\xADter\\xADest\\xADing.\\nBe no\\xADti\\xADfied at cer\\xADtain date / time, take into ac\\xADcount hol\\xADi\\xADdays,\\nre\\xADpeat no\\xADti\\xADfi\\xADca\\xADtions until a given date, apply time zone,\\ntake into ac\\xADcount day\\xADlight sav\\xADing time etc.\\nThere are a lot of use\\xADful fea\\xADtures time sched\\xADuler may in\\xADtro\\xADduce to the Vert.x stack.  \"), mdx(\"h2\", {\n    \"id\": \"chime\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#chime\"\n  })), \"Chime\"), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/LisiLisenok/Chime\"\n  }), \"Chime\"), \" is time sched\\xADuler ver\\xADti\\xADcle which works on \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Vert.x\"), \" event bus and pro\\xADvides:  \"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"sched\\xADul\\xADing with \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"cron-\\u200Bstyle\"), \", \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"in\\xADter\\xADval\"), \" or \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"union\"), \" timers:\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"at a cer\\xADtain time of day (to the sec\\xADond);  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"on cer\\xADtain days of the week, month or year;  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"with a given time in\\xADter\\xADval;  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"with nearly any com\\xADbi\\xADna\\xADtion of all of above;  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"re\\xADpeat\\xADing a given num\\xADber of times;  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"re\\xADpeat\\xADing until a given time / date;  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"re\\xADpeat\\xADing in\\xADfi\\xADnitely  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"prox\\xADy\\xADing event bus with con\\xADven\\xADtional in\\xADter\\xADfaces  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"ap\\xADply\\xADing time zones avail\\xADable on \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"JVM\"), \" with day\\xADlight sav\\xADing time taken into ac\\xADcount  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"flex\\xADi\\xADble timers man\\xADage\\xADment sys\\xADtem:  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"group\\xADing timers;  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"defin\\xADing a timer start or end times  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"paus\\xADing / re\\xADsum\\xADing;  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"fire count\\xADing;  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"lis\\xADten\\xADing and send\\xADing mes\\xADsages via event bus with \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"JSON\"), \";  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"em\", {\n    parentName: \"li\"\n  }, \"pub\\xADlish\\xADing\"), \" or \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"send\\xADing\"), \" timer fire event to the ad\\xADdress of your choice.  \")), mdx(Alert, {\n    info: true,\n    mdxType: \"Alert\"\n  }, mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Chime\"), \" is writ\\xADten in \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://ceylon-lang.org\"\n  }), \"Cey\\xADlon\"), \" and is avail\\xADable at\\n\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://herd.ceylon-lang.org/modules/herd.schedule.chime\"\n  }), \"Cey\\xADlon Herd\"), \".\")), mdx(\"h2\", {\n    \"id\": \"running\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#running\"\n  })), \"Running\"), mdx(\"h3\", {\n    \"id\": \"ceylon-users\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#ceylon-users\"\n  })), \"Ceylon users\"), mdx(\"p\", null, \"De\\xADploy \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Chime\"), \" using \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Verticle.deployVerticle\"), \" method.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-Ceylon\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"import\"), \" io.vertx.ceylon.core {vertx}\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"import\"), \" herd.schedule.chime {Chime}\\nChime().deploy(vertx.vertx());\\n\")), mdx(\"p\", null, \"Or with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"vertx.deployVerticle(\\\\\\\"ceylon:herd.schedule.chime/0.2.1\\\\\\\");\"), \"\\nbut en\\xADsure that Cey\\xADlon ver\\xADti\\xADcle fac\\xADtory is avail\\xADable at class path.   \"), mdx(\"h3\", {\n    \"id\": \"java-users\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#java-users\"\n  })), \"Java users\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"En\\xADsure that Cey\\xADlon ver\\xADti\\xADcle fac\\xADtory is avail\\xADable at class path.  \"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Put Cey\\xADlon ver\\xADsions to con\\xADsis\\xADtency. For in\\xADstance, Vert.x 3.4.1 de\\xADpends on Cey\\xADlon 1.3.0\\nwhile Chime 0.2.1 de\\xADpends on Cey\\xADlon 1.3.2. \"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(Link, {\n    href: \"/docs/vertx-core/java/#_deploying_verticles_programmatically\",\n    passHref: true,\n    mdxType: \"Link\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"\"\n  }), \"De\\xADploy ver\\xADti\\xADcle\")), \", like:  \")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-Java\"\n  }), \"vertx.deployVerticle(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"ceylon:herd.schedule.chime/0.2.1\\\"\"), \")\\n\")), mdx(Alert, {\n    info: true,\n    mdxType: \"Alert\"\n  }, mdx(\"p\", null, \"Ex\\xADam\\xADple with Maven is avail\\xADable at \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/LisiLisenok/ChimeJavaExample\"\n  }), \"Github\"), \".\")), mdx(\"h2\", {\n    \"id\": \"schedulers\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#schedulers\"\n  })), \"Schedulers\"), mdx(\"p\", null, \"Well, \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Chime\"), \" ver\\xADti\\xADcle is de\\xADployed. Let\\u2019s see its struc\\xADture.\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"In order to pro\\xADvide flex\\xADi\\xADble and broad ways to man\\xADage tim\\xADing two level ar\\xADchi\\xADtec\\xADture is adopted.\\nIt con\\xADsists of sched\\xADulers and timers. Timer is a unit which fires at a given time.\\nWhile sched\\xADuler is a set or group of timers and pro\\xADvides fol\\xADlow\\xADing:    \"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"cre\\xADat\\xADing and delet\\xADing timers;  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"paus\\xADing / re\\xADsum\\xADing all timers work\\xADing within the sched\\xADuler;  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"info on the run\\xADning timers;  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"de\\xADfault time zone;  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"lis\\xADten\\xADing event bus at the given sched\\xADuler ad\\xADdress for the re\\xADquests to.  \")), mdx(\"p\", null, \"Any timer op\\xADer\\xADates within some sched\\xADuler. And one or sev\\xADeral sched\\xADulers have to be cre\\xADated be\\xADfore start\\xADing sched\\xADul\\xADing.\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"When \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Chime\"), \" ver\\xADti\\xADcle is de\\xADployed it starts lis\\xADten event bus at \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"chime\"), \" ad\\xADdress (can be con\\xADfig\\xADured).\\nIn order to cre\\xADate sched\\xADuler send to this ad\\xADdress a JSON mes\\xADsage.  \"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-json\"\n  }), \"{\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"operation\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"create\\\"\"), \",\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"name\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"scheduler name\\\"\"), \"\\n}\\n\")), mdx(\"p\", null, \"Once sched\\xADuler is cre\\xADated it starts lis\\xADten event bus at \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"sched\\xADuler name\"), \" ad\\xADdress.\\nSend\\xADing mes\\xADsages to \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"chime\"), \" ad\\xADdress or to \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"sched\\xADuler name\"), \" ad\\xADdress are rather equiv\\xADa\\xADlent,\\nex\\xADcept\\xADing that chime ad\\xADdress pro\\xADvides ser\\xADvices for every sched\\xADuler, while sched\\xADuler ad\\xADdress\\npro\\xADvides ser\\xADvices for this par\\xADtic\\xADu\\xADlar sched\\xADuler only.\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"The re\\xADquest sent to the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Chime\"), \" has to con\\xADtain \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"op\\xADer\\xADa\\xADtion\"), \" and \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"name\"), \" keys.\\nName key pro\\xADvides sched\\xADuler or timer name. While op\\xADer\\xADa\\xADtion key shows an ac\\xADtion \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Chime\"), \" has to per\\xADform.\\nThere are only four pos\\xADsi\\xADble op\\xADer\\xADa\\xADtions:  \"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"cre\\xADate - cre\\xADate new sched\\xADuler or timer;  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"delete - delete sched\\xADuler or timer;  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"info - re\\xADquest info on \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"Chime\"), \" or on a par\\xADtic\\xADu\\xADlar sched\\xADuler or timer;  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"state - set or get sched\\xADuler or timer state (run\\xADning, paused or com\\xADpleted).  \")), mdx(\"h2\", {\n    \"id\": \"timers\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#timers\"\n  })), \"Timers\"), mdx(\"p\", null, \"Now we have sched\\xADuler cre\\xADated and timers can be run within. There are two ways to ac\\xADcess a given timer:  \"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Send\\xADing mes\\xADsage to \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"chime\"), \" ad\\xADdress with \\u2018name\\u2019 field set to \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"sched\\xADuler name:timer name\"), \".  \"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Send\\xADing mes\\xADsage to \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"sched\\xADuler name\"), \" ad\\xADdress with \\u2018name\\u2019 field set to ei\\xADther \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"timer name\"), \" or \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"sched\\xADuler name:timer name\"), \".  \")), mdx(\"p\", null, mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://modules.ceylon-lang.org/repo/1/herd/schedule/chime/0.2.1/module-doc/api/index.html#timer-request\"\n  }), \"Timer re\\xADquest\"), \" is rather com\\xADpli\\xADcated and con\\xADtains a lot of de\\xADtails. In this blog post only basic fea\\xADtures are con\\xADsid\\xADered:  \"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-json\"\n  }), \"{\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"operation\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"create\\\"\"), \",\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"name\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"scheduler name:timer name\\\"\"), \",\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"description\\\"\"), \": {}\\n};\\n\")), mdx(\"p\", null, \"This is rather sim\\xADi\\xADlar to re\\xADquest sent to cre\\xADate a sched\\xADuler.\\nThe dif\\xADfer\\xADence is only \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"de\\xADscrip\\xADtion\"), \" field is added.\\nThis de\\xADscrip\\xADtion is an JSON ob\\xADject which iden\\xADti\\xADfies par\\xADtic\\xADu\\xADlar timer type and its de\\xADtails.\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"The other fields not shown here are op\\xADtional and in\\xADcludes:  \"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"ini\\xADtial timer state (paused or run\\xADning);  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"start or end date-\\u200Btime;  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"num\\xADber of re\\xADpeat\\xADing times;  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"is timer mes\\xADsage to be pub\\xADlished or sent;  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"timer fire mes\\xADsage and de\\xADliv\\xADery op\\xADtions;  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"time zone.  \")), mdx(\"h2\", {\n    \"id\": \"timer-descriptions\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#timer-descriptions\"\n  })), \"Timer descriptions\"), mdx(\"p\", null, \"Cur\\xADrently, three types of timers are sup\\xADported:  \"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"In\\xADter\\xADval timer\"), \" which fires after each given time pe\\xADriod (min\\xADi\\xADmum 1 sec\\xADond):  \")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-json\"\n  }), \"{\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"type\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"interval\\\"\"), \",\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"delay\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"timer delay in seconds, Integer\\\"\"), \"\\n};\\n\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Cron style timer\"), \" which is de\\xADfined with cron-\\u200Bstyle:  \")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-json\"\n  }), \"{  \\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"type\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"cron\\\"\"), \",  \\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"seconds\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"seconds in cron style, String\\\"\"), \",  \\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"minutes\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"minutes in cron style, String\\\"\"), \",  \\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"hours\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"hours in cron style, String\\\"\"), \",  \\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"days of month\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"days of month in cron style, String\\\"\"), \",  \\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"months\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"months in cron style, String\\\"\"), \",  \\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"days of week\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"days of week in cron style, String, optional\\\"\"), \",  \\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"years\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"years in cron style, String, optional\\\"\"), \"  \\n};\\n\")), mdx(\"p\", null, \"Cron timer is rather pow\\xADer\\xADful and flex\\xADi\\xADble. In\\xADves\\xADti\\xADgate \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://modules.ceylon-lang.org/repo/1/herd/schedule/chime/0.2.1/module-doc/api/index.html#cron-expression\"\n  }), \"spec\\xADi\\xADfi\\xADca\\xADtion\"), \" for the com\\xADplete list of fea\\xADtures.  \"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Union timer\"), \" which com\\xADbines a num\\xADber of timers into a one:  \")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-json\"\n  }), \"{  \\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"type\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"union\\\"\"), \",  \\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"timers\\\"\"), \": [\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"list of the timer descriptions\\\"\"), \"]  \\n};\\n\")), mdx(\"p\", null, \"Union timer may be use\\xADful to fire at a list of spe\\xADcific dates / times.\"), mdx(\"h2\", {\n    \"id\": \"timer-events\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#timer-events\"\n  })), \"Timer events\"), mdx(\"p\", null, \"Once timer is started it sends or pub\\xADlishes mes\\xADsages to \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"sched\\xADuler name:timer name\"), \" ad\\xADdress in JSON for\\xADmat.\\nTwo types of events are sent:  \"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"fire event which oc\\xADcurs when time reaches next timer value:  \")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-json\"\n  }), \"{  \\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"name\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"scheduler name:timer name, String\\\"\"), \",  \\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"event\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"fire\\\"\"), \",  \\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"count\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"total number of fire times, Integer\\\"\"), \",  \\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"time\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"ISO formated time / date, String\\\"\"), \",  \\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"seconds\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"number of seconds since last minute, Integer\\\"\"), \",  \\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"minutes\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"number of minutes since last hour, Integer\\\"\"), \",  \\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"hours\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"hour of day, Integer\\\"\"), \",  \\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"day of month\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"day of month, Integer\\\"\"), \",  \\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"month\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"month, Integer\\\"\"), \",  \\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"year\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"year, Integer\\\"\"), \",  \\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"time zone\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"time zone the timer works in, String\\\"\"), \"\\n};\\n\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"com\\xADplete event which oc\\xADcurs when timer is ex\\xADhausted by some cri\\xADte\\xADria given at timer cre\\xADate re\\xADquest:  \")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-json\"\n  }), \"{  \\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"name\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"scheduler name:timer name, String\\\"\"), \",  \\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"event\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"complete\\\"\"), \",  \\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-attr\"\n  }), \"\\\"count\\\"\"), \": \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"total number of fire times, Integer\\\"\"), \"  \\n};\\n\")), mdx(\"p\", null, \"Ba\\xADsi\\xADcally, now we know every\\xADthing to be happy with \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Chime\"), \": sched\\xADulers and re\\xADquests to them, timers and timer events.\\nWill see some ex\\xADam\\xADples in the next sec\\xADtion.  \"), mdx(\"h2\", {\n    \"id\": \"examples\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#examples\"\n  })), \"Examples\"), mdx(\"h3\", {\n    \"id\": \"ceylon-example\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#ceylon-example\"\n  })), \"Ceylon example\"), mdx(\"p\", null, \"Let\\u2019s con\\xADsider a timer which has to fire every month at 16-30 last Sun\\xADday.  \"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-Ceylon\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// listen the timer events\"), \"\\neventBus.consumer (\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"my scheduler:my timer\\\"\"), \",\\n  (Throwable|Message<JsonObject?> msg) {\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"if\"), \" (\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"is\"), \" Message<JsonObject?> msg) { print(msg.body()); }\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"else\"), \" { print(msg); }  \\n  }\\n);\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// create scheduler and timer\"), \"\\neventBus.send<JsonObject> (\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"chime\\\"\"), \",\\n  JsonObject {\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"operation\\\"\"), \" -> \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"create\\\"\"), \",\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"name\\\"\"), \" -> \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"my scheduler:my timer\\\"\"), \",\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"description\\\"\"), \" -> JsonObject {\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"type\\\"\"), \" -> \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"cron\\\"\"), \",\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"seconds\\\"\"), \" -> \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"0\\\"\"), \",\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"minutes\\\"\"), \" -> \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"30\\\"\"), \",\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"hours\\\"\"), \" -> \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"16\\\"\"), \",\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"days of month\\\"\"), \" -> \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"*\\\"\"), \",\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"months\\\"\"), \" -> \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"*\\\"\"), \",\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"days of week\\\"\"), \" -> \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"SundayL\\\"\"), \"\\n    }\\n  }\\n);\\n\\n\")), mdx(Alert, {\n    info: true,\n    mdxType: \"Alert\"\n  }, mdx(\"p\", null, \"\\u2019*\\u2019 means any, \\u2018Sun\\xADdayL\\u2019 means last Sun\\xADday.\")), mdx(Alert, {\n    info: true,\n    mdxType: \"Alert\"\n  }, mdx(\"p\", null, \"If \\u2018cre\\xADate\\u2019 re\\xADquest is sent to Chime ad\\xADdress with name set to \\u2018sched\\xADuler name:timer name\\u2019 and cor\\xADre\\xADspond\\xADing sched\\xADuler hasn\\u2019t been cre\\xADated be\\xADfore then Chime cre\\xADates both new sched\\xADuler and new timer.\")), mdx(\"h3\", {\n    \"id\": \"java-example\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#java-example\"\n  })), \"Java example\"), mdx(\"p\", null, \"Let\\u2019s con\\xADsider a timer which has to fire every Mon\\xADday at 8-30 and every Fri\\xADday at 17-30.  \"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"hljs language-Java\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// listen the timer events\"), \"\\nMessageConsumer<JsonObject> consumer = eventBus.consumer(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"my scheduler:my timer\\\"\"), \");\\nconsumer.handler (\\n  message -> {\\n    System.out.println(message.body());\\n    }\\n);\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// description of timers\"), \"\\nJsonObject mondayTimer = (\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" JsonObject()).put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"type\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"cron\\\"\"), \")\\n  .put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"seconds\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"0\\\"\"), \").put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"minutes\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"30\\\"\"), \").put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"hours\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"8\\\"\"), \")\\n  .put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"days of month\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"*\\\"\"), \").put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"months\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"*\\\"\"), \")\\n  .put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"days of week\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Monday\\\"\"), \");\\nJsonObject fridayTimer = (\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" JsonObject()).put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"type\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"cron\\\"\"), \")\\n  .put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"seconds\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"0\\\"\"), \").put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"minutes\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"30\\\"\"), \").put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"hours\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"17\\\"\"), \")\\n  .put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"days of month\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"*\\\"\"), \").put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"months\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"*\\\"\"), \")\\n  .put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"days of week\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"Friday\\\"\"), \");\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// union timer - combines mondayTimer and fridayTimer\"), \"\\nJsonArray combination = (\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" JsonArray()).add(mondayTimer)\\n  .add(fridayTimer);\\nJsonObject timer = (\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" JsonObject()).put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"type\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"union\\\"\"), \")\\n  .put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"timers\\\"\"), \", combination);\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-comment\"\n  }), \"// create scheduler and timer\"), \"\\neventBus.send (\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"chime\\\"\"), \",\\n  (\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-keyword\"\n  }), \"new\"), \" JsonObject()).put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"operation\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"create\\\"\"), \")\\n    .put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"name\\\"\"), \", \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"my scheduler:my timer\\\"\"), \")\\n    .put(\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"hljs-string\"\n  }), \"\\\"description\\\"\"), \", timer)\\n);\\n\")), mdx(Alert, {\n    warning: true,\n    mdxType: \"Alert\"\n  }, mdx(\"p\", null, \"En\\xADsure that Cey\\xADlon ver\\xADti\\xADcle fac\\xADtory with right ver\\xADsion is avail\\xADable at class path.\")), mdx(\"h2\", {\n    \"id\": \"at-the-end\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"aria-hidden\": true,\n    \"tabIndex\": -1,\n    \"className\": \"heading-anchor\",\n    \"href\": \"#at-the-end\"\n  })), \"At the end\"), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"herd.schedule.chime\"), \" mod\\xADule pro\\xADvides some fea\\xADtures not men\\xADtioned here:  \"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"con\\xADve\\xADnient builders use\\xADful to fill in JSON de\\xADscrip\\xADtion of var\\xADi\\xADous timers;  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"prox\\xADy\\xADing event bus with con\\xADven\\xADtional in\\xADter\\xADfaces;  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"read\\xADing JSON timer event into an ob\\xADject;  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"at\\xADtach\\xADing JSON mes\\xADsage to the timer fire event;  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"man\\xADag\\xADing time zones.  \")), mdx(\"p\", null, \"There are also some ideas for the fu\\xADture:  \"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"cus\\xADtom or user-\\u200Bdefined timers;  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"lim\\xADit\\xADing the timer fire time / date with cal\\xADen\\xADdar;  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"ex\\xADtract\\xADing timer fire mes\\xADsage from ex\\xADter\\xADnal source.  \")), mdx(\"p\", null, \"This is very quick in\\xADtro\\xADduc\\xADtion to the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Chime\"), \" and if you are in\\xADter\\xADested in you may read\\nmore in \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://modules.ceylon-lang.org/repo/1/herd/schedule/chime/0.2.1/module-doc/api/index.html\"\n  }), \"Chime doc\\xADu\\xADmen\\xADta\\xADtion\"), \" or even \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/LisiLisenok/Chime\"\n  }), \"con\\xADtribute\"), \" to.  \"), mdx(\"p\", null, \"Thank\\u2019s for the read\\xADing and enjoy with cod\\xADing!\"));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"<p>Eclipse Vert.x ex­e­cutes pe­ri­odic and de­layed ac­tions with\n<a href=\"/docs/vertx-core/java/#_executing_periodic_and_delayed_actions\">pe­ri­odic and one-​shot timers</a>.\nThis is the base for time sched­ul­ing and reach fea­ture ex­ten­sion must be rather in­ter­est­ing.\nBe no­ti­fied at cer­tain date / time, take into ac­count hol­i­days,\nre­peat no­ti­fi­ca­tions until a given date, apply time zone,\ntake into ac­count day­light sav­ing time etc.\nThere are a lot of use­ful fea­tures time sched­uler may in­tro­duce to the Vert.x stack.  </p><h2 id=\"chime\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#chime\"></a>Chime</h2><p><a href=\"https://github.com/LisiLisenok/Chime\">Chime</a> is time sched­uler ver­ti­cle which works on <em>Vert.x</em> event bus and pro­vides:  </p><ul><li>sched­ul­ing with <em>cron-​style</em>, <em>in­ter­val</em> or <em>union</em> timers:</li><li>at a cer­tain time of day (to the sec­ond);  </li><li>on cer­tain days of the week, month or year;  </li><li>with a given time in­ter­val;  </li><li>with nearly any com­bi­na­tion of all of above;  </li><li>re­peat­ing a given num­ber of times;  </li><li>re­peat­ing until a given time / date;  </li><li>re­peat­ing in­fi­nitely  </li><li>prox­y­ing event bus with con­ven­tional in­ter­faces  </li><li>ap­ply­ing time zones avail­able on <em>JVM</em> with day­light sav­ing time taken into ac­count  </li><li>flex­i­ble timers man­age­ment sys­tem:  </li><li>group­ing timers;  </li><li>defin­ing a timer start or end times  </li><li>paus­ing / re­sum­ing;  </li><li>fire count­ing;  </li><li>lis­ten­ing and send­ing mes­sages via event bus with <em>JSON</em>;  </li><li><em>pub­lish­ing</em> or <em>send­ing</em> timer fire event to the ad­dress of your choice.  </li></ul><div class=\"alert info\"><p><em>Chime</em> is writ­ten in <a href=\"https://ceylon-lang.org\">Cey­lon</a> and is avail­able at\n<a href=\"https://herd.ceylon-lang.org/modules/herd.schedule.chime\">Cey­lon Herd</a>.</p></div><h2 id=\"running\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#running\"></a>Running</h2><h3 id=\"ceylon-users\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#ceylon-users\"></a>Ceylon users</h3><p>De­ploy <em>Chime</em> using <code>Verticle.deployVerticle</code> method.</p><pre><code class=\"hljs language-Ceylon\"><span class=\"hljs-keyword\">import</span> io.vertx.ceylon.core {vertx}\n<span class=\"hljs-keyword\">import</span> herd.schedule.chime {Chime}\nChime().deploy(vertx.vertx());\n</code></pre><p>Or with <code>vertx.deployVerticle(\\&quot;ceylon:herd.schedule.chime/0.2.1\\&quot;);</code>\nbut en­sure that Cey­lon ver­ti­cle fac­tory is avail­able at class path.   </p><h3 id=\"java-users\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#java-users\"></a>Java users</h3><ol><li>En­sure that Cey­lon ver­ti­cle fac­tory is avail­able at class path.  </li><li>Put Cey­lon ver­sions to con­sis­tency. For in­stance, Vert.x 3.4.1 de­pends on Cey­lon 1.3.0\nwhile Chime 0.2.1 de­pends on Cey­lon 1.3.2. </li><li><a href=\"/docs/vertx-core/java/#_deploying_verticles_programmatically\">De­ploy ver­ti­cle</a>, like:  </li></ol><pre><code class=\"hljs language-Java\">vertx.deployVerticle(<span class=\"hljs-string\">&quot;ceylon:herd.schedule.chime/0.2.1&quot;</span>)\n</code></pre><div class=\"alert info\"><p>Ex­am­ple with Maven is avail­able at <a href=\"https://github.com/LisiLisenok/ChimeJavaExample\">Github</a>.</p></div><h2 id=\"schedulers\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#schedulers\"></a>Schedulers</h2><p>Well, <em>Chime</em> ver­ti­cle is de­ployed. Let’s see its struc­ture.<br/>\n<!-- -->In order to pro­vide flex­i­ble and broad ways to man­age tim­ing two level ar­chi­tec­ture is adopted.\nIt con­sists of sched­ulers and timers. Timer is a unit which fires at a given time.\nWhile sched­uler is a set or group of timers and pro­vides fol­low­ing:    </p><ul><li>cre­at­ing and delet­ing timers;  </li><li>paus­ing / re­sum­ing all timers work­ing within the sched­uler;  </li><li>info on the run­ning timers;  </li><li>de­fault time zone;  </li><li>lis­ten­ing event bus at the given sched­uler ad­dress for the re­quests to.  </li></ul><p>Any timer op­er­ates within some sched­uler. And one or sev­eral sched­ulers have to be cre­ated be­fore start­ing sched­ul­ing.<br/>\n<!-- -->When <em>Chime</em> ver­ti­cle is de­ployed it starts lis­ten event bus at <strong>chime</strong> ad­dress (can be con­fig­ured).\nIn order to cre­ate sched­uler send to this ad­dress a JSON mes­sage.  </p><pre><code class=\"hljs language-json\">{\n  <span class=\"hljs-attr\">&quot;operation&quot;</span>: <span class=\"hljs-string\">&quot;create&quot;</span>,\n  <span class=\"hljs-attr\">&quot;name&quot;</span>: <span class=\"hljs-string\">&quot;scheduler name&quot;</span>\n}\n</code></pre><p>Once sched­uler is cre­ated it starts lis­ten event bus at <strong>sched­uler name</strong> ad­dress.\nSend­ing mes­sages to <strong>chime</strong> ad­dress or to <strong>sched­uler name</strong> ad­dress are rather equiv­a­lent,\nex­cept­ing that chime ad­dress pro­vides ser­vices for every sched­uler, while sched­uler ad­dress\npro­vides ser­vices for this par­tic­u­lar sched­uler only.<br/>\n<!-- -->The re­quest sent to the <em>Chime</em> has to con­tain <strong>op­er­a­tion</strong> and <strong>name</strong> keys.\nName key pro­vides sched­uler or timer name. While op­er­a­tion key shows an ac­tion <em>Chime</em> has to per­form.\nThere are only four pos­si­ble op­er­a­tions:  </p><ul><li>cre­ate - cre­ate new sched­uler or timer;  </li><li>delete - delete sched­uler or timer;  </li><li>info - re­quest info on <em>Chime</em> or on a par­tic­u­lar sched­uler or timer;  </li><li>state - set or get sched­uler or timer state (run­ning, paused or com­pleted).  </li></ul><h2 id=\"timers\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#timers\"></a>Timers</h2><p>Now we have sched­uler cre­ated and timers can be run within. There are two ways to ac­cess a given timer:  </p><ol><li>Send­ing mes­sage to <strong>chime</strong> ad­dress with ‘name’ field set to <strong>sched­uler name:timer name</strong>.  </li><li>Send­ing mes­sage to <strong>sched­uler name</strong> ad­dress with ‘name’ field set to ei­ther <strong>timer name</strong> or <strong>sched­uler name:timer name</strong>.  </li></ol><p><a href=\"https://modules.ceylon-lang.org/repo/1/herd/schedule/chime/0.2.1/module-doc/api/index.html#timer-request\">Timer re­quest</a> is rather com­pli­cated and con­tains a lot of de­tails. In this blog post only basic fea­tures are con­sid­ered:  </p><pre><code class=\"hljs language-json\">{\n  <span class=\"hljs-attr\">&quot;operation&quot;</span>: <span class=\"hljs-string\">&quot;create&quot;</span>,\n  <span class=\"hljs-attr\">&quot;name&quot;</span>: <span class=\"hljs-string\">&quot;scheduler name:timer name&quot;</span>,\n  <span class=\"hljs-attr\">&quot;description&quot;</span>: {}\n};\n</code></pre><p>This is rather sim­i­lar to re­quest sent to cre­ate a sched­uler.\nThe dif­fer­ence is only <strong>de­scrip­tion</strong> field is added.\nThis de­scrip­tion is an JSON ob­ject which iden­ti­fies par­tic­u­lar timer type and its de­tails.<br/>\n<!-- -->The other fields not shown here are op­tional and in­cludes:  </p><ul><li>ini­tial timer state (paused or run­ning);  </li><li>start or end date-​time;  </li><li>num­ber of re­peat­ing times;  </li><li>is timer mes­sage to be pub­lished or sent;  </li><li>timer fire mes­sage and de­liv­ery op­tions;  </li><li>time zone.  </li></ul><h2 id=\"timer-descriptions\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#timer-descriptions\"></a>Timer descriptions</h2><p>Cur­rently, three types of timers are sup­ported:  </p><ul><li><strong>In­ter­val timer</strong> which fires after each given time pe­riod (min­i­mum 1 sec­ond):  </li></ul><pre><code class=\"hljs language-json\">{\n  <span class=\"hljs-attr\">&quot;type&quot;</span>: <span class=\"hljs-string\">&quot;interval&quot;</span>,\n  <span class=\"hljs-attr\">&quot;delay&quot;</span>: <span class=\"hljs-string\">&quot;timer delay in seconds, Integer&quot;</span>\n};\n</code></pre><ul><li><strong>Cron style timer</strong> which is de­fined with cron-​style:  </li></ul><pre><code class=\"hljs language-json\">{  \n  <span class=\"hljs-attr\">&quot;type&quot;</span>: <span class=\"hljs-string\">&quot;cron&quot;</span>,  \n  <span class=\"hljs-attr\">&quot;seconds&quot;</span>: <span class=\"hljs-string\">&quot;seconds in cron style, String&quot;</span>,  \n  <span class=\"hljs-attr\">&quot;minutes&quot;</span>: <span class=\"hljs-string\">&quot;minutes in cron style, String&quot;</span>,  \n  <span class=\"hljs-attr\">&quot;hours&quot;</span>: <span class=\"hljs-string\">&quot;hours in cron style, String&quot;</span>,  \n  <span class=\"hljs-attr\">&quot;days of month&quot;</span>: <span class=\"hljs-string\">&quot;days of month in cron style, String&quot;</span>,  \n  <span class=\"hljs-attr\">&quot;months&quot;</span>: <span class=\"hljs-string\">&quot;months in cron style, String&quot;</span>,  \n  <span class=\"hljs-attr\">&quot;days of week&quot;</span>: <span class=\"hljs-string\">&quot;days of week in cron style, String, optional&quot;</span>,  \n  <span class=\"hljs-attr\">&quot;years&quot;</span>: <span class=\"hljs-string\">&quot;years in cron style, String, optional&quot;</span>  \n};\n</code></pre><p>Cron timer is rather pow­er­ful and flex­i­ble. In­ves­ti­gate <a href=\"https://modules.ceylon-lang.org/repo/1/herd/schedule/chime/0.2.1/module-doc/api/index.html#cron-expression\">spec­i­fi­ca­tion</a> for the com­plete list of fea­tures.  </p><ul><li><strong>Union timer</strong> which com­bines a num­ber of timers into a one:  </li></ul><pre><code class=\"hljs language-json\">{  \n  <span class=\"hljs-attr\">&quot;type&quot;</span>: <span class=\"hljs-string\">&quot;union&quot;</span>,  \n  <span class=\"hljs-attr\">&quot;timers&quot;</span>: [<span class=\"hljs-string\">&quot;list of the timer descriptions&quot;</span>]  \n};\n</code></pre><p>Union timer may be use­ful to fire at a list of spe­cific dates / times.</p><h2 id=\"timer-events\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#timer-events\"></a>Timer events</h2><p>Once timer is started it sends or pub­lishes mes­sages to <strong>sched­uler name:timer name</strong> ad­dress in JSON for­mat.\nTwo types of events are sent:  </p><ul><li>fire event which oc­curs when time reaches next timer value:  </li></ul><pre><code class=\"hljs language-json\">{  \n  <span class=\"hljs-attr\">&quot;name&quot;</span>: <span class=\"hljs-string\">&quot;scheduler name:timer name, String&quot;</span>,  \n  <span class=\"hljs-attr\">&quot;event&quot;</span>: <span class=\"hljs-string\">&quot;fire&quot;</span>,  \n  <span class=\"hljs-attr\">&quot;count&quot;</span>: <span class=\"hljs-string\">&quot;total number of fire times, Integer&quot;</span>,  \n  <span class=\"hljs-attr\">&quot;time&quot;</span>: <span class=\"hljs-string\">&quot;ISO formated time / date, String&quot;</span>,  \n  <span class=\"hljs-attr\">&quot;seconds&quot;</span>: <span class=\"hljs-string\">&quot;number of seconds since last minute, Integer&quot;</span>,  \n  <span class=\"hljs-attr\">&quot;minutes&quot;</span>: <span class=\"hljs-string\">&quot;number of minutes since last hour, Integer&quot;</span>,  \n  <span class=\"hljs-attr\">&quot;hours&quot;</span>: <span class=\"hljs-string\">&quot;hour of day, Integer&quot;</span>,  \n  <span class=\"hljs-attr\">&quot;day of month&quot;</span>: <span class=\"hljs-string\">&quot;day of month, Integer&quot;</span>,  \n  <span class=\"hljs-attr\">&quot;month&quot;</span>: <span class=\"hljs-string\">&quot;month, Integer&quot;</span>,  \n  <span class=\"hljs-attr\">&quot;year&quot;</span>: <span class=\"hljs-string\">&quot;year, Integer&quot;</span>,  \n  <span class=\"hljs-attr\">&quot;time zone&quot;</span>: <span class=\"hljs-string\">&quot;time zone the timer works in, String&quot;</span>\n};\n</code></pre><ul><li>com­plete event which oc­curs when timer is ex­hausted by some cri­te­ria given at timer cre­ate re­quest:  </li></ul><pre><code class=\"hljs language-json\">{  \n  <span class=\"hljs-attr\">&quot;name&quot;</span>: <span class=\"hljs-string\">&quot;scheduler name:timer name, String&quot;</span>,  \n  <span class=\"hljs-attr\">&quot;event&quot;</span>: <span class=\"hljs-string\">&quot;complete&quot;</span>,  \n  <span class=\"hljs-attr\">&quot;count&quot;</span>: <span class=\"hljs-string\">&quot;total number of fire times, Integer&quot;</span>  \n};\n</code></pre><p>Ba­si­cally, now we know every­thing to be happy with <em>Chime</em>: sched­ulers and re­quests to them, timers and timer events.\nWill see some ex­am­ples in the next sec­tion.  </p><h2 id=\"examples\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#examples\"></a>Examples</h2><h3 id=\"ceylon-example\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#ceylon-example\"></a>Ceylon example</h3><p>Let’s con­sider a timer which has to fire every month at 16-30 last Sun­day.  </p><pre><code class=\"hljs language-Ceylon\"><span class=\"hljs-comment\">// listen the timer events</span>\neventBus.consumer (\n  <span class=\"hljs-string\">&quot;my scheduler:my timer&quot;</span>,\n  (Throwable|Message&lt;JsonObject?&gt; msg) {\n    <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">is</span> Message&lt;JsonObject?&gt; msg) { print(msg.body()); }\n    <span class=\"hljs-keyword\">else</span> { print(msg); }  \n  }\n);\n<span class=\"hljs-comment\">// create scheduler and timer</span>\neventBus.send&lt;JsonObject&gt; (\n  <span class=\"hljs-string\">&quot;chime&quot;</span>,\n  JsonObject {\n    <span class=\"hljs-string\">&quot;operation&quot;</span> -&gt; <span class=\"hljs-string\">&quot;create&quot;</span>,\n    <span class=\"hljs-string\">&quot;name&quot;</span> -&gt; <span class=\"hljs-string\">&quot;my scheduler:my timer&quot;</span>,\n    <span class=\"hljs-string\">&quot;description&quot;</span> -&gt; JsonObject {\n      <span class=\"hljs-string\">&quot;type&quot;</span> -&gt; <span class=\"hljs-string\">&quot;cron&quot;</span>,\n      <span class=\"hljs-string\">&quot;seconds&quot;</span> -&gt; <span class=\"hljs-string\">&quot;0&quot;</span>,\n      <span class=\"hljs-string\">&quot;minutes&quot;</span> -&gt; <span class=\"hljs-string\">&quot;30&quot;</span>,\n      <span class=\"hljs-string\">&quot;hours&quot;</span> -&gt; <span class=\"hljs-string\">&quot;16&quot;</span>,\n      <span class=\"hljs-string\">&quot;days of month&quot;</span> -&gt; <span class=\"hljs-string\">&quot;*&quot;</span>,\n      <span class=\"hljs-string\">&quot;months&quot;</span> -&gt; <span class=\"hljs-string\">&quot;*&quot;</span>,\n      <span class=\"hljs-string\">&quot;days of week&quot;</span> -&gt; <span class=\"hljs-string\">&quot;SundayL&quot;</span>\n    }\n  }\n);\n\n</code></pre><div class=\"alert info\"><p>’*’ means any, ‘Sun­dayL’ means last Sun­day.</p></div><div class=\"alert info\"><p>If ‘cre­ate’ re­quest is sent to Chime ad­dress with name set to ‘sched­uler name:timer name’ and cor­re­spond­ing sched­uler hasn’t been cre­ated be­fore then Chime cre­ates both new sched­uler and new timer.</p></div><h3 id=\"java-example\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#java-example\"></a>Java example</h3><p>Let’s con­sider a timer which has to fire every Mon­day at 8-30 and every Fri­day at 17-30.  </p><pre><code class=\"hljs language-Java\"><span class=\"hljs-comment\">// listen the timer events</span>\nMessageConsumer&lt;JsonObject&gt; consumer = eventBus.consumer(<span class=\"hljs-string\">&quot;my scheduler:my timer&quot;</span>);\nconsumer.handler (\n  message -&gt; {\n    System.out.println(message.body());\n    }\n);\n<span class=\"hljs-comment\">// description of timers</span>\nJsonObject mondayTimer = (<span class=\"hljs-keyword\">new</span> JsonObject()).put(<span class=\"hljs-string\">&quot;type&quot;</span>, <span class=\"hljs-string\">&quot;cron&quot;</span>)\n  .put(<span class=\"hljs-string\">&quot;seconds&quot;</span>, <span class=\"hljs-string\">&quot;0&quot;</span>).put(<span class=\"hljs-string\">&quot;minutes&quot;</span>, <span class=\"hljs-string\">&quot;30&quot;</span>).put(<span class=\"hljs-string\">&quot;hours&quot;</span>, <span class=\"hljs-string\">&quot;8&quot;</span>)\n  .put(<span class=\"hljs-string\">&quot;days of month&quot;</span>, <span class=\"hljs-string\">&quot;*&quot;</span>).put(<span class=\"hljs-string\">&quot;months&quot;</span>, <span class=\"hljs-string\">&quot;*&quot;</span>)\n  .put(<span class=\"hljs-string\">&quot;days of week&quot;</span>, <span class=\"hljs-string\">&quot;Monday&quot;</span>);\nJsonObject fridayTimer = (<span class=\"hljs-keyword\">new</span> JsonObject()).put(<span class=\"hljs-string\">&quot;type&quot;</span>, <span class=\"hljs-string\">&quot;cron&quot;</span>)\n  .put(<span class=\"hljs-string\">&quot;seconds&quot;</span>, <span class=\"hljs-string\">&quot;0&quot;</span>).put(<span class=\"hljs-string\">&quot;minutes&quot;</span>, <span class=\"hljs-string\">&quot;30&quot;</span>).put(<span class=\"hljs-string\">&quot;hours&quot;</span>, <span class=\"hljs-string\">&quot;17&quot;</span>)\n  .put(<span class=\"hljs-string\">&quot;days of month&quot;</span>, <span class=\"hljs-string\">&quot;*&quot;</span>).put(<span class=\"hljs-string\">&quot;months&quot;</span>, <span class=\"hljs-string\">&quot;*&quot;</span>)\n  .put(<span class=\"hljs-string\">&quot;days of week&quot;</span>, <span class=\"hljs-string\">&quot;Friday&quot;</span>);\n<span class=\"hljs-comment\">// union timer - combines mondayTimer and fridayTimer</span>\nJsonArray combination = (<span class=\"hljs-keyword\">new</span> JsonArray()).add(mondayTimer)\n  .add(fridayTimer);\nJsonObject timer = (<span class=\"hljs-keyword\">new</span> JsonObject()).put(<span class=\"hljs-string\">&quot;type&quot;</span>, <span class=\"hljs-string\">&quot;union&quot;</span>)\n  .put(<span class=\"hljs-string\">&quot;timers&quot;</span>, combination);\n<span class=\"hljs-comment\">// create scheduler and timer</span>\neventBus.send (\n  <span class=\"hljs-string\">&quot;chime&quot;</span>,\n  (<span class=\"hljs-keyword\">new</span> JsonObject()).put(<span class=\"hljs-string\">&quot;operation&quot;</span>, <span class=\"hljs-string\">&quot;create&quot;</span>)\n    .put(<span class=\"hljs-string\">&quot;name&quot;</span>, <span class=\"hljs-string\">&quot;my scheduler:my timer&quot;</span>)\n    .put(<span class=\"hljs-string\">&quot;description&quot;</span>, timer)\n);\n</code></pre><div class=\"alert warning\"><p>En­sure that Cey­lon ver­ti­cle fac­tory with right ver­sion is avail­able at class path.</p></div><h2 id=\"at-the-end\"><a aria-hidden=\"true\" tabindex=\"-1\" class=\"heading-anchor\" href=\"#at-the-end\"></a>At the end</h2><p><code>herd.schedule.chime</code> mod­ule pro­vides some fea­tures not men­tioned here:  </p><ul><li>con­ve­nient builders use­ful to fill in JSON de­scrip­tion of var­i­ous timers;  </li><li>prox­y­ing event bus with con­ven­tional in­ter­faces;  </li><li>read­ing JSON timer event into an ob­ject;  </li><li>at­tach­ing JSON mes­sage to the timer fire event;  </li><li>man­ag­ing time zones.  </li></ul><p>There are also some ideas for the fu­ture:  </p><ul><li>cus­tom or user-​defined timers;  </li><li>lim­it­ing the timer fire time / date with cal­en­dar;  </li><li>ex­tract­ing timer fire mes­sage from ex­ter­nal source.  </li></ul><p>This is very quick in­tro­duc­tion to the <em>Chime</em> and if you are in­ter­ested in you may read\nmore in <a href=\"https://modules.ceylon-lang.org/repo/1/herd/schedule/chime/0.2.1/module-doc/api/index.html\">Chime doc­u­men­ta­tion</a> or even <a href=\"https://github.com/LisiLisenok/Chime\">con­tribute</a> to.  </p><p>Thank’s for the read­ing and enjoy with cod­ing!</p>","scope":{}}},"prevPost":{"meta":{"title":"Presentation of the Vert.x-Swagger project","category":"guides","authors":[{"name":"Florent Chamfroy","github_id":"phiz71"}],"summary":"This post is an introduction to the Vert.x-Swagger project, and describe how to use the Swagger-Codegen plugin and the SwaggerRouter class."},"date":"2017-05-22","slug":"presentation-of-the-vert-x-swagger-project"},"nextPost":{"meta":{"title":"Building a real-time web app with Angular/Ngrx and Vert.x","category":"guides","authors":[{"name":"Benoit Hediard","github_id":"benorama"}],"summary":"There are multiple tech stacks to build a real-time web app. What are the best choices to build Angular client apps, connected to a JVM-based backend?"},"date":"2017-04-26","slug":"building-a-real-time-web-app-with-angular-ngrx-and-vert-x"},"relatedPosts":[{"meta":{"title":"Real-time bidding with Websockets and Vert.x","category":"guides","authors":[{"name":"Marcin Warczyglowa","github_id":"mwarc"}],"summary":"The expectations of users for interactivity with web applications have changed over the past few years.\n    Users during bidding in auction no longer want to press the refresh button."},"date":"2016-01-15","slug":"real-time-bidding-with-websockets-and-vert-x"},{"meta":{"title":"Building services and APIs with AMQP 1.0","category":"guides","authors":[{"name":"Jakub Scholz","github_id":"scholzj"}],"summary":"Microservices and APIs are everywhere. Everyone talks about them, presentation slides are full of them ... some people are actually even building them."},"date":"2017-01-25","slug":"building-services-and-apis-with-amqp-1-0"},{"meta":{"title":"Scala is here","category":"guides","authors":[{"name":"Jochen Mader","github_id":"codepitbull"}],"summary":"The rise of Scala as one of the most important languages on the JVM caught many (me included) by surprise. This hybrid of functional and imperative paradigms struck a chord with many developers."},"date":"2017-03-20","slug":"scala-is-here"}]},"__N_SSG":true}