{"pageProps":{"categories":["releases","guides","security","news"],"post":{"meta":{"title":"Dynamic Routing in Serverless Microservice with Vert.x Event Bus","category":"guides","authors":[{"name":"Rowell Belen","github_id":"bytekast"}],"summary":"The Serverless Framework has become the de facto toolkit for building and deploying serverless functions or applications."},"date":"2017-04-14","slug":"dynamic-routing-in-serverless-microservice-with-vert-x-event-bus","readingTime":{"text":"3 min read","minutes":2.6,"time":156000,"words":520},"content":{"compiledSource":"var h=Object.defineProperty,l=Object.defineProperties;var c=Object.getOwnPropertyDescriptors;var o=Object.getOwnPropertySymbols;var s=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;var p=(n,a,t)=>a in n?h(n,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[a]=t,e=(n,a)=>{for(var t in a||(a={}))s.call(a,t)&&p(n,t,a[t]);if(o)for(var t of o(a))i.call(a,t)&&p(n,t,a[t]);return n},m=(n,a)=>l(n,c(a));var d=(n,a)=>{var t={};for(var r in n)s.call(n,r)&&a.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&o)for(var r of o(n))a.indexOf(r)<0&&i.call(n,r)&&(t[r]=n[r]);return t};const makeShortcode=n=>function(t){return console.warn(\"Component \"+n+\" was not imported, exported, or provided by MDXProvider as global scope\"),mdx(\"div\",e({},t))},Alert=makeShortcode(\"Alert\"),Link=makeShortcode(\"Link\"),Gist=makeShortcode(\"Gist\"),layoutProps={},MDXLayout=\"wrapper\";function MDXContent(t){var r=t,{components:n}=r,a=d(r,[\"components\"]);return mdx(MDXLayout,m(e(e({},layoutProps),a),{components:n,mdxType:\"MDXLayout\"}),mdx(Alert,{info:!0,mdxType:\"Alert\"},mdx(\"p\",null,\"This is a re-\\u200Bpublication of the fol\\xADlow\\xADing \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://www.rowellbelen.com/dynamic-routing-in-serverless-microservice-with-vert-x-event-bus/\"}),\"blog post\"))),mdx(\"h2\",e({},{id:\"serverless-framework\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#serverless-framework\"})),\"Serverless framework\"),mdx(\"p\",null,\"The \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://serverless.com\"}),\"Server\\xADless Frame\\xADwork\"),\" has be\\xADcome the \",mdx(\"em\",{parentName:\"p\"},\"De Facto\"),\" toolkit for build\\xADing and de\\xADploy\\xADing Server\\xADless func\\xADtions or ap\\xADpli\\xADca\\xADtions. Its com\\xADmu\\xADnity has done a great job ad\\xADvanc\\xADing the tools around Server\\xADless ar\\xADchi\\xADtec\\xADture.\"),mdx(\"p\",null,\"How\\xADever, in the Server\\xADless com\\xADmu\\xADnity there is de\\xADbate among de\\xADvel\\xADop\\xADers on whether a sin\\xADgle \",mdx(\"strong\",{parentName:\"p\"},\"AWS Lambda\"),\" func\\xADtion should only be re\\xADspon\\xADsi\\xADble for a sin\\xADgle API end\\xADpoint. My an\\xADswer, based on my real-\\u200Bworld pro\\xADduc\\xADtion ex\\xADpe\\xADri\\xADence, is \",mdx(\"strong\",{parentName:\"p\"},\"NO\"),\". \"),mdx(\"p\",null,\"Imag\\xADine if you are build\\xADing a set of APIs with \",mdx(\"strong\",{parentName:\"p\"},\"10\"),\" end\\xADpoints and you need to de\\xADploy the APIs to \",mdx(\"strong\",{parentName:\"p\"},\"DEV\"),\", \",mdx(\"strong\",{parentName:\"p\"},\"STAGE\"),\" and \",mdx(\"strong\",{parentName:\"p\"},\"PROD\"),\" en\\xADvi\\xADron\\xADments. Now you are look\\xADing at \",mdx(\"strong\",{parentName:\"p\"},\"30\"),\" dif\\xADfer\\xADent func\\xADtions to ver\\xADsion, de\\xADploy and man\\xADage - not to men\\xADtion the \",mdx(\"em\",{parentName:\"p\"},\"Copy & Paste\"),\" code and con\\xADfig\\xADu\\xADra\\xADtion that will re\\xADsult from this type of set-\\u200Bup. \",mdx(\"strong\",{parentName:\"p\"},\"NO THANKS!!!\"),\" \"),mdx(\"p\",null,\"I be\\xADlieve a more prag\\xADmatic ap\\xADproach is \",mdx(\"strong\",{parentName:\"p\"},\"1 Lambda Func\\xADtion\"),\" == \",mdx(\"strong\",{parentName:\"p\"},\"1 Mi\\xADcroser\\xADvice\"),\".\"),mdx(\"p\",null,\"For ex\\xADam\\xADple, if you were build\\xADing a \",mdx(\"strong\",{parentName:\"p\"},\"User Mi\\xADcroser\\xADvice\"),\" with basic \",mdx(\"strong\",{parentName:\"p\"},\"CRUD\"),\" func\\xADtion\\xADal\\xADity, you should im\\xADple\\xADment \",mdx(\"inlineCode\",{parentName:\"p\"},\"CREATE\"),\", \",mdx(\"inlineCode\",{parentName:\"p\"},\"READ\"),\", \",mdx(\"inlineCode\",{parentName:\"p\"},\"UPDATE\"),\" and \",mdx(\"inlineCode\",{parentName:\"p\"},\"DELETE\"),\" in a \",mdx(\"strong\",{parentName:\"p\"},\"sin\\xADgle\"),\" Lambda func\\xADtion. In the code, you should re\\xADsolve the de\\xADsired ac\\xADtion by in\\xADspect\\xADing the re\\xADquest or the con\\xADtext.\"),mdx(\"h2\",e({},{id:\"vertx-to-the-rescue\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#vertx-to-the-rescue\"})),\"Vert.x to the rescue\"),mdx(\"p\",null,\"There are many ben\\xADe\\xADfits to using \",mdx(\"strong\",{parentName:\"p\"},\"Vert.x\"),\" in any ap\\xADpli\\xADca\\xADtion. With \",mdx(\"strong\",{parentName:\"p\"},\"Vert.x\"),\", you get a rock-\\u200Bsolid and light\\xADweight toolkit for build\\xADing \",mdx(\"strong\",{parentName:\"p\"},\"re\\xADac\\xADtive\"),\", \",mdx(\"strong\",{parentName:\"p\"},\"highly per\\xADfor\\xADmant\"),\", \",mdx(\"strong\",{parentName:\"p\"},\"event-\\u200Bdriven\"),\" and \",mdx(\"strong\",{parentName:\"p\"},\"non-\\u200Bblocking\"),\" ap\\xADpli\\xADca\\xADtions. The toolkit even pro\\xADvides asyn\\xADchro\\xADnous \",mdx(\"em\",{parentName:\"p\"},\"APIs\"),\" for ac\\xADcess\\xADing tra\\xADdi\\xADtional block\\xADing dri\\xADvers such as \",mdx(\"strong\",{parentName:\"p\"},mdx(Link,{href:\"/docs/vertx-jdbc-client/groovy/\",passHref:!0,mdxType:\"Link\"},mdx(\"a\",e({parentName:\"strong\"},{href:\"\"}),\"JDBC\"))),\".\"),mdx(\"p\",null,\"How\\xADever, for this ex\\xADam\\xADple, we will mainly focus on the \",mdx(Link,{href:\"/docs/vertx-core/groovy/#event_bus\",passHref:!0,mdxType:\"Link\"},mdx(\"a\",e({parentName:\"p\"},{href:\"\"}),\"Event Bus\")),\". The event bus al\\xADlows dif\\xADfer\\xADent parts of your ap\\xADpli\\xADca\\xADtion to com\\xADmu\\xADni\\xADcate with each other via event mes\\xADsages. It sup\\xADports \",mdx(\"em\",{parentName:\"p\"},\"pub\\xADlish/sub\\xADscribe\"),\", \",mdx(\"em\",{parentName:\"p\"},\"point to point\"),\", and \",mdx(\"em\",{parentName:\"p\"},\"request-\\u200Bresponse mes\\xADsag\\xADing\"),\".\"),mdx(\"p\",null,\"For the \",mdx(\"strong\",{parentName:\"p\"},\"User Mi\\xADcroser\\xADvice\"),\" ex\\xADam\\xADple above, we could treat the com\\xADbi\\xADna\\xADtion of the \",mdx(\"inlineCode\",{parentName:\"p\"},\"HTTP METHOD\"),\" and \",mdx(\"inlineCode\",{parentName:\"p\"},\"RESOURCE PATH\"),\" as a unique event chan\\xADnel, and reg\\xADis\\xADter the sub\\xADscribers/han\\xADdlers to re\\xADspond ap\\xADpro\\xADpri\\xADately.\"),mdx(\"p\",null,\"Let\\u2019s dive right in.\"),mdx(\"h2\",e({},{id:\"goal\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#goal\"})),\"Goal\"),mdx(\"p\",null,\"Cre\\xADate a \",mdx(\"em\",{parentName:\"p\"},\"re\\xADac\\xADtive\"),\", \",mdx(\"em\",{parentName:\"p\"},\"message-\\u200Bdriven\"),\", \",mdx(\"em\",{parentName:\"p\"},\"asyn\\xADchro\\xADnous\"),\" \",mdx(\"strong\",{parentName:\"p\"},\"User Mi\\xADcroser\\xADvice\"),\" with \",mdx(\"inlineCode\",{parentName:\"p\"},\"GET\"),\", \",mdx(\"inlineCode\",{parentName:\"p\"},\"POST\"),\", \",mdx(\"inlineCode\",{parentName:\"p\"},\"DELETE\"),\", \",mdx(\"inlineCode\",{parentName:\"p\"},\"PUT\"),\" CRUD op\\xADer\\xADa\\xADtions in a \",mdx(\"em\",{parentName:\"p\"},\"sin\\xADgle\"),\" \",mdx(\"strong\",{parentName:\"p\"},mdx(\"a\",e({parentName:\"strong\"},{href:\"aws.amazon.com/lambda\"}),\"AWS Lambda Func\\xADtion\")),\" using the \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://serverless.com\"}),\"Server\\xADless Frame\\xADwork\")),mdx(\"p\",null,mdx(\"inlineCode\",{parentName:\"p\"},\"Serverless stack definition\"),\":\"),mdx(Gist,{url:\"https://gist.github.com/bytekast/48daa2ca479156c98d2735cca181ef30\",mdxType:\"Gist\"}),mdx(\"h2\",e({},{id:\"solution\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#solution\"})),\"Solution\"),mdx(\"p\",null,\"Use \",mdx(Link,{href:\"/\",passHref:!0,mdxType:\"Link\"},mdx(\"a\",e({parentName:\"p\"},{href:\"\"}),\"Vert.x\")),\"\\u2019s \",mdx(Link,{href:\"/docs/vertx-core/groovy/#event_bus\",passHref:!0,mdxType:\"Link\"},mdx(\"a\",e({parentName:\"p\"},{href:\"\"}),\"Event Bus\")),\" to han\\xADdle \",mdx(\"strong\",{parentName:\"p\"},\"dy\\xADnamic rout\\xADing\"),\" to \",mdx(\"strong\",{parentName:\"p\"},\"event han\\xADdlers\"),\" based on \",mdx(\"em\",{parentName:\"p\"},\"HTTP method\"),\" and \",mdx(\"em\",{parentName:\"p\"},\"re\\xADsource path\"),\" from the API input.\"),mdx(\"p\",null,mdx(\"inlineCode\",{parentName:\"p\"},\"Lambda Handler\"),\":\"),mdx(Gist,{url:\"https://gist.github.com/bytekast/d5a544f8cdcd327a12010100b2ba2d66\",mdxType:\"Gist\"}),mdx(\"h2\",e({},{id:\"code-review\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#code-review\"})),\"Code review\"),mdx(\"p\",null,\"Lines \",mdx(\"inlineCode\",{parentName:\"p\"},\"14-19\"),\" ini\\xADtial\\xADizes the \",mdx(\"strong\",{parentName:\"p\"},\"Vert.x\"),\" in\\xADstance. AWS Lambda will hold on to this in\\xADstance for the life of the con\\xADtainer/\",mdx(\"strong\",{parentName:\"p\"},\"JVM\"),\". It is reused in sub\\xADse\\xADquent re\\xADquests.\"),mdx(\"p\",null,\"Line \",mdx(\"inlineCode\",{parentName:\"p\"},\"17\"),\" reg\\xADis\\xADters the \",mdx(\"strong\",{parentName:\"p\"},\"User Ser\\xADvice\"),\" \",mdx(\"em\",{parentName:\"p\"},\"han\\xADdlers\")),mdx(\"p\",null,\"Line \",mdx(\"inlineCode\",{parentName:\"p\"},\"22\"),\" de\\xADfines the \",mdx(\"strong\",{parentName:\"p\"},\"main han\\xADdler\"),\" method that is called when the \",mdx(\"strong\",{parentName:\"p\"},\"Lambda func\\xADtion\"),\" is in\\xADvoked.\"),mdx(\"p\",null,\"Line \",mdx(\"inlineCode\",{parentName:\"p\"},\"27\"),\" sends the Lambda func\\xADtion input to the (dy\\xADnamic) \",mdx(\"strong\",{parentName:\"p\"},\"ad\\xADdress\"),\" where han\\xADdlers are wait\\xADing to re\\xADspond. \"),mdx(\"p\",null,\"Lines \",mdx(\"inlineCode\",{parentName:\"p\"},\"44-66\"),\" de\\xADfines the spe\\xADcific \",mdx(\"em\",{parentName:\"p\"},\"han\\xADdlers\"),\" and binds them to the ap\\xADpro\\xADpri\\xADate \",mdx(\"em\",{parentName:\"p\"},\"chan\\xADnels\"),\" (http method + re\\xADsource path)\"),mdx(\"h2\",e({},{id:\"summary\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#summary\"})),\"Summary\"),mdx(\"p\",null,\"As you can see, \",mdx(Link,{href:\"/\",passHref:!0,mdxType:\"Link\"},mdx(\"a\",e({parentName:\"p\"},{href:\"\"}),\"Vert.x\")),\"\\u2019s \",mdx(Link,{href:\"/docs/vertx-core/groovy/#event_bus\",passHref:!0,mdxType:\"Link\"},mdx(\"a\",e({parentName:\"p\"},{href:\"\"}),\"Event Bus\")),\" makes it very easy to dy\\xADnam\\xADi\\xADcally sup\\xADport mul\\xADti\\xADple routes in a sin\\xADgle \",mdx(\"strong\",{parentName:\"p\"},\"Server\\xADless\"),\" func\\xADtion. This re\\xADduces the num\\xADber of func\\xADtions you have to man\\xADage, de\\xADploy and main\\xADtain in \",mdx(\"strong\",{parentName:\"p\"},\"AWS\"),\". In ad\\xADdi\\xADtion, you gain ac\\xADcess to asyn\\xADchro\\xADnous, non-\\u200Bblocking APIs that come stan\\xADdard with \",mdx(\"strong\",{parentName:\"p\"},\"Vert.x\"),\".\"),mdx(\"blockquote\",null,mdx(\"p\",{parentName:\"blockquote\"},\"Server\\xADless + Vert.x = BLISS\")))}MDXContent.isMDXComponent=!0;\n","scope":{}}},"prevPost":{"meta":{"title":"Building a real-time web app with Angular/Ngrx and Vert.x","category":"guides","authors":[{"name":"Benoit Hediard","github_id":"benorama"}],"summary":"There are multiple tech stacks to build a real-time web app. What are the best choices to build Angular client apps, connected to a JVM-based backend?"},"date":"2017-04-26","slug":"building-a-real-time-web-app-with-angular-ngrx-and-vert-x"},"nextPost":{"meta":{"title":"Scala is here","category":"guides","authors":[{"name":"Jochen Mader","github_id":"codepitbull"}],"summary":"The rise of Scala as one of the most important languages on the JVM caught many (me included) by surprise. This hybrid of functional and imperative paradigms struck a chord with many developers."},"date":"2017-03-20","slug":"scala-is-here"},"relatedPosts":[{"meta":{"title":"Things to keep in mind concerning CSRF attacks","category":"guides","authors":[{"name":"Xhelal Likaj","github_id":"xhlika"}],"summary":"Eclipse Vert.x like most frameworks provides an anti-CSRF defense. However, no framework can prevent all attack vectors that exist in the web. Therefore, developers need to be aware of some dangers and common attack vectors concerning CSRF defenses."},"date":"2021-01-23","slug":"eclipse-vert-x-CSRF-concerns"},{"meta":{"title":"Eclipse Vert.x based Framework URL Shortener Backend","category":"guides","authors":[{"name":"Lazar Bulić","github_id":"pendula95"}],"summary":"We combine Vert.x with the serverless framework to write a microservice that runs on AWS Lambda."},"date":"2017-12-21","slug":"eclipse-vert-x-based-framework-url-shortener-backend"},{"meta":{"title":"Real-time bidding with Websockets and Vert.x","category":"guides","authors":[{"name":"Marcin Warczyglowa","github_id":"mwarc"}],"summary":"The expectations of users for interactivity with web applications have changed over the past few years.\n    Users during bidding in auction no longer want to press the refresh button."},"date":"2016-01-15","slug":"real-time-bidding-with-websockets-and-vert-x"}]},"__N_SSG":true}