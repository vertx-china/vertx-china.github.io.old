{"pageProps":{"categories":["releases","guides","security","news"],"post":{"meta":{"title":"Vert.x 3 init.d Script","category":"guides","authors":[{"name":"Clement Escoffier","github_id":"cescoffier"}],"summary":"Let's say you have a Vert.x 3 application you want to install on a Linux server. But you want the old school way (I mean not the Docker way)."},"date":"2015-07-02","slug":"vert-x-3-init-d-script","readingTime":{"text":"2 min read","minutes":1.845,"time":110700,"words":369},"content":{"compiledSource":"var m=Object.defineProperty,d=Object.defineProperties;var h=Object.getOwnPropertyDescriptors;var o=Object.getOwnPropertySymbols;var p=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;var i=(a,t,s)=>t in a?m(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s,e=(a,t)=>{for(var s in t||(t={}))p.call(t,s)&&i(a,s,t[s]);if(o)for(var s of o(t))r.call(t,s)&&i(a,s,t[s]);return a},c=(a,t)=>d(a,h(t));var l=(a,t)=>{var s={};for(var n in a)p.call(a,n)&&t.indexOf(n)<0&&(s[n]=a[n]);if(a!=null&&o)for(var n of o(a))t.indexOf(n)<0&&r.call(a,n)&&(s[n]=a[n]);return s};const makeShortcode=a=>function(s){return console.warn(\"Component \"+a+\" was not imported, exported, or provided by MDXProvider as global scope\"),mdx(\"div\",e({},s))},Gist=makeShortcode(\"Gist\"),layoutProps={},MDXLayout=\"wrapper\";function MDXContent(s){var n=s,{components:a}=n,t=l(n,[\"components\"]);return mdx(MDXLayout,c(e(e({},layoutProps),t),{components:a,mdxType:\"MDXLayout\"}),mdx(\"p\",null,\"Let\\u2019s say you have a Vert.x 3 ap\\xADpli\\xADca\\xADtion you want to in\\xADstall on a Linux server. But you want the \",mdx(\"em\",{parentName:\"p\"},\"old school\"),\" way (I mean not the Docker way \",\"\\u263A\",\"). So, in other words, you need an \",mdx(\"em\",{parentName:\"p\"},\"init.d\"),\" script. This post pro\\xADposes an \",mdx(\"em\",{parentName:\"p\"},\"init.d\"),\" script that you can use to start/stop/restart a Vert.x 3 ap\\xADpli\\xADca\\xADtion.\"),mdx(\"h2\",e({},{id:\"prerequisites\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#prerequisites\"})),\"Prerequisites\"),mdx(\"p\",null,\"The pro\\xADposed script as\\xADsumes your ap\\xADpli\\xADca\\xADtion is pack\\xADaged as a \",mdx(\"em\",{parentName:\"p\"},\"fat jar\"),\". So, your ap\\xADpli\\xADca\\xADtion is going to be launched using \",mdx(\"inlineCode\",{parentName:\"p\"},\"java -jar your-fat-jar ...\"),\".\"),mdx(\"h2\",e({},{id:\"the-script\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#the-script\"})),\"The script\"),mdx(\"p\",null,\"The \",mdx(\"em\",{parentName:\"p\"},\"init.d\"),\" scripts have to reply to a set of \",mdx(\"em\",{parentName:\"p\"},\"com\\xADmands\"),\":\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"start\"),\" : starts the ap\\xADpli\\xADca\\xADtion (if not yet started)\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"stop\"),\" : stops the ap\\xADpli\\xADca\\xADtion (if started)\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"status\"),\" : let you know if the ap\\xADpli\\xADca\\xADtion is started or not\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"restart\"),\" : restart the ap\\xADpli\\xADca\\xADtion\")),mdx(\"p\",null,\"These \",mdx(\"em\",{parentName:\"p\"},\"com\\xADmands\"),\" are in\\xADvoked using:\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-bash\"}),`service my-service-script start\nservice my-service-script stop\nservice my-service-script status\nservice my-service-script restart\n`)),mdx(\"p\",null,\"In gen\\xADeral, ser\\xADvice scripts are hooked in the boot and shut\\xADdown se\\xADquences to start and stop au\\xADto\\xADmat\\xADi\\xADcally dur\\xADing the sys\\xADtem starts and stops.\"),mdx(\"p\",null,\"So, enough talks, let\\u2019s look at the script:\"),mdx(Gist,{url:\"https://gist.github.com/cescoffier/ccc8b391787e93f4e6e0\",mdxType:\"Gist\"}),mdx(\"h2\",e({},{id:\"using-the-script\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#using-the-script\"})),\"Using the script\"),mdx(\"p\",null,\"First down\\xADload the script from the \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://gist.githubusercontent.com/cescoffier/ccc8b391787e93f4e6e0/raw/my-vertx-application\"}),\"here\"),\".\"),mdx(\"p\",null,\"You need to set a cou\\xADple of vari\\xADables lo\\xADcated at the be\\xADgin\\xADning of the file:\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-ini\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"# The directory in which your application is installed\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-attr\"}),\"APPLICATION_DIR\"),\"=\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"/opt/my-vertx-app\"'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"# The fat jar containing your application\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-attr\"}),\"APPLICATION_JAR\"),\"=\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"maven-verticle-3.0.0-fat.jar\"'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"# The application argument such as -cluster -cluster-host ...\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-attr\"}),\"APPLICATION_ARGS\"),\"=\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"\"'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"# vert.x options and system properties (-Dfoo=bar).\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-attr\"}),\"VERTX_OPTS\"),\"=\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"\"'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"# The path to the Java command to use to launch the application (must be java 8+)\"),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-attr\"}),\"JAVA\"),`=/opt/java/java/bin/java\n`)),mdx(\"p\",null,\"The rest of the script can stay as it is, but feel free to adapt it to your needs. Once you have set these vari\\xADables based on your en\\xADvi\\xADron\\xADment, move the file to \",mdx(\"inlineCode\",{parentName:\"p\"},\"/etc/init.d\"),\" and set it as ex\\xADe\\xADcutable:\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-bash\"}),`sudo mv my-vertx-application /etc/init.d\nsudo chmod +x my-vertx-application\n`)),mdx(\"p\",null,\"Then, you should be able to start your ap\\xADpli\\xADca\\xADtion using:\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-bash\"}),`sudo service my-vertx-application start\n`)),mdx(\"p\",null,\"De\\xADpend\\xADing to your op\\xADer\\xADat\\xADing sys\\xADtem, adding the hooks to the boot and shut\\xADdown se\\xADquence dif\\xADfers. For in\\xADstance on Ubuntu you need to use the \",mdx(\"inlineCode\",{parentName:\"p\"},\"update-rc.d\"),\" com\\xADmand while on Cen\\xADtOS \",mdx(\"inlineCode\",{parentName:\"p\"},\"chkconfig\"),\" is used\"),mdx(\"p\",null,mdx(\"strong\",{parentName:\"p\"},\"That\\u2019s all, enjoy !\")))}MDXContent.isMDXComponent=!0;\n","scope":{}}},"prevPost":{"meta":{"title":"Vert.x 3 and PostgreSQL JSON type","category":"guides","authors":[{"name":"Paulo Lopes","github_id":"pmlopes"}],"summary":"One of the interesting features of NoSQL databases is their schema-less mode of operation. This feature is very useful during project prototyping and early development since at early the stages of development of projects all data structures are not clear or have been defined yet."},"date":"2015-07-03","slug":"vert-x3-and-postgresql-json-type"},"nextPost":{"meta":{"title":"Vert.x 3 Web easy as Pi","category":"guides","authors":[{"name":"Paulo Lopes","github_id":"pmlopes"}],"summary":"Vert.x Web distinguishes itself from traditional application servers like JavaEE by just being a simple extension toolkit to Vert.x, which makes it quite lightweight and small but nevertheless very powerful."},"date":"2015-07-01","slug":"vert-x3-web-easy-as-pi"},"relatedPosts":[{"meta":{"title":"Unit and Integration Tests","category":"guides","authors":[{"name":"Clement Escoffier","github_id":"cescoffier"}],"summary":"Let’s refresh our mind about what we developed so far in the introduction to vert.x series. We forgot an important task. We didn’t test the API."},"date":"2015-08-03","slug":"unit-and-integration-tests"},{"meta":{"title":"Things to keep in mind concerning CSRF attacks","category":"guides","authors":[{"name":"Xhelal Likaj","github_id":"xhlika"}],"summary":"Eclipse Vert.x like most frameworks provides an anti-CSRF defense. However, no framework can prevent all attack vectors that exist in the web. Therefore, developers need to be aware of some dangers and common attack vectors concerning CSRF defenses."},"date":"2021-01-23","slug":"eclipse-vert-x-CSRF-concerns"},{"meta":{"title":"Some Rest with Vert.x","category":"guides","authors":[{"name":"Clement Escoffier","github_id":"cescoffier"}],"summary":"This post is part of the Introduction to Vert.x series. Let’s go a bit further this time and develop a CRUD-ish application"},"date":"2015-07-27","slug":"some-rest-with-vert-x"}]},"__N_SSG":true}