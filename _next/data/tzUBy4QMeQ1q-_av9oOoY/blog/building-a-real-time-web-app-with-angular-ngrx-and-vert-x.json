{"pageProps":{"categories":["releases","guides","security","news"],"post":{"meta":{"title":"Building a real-time web app with Angular/Ngrx and Vert.x","category":"guides","authors":[{"name":"Benoit Hediard","github_id":"benorama"}],"summary":"There are multiple tech stacks to build a real-time web app. What are the best choices to build Angular client apps, connected to a JVM-based backend?"},"date":"2017-04-26","slug":"building-a-real-time-web-app-with-angular-ngrx-and-vert-x","readingTime":{"text":"7 min read","minutes":6.23,"time":373800,"words":1246},"content":{"compiledSource":"var m=Object.defineProperty,h=Object.defineProperties;var d=Object.getOwnPropertyDescriptors;var r=Object.getOwnPropertySymbols;var p=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;var i=(a,s,t)=>s in a?m(a,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[s]=t,e=(a,s)=>{for(var t in s||(s={}))p.call(s,t)&&i(a,t,s[t]);if(r)for(var t of r(s))o.call(s,t)&&i(a,t,s[t]);return a},l=(a,s)=>h(a,d(s));var c=(a,s)=>{var t={};for(var n in a)p.call(a,n)&&s.indexOf(n)<0&&(t[n]=a[n]);if(a!=null&&r)for(var n of r(a))s.indexOf(n)<0&&o.call(a,n)&&(t[n]=a[n]);return t};const makeShortcode=a=>function(t){return console.warn(\"Component \"+a+\" was not imported, exported, or provided by MDXProvider as global scope\"),mdx(\"div\",e({},t))},Alert=makeShortcode(\"Alert\"),Link=makeShortcode(\"Link\"),layoutProps={},MDXLayout=\"wrapper\";function MDXContent(t){var n=t,{components:a}=n,s=c(n,[\"components\"]);return mdx(MDXLayout,l(e(e({},layoutProps),s),{components:a,mdxType:\"MDXLayout\"}),mdx(\"p\",null,\"Nowa\\xADdays, there are mul\\xADti\\xADple tech stacks to build a real-\\u200Btime web app. What are the best choices to build real-\\u200Btime An\\xADgu\\xADlar client apps, con\\xADnected to a JVM-\\u200Bbased back\\xADend? This ar\\xADti\\xADcle de\\xADscribes an An\\xADgu\\xADlar+Vertx real-\\u200Btime ar\\xADchi\\xADtec\\xADture with a Proof of Con\\xADcept demo app.\"),mdx(Alert,{info:!0,mdxType:\"Alert\"},mdx(\"p\",null,\"This is a re-\\u200Bpublication of the fol\\xADlow\\xADing \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://medium.com/@benorama/building-a-realtime-web-app-with-angular-ngrx-and-vert-x-a5381c0397a1\"}),\"Medium post\"))),mdx(\"h2\",e({},{id:\"intro\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#intro\"})),\"Intro\"),mdx(\"p\",null,mdx(\"strong\",{parentName:\"p\"},\"Wel\\xADcome to the real-\\u200Btime web!\"),\" It\\u2019s time to move on from tra\\xADdi\\xADtional syn\\xADchro\\xADnous HTTP re\\xADquest/re\\xADsponse ar\\xADchi\\xADtec\\xADtures to re\\xADac\\xADtive apps with con\\xADnected clients (ouch\\u2026 that\\u2019s a lot of buzz\\xADwords in just one sen\\xADtence)!\"),mdx(\"p\",null,mdx(\"img\",e({parentName:\"p\"},{src:\"/images/blog/vertx-realtime-angular-ngrx/data-in-motion.jpg\",alt:null}))),mdx(\"p\",null,mdx(\"em\",{parentName:\"p\"},\"Image source: \",mdx(\"a\",e({parentName:\"em\"},{href:\"https://www.voxxed.com\"}),\"https://www.voxxed.com\"))),mdx(\"p\",null,\"To build this kind of app, \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://www.meteor.com\"}),\"Me\\xADte\\xADorJS\"),\" is the new cool kid on the block (v1.0 re\\xADleased in oc\\xADto\\xADber 2014): \",mdx(\"strong\",{parentName:\"p\"},\"a full stack Javascript plat\\xADform to build connected-\\u200Bclient re\\xADac\\xADtive ap\\xADpli\\xADca\\xADtions\"),\". It al\\xADlows JS de\\xADvel\\xADop\\xADers to build and de\\xADploy amaz\\xADing mod\\xADern web and mo\\xADbile apps (iOS/An\\xADdroid) in no time, using a uni\\xADfied back\\xADend+fron\\xADtend code within a sin\\xADgle app repo. That\\u2019s a pretty am\\xADbi\\xADtious ap\\xADproach but it re\\xADquires a very opin\\xADion\\xADated and highly cou\\xADpled JS tech stack and it\\u2019s still a pretty niche frame\\xADwork.\"),mdx(\"p\",null,\"More\\xADover, we are a Java shop on the back\\xADend. At Ago\\xADra\\xADPulse, we rely heav\\xADily on :\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"https://angular.io\"}),\"An\\xADgu\\xADlar\"),\" and \",mdx(\"a\",e({parentName:\"li\"},{href:\"http://ionicframework.com\"}),\"Ionic\"),\" for the JS fron\\xADtend (with a shared busi\\xADness/data ar\\xADchi\\xADtec\\xADture based on \",mdx(\"a\",e({parentName:\"li\"},{href:\"https://github.com/ngrx/store\"}),\"Ngrx\"),\"),\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"http://www.groovy-lang.org\"}),\"Groovy\"),\" and \",mdx(\"a\",e({parentName:\"li\"},{href:\"https://grails.org\"}),\"Grails\"),\" ecosys\\xADtem for the JVM back\\xADend.\")),mdx(\"p\",null,\"So my ques\\xADtion is:\"),mdx(\"blockquote\",null,mdx(\"p\",{parentName:\"blockquote\"},\"What are the best choices to build real-\\u200Btime An\\xADgu\\xADlar client apps, con\\xADnected to a JVM-\\u200Bbased back\\xADend these days?\")),mdx(\"p\",null,`Our re\\xADquire\\xADments are pretty basic. We don\\u2019t need full Me\\xADteor\\u2019s end-\\u200Bto-end ap\\xADpli\\xADca\\xADtion model.\nWe just want to be able to :`),mdx(\"ol\",null,mdx(\"li\",{parentName:\"ol\"},\"build a re\\xADac\\xADtive app with an event bus on the JVM, and\"),mdx(\"li\",{parentName:\"ol\"},\"ex\\xADtend the event bus down to the browser to be able to pub\\xADlish/sub\\xADscribe to real-\\u200Btime events from an An\\xADgu\\xADlar app.\")),mdx(\"h3\",e({},{id:\"server-side-jvm\"}),mdx(\"a\",e({parentName:\"h3\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#server-side-jvm\"})),\"Server side (JVM)\"),mdx(\"p\",null,\"Re\\xADac\\xADtive apps is a hot topic nowa\\xADdays and there are many great libs/plat\\xADforms to build this type of event-\\u200Bdriven ar\\xADchi\\xADtec\\xADture on the JVM:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(Link,{href:\"/\",passHref:!0,mdxType:\"Link\"},mdx(\"a\",e({parentName:\"li\"},{href:\"\"}),\"Vert.x\")),\",\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"https://www.lightbend.com\"}),\"Light\\xADbend\"),\" plat\\xADform (Play, Akka, Scala),\"),mdx(\"li\",{parentName:\"ul\"},\"Spring \",mdx(\"a\",e({parentName:\"li\"},{href:\"http://projectreactor.io\"}),\"Project Re\\xADac\\xADtor\"),\" (in\\xADte\\xADgrated into Grails 3.0).\")),mdx(\"h3\",e({},{id:\"client-side\"}),mdx(\"a\",e({parentName:\"h3\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#client-side\"})),\"Client side\"),mdx(\"p\",null,mdx(\"a\",e({parentName:\"p\"},{href:\"http://facebook.github.io/react/\"}),\"Re\\xADac\\xADtJS\"),\" and \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://angular.io\"}),\"An\\xADgu\\xADlar\"),\" are the two most pop\\xADu\\xADlar frame\\xADwork right now to build mod\\xADern JS apps. Most plat\\xADforms use \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://github.com/sockjs/sockjs-client\"}),\"SockJS\"),\" to han\\xADdle real-\\u200Btime con\\xADnec\\xADtions:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(Link,{href:\"/docs/vertx-web/groovy/\",passHref:!0,mdxType:\"Link\"},mdx(\"a\",e({parentName:\"li\"},{href:\"\"}),\"Vertx-\\u200Bweb\")),\" pro\\xADvides a SockJS server im\\xADple\\xADmen\\xADta\\xADtion with an event bus bridge and a \",mdx(Link,{href:\"/docs/vertx-web/groovy/#_sockjs_event_bus_bridge\",passHref:!0,mdxType:\"Link\"},mdx(\"a\",e({parentName:\"li\"},{href:\"\"}),\"vertx-\\u200Bevenbus.js\")),\" client li\\xADbrary (very easy to use),\"),mdx(\"li\",{parentName:\"ul\"},\"Spring pro\\xADvides web\\xADsocket SockJS sup\\xADport though Spring Mes\\xADsag\\xADing and Web\\xADsocket libs (see an ex\\xADam\\xADple \",mdx(\"a\",e({parentName:\"li\"},{href:\"https://spring.io/guides/gs/messaging-stomp-websocket/\"}),\"here\"),\")\")),mdx(\"h3\",e({},{id:\"final-choice-vertx--angular\"}),mdx(\"a\",e({parentName:\"h3\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#final-choice-vertx--angular\"})),\"Final choice: Vert.x + Angular\"),mdx(\"p\",null,\"In the end, I\\u2019ve cho\\xADsen to ex\\xADper\\xADi\\xADment with Vert.x for its ex\\xADcel\\xADlent Groovy sup\\xADport, dis\\xADtrib\\xADuted event bus, scal\\xADa\\xADbil\\xADity and ease of use.\"),mdx(\"p\",null,\"I en\\xADjoyed it very much. Let me show you the re\\xADsult of my ex\\xADper\\xADi\\xADmen\\xADta\\xADtion which is the root of our real-\\u200Btime fea\\xADtures com\\xADing very soon in Ago\\xADra\\xADPulse v6.0!\"),mdx(\"h2\",e({},{id:\"why-vertx\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#why-vertx\"})),\"Why Vert.x?\"),mdx(\"p\",null,\"Like other re\\xADac\\xADtive plat\\xADform, Vert.x is event dri\\xADven and non block\\xADing. It scales very well (even more that Node.js).\"),mdx(\"p\",null,\"Un\\xADlike other re\\xADac\\xADtive plat\\xADforms, Vert.x is poly\\xADglot: you can use Vert.x with mul\\xADti\\xADple lan\\xADguages in\\xADclud\\xADing Java, JavaScript, Groovy, Ruby, Cey\\xADlon, Scala and Kotlin.\"),mdx(\"p\",null,\"Un\\xADlike Node.js, Vert.x is a gen\\xADeral pur\\xADpose tool-\\u200Bkit and un\\xADopin\\xADion\\xADated. It\\u2019s a ver\\xADsa\\xADtile plat\\xADform suit\\xADable for many things: from sim\\xADple net\\xADwork util\\xADi\\xADties, so\\xADphis\\xADti\\xADcated mod\\xADern web ap\\xADpli\\xADca\\xADtions, HTTP/REST mi\\xADcroser\\xADvices or a full blown back-\\u200Bend message-\\u200Bbus ap\\xADpli\\xADca\\xADtion.\"),mdx(\"p\",null,\"Like other re\\xADac\\xADtive plat\\xADforms, it looks scary in the be\\xADgin\\xADing when you read the doc\\xADu\\xADmen\\xADta\\xADtion\\u2026 ;) But once you start play\\xADing with it, it re\\xADmains fun and sim\\xADple to use, es\\xADpe\\xADcially with Groovy! Vert.x re\\xADally al\\xADlows you to build sub\\xADstan\\xADtial sys\\xADtems with\\xADout get\\xADting tan\\xADgled in com\\xADplex\\xADity.\"),mdx(\"p\",null,\"In my case, I was mainly in\\xADter\\xADested by the dis\\xADtrib\\xADuted event-\\u200Bbus pro\\xADvided (a core fea\\xADture of Vert.x).\"),mdx(\"p\",null,mdx(\"strong\",{parentName:\"p\"},\"To val\\xADi\\xADdate our ap\\xADproach, we built pro\\xADto\\xADtypes with the fol\\xADlow\\xADing goals:\")),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"strong\",{parentName:\"li\"},\"share and syn\\xADchro\\xADnize a com\\xADmon (Ngrx-\\u200Bbased) state be\\xADtween mul\\xADti\\xADple con\\xADnected clients, and\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"strong\",{parentName:\"li\"},\"dis\\xADtrib\\xADute real-\\u200Btime (Ngrx-\\u200Bbased) ac\\xADtions across mul\\xADti\\xADple con\\xADnected clients, which im\\xADpact local states/re\\xADduc\\xADers.\"))),mdx(Alert,{info:!0,mdxType:\"Alert\"},mdx(\"p\",null,mdx(\"a\",e({parentName:\"p\"},{href:\"https://github.com/ngrx/store\"}),\"@ngrx/store\"),\" is a RxJS pow\\xADered state man\\xADage\\xADment in\\xADspired by Redux for An\\xADgu\\xADlar apps. It\\u2019s cur\\xADrently the most pop\\xADu\\xADlar way to struc\\xADture com\\xADplex busi\\xADness logic in An\\xADgu\\xADlar apps.\")),mdx(\"p\",null,mdx(\"img\",e({parentName:\"p\"},{src:\"/images/blog/vertx-realtime-angular-ngrx/redux.png\",alt:\"Redux\"}))),mdx(\"p\",null,mdx(\"em\",{parentName:\"p\"},\"Source: \",mdx(\"a\",e({parentName:\"em\"},{href:\"https://www.smashingmagazine.com/2016/06/an-introduction-to-redux/\"}),\"https://www.smash\\xADing\\xADmagazine.com/2016/06/an-\\u200Bintroduction-to-redux/\"))),mdx(\"h2\",e({},{id:\"proof-of-concept\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#proof-of-concept\"})),\"PROOF OF CONCEPT\"),mdx(\"p\",null,\"Here is the repo of our ini\\xADtial proof of con\\xADcept:\"),mdx(\"p\",null,mdx(\"a\",e({parentName:\"p\"},{href:\"http://github.com/benorama/ngrx-realtime-app\"}),\"http://github.com/beno\\xADrama/ngrx-\\u200Brealtime-app\")),mdx(\"p\",null,\"The repo is di\\xADvided into two sep\\xADa\\xADrate projects:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"strong\",{parentName:\"li\"},\"Vert.x server app\"),\", based on \",mdx(Link,{href:\"/\",passHref:!0,mdxType:\"Link\"},mdx(\"a\",e({parentName:\"li\"},{href:\"\"}),\"Vert.x\")),\" (ver\\xADsion 3.3), man\\xADaged by \",mdx(\"a\",e({parentName:\"li\"},{href:\"https://gradle.org\"}),\"Gra\\xADdle\"),\", with a main ver\\xADti\\xADcle de\\xADvel\\xADoped in \",mdx(\"a\",e({parentName:\"li\"},{href:\"http://groovy-lang.org\"}),\"Groovy\"),\" lang.\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"strong\",{parentName:\"li\"},\"An\\xADgu\\xADlar client app\"),\", based on An\\xADgu\\xADlar (ver\\xADsion 4.0.1), man\\xADaged by \",mdx(\"a\",e({parentName:\"li\"},{href:\"https://angular.io\"}),\"An\\xADgu\\xADlar\"),\" CLI with state, re\\xADduc\\xADers and ac\\xADtions logic based on \",mdx(\"a\",e({parentName:\"li\"},{href:\"https://github.com/ngrx/store\"}),\"@ngrx/store\"),\" (ver\\xADsion 2.2.1)\")),mdx(\"p\",null,\"For the demo, we are using the counter ex\\xADam\\xADple code (ac\\xADtions and re\\xADduc\\xADers) from \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://github.com/ngrx/store\"}),\"@ngrx/store\"),\".\"),mdx(\"p\",null,\"The counter client busi\\xADness logic is based on:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"CounterState\"),\" in\\xADter\\xADface, counter state model,\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"counterReducer\"),\" re\\xADducer, counter state man\\xADage\\xADment based on dis\\xADpatched ac\\xADtions, and\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"em\",{parentName:\"li\"},\"In\\xADcre\\xADment\"),\", \",mdx(\"em\",{parentName:\"li\"},\"decre\\xADment\"),\" and \",mdx(\"em\",{parentName:\"li\"},\"reset\"),\" counter ac\\xADtions.\")),mdx(\"p\",null,\"State is main\\xADtained server-\\u200Bside with a sim\\xADple sin\\xADgle\\xADton \",mdx(\"inlineCode\",{parentName:\"p\"},\"CounterService\"),\".\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-groovy\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-class\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-keyword\"}),\"class\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-title\"}),\"CounterService\"),\" {\"),`\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"static\"),\" INCREMENT = \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),\"'[Counter] Increment'\"),`\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"static\"),\" DECREMENT = \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),\"'[Counter] Decrement'\"),`\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"static\"),\" RESET = \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),\"'[Counter] Reset'\"),`\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"int\"),\" total = \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-number\"}),\"0\"),`\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"void\"),` handleEvent(event) {\n        `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"switch\"),`(event.type) {\n            `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"case\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-attr\"}),\"INCREMENT:\"),`\n                total++\n                `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"break\"),`\n            `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"case\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-attr\"}),\"DECREMENT:\"),`\n                total--\n                `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"break\"),`\n            `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"case\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-attr\"}),\"RESET:\"),`\n                total = `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-number\"}),\"0\"),`\n                `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"break\"),`\n        }\n    }\n}\n`)),mdx(\"h3\",e({},{id:\"client-state-initialization-through-requestresponse\"}),mdx(\"a\",e({parentName:\"h3\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#client-state-initialization-through-requestresponse\"})),\"Client state initialization through Request/Response\"),mdx(\"p\",null,\"Ini\\xADtial state is ini\\xADtial\\xADized with sim\\xADple \",mdx(\"strong\",{parentName:\"p\"},\"re\\xADquest/re\\xADsponse\"),` (or send/reply) on the event bus.\nOnce the client is con\\xADnected, it sends a re\\xADquest to the event bus at the ad\\xADdress `,mdx(\"strong\",{parentName:\"p\"},\"counter::total\"),\". The server replies di\\xADrectly with the value of \",mdx(\"inlineCode\",{parentName:\"p\"},\"CounterService\"),\" total and the client dis\\xADpatches lo\\xADcally a \",mdx(\"em\",{parentName:\"p\"},\"reset\"),\" ac\\xADtion with the total value from the reply.\"),mdx(\"p\",null,mdx(\"img\",e({parentName:\"p\"},{src:\"/images/blog/vertx-realtime-angular-ngrx/vertx-request-response.png\",alt:\"Vertx Request Response\"}))),mdx(\"p\",null,mdx(\"em\",{parentName:\"p\"},\"Source: \",mdx(\"a\",e({parentName:\"em\"},{href:\"https://www.slideshare.net/RedHatDevelopers/vertx-microservices-were-never-so-easy-clement-escoffier\"}),\"https://www.slideshare.net/Red\\xADHat\\xADDe\\xADvel\\xADop\\xADers/vertx-\\u200Bmicroservices-were-never-so-easy-clement-escoffier\"))),mdx(\"p\",null,\"Here is an ex\\xADtract of the cor\\xADre\\xADspond\\xADing code (from \",mdx(\"inlineCode\",{parentName:\"p\"},\"AppEventBusService\"),\"):\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-typescript\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-function\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-title\"}),\"initializeCounter\"),\"(\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-params\"})),\")\"),` {\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"this\"),\".eventBusService.send(\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),\"'counter::total'\"),\", body, \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-function\"}),\"(\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-params\"}),\"error, message\"),\") =>\"),` {\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"// Handle reply\"),`\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"if\"),` (message && message.body) {\n            `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"let\"),\" localAction = \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"new\"),` CounterActions.ResetAction();\n            localAction.payload = message.body; `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"// Total value\"),`\n            `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"this\"),`.store.dispatch(localAction);\n        }\n    });\n}\n`)),mdx(\"h3\",e({},{id:\"actions-distribution-through-publishsubscribe\"}),mdx(\"a\",e({parentName:\"h3\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#actions-distribution-through-publishsubscribe\"})),\"Actions distribution through Publish/Subscribe\"),mdx(\"p\",null,\"Ac\\xADtion dis\\xADtri\\xADb\\xADu\\xADtion/sync uses the \",mdx(\"strong\",{parentName:\"p\"},\"pub\\xADlish/sub\\xADscribe\"),\" pat\\xADtern.\"),mdx(\"p\",null,\"Counter ac\\xADtions are pub\\xADlished from the client to the event bus at the ad\\xADdress \",mdx(\"strong\",{parentName:\"p\"},\"counter::ac\\xADtions\"),\".\"),mdx(\"p\",null,\"Any client that have sub\\xADscribed to \",mdx(\"strong\",{parentName:\"p\"},\"counter::ac\\xADtions\"),\" ad\\xADdress will re\\xADceive the ac\\xADtions and re\\xADdis\\xADpatch them lo\\xADcally to im\\xADpact app states/re\\xADduc\\xADers.\"),mdx(\"p\",null,mdx(\"img\",e({parentName:\"p\"},{src:\"/images/blog/vertx-realtime-angular-ngrx/vertx-publish-subscribe.png\",alt:\"Vertx Publish Subscribe\"}))),mdx(\"p\",null,mdx(\"em\",{parentName:\"p\"},\"Source: \",mdx(\"a\",e({parentName:\"em\"},{href:\"https://www.slideshare.net/RedHatDevelopers/vertx-microservices-were-never-so-easy-clement-escoffier\"}),\"https://www.slideshare.net/Red\\xADHat\\xADDe\\xADvel\\xADop\\xADers/vertx-\\u200Bmicroservices-were-never-so-easy-clement-escoffier\"))),mdx(\"p\",null,\"Here is an ex\\xADtract of the cor\\xADre\\xADspond\\xADing code (from \",mdx(\"inlineCode\",{parentName:\"p\"},\"AppEventBusService\"),\"):\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-typescript\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-function\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-title\"}),\"publishAction\"),\"(\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-params\"}),\"action: RemoteAction\"),\")\"),` {\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"if\"),` (action.publishedByUser) {\n        `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"console\"),\".error(\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"This action has already been published\"'),`);\n        `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"return\"),`;\n    }\n    action.publishedByUser = `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"this\"),`.currentUser;\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"this\"),`.eventBusService.publish(action.eventBusAddress, action);\n}\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-function\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-title\"}),\"subscribeToActions\"),\"(\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-params\"}),\"eventBusAddress: \",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-built_in\"}),\"string\")),\")\"),` {\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"this\"),\".eventBusService.registerHandler(eventBusAddress, \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-function\"}),\"(\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-params\"}),\"error, message\"),\") =>\"),` {\n        `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"// Handle message from subscription\"),`\n        `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"if\"),\" (message.body.publishedByUser === \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"this\"),`.currentUser) {\n            `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"// Ignore action sent by current manager\"),`\n            `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"return\"),`;\n        }\n        `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"let\"),` localAction = message.body;\n        `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"this\"),`.store.dispatch(localAction);\n    });\n}\n`)),mdx(\"p\",null,\"The event bus pub\\xADlish\\xADing logic is achieved through a sim\\xADple Ngrx Ef\\xADfects. Any ac\\xADtions that ex\\xADtend \",mdx(\"inlineCode\",{parentName:\"p\"},\"RemoteAction\"),\" class will be pub\\xADlished to the event bus.\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-typescript\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-meta\"}),\"@Injectable\"),`()\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"export\"),\" \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-class\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-keyword\"}),\"class\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-title\"}),\"AppEventBusEffects\"),\" \"),`{\n\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-function\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-title\"}),\"constructor\"),\"(\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-params\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-keyword\"}),\"private\"),\" actions$: Actions, \",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-keyword\"}),\"private\"),\" appEventBusService: AppEventBusService\"),\")\"),` {}\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"// Listen to all actions and publish remote actions to account event bus\"),`\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-meta\"}),\"@Effect\"),\"({\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-attr\"}),\"dispatch\"),\": \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-literal\"}),\"false\"),\"}) remoteAction$ = \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"this\"),`.actions$\n        .filter(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-function\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-params\"}),\"action\"),\" =>\"),\" action \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"instanceof\"),\" RemoteAction && action.publishedByUser == \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-literal\"}),\"undefined\"),`)\n        .do(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-function\"}),\"(\",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-params\"}),\"action: RemoteAction\"),\") =>\"),` {\n            `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"this\"),`.appEventBusService.publishAction(action);\n        });\n\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-meta\"}),\"@Effect\"),\"({\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-attr\"}),\"dispatch\"),\": \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-literal\"}),\"false\"),\"}) login$ = \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"this\"),`.actions$\n        .ofType(UserActionTypes.LOGIN)\n        .do(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-function\"}),\"() =>\"),` {\n            `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"this\"),`.appEventBusService.connect();\n        });\n}\n`)),mdx(\"p\",null,\"You can see all of this in ac\\xADtion by lo\\xADcally launch\\xADing the server and the client app in two sep\\xADa\\xADrate browser win\\xADdows.\"),mdx(\"p\",null,mdx(\"img\",e({parentName:\"p\"},{src:\"/images/blog/vertx-realtime-angular-ngrx/demo-app-screen.png\",alt:\"Demo app screen\"}))),mdx(\"p\",null,mdx(\"em\",{parentName:\"p\"},\"Bonus: the demo app also in\\xADcludes user sta\\xADtus (of\\xADfline/on\\xADline), based of the event bus con\\xADnec\\xADtion sta\\xADtus.\")),mdx(\"p\",null,\"The counter state is shared and syn\\xADchro\\xADnized be\\xADtween con\\xADnected clients and each local ac\\xADtion is dis\\xADtrib\\xADuted in real-\\u200Btime to other clients.\"),mdx(\"p\",null,mdx(\"strong\",{parentName:\"p\"},\"Mis\\xADsion ac\\xADcom\\xADplished!\")),mdx(Alert,{info:!0,title:\"Typescript version of Vertx EventBus Client\",mdxType:\"Alert\"},mdx(\"p\",null,\"The app uses our own Type\\xADscript ver\\xADsion of the of\\xADfi\\xADcial JS \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://github.com/vert-x3/vertx-bus-bower\"}),\"Vertx Event\\xADBus Client\"),\". It can be found \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://gist.github.com/benorama/93373c3c1c3574732d6cc1b4754aab9f\"}),\"here\"),\", any feed\\xADback, im\\xADprove\\xADment sug\\xADges\\xADtions are wel\\xADcome!\")))}MDXContent.isMDXComponent=!0;\n","scope":{}}},"prevPost":{"meta":{"title":"Time scheduling with Chime","category":"guides","authors":[{"name":"Lisi","github_id":"LisiLisenok"}],"summary":"Eclipse Vert.x executes periodic and delayed actions with periodic and one-shot timers. Chime is a time scheduler verticle that works on the Vert.x event bus."},"date":"2017-05-09","slug":"time-scheduling-with-chime"},"nextPost":{"meta":{"title":"Dynamic Routing in Serverless Microservice with Vert.x Event Bus","category":"guides","authors":[{"name":"Rowell Belen","github_id":"bytekast"}],"summary":"The Serverless Framework has become the de facto toolkit for building and deploying serverless functions or applications."},"date":"2017-04-14","slug":"dynamic-routing-in-serverless-microservice-with-vert-x-event-bus"},"relatedPosts":[{"meta":{"title":"Things to keep in mind concerning CSRF attacks","category":"guides","authors":[{"name":"Xhelal Likaj","github_id":"xhlika"}],"summary":"Eclipse Vert.x like most frameworks provides an anti-CSRF defense. However, no framework can prevent all attack vectors that exist in the web. Therefore, developers need to be aware of some dangers and common attack vectors concerning CSRF defenses."},"date":"2021-01-23","slug":"eclipse-vert-x-CSRF-concerns"},{"meta":{"title":"Real-time bidding with Websockets and Vert.x","category":"guides","authors":[{"name":"Marcin Warczyglowa","github_id":"mwarc"}],"summary":"The expectations of users for interactivity with web applications have changed over the past few years.\n    Users during bidding in auction no longer want to press the refresh button."},"date":"2016-01-15","slug":"real-time-bidding-with-websockets-and-vert-x"},{"meta":{"title":"Easy SSO for Vert.x with Keycloak","category":"guides","authors":[{"name":"Thomas Darimont","github_id":"thomasdarimont"}],"summary":"In this blog post, you'll learn how to implement Single Sign-on with OpenID Connect and how to use Keycloak together with Eclipse Vert.x."},"date":"2020-03-16","slug":"easy-sso-for-vert-x-with-keycloak"}]},"__N_SSG":true}