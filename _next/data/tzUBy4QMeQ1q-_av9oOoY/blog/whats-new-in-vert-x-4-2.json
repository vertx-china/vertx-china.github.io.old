{"pageProps":{"categories":["releases","guides","security","news"],"post":{"meta":{"title":"What's new in Vert.x 4.2","category":"releases","authors":[{"name":"Julien Viet","github_id":"vietj"}],"summary":"See an overview of all new and exciting features in Vert.x 4.2, including Java 17 support, Vert.x Oracle Client and more.","pinned":true},"date":"2021-10-26","slug":"whats-new-in-vert-x-4-2","readingTime":{"text":"4 min read","minutes":3.59,"time":215400,"words":718},"content":{"compiledSource":"var d=Object.defineProperty,c=Object.defineProperties;var m=Object.getOwnPropertyDescriptors;var i=Object.getOwnPropertySymbols;var s=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;var l=(a,n,t)=>n in a?d(a,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[n]=t,e=(a,n)=>{for(var t in n||(n={}))s.call(n,t)&&l(a,t,n[t]);if(i)for(var t of i(n))o.call(n,t)&&l(a,t,n[t]);return a},p=(a,n)=>c(a,m(n));var h=(a,n)=>{var t={};for(var r in a)s.call(a,r)&&n.indexOf(r)<0&&(t[r]=a[r]);if(a!=null&&i)for(var r of i(a))n.indexOf(r)<0&&o.call(a,r)&&(t[r]=a[r]);return t};const makeShortcode=a=>function(t){return console.warn(\"Component \"+a+\" was not imported, exported, or provided by MDXProvider as global scope\"),mdx(\"div\",e({},t))},Link=makeShortcode(\"Link\"),layoutProps={},MDXLayout=\"wrapper\";function MDXContent(t){var r=t,{components:a}=r,n=h(r,[\"components\"]);return mdx(MDXLayout,p(e(e({},layoutProps),n),{components:a,mdxType:\"MDXLayout\"}),mdx(\"p\",null,\"Vert.x 4.2 comes with plenty of new ex\\xADcit\\xADing fea\\xADtures.\"),mdx(\"p\",null,\"Here is an overview of the most im\\xADpor\\xADtant fea\\xADtures sup\\xADported in Vert.x 4.2.\"),mdx(\"h2\",e({},{id:\"java-17\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#java-17\"})),\"Java 17\"),mdx(\"p\",null,\"Vert.x 4.2 comes with of\\xADfi\\xADcial sup\\xADport of Java 17.\"),mdx(\"p\",null,\"Our CI has been up\\xADdated to test from our Java 8 base\\xADline to the very re\\xADcent Java 17 re\\xADlease.\"),mdx(\"h2\",e({},{id:\"reactive-sql-clients\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#reactive-sql-clients\"})),\"Reactive SQL Clients\"),mdx(\"h3\",e({},{id:\"oracle-client\"}),mdx(\"a\",e({parentName:\"h3\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#oracle-client\"})),\"Oracle client\"),mdx(\"p\",null,\"The \",mdx(Link,{href:\"/docs/4.2.0/vertx-oracle-client/java/\",passHref:!0,mdxType:\"Link\"},mdx(\"a\",e({parentName:\"p\"},{href:\"\"}),\"Re\\xADac\\xADtive Or\\xADa\\xADcle Client\")),\" joins the \",mdx(Link,{href:\"/docs/#databases\",passHref:!0,mdxType:\"Link\"},mdx(\"a\",e({parentName:\"p\"},{href:\"\"}),\"data\\xADbase clients\")),\" fam\\xADily!\"),mdx(\"p\",null,\"This client is in tech pre\\xADview and we are eager to hear any feed\\xADback you may have.\"),mdx(\"h3\",e({},{id:\"microsoft-sql-server-client\"}),mdx(\"a\",e({parentName:\"h3\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#microsoft-sql-server-client\"})),\"Microsoft SQL Server client\"),mdx(\"h4\",e({},{id:\"encryption\"}),mdx(\"a\",e({parentName:\"h4\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#encryption\"})),\"Encryption\"),mdx(\"p\",null,\"The Re\\xADac\\xADtive SQL Server Client is able to ne\\xADgo\\xADti\\xADate the en\\xADcryp\\xADtion level when a con\\xADnec\\xADtion is es\\xADtab\\xADlished:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"no en\\xADcryp\\xADtion\"),mdx(\"li\",{parentName:\"ul\"},\"en\\xADcrypt login packet only\"),mdx(\"li\",{parentName:\"ul\"},\"en\\xADcrypt en\\xADtire con\\xADnec\\xADtion\")),mdx(\"h4\",e({},{id:\"azure-sql-database\"}),mdx(\"a\",e({parentName:\"h4\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#azure-sql-database\"})),\"Azure SQL Database\"),mdx(\"p\",null,\"Our client is now able to con\\xADnect to \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://docs.microsoft.com/en-us/azure/azure-sql/database/sql-database-paas-overview\"}),\"Azure SQL Data\\xADbase\"),\" servers.\"),mdx(\"p\",null,\"This was made pos\\xADsi\\xADble thanks to:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"en\\xADcryp\\xADtion sup\\xADport (see above)\"),mdx(\"li\",{parentName:\"ul\"},\"en\\xADhance\\xADments in the pro\\xADto\\xADcol im\\xADple\\xADmen\\xADta\\xADtion (\",mdx(\"a\",e({parentName:\"li\"},{href:\"https://github.com/eclipse-vertx/vertx-sql-client/pull/1038\"}),\"TDS \",mdx(\"inlineCode\",{parentName:\"a\"},\"ENV_CHANGE\"),\" \",mdx(\"inlineCode\",{parentName:\"a\"},\"ROUTING\"),\" token sup\\xADport\"),\")\")),mdx(\"h2\",e({},{id:\"mqtt-server-v5-support\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#mqtt-server-v5-support\"})),\"MQTT Server V5 support\"),mdx(\"p\",null,\"The MQTT Server has been up\\xADgraded to sup\\xADport the ver\\xADsion 5 of the pro\\xADto\\xADcol par\\xADtially (the auth mes\\xADsage re\\xADmains to be im\\xADple\\xADmented).\"),mdx(\"h2\",e({},{id:\"cassandra-client\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#cassandra-client\"})),\"Cassandra Client\"),mdx(\"p\",null,\"The Cas\\xADsan\\xADdra Client can trace query ex\\xADe\\xADcu\\xADtion when Vert.x has trac\\xADing en\\xADabled.\"),mdx(\"p\",null,\"The client re\\xADports the fol\\xADlow\\xADing \",mdx(\"em\",{parentName:\"p\"},\"client\"),\" spans:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"Query\"),\" op\\xADer\\xADa\\xADtion name\"),mdx(\"li\",{parentName:\"ul\"},\"tags\",mdx(\"ul\",{parentName:\"li\"},mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"peer.address\"),\": list of nodes known to the dri\\xADver, in the form \",mdx(\"inlineCode\",{parentName:\"li\"},\"[127_0_0_1:9042,localhost:9042,myhost_mydomain:9042]\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"span.kind\"),\": \",mdx(\"inlineCode\",{parentName:\"li\"},\"client\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"db.instance\"),\": the key\\xADspace\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"db.statement\"),\": the CQL query\"),mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},\"db.type\"),\": \",mdx(\"inlineCode\",{parentName:\"li\"},\"cassandra\"))))),mdx(\"h2\",e({},{id:\"web-client-enhancements\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#web-client-enhancements\"})),\"Web Client enhancements\"),mdx(\"p\",null,\"Our Web Client sup\\xADports now Oauth2 au\\xADto\\xADmated token se\\xADcu\\xADrity man\\xADage\\xADment.\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-java\"}),`WebClient client = WebClient.create(vertx);\nOAuth2WebClient oauth2 = OAuth2WebClient.create(\n    client,\n    OAuth2Auth.create(vertx, `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"new\"),\" OAuth2Options(\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"/* enter IdP config */\"),`)))\n\n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"// configure the initial credentials (needed to fetch if needed\"),`\n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"// the access_token\"),`\n  .withCredentials(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"new\"),\" TokenCredentials(\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"some.jwt.token\"'),`));\n`)),mdx(\"p\",null,\"To\\xADkens are now fetched or re\\xADfreshed dur\\xADing the life\\xADcy\\xADcle of the client.\"),mdx(\"p\",null,\"It also of\\xADfers an HTTP re\\xADsponse caching fa\\xADcil\\xADity.\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-java\"}),`WebClient client = WebClient.create(vertx);\nWebClient cachingWebClient = CachingWebClient.create(client);\n`)),mdx(\"h2\",e({},{id:\"auth-enhancements\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#auth-enhancements\"})),\"Auth enhancements\"),mdx(\"h3\",e({},{id:\"webauthn\"}),mdx(\"a\",e({parentName:\"h3\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#webauthn\"})),\"Webauthn\"),mdx(\"p\",null,\"We\\xADbau\\xADthn now sup\\xADports \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://fidoalliance.org/metadata/\"}),\"MDS3\"),\". The now \\u201Clegacy\\u201D MDS2 is still avail\\xADable as the ser\\xADvice is ex\\xADpected to be run\\xADning until Nov 2022. In terms of usage, noth\\xADing changed, the mod\\xADule can iden\\xADtify the meta\\xADdata ver\\xADsion from the pay\\xADload and de\\xADcide how to han\\xADdle it in\\xADter\\xADnally.\"),mdx(\"h3\",e({},{id:\"otp\"}),mdx(\"a\",e({parentName:\"h3\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#otp\"})),\"OTP\"),mdx(\"p\",null,\"A new mod\\xADule and han\\xADdler for 2nd fac\\xADtor au\\xADthen\\xADti\\xADca\\xADtion is now avail\\xADable:\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-java\"}),`OtpAuthHandler otp = OtpAuthHandler.create(TotpAuth.create();\n\notp\n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"// the issuer for the application\"),`\n  .issuer(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"Vert.x Demo\"'),`)\n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"// handle code verification responses\"),`\n  .verifyUrl(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"/verify-otp.html\"'),`)\n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"// handle registration of authenticators\"),`\n  .setupRegisterCallback(router.post(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"/otp/register\"'),`))\n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"// handle verification of authenticators\"),`\n  .setupCallback(router.post(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"/otp/verify\"'),`));\n`)),mdx(\"p\",null,\"This mod\\xADule and han\\xADdler are com\\xADpat\\xADi\\xADble with google au\\xADthen\\xADti\\xADca\\xADtor and sim\\xADi\\xADlar apps.\"),mdx(\"h2\",e({},{id:\"openapi\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#openapi\"})),\"OpenAPI\"),mdx(\"p\",null,\"When using Ope\\xADnAPI and event\\xADbus de\\xADployed ser\\xADvices, when de\\xADploy\\xADing se\\xADcure APIs, the HTTP \",mdx(\"inlineCode\",{parentName:\"p\"},\"Authorization\"),\" header is now prop\\xADa\\xADgated along with the re\\xADquest all the way with the re\\xADquest on the event\\xADbus. This paves the way to cre\\xADate a \",mdx(\"inlineCode\",{parentName:\"p\"},\"Zero Trust\"),\" foun\\xADda\\xADtion for vert.x dis\\xADtrib\\xADuted ap\\xADpli\\xADca\\xADtions.\"),mdx(\"h2\",e({},{id:\"redis-client\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#redis-client\"})),\"Redis Client\"),mdx(\"p\",null,\"Redis client now sup\\xADport \",mdx(\"inlineCode\",{parentName:\"p\"},\"REPLICATION\"),\" mode. This mode is com\\xADmonly used by cloud providers like Azure and AWS. The client will act just like in a clus\\xADtered mode, with less over\\xADhead as the host\\xADing will per\\xADform most of the clus\\xADtered tasks, not the client.\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-java\"}),`Redis.createClient(\n      vertx,\n      `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"new\"),` RedisOptions()\n        .setType(RedisClientType.REPLICATION)\n        .addConnectionString(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"redis://localhost:7000\"'),`))\n      .connect()\n      .onSuccess(conn -> {\n        `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"// this is a replication client.\"),`\n        `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"// write operations will end up in the master node\"),`\n        conn.send(Request.cmd(Command.SET).arg(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"key\"'),\").arg(\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"value\"'),`));\n        `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"// and read operations will end up in the replica nodes if available\"),`\n        conn.send(Request.cmd(Command.GET).arg(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"key\"'),`));\n      });\n`)),mdx(\"h2\",e({},{id:\"vertx-web-graphql\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#vertx-web-graphql\"})),\"Vert.x Web GraphQL\"),mdx(\"h3\",e({},{id:\"context-management\"}),mdx(\"a\",e({parentName:\"h3\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#context-management\"})),\"Context Management\"),mdx(\"p\",null,`Vert.x Web GraphQL has been up\\xADgraded to GraphQL-\\u200BJava ver\\xADsion 17.\nIn this ver\\xADsion, the `,mdx(\"inlineCode\",{parentName:\"p\"},\"GraphQLContext\"),\" ob\\xADject be\\xADcomes the stan\\xADdard to share con\\xADtex\\xADtual data be\\xADtween com\\xADpo\\xADnents of a GraphQL Java ap\\xADpli\\xADca\\xADtion (see \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://github.com/graphql-java/graphql-java/releases/tag/v17.0\"}),\"v17 Re\\xADlease Notes\"),\").\"),mdx(\"p\",null,\"Con\\xADse\\xADquently, we have:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"dep\\xADre\\xADcated the ex\\xADist\\xADing con\\xADtext hooks in Vert.x Web GraphQL han\\xADdlers\"),mdx(\"li\",{parentName:\"ul\"},\"cre\\xADated new hooks (e.g. \",mdx(Link,{href:\"/docs/4.2.0/apidocs/io/vertx/ext/web/handler/graphql/GraphQLHandler.html#beforeExecute-io.vertx.core.Handler-\",passHref:!0,mdxType:\"Link\"},mdx(\"a\",e({parentName:\"li\"},{href:\"\"}),\"GraphQL\\xADHan\\xADdler be\\xADfore\\xADEx\\xADe\\xADcute\")),\") for con\\xADtext man\\xADage\\xADment\")),mdx(\"h3\",e({},{id:\"graphql-over-websockets-protocol\"}),mdx(\"a\",e({parentName:\"h3\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#graphql-over-websockets-protocol\"})),\"GraphQL over Websockets protocol\"),mdx(\"p\",null,\"The Apollo \",mdx(\"inlineCode\",{parentName:\"p\"},\"subscriptions-transport-ws\"),` li\\xADbrary is not being ac\\xADtively main\\xADtained.\nIt is rec\\xADom\\xADmended that you use the `,mdx(\"inlineCode\",{parentName:\"p\"},\"graphql-ws\"),\" in your client ap\\xADpli\\xADca\\xADtions li\\xADbrary in\\xADstead.\"),mdx(\"p\",null,\"For this pur\\xADpose, Vert.x Web GraphQL sup\\xADports the \",mdx(Link,{href:\"/docs/4.2.0/vertx-web-graphql/java/#_graphql_over_websocket\",passHref:!0,mdxType:\"Link\"},mdx(\"a\",e({parentName:\"p\"},{href:\"\"}),\"GraphQL over Web\\xADsock\\xADets pro\\xADto\\xADcol\")),\".\"),mdx(\"p\",null,\"For de\\xADtails about it, please read the \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://the-guild.dev/blog/graphql-over-websockets\"}),\"GraphQL over Web\\xADSock\\xADets an\\xADnounce\\xADment\"),\".\"),mdx(\"h2\",e({},{id:\"vertx-junit-5\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#vertx-junit-5\"})),\"Vert.x JUnit 5\"),mdx(\"p\",null,`By de\\xADfault the thread in\\xADvok\\xADing the test meth\\xADods is the JUnit thread.\nThe `,mdx(Link,{href:\"/docs/4.2.0/vertx-junit5/java/#_running_tests_on_a_vert_x_context\",passHref:!0,mdxType:\"Link\"},mdx(\"a\",e({parentName:\"p\"},{href:\"\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"io.vertx.junit5.RunTestOnContext\"))),\" ex\\xADten\\xADsion can be used to alter this be\\xADhav\\xADior by run\\xADning test meth\\xADods on a Vert.x event-\\u200Bloop thread.\"))}MDXContent.isMDXComponent=!0;\n","scope":{}}},"prevPost":null,"nextPost":{"meta":{"title":"Migrate from Vert.x 3 to Vert.x 4","category":"guides","authors":[{"name":"Julien Viet","github_id":"vietj"}],"summary":"We provide a clear and well-documented migration path from Vert.x 3.9 to Vert.x 4. Existing users will feel at home with the new version.","pinned":true},"date":"2020-12-02","slug":"from-vert-x-3-to-vert-x-4"},"relatedPosts":[{"meta":{"title":"Things to keep in mind concerning CSRF attacks","category":"guides","authors":[{"name":"Xhelal Likaj","github_id":"xhlika"}],"summary":"Eclipse Vert.x like most frameworks provides an anti-CSRF defense. However, no framework can prevent all attack vectors that exist in the web. Therefore, developers need to be aware of some dangers and common attack vectors concerning CSRF defenses."},"date":"2021-01-23","slug":"eclipse-vert-x-CSRF-concerns"},{"meta":{"title":"Unit and Integration Tests","category":"guides","authors":[{"name":"Clement Escoffier","github_id":"cescoffier"}],"summary":"Let’s refresh our mind about what we developed so far in the introduction to vert.x series. We forgot an important task. We didn’t test the API."},"date":"2015-08-03","slug":"unit-and-integration-tests"},{"meta":{"title":"Eclipse Vert.x 3.7.0 released!","category":"releases","authors":[{"name":"Julien Viet","github_id":"vietj"}],"summary":"We are extremely pleased to announce that the Eclipse Vert.x version 3.7.0 has been released."},"date":"2019-04-02","slug":"eclipse-vert-x-3-7-0-released"}]},"__N_SSG":true}