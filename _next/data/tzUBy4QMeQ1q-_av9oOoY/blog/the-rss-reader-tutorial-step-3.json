{"pageProps":{"categories":["releases","guides","security","news"],"post":{"meta":{"title":"The RSS reader tutorial (Step 3)","category":"guides","authors":[{"name":"Pavel Drankov","github_id":"Sammers21"}],"summary":"This is the third installment of our Vert.x Cassandra Client tutorial. We will implement the last RSS endpoint serving a list of articles related to a specific channel."},"date":"2018-12-06","slug":"the-rss-reader-tutorial-step-3","readingTime":{"text":"2 min read","minutes":1.585,"time":95100,"words":317},"content":{"compiledSource":"var m=Object.defineProperty,d=Object.defineProperties;var h=Object.getOwnPropertyDescriptors;var r=Object.getOwnPropertySymbols;var p=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable;var i=(a,s,n)=>s in a?m(a,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[s]=n,e=(a,s)=>{for(var n in s||(s={}))p.call(s,n)&&i(a,n,s[n]);if(r)for(var n of r(s))l.call(s,n)&&i(a,n,s[n]);return a},o=(a,s)=>d(a,h(s));var c=(a,s)=>{var n={};for(var t in a)p.call(a,t)&&s.indexOf(t)<0&&(n[t]=a[t]);if(a!=null&&r)for(var t of r(a))s.indexOf(t)<0&&l.call(a,t)&&(n[t]=a[t]);return n};const makeShortcode=a=>function(n){return console.warn(\"Component \"+a+\" was not imported, exported, or provided by MDXProvider as global scope\"),mdx(\"div\",e({},n))},Link=makeShortcode(\"Link\"),layoutProps={},MDXLayout=\"wrapper\";function MDXContent(n){var t=n,{components:a}=t,s=c(t,[\"components\"]);return mdx(MDXLayout,o(e(e({},layoutProps),s),{components:a,mdxType:\"MDXLayout\"}),mdx(\"p\",null,\"Now that \",mdx(Link,{href:\"/blog/eclipse-vert-x-3-6-0-released/\",passHref:!0,mdxType:\"Link\"},mdx(\"a\",e({parentName:\"p\"},{href:\"\"}),\"Vert.x 3.6.0 has been re\\xADleased\")),\", it\\u2019s the per\\xADfect time to con\\xADclude our \",mdx(Link,{href:\"/docs/vertx-cassandra-client/java/\",passHref:!0,mdxType:\"Link\"},mdx(\"a\",e({parentName:\"p\"},{href:\"\"}),\"Vert.x Cas\\xADsan\\xADdra Client\")),\" tu\\xADto\\xADr\\xADial!\"),mdx(\"p\",null,\"In \",mdx(Link,{href:\"/blog/the-rss-reader-tutorial-step-2/\",passHref:!0,mdxType:\"Link\"},mdx(\"a\",e({parentName:\"p\"},{href:\"\"}),\"the pre\\xADvi\\xADous step\")),`, we have suc\\xADcess\\xADfully im\\xADple\\xADmented the sec\\xADond end\\xADpoint\nof the RSS reader app.`),mdx(\"p\",null,\"The RSS reader ex\\xADam\\xADple as\\xADsumes im\\xADple\\xADment\\xADing three end\\xADpoints. This ar\\xADti\\xADcle is ded\\xADi\\xADcated to im\\xADple\\xADment\\xADing the last \",mdx(\"inlineCode\",{parentName:\"p\"},\"GET /articles/by_rss_link?link={rss_link}\"),\" end\\xADpoint.\"),mdx(\"p\",null,\"Be\\xADfore com\\xADplet\\xADing this step, make sure your are in the \",mdx(\"inlineCode\",{parentName:\"p\"},\"step_3\"),\" git branch:\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-better-shell\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-meta\"}),\"$\"),mdx(\"span\",e({parentName:\"code\"},{className:\"bash\"}),\" git checkout step_3\"),`\n`)),mdx(\"h2\",e({},{id:\"implementing-the-3rd-endpoint\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#implementing-the-3rd-endpoint\"})),\"Implementing the 3rd endpoint\"),mdx(\"p\",null,\"The 3rd end\\xADpoint serves a list of ar\\xADti\\xADcles re\\xADlated to a spe\\xADcific RSS chan\\xADnel. In a re\\xADquest, we spec\\xADify RSS chan\\xADnel by pro\\xADvid\\xADing a link. On the ap\\xADpli\\xADca\\xADtion side, after re\\xADceiv\\xADing a re\\xADquest we ex\\xADe\\xADcute the fol\\xADlow\\xADing query:\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-sql\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"SELECT\"),\" title, article_link, description, pubDate \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"FROM\"),\" articles_by_rss_link \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"WHERE\"),\" rss_link \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-operator\"}),\"=\"),` RSS_LINK_FROM_REQUEST ;\n`)),mdx(\"h2\",e({},{id:\"implementation\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#implementation\"})),\"Implementation\"),mdx(\"p\",null,\"For ob\\xADtain\\xADing ar\\xADti\\xADcles by RSS link we need to pre\\xADpare a re\\xADlated state\\xADment first. Change \",mdx(\"inlineCode\",{parentName:\"p\"},\"AppVerticle#prepareSelectArticlesByRssLink\"),\" in this way:\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-java\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-function\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-keyword\"}),\"private\"),\" Future<Void> \",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-title\"}),\"prepareSelectArticlesByRssLink\"),mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-params\"}),\"()\"),\" \"),`{\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"return\"),` Util.prepareQueryAndSetReference(client,\n            `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"SELECT title, article_link, description, pubDate FROM articles_by_rss_link WHERE rss_link = ? ;\"'),`,\n            selectArticlesByRssLink\n    );\n}\n`)),mdx(\"p\",null,\"And now, we can im\\xADple\\xADment the \",mdx(\"inlineCode\",{parentName:\"p\"},\"AppVerticle#getArticles\"),\" method. Ba\\xADsi\\xADcally, it will use the \",mdx(\"inlineCode\",{parentName:\"p\"},\"selectArticlesByRssLink\"),\" state\\xADment for find\\xADing ar\\xADti\\xADcles by the given link. Here\\u2019s the im\\xADple\\xADmen\\xADta\\xADtion:\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-java\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-function\"}),mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-keyword\"}),\"private\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-keyword\"}),\"void\"),\" \",mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-title\"}),\"getArticles\"),mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-params\"}),\"(RoutingContext ctx)\"),\" \"),`{\n    String link = ctx.request().getParam(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"link\"'),`);\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"if\"),\" (link == \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"null\"),`) {\n        responseWithInvalidRequest(ctx);\n    } `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"else\"),` {\n        client.executeWithFullFetch(selectArticlesByRssLink.bind(link), handler -> {\n            `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"if\"),` (handler.succeeded()) {\n                List<Row> rows = handler.result();\n\n                JsonObject responseJson = `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"new\"),` JsonObject();\n                JsonArray articles = `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"new\"),` JsonArray();\n\n                rows.forEach(eachRow -> articles.add(\n                        `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"new\"),` JsonObject()\n                                .put(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"title\"'),\", eachRow.getString(\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-number\"}),\"0\"),`))\n                                .put(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"link\"'),\", eachRow.getString(\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-number\"}),\"1\"),`))\n                                .put(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"description\"'),\", eachRow.getString(\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-number\"}),\"2\"),`))\n                                .put(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"pub_date\"'),\", eachRow.getTimestamp(\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-number\"}),\"3\"),`).getTime())\n                ));\n\n                responseJson.put(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"articles\"'),`, articles);\n                ctx.response().end(responseJson.toString());\n            } `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"else\"),` {\n                log.error(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"failed to get articles for \"'),` + link, handler.cause());\n                ctx.response().setStatusCode(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-number\"}),\"500\"),\").end(\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"Unable to retrieve the info from C*\"'),`);\n            }\n        });\n    }\n}\n`)),mdx(\"h2\",e({},{id:\"conclusion\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#conclusion\"})),\"Conclusion\"),mdx(\"p\",null,\"Dur\\xADing the se\\xADries, we have shown how the RSS reader app can be im\\xADple\\xADmented with the \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://github.com/vert-x3/vertx-cassandra-client\"}),\"Vert.x Cas\\xADsan\\xADdra client\"),\".\"),mdx(\"p\",null,\"Thanks for read\\xADing this. I hope you en\\xADjoyed this se\\xADries. See you soon on our \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://gitter.im/eclipse-vertx/vertx-users\"}),\"Git\\xADter chan\\xADnel\"),\"!\"))}MDXContent.isMDXComponent=!0;\n","scope":{}}},"prevPost":{"meta":{"title":"HTTP response validation with the Vert.x Web Client","category":"guides","authors":[{"name":"Thomas Segismont","github_id":"tsegismont"}],"summary":"Learn how to use response predicates from the Vert.x Web module to validate HTTP responses and to automatically generate error messages."},"date":"2018-12-10","slug":"http-response-validation-with-the-vert-x-web-client"},"nextPost":{"meta":{"title":"Eclipse Vert.x 3.6.0 released!","category":"releases","authors":[{"name":"Julien Viet","github_id":"vietj"}],"summary":"We are pleased to announce the Eclipse Vert.x 3.6.0 release."},"date":"2018-12-03","slug":"eclipse-vert-x-3-6-0-released"},"relatedPosts":[{"meta":{"title":"The RSS reader tutorial","category":"guides","authors":[{"name":"Pavel Drankov","github_id":"Sammers21"}],"summary":"In this tutorial, you will learn how to use the Eclipse Vert.x Cassandra client in practice. We will develop an RSS reader with three HTTP endpoints."},"date":"2018-08-20","slug":"the-rss-reader-tutorial"},{"meta":{"title":"The RSS reader tutorial (Step 2)","category":"guides","authors":[{"name":"Pavel Drankov","github_id":"Sammers21"}],"summary":"In this second installment of our Vert.x Cassandra Client tutorial, we will add an endpoint that produces an array of RSS channels for a given user ID."},"date":"2018-09-05","slug":"the-rss-reader-tutorial-step-2"},{"meta":{"title":"Building a real-time web app with Angular/Ngrx and Vert.x","category":"guides","authors":[{"name":"Benoit Hediard","github_id":"benorama"}],"summary":"There are multiple tech stacks to build a real-time web app. What are the best choices to build Angular client apps, connected to a JVM-based backend?"},"date":"2017-04-26","slug":"building-a-real-time-web-app-with-angular-ngrx-and-vert-x"}]},"__N_SSG":true}