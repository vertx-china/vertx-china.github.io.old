{"pageProps":{"categories":["releases","guides","news"],"post":{"meta":{"title":"Time scheduling with Chime","category":"guides","authors":[{"name":"Lisi","github_id":"LisiLisenok"}],"summary":"Eclipse Vert.x executes periodic and delayed actions with periodic and one-shot timers. Chime is a time scheduler verticle that works on the Vert.x event bus."},"date":"2017-05-09","slug":"time-scheduling-with-chime","readingTime":{"text":"8 min read","minutes":7.34,"time":440400,"words":1468},"content":{"compiledSource":"var c=Object.defineProperty,d=Object.defineProperties;var h=Object.getOwnPropertyDescriptors;var r=Object.getOwnPropertySymbols;var i=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable;var l=(a,s,n)=>s in a?c(a,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[s]=n,e=(a,s)=>{for(var n in s||(s={}))i.call(s,n)&&l(a,n,s[n]);if(r)for(var n of r(s))p.call(s,n)&&l(a,n,s[n]);return a},m=(a,s)=>d(a,h(s));var o=(a,s)=>{var n={};for(var t in a)i.call(a,t)&&s.indexOf(t)<0&&(n[t]=a[t]);if(a!=null&&r)for(var t of r(a))s.indexOf(t)<0&&p.call(a,t)&&(n[t]=a[t]);return n};const makeShortcode=a=>function(n){return console.warn(\"Component \"+a+\" was not imported, exported, or provided by MDXProvider as global scope\"),mdx(\"div\",e({},n))},Link=makeShortcode(\"Link\"),Alert=makeShortcode(\"Alert\"),layoutProps={},MDXLayout=\"wrapper\";function MDXContent(n){var t=n,{components:a}=t,s=o(t,[\"components\"]);return mdx(MDXLayout,m(e(e({},layoutProps),s),{components:a,mdxType:\"MDXLayout\"}),mdx(\"p\",null,`Eclipse Vert.x ex\\xADe\\xADcutes pe\\xADri\\xADodic and de\\xADlayed ac\\xADtions with\n`,mdx(Link,{href:\"/docs/vertx-core/java/#_executing_periodic_and_delayed_actions\",passHref:!0,mdxType:\"Link\"},mdx(\"a\",e({parentName:\"p\"},{href:\"\"}),\"pe\\xADri\\xADodic and one-\\u200Bshot timers\")),`.\nThis is the base for time sched\\xADul\\xADing and reach fea\\xADture ex\\xADten\\xADsion must be rather in\\xADter\\xADest\\xADing.\nBe no\\xADti\\xADfied at cer\\xADtain date / time, take into ac\\xADcount hol\\xADi\\xADdays,\nre\\xADpeat no\\xADti\\xADfi\\xADca\\xADtions until a given date, apply time zone,\ntake into ac\\xADcount day\\xADlight sav\\xADing time etc.\nThere are a lot of use\\xADful fea\\xADtures time sched\\xADuler may in\\xADtro\\xADduce to the Vert.x stack.  `),mdx(\"h2\",e({},{id:\"chime\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#chime\"})),\"Chime\"),mdx(\"p\",null,mdx(\"a\",e({parentName:\"p\"},{href:\"https://github.com/LisiLisenok/Chime\"}),\"Chime\"),\" is time sched\\xADuler ver\\xADti\\xADcle which works on \",mdx(\"em\",{parentName:\"p\"},\"Vert.x\"),\" event bus and pro\\xADvides:  \"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"sched\\xADul\\xADing with \",mdx(\"em\",{parentName:\"li\"},\"cron-\\u200Bstyle\"),\", \",mdx(\"em\",{parentName:\"li\"},\"in\\xADter\\xADval\"),\" or \",mdx(\"em\",{parentName:\"li\"},\"union\"),\" timers:\"),mdx(\"li\",{parentName:\"ul\"},\"at a cer\\xADtain time of day (to the sec\\xADond);  \"),mdx(\"li\",{parentName:\"ul\"},\"on cer\\xADtain days of the week, month or year;  \"),mdx(\"li\",{parentName:\"ul\"},\"with a given time in\\xADter\\xADval;  \"),mdx(\"li\",{parentName:\"ul\"},\"with nearly any com\\xADbi\\xADna\\xADtion of all of above;  \"),mdx(\"li\",{parentName:\"ul\"},\"re\\xADpeat\\xADing a given num\\xADber of times;  \"),mdx(\"li\",{parentName:\"ul\"},\"re\\xADpeat\\xADing until a given time / date;  \"),mdx(\"li\",{parentName:\"ul\"},\"re\\xADpeat\\xADing in\\xADfi\\xADnitely  \"),mdx(\"li\",{parentName:\"ul\"},\"prox\\xADy\\xADing event bus with con\\xADven\\xADtional in\\xADter\\xADfaces  \"),mdx(\"li\",{parentName:\"ul\"},\"ap\\xADply\\xADing time zones avail\\xADable on \",mdx(\"em\",{parentName:\"li\"},\"JVM\"),\" with day\\xADlight sav\\xADing time taken into ac\\xADcount  \"),mdx(\"li\",{parentName:\"ul\"},\"flex\\xADi\\xADble timers man\\xADage\\xADment sys\\xADtem:  \"),mdx(\"li\",{parentName:\"ul\"},\"group\\xADing timers;  \"),mdx(\"li\",{parentName:\"ul\"},\"defin\\xADing a timer start or end times  \"),mdx(\"li\",{parentName:\"ul\"},\"paus\\xADing / re\\xADsum\\xADing;  \"),mdx(\"li\",{parentName:\"ul\"},\"fire count\\xADing;  \"),mdx(\"li\",{parentName:\"ul\"},\"lis\\xADten\\xADing and send\\xADing mes\\xADsages via event bus with \",mdx(\"em\",{parentName:\"li\"},\"JSON\"),\";  \"),mdx(\"li\",{parentName:\"ul\"},mdx(\"em\",{parentName:\"li\"},\"pub\\xADlish\\xADing\"),\" or \",mdx(\"em\",{parentName:\"li\"},\"send\\xADing\"),\" timer fire event to the ad\\xADdress of your choice.  \")),mdx(Alert,{info:!0,mdxType:\"Alert\"},mdx(\"p\",null,mdx(\"em\",{parentName:\"p\"},\"Chime\"),\" is writ\\xADten in \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://ceylon-lang.org\"}),\"Cey\\xADlon\"),` and is avail\\xADable at\n`,mdx(\"a\",e({parentName:\"p\"},{href:\"https://herd.ceylon-lang.org/modules/herd.schedule.chime\"}),\"Cey\\xADlon Herd\"),\".\")),mdx(\"h2\",e({},{id:\"running\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#running\"})),\"Running\"),mdx(\"h3\",e({},{id:\"ceylon-users\"}),mdx(\"a\",e({parentName:\"h3\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#ceylon-users\"})),\"Ceylon users\"),mdx(\"p\",null,\"De\\xADploy \",mdx(\"em\",{parentName:\"p\"},\"Chime\"),\" using \",mdx(\"inlineCode\",{parentName:\"p\"},\"Verticle.deployVerticle\"),\" method.\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-Ceylon\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"import\"),` io.vertx.ceylon.core {vertx}\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"import\"),` herd.schedule.chime {Chime}\nChime().deploy(vertx.vertx());\n`)),mdx(\"p\",null,\"Or with \",mdx(\"inlineCode\",{parentName:\"p\"},'vertx.deployVerticle(\\\\\"ceylon:herd.schedule.chime/0.2.1\\\\\");'),`\nbut en\\xADsure that Cey\\xADlon ver\\xADti\\xADcle fac\\xADtory is avail\\xADable at class path.   `),mdx(\"h3\",e({},{id:\"java-users\"}),mdx(\"a\",e({parentName:\"h3\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#java-users\"})),\"Java users\"),mdx(\"ol\",null,mdx(\"li\",{parentName:\"ol\"},\"En\\xADsure that Cey\\xADlon ver\\xADti\\xADcle fac\\xADtory is avail\\xADable at class path.  \"),mdx(\"li\",{parentName:\"ol\"},`Put Cey\\xADlon ver\\xADsions to con\\xADsis\\xADtency. For in\\xADstance, Vert.x 3.4.1 de\\xADpends on Cey\\xADlon 1.3.0\nwhile Chime 0.2.1 de\\xADpends on Cey\\xADlon 1.3.2. `),mdx(\"li\",{parentName:\"ol\"},mdx(Link,{href:\"/docs/vertx-core/java/#_deploying_verticles_programmatically\",passHref:!0,mdxType:\"Link\"},mdx(\"a\",e({parentName:\"li\"},{href:\"\"}),\"De\\xADploy ver\\xADti\\xADcle\")),\", like:  \")),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-Java\"}),\"vertx.deployVerticle(\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"ceylon:herd.schedule.chime/0.2.1\"'),`)\n`)),mdx(Alert,{info:!0,mdxType:\"Alert\"},mdx(\"p\",null,\"Ex\\xADam\\xADple with Maven is avail\\xADable at \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://github.com/LisiLisenok/ChimeJavaExample\"}),\"Github\"),\".\")),mdx(\"h2\",e({},{id:\"schedulers\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#schedulers\"})),\"Schedulers\"),mdx(\"p\",null,\"Well, \",mdx(\"em\",{parentName:\"p\"},\"Chime\"),\" ver\\xADti\\xADcle is de\\xADployed. Let\\u2019s see its struc\\xADture.\",mdx(\"br\",{parentName:\"p\"}),`\n`,`In order to pro\\xADvide flex\\xADi\\xADble and broad ways to man\\xADage tim\\xADing two level ar\\xADchi\\xADtec\\xADture is adopted.\nIt con\\xADsists of sched\\xADulers and timers. Timer is a unit which fires at a given time.\nWhile sched\\xADuler is a set or group of timers and pro\\xADvides fol\\xADlow\\xADing:    `),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"cre\\xADat\\xADing and delet\\xADing timers;  \"),mdx(\"li\",{parentName:\"ul\"},\"paus\\xADing / re\\xADsum\\xADing all timers work\\xADing within the sched\\xADuler;  \"),mdx(\"li\",{parentName:\"ul\"},\"info on the run\\xADning timers;  \"),mdx(\"li\",{parentName:\"ul\"},\"de\\xADfault time zone;  \"),mdx(\"li\",{parentName:\"ul\"},\"lis\\xADten\\xADing event bus at the given sched\\xADuler ad\\xADdress for the re\\xADquests to.  \")),mdx(\"p\",null,\"Any timer op\\xADer\\xADates within some sched\\xADuler. And one or sev\\xADeral sched\\xADulers have to be cre\\xADated be\\xADfore start\\xADing sched\\xADul\\xADing.\",mdx(\"br\",{parentName:\"p\"}),`\n`,\"When \",mdx(\"em\",{parentName:\"p\"},\"Chime\"),\" ver\\xADti\\xADcle is de\\xADployed it starts lis\\xADten event bus at \",mdx(\"strong\",{parentName:\"p\"},\"chime\"),` ad\\xADdress (can be con\\xADfig\\xADured).\nIn order to cre\\xADate sched\\xADuler send to this ad\\xADdress a JSON mes\\xADsage.  `),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-json\"}),`{\n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-attr\"}),'\"operation\"'),\": \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"create\"'),`,\n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-attr\"}),'\"name\"'),\": \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"scheduler name\"'),`\n}\n`)),mdx(\"p\",null,\"Once sched\\xADuler is cre\\xADated it starts lis\\xADten event bus at \",mdx(\"strong\",{parentName:\"p\"},\"sched\\xADuler name\"),` ad\\xADdress.\nSend\\xADing mes\\xADsages to `,mdx(\"strong\",{parentName:\"p\"},\"chime\"),\" ad\\xADdress or to \",mdx(\"strong\",{parentName:\"p\"},\"sched\\xADuler name\"),` ad\\xADdress are rather equiv\\xADa\\xADlent,\nex\\xADcept\\xADing that chime ad\\xADdress pro\\xADvides ser\\xADvices for every sched\\xADuler, while sched\\xADuler ad\\xADdress\npro\\xADvides ser\\xADvices for this par\\xADtic\\xADu\\xADlar sched\\xADuler only.`,mdx(\"br\",{parentName:\"p\"}),`\n`,\"The re\\xADquest sent to the \",mdx(\"em\",{parentName:\"p\"},\"Chime\"),\" has to con\\xADtain \",mdx(\"strong\",{parentName:\"p\"},\"op\\xADer\\xADa\\xADtion\"),\" and \",mdx(\"strong\",{parentName:\"p\"},\"name\"),` keys.\nName key pro\\xADvides sched\\xADuler or timer name. While op\\xADer\\xADa\\xADtion key shows an ac\\xADtion `,mdx(\"em\",{parentName:\"p\"},\"Chime\"),` has to per\\xADform.\nThere are only four pos\\xADsi\\xADble op\\xADer\\xADa\\xADtions:  `),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"cre\\xADate - cre\\xADate new sched\\xADuler or timer;  \"),mdx(\"li\",{parentName:\"ul\"},\"delete - delete sched\\xADuler or timer;  \"),mdx(\"li\",{parentName:\"ul\"},\"info - re\\xADquest info on \",mdx(\"em\",{parentName:\"li\"},\"Chime\"),\" or on a par\\xADtic\\xADu\\xADlar sched\\xADuler or timer;  \"),mdx(\"li\",{parentName:\"ul\"},\"state - set or get sched\\xADuler or timer state (run\\xADning, paused or com\\xADpleted).  \")),mdx(\"h2\",e({},{id:\"timers\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#timers\"})),\"Timers\"),mdx(\"p\",null,\"Now we have sched\\xADuler cre\\xADated and timers can be run within. There are two ways to ac\\xADcess a given timer:  \"),mdx(\"ol\",null,mdx(\"li\",{parentName:\"ol\"},\"Send\\xADing mes\\xADsage to \",mdx(\"strong\",{parentName:\"li\"},\"chime\"),\" ad\\xADdress with \\u2018name\\u2019 field set to \",mdx(\"strong\",{parentName:\"li\"},\"sched\\xADuler name:timer name\"),\".  \"),mdx(\"li\",{parentName:\"ol\"},\"Send\\xADing mes\\xADsage to \",mdx(\"strong\",{parentName:\"li\"},\"sched\\xADuler name\"),\" ad\\xADdress with \\u2018name\\u2019 field set to ei\\xADther \",mdx(\"strong\",{parentName:\"li\"},\"timer name\"),\" or \",mdx(\"strong\",{parentName:\"li\"},\"sched\\xADuler name:timer name\"),\".  \")),mdx(\"p\",null,mdx(\"a\",e({parentName:\"p\"},{href:\"https://modules.ceylon-lang.org/repo/1/herd/schedule/chime/0.2.1/module-doc/api/index.html#timer-request\"}),\"Timer re\\xADquest\"),\" is rather com\\xADpli\\xADcated and con\\xADtains a lot of de\\xADtails. In this blog post only basic fea\\xADtures are con\\xADsid\\xADered:  \"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-json\"}),`{\n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-attr\"}),'\"operation\"'),\": \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"create\"'),`,\n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-attr\"}),'\"name\"'),\": \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"scheduler name:timer name\"'),`,\n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-attr\"}),'\"description\"'),`: {}\n};\n`)),mdx(\"p\",null,`This is rather sim\\xADi\\xADlar to re\\xADquest sent to cre\\xADate a sched\\xADuler.\nThe dif\\xADfer\\xADence is only `,mdx(\"strong\",{parentName:\"p\"},\"de\\xADscrip\\xADtion\"),` field is added.\nThis de\\xADscrip\\xADtion is an JSON ob\\xADject which iden\\xADti\\xADfies par\\xADtic\\xADu\\xADlar timer type and its de\\xADtails.`,mdx(\"br\",{parentName:\"p\"}),`\n`,\"The other fields not shown here are op\\xADtional and in\\xADcludes:  \"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"ini\\xADtial timer state (paused or run\\xADning);  \"),mdx(\"li\",{parentName:\"ul\"},\"start or end date-\\u200Btime;  \"),mdx(\"li\",{parentName:\"ul\"},\"num\\xADber of re\\xADpeat\\xADing times;  \"),mdx(\"li\",{parentName:\"ul\"},\"is timer mes\\xADsage to be pub\\xADlished or sent;  \"),mdx(\"li\",{parentName:\"ul\"},\"timer fire mes\\xADsage and de\\xADliv\\xADery op\\xADtions;  \"),mdx(\"li\",{parentName:\"ul\"},\"time zone.  \")),mdx(\"h2\",e({},{id:\"timer-descriptions\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#timer-descriptions\"})),\"Timer descriptions\"),mdx(\"p\",null,\"Cur\\xADrently, three types of timers are sup\\xADported:  \"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"strong\",{parentName:\"li\"},\"In\\xADter\\xADval timer\"),\" which fires after each given time pe\\xADriod (min\\xADi\\xADmum 1 sec\\xADond):  \")),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-json\"}),`{\n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-attr\"}),'\"type\"'),\": \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"interval\"'),`,\n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-attr\"}),'\"delay\"'),\": \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"timer delay in seconds, Integer\"'),`\n};\n`)),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"strong\",{parentName:\"li\"},\"Cron style timer\"),\" which is de\\xADfined with cron-\\u200Bstyle:  \")),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-json\"}),`{  \n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-attr\"}),'\"type\"'),\": \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"cron\"'),`,  \n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-attr\"}),'\"seconds\"'),\": \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"seconds in cron style, String\"'),`,  \n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-attr\"}),'\"minutes\"'),\": \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"minutes in cron style, String\"'),`,  \n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-attr\"}),'\"hours\"'),\": \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"hours in cron style, String\"'),`,  \n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-attr\"}),'\"days of month\"'),\": \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"days of month in cron style, String\"'),`,  \n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-attr\"}),'\"months\"'),\": \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"months in cron style, String\"'),`,  \n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-attr\"}),'\"days of week\"'),\": \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"days of week in cron style, String, optional\"'),`,  \n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-attr\"}),'\"years\"'),\": \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"years in cron style, String, optional\"'),`  \n};\n`)),mdx(\"p\",null,\"Cron timer is rather pow\\xADer\\xADful and flex\\xADi\\xADble. In\\xADves\\xADti\\xADgate \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://modules.ceylon-lang.org/repo/1/herd/schedule/chime/0.2.1/module-doc/api/index.html#cron-expression\"}),\"spec\\xADi\\xADfi\\xADca\\xADtion\"),\" for the com\\xADplete list of fea\\xADtures.  \"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"strong\",{parentName:\"li\"},\"Union timer\"),\" which com\\xADbines a num\\xADber of timers into a one:  \")),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-json\"}),`{  \n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-attr\"}),'\"type\"'),\": \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"union\"'),`,  \n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-attr\"}),'\"timers\"'),\": [\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"list of the timer descriptions\"'),`]  \n};\n`)),mdx(\"p\",null,\"Union timer may be use\\xADful to fire at a list of spe\\xADcific dates / times.\"),mdx(\"h2\",e({},{id:\"timer-events\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#timer-events\"})),\"Timer events\"),mdx(\"p\",null,\"Once timer is started it sends or pub\\xADlishes mes\\xADsages to \",mdx(\"strong\",{parentName:\"p\"},\"sched\\xADuler name:timer name\"),` ad\\xADdress in JSON for\\xADmat.\nTwo types of events are sent:  `),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"fire event which oc\\xADcurs when time reaches next timer value:  \")),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-json\"}),`{  \n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-attr\"}),'\"name\"'),\": \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"scheduler name:timer name, String\"'),`,  \n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-attr\"}),'\"event\"'),\": \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"fire\"'),`,  \n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-attr\"}),'\"count\"'),\": \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"total number of fire times, Integer\"'),`,  \n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-attr\"}),'\"time\"'),\": \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"ISO formated time / date, String\"'),`,  \n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-attr\"}),'\"seconds\"'),\": \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"number of seconds since last minute, Integer\"'),`,  \n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-attr\"}),'\"minutes\"'),\": \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"number of minutes since last hour, Integer\"'),`,  \n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-attr\"}),'\"hours\"'),\": \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"hour of day, Integer\"'),`,  \n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-attr\"}),'\"day of month\"'),\": \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"day of month, Integer\"'),`,  \n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-attr\"}),'\"month\"'),\": \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"month, Integer\"'),`,  \n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-attr\"}),'\"year\"'),\": \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"year, Integer\"'),`,  \n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-attr\"}),'\"time zone\"'),\": \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"time zone the timer works in, String\"'),`\n};\n`)),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"com\\xADplete event which oc\\xADcurs when timer is ex\\xADhausted by some cri\\xADte\\xADria given at timer cre\\xADate re\\xADquest:  \")),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-json\"}),`{  \n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-attr\"}),'\"name\"'),\": \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"scheduler name:timer name, String\"'),`,  \n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-attr\"}),'\"event\"'),\": \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"complete\"'),`,  \n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-attr\"}),'\"count\"'),\": \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"total number of fire times, Integer\"'),`  \n};\n`)),mdx(\"p\",null,\"Ba\\xADsi\\xADcally, now we know every\\xADthing to be happy with \",mdx(\"em\",{parentName:\"p\"},\"Chime\"),`: sched\\xADulers and re\\xADquests to them, timers and timer events.\nWill see some ex\\xADam\\xADples in the next sec\\xADtion.  `),mdx(\"h2\",e({},{id:\"examples\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#examples\"})),\"Examples\"),mdx(\"h3\",e({},{id:\"ceylon-example\"}),mdx(\"a\",e({parentName:\"h3\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#ceylon-example\"})),\"Ceylon example\"),mdx(\"p\",null,\"Let\\u2019s con\\xADsider a timer which has to fire every month at 16-30 last Sun\\xADday.  \"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-Ceylon\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"// listen the timer events\"),`\neventBus.consumer (\n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"my scheduler:my timer\"'),`,\n  (Throwable|Message<JsonObject?> msg) {\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"if\"),\" (\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"is\"),` Message<JsonObject?> msg) { print(msg.body()); }\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"else\"),` { print(msg); }  \n  }\n);\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"// create scheduler and timer\"),`\neventBus.send<JsonObject> (\n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"chime\"'),`,\n  JsonObject {\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"operation\"'),\" -> \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"create\"'),`,\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"name\"'),\" -> \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"my scheduler:my timer\"'),`,\n    `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"description\"'),` -> JsonObject {\n      `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"type\"'),\" -> \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"cron\"'),`,\n      `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"seconds\"'),\" -> \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"0\"'),`,\n      `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"minutes\"'),\" -> \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"30\"'),`,\n      `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"hours\"'),\" -> \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"16\"'),`,\n      `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"days of month\"'),\" -> \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"*\"'),`,\n      `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"months\"'),\" -> \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"*\"'),`,\n      `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"days of week\"'),\" -> \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"SundayL\"'),`\n    }\n  }\n);\n\n`)),mdx(Alert,{info:!0,mdxType:\"Alert\"},mdx(\"p\",null,\"\\u2019*\\u2019 means any, \\u2018Sun\\xADdayL\\u2019 means last Sun\\xADday.\")),mdx(Alert,{info:!0,mdxType:\"Alert\"},mdx(\"p\",null,\"If \\u2018cre\\xADate\\u2019 re\\xADquest is sent to Chime ad\\xADdress with name set to \\u2018sched\\xADuler name:timer name\\u2019 and cor\\xADre\\xADspond\\xADing sched\\xADuler hasn\\u2019t been cre\\xADated be\\xADfore then Chime cre\\xADates both new sched\\xADuler and new timer.\")),mdx(\"h3\",e({},{id:\"java-example\"}),mdx(\"a\",e({parentName:\"h3\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#java-example\"})),\"Java example\"),mdx(\"p\",null,\"Let\\u2019s con\\xADsider a timer which has to fire every Mon\\xADday at 8-30 and every Fri\\xADday at 17-30.  \"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-Java\"}),mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"// listen the timer events\"),`\nMessageConsumer<JsonObject> consumer = eventBus.consumer(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"my scheduler:my timer\"'),`);\nconsumer.handler (\n  message -> {\n    System.out.println(message.body());\n    }\n);\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"// description of timers\"),`\nJsonObject mondayTimer = (`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"new\"),\" JsonObject()).put(\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"type\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"cron\"'),`)\n  .put(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"seconds\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"0\"'),\").put(\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"minutes\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"30\"'),\").put(\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"hours\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"8\"'),`)\n  .put(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"days of month\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"*\"'),\").put(\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"months\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"*\"'),`)\n  .put(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"days of week\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"Monday\"'),`);\nJsonObject fridayTimer = (`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"new\"),\" JsonObject()).put(\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"type\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"cron\"'),`)\n  .put(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"seconds\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"0\"'),\").put(\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"minutes\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"30\"'),\").put(\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"hours\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"17\"'),`)\n  .put(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"days of month\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"*\"'),\").put(\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"months\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"*\"'),`)\n  .put(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"days of week\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"Friday\"'),`);\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"// union timer - combines mondayTimer and fridayTimer\"),`\nJsonArray combination = (`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"new\"),` JsonArray()).add(mondayTimer)\n  .add(fridayTimer);\nJsonObject timer = (`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"new\"),\" JsonObject()).put(\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"type\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"union\"'),`)\n  .put(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"timers\"'),`, combination);\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-comment\"}),\"// create scheduler and timer\"),`\neventBus.send (\n  `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"chime\"'),`,\n  (`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-keyword\"}),\"new\"),\" JsonObject()).put(\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"operation\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"create\"'),`)\n    .put(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"name\"'),\", \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"my scheduler:my timer\"'),`)\n    .put(`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"description\"'),`, timer)\n);\n`)),mdx(Alert,{warning:!0,mdxType:\"Alert\"},mdx(\"p\",null,\"En\\xADsure that Cey\\xADlon ver\\xADti\\xADcle fac\\xADtory with right ver\\xADsion is avail\\xADable at class path.\")),mdx(\"h2\",e({},{id:\"at-the-end\"}),mdx(\"a\",e({parentName:\"h2\"},{\"aria-hidden\":!0,tabIndex:-1,className:\"heading-anchor\",href:\"#at-the-end\"})),\"At the end\"),mdx(\"p\",null,mdx(\"inlineCode\",{parentName:\"p\"},\"herd.schedule.chime\"),\" mod\\xADule pro\\xADvides some fea\\xADtures not men\\xADtioned here:  \"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"con\\xADve\\xADnient builders use\\xADful to fill in JSON de\\xADscrip\\xADtion of var\\xADi\\xADous timers;  \"),mdx(\"li\",{parentName:\"ul\"},\"prox\\xADy\\xADing event bus with con\\xADven\\xADtional in\\xADter\\xADfaces;  \"),mdx(\"li\",{parentName:\"ul\"},\"read\\xADing JSON timer event into an ob\\xADject;  \"),mdx(\"li\",{parentName:\"ul\"},\"at\\xADtach\\xADing JSON mes\\xADsage to the timer fire event;  \"),mdx(\"li\",{parentName:\"ul\"},\"man\\xADag\\xADing time zones.  \")),mdx(\"p\",null,\"There are also some ideas for the fu\\xADture:  \"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"cus\\xADtom or user-\\u200Bdefined timers;  \"),mdx(\"li\",{parentName:\"ul\"},\"lim\\xADit\\xADing the timer fire time / date with cal\\xADen\\xADdar;  \"),mdx(\"li\",{parentName:\"ul\"},\"ex\\xADtract\\xADing timer fire mes\\xADsage from ex\\xADter\\xADnal source.  \")),mdx(\"p\",null,\"This is very quick in\\xADtro\\xADduc\\xADtion to the \",mdx(\"em\",{parentName:\"p\"},\"Chime\"),` and if you are in\\xADter\\xADested in you may read\nmore in `,mdx(\"a\",e({parentName:\"p\"},{href:\"https://modules.ceylon-lang.org/repo/1/herd/schedule/chime/0.2.1/module-doc/api/index.html\"}),\"Chime doc\\xADu\\xADmen\\xADta\\xADtion\"),\" or even \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://github.com/LisiLisenok/Chime\"}),\"con\\xADtribute\"),\" to.  \"),mdx(\"p\",null,\"Thank\\u2019s for the read\\xADing and enjoy with cod\\xADing!\"))}MDXContent.isMDXComponent=!0;\n","scope":{}}},"prevPost":{"meta":{"title":"Presentation of the Vert.x-Swagger project","category":"guides","authors":[{"name":"Florent Chamfroy","github_id":"phiz71"}],"summary":"This post is an introduction to the Vert.x-Swagger project, and describe how to use the Swagger-Codegen plugin and the SwaggerRouter class."},"date":"2017-05-22","slug":"presentation-of-the-vert-x-swagger-project"},"nextPost":{"meta":{"title":"Building a real-time web app with Angular/Ngrx and Vert.x","category":"guides","authors":[{"name":"Benoit Hediard","github_id":"benorama"}],"summary":"There are multiple tech stacks to build a real-time web app. What are the best choices to build Angular client apps, connected to a JVM-based backend?"},"date":"2017-04-26","slug":"building-a-real-time-web-app-with-angular-ngrx-and-vert-x"},"relatedPosts":[{"meta":{"title":"Real-time bidding with Websockets and Vert.x","category":"guides","authors":[{"name":"Marcin Warczyglowa","github_id":"mwarc"}],"summary":"The expectations of users for interactivity with web applications have changed over the past few years.\n    Users during bidding in auction no longer want to press the refresh button."},"date":"2016-01-15","slug":"real-time-bidding-with-websockets-and-vert-x"},{"meta":{"title":"Things to keep in mind concerning CSRF attacks","category":"guides","authors":[{"name":"Xhelal Likaj","github_id":"xhlika"}],"summary":"Eclipse Vert.x like most frameworks provides an anti-CSRF defense. However, no framework can prevent all attack vectors that exist in the web. Therefore, developers need to be aware of some dangers and common attack vectors concerning CSRF defenses."},"date":"2021-01-23","slug":"eclipse-vert-x-CSRF-concerns"},{"meta":{"title":"Building services and APIs with AMQP 1.0","category":"guides","authors":[{"name":"Jakub Scholz","github_id":"scholzj"}],"summary":"Microservices and APIs are everywhere. Everyone talks about them, presentation slides are full of them ... some people are actually even building them."},"date":"2017-01-25","slug":"building-services-and-apis-with-amqp-1-0"}]},"__N_SSG":true}