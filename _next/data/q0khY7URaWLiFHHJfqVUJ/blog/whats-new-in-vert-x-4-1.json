{"pageProps":{"categories":["releases","guides","security","news"],"post":{"meta":{"title":"What's new in Vert.x 4.1","category":"releases","authors":[{"name":"Julien Viet","github_id":"vietj"}],"summary":"See an overview of all new and exciting features in Vert.x 4.1, including Vert.x HTTP proxy, RxJava 3, Open Telemetry, and more."},"date":"2021-05-21","slug":"whats-new-in-vert-x-4-1","readingTime":{"text":"4 min read","minutes":3.615,"time":216900,"words":723},"content":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = props.components || ({});\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, {})\n  })) : _createMdxContent();\n  function _createMdxContent() {\n    const _components = Object.assign({\n      p: \"p\",\n      h2: \"h2\",\n      a: \"a\",\n      pre: \"pre\",\n      code: \"code\",\n      span: \"span\",\n      ul: \"ul\",\n      li: \"li\",\n      em: \"em\"\n    }, props.components), {Link} = _components;\n    if (!Link) _missingMdxReference(\"Link\", true);\n    return _jsxs(_Fragment, {\n      children: [_jsx(_components.p, {\n        children: \"Vert.x 4.1 comes with plenty of new ex­cit­ing fea­tures.\"\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"Here is an overview of the most im­por­tant fea­tures sup­ported in Vert.x 4.1.\"\n      }), \"\\n\", _jsxs(_components.h2, {\n        id: \"reactive-microsoft-sql-server-client\",\n        children: [_jsx(_components.a, {\n          \"aria-hidden\": true,\n          tabIndex: \"-1\",\n          className: \"heading-anchor\",\n          href: \"#reactive-microsoft-sql-server-client\"\n        }), \"Reactive Microsoft SQL Server Client\"]\n      }), \"\\n\", _jsxs(_components.p, {\n        children: [\"The \", _jsx(Link, {\n          href: \"/docs/4.1.0/vertx-mssql-client/java/\",\n          passHref: true,\n          children: _jsx(_components.a, {\n            href: \"\",\n            children: \"Re­ac­tive Mi­crosoft SQL Server Client\"\n          })\n        }), \" joins the \", _jsx(Link, {\n          href: \"/docs/#databases\",\n          passHref: true,\n          children: _jsx(_components.a, {\n            href: \"\",\n            children: \"data­base clients\"\n          })\n        }), \" fam­ily!\"]\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"In this first re­lease, sev­eral com­mon data types are sup­ported, as well as pre­pared state­ments and trans­ac­tions.\"\n      }), \"\\n\", _jsxs(_components.h2, {\n        id: \"vertx-http-proxy\",\n        children: [_jsx(_components.a, {\n          \"aria-hidden\": true,\n          tabIndex: \"-1\",\n          className: \"heading-anchor\",\n          href: \"#vertx-http-proxy\"\n        }), \"Vert.x HTTP Proxy\"]\n      }), \"\\n\", _jsxs(_components.p, {\n        children: [\"It is very easy to write an HTTP proxy with Vert.x, yet there are a lot of things that \", _jsx(_components.a, {\n          href: \"https://www.mnot.net/blog/2011/07/11/what_proxies_must_do\",\n          children: \"prox­ies must do\"\n        }), \".\"]\n      }), \"\\n\", _jsxs(_components.p, {\n        children: [_jsx(Link, {\n          href: \"/docs/4.1.0/vertx-http-proxy/java/\",\n          passHref: true,\n          children: _jsx(_components.a, {\n            href: \"\",\n            children: \"Vert.x HTTP Proxy\"\n          })\n        }), \" is a new com­po­nent of the stack that aims to make it easy to write prox­ies.\"]\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"You can cre­ate a proxy as fol­lows:\"\n      }), \"\\n\", _jsx(_components.pre, {\n        children: _jsxs(_components.code, {\n          className: \"hljs language-java\",\n          children: [\"proxyServer.requestHandler(\\n       HttpProxy.reverseProxy(vertx.createHttpClient())\\n       .origin(\", _jsx(_components.span, {\n            className: \"hljs-number\",\n            children: \"7070\"\n          }), \", \", _jsx(_components.span, {\n            className: \"hljs-string\",\n            children: \"\\\"localhost\\\"\"\n          }), \"))\\n   .listen(\", _jsx(_components.span, {\n            className: \"hljs-number\",\n            children: \"8080\"\n          }), \");\\n\"]\n        })\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"The proxy can also dy­nam­i­cally re­solve the ori­gin (i.e the prox­ied server):\"\n      }), \"\\n\", _jsx(_components.pre, {\n        children: _jsxs(_components.code, {\n          className: \"hljs language-java\",\n          children: [_jsx(_components.span, {\n            className: \"hljs-type\",\n            children: \"HttpProxy\"\n          }), \" \", _jsx(_components.span, {\n            className: \"hljs-variable\",\n            children: \"proxy\"\n          }), \" \", _jsx(_components.span, {\n            className: \"hljs-operator\",\n            children: \"=\"\n          }), \" HttpProxy.reverseProxy(proxyClient).originSelector(\\n  address -> resolveOrigin(address)\\n);\\n\"]\n        })\n      }), \"\\n\", _jsxs(_components.p, {\n        children: [_jsx(Link, {\n          href: \"/docs/4.1.0/vertx-web-proxy/java/\",\n          passHref: true,\n          children: _jsx(_components.a, {\n            href: \"\",\n            children: \"Vert.x Web Proxy\"\n          })\n        }), \" in­te­grates the proxy with Vert.x Web.\"]\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"This com­po­nent is in tech pre­view and will re­ceive more fea­tures over time.\"\n      }), \"\\n\", _jsxs(_components.h2, {\n        id: \"rxjava-3\",\n        children: [_jsx(_components.a, {\n          \"aria-hidden\": true,\n          tabIndex: \"-1\",\n          className: \"heading-anchor\",\n          href: \"#rxjava-3\"\n        }), \"RxJava 3\"]\n      }), \"\\n\", _jsxs(_components.p, {\n        children: [\"Vert.x has been sup­port­ing Rx­Java for many years, the \", _jsx(Link, {\n          href: \"/docs/4.1.0/vertx-rx/java3/\",\n          passHref: true,\n          children: _jsx(_components.a, {\n            href: \"\",\n            children: \"Rx­Java 3 sup­port\"\n          })\n        }), \" has landed in 4.1\"]\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"The rx­i­fied API works like pre­vi­ous ver­sions, how­ever reg­u­lar meth­ods are ex­posed with Rx­Java types\\nin­stead of call­backs since Vert.x 4 async model is based on fu­tures.\"\n      }), \"\\n\", _jsx(_components.pre, {\n        children: _jsxs(_components.code, {\n          className: \"hljs language-java\",\n          children: [\"server.requestHandler(req -> {\\n  \", _jsx(_components.span, {\n            className: \"hljs-type\",\n            children: \"HttpServerResponse\"\n          }), \" \", _jsx(_components.span, {\n            className: \"hljs-variable\",\n            children: \"resp\"\n          }), \" \", _jsx(_components.span, {\n            className: \"hljs-operator\",\n            children: \"=\"\n          }), \" req.respone();\\n  resp.setChunked(\", _jsx(_components.span, {\n            className: \"hljs-literal\",\n            children: \"true\"\n          }), \");\\n\\n  \", _jsx(_components.span, {\n            className: \"hljs-comment\",\n            children: \"// No need to subscribe to the completable\"\n          }), \"\\n  \", _jsx(_components.span, {\n            className: \"hljs-type\",\n            children: \"Completable\"\n          }), \" \", _jsx(_components.span, {\n            className: \"hljs-variable\",\n            children: \"c1\"\n          }), \" \", _jsx(_components.span, {\n            className: \"hljs-operator\",\n            children: \"=\"\n          }), \" resp.write(\", _jsx(_components.span, {\n            className: \"hljs-string\",\n            children: \"\\\"1\\\"\"\n          }), \");\\n\\n  \", _jsx(_components.span, {\n            className: \"hljs-comment\",\n            children: \"// Write result is cached, this will send\"\n          }), \"\\n  \", _jsx(_components.span, {\n            className: \"hljs-comment\",\n            children: \"// 1\"\n          }), \"\\n  c1.subscribe();\\n  c1.subscribe();\\n\\n  \", _jsx(_components.span, {\n            className: \"hljs-comment\",\n            children: \"// The Rxified API however requires subscription to trigger the call\"\n          }), \"\\n  \", _jsx(_components.span, {\n            className: \"hljs-type\",\n            children: \"Completable\"\n          }), \" \", _jsx(_components.span, {\n            className: \"hljs-variable\",\n            children: \"c2\"\n          }), \" \", _jsx(_components.span, {\n            className: \"hljs-operator\",\n            children: \"=\"\n          }), \" resp.rxWrite(\", _jsx(_components.span, {\n            className: \"hljs-string\",\n            children: \"\\\"2\\\"\"\n          }), \");\\n\\n  \", _jsx(_components.span, {\n            className: \"hljs-comment\",\n            children: \"// Write is subscription based, this will send\"\n          }), \"\\n  \", _jsx(_components.span, {\n            className: \"hljs-comment\",\n            children: \"// 2\"\n          }), \"\\n  \", _jsx(_components.span, {\n            className: \"hljs-comment\",\n            children: \"// 2\"\n          }), \"\\n  c2.subscribe();\\n  c2.subscribe();\\n});\\n\"]\n        })\n      }), \"\\n\", _jsxs(_components.h2, {\n        id: \"open-telemetry-support\",\n        children: [_jsx(_components.a, {\n          \"aria-hidden\": true,\n          tabIndex: \"-1\",\n          className: \"heading-anchor\",\n          href: \"#open-telemetry-support\"\n        }), \"Open Telemetry support\"]\n      }), \"\\n\", _jsxs(_components.p, {\n        children: [_jsx(Link, {\n          href: \"/docs/4.1.0/vertx-opentelemetry/java/\",\n          passHref: true,\n          children: _jsx(_components.a, {\n            href: \"\",\n            children: \"Open Teleme­try\"\n          })\n        }), \" trac­ing is a new and no­tice­able trac­ing in­te­gra­tion avail­able in 4.1.\"]\n      }), \"\\n\", _jsxs(_components.h2, {\n        id: \"service-proxy-with-futures\",\n        children: [_jsx(_components.a, {\n          \"aria-hidden\": true,\n          tabIndex: \"-1\",\n          className: \"heading-anchor\",\n          href: \"#service-proxy-with-futures\"\n        }), \"Service proxy with futures\"]\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"Vert.x 4 pro­vides a future-​first API. How­ever, ser­vice prox­ies can only be de­clared with call­backs.\"\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"We ad­dressed this issue in Vert.x 4.1 and you can now write ser­vice prox­ies with fu­tures. The only change you\\nneed is to de­clare the fu­ture usage in the Code­gen mod­ule de­c­la­ra­tion.\"\n      }), \"\\n\", _jsxs(_components.h2, {\n        id: \"vertx-web\",\n        children: [_jsx(_components.a, {\n          \"aria-hidden\": true,\n          tabIndex: \"-1\",\n          className: \"heading-anchor\",\n          href: \"#vertx-web\"\n        }), \"Vertx-Web\"]\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"In this re­lease, we im­proved the log­ging han­dler to en­able cus­tom log­ging for­mats.\"\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"The OAuth2 han­dler now fol­lows the OIDC stan­dard by val­i­dat­ing the re­quested scopes are present in the OAuth2 re­sponse. A new APIKEY han­dler was added to sup­port more se­cu­rity use cases, and it is now pos­si­ble to write cus­tom authn han­dlers with­out re­quir­ing in­ter­nal classes.\"\n      }), \"\\n\", _jsxs(_components.p, {\n        children: [\"The API \", _jsx(_components.code, {\n          children: \"ctx.json()\"\n        }), \" now fol­lows the IANA con­tent type stan­dard.\"]\n      }), \"\\n\", _jsxs(_components.h2, {\n        id: \"vertx-web-openapi\",\n        children: [_jsx(_components.a, {\n          \"aria-hidden\": true,\n          tabIndex: \"-1\",\n          className: \"heading-anchor\",\n          href: \"#vertx-web-openapi\"\n        }), \"Vertx-Web OpenAPI\"]\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"A lot of com­mu­nity dis­cus­sions and work has been done to im­prove the se­cu­rity han­dling of Ope­nAPI in Vert.x. We now sup­port all kinds of se­cu­rity de­scribed in Ope­nAPI 3.0, OpenId, OAuth2, API-​Key, HTTP.\"\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"The new API also al­lows for fetch­ing the se­cu­rity con­fig­u­ra­tion from the doc­u­ment it­self, rather than hav­ing it double-​configured in the doc­u­ment and in the code.\"\n      }), \"\\n\", _jsxs(_components.h2, {\n        id: \"vertx-auth\",\n        children: [_jsx(_components.a, {\n          \"aria-hidden\": true,\n          tabIndex: \"-1\",\n          className: \"heading-anchor\",\n          href: \"#vertx-auth\"\n        }), \"Vertx-Auth\"]\n      }), \"\\n\", _jsxs(_components.p, {\n        children: [\"In the Vert.x auth mod­ule, sup­port for \", _jsx(_components.code, {\n          children: \"EdDSA\"\n        }), \" was added to the JOSE/COSE code. This means that we can now use those al­go­rithms in JWT/OAuth2/OIDC/FIDO2. The sup­port re­lies only on the pro­vided JDK which means that users will need to use JDK 15 or above to be able to use those al­go­rithms.\"]\n      }), \"\\n\", _jsxs(_components.p, {\n        children: [\"In the JOSE code, im­prove­ments were made to cor­rectly fol­low the \", _jsx(_components.code, {\n          children: \"use\"\n        }), \" value of a JWK and more tests were added to ver­ify that we in­terop prop­erly with to­kens gen­er­ated by other li­braries.\"]\n      }), \"\\n\", _jsxs(_components.p, {\n        children: [\"Fi­nally, in \", _jsx(_components.code, {\n          children: \"FIDO2/Webauthn\"\n        }), \" we fol­low the rec­om­men­da­tion of stor­ing the at­tes­ta­tion cer­tifi­cates, which al­lows of­fline val­i­da­tion of de­vices. This is a util­ity that al­lows you to check if to­kens have been com­pro­mised and dis­able their fu­ture use at the RP.\"]\n      }), \"\\n\", _jsxs(_components.h2, {\n        id: \"kotlin-15-support\",\n        children: [_jsx(_components.a, {\n          \"aria-hidden\": true,\n          tabIndex: \"-1\",\n          className: \"heading-anchor\",\n          href: \"#kotlin-15-support\"\n        }), \"Kotlin 1.5 support\"]\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"Vert.x 4.1 sup­ports Kotlin 1.5\"\n      }), \"\\n\", _jsxs(_components.h2, {\n        id: \"general-pool-improvements\",\n        children: [_jsx(_components.a, {\n          \"aria-hidden\": true,\n          tabIndex: \"-1\",\n          className: \"heading-anchor\",\n          href: \"#general-pool-improvements\"\n        }), \"General pool improvements\"]\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"Vert.x in­ter­nal pool has been im­proved to gain more flex­i­bil­ity with new fea­tures such as\"\n      }), \"\\n\", _jsxs(_components.ul, {\n        children: [\"\\n\", _jsx(_components.li, {\n          children: \"mul­ti­ple event loops per pool\"\n        }), \"\\n\", _jsx(_components.li, {\n          children: \"waiter can­cel­la­tion\"\n        }), \"\\n\", _jsx(_components.li, {\n          children: \"lock free im­ple­men­ta­tion\"\n        }), \"\\n\", _jsx(_components.li, {\n          children: \"con­nec­tion se­lec­tion strat­egy\"\n        }), \"\\n\"]\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"In ad­di­tion, the in­ter­nal pool is now used by the Vert.x SQL Client and Vert.x Mail Clients.\"\n      }), \"\\n\", _jsxs(_components.h2, {\n        id: \"web-session-storage-with-infinispan\",\n        children: [_jsx(_components.a, {\n          \"aria-hidden\": true,\n          tabIndex: \"-1\",\n          className: \"heading-anchor\",\n          href: \"#web-session-storage-with-infinispan\"\n        }), \"Web Session Storage with Infinispan\"]\n      }), \"\\n\", _jsxs(_components.p, {\n        children: [\"Vert.x Web \", _jsx(Link, {\n          href: \"/docs/4.1.0/vertx-web/java/#_session_stores\",\n          passHref: true,\n          children: _jsx(_components.a, {\n            href: \"\",\n            children: \"ses­sion stor­age\"\n          })\n        }), \" is plug­gable.\\nIn this ver­sion, a new ses­sion store with \", _jsx(_components.a, {\n          href: \"https://infinispan.org/\",\n          children: \"In­fin­is­pan\"\n        }), \" in-​memory data grid is avail­able.\"]\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"It is im­ple­mented on top of the In­fin­is­pan client so it can be used with ei­ther stand­alone or clus­tered Vert.x ap­pli­ca­tions.\"\n      }), \"\\n\", _jsxs(_components.p, {\n        children: [\"If you want to get started, don’t miss the \", _jsxs(_components.a, {\n          href: \"https://how-to.vertx.io/web-session-infinispan-howto/\",\n          children: [_jsx(_components.em, {\n            children: \"Web Ses­sion Stor­age with In­fin­is­pan Client\"\n          }), \" how-​to\"]\n        }), \".\"]\n      })]\n    });\n  }\n}\nreturn {\n  default: MDXContent\n};\nfunction _missingMdxReference(id, component) {\n  throw new Error(\"Expected \" + (component ? \"component\" : \"object\") + \" `\" + id + \"` to be defined: you likely forgot to import, pass, or provide it.\");\n}\n"},"prevPost":{"meta":{"title":"Eclipse Vert.x 4.1.0.CR1 released!","category":"releases","authors":[{"name":"Julien Viet","github_id":"vietj"}],"summary":"The first candidate release of the upcoming Vert.x 4.1 has just been released. We consider it feature complete and invite the community to test it."},"date":"2021-05-21","slug":"eclipse-vert-x-4-1-CR1-released"},"nextPost":{"meta":{"title":"Eclipse Vert.x 4.1.0.Beta1 released!","category":"releases","authors":[{"name":"Julien Viet","github_id":"vietj"}],"summary":"The first beta of the upcoming Vert.x 4.1 has just been released. We consider it feature complete and invite the community to test it."},"date":"2021-05-12","slug":"eclipse-vert-x-4-1-Beta1-released"},"relatedPosts":[{"meta":{"title":"Things to keep in mind concerning CSRF attacks","category":"guides","authors":[{"name":"Xhelal Likaj","github_id":"xhlika"}],"summary":"Eclipse Vert.x like most frameworks provides an anti-CSRF defense. However, no framework can prevent all attack vectors that exist in the web. Therefore, developers need to be aware of some dangers and common attack vectors concerning CSRF defenses."},"date":"2021-01-23","slug":"eclipse-vert-x-CSRF-concerns"},{"meta":{"title":"Eclipse Vert.x 4.1.0.Beta1 released!","category":"releases","authors":[{"name":"Julien Viet","github_id":"vietj"}],"summary":"The first beta of the upcoming Vert.x 4.1 has just been released. We consider it feature complete and invite the community to test it."},"date":"2021-05-12","slug":"eclipse-vert-x-4-1-Beta1-released"},{"meta":{"title":"Building services and APIs with AMQP 1.0","category":"guides","authors":[{"name":"Jakub Scholz","github_id":"scholzj"}],"summary":"Microservices and APIs are everywhere. Everyone talks about them, presentation slides are full of them ... some people are actually even building them."},"date":"2017-01-25","slug":"building-services-and-apis-with-amqp-1-0"}]},"__N_SSG":true}