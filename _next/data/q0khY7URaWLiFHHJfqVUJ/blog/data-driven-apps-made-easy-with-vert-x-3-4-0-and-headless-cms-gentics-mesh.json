{"pageProps":{"categories":["releases","guides","security","news"],"post":{"meta":{"title":"Data-driven Apps made easy with Vert.x 3.4.0 and headless CMS Gentics Mesh","category":"guides","authors":[{"name":"Johannes Schüth","github_id":"jotschi"}],"summary":"I would like to share why Vert.x is not only a robust foundation for the headless Content Management System Gentics Mesh but also how it can be used to build a template-based web server."},"date":"2017-03-13","slug":"data-driven-apps-made-easy-with-vert-x-3-4-0-and-headless-cms-gentics-mesh","readingTime":{"text":"6 min read","minutes":5.8,"time":348000,"words":1160},"content":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = props.components || ({});\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, {})\n  })) : _createMdxContent();\n  function _createMdxContent() {\n    const _components = Object.assign({\n      p: \"p\",\n      a: \"a\",\n      h2: \"h2\",\n      h3: \"h3\",\n      pre: \"pre\",\n      code: \"code\",\n      span: \"span\",\n      em: \"em\",\n      img: \"img\",\n      ul: \"ul\",\n      li: \"li\"\n    }, props.components), {Link, Gist} = _components;\n    if (!Gist) _missingMdxReference(\"Gist\", true);\n    if (!Link) _missingMdxReference(\"Link\", true);\n    return _jsxs(_Fragment, {\n      children: [_jsxs(_components.p, {\n        children: [\"In this ar­ti­cle, I would like to share why Vert.x is not only a ro­bust foun­da­tion for the \", _jsx(_components.a, {\n          href: \"http://getmesh.io/\",\n          children: \"head­less Con­tent Man­age­ment Sys­tem Gen­tics Mesh\"\n        }), \" but also how the re­cent re­lease 3.4.0 can be used to build a template-​based web server with Gen­tics Mesh and han­dle­bars.\"]\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"A head­less CMS fo­cuses on de­liv­er­ing your con­tent through an API and al­lows ed­i­tors cre­at­ing and man­ag­ing that data through a web-​based in­ter­face. Un­like a tra­di­tional CMS, it does not pro­vide a specif­i­cally ren­dered out­put. The fron­tend part (the head) is lit­er­ally cut off, al­low­ing de­vel­op­ers cre­ate web­sites, apps, or any other data-​driven projects with their favourite tech­nolo­gies.\"\n      }), \"\\n\", _jsxs(_components.p, {\n        children: [_jsx(Link, {\n          href: \"/blog/vert-x-3-4-0-is-released/\",\n          passHref: true,\n          children: _jsx(_components.a, {\n            href: \"\",\n            children: \"Vert.x 3.4.0\"\n          })\n        }), \" has just been re­leased and it comes with a bunch of new fea­tures and bug fixes. I am es­pe­cially ex­cited about a small en­hance­ment that changes the way in which the han­dle­bars tem­plate en­gine han­dle their con­text data. Pre­vi­ously it was not pos­si­ble to re­solve Vert.x ‘s JsonOb­jects within the ren­der con­text. With my en­hance­ment \", _jsx(_components.a, {\n          href: \"https://github.com/vert-x3/vertx-web/pull/509\",\n          children: \"#509\"\n        }), \" - re­leased in Vert.x 3.4.0 - it is now pos­si­ble to ac­cess nested data from these ob­jects within your tem­plates. Pre­vi­ously this would have re­quired flat­ten­ing out each ob­ject and re­solv­ing it in­di­vid­u­ally, which would have been very cum­ber­some.\"]\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"I’m going to demon­strate this en­hance­ment by show­ing how to build a prod­uct cat­a­logue using Vert.x to­gether with han­dle­bars tem­plates to ren­der and serve the web pages. The prod­uct data is man­aged, stored and de­liv­ered by the CMS server as source for JSON data.\"\n      }), \"\\n\", _jsxs(_components.h2, {\n        id: \"clone-import-download-start---set-up-your-product-catalogue-website-quickly\",\n        children: [_jsx(_components.a, {\n          \"aria-hidden\": true,\n          tabIndex: \"-1\",\n          className: \"heading-anchor\",\n          href: \"#clone-import-download-start---set-up-your-product-catalogue-website-quickly\"\n        }), \"Clone, Import, Download, Start - Set up your product catalogue website quickly\"]\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"Let’s quickly set up every­thing you need to run the web­site be­fore I walk you through the code.\"\n      }), \"\\n\", _jsxs(_components.h3, {\n        id: \"1--clone---get-the-full-vertx-with-gentics-mesh-example-from-github\",\n        children: [_jsx(_components.a, {\n          \"aria-hidden\": true,\n          tabIndex: \"-1\",\n          className: \"heading-anchor\",\n          href: \"#1--clone---get-the-full-vertx-with-gentics-mesh-example-from-github\"\n        }), \"1.  Clone - \", _jsx(_components.a, {\n          href: \"https://github.com/gentics/mesh-vertx-example\",\n          children: \"Get the full Vert.x with Gentics Mesh example from Github\"\n        })]\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"Fire up your ter­mi­nal and clone the ex­am­ple ap­pli­ca­tion to the di­rec­tory of your choice.\"\n      }), \"\\n\", _jsx(_components.pre, {\n        children: _jsxs(_components.code, {\n          className: \"hljs language-bash\",\n          children: [\"git \", _jsx(_components.span, {\n            className: \"hljs-built_in\",\n            children: \"clone\"\n          }), \" git@github.com:gentics/mesh-vertx-example.git\\n\"]\n        })\n      }), \"\\n\", _jsxs(_components.h3, {\n        id: \"2-import---the-maven-project-in-your-favourite-ide\",\n        children: [_jsx(_components.a, {\n          \"aria-hidden\": true,\n          tabIndex: \"-1\",\n          className: \"heading-anchor\",\n          href: \"#2-import---the-maven-project-in-your-favourite-ide\"\n        }), \"2. Import - The maven project in your favourite IDE\"]\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"The ap­pli­ca­tion is set up as a maven project and can be im­ported in Eclipse IDE via File → Im­port → Ex­ist­ing Maven Project\"\n      }), \"\\n\", _jsxs(_components.h3, {\n        id: \"3-download-----get-the-headless-cms-gentics-mesh\",\n        children: [_jsx(_components.a, {\n          \"aria-hidden\": true,\n          tabIndex: \"-1\",\n          className: \"heading-anchor\",\n          href: \"#3-download-----get-the-headless-cms-gentics-mesh\"\n        }), \"3. Download  -  Get the headless CMS Gentics Mesh\"]\n      }), \"\\n\", _jsxs(_components.p, {\n        children: [_jsx(_components.a, {\n          href: \"http://getmesh.io/Download\",\n          children: \"Down­load the lat­est ver­sion of Gen­tics Mesh\"\n        }), \" and start the CMS with this one-​liner\"]\n      }), \"\\n\", _jsx(_components.pre, {\n        children: _jsx(_components.code, {\n          className: \"hljs language-bash\",\n          children: \"java -jar mesh-demo-0.6.xx.jar\\n\"\n        })\n      }), \"\\n\", _jsxs(_components.p, {\n        children: [\"For the cur­rent ex­am­ple we are going to use the read-​only user cre­den­tials (\", _jsx(_components.em, {\n          children: \"we­b­client:we­b­client\"\n        }), \").\\nIf you want to play around with the demo data you can point your browser to \", _jsx(_components.a, {\n          href: \"http://localhost:8080/mesh-ui/\",\n          children: \"http://lo­cal­host:8080/mesh-​ui/\"\n        }), \" to reach the Gen­tics Mesh user in­ter­face and use one of the \", _jsx(_components.a, {\n          href: \"http://getmesh.io/docs/beta/getting-started.html#_startup\",\n          children: \"avail­able demo cre­den­tials\"\n        }), \" to login.\"]\n      }), \"\\n\", _jsx(_components.p, {\n        children: _jsx(_components.img, {\n          src: \"/images/blog/vertx-mesh/mesh-ui.jpg\",\n          alt: \"Gentics Mesh User Interface\"\n        })\n      }), \"\\n\", _jsxs(_components.h3, {\n        id: \"4-start---the-application-and-browse-the-product-catalogue\",\n        children: [_jsx(_components.a, {\n          \"aria-hidden\": true,\n          tabIndex: \"-1\",\n          className: \"heading-anchor\",\n          href: \"#4-start---the-application-and-browse-the-product-catalogue\"\n        }), \"4. Start - The application and browse the product catalogue\"]\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"You can start the Vert.x web server by run­ning Server.java.\"\n      }), \"\\n\", _jsxs(_components.p, {\n        children: [\"That’s it - now you can ac­cess the prod­uct cat­a­logue web­site in your browser: \", _jsx(_components.a, {\n          href: \"http://localhost:3000\",\n          children: \"http://lo­cal­host:3000\"\n        })]\n      }), \"\\n\", _jsxs(_components.h2, {\n        id: \"why-vertx-is-a-good-fit-for-gentics-mesh\",\n        children: [_jsx(_components.a, {\n          \"aria-hidden\": true,\n          tabIndex: \"-1\",\n          className: \"heading-anchor\",\n          href: \"#why-vertx-is-a-good-fit-for-gentics-mesh\"\n        }), \"Why Vert.x is a good fit for Gentics Mesh\"]\n      }), \"\\n\", _jsxs(_components.p, {\n        children: [\"Be­fore dig­ging into the ex­am­ple, let me share a few thoughts on Vert.x and Gen­tics Mesh in com­bi­na­tion. In this ex­am­ple Vert.x is part of the fron­tend stack in de­liv­er­ing the prod­uct cat­a­logue web­site. But it might also be of in­ter­est to you that Vert.x is also used at the very heart of Gen­tics Mesh it­self. The Gen­tics Mesh \", _jsx(_components.a, {\n          href: \"http://getmesh.io/docs/beta/raml/\",\n          children: \"REST API end­points\"\n        }), \" are built on top of Vert.x as a core com­po­nent.\"]\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"The great thing about Vert.x is that there are a lot of de­fault im­ple­men­ta­tions for var­i­ous tasks such as au­then­ti­ca­tion, data­base in­te­gra­tion, mon­i­tor­ing and clus­ter­ing. It is pos­si­ble to use one or more fea­tures and omit the rest and thus your ap­pli­ca­tion re­mains light­weight.\"\n      }), \"\\n\", _jsxs(_components.h2, {\n        id: \"curious-about-the-code\",\n        children: [_jsx(_components.a, {\n          \"aria-hidden\": true,\n          tabIndex: \"-1\",\n          className: \"heading-anchor\",\n          href: \"#curious-about-the-code\"\n        }), \"Curious about the code?\"]\n      }), \"\\n\", _jsxs(_components.p, {\n        children: [\"Source: \", _jsx(_components.a, {\n          href: \"https://github.com/gentics/mesh-vertx-example\",\n          children: \"https://github.com/gen­tics/mesh-​vertx-example\"\n        })]\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"Now that every­thing is up and run­ning let’s have a de­tailed look at the code.\"\n      }), \"\\n\", _jsxs(_components.p, {\n        children: [\"A typ­i­cal de­ploy­ment unit for Vert.x is a \", _jsx(Link, {\n          href: \"/docs/vertx-core/java/#_verticles\",\n          passHref: true,\n          children: _jsx(_components.a, {\n            href: \"\",\n            children: \"ver­ti­cle\"\n          })\n        }), \". In our case we use the ver­ti­cle to bun­dle our code and run the web server within it. Once de­ployed, Vert.x will run the ver­ti­cle and start the HTTP server code.\"]\n      }), \"\\n\", _jsx(Gist, {\n        url: \"https://gist.github.com/Jotschi/39fc0d3fcd45122eafe68d61bea4c120\",\n        file: \"main.java\"\n      }), \"\\n\", _jsxs(_components.p, {\n        children: [\"The \", _jsx(_components.a, {\n          href: \"http://getmesh.io/docs/beta/#_java_rest_client\",\n          children: \"Gen­tics Mesh REST client\"\n        }), \" is used to com­mu­ni­cate with the Gen­tics Mesh server. The \", _jsx(Link, {\n          href: \"/docs/vertx-web/java/\",\n          passHref: true,\n          children: _jsx(_components.a, {\n            href: \"\",\n            children: \"Vert.x web li­brary\"\n          })\n        }), \" is used to set up our \", _jsx(Link, {\n          href: \"/docs/vertx-web/java/#_basic_vert_x_web_concepts\",\n          passHref: true,\n          children: _jsx(_components.a, {\n            href: \"\",\n            children: \"HTTP Router\"\n          })\n        }), \". As with other rout­ing frame­works like \", _jsx(_components.em, {\n          children: \"Silex\"\n        }), \" and \", _jsx(_components.em, {\n          children: \"Ex­press\"\n        }), \", the router can be used to cre­ate routes for in­bound HTTP re­quests. In our case we only need two routes. The main route which ac­cepts the re­quest will uti­lize the \", _jsx(_components.a, {\n          href: \"http://getmesh.io/docs/beta/#_webroot\",\n          children: \"Gen­tics Mesh We­b­root API End­point\"\n        }), \" which is able to re­solve con­tent by a pro­vided path. It will ex­am­ine the re­sponse and add fields to the rout­ing con­text.\"]\n      }), \"\\n\", _jsxs(_components.p, {\n        children: [\"The other route is chained and will take the pre­vi­ously pre­pared rout­ing con­text and ren­der the de­sired tem­plate using the \", _jsx(Link, {\n          href: \"/docs/vertx-web/java/#_templates\",\n          passHref: true,\n          children: _jsx(_components.a, {\n            href: \"\",\n            children: \"han­dle­bars tem­plate han­dler\"\n          })\n        }), \".\"]\n      }), \"\\n\", _jsx(Gist, {\n        url: \"https://gist.github.com/Jotschi/39fc0d3fcd45122eafe68d61bea4c120\",\n        file: \"start.java\"\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"First we can han­dle var­i­ous spe­cial re­quests path such as ”/” for the wel­come page. Or the typ­i­cal fav­i­con.ico re­quest. Other re­quests are passed to the We­b­root API han­dler method.\"\n      }), \"\\n\", _jsx(Gist, {\n        url: \"https://gist.github.com/Jotschi/39fc0d3fcd45122eafe68d61bea4c120\",\n        file: \"pathHandler.java\"\n      }), \"\\n\", _jsxs(_components.p, {\n        children: [\"Once the path has been re­solved to a \", _jsx(_components.em, {\n          children: \"We­b­RootRe­sponse\"\n        }), \" we can ex­am­ine that data and de­ter­mine whether it is a bi­nary re­sponse or a JSON re­sponse. Bi­nary re­sponses may occur if the re­quested re­source rep­re­sents an image or any other bi­nary data. Re­solved bi­nary con­tents are di­rectly passed through to the client and the han­dle­bars route is not in­voked.\"]\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"Ex­am­ples\"\n      }), \"\\n\", _jsxs(_components.ul, {\n        children: [\"\\n\", _jsxs(_components.li, {\n          children: [_jsx(_components.a, {\n            href: \"http://localhost:3000/\",\n            children: \"http://lo­cal­host:3000/\"\n          }), \" → wel­come.hbs\"]\n        }), \"\\n\", _jsxs(_components.li, {\n          children: [_jsx(_components.a, {\n            href: \"http://localhost:3000/Automobiles\",\n            children: \"http://lo­cal­host:3000/Au­to­mo­biles\"\n          }), \" → cat­e­gory → pro­ductList.hbs\"]\n        }), \"\\n\", _jsxs(_components.li, {\n          children: [_jsx(_components.a, {\n            href: \"http://localhost:3000/Automobiles/Tesla%20Roadster\",\n            children: \"http://lo­cal­host:3000/Au­to­mo­biles/Tesla Road­ster\"\n          }), \" → ve­hi­cle → pro­duct­De­tail.hbs\"]\n        }), \"\\n\", _jsxs(_components.li, {\n          children: [_jsx(_components.a, {\n            href: \"http://localhost:3000/Vehicle%20Images/tesla-roadster.jpg\",\n            children: \"http://lo­cal­host:3000/Ve­hi­cle Im­ages/tesla-​roadster.jpg\"\n          }), \" → bi­nary passthru\"]\n        }), \"\\n\"]\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"JSON re­sponses on the other hand are ex­am­ined to de­ter­mine the type of node which was lo­cated. A typ­i­cal node re­sponse con­tains in­for­ma­tion about the schema used by the node. This will ef­fec­tively de­ter­mine the type of the lo­cated con­tent (e.g.: cat­e­gory, ve­hi­cle).\"\n      }), \"\\n\", _jsx(Gist, {\n        url: \"https://gist.github.com/Jotschi/39fc0d3fcd45122eafe68d61bea4c120\",\n        file: \"routeHandler.java\"\n      }), \"\\n\", _jsx(_components.p, {\n        children: _jsx(_components.img, {\n          src: \"/images/blog/vertx-mesh/mesh-schemas.jpg\",\n          alt: \"Mesh Schemas\"\n        })\n      }), \"\\n\", _jsxs(_components.p, {\n        children: [\"The demo ap­pli­ca­tion serves dif­fer­ent pages which cor­re­spond to the iden­ti­fied type.\\nTake a look at the tem­plate sources within \", _jsx(_components.em, {\n          children: \"src/main/re­sources/tem­plates/\"\n        }), \" if you are in­ter­ested in the \", _jsx(_components.a, {\n          href: \"http://handlebarsjs.com/\",\n          children: \"han­dle­bars syn­tax\"\n        }), \".\\nThe tem­plates in the ex­am­ple should cover most com­mon cases.\"]\n      }), \"\\n\", _jsx(_components.p, {\n        children: _jsx(_components.img, {\n          src: \"/images/blog/vertx-mesh/mesh-vertx-templates.jpg\",\n          alt: \"Handlebars Template Overview\"\n        })\n      }), \"\\n\", _jsxs(_components.p, {\n        children: [\"The Mesh REST Client li­brary in­ter­nally makes use of the \", _jsx(Link, {\n          href: \"/docs/vertx-core/java/#_creating_an_http_client\",\n          passHref: true,\n          children: _jsx(_components.a, {\n            href: \"\",\n            children: \"Vert.x core HTTP client\"\n          })\n        }), \".\"]\n      }), \"\\n\", _jsxs(_components.p, {\n        children: [_jsx(_components.a, {\n          href: \"https://github.com/ReactiveX/RxJava\",\n          children: \"Rx­Java\"\n        }), \" is being used to han­dle these async re­quests. This way we can com­bine all asyn­chro­nously re­quested Gen­tics Mesh re­sources (bread­crumb, list of prod­ucts) and add the loaded data into the rout­ing con­text.\"]\n      }), \"\\n\", _jsxs(_components.p, {\n        children: [\"The Vert.x ex­am­ple server loads JSON con­tent from the Gen­tics Mesh server. The \", _jsx(_components.em, {\n          children: \"JsonOb­ject\"\n        }), \" is placed in the \", _jsx(_components.a, {\n          href: \"https://github.com/jknack/handlebars.java\",\n          children: \"han­dle­bars\"\n        }), \" ren­der con­text and the tem­plate can ac­cess all nested fields within.\"]\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"This way it is pos­si­ble to re­solve any field within the han­dle­bars tem­plate.\"\n      }), \"\\n\", _jsx(Gist, {\n        url: \"https://gist.github.com/Jotschi/39fc0d3fcd45122eafe68d61bea4c120\",\n        file: \"template.example\"\n      }), \"\\n\", _jsxs(_components.p, {\n        children: [\"That’s it! Fi­nally, we can in­voke mvn clean pack­age in order to pack­age our web­server. The \", _jsx(_components.a, {\n          href: \"https://maven.apache.org/plugins/maven-shade-plugin/\",\n          children: \"maven-​shade-plugin\"\n        }), \" will bun­dle every­thing and cre­ate an ex­e­cutable jar.\"]\n      }), \"\\n\", _jsxs(_components.h2, {\n        id: \"whats-next\",\n        children: [_jsx(_components.a, {\n          \"aria-hidden\": true,\n          tabIndex: \"-1\",\n          className: \"heading-anchor\",\n          href: \"#whats-next\"\n        }), \"What’s next?\"]\n      }), \"\\n\", _jsxs(_components.p, {\n        children: [\"Fu­ture re­leases of Gen­tics Mesh will re­fine the Mesh REST Client API and pro­vide a \", _jsx(_components.a, {\n          href: \"http://graphql.org/\",\n          children: \"GraphQL\"\n        }), \" which will re­duce the JSON over­head. Using GraphQL will also re­duce the amount of re­quests which need to be is­sued.\"]\n      }), \"\\n\", _jsxs(_components.p, {\n        children: [\"Thanks for read­ing. If you have any futher ques­tions or feed­back don’t hes­i­tate to send me a tweet to \", _jsx(_components.a, {\n          href: \"https://twitter.com/Jotschi/\",\n          children: \"@Jotschi\"\n        }), \" or \", _jsx(_components.a, {\n          href: \"https://twitter.com/genticsmesh/\",\n          children: \"@gen­tic­smesh\"\n        }), \".\"]\n      })]\n    });\n  }\n}\nreturn {\n  default: MDXContent\n};\nfunction _missingMdxReference(id, component) {\n  throw new Error(\"Expected \" + (component ? \"component\" : \"object\") + \" `\" + id + \"` to be defined: you likely forgot to import, pass, or provide it.\");\n}\n"},"prevPost":{"meta":{"title":"Scala is here","category":"guides","authors":[{"name":"Jochen Mader","github_id":"codepitbull"}],"summary":"The rise of Scala as one of the most important languages on the JVM caught many (me included) by surprise. This hybrid of functional and imperative paradigms struck a chord with many developers."},"date":"2017-03-20","slug":"scala-is-here"},"nextPost":{"meta":{"title":"Vert.x 3.4.0 is released!","category":"releases","authors":[{"name":"Julien Viet","github_id":"vietj"}],"summary":"Vert.x 3.4.0 has just been released with many new exciting features!"},"date":"2017-03-07","slug":"vert-x-3-4-0-is-released"},"relatedPosts":[{"meta":{"title":"Things to keep in mind concerning CSRF attacks","category":"guides","authors":[{"name":"Xhelal Likaj","github_id":"xhlika"}],"summary":"Eclipse Vert.x like most frameworks provides an anti-CSRF defense. However, no framework can prevent all attack vectors that exist in the web. Therefore, developers need to be aware of some dangers and common attack vectors concerning CSRF defenses."},"date":"2021-01-23","slug":"eclipse-vert-x-CSRF-concerns"},{"meta":{"title":"Real-time bidding with Websockets and Vert.x","category":"guides","authors":[{"name":"Marcin Warczyglowa","github_id":"mwarc"}],"summary":"The expectations of users for interactivity with web applications have changed over the past few years.\n    Users during bidding in auction no longer want to press the refresh button."},"date":"2016-01-15","slug":"real-time-bidding-with-websockets-and-vert-x"},{"meta":{"title":"An Introduction to the Vert.x Context Object","category":"guides","authors":[{"name":"Jez Prime","github_id":"millross"}],"summary":"Under the hood, the vert.x Context class plays a critical part in maintaining the thread-safety guarantees of verticles. Most of the time, vert.x coders don't need to make use of Context objects directly."},"date":"2017-01-31","slug":"an-introduction-to-the-vert-x-context-object"}]},"__N_SSG":true}